var zS=n=>{throw TypeError(n)};var Ry=(n,e,t)=>e.has(n)||zS("Cannot "+t);var V=(n,e,t)=>(Ry(n,e,"read from private field"),t?t.call(n):e.get(n)),qe=(n,e,t)=>e.has(n)?zS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Se=(n,e,t,r)=>(Ry(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),rt=(n,e,t)=>(Ry(n,e,"access private method"),t);var ep=(n,e,t,r)=>({set _(a){Se(n,e,a,t)},get _(){return V(n,e,r)}});import{g as fx}from"./index-DmbcRK2h.js";function zM(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(n,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Ty={exports:{}},hf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function UM(){if(US)return hf;US=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:n,type:r,key:o,ref:a!==void 0?a:null,props:i}}return hf.Fragment=e,hf.jsx=t,hf.jsxs=t,hf}var VS;function VM(){return VS||(VS=1,Ty.exports=UM()),Ty.exports}var jM=VM(),Oy={exports:{}},df={},Ay={exports:{}},ky={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function qM(){return jS||(jS=1,function(n){function e(q,Z){var G=q.length;q.push(Z);e:for(;0<G;){var Y=G-1>>>1,F=q[Y];if(0<a(F,Z))q[Y]=Z,q[G]=F,G=Y;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],G=q.pop();if(G!==Z){q[0]=G;e:for(var Y=0,F=q.length,K=F>>>1;Y<K;){var se=2*(Y+1)-1,fe=q[se],he=se+1,be=q[he];if(0>a(fe,G))he<F&&0>a(be,fe)?(q[Y]=be,q[he]=G,Y=he):(q[Y]=fe,q[se]=G,Y=se);else if(he<F&&0>a(be,G))q[Y]=be,q[he]=G,Y=he;else break e}}return Z}function a(q,Z){var G=q.sortIndex-Z.sortIndex;return G!==0?G:q.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var c=[],f=[],d=1,p=null,v=3,g=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function C(q){for(var Z=t(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=q)r(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(f)}}function R(q){if(x=!1,C(q),!y)if(t(c)!==null)y=!0,te();else{var Z=t(f);Z!==null&&re(R,Z.startTime-q)}}var T=!1,O=-1,D=5,N=-1;function k(){return!(n.unstable_now()-N<D)}function I(){if(T){var q=n.unstable_now();N=q;var Z=!0;try{e:{y=!1,x&&(x=!1,_(O),O=-1),g=!0;var G=v;try{t:{for(C(q),p=t(c);p!==null&&!(p.expirationTime>q&&k());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,v=p.priorityLevel;var F=Y(p.expirationTime<=q);if(q=n.unstable_now(),typeof F=="function"){p.callback=F,C(q),Z=!0;break t}p===t(c)&&r(c),C(q)}else r(c);p=t(c)}if(p!==null)Z=!0;else{var K=t(f);K!==null&&re(R,K.startTime-q),Z=!1}}break e}finally{p=null,v=G,g=!1}Z=void 0}}finally{Z?B():T=!1}}}var B;if(typeof S=="function")B=function(){S(I)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ee=U.port2;U.port1.onmessage=I,B=function(){ee.postMessage(null)}}else B=function(){w(I,0)};function te(){T||(T=!0,B())}function re(q,Z){O=w(function(){q(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,te())},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(q){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var G=v;v=Z;try{return q()}finally{v=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=v;v=q;try{return Z()}finally{v=G}},n.unstable_scheduleCallback=function(q,Z,G){var Y=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=G+F,q={id:d++,callback:Z,priorityLevel:q,startTime:G,expirationTime:F,sortIndex:-1},G>Y?(q.sortIndex=G,e(f,q),t(c)===null&&q===t(f)&&(x?(_(O),O=-1):x=!0,re(R,G-Y))):(q.sortIndex=F,e(c,q),y||g||(y=!0,te())),q},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(q){var Z=v;return function(){var G=v;v=Z;try{return q.apply(this,arguments)}finally{v=G}}}}(ky)),ky}var qS;function WM(){return qS||(qS=1,Ay.exports=qM()),Ay.exports}var Dy={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WS;function HM(){if(WS)return tt;WS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function w(F,K,se){this.props=F,this.context=K,this.refs=x,this.updater=se||g}w.prototype.isReactComponent={},w.prototype.setState=function(F,K){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,K,"setState")},w.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=w.prototype;function S(F,K,se){this.props=F,this.context=K,this.refs=x,this.updater=se||g}var C=S.prototype=new _;C.constructor=S,y(C,w.prototype),C.isPureReactComponent=!0;var R=Array.isArray,T={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function D(F,K,se,fe,he,be){return se=be.ref,{$$typeof:n,type:F,key:K,ref:se!==void 0?se:null,props:be}}function N(F,K){return D(F.type,K,void 0,void 0,void 0,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function I(F){var K={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(se){return K[se]})}var B=/\/+/g;function U(F,K){return typeof F=="object"&&F!==null&&F.key!=null?I(""+F.key):K.toString(36)}function ee(){}function te(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ee,ee):(F.status="pending",F.then(function(K){F.status==="pending"&&(F.status="fulfilled",F.value=K)},function(K){F.status==="pending"&&(F.status="rejected",F.reason=K)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function re(F,K,se,fe,he){var be=typeof F;(be==="undefined"||be==="boolean")&&(F=null);var ye=!1;if(F===null)ye=!0;else switch(be){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(F.$$typeof){case n:case e:ye=!0;break;case d:return ye=F._init,re(ye(F._payload),K,se,fe,he)}}if(ye)return he=he(F),ye=fe===""?"."+U(F,0):fe,R(he)?(se="",ye!=null&&(se=ye.replace(B,"$&/")+"/"),re(he,K,se,"",function(Oe){return Oe})):he!=null&&(k(he)&&(he=N(he,se+(he.key==null||F&&F.key===he.key?"":(""+he.key).replace(B,"$&/")+"/")+ye)),K.push(he)),1;ye=0;var Be=fe===""?".":fe+":";if(R(F))for(var xe=0;xe<F.length;xe++)fe=F[xe],be=Be+U(fe,xe),ye+=re(fe,K,se,be,he);else if(xe=v(F),typeof xe=="function")for(F=xe.call(F),xe=0;!(fe=F.next()).done;)fe=fe.value,be=Be+U(fe,xe++),ye+=re(fe,K,se,be,he);else if(be==="object"){if(typeof F.then=="function")return re(te(F),K,se,fe,he);throw K=String(F),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ye}function q(F,K,se){if(F==null)return F;var fe=[],he=0;return re(F,fe,"","",function(be){return K.call(se,be,he++)}),fe}function Z(F){if(F._status===-1){var K=F._result;K=K(),K.then(function(se){(F._status===0||F._status===-1)&&(F._status=1,F._result=se)},function(se){(F._status===0||F._status===-1)&&(F._status=2,F._result=se)}),F._status===-1&&(F._status=0,F._result=K)}if(F._status===1)return F._result.default;throw F._result}var G=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Y(){}return tt.Children={map:q,forEach:function(F,K,se){q(F,function(){K.apply(this,arguments)},se)},count:function(F){var K=0;return q(F,function(){K++}),K},toArray:function(F){return q(F,function(K){return K})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},tt.Component=w,tt.Fragment=t,tt.Profiler=a,tt.PureComponent=S,tt.StrictMode=r,tt.Suspense=c,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,tt.act=function(){throw Error("act(...) is not supported in production builds of React.")},tt.cache=function(F){return function(){return F.apply(null,arguments)}},tt.cloneElement=function(F,K,se){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var fe=y({},F.props),he=F.key,be=void 0;if(K!=null)for(ye in K.ref!==void 0&&(be=void 0),K.key!==void 0&&(he=""+K.key),K)!O.call(K,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&K.ref===void 0||(fe[ye]=K[ye]);var ye=arguments.length-2;if(ye===1)fe.children=se;else if(1<ye){for(var Be=Array(ye),xe=0;xe<ye;xe++)Be[xe]=arguments[xe+2];fe.children=Be}return D(F.type,he,void 0,void 0,be,fe)},tt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:i,_context:F},F},tt.createElement=function(F,K,se){var fe,he={},be=null;if(K!=null)for(fe in K.key!==void 0&&(be=""+K.key),K)O.call(K,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(he[fe]=K[fe]);var ye=arguments.length-2;if(ye===1)he.children=se;else if(1<ye){for(var Be=Array(ye),xe=0;xe<ye;xe++)Be[xe]=arguments[xe+2];he.children=Be}if(F&&F.defaultProps)for(fe in ye=F.defaultProps,ye)he[fe]===void 0&&(he[fe]=ye[fe]);return D(F,be,void 0,void 0,null,he)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(F){return{$$typeof:u,render:F}},tt.isValidElement=k,tt.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:Z}},tt.memo=function(F,K){return{$$typeof:f,type:F,compare:K===void 0?null:K}},tt.startTransition=function(F){var K=T.T,se={};T.T=se;try{var fe=F(),he=T.S;he!==null&&he(se,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Y,G)}catch(be){G(be)}finally{T.T=K}},tt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},tt.use=function(F){return T.H.use(F)},tt.useActionState=function(F,K,se){return T.H.useActionState(F,K,se)},tt.useCallback=function(F,K){return T.H.useCallback(F,K)},tt.useContext=function(F){return T.H.useContext(F)},tt.useDebugValue=function(){},tt.useDeferredValue=function(F,K){return T.H.useDeferredValue(F,K)},tt.useEffect=function(F,K){return T.H.useEffect(F,K)},tt.useId=function(){return T.H.useId()},tt.useImperativeHandle=function(F,K,se){return T.H.useImperativeHandle(F,K,se)},tt.useInsertionEffect=function(F,K){return T.H.useInsertionEffect(F,K)},tt.useLayoutEffect=function(F,K){return T.H.useLayoutEffect(F,K)},tt.useMemo=function(F,K){return T.H.useMemo(F,K)},tt.useOptimistic=function(F,K){return T.H.useOptimistic(F,K)},tt.useReducer=function(F,K,se){return T.H.useReducer(F,K,se)},tt.useRef=function(F){return T.H.useRef(F)},tt.useState=function(F){return T.H.useState(F)},tt.useSyncExternalStore=function(F,K,se){return T.H.useSyncExternalStore(F,K,se)},tt.useTransition=function(){return T.H.useTransition()},tt.version="19.0.0",tt}var HS;function Fv(){return HS||(HS=1,Dy.exports=HM()),Dy.exports}var Ny={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS;function GM(){if(GS)return jn;GS=1;var n=Fv();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return i(c,f,null,d)},jn.flushSync=function(c){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=d,r.d.f()}},jn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},jn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},jn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=u(d,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:g}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},jn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=u(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},jn.requestFormReset=function(c){r.d.r(c)},jn.unstable_batchedUpdates=function(c,f){return c(f)},jn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},jn.useFormStatus=function(){return o.H.useHostTransitionStatus()},jn.version="19.0.0",jn}var QS;function QM(){if(QS)return Ny.exports;QS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ny.exports=GM(),Ny.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S;function $M(){if($S)return df;$S=1;var n=WM(),e=Fv(),t=QM();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var i=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),R=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=T&&s[T]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function N(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case w:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case g:return(s.displayName||"Context")+".Provider";case v:return(s._context.displayName||"Context")+".Consumer";case y:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case _:return l=s.displayName||null,l!==null?l:N(s.type)||"Memo";case S:l=s._payload,s=s._init;try{return N(s(l))}catch{}}return null}var k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,B,U;function ee(s){if(B===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||"",U=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+s+U}var te=!1;function re(s,l){if(!s||te)return"";te=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var ae=le}Reflect.construct(s,[],me)}else{try{me.call()}catch(le){ae=le}s.call(me.prototype)}}else{try{throw Error()}catch(le){ae=le}(me=s())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),A=E[0],M=E[1];if(A&&M){var z=A.split(`
`),Q=M.split(`
`);for(b=m=0;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;for(;b<Q.length&&!Q[b].includes("DetermineComponentFrameRoot");)b++;if(m===z.length||b===Q.length)for(m=z.length-1,b=Q.length-1;1<=m&&0<=b&&z[m]!==Q[b];)b--;for(;1<=m&&0<=b;m--,b--)if(z[m]!==Q[b]){if(m!==1||b!==1)do if(m--,b--,0>b||z[m]!==Q[b]){var ce=`
`+z[m].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=m&&0<=b);break}}}finally{te=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?ee(h):""}function q(s){switch(s.tag){case 26:case 27:case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return s=re(s.type,!1),s;case 11:return s=re(s.type.render,!1),s;case 1:return s=re(s.type,!0),s;default:return""}}function Z(s){try{var l="";do l+=q(s),s=s.return;while(s);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function G(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function Y(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function F(s){if(G(s)!==s)throw Error(r(188))}function K(s){var l=s.alternate;if(!l){if(l=G(s),l===null)throw Error(r(188));return l!==s?null:s}for(var h=s,m=l;;){var b=h.return;if(b===null)break;var E=b.alternate;if(E===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===h)return F(b),s;if(E===m)return F(b),l;E=E.sibling}throw Error(r(188))}if(h.return!==m.return)h=b,m=E;else{for(var A=!1,M=b.child;M;){if(M===h){A=!0,h=b,m=E;break}if(M===m){A=!0,m=b,h=E;break}M=M.sibling}if(!A){for(M=E.child;M;){if(M===h){A=!0,h=E,m=b;break}if(M===m){A=!0,m=E,h=b;break}M=M.sibling}if(!A)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?s:l}function se(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=se(s),l!==null)return l;s=s.sibling}return null}var fe=Array.isArray,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ye=[],Be=-1;function xe(s){return{current:s}}function Oe(s){0>Be||(s.current=ye[Be],ye[Be]=null,Be--)}function je(s,l){Be++,ye[Be]=s.current,s.current=l}var Ve=xe(null),$e=xe(null),Ye=xe(null),bt=xe(null);function St(s,l){switch(je(Ye,l),je($e,s),je(Ve,null),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)&&(l=l.namespaceURI)?pS(l):0;break;default:if(s=s===8?l.parentNode:l,l=s.tagName,s=s.namespaceURI)s=pS(s),l=vS(s,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Oe(Ve),je(Ve,l)}function yt(){Oe(Ve),Oe($e),Oe(Ye)}function or(s){s.memoizedState!==null&&je(bt,s);var l=Ve.current,h=vS(l,s.type);l!==h&&(je($e,s),je(Ve,h))}function Yn(s){$e.current===s&&(Oe(Ve),Oe($e)),bt.current===s&&(Oe(bt),sf._currentValue=be)}var kn=Object.prototype.hasOwnProperty,Sa=n.unstable_scheduleCallback,yr=n.unstable_cancelCallback,Ca=n.unstable_shouldYield,ta=n.unstable_requestPaint,Dn=n.unstable_now,na=n.unstable_getCurrentPriorityLevel,hu=n.unstable_ImmediatePriority,oi=n.unstable_UserBlockingPriority,Zn=n.unstable_NormalPriority,pc=n.unstable_LowPriority,qh=n.unstable_IdlePriority,bm=n.log,xm=n.unstable_setDisableYieldValue,si=null,Nn=null;function vc(s){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(si,s,void 0,(s.current.flags&128)===128)}catch{}}function $i(s){if(typeof bm=="function"&&xm(s),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(si,s)}catch{}}var br=Math.clz32?Math.clz32:RN,SN=Math.log,CN=Math.LN2;function RN(s){return s>>>=0,s===0?32:31-(SN(s)/CN|0)|0}var Wh=128,Hh=4194304;function as(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gh(s,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,b=s.suspendedLanes,E=s.pingedLanes,A=s.warmLanes;s=s.finishedLanes!==0;var M=h&134217727;return M!==0?(h=M&~b,h!==0?m=as(h):(E&=M,E!==0?m=as(E):s||(A=M&~A,A!==0&&(m=as(A))))):(M=h&~b,M!==0?m=as(M):E!==0?m=as(E):s||(A=h&~A,A!==0&&(m=as(A)))),m===0?0:l!==0&&l!==m&&(l&b)===0&&(b=m&-m,A=l&-l,b>=A||b===32&&(A&4194176)!==0)?l:m}function mc(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function TN(s,l){switch(s){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ow(){var s=Wh;return Wh<<=1,(Wh&4194176)===0&&(Wh=128),s}function sw(){var s=Hh;return Hh<<=1,(Hh&62914560)===0&&(Hh=4194304),s}function wm(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function gc(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ON(s,l,h,m,b,E){var A=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var M=s.entanglements,z=s.expirationTimes,Q=s.hiddenUpdates;for(h=A&~h;0<h;){var ce=31-br(h),me=1<<ce;M[ce]=0,z[ce]=-1;var ae=Q[ce];if(ae!==null)for(Q[ce]=null,ce=0;ce<ae.length;ce++){var le=ae[ce];le!==null&&(le.lane&=-536870913)}h&=~me}m!==0&&uw(s,m,0),E!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=E&~(A&~l))}function uw(s,l,h){s.pendingLanes|=l,s.suspendedLanes&=~l;var m=31-br(l);s.entangledLanes|=l,s.entanglements[m]=s.entanglements[m]|1073741824|h&4194218}function lw(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var m=31-br(h),b=1<<m;b&l|s[m]&l&&(s[m]|=l),h&=~b}}function cw(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function fw(){var s=he.p;return s!==0?s:(s=window.event,s===void 0?32:IS(s.type))}function AN(s,l){var h=he.p;try{return he.p=s,l()}finally{he.p=h}}var Ki=Math.random().toString(36).slice(2),Un="__reactFiber$"+Ki,sr="__reactProps$"+Ki,du="__reactContainer$"+Ki,_m="__reactEvents$"+Ki,kN="__reactListeners$"+Ki,DN="__reactHandles$"+Ki,hw="__reactResources$"+Ki,yc="__reactMarker$"+Ki;function Em(s){delete s[Un],delete s[sr],delete s[_m],delete s[kN],delete s[DN]}function is(s){var l=s[Un];if(l)return l;for(var h=s.parentNode;h;){if(l=h[du]||h[Un]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=yS(s);s!==null;){if(h=s[Un])return h;s=yS(s)}return l}s=h,h=s.parentNode}return null}function pu(s){if(s=s[Un]||s[du]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function bc(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function vu(s){var l=s[hw];return l||(l=s[hw]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function bn(s){s[yc]=!0}var dw=new Set,pw={};function os(s,l){mu(s,l),mu(s+"Capture",l)}function mu(s,l){for(pw[s]=l,s=0;s<l.length;s++)dw.add(l[s])}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vw={},mw={};function IN(s){return kn.call(mw,s)?!0:kn.call(vw,s)?!1:NN.test(s)?mw[s]=!0:(vw[s]=!0,!1)}function Qh(s,l,h){if(IN(l))if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+h)}}function $h(s,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+h)}}function li(s,l,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(l,h,""+m)}}function Mr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function gw(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function MN(s){var l=gw(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,E=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(A){m=""+A,E.call(this,A)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(A){m=""+A},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Kh(s){s._valueTracker||(s._valueTracker=MN(s))}function yw(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),m="";return s&&(m=gw(s)?s.checked?"true":"false":s.value),s=m,s!==h?(l.setValue(s),!0):!1}function Xh(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var FN=/[\n"\\]/g;function Fr(s){return s.replace(FN,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Sm(s,l,h,m,b,E,A,M){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),l!=null?A==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Mr(l)):s.value!==""+Mr(l)&&(s.value=""+Mr(l)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),l!=null?Cm(s,A,Mr(l)):h!=null?Cm(s,A,Mr(h)):m!=null&&s.removeAttribute("value"),b==null&&E!=null&&(s.defaultChecked=!!E),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+Mr(M):s.removeAttribute("name")}function bw(s,l,h,m,b,E,A,M){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),l!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||l!=null))return;h=h!=null?""+Mr(h):"",l=l!=null?""+Mr(l):h,M||l===s.value||(s.value=l),s.defaultValue=l}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=M?s.checked:!!m,s.defaultChecked=!!m,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A)}function Cm(s,l,h){l==="number"&&Xh(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function gu(s,l,h,m){if(s=s.options,l){l={};for(var b=0;b<h.length;b++)l["$"+h[b]]=!0;for(h=0;h<s.length;h++)b=l.hasOwnProperty("$"+s[h].value),s[h].selected!==b&&(s[h].selected=b),b&&m&&(s[h].defaultSelected=!0)}else{for(h=""+Mr(h),l=null,b=0;b<s.length;b++){if(s[b].value===h){s[b].selected=!0,m&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function xw(s,l,h){if(l!=null&&(l=""+Mr(l),l!==s.value&&(s.value=l),h==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=h!=null?""+Mr(h):""}function ww(s,l,h,m){if(l==null){if(m!=null){if(h!=null)throw Error(r(92));if(fe(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),l=h}h=Mr(l),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m)}function yu(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var LN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _w(s,l,h){var m=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":m?s.setProperty(l,h):typeof h!="number"||h===0||LN.has(l)?l==="float"?s.cssFloat=h:s[l]=(""+h).trim():s[l]=h+"px"}function Ew(s,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var b in l)m=l[b],l.hasOwnProperty(b)&&h[b]!==m&&_w(s,b,m)}else for(var E in l)l.hasOwnProperty(E)&&_w(s,E,l[E])}function Rm(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yh(s){return BN.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Tm=null;function Om(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var bu=null,xu=null;function Sw(s){var l=pu(s);if(l&&(s=l.stateNode)){var h=s[sr]||null;e:switch(s=l.stateNode,l.type){case"input":if(Sm(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Fr(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var m=h[l];if(m!==s&&m.form===s.form){var b=m[sr]||null;if(!b)throw Error(r(90));Sm(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<h.length;l++)m=h[l],m.form===s.form&&yw(m)}break e;case"textarea":xw(s,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&gu(s,!!h.multiple,l,!1)}}}var Am=!1;function Cw(s,l,h){if(Am)return s(l,h);Am=!0;try{var m=s(l);return m}finally{if(Am=!1,(bu!==null||xu!==null)&&(Md(),bu&&(l=bu,s=xu,xu=bu=null,Sw(l),s)))for(l=0;l<s.length;l++)Sw(s[l])}}function xc(s,l){var h=s.stateNode;if(h===null)return null;var m=h[sr]||null;if(m===null)return null;h=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var km=!1;if(ui)try{var wc={};Object.defineProperty(wc,"passive",{get:function(){km=!0}}),window.addEventListener("test",wc,wc),window.removeEventListener("test",wc,wc)}catch{km=!1}var Xi=null,Dm=null,Zh=null;function Rw(){if(Zh)return Zh;var s,l=Dm,h=l.length,m,b="value"in Xi?Xi.value:Xi.textContent,E=b.length;for(s=0;s<h&&l[s]===b[s];s++);var A=h-s;for(m=1;m<=A&&l[h-m]===b[E-m];m++);return Zh=b.slice(s,1<m?1-m:void 0)}function Jh(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function ed(){return!0}function Tw(){return!1}function ur(s){function l(h,m,b,E,A){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=E,this.target=A,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(h=s[M],this[M]=h?h(E):E[M]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ed:Tw,this.isPropagationStopped=Tw,this}return I(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ed)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ed)},persist:function(){},isPersistent:ed}),l}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=ur(ss),_c=I({},ss,{view:0,detail:0}),zN=ur(_c),Nm,Im,Ec,nd=I({},_c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ec&&(Ec&&s.type==="mousemove"?(Nm=s.screenX-Ec.screenX,Im=s.screenY-Ec.screenY):Im=Nm=0,Ec=s),Nm)},movementY:function(s){return"movementY"in s?s.movementY:Im}}),Ow=ur(nd),UN=I({},nd,{dataTransfer:0}),VN=ur(UN),jN=I({},_c,{relatedTarget:0}),Mm=ur(jN),qN=I({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),WN=ur(qN),HN=I({},ss,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),GN=ur(HN),QN=I({},ss,{data:0}),Aw=ur(QN),$N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YN(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=XN[s])?!!l[s]:!1}function Fm(){return YN}var ZN=I({},_c,{key:function(s){if(s.key){var l=$N[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Jh(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?KN[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fm,charCode:function(s){return s.type==="keypress"?Jh(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Jh(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),JN=ur(ZN),eI=I({},nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kw=ur(eI),tI=I({},_c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fm}),nI=ur(tI),rI=I({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),aI=ur(rI),iI=I({},nd,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),oI=ur(iI),sI=I({},ss,{newState:0,oldState:0}),uI=ur(sI),lI=[9,13,27,32],Lm=ui&&"CompositionEvent"in window,Sc=null;ui&&"documentMode"in document&&(Sc=document.documentMode);var cI=ui&&"TextEvent"in window&&!Sc,Dw=ui&&(!Lm||Sc&&8<Sc&&11>=Sc),Nw=" ",Iw=!1;function Mw(s,l){switch(s){case"keyup":return lI.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fw(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var wu=!1;function fI(s,l){switch(s){case"compositionend":return Fw(l);case"keypress":return l.which!==32?null:(Iw=!0,Nw);case"textInput":return s=l.data,s===Nw&&Iw?null:s;default:return null}}function hI(s,l){if(wu)return s==="compositionend"||!Lm&&Mw(s,l)?(s=Rw(),Zh=Dm=Xi=null,wu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Dw&&l.locale!=="ko"?null:l.data;default:return null}}var dI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lw(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!dI[s.type]:l==="textarea"}function Pw(s,l,h,m){bu?xu?xu.push(m):xu=[m]:bu=m,l=zd(l,"onChange"),0<l.length&&(h=new td("onChange","change",null,h,m),s.push({event:h,listeners:l}))}var Cc=null,Rc=null;function pI(s){lS(s,0)}function rd(s){var l=bc(s);if(yw(l))return s}function Bw(s,l){if(s==="change")return l}var zw=!1;if(ui){var Pm;if(ui){var Bm="oninput"in document;if(!Bm){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),Bm=typeof Uw.oninput=="function"}Pm=Bm}else Pm=!1;zw=Pm&&(!document.documentMode||9<document.documentMode)}function Vw(){Cc&&(Cc.detachEvent("onpropertychange",jw),Rc=Cc=null)}function jw(s){if(s.propertyName==="value"&&rd(Rc)){var l=[];Pw(l,Rc,s,Om(s)),Cw(pI,l)}}function vI(s,l,h){s==="focusin"?(Vw(),Cc=l,Rc=h,Cc.attachEvent("onpropertychange",jw)):s==="focusout"&&Vw()}function mI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return rd(Rc)}function gI(s,l){if(s==="click")return rd(l)}function yI(s,l){if(s==="input"||s==="change")return rd(l)}function bI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var xr=typeof Object.is=="function"?Object.is:bI;function Tc(s,l){if(xr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!kn.call(l,b)||!xr(s[b],l[b]))return!1}return!0}function qw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ww(s,l){var h=qw(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=l&&m>=l)return{node:h,offset:l-s};s=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=qw(h)}}function Hw(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Hw(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Gw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Xh(s.document);l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Xh(s.document)}return l}function zm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function xI(s,l){var h=Gw(l);l=s.focusedElem;var m=s.selectionRange;if(h!==l&&l&&l.ownerDocument&&Hw(l.ownerDocument.documentElement,l)){if(m!==null&&zm(l)){if(s=m.start,h=m.end,h===void 0&&(h=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(h,l.value.length);else if(h=(s=l.ownerDocument||document)&&s.defaultView||window,h.getSelection){h=h.getSelection();var b=l.textContent.length,E=Math.min(m.start,b);m=m.end===void 0?E:Math.min(m.end,b),!h.extend&&E>m&&(b=m,m=E,E=b),b=Ww(l,E);var A=Ww(l,m);b&&A&&(h.rangeCount!==1||h.anchorNode!==b.node||h.anchorOffset!==b.offset||h.focusNode!==A.node||h.focusOffset!==A.offset)&&(s=s.createRange(),s.setStart(b.node,b.offset),h.removeAllRanges(),E>m?(h.addRange(s),h.extend(A.node,A.offset)):(s.setEnd(A.node,A.offset),h.addRange(s)))}}for(s=[],h=l;h=h.parentNode;)h.nodeType===1&&s.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)h=s[l],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var wI=ui&&"documentMode"in document&&11>=document.documentMode,_u=null,Um=null,Oc=null,Vm=!1;function Qw(s,l,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Vm||_u==null||_u!==Xh(m)||(m=_u,"selectionStart"in m&&zm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Oc&&Tc(Oc,m)||(Oc=m,m=zd(Um,"onSelect"),0<m.length&&(l=new td("onSelect","select",null,l,h),s.push({event:l,listeners:m}),l.target=_u)))}function us(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var Eu={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},jm={},$w={};ui&&($w=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function ls(s){if(jm[s])return jm[s];if(!Eu[s])return s;var l=Eu[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in $w)return jm[s]=l[h];return s}var Kw=ls("animationend"),Xw=ls("animationiteration"),Yw=ls("animationstart"),_I=ls("transitionrun"),EI=ls("transitionstart"),SI=ls("transitioncancel"),Zw=ls("transitionend"),Jw=new Map,e_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function ra(s,l){Jw.set(s,l),os(l,[s])}var Lr=[],Su=0,qm=0;function ad(){for(var s=Su,l=qm=Su=0;l<s;){var h=Lr[l];Lr[l++]=null;var m=Lr[l];Lr[l++]=null;var b=Lr[l];Lr[l++]=null;var E=Lr[l];if(Lr[l++]=null,m!==null&&b!==null){var A=m.pending;A===null?b.next=b:(b.next=A.next,A.next=b),m.pending=b}E!==0&&t_(h,b,E)}}function id(s,l,h,m){Lr[Su++]=s,Lr[Su++]=l,Lr[Su++]=h,Lr[Su++]=m,qm|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Wm(s,l,h,m){return id(s,l,h,m),od(s)}function Yi(s,l){return id(s,null,null,l),od(s)}function t_(s,l,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var b=!1,E=s.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(b=!0)),s=E,E=E.return;b&&l!==null&&s.tag===3&&(E=s.stateNode,b=31-br(h),E=E.hiddenUpdates,s=E[b],s===null?E[b]=[l]:s.push(l),l.lane=h|536870912)}function od(s){if(50<Jc)throw Jc=0,Xg=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Cu={},n_=new WeakMap;function Pr(s,l){if(typeof s=="object"&&s!==null){var h=n_.get(s);return h!==void 0?h:(l={value:s,source:l,stack:Z(l)},n_.set(s,l),l)}return{value:s,source:l,stack:Z(l)}}var Ru=[],Tu=0,sd=null,ud=0,Br=[],zr=0,cs=null,ci=1,fi="";function fs(s,l){Ru[Tu++]=ud,Ru[Tu++]=sd,sd=s,ud=l}function r_(s,l,h){Br[zr++]=ci,Br[zr++]=fi,Br[zr++]=cs,cs=s;var m=ci;s=fi;var b=32-br(m)-1;m&=~(1<<b),h+=1;var E=32-br(l)+b;if(30<E){var A=b-b%5;E=(m&(1<<A)-1).toString(32),m>>=A,b-=A,ci=1<<32-br(l)+b|h<<b|m,fi=E+s}else ci=1<<E|h<<b|m,fi=s}function Hm(s){s.return!==null&&(fs(s,1),r_(s,1,0))}function Gm(s){for(;s===sd;)sd=Ru[--Tu],Ru[Tu]=null,ud=Ru[--Tu],Ru[Tu]=null;for(;s===cs;)cs=Br[--zr],Br[zr]=null,fi=Br[--zr],Br[zr]=null,ci=Br[--zr],Br[zr]=null}var Jn=null,In=null,xt=!1,aa=null,Ra=!1,Qm=Error(r(519));function hs(s){var l=Error(r(418,""));throw Dc(Pr(l,s)),Qm}function a_(s){var l=s.stateNode,h=s.type,m=s.memoizedProps;switch(l[Un]=s,l[sr]=m,h){case"dialog":ht("cancel",l),ht("close",l);break;case"iframe":case"object":case"embed":ht("load",l);break;case"video":case"audio":for(h=0;h<tf.length;h++)ht(tf[h],l);break;case"source":ht("error",l);break;case"img":case"image":case"link":ht("error",l),ht("load",l);break;case"details":ht("toggle",l);break;case"input":ht("invalid",l),bw(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Kh(l);break;case"select":ht("invalid",l);break;case"textarea":ht("invalid",l),ww(l,m.value,m.defaultValue,m.children),Kh(l)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||m.suppressHydrationWarning===!0||dS(l.textContent,h)?(m.popover!=null&&(ht("beforetoggle",l),ht("toggle",l)),m.onScroll!=null&&ht("scroll",l),m.onScrollEnd!=null&&ht("scrollend",l),m.onClick!=null&&(l.onclick=Ud),l=!0):l=!1,l||hs(s)}function i_(s){for(Jn=s.return;Jn;)switch(Jn.tag){case 3:case 27:Ra=!0;return;case 5:case 13:Ra=!1;return;default:Jn=Jn.return}}function Ac(s){if(s!==Jn)return!1;if(!xt)return i_(s),xt=!0,!1;var l=!1,h;if((h=s.tag!==3&&s.tag!==27)&&((h=s.tag===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||dy(s.type,s.memoizedProps)),h=!h),h&&(l=!0),l&&In&&hs(s),i_(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(h=s.data,h==="/$"){if(l===0){In=oa(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++;s=s.nextSibling}In=null}}else In=Jn?oa(s.stateNode.nextSibling):null;return!0}function kc(){In=Jn=null,xt=!1}function Dc(s){aa===null?aa=[s]:aa.push(s)}var Nc=Error(r(460)),o_=Error(r(474)),$m={then:function(){}};function s_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ld(){}function u_(s,l,h){switch(h=s[h],h===void 0?s.push(l):h!==l&&(l.then(ld,ld),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Nc?Error(r(483)):s;default:if(typeof l.status=="string")l.then(ld,ld);else{if(s=It,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(m){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=m}},function(m){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Nc?Error(r(483)):s}throw Ic=l,Nc}}var Ic=null;function l_(){if(Ic===null)throw Error(r(459));var s=Ic;return Ic=null,s}var Ou=null,Mc=0;function cd(s){var l=Mc;return Mc+=1,Ou===null&&(Ou=[]),u_(Ou,s,l)}function Fc(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function fd(s,l){throw l.$$typeof===i?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function c_(s){var l=s._init;return l(s._payload)}function f_(s){function l(X,H){if(s){var ne=X.deletions;ne===null?(X.deletions=[H],X.flags|=16):ne.push(H)}}function h(X,H){if(!s)return null;for(;H!==null;)l(X,H),H=H.sibling;return null}function m(X){for(var H=new Map;X!==null;)X.key!==null?H.set(X.key,X):H.set(X.index,X),X=X.sibling;return H}function b(X,H){return X=lo(X,H),X.index=0,X.sibling=null,X}function E(X,H,ne){return X.index=ne,s?(ne=X.alternate,ne!==null?(ne=ne.index,ne<H?(X.flags|=33554434,H):ne):(X.flags|=33554434,H)):(X.flags|=1048576,H)}function A(X){return s&&X.alternate===null&&(X.flags|=33554434),X}function M(X,H,ne,de){return H===null||H.tag!==6?(H=jg(ne,X.mode,de),H.return=X,H):(H=b(H,ne),H.return=X,H)}function z(X,H,ne,de){var Ae=ne.type;return Ae===c?ce(X,H,ne.props.children,de,ne.key):H!==null&&(H.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===S&&c_(Ae)===H.type)?(H=b(H,ne.props),Fc(H,ne),H.return=X,H):(H=Ad(ne.type,ne.key,ne.props,null,X.mode,de),Fc(H,ne),H.return=X,H)}function Q(X,H,ne,de){return H===null||H.tag!==4||H.stateNode.containerInfo!==ne.containerInfo||H.stateNode.implementation!==ne.implementation?(H=qg(ne,X.mode,de),H.return=X,H):(H=b(H,ne.children||[]),H.return=X,H)}function ce(X,H,ne,de,Ae){return H===null||H.tag!==7?(H=_s(ne,X.mode,de,Ae),H.return=X,H):(H=b(H,ne),H.return=X,H)}function me(X,H,ne){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=jg(""+H,X.mode,ne),H.return=X,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case o:return ne=Ad(H.type,H.key,H.props,null,X.mode,ne),Fc(ne,H),ne.return=X,ne;case u:return H=qg(H,X.mode,ne),H.return=X,H;case S:var de=H._init;return H=de(H._payload),me(X,H,ne)}if(fe(H)||O(H))return H=_s(H,X.mode,ne,null),H.return=X,H;if(typeof H.then=="function")return me(X,cd(H),ne);if(H.$$typeof===g)return me(X,Rd(X,H),ne);fd(X,H)}return null}function ae(X,H,ne,de){var Ae=H!==null?H.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ae!==null?null:M(X,H,""+ne,de);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case o:return ne.key===Ae?z(X,H,ne,de):null;case u:return ne.key===Ae?Q(X,H,ne,de):null;case S:return Ae=ne._init,ne=Ae(ne._payload),ae(X,H,ne,de)}if(fe(ne)||O(ne))return Ae!==null?null:ce(X,H,ne,de,null);if(typeof ne.then=="function")return ae(X,H,cd(ne),de);if(ne.$$typeof===g)return ae(X,H,Rd(X,ne),de);fd(X,ne)}return null}function le(X,H,ne,de,Ae){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return X=X.get(ne)||null,M(H,X,""+de,Ae);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case o:return X=X.get(de.key===null?ne:de.key)||null,z(H,X,de,Ae);case u:return X=X.get(de.key===null?ne:de.key)||null,Q(H,X,de,Ae);case S:var st=de._init;return de=st(de._payload),le(X,H,ne,de,Ae)}if(fe(de)||O(de))return X=X.get(ne)||null,ce(H,X,de,Ae,null);if(typeof de.then=="function")return le(X,H,ne,cd(de),Ae);if(de.$$typeof===g)return le(X,H,ne,Rd(H,de),Ae);fd(H,de)}return null}function ze(X,H,ne,de){for(var Ae=null,st=null,Ue=H,We=H=0,_n=null;Ue!==null&&We<ne.length;We++){Ue.index>We?(_n=Ue,Ue=null):_n=Ue.sibling;var wt=ae(X,Ue,ne[We],de);if(wt===null){Ue===null&&(Ue=_n);break}s&&Ue&&wt.alternate===null&&l(X,Ue),H=E(wt,H,We),st===null?Ae=wt:st.sibling=wt,st=wt,Ue=_n}if(We===ne.length)return h(X,Ue),xt&&fs(X,We),Ae;if(Ue===null){for(;We<ne.length;We++)Ue=me(X,ne[We],de),Ue!==null&&(H=E(Ue,H,We),st===null?Ae=Ue:st.sibling=Ue,st=Ue);return xt&&fs(X,We),Ae}for(Ue=m(Ue);We<ne.length;We++)_n=le(Ue,X,We,ne[We],de),_n!==null&&(s&&_n.alternate!==null&&Ue.delete(_n.key===null?We:_n.key),H=E(_n,H,We),st===null?Ae=_n:st.sibling=_n,st=_n);return s&&Ue.forEach(function(go){return l(X,go)}),xt&&fs(X,We),Ae}function Ze(X,H,ne,de){if(ne==null)throw Error(r(151));for(var Ae=null,st=null,Ue=H,We=H=0,_n=null,wt=ne.next();Ue!==null&&!wt.done;We++,wt=ne.next()){Ue.index>We?(_n=Ue,Ue=null):_n=Ue.sibling;var go=ae(X,Ue,wt.value,de);if(go===null){Ue===null&&(Ue=_n);break}s&&Ue&&go.alternate===null&&l(X,Ue),H=E(go,H,We),st===null?Ae=go:st.sibling=go,st=go,Ue=_n}if(wt.done)return h(X,Ue),xt&&fs(X,We),Ae;if(Ue===null){for(;!wt.done;We++,wt=ne.next())wt=me(X,wt.value,de),wt!==null&&(H=E(wt,H,We),st===null?Ae=wt:st.sibling=wt,st=wt);return xt&&fs(X,We),Ae}for(Ue=m(Ue);!wt.done;We++,wt=ne.next())wt=le(Ue,X,We,wt.value,de),wt!==null&&(s&&wt.alternate!==null&&Ue.delete(wt.key===null?We:wt.key),H=E(wt,H,We),st===null?Ae=wt:st.sibling=wt,st=wt);return s&&Ue.forEach(function(BM){return l(X,BM)}),xt&&fs(X,We),Ae}function $t(X,H,ne,de){if(typeof ne=="object"&&ne!==null&&ne.type===c&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case o:e:{for(var Ae=ne.key;H!==null;){if(H.key===Ae){if(Ae=ne.type,Ae===c){if(H.tag===7){h(X,H.sibling),de=b(H,ne.props.children),de.return=X,X=de;break e}}else if(H.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===S&&c_(Ae)===H.type){h(X,H.sibling),de=b(H,ne.props),Fc(de,ne),de.return=X,X=de;break e}h(X,H);break}else l(X,H);H=H.sibling}ne.type===c?(de=_s(ne.props.children,X.mode,de,ne.key),de.return=X,X=de):(de=Ad(ne.type,ne.key,ne.props,null,X.mode,de),Fc(de,ne),de.return=X,X=de)}return A(X);case u:e:{for(Ae=ne.key;H!==null;){if(H.key===Ae)if(H.tag===4&&H.stateNode.containerInfo===ne.containerInfo&&H.stateNode.implementation===ne.implementation){h(X,H.sibling),de=b(H,ne.children||[]),de.return=X,X=de;break e}else{h(X,H);break}else l(X,H);H=H.sibling}de=qg(ne,X.mode,de),de.return=X,X=de}return A(X);case S:return Ae=ne._init,ne=Ae(ne._payload),$t(X,H,ne,de)}if(fe(ne))return ze(X,H,ne,de);if(O(ne)){if(Ae=O(ne),typeof Ae!="function")throw Error(r(150));return ne=Ae.call(ne),Ze(X,H,ne,de)}if(typeof ne.then=="function")return $t(X,H,cd(ne),de);if(ne.$$typeof===g)return $t(X,H,Rd(X,ne),de);fd(X,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,H!==null&&H.tag===6?(h(X,H.sibling),de=b(H,ne),de.return=X,X=de):(h(X,H),de=jg(ne,X.mode,de),de.return=X,X=de),A(X)):h(X,H)}return function(X,H,ne,de){try{Mc=0;var Ae=$t(X,H,ne,de);return Ou=null,Ae}catch(Ue){if(Ue===Nc)throw Ue;var st=qr(29,Ue,null,X.mode);return st.lanes=de,st.return=X,st}finally{}}}var ds=f_(!0),h_=f_(!1),Au=xe(null),hd=xe(0);function d_(s,l){s=_i,je(hd,s),je(Au,l),_i=s|l.baseLanes}function Km(){je(hd,_i),je(Au,Au.current)}function Xm(){_i=hd.current,Oe(Au),Oe(hd)}var Ur=xe(null),Ta=null;function Zi(s){var l=s.alternate;je(un,un.current&1),je(Ur,s),Ta===null&&(l===null||Au.current!==null||l.memoizedState!==null)&&(Ta=s)}function p_(s){if(s.tag===22){if(je(un,un.current),je(Ur,s),Ta===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Ta=s)}}else Ji()}function Ji(){je(un,un.current),je(Ur,Ur.current)}function hi(s){Oe(Ur),Ta===s&&(Ta=null),Oe(un)}var un=xe(0);function dd(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var CI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){l.aborted=!0,s.forEach(function(h){return h()})}},RI=n.unstable_scheduleCallback,TI=n.unstable_NormalPriority,ln={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ym(){return{controller:new CI,data:new Map,refCount:0}}function Lc(s){s.refCount--,s.refCount===0&&RI(TI,function(){s.controller.abort()})}var Pc=null,Zm=0,ku=0,Du=null;function OI(s,l){if(Pc===null){var h=Pc=[];Zm=0,ku=ay(),Du={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Zm++,l.then(v_,v_),l}function v_(){if(--Zm===0&&Pc!==null){Du!==null&&(Du.status="fulfilled");var s=Pc;Pc=null,ku=0,Du=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function AI(s,l){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return s.then(function(){m.status="fulfilled",m.value=l;for(var b=0;b<h.length;b++)(0,h[b])(l)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var m_=k.S;k.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&OI(s,l),m_!==null&&m_(s,l)};var ps=xe(null);function Jm(){var s=ps.current;return s!==null?s:It.pooledCache}function pd(s,l){l===null?je(ps,ps.current):je(ps,l.pool)}function g_(){var s=Jm();return s===null?null:{parent:ln._currentValue,pool:s}}var eo=0,ot=null,At=null,tn=null,vd=!1,Nu=!1,vs=!1,md=0,Bc=0,Iu=null,kI=0;function Jt(){throw Error(r(321))}function eg(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!xr(s[h],l[h]))return!1;return!0}function tg(s,l,h,m,b,E){return eo=E,ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,k.H=s===null||s.memoizedState===null?ms:to,vs=!1,E=h(m,b),vs=!1,Nu&&(E=b_(l,h,m,b)),y_(s),E}function y_(s){k.H=Oa;var l=At!==null&&At.next!==null;if(eo=0,tn=At=ot=null,vd=!1,Bc=0,Iu=null,l)throw Error(r(300));s===null||xn||(s=s.dependencies,s!==null&&Cd(s)&&(xn=!0))}function b_(s,l,h,m){ot=s;var b=0;do{if(Nu&&(Iu=null),Bc=0,Nu=!1,25<=b)throw Error(r(301));if(b+=1,tn=At=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}k.H=gs,E=l(h,m)}while(Nu);return E}function DI(){var s=k.H,l=s.useState()[0];return l=typeof l.then=="function"?zc(l):l,s=s.useState()[0],(At!==null?At.memoizedState:null)!==s&&(ot.flags|=1024),l}function ng(){var s=md!==0;return md=0,s}function rg(s,l,h){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~h}function ag(s){if(vd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}vd=!1}eo=0,tn=At=ot=null,Nu=!1,Bc=md=0,Iu=null}function lr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?ot.memoizedState=tn=s:tn=tn.next=s,tn}function nn(){if(At===null){var s=ot.alternate;s=s!==null?s.memoizedState:null}else s=At.next;var l=tn===null?ot.memoizedState:tn.next;if(l!==null)tn=l,At=s;else{if(s===null)throw ot.alternate===null?Error(r(467)):Error(r(310));At=s,s={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},tn===null?ot.memoizedState=tn=s:tn=tn.next=s}return tn}var gd;gd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function zc(s){var l=Bc;return Bc+=1,Iu===null&&(Iu=[]),s=u_(Iu,s,l),l=ot,(tn===null?l.memoizedState:tn.next)===null&&(l=l.alternate,k.H=l===null||l.memoizedState===null?ms:to),s}function yd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return zc(s);if(s.$$typeof===g)return Vn(s)}throw Error(r(438,String(s)))}function ig(s){var l=null,h=ot.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var m=ot.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=gd(),ot.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(s),m=0;m<s;m++)h[m]=R;return l.index++,h}function di(s,l){return typeof l=="function"?l(s):l}function bd(s){var l=nn();return og(l,At,s)}function og(s,l,h){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var b=s.baseQueue,E=m.pending;if(E!==null){if(b!==null){var A=b.next;b.next=E.next,E.next=A}l.baseQueue=b=E,m.pending=null}if(E=s.baseState,b===null)s.memoizedState=E;else{l=b.next;var M=A=null,z=null,Q=l,ce=!1;do{var me=Q.lane&-536870913;if(me!==Q.lane?(vt&me)===me:(eo&me)===me){var ae=Q.revertLane;if(ae===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),me===ku&&(ce=!0);else if((eo&ae)===ae){Q=Q.next,ae===ku&&(ce=!0);continue}else me={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(M=z=me,A=E):z=z.next=me,ot.lanes|=ae,co|=ae;me=Q.action,vs&&h(E,me),E=Q.hasEagerState?Q.eagerState:h(E,me)}else ae={lane:me,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(M=z=ae,A=E):z=z.next=ae,ot.lanes|=me,co|=me;Q=Q.next}while(Q!==null&&Q!==l);if(z===null?A=E:z.next=M,!xr(E,s.memoizedState)&&(xn=!0,ce&&(h=Du,h!==null)))throw h;s.memoizedState=E,s.baseState=A,s.baseQueue=z,m.lastRenderedState=E}return b===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function sg(s){var l=nn(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=s;var m=h.dispatch,b=h.pending,E=l.memoizedState;if(b!==null){h.pending=null;var A=b=b.next;do E=s(E,A.action),A=A.next;while(A!==b);xr(E,l.memoizedState)||(xn=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,m]}function x_(s,l,h){var m=ot,b=nn(),E=xt;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=l();var A=!xr((At||b).memoizedState,h);if(A&&(b.memoizedState=h,xn=!0),b=b.queue,cg(E_.bind(null,m,b,s),[s]),b.getSnapshot!==l||A||tn!==null&&tn.memoizedState.tag&1){if(m.flags|=2048,Mu(9,__.bind(null,m,b,h,l),{destroy:void 0},null),It===null)throw Error(r(349));E||(eo&60)!==0||w_(m,l,h)}return h}function w_(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=ot.updateQueue,l===null?(l=gd(),ot.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function __(s,l,h,m){l.value=h,l.getSnapshot=m,S_(l)&&C_(s)}function E_(s,l,h){return h(function(){S_(l)&&C_(s)})}function S_(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!xr(s,h)}catch{return!0}}function C_(s){var l=Yi(s,2);l!==null&&er(l,s,2)}function ug(s){var l=lr();if(typeof s=="function"){var h=s;if(s=h(),vs){$i(!0);try{h()}finally{$i(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:s},l}function R_(s,l,h,m){return s.baseState=h,og(s,At,typeof m=="function"?m:di)}function NI(s,l,h,m,b){if(_d(s))throw Error(r(485));if(s=l.action,s!==null){var E={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){E.listeners.push(A)}};k.T!==null?h(!0):E.isTransition=!1,m(E),h=l.pending,h===null?(E.next=l.pending=E,T_(l,E)):(E.next=h.next,l.pending=h.next=E)}}function T_(s,l){var h=l.action,m=l.payload,b=s.state;if(l.isTransition){var E=k.T,A={};k.T=A;try{var M=h(b,m),z=k.S;z!==null&&z(A,M),O_(s,l,M)}catch(Q){lg(s,l,Q)}finally{k.T=E}}else try{E=h(b,m),O_(s,l,E)}catch(Q){lg(s,l,Q)}}function O_(s,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){A_(s,l,m)},function(m){return lg(s,l,m)}):A_(s,l,h)}function A_(s,l,h){l.status="fulfilled",l.value=h,k_(l),s.state=h,l=s.pending,l!==null&&(h=l.next,h===l?s.pending=null:(h=h.next,l.next=h,T_(s,h)))}function lg(s,l,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=h,k_(l),l=l.next;while(l!==m)}s.action=null}function k_(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function D_(s,l){return l}function N_(s,l){if(xt){var h=It.formState;if(h!==null){e:{var m=ot;if(xt){if(In){t:{for(var b=In,E=Ra;b.nodeType!==8;){if(!E){b=null;break t}if(b=oa(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){In=oa(b.nextSibling),m=b.data==="F!";break e}}hs(m)}m=!1}m&&(l=h[0])}}return h=lr(),h.memoizedState=h.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D_,lastRenderedState:l},h.queue=m,h=X_.bind(null,ot,m),m.dispatch=h,m=ug(!1),E=vg.bind(null,ot,!1,m.queue),m=lr(),b={state:l,dispatch:null,action:s,pending:null},m.queue=b,h=NI.bind(null,ot,b,E,h),b.dispatch=h,m.memoizedState=s,[l,h,!1]}function I_(s){var l=nn();return M_(l,At,s)}function M_(s,l,h){l=og(s,l,D_)[0],s=bd(di)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?zc(l):l;var m=nn(),b=m.queue,E=b.dispatch;return h!==m.memoizedState&&(ot.flags|=2048,Mu(9,II.bind(null,b,h),{destroy:void 0},null)),[l,E,s]}function II(s,l){s.action=l}function F_(s){var l=nn(),h=At;if(h!==null)return M_(l,h,s);nn(),l=l.memoizedState,h=nn();var m=h.queue.dispatch;return h.memoizedState=s,[l,m,!1]}function Mu(s,l,h,m){return s={tag:s,create:l,inst:h,deps:m,next:null},l=ot.updateQueue,l===null&&(l=gd(),ot.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,l.lastEffect=s),s}function L_(){return nn().memoizedState}function xd(s,l,h,m){var b=lr();ot.flags|=s,b.memoizedState=Mu(1|l,h,{destroy:void 0},m===void 0?null:m)}function wd(s,l,h,m){var b=nn();m=m===void 0?null:m;var E=b.memoizedState.inst;At!==null&&m!==null&&eg(m,At.memoizedState.deps)?b.memoizedState=Mu(l,h,E,m):(ot.flags|=s,b.memoizedState=Mu(1|l,h,E,m))}function P_(s,l){xd(8390656,8,s,l)}function cg(s,l){wd(2048,8,s,l)}function B_(s,l){return wd(4,2,s,l)}function z_(s,l){return wd(4,4,s,l)}function U_(s,l){if(typeof l=="function"){s=s();var h=l(s);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function V_(s,l,h){h=h!=null?h.concat([s]):null,wd(4,4,U_.bind(null,l,s),h)}function fg(){}function j_(s,l){var h=nn();l=l===void 0?null:l;var m=h.memoizedState;return l!==null&&eg(l,m[1])?m[0]:(h.memoizedState=[s,l],s)}function q_(s,l){var h=nn();l=l===void 0?null:l;var m=h.memoizedState;if(l!==null&&eg(l,m[1]))return m[0];if(m=s(),vs){$i(!0);try{s()}finally{$i(!1)}}return h.memoizedState=[m,l],m}function hg(s,l,h){return h===void 0||(eo&1073741824)!==0?s.memoizedState=l:(s.memoizedState=h,s=HE(),ot.lanes|=s,co|=s,h)}function W_(s,l,h,m){return xr(h,l)?h:Au.current!==null?(s=hg(s,h,m),xr(s,l)||(xn=!0),s):(eo&42)===0?(xn=!0,s.memoizedState=h):(s=HE(),ot.lanes|=s,co|=s,l)}function H_(s,l,h,m,b){var E=he.p;he.p=E!==0&&8>E?E:8;var A=k.T,M={};k.T=M,vg(s,!1,l,h);try{var z=b(),Q=k.S;if(Q!==null&&Q(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ce=AI(z,m);Uc(s,l,ce,Sr(s))}else Uc(s,l,m,Sr(s))}catch(me){Uc(s,l,{then:function(){},status:"rejected",reason:me},Sr())}finally{he.p=E,k.T=A}}function MI(){}function dg(s,l,h,m){if(s.tag!==5)throw Error(r(476));var b=G_(s).queue;H_(s,b,l,be,h===null?MI:function(){return Q_(s),h(m)})}function G_(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:be},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:h},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function Q_(s){var l=G_(s).next.queue;Uc(s,l,{},Sr())}function pg(){return Vn(sf)}function $_(){return nn().memoizedState}function K_(){return nn().memoizedState}function FI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var h=Sr();s=ao(h);var m=io(l,s,h);m!==null&&(er(m,l,h),qc(m,l,h)),l={cache:Ym()},s.payload=l;return}l=l.return}}function LI(s,l,h){var m=Sr();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},_d(s)?Y_(l,h):(h=Wm(s,l,h,m),h!==null&&(er(h,s,m),Z_(h,l,m)))}function X_(s,l,h){var m=Sr();Uc(s,l,h,m)}function Uc(s,l,h,m){var b={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(_d(s))Y_(l,b);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var A=l.lastRenderedState,M=E(A,h);if(b.hasEagerState=!0,b.eagerState=M,xr(M,A))return id(s,l,b,0),It===null&&ad(),!1}catch{}finally{}if(h=Wm(s,l,b,m),h!==null)return er(h,s,m),Z_(h,l,m),!0}return!1}function vg(s,l,h,m){if(m={lane:2,revertLane:ay(),action:m,hasEagerState:!1,eagerState:null,next:null},_d(s)){if(l)throw Error(r(479))}else l=Wm(s,h,m,2),l!==null&&er(l,s,2)}function _d(s){var l=s.alternate;return s===ot||l!==null&&l===ot}function Y_(s,l){Nu=vd=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function Z_(s,l,h){if((h&4194176)!==0){var m=l.lanes;m&=s.pendingLanes,h|=m,l.lanes=h,lw(s,h)}}var Oa={readContext:Vn,use:yd,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt};Oa.useCacheRefresh=Jt,Oa.useMemoCache=Jt,Oa.useHostTransitionStatus=Jt,Oa.useFormState=Jt,Oa.useActionState=Jt,Oa.useOptimistic=Jt;var ms={readContext:Vn,use:yd,useCallback:function(s,l){return lr().memoizedState=[s,l===void 0?null:l],s},useContext:Vn,useEffect:P_,useImperativeHandle:function(s,l,h){h=h!=null?h.concat([s]):null,xd(4194308,4,U_.bind(null,l,s),h)},useLayoutEffect:function(s,l){return xd(4194308,4,s,l)},useInsertionEffect:function(s,l){xd(4,2,s,l)},useMemo:function(s,l){var h=lr();l=l===void 0?null:l;var m=s();if(vs){$i(!0);try{s()}finally{$i(!1)}}return h.memoizedState=[m,l],m},useReducer:function(s,l,h){var m=lr();if(h!==void 0){var b=h(l);if(vs){$i(!0);try{h(l)}finally{$i(!1)}}}else b=l;return m.memoizedState=m.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},m.queue=s,s=s.dispatch=LI.bind(null,ot,s),[m.memoizedState,s]},useRef:function(s){var l=lr();return s={current:s},l.memoizedState=s},useState:function(s){s=ug(s);var l=s.queue,h=X_.bind(null,ot,l);return l.dispatch=h,[s.memoizedState,h]},useDebugValue:fg,useDeferredValue:function(s,l){var h=lr();return hg(h,s,l)},useTransition:function(){var s=ug(!1);return s=H_.bind(null,ot,s.queue,!0,!1),lr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,h){var m=ot,b=lr();if(xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),It===null)throw Error(r(349));(vt&60)!==0||w_(m,l,h)}b.memoizedState=h;var E={value:h,getSnapshot:l};return b.queue=E,P_(E_.bind(null,m,E,s),[s]),m.flags|=2048,Mu(9,__.bind(null,m,E,h,l),{destroy:void 0},null),h},useId:function(){var s=lr(),l=It.identifierPrefix;if(xt){var h=fi,m=ci;h=(m&~(1<<32-br(m)-1)).toString(32)+h,l=":"+l+"R"+h,h=md++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=kI++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},useCacheRefresh:function(){return lr().memoizedState=FI.bind(null,ot)}};ms.useMemoCache=ig,ms.useHostTransitionStatus=pg,ms.useFormState=N_,ms.useActionState=N_,ms.useOptimistic=function(s){var l=lr();l.memoizedState=l.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=vg.bind(null,ot,!0,h),h.dispatch=l,[s,l]};var to={readContext:Vn,use:yd,useCallback:j_,useContext:Vn,useEffect:cg,useImperativeHandle:V_,useInsertionEffect:B_,useLayoutEffect:z_,useMemo:q_,useReducer:bd,useRef:L_,useState:function(){return bd(di)},useDebugValue:fg,useDeferredValue:function(s,l){var h=nn();return W_(h,At.memoizedState,s,l)},useTransition:function(){var s=bd(di)[0],l=nn().memoizedState;return[typeof s=="boolean"?s:zc(s),l]},useSyncExternalStore:x_,useId:$_};to.useCacheRefresh=K_,to.useMemoCache=ig,to.useHostTransitionStatus=pg,to.useFormState=I_,to.useActionState=I_,to.useOptimistic=function(s,l){var h=nn();return R_(h,At,s,l)};var gs={readContext:Vn,use:yd,useCallback:j_,useContext:Vn,useEffect:cg,useImperativeHandle:V_,useInsertionEffect:B_,useLayoutEffect:z_,useMemo:q_,useReducer:sg,useRef:L_,useState:function(){return sg(di)},useDebugValue:fg,useDeferredValue:function(s,l){var h=nn();return At===null?hg(h,s,l):W_(h,At.memoizedState,s,l)},useTransition:function(){var s=sg(di)[0],l=nn().memoizedState;return[typeof s=="boolean"?s:zc(s),l]},useSyncExternalStore:x_,useId:$_};gs.useCacheRefresh=K_,gs.useMemoCache=ig,gs.useHostTransitionStatus=pg,gs.useFormState=F_,gs.useActionState=F_,gs.useOptimistic=function(s,l){var h=nn();return At!==null?R_(h,At,s,l):(h.baseState=s,[s,h.queue.dispatch])};function mg(s,l,h,m){l=s.memoizedState,h=h(m,l),h=h==null?l:I({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var gg={isMounted:function(s){return(s=s._reactInternals)?G(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var m=Sr(),b=ao(m);b.payload=l,h!=null&&(b.callback=h),l=io(s,b,m),l!==null&&(er(l,s,m),qc(l,s,m))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var m=Sr(),b=ao(m);b.tag=1,b.payload=l,h!=null&&(b.callback=h),l=io(s,b,m),l!==null&&(er(l,s,m),qc(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=Sr(),m=ao(h);m.tag=2,l!=null&&(m.callback=l),l=io(s,m,h),l!==null&&(er(l,s,h),qc(l,s,h))}};function J_(s,l,h,m,b,E,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,A):l.prototype&&l.prototype.isPureReactComponent?!Tc(h,m)||!Tc(b,E):!0}function eE(s,l,h,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==s&&gg.enqueueReplaceState(l,l.state,null)}function ys(s,l){var h=l;if("ref"in l){h={};for(var m in l)m!=="ref"&&(h[m]=l[m])}if(s=s.defaultProps){h===l&&(h=I({},h));for(var b in s)h[b]===void 0&&(h[b]=s[b])}return h}var Ed=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function tE(s){Ed(s)}function nE(s){console.error(s)}function rE(s){Ed(s)}function Sd(s,l){try{var h=s.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function aE(s,l,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function yg(s,l,h){return h=ao(h),h.tag=3,h.payload={element:null},h.callback=function(){Sd(s,l)},h}function iE(s){return s=ao(s),s.tag=3,s}function oE(s,l,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var E=m.value;s.payload=function(){return b(E)},s.callback=function(){aE(l,h,m)}}var A=h.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){aE(l,h,m),typeof b!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var M=m.stack;this.componentDidCatch(m.value,{componentStack:M!==null?M:""})})}function PI(s,l,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=h.alternate,l!==null&&jc(l,h,b,!0),h=Ur.current,h!==null){switch(h.tag){case 13:return Ta===null?Jg():h.alternate===null&&Qt===0&&(Qt=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===$m?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([m]):l.add(m),ty(s,m,b)),!1;case 22:return h.flags|=65536,m===$m?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([m]):h.add(m)),ty(s,m,b)),!1}throw Error(r(435,h.tag))}return ty(s,m,b),Jg(),!1}if(xt)return l=Ur.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,m!==Qm&&(s=Error(r(422),{cause:m}),Dc(Pr(s,h)))):(m!==Qm&&(l=Error(r(423),{cause:m}),Dc(Pr(l,h))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,m=Pr(m,h),b=yg(s.stateNode,m,b),Ig(s,b),Qt!==4&&(Qt=2)),!1;var E=Error(r(520),{cause:m});if(E=Pr(E,h),Yc===null?Yc=[E]:Yc.push(E),Qt!==4&&(Qt=2),l===null)return!0;m=Pr(m,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,s=b&-b,h.lanes|=s,s=yg(h.stateNode,m,s),Ig(h,s),!1;case 1:if(l=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(fo===null||!fo.has(E))))return h.flags|=65536,b&=-b,h.lanes|=b,b=iE(b),oE(b,s,h,m),Ig(h,b),!1}h=h.return}while(h!==null);return!1}var sE=Error(r(461)),xn=!1;function Mn(s,l,h,m){l.child=s===null?h_(l,null,h,m):ds(l,s.child,h,m)}function uE(s,l,h,m,b){h=h.render;var E=l.ref;if("ref"in m){var A={};for(var M in m)M!=="ref"&&(A[M]=m[M])}else A=m;return xs(l),m=tg(s,l,h,A,E,b),M=ng(),s!==null&&!xn?(rg(s,l,b),pi(s,l,b)):(xt&&M&&Hm(l),l.flags|=1,Mn(s,l,m,b),l.child)}function lE(s,l,h,m,b){if(s===null){var E=h.type;return typeof E=="function"&&!Vg(E)&&E.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=E,cE(s,l,E,m,b)):(s=Ad(h.type,null,m,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,!Tg(s,b)){var A=E.memoizedProps;if(h=h.compare,h=h!==null?h:Tc,h(A,m)&&s.ref===l.ref)return pi(s,l,b)}return l.flags|=1,s=lo(E,m),s.ref=l.ref,s.return=l,l.child=s}function cE(s,l,h,m,b){if(s!==null){var E=s.memoizedProps;if(Tc(E,m)&&s.ref===l.ref)if(xn=!1,l.pendingProps=m=E,Tg(s,b))(s.flags&131072)!==0&&(xn=!0);else return l.lanes=s.lanes,pi(s,l,b)}return bg(s,l,h,m,b)}function fE(s,l,h){var m=l.pendingProps,b=m.children,E=(l.stateNode._pendingVisibility&2)!==0,A=s!==null?s.memoizedState:null;if(Vc(s,l),m.mode==="hidden"||E){if((l.flags&128)!==0){if(m=A!==null?A.baseLanes|h:h,s!==null){for(b=l.child=s.child,E=0;b!==null;)E=E|b.lanes|b.childLanes,b=b.sibling;l.childLanes=E&~m}else l.childLanes=0,l.child=null;return hE(s,l,m,h)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&pd(l,A!==null?A.cachePool:null),A!==null?d_(l,A):Km(),p_(l);else return l.lanes=l.childLanes=536870912,hE(s,l,A!==null?A.baseLanes|h:h,h)}else A!==null?(pd(l,A.cachePool),d_(l,A),Ji(),l.memoizedState=null):(s!==null&&pd(l,null),Km(),Ji());return Mn(s,l,b,h),l.child}function hE(s,l,h,m){var b=Jm();return b=b===null?null:{parent:ln._currentValue,pool:b},l.memoizedState={baseLanes:h,cachePool:b},s!==null&&pd(l,null),Km(),p_(l),s!==null&&jc(s,l,m,!0),null}function Vc(s,l){var h=l.ref;if(h===null)s!==null&&s.ref!==null&&(l.flags|=2097664);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(s===null||s.ref!==h)&&(l.flags|=2097664)}}function bg(s,l,h,m,b){return xs(l),h=tg(s,l,h,m,void 0,b),m=ng(),s!==null&&!xn?(rg(s,l,b),pi(s,l,b)):(xt&&m&&Hm(l),l.flags|=1,Mn(s,l,h,b),l.child)}function dE(s,l,h,m,b,E){return xs(l),l.updateQueue=null,h=b_(l,m,h,b),y_(s),m=ng(),s!==null&&!xn?(rg(s,l,E),pi(s,l,E)):(xt&&m&&Hm(l),l.flags|=1,Mn(s,l,h,E),l.child)}function pE(s,l,h,m,b){if(xs(l),l.stateNode===null){var E=Cu,A=h.contextType;typeof A=="object"&&A!==null&&(E=Vn(A)),E=new h(m,E),l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=gg,l.stateNode=E,E._reactInternals=l,E=l.stateNode,E.props=m,E.state=l.memoizedState,E.refs={},Dg(l),A=h.contextType,E.context=typeof A=="object"&&A!==null?Vn(A):Cu,E.state=l.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(mg(l,h,A,m),E.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(A=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),A!==E.state&&gg.enqueueReplaceState(E,E.state,null),Hc(l,m,E,b),Wc(),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(s===null){E=l.stateNode;var M=l.memoizedProps,z=ys(h,M);E.props=z;var Q=E.context,ce=h.contextType;A=Cu,typeof ce=="object"&&ce!==null&&(A=Vn(ce));var me=h.getDerivedStateFromProps;ce=typeof me=="function"||typeof E.getSnapshotBeforeUpdate=="function",M=l.pendingProps!==M,ce||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M||Q!==A)&&eE(l,E,m,A),ro=!1;var ae=l.memoizedState;E.state=ae,Hc(l,m,E,b),Wc(),Q=l.memoizedState,M||ae!==Q||ro?(typeof me=="function"&&(mg(l,h,me,m),Q=l.memoizedState),(z=ro||J_(l,h,z,m,ae,Q,A))?(ce||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Q),E.props=m,E.state=Q,E.context=A,m=z):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{E=l.stateNode,Ng(s,l),A=l.memoizedProps,ce=ys(h,A),E.props=ce,me=l.pendingProps,ae=E.context,Q=h.contextType,z=Cu,typeof Q=="object"&&Q!==null&&(z=Vn(Q)),M=h.getDerivedStateFromProps,(Q=typeof M=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==me||ae!==z)&&eE(l,E,m,z),ro=!1,ae=l.memoizedState,E.state=ae,Hc(l,m,E,b),Wc();var le=l.memoizedState;A!==me||ae!==le||ro||s!==null&&s.dependencies!==null&&Cd(s.dependencies)?(typeof M=="function"&&(mg(l,h,M,m),le=l.memoizedState),(ce=ro||J_(l,h,ce,m,ae,le,z)||s!==null&&s.dependencies!==null&&Cd(s.dependencies))?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,le,z),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,le,z)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=le),E.props=m,E.state=le,E.context=z,m=ce):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),m=!1)}return E=m,Vc(s,l),m=(l.flags&128)!==0,E||m?(E=l.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),l.flags|=1,s!==null&&m?(l.child=ds(l,s.child,null,b),l.child=ds(l,null,h,b)):Mn(s,l,h,b),l.memoizedState=E.state,s=l.child):s=pi(s,l,b),s}function vE(s,l,h,m){return kc(),l.flags|=256,Mn(s,l,h,m),l.child}var xg={dehydrated:null,treeContext:null,retryLane:0};function wg(s){return{baseLanes:s,cachePool:g_()}}function _g(s,l,h){return s=s!==null?s.childLanes&~h:0,l&&(s|=Wr),s}function mE(s,l,h){var m=l.pendingProps,b=!1,E=(l.flags&128)!==0,A;if((A=E)||(A=s!==null&&s.memoizedState===null?!1:(un.current&2)!==0),A&&(b=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,s===null){if(xt){if(b?Zi(l):Ji(),xt){var M=In,z;if(z=M){e:{for(z=M,M=Ra;z.nodeType!==8;){if(!M){M=null;break e}if(z=oa(z.nextSibling),z===null){M=null;break e}}M=z}M!==null?(l.memoizedState={dehydrated:M,treeContext:cs!==null?{id:ci,overflow:fi}:null,retryLane:536870912},z=qr(18,null,null,0),z.stateNode=M,z.return=l,l.child=z,Jn=l,In=null,z=!0):z=!1}z||hs(l)}if(M=l.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return M.data==="$!"?l.lanes=16:l.lanes=536870912,null;hi(l)}return M=m.children,m=m.fallback,b?(Ji(),b=l.mode,M=Sg({mode:"hidden",children:M},b),m=_s(m,b,h,null),M.return=l,m.return=l,M.sibling=m,l.child=M,b=l.child,b.memoizedState=wg(h),b.childLanes=_g(s,A,h),l.memoizedState=xg,m):(Zi(l),Eg(l,M))}if(z=s.memoizedState,z!==null&&(M=z.dehydrated,M!==null)){if(E)l.flags&256?(Zi(l),l.flags&=-257,l=Cg(s,l,h)):l.memoizedState!==null?(Ji(),l.child=s.child,l.flags|=128,l=null):(Ji(),b=m.fallback,M=l.mode,m=Sg({mode:"visible",children:m.children},M),b=_s(b,M,h,null),b.flags|=2,m.return=l,b.return=l,m.sibling=b,l.child=m,ds(l,s.child,null,h),m=l.child,m.memoizedState=wg(h),m.childLanes=_g(s,A,h),l.memoizedState=xg,l=b);else if(Zi(l),M.data==="$!"){if(A=M.nextSibling&&M.nextSibling.dataset,A)var Q=A.dgst;A=Q,m=Error(r(419)),m.stack="",m.digest=A,Dc({value:m,source:null,stack:null}),l=Cg(s,l,h)}else if(xn||jc(s,l,h,!1),A=(h&s.childLanes)!==0,xn||A){if(A=It,A!==null){if(m=h&-h,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(A.suspendedLanes|h))!==0?0:m,m!==0&&m!==z.retryLane)throw z.retryLane=m,Yi(s,m),er(A,s,m),sE}M.data==="$?"||Jg(),l=Cg(s,l,h)}else M.data==="$?"?(l.flags|=128,l.child=s.child,l=ZI.bind(null,s),M._reactRetry=l,l=null):(s=z.treeContext,In=oa(M.nextSibling),Jn=l,xt=!0,aa=null,Ra=!1,s!==null&&(Br[zr++]=ci,Br[zr++]=fi,Br[zr++]=cs,ci=s.id,fi=s.overflow,cs=l),l=Eg(l,m.children),l.flags|=4096);return l}return b?(Ji(),b=m.fallback,M=l.mode,z=s.child,Q=z.sibling,m=lo(z,{mode:"hidden",children:m.children}),m.subtreeFlags=z.subtreeFlags&31457280,Q!==null?b=lo(Q,b):(b=_s(b,M,h,null),b.flags|=2),b.return=l,m.return=l,m.sibling=b,l.child=m,m=b,b=l.child,M=s.child.memoizedState,M===null?M=wg(h):(z=M.cachePool,z!==null?(Q=ln._currentValue,z=z.parent!==Q?{parent:Q,pool:Q}:z):z=g_(),M={baseLanes:M.baseLanes|h,cachePool:z}),b.memoizedState=M,b.childLanes=_g(s,A,h),l.memoizedState=xg,m):(Zi(l),h=s.child,s=h.sibling,h=lo(h,{mode:"visible",children:m.children}),h.return=l,h.sibling=null,s!==null&&(A=l.deletions,A===null?(l.deletions=[s],l.flags|=16):A.push(s)),l.child=h,l.memoizedState=null,h)}function Eg(s,l){return l=Sg({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Sg(s,l){return jE(s,l,0,null)}function Cg(s,l,h){return ds(l,s.child,null,h),s=Eg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function gE(s,l,h){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),Ag(s.return,l,h)}function Rg(s,l,h,m,b){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=h,E.tailMode=b)}function yE(s,l,h){var m=l.pendingProps,b=m.revealOrder,E=m.tail;if(Mn(s,l,m.children,h),m=un.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gE(s,h,l);else if(s.tag===19)gE(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(je(un,m),b){case"forwards":for(h=l.child,b=null;h!==null;)s=h.alternate,s!==null&&dd(s)===null&&(b=h),h=h.sibling;h=b,h===null?(b=l.child,l.child=null):(b=h.sibling,h.sibling=null),Rg(l,!1,b,h,E);break;case"backwards":for(h=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&dd(s)===null){l.child=b;break}s=b.sibling,b.sibling=h,h=b,b=s}Rg(l,!0,h,null,E);break;case"together":Rg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function pi(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),co|=l.lanes,(h&l.childLanes)===0)if(s!==null){if(jc(s,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,h=lo(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=lo(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function Tg(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Cd(s)))}function BI(s,l,h){switch(l.tag){case 3:St(l,l.stateNode.containerInfo),no(l,ln,s.memoizedState.cache),kc();break;case 27:case 5:or(l);break;case 4:St(l,l.stateNode.containerInfo);break;case 10:no(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Zi(l),l.flags|=128,null):(h&l.child.childLanes)!==0?mE(s,l,h):(Zi(l),s=pi(s,l,h),s!==null?s.sibling:null);Zi(l);break;case 19:var b=(s.flags&128)!==0;if(m=(h&l.childLanes)!==0,m||(jc(s,l,h,!1),m=(h&l.childLanes)!==0),b){if(m)return yE(s,l,h);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),je(un,un.current),m)break;return null;case 22:case 23:return l.lanes=0,fE(s,l,h);case 24:no(l,ln,s.memoizedState.cache)}return pi(s,l,h)}function bE(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps)xn=!0;else{if(!Tg(s,h)&&(l.flags&128)===0)return xn=!1,BI(s,l,h);xn=(s.flags&131072)!==0}else xn=!1,xt&&(l.flags&1048576)!==0&&r_(l,ud,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var m=l.elementType,b=m._init;if(m=b(m._payload),l.type=m,typeof m=="function")Vg(m)?(s=ys(m,s),l.tag=1,l=pE(null,l,m,s,h)):(l.tag=0,l=bg(null,l,m,s,h));else{if(m!=null){if(b=m.$$typeof,b===y){l.tag=11,l=uE(null,l,m,s,h);break e}else if(b===_){l.tag=14,l=lE(null,l,m,s,h);break e}}throw l=N(m)||m,Error(r(306,l,""))}}return l;case 0:return bg(s,l,l.type,l.pendingProps,h);case 1:return m=l.type,b=ys(m,l.pendingProps),pE(s,l,m,b,h);case 3:e:{if(St(l,l.stateNode.containerInfo),s===null)throw Error(r(387));var E=l.pendingProps;b=l.memoizedState,m=b.element,Ng(s,l),Hc(l,E,null,h);var A=l.memoizedState;if(E=A.cache,no(l,ln,E),E!==b.cache&&kg(l,[ln],h,!0),Wc(),E=A.element,b.isDehydrated)if(b={element:E,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=vE(s,l,E,h);break e}else if(E!==m){m=Pr(Error(r(424)),l),Dc(m),l=vE(s,l,E,h);break e}else for(In=oa(l.stateNode.containerInfo.firstChild),Jn=l,xt=!0,aa=null,Ra=!0,h=h_(l,null,E,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(kc(),E===m){l=pi(s,l,h);break e}Mn(s,l,E,h)}l=l.child}return l;case 26:return Vc(s,l),s===null?(h=_S(l.type,null,l.pendingProps,null))?l.memoizedState=h:xt||(h=l.type,s=l.pendingProps,m=Vd(Ye.current).createElement(h),m[Un]=l,m[sr]=s,Fn(m,h,s),bn(m),l.stateNode=m):l.memoizedState=_S(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return or(l),s===null&&xt&&(m=l.stateNode=bS(l.type,l.pendingProps,Ye.current),Jn=l,Ra=!0,In=oa(m.firstChild)),m=l.pendingProps.children,s!==null||xt?Mn(s,l,m,h):l.child=ds(l,null,m,h),Vc(s,l),l.child;case 5:return s===null&&xt&&((b=m=In)&&(m=pM(m,l.type,l.pendingProps,Ra),m!==null?(l.stateNode=m,Jn=l,In=oa(m.firstChild),Ra=!1,b=!0):b=!1),b||hs(l)),or(l),b=l.type,E=l.pendingProps,A=s!==null?s.memoizedProps:null,m=E.children,dy(b,E)?m=null:A!==null&&dy(b,A)&&(l.flags|=32),l.memoizedState!==null&&(b=tg(s,l,DI,null,null,h),sf._currentValue=b),Vc(s,l),Mn(s,l,m,h),l.child;case 6:return s===null&&xt&&((s=h=In)&&(h=vM(h,l.pendingProps,Ra),h!==null?(l.stateNode=h,Jn=l,In=null,s=!0):s=!1),s||hs(l)),null;case 13:return mE(s,l,h);case 4:return St(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=ds(l,null,m,h):Mn(s,l,m,h),l.child;case 11:return uE(s,l,l.type,l.pendingProps,h);case 7:return Mn(s,l,l.pendingProps,h),l.child;case 8:return Mn(s,l,l.pendingProps.children,h),l.child;case 12:return Mn(s,l,l.pendingProps.children,h),l.child;case 10:return m=l.pendingProps,no(l,l.type,m.value),Mn(s,l,m.children,h),l.child;case 9:return b=l.type._context,m=l.pendingProps.children,xs(l),b=Vn(b),m=m(b),l.flags|=1,Mn(s,l,m,h),l.child;case 14:return lE(s,l,l.type,l.pendingProps,h);case 15:return cE(s,l,l.type,l.pendingProps,h);case 19:return yE(s,l,h);case 22:return fE(s,l,h);case 24:return xs(l),m=Vn(ln),s===null?(b=Jm(),b===null&&(b=It,E=Ym(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=h),b=E),l.memoizedState={parent:m,cache:b},Dg(l),no(l,ln,b)):((s.lanes&h)!==0&&(Ng(s,l),Hc(l,null,null,h),Wc()),b=s.memoizedState,E=l.memoizedState,b.parent!==m?(b={parent:m,cache:m},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),no(l,ln,m)):(m=E.cache,no(l,ln,m),m!==b.cache&&kg(l,[ln],h,!0))),Mn(s,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}var Og=xe(null),bs=null,vi=null;function no(s,l,h){je(Og,l._currentValue),l._currentValue=h}function mi(s){s._currentValue=Og.current,Oe(Og)}function Ag(s,l,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===h)break;s=s.return}}function kg(s,l,h,m){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var E=b.dependencies;if(E!==null){var A=b.child;E=E.firstContext;e:for(;E!==null;){var M=E;E=b;for(var z=0;z<l.length;z++)if(M.context===l[z]){E.lanes|=h,M=E.alternate,M!==null&&(M.lanes|=h),Ag(E.return,h,s),m||(A=null);break e}E=M.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(r(341));A.lanes|=h,E=A.alternate,E!==null&&(E.lanes|=h),Ag(A,h,s),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===s){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function jc(s,l,h,m){s=null;for(var b=l,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var M=b.type;xr(b.pendingProps.value,A.value)||(s!==null?s.push(M):s=[M])}}else if(b===bt.current){if(A=b.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(sf):s=[sf])}b=b.return}s!==null&&kg(l,s,h,m),l.flags|=262144}function Cd(s){for(s=s.firstContext;s!==null;){if(!xr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function xs(s){bs=s,vi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Vn(s){return xE(bs,s)}function Rd(s,l){return bs===null&&xs(s),xE(s,l)}function xE(s,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},vi===null){if(s===null)throw Error(r(308));vi=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else vi=vi.next=l;return h}var ro=!1;function Dg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ng(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ao(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function io(s,l,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Ut&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,l=od(s),t_(s,null,h),l}return id(s,m,l,h),od(s)}function qc(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194176)!==0)){var m=l.lanes;m&=s.pendingLanes,h|=m,l.lanes=h,lw(s,h)}}function Ig(s,l){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var A={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?b=E=A:E=E.next=A,h=h.next}while(h!==null);E===null?b=E=l:E=E.next=l}else b=E=l;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}var Mg=!1;function Wc(){if(Mg){var s=Du;if(s!==null)throw s}}function Hc(s,l,h,m){Mg=!1;var b=s.updateQueue;ro=!1;var E=b.firstBaseUpdate,A=b.lastBaseUpdate,M=b.shared.pending;if(M!==null){b.shared.pending=null;var z=M,Q=z.next;z.next=null,A===null?E=Q:A.next=Q,A=z;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,M=ce.lastBaseUpdate,M!==A&&(M===null?ce.firstBaseUpdate=Q:M.next=Q,ce.lastBaseUpdate=z))}if(E!==null){var me=b.baseState;A=0,ce=Q=z=null,M=E;do{var ae=M.lane&-536870913,le=ae!==M.lane;if(le?(vt&ae)===ae:(m&ae)===ae){ae!==0&&ae===ku&&(Mg=!0),ce!==null&&(ce=ce.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var ze=s,Ze=M;ae=l;var $t=h;switch(Ze.tag){case 1:if(ze=Ze.payload,typeof ze=="function"){me=ze.call($t,me,ae);break e}me=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ze.payload,ae=typeof ze=="function"?ze.call($t,me,ae):ze,ae==null)break e;me=I({},me,ae);break e;case 2:ro=!0}}ae=M.callback,ae!==null&&(s.flags|=64,le&&(s.flags|=8192),le=b.callbacks,le===null?b.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ce===null?(Q=ce=le,z=me):ce=ce.next=le,A|=ae;if(M=M.next,M===null){if(M=b.shared.pending,M===null)break;le=M,M=le.next,le.next=null,b.lastBaseUpdate=le,b.shared.pending=null}}while(!0);ce===null&&(z=me),b.baseState=z,b.firstBaseUpdate=Q,b.lastBaseUpdate=ce,E===null&&(b.shared.lanes=0),co|=A,s.lanes=A,s.memoizedState=me}}function wE(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function _E(s,l){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)wE(h[s],l)}function Gc(s,l){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&s)===s){m=void 0;var E=h.create,A=h.inst;m=E(),A.destroy=m}h=h.next}while(h!==b)}}catch(M){Dt(l,l.return,M)}}function oo(s,l,h){try{var m=l.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var E=b.next;m=E;do{if((m.tag&s)===s){var A=m.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,b=l;var z=h;try{M()}catch(Q){Dt(b,z,Q)}}}m=m.next}while(m!==E)}}catch(Q){Dt(l,l.return,Q)}}function EE(s){var l=s.updateQueue;if(l!==null){var h=s.stateNode;try{_E(l,h)}catch(m){Dt(s,s.return,m)}}}function SE(s,l,h){h.props=ys(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){Dt(s,l,m)}}function ws(s,l){try{var h=s.ref;if(h!==null){var m=s.stateNode;switch(s.tag){case 26:case 27:case 5:var b=m;break;default:b=m}typeof h=="function"?s.refCleanup=h(b):h.current=b}}catch(E){Dt(s,l,E)}}function wr(s,l){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){Dt(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Dt(s,l,b)}else h.current=null}function CE(s){var l=s.type,h=s.memoizedProps,m=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){Dt(s,s.return,b)}}function RE(s,l,h){try{var m=s.stateNode;lM(m,s.type,h,l),m[sr]=l}catch(b){Dt(s,s.return,b)}}function TE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function Fg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||TE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lg(s,l,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Ud));else if(m!==4&&m!==27&&(s=s.child,s!==null))for(Lg(s,l,h),s=s.sibling;s!==null;)Lg(s,l,h),s=s.sibling}function Td(s,l,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(m!==4&&m!==27&&(s=s.child,s!==null))for(Td(s,l,h),s=s.sibling;s!==null;)Td(s,l,h),s=s.sibling}var gi=!1,Gt=!1,Pg=!1,OE=typeof WeakSet=="function"?WeakSet:Set,wn=null,AE=!1;function zI(s,l){if(s=s.containerInfo,fy=Qd,s=Gw(s),zm(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var A=0,M=-1,z=-1,Q=0,ce=0,me=s,ae=null;t:for(;;){for(var le;me!==h||b!==0&&me.nodeType!==3||(M=A+b),me!==E||m!==0&&me.nodeType!==3||(z=A+m),me.nodeType===3&&(A+=me.nodeValue.length),(le=me.firstChild)!==null;)ae=me,me=le;for(;;){if(me===s)break t;if(ae===h&&++Q===b&&(M=A),ae===E&&++ce===m&&(z=A),(le=me.nextSibling)!==null)break;me=ae,ae=me.parentNode}me=le}h=M===-1||z===-1?null:{start:M,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for(hy={focusedElem:s,selectionRange:h},Qd=!1,wn=l;wn!==null;)if(l=wn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,wn=s;else for(;wn!==null;){switch(l=wn,E=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,h=l,b=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var ze=ys(h.type,b,h.elementType===h.type);s=m.getSnapshotBeforeUpdate(ze,E),m.__reactInternalSnapshotBeforeUpdate=s}catch(Ze){Dt(h,h.return,Ze)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,h=s.nodeType,h===9)my(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":my(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,wn=s;break}wn=l.return}return ze=AE,AE=!1,ze}function kE(s,l,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:bi(s,h),m&4&&Gc(5,h);break;case 1:if(bi(s,h),m&4)if(s=h.stateNode,l===null)try{s.componentDidMount()}catch(M){Dt(h,h.return,M)}else{var b=ys(h.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(M){Dt(h,h.return,M)}}m&64&&EE(h),m&512&&ws(h,h.return);break;case 3:if(bi(s,h),m&64&&(m=h.updateQueue,m!==null)){if(s=null,h.child!==null)switch(h.child.tag){case 27:case 5:s=h.child.stateNode;break;case 1:s=h.child.stateNode}try{_E(m,s)}catch(M){Dt(h,h.return,M)}}break;case 26:bi(s,h),m&512&&ws(h,h.return);break;case 27:case 5:bi(s,h),l===null&&m&4&&CE(h),m&512&&ws(h,h.return);break;case 12:bi(s,h);break;case 13:bi(s,h),m&4&&IE(s,h);break;case 22:if(b=h.memoizedState!==null||gi,!b){l=l!==null&&l.memoizedState!==null||Gt;var E=gi,A=Gt;gi=b,(Gt=l)&&!A?so(s,h,(h.subtreeFlags&8772)!==0):bi(s,h),gi=E,Gt=A}m&512&&(h.memoizedProps.mode==="manual"?ws(h,h.return):wr(h,h.return));break;default:bi(s,h)}}function DE(s){var l=s.alternate;l!==null&&(s.alternate=null,DE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Em(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var rn=null,_r=!1;function yi(s,l,h){for(h=h.child;h!==null;)NE(s,l,h),h=h.sibling}function NE(s,l,h){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(si,h)}catch{}switch(h.tag){case 26:Gt||wr(h,l),yi(s,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Gt||wr(h,l);var m=rn,b=_r;for(rn=h.stateNode,yi(s,l,h),h=h.stateNode,l=h.attributes;l.length;)h.removeAttributeNode(l[0]);Em(h),rn=m,_r=b;break;case 5:Gt||wr(h,l);case 6:b=rn;var E=_r;if(rn=null,yi(s,l,h),rn=b,_r=E,rn!==null)if(_r)try{s=rn,m=h.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)}catch(A){Dt(h,l,A)}else try{rn.removeChild(h.stateNode)}catch(A){Dt(h,l,A)}break;case 18:rn!==null&&(_r?(l=rn,h=h.stateNode,l.nodeType===8?vy(l.parentNode,h):l.nodeType===1&&vy(l,h),ff(l)):vy(rn,h.stateNode));break;case 4:m=rn,b=_r,rn=h.stateNode.containerInfo,_r=!0,yi(s,l,h),rn=m,_r=b;break;case 0:case 11:case 14:case 15:Gt||oo(2,h,l),Gt||oo(4,h,l),yi(s,l,h);break;case 1:Gt||(wr(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"&&SE(h,l,m)),yi(s,l,h);break;case 21:yi(s,l,h);break;case 22:Gt||wr(h,l),Gt=(m=Gt)||h.memoizedState!==null,yi(s,l,h),Gt=m;break;default:yi(s,l,h)}}function IE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ff(s)}catch(h){Dt(l,l.return,h)}}function UI(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new OE),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new OE),l;default:throw Error(r(435,s.tag))}}function Bg(s,l){var h=UI(s);l.forEach(function(m){var b=JI.bind(null,s,m);h.has(m)||(h.add(m),m.then(b,b))})}function Vr(s,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],E=s,A=l,M=A;e:for(;M!==null;){switch(M.tag){case 27:case 5:rn=M.stateNode,_r=!1;break e;case 3:rn=M.stateNode.containerInfo,_r=!0;break e;case 4:rn=M.stateNode.containerInfo,_r=!0;break e}M=M.return}if(rn===null)throw Error(r(160));NE(E,A,b),rn=null,_r=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)ME(l,s),l=l.sibling}var ia=null;function ME(s,l){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Vr(l,s),jr(s),m&4&&(oo(3,s,s.return),Gc(3,s),oo(5,s,s.return));break;case 1:Vr(l,s),jr(s),m&512&&(Gt||h===null||wr(h,h.return)),m&64&&gi&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=ia;if(Vr(l,s),jr(s),m&512&&(Gt||h===null||wr(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){e:{m=s.type,h=s.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":E=b.getElementsByTagName("title")[0],(!E||E[yc]||E[Un]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(m),b.head.insertBefore(E,b.querySelector("head > title"))),Fn(E,m,h),E[Un]=s,bn(E),m=E;break e;case"link":var A=CS("link","href",b).get(m+(h.href||""));if(A){for(var M=0;M<A.length;M++)if(E=A[M],E.getAttribute("href")===(h.href==null?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){A.splice(M,1);break t}}E=b.createElement(m),Fn(E,m,h),b.head.appendChild(E);break;case"meta":if(A=CS("meta","content",b).get(m+(h.content||""))){for(M=0;M<A.length;M++)if(E=A[M],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){A.splice(M,1);break t}}E=b.createElement(m),Fn(E,m,h),b.head.appendChild(E);break;default:throw Error(r(468,m))}E[Un]=s,bn(E),m=E}s.stateNode=m}else RS(b,s.type,s.stateNode);else s.stateNode=SS(b,m,s.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?RS(b,s.type,s.stateNode):SS(b,m,s.memoizedProps)):m===null&&s.stateNode!==null&&RE(s,s.memoizedProps,h.memoizedProps)}break;case 27:if(m&4&&s.alternate===null){b=s.stateNode,E=s.memoizedProps;try{for(var z=b.firstChild;z;){var Q=z.nextSibling,ce=z.nodeName;z[yc]||ce==="HEAD"||ce==="BODY"||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&z.rel.toLowerCase()==="stylesheet"||b.removeChild(z),z=Q}for(var me=s.type,ae=b.attributes;ae.length;)b.removeAttributeNode(ae[0]);Fn(b,me,E),b[Un]=s,b[sr]=E}catch(ze){Dt(s,s.return,ze)}}case 5:if(Vr(l,s),jr(s),m&512&&(Gt||h===null||wr(h,h.return)),s.flags&32){b=s.stateNode;try{yu(b,"")}catch(ze){Dt(s,s.return,ze)}}m&4&&s.stateNode!=null&&(b=s.memoizedProps,RE(s,b,h!==null?h.memoizedProps:b)),m&1024&&(Pg=!0);break;case 6:if(Vr(l,s),jr(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(ze){Dt(s,s.return,ze)}}break;case 3:if(Wd=null,b=ia,ia=jd(l.containerInfo),Vr(l,s),ia=b,jr(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{ff(l.containerInfo)}catch(ze){Dt(s,s.return,ze)}Pg&&(Pg=!1,FE(s));break;case 4:m=ia,ia=jd(s.stateNode.containerInfo),Vr(l,s),jr(s),ia=m;break;case 12:Vr(l,s),jr(s);break;case 13:Vr(l,s),jr(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Qg=Dn()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Bg(s,m)));break;case 22:if(m&512&&(Gt||h===null||wr(h,h.return)),z=s.memoizedState!==null,Q=h!==null&&h.memoizedState!==null,ce=gi,me=Gt,gi=ce||z,Gt=me||Q,Vr(l,s),Gt=me,gi=ce,jr(s),l=s.stateNode,l._current=s,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,m&8192&&(l._visibility=z?l._visibility&-2:l._visibility|1,z&&(l=gi||Gt,h===null||Q||l||Fu(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(h=null,l=s;;){if(l.tag===5||l.tag===26||l.tag===27){if(h===null){Q=h=l;try{if(b=Q.stateNode,z)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=Q.stateNode,M=Q.memoizedProps.style;var le=M!=null&&M.hasOwnProperty("display")?M.display:null;A.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ze){Dt(Q,Q.return,ze)}}}else if(l.tag===6){if(h===null){Q=l;try{Q.stateNode.nodeValue=z?"":Q.memoizedProps}catch(ze){Dt(Q,Q.return,ze)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Bg(s,h))));break;case 19:Vr(l,s),jr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Bg(s,m)));break;case 21:break;default:Vr(l,s),jr(s)}}function jr(s){var l=s.flags;if(l&2){try{if(s.tag!==27){e:{for(var h=s.return;h!==null;){if(TE(h)){var m=h;break e}h=h.return}throw Error(r(160))}switch(m.tag){case 27:var b=m.stateNode,E=Fg(s);Td(s,E,b);break;case 5:var A=m.stateNode;m.flags&32&&(yu(A,""),m.flags&=-33);var M=Fg(s);Td(s,M,A);break;case 3:case 4:var z=m.stateNode.containerInfo,Q=Fg(s);Lg(s,Q,z);break;default:throw Error(r(161))}}}catch(ce){Dt(s,s.return,ce)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function FE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;FE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function bi(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)kE(s,l.alternate,l),l=l.sibling}function Fu(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:oo(4,l,l.return),Fu(l);break;case 1:wr(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&SE(l,l.return,h),Fu(l);break;case 26:case 27:case 5:wr(l,l.return),Fu(l);break;case 22:wr(l,l.return),l.memoizedState===null&&Fu(l);break;default:Fu(l)}s=s.sibling}}function so(s,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,b=s,E=l,A=E.flags;switch(E.tag){case 0:case 11:case 15:so(b,E,h),Gc(4,E);break;case 1:if(so(b,E,h),m=E,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Q){Dt(m,m.return,Q)}if(m=E,b=m.updateQueue,b!==null){var M=m.stateNode;try{var z=b.shared.hiddenCallbacks;if(z!==null)for(b.shared.hiddenCallbacks=null,b=0;b<z.length;b++)wE(z[b],M)}catch(Q){Dt(m,m.return,Q)}}h&&A&64&&EE(E),ws(E,E.return);break;case 26:case 27:case 5:so(b,E,h),h&&m===null&&A&4&&CE(E),ws(E,E.return);break;case 12:so(b,E,h);break;case 13:so(b,E,h),h&&A&4&&IE(b,E);break;case 22:E.memoizedState===null&&so(b,E,h),ws(E,E.return);break;default:so(b,E,h)}l=l.sibling}}function zg(s,l){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Lc(h))}function Ug(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Lc(s))}function uo(s,l,h,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)LE(s,l,h,m),l=l.sibling}function LE(s,l,h,m){var b=l.flags;switch(l.tag){case 0:case 11:case 15:uo(s,l,h,m),b&2048&&Gc(9,l);break;case 3:uo(s,l,h,m),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Lc(s)));break;case 12:if(b&2048){uo(s,l,h,m),s=l.stateNode;try{var E=l.memoizedProps,A=E.id,M=E.onPostCommit;typeof M=="function"&&M(A,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){Dt(l,l.return,z)}}else uo(s,l,h,m);break;case 23:break;case 22:E=l.stateNode,l.memoizedState!==null?E._visibility&4?uo(s,l,h,m):Qc(s,l):E._visibility&4?uo(s,l,h,m):(E._visibility|=4,Lu(s,l,h,m,(l.subtreeFlags&10256)!==0)),b&2048&&zg(l.alternate,l);break;case 24:uo(s,l,h,m),b&2048&&Ug(l.alternate,l);break;default:uo(s,l,h,m)}}function Lu(s,l,h,m,b){for(b=b&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var E=s,A=l,M=h,z=m,Q=A.flags;switch(A.tag){case 0:case 11:case 15:Lu(E,A,M,z,b),Gc(8,A);break;case 23:break;case 22:var ce=A.stateNode;A.memoizedState!==null?ce._visibility&4?Lu(E,A,M,z,b):Qc(E,A):(ce._visibility|=4,Lu(E,A,M,z,b)),b&&Q&2048&&zg(A.alternate,A);break;case 24:Lu(E,A,M,z,b),b&&Q&2048&&Ug(A.alternate,A);break;default:Lu(E,A,M,z,b)}l=l.sibling}}function Qc(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=s,m=l,b=m.flags;switch(m.tag){case 22:Qc(h,m),b&2048&&zg(m.alternate,m);break;case 24:Qc(h,m),b&2048&&Ug(m.alternate,m);break;default:Qc(h,m)}l=l.sibling}}var $c=8192;function Pu(s){if(s.subtreeFlags&$c)for(s=s.child;s!==null;)PE(s),s=s.sibling}function PE(s){switch(s.tag){case 26:Pu(s),s.flags&$c&&s.memoizedState!==null&&OM(ia,s.memoizedState,s.memoizedProps);break;case 5:Pu(s);break;case 3:case 4:var l=ia;ia=jd(s.stateNode.containerInfo),Pu(s),ia=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=$c,$c=16777216,Pu(s),$c=l):Pu(s));break;default:Pu(s)}}function BE(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Kc(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];wn=m,UE(m,s)}BE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zE(s),s=s.sibling}function zE(s){switch(s.tag){case 0:case 11:case 15:Kc(s),s.flags&2048&&oo(9,s,s.return);break;case 3:Kc(s);break;case 12:Kc(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&4&&(s.return===null||s.return.tag!==13)?(l._visibility&=-5,Od(s)):Kc(s);break;default:Kc(s)}}function Od(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];wn=m,UE(m,s)}BE(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:oo(8,l,l.return),Od(l);break;case 22:h=l.stateNode,h._visibility&4&&(h._visibility&=-5,Od(l));break;default:Od(l)}s=s.sibling}}function UE(s,l){for(;wn!==null;){var h=wn;switch(h.tag){case 0:case 11:case 15:oo(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Lc(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,wn=m;else e:for(h=s;wn!==null;){m=wn;var b=m.sibling,E=m.return;if(DE(m),m===h){wn=null;break e}if(b!==null){b.return=E,wn=b;break e}wn=E}}}function VI(s,l,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(s,l,h,m){return new VI(s,l,h,m)}function Vg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function lo(s,l){var h=s.alternate;return h===null?(h=qr(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&31457280,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function VE(s,l){s.flags&=31457282;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,l=h.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Ad(s,l,h,m,b,E){var A=0;if(m=s,typeof s=="function")Vg(s)&&(A=1);else if(typeof s=="string")A=RM(s,h,Ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case c:return _s(h.children,b,E,l);case f:A=8,b|=24;break;case d:return s=qr(12,h,l,b|2),s.elementType=d,s.lanes=E,s;case x:return s=qr(13,h,l,b),s.elementType=x,s.lanes=E,s;case w:return s=qr(19,h,l,b),s.elementType=w,s.lanes=E,s;case C:return jE(h,b,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case p:case g:A=10;break e;case v:A=9;break e;case y:A=11;break e;case _:A=14;break e;case S:A=16,m=null;break e}A=29,h=Error(r(130,s===null?"null":typeof s,"")),m=null}return l=qr(A,h,l,b),l.elementType=s,l.type=m,l.lanes=E,l}function _s(s,l,h,m){return s=qr(7,s,m,l),s.lanes=h,s}function jE(s,l,h,m){s=qr(22,s,m,l),s.elementType=C,s.lanes=h;var b={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var E=b._current;if(E===null)throw Error(r(456));if((b._pendingVisibility&2)===0){var A=Yi(E,2);A!==null&&(b._pendingVisibility|=2,er(A,E,2))}},attach:function(){var E=b._current;if(E===null)throw Error(r(456));if((b._pendingVisibility&2)!==0){var A=Yi(E,2);A!==null&&(b._pendingVisibility&=-3,er(A,E,2))}}};return s.stateNode=b,s}function jg(s,l,h){return s=qr(6,s,null,l),s.lanes=h,s}function qg(s,l,h){return l=qr(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function xi(s){s.flags|=4}function qE(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!TS(l)){if(l=Ur.current,l!==null&&((vt&4194176)===vt?Ta!==null:(vt&62914560)!==vt&&(vt&536870912)===0||l!==Ta))throw Ic=$m,o_;s.flags|=8192}}function kd(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?sw():536870912,s.lanes|=l,zu|=l)}function Xc(s,l){if(!xt)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function zt(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(l)for(var b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&31457280,m|=b.flags&31457280,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=m,s.childLanes=h,l}function jI(s,l,h){var m=l.pendingProps;switch(Gm(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(l),null;case 1:return zt(l),null;case 3:return h=l.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),mi(ln),yt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Ac(l)?xi(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,aa!==null&&(Yg(aa),aa=null))),zt(l),null;case 26:return h=l.memoizedState,s===null?(xi(l),h!==null?(zt(l),qE(l,h)):(zt(l),l.flags&=-16777217)):h?h!==s.memoizedState?(xi(l),zt(l),qE(l,h)):(zt(l),l.flags&=-16777217):(s.memoizedProps!==m&&xi(l),zt(l),l.flags&=-16777217),null;case 27:Yn(l),h=Ye.current;var b=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==m&&xi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return zt(l),null}s=Ve.current,Ac(l)?a_(l):(s=bS(b,m,h),l.stateNode=s,xi(l))}return zt(l),null;case 5:if(Yn(l),h=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&xi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return zt(l),null}if(s=Ve.current,Ac(l))a_(l);else{switch(b=Vd(Ye.current),s){case 1:s=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:s=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":s=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":s=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?b.createElement(h,{is:m.is}):b.createElement(h)}}s[Un]=l,s[sr]=m;e:for(b=l.child;b!==null;){if(b.tag===5||b.tag===6)s.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===l)break e;for(;b.sibling===null;){if(b.return===null||b.return===l)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}l.stateNode=s;e:switch(Fn(s,h,m),h){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&xi(l)}}return zt(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==m&&xi(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(s=Ye.current,Ac(l)){if(s=l.stateNode,h=l.memoizedProps,m=null,b=Jn,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}s[Un]=l,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||dS(s.nodeValue,h)),s||hs(l)}else s=Vd(s).createTextNode(m),s[Un]=l,l.stateNode=s}return zt(l),null;case 13:if(m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Ac(l),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Un]=l}else kc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),b=!1}else aa!==null&&(Yg(aa),aa=null),b=!0;if(!b)return l.flags&256?(hi(l),l):(hi(l),null)}if(hi(l),(l.flags&128)!==0)return l.lanes=h,l;if(h=m!==null,s=s!==null&&s.memoizedState!==null,h){m=l.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==b&&(m.flags|=2048)}return h!==s&&h&&(l.child.flags|=8192),kd(l,l.updateQueue),zt(l),null;case 4:return yt(),s===null&&uy(l.stateNode.containerInfo),zt(l),null;case 10:return mi(l.type),zt(l),null;case 19:if(Oe(un),b=l.memoizedState,b===null)return zt(l),null;if(m=(l.flags&128)!==0,E=b.rendering,E===null)if(m)Xc(b,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(E=dd(s),E!==null){for(l.flags|=128,Xc(b,!1),s=E.updateQueue,l.updateQueue=s,kd(l,s),l.subtreeFlags=0,s=h,h=l.child;h!==null;)VE(h,s),h=h.sibling;return je(un,un.current&1|2),l.child}s=s.sibling}b.tail!==null&&Dn()>Dd&&(l.flags|=128,m=!0,Xc(b,!1),l.lanes=4194304)}else{if(!m)if(s=dd(E),s!==null){if(l.flags|=128,m=!0,s=s.updateQueue,l.updateQueue=s,kd(l,s),Xc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!E.alternate&&!xt)return zt(l),null}else 2*Dn()-b.renderingStartTime>Dd&&h!==536870912&&(l.flags|=128,m=!0,Xc(b,!1),l.lanes=4194304);b.isBackwards?(E.sibling=l.child,l.child=E):(s=b.last,s!==null?s.sibling=E:l.child=E,b.last=E)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Dn(),l.sibling=null,s=un.current,je(un,m?s&1|2:s&1),l):(zt(l),null);case 22:case 23:return hi(l),Xm(),m=l.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(h&536870912)!==0&&(l.flags&128)===0&&(zt(l),l.subtreeFlags&6&&(l.flags|=8192)):zt(l),h=l.updateQueue,h!==null&&kd(l,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048),s!==null&&Oe(ps),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),mi(ln),zt(l),null;case 25:return null}throw Error(r(156,l.tag))}function qI(s,l){switch(Gm(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return mi(ln),yt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Yn(l),null;case 13:if(hi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));kc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Oe(un),null;case 4:return yt(),null;case 10:return mi(l.type),null;case 22:case 23:return hi(l),Xm(),s!==null&&Oe(ps),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return mi(ln),null;case 25:return null;default:return null}}function WE(s,l){switch(Gm(l),l.tag){case 3:mi(ln),yt();break;case 26:case 27:case 5:Yn(l);break;case 4:yt();break;case 13:hi(l);break;case 19:Oe(un);break;case 10:mi(l.type);break;case 22:case 23:hi(l),Xm(),s!==null&&Oe(ps);break;case 24:mi(ln)}}var WI={getCacheForType:function(s){var l=Vn(ln),h=l.data.get(s);return h===void 0&&(h=s(),l.data.set(s,h)),h}},HI=typeof WeakMap=="function"?WeakMap:Map,Ut=0,It=null,lt=null,vt=0,Mt=0,Er=null,wi=!1,Bu=!1,Wg=!1,_i=0,Qt=0,co=0,Es=0,Hg=0,Wr=0,zu=0,Yc=null,Aa=null,Gg=!1,Qg=0,Dd=1/0,Nd=null,fo=null,Id=!1,Ss=null,Zc=0,$g=0,Kg=null,Jc=0,Xg=null;function Sr(){if((Ut&2)!==0&&vt!==0)return vt&-vt;if(k.T!==null){var s=ku;return s!==0?s:ay()}return fw()}function HE(){Wr===0&&(Wr=(vt&536870912)===0||xt?ow():536870912);var s=Ur.current;return s!==null&&(s.flags|=32),Wr}function er(s,l,h){(s===It&&Mt===2||s.cancelPendingCommit!==null)&&(Uu(s,0),Ei(s,vt,Wr,!1)),gc(s,h),((Ut&2)===0||s!==It)&&(s===It&&((Ut&2)===0&&(Es|=h),Qt===4&&Ei(s,vt,Wr,!1)),ka(s))}function GE(s,l,h){if((Ut&6)!==0)throw Error(r(327));var m=!h&&(l&60)===0&&(l&s.expiredLanes)===0||mc(s,l),b=m?$I(s,l):ey(s,l,!0),E=m;do{if(b===0){Bu&&!m&&Ei(s,l,0,!1);break}else if(b===6)Ei(s,l,0,!wi);else{if(h=s.current.alternate,E&&!GI(h)){b=ey(s,l,!1),E=!1;continue}if(b===2){if(E=l,s.errorRecoveryDisabledLanes&E)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var M=s;b=Yc;var z=M.current.memoizedState.isDehydrated;if(z&&(Uu(M,A).flags|=256),A=ey(M,A,!1),A!==2){if(Wg&&!z){M.errorRecoveryDisabledLanes|=E,Es|=E,b=4;break e}E=Aa,Aa=b,E!==null&&Yg(E)}b=A}if(E=!1,b!==2)continue}}if(b===1){Uu(s,0),Ei(s,l,0,!0);break}e:{switch(m=s,b){case 0:case 1:throw Error(r(345));case 4:if((l&4194176)===l){Ei(m,l,Wr,!wi);break e}break;case 2:Aa=null;break;case 3:case 5:break;default:throw Error(r(329))}if(m.finishedWork=h,m.finishedLanes=l,(l&62914560)===l&&(E=Qg+300-Dn(),10<E)){if(Ei(m,l,Wr,!wi),Gh(m,0)!==0)break e;m.timeoutHandle=mS(QE.bind(null,m,h,Aa,Nd,Gg,l,Wr,Es,zu,wi,2,-0,0),E);break e}QE(m,h,Aa,Nd,Gg,l,Wr,Es,zu,wi,0,-0,0)}}break}while(!0);ka(s)}function Yg(s){Aa===null?Aa=s:Aa.push.apply(Aa,s)}function QE(s,l,h,m,b,E,A,M,z,Q,ce,me,ae){var le=l.subtreeFlags;if((le&8192||(le&16785408)===16785408)&&(of={stylesheets:null,count:0,unsuspend:TM},PE(l),l=AM(),l!==null)){s.cancelPendingCommit=l(eS.bind(null,s,h,m,b,A,M,z,1,me,ae)),Ei(s,E,A,!Q);return}eS(s,h,m,b,A,M,z,ce,me,ae)}function GI(s){for(var l=s;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],E=b.getSnapshot;b=b.value;try{if(!xr(E(),b))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ei(s,l,h,m){l&=~Hg,l&=~Es,s.suspendedLanes|=l,s.pingedLanes&=~l,m&&(s.warmLanes|=l),m=s.expirationTimes;for(var b=l;0<b;){var E=31-br(b),A=1<<E;m[E]=-1,b&=~A}h!==0&&uw(s,h,l)}function Md(){return(Ut&6)===0?(ef(0),!1):!0}function Zg(){if(lt!==null){if(Mt===0)var s=lt.return;else s=lt,vi=bs=null,ag(s),Ou=null,Mc=0,s=lt;for(;s!==null;)WE(s.alternate,s),s=s.return;lt=null}}function Uu(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,fM(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Zg(),It=s,lt=h=lo(s.current,null),vt=l,Mt=0,Er=null,wi=!1,Bu=mc(s,l),Wg=!1,zu=Wr=Hg=Es=co=Qt=0,Aa=Yc=null,Gg=!1,(l&8)!==0&&(l|=l&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=l;0<m;){var b=31-br(m),E=1<<b;l|=s[b],m&=~E}return _i=l,ad(),h}function $E(s,l){ot=null,k.H=Oa,l===Nc?(l=l_(),Mt=3):l===o_?(l=l_(),Mt=4):Mt=l===sE?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Er=l,lt===null&&(Qt=1,Sd(s,Pr(l,s.current)))}function KE(){var s=k.H;return k.H=Oa,s===null?Oa:s}function XE(){var s=k.A;return k.A=WI,s}function Jg(){Qt=4,wi||(vt&4194176)!==vt&&Ur.current!==null||(Bu=!0),(co&134217727)===0&&(Es&134217727)===0||It===null||Ei(It,vt,Wr,!1)}function ey(s,l,h){var m=Ut;Ut|=2;var b=KE(),E=XE();(It!==s||vt!==l)&&(Nd=null,Uu(s,l)),l=!1;var A=Qt;e:do try{if(Mt!==0&&lt!==null){var M=lt,z=Er;switch(Mt){case 8:Zg(),A=6;break e;case 3:case 2:case 6:Ur.current===null&&(l=!0);var Q=Mt;if(Mt=0,Er=null,Vu(s,M,z,Q),h&&Bu){A=0;break e}break;default:Q=Mt,Mt=0,Er=null,Vu(s,M,z,Q)}}QI(),A=Qt;break}catch(ce){$E(s,ce)}while(!0);return l&&s.shellSuspendCounter++,vi=bs=null,Ut=m,k.H=b,k.A=E,lt===null&&(It=null,vt=0,ad()),A}function QI(){for(;lt!==null;)YE(lt)}function $I(s,l){var h=Ut;Ut|=2;var m=KE(),b=XE();It!==s||vt!==l?(Nd=null,Dd=Dn()+500,Uu(s,l)):Bu=mc(s,l);e:do try{if(Mt!==0&&lt!==null){l=lt;var E=Er;t:switch(Mt){case 1:Mt=0,Er=null,Vu(s,l,E,1);break;case 2:if(s_(E)){Mt=0,Er=null,ZE(l);break}l=function(){Mt===2&&It===s&&(Mt=7),ka(s)},E.then(l,l);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:s_(E)?(Mt=0,Er=null,ZE(l)):(Mt=0,Er=null,Vu(s,l,E,7));break;case 5:var A=null;switch(lt.tag){case 26:A=lt.memoizedState;case 5:case 27:var M=lt;if(!A||TS(A)){Mt=0,Er=null;var z=M.sibling;if(z!==null)lt=z;else{var Q=M.return;Q!==null?(lt=Q,Fd(Q)):lt=null}break t}}Mt=0,Er=null,Vu(s,l,E,5);break;case 6:Mt=0,Er=null,Vu(s,l,E,6);break;case 8:Zg(),Qt=6;break e;default:throw Error(r(462))}}KI();break}catch(ce){$E(s,ce)}while(!0);return vi=bs=null,k.H=m,k.A=b,Ut=h,lt!==null?0:(It=null,vt=0,ad(),Qt)}function KI(){for(;lt!==null&&!Ca();)YE(lt)}function YE(s){var l=bE(s.alternate,s,_i);s.memoizedProps=s.pendingProps,l===null?Fd(s):lt=l}function ZE(s){var l=s,h=l.alternate;switch(l.tag){case 15:case 0:l=dE(h,l,l.pendingProps,l.type,void 0,vt);break;case 11:l=dE(h,l,l.pendingProps,l.type.render,l.ref,vt);break;case 5:ag(l);default:WE(h,l),l=lt=VE(l,_i),l=bE(h,l,_i)}s.memoizedProps=s.pendingProps,l===null?Fd(s):lt=l}function Vu(s,l,h,m){vi=bs=null,ag(l),Ou=null,Mc=0;var b=l.return;try{if(PI(s,b,l,h,vt)){Qt=1,Sd(s,Pr(h,s.current)),lt=null;return}}catch(E){if(b!==null)throw lt=b,E;Qt=1,Sd(s,Pr(h,s.current)),lt=null;return}l.flags&32768?(xt||m===1?s=!0:Bu||(vt&536870912)!==0?s=!1:(wi=s=!0,(m===2||m===3||m===6)&&(m=Ur.current,m!==null&&m.tag===13&&(m.flags|=16384))),JE(l,s)):Fd(l)}function Fd(s){var l=s;do{if((l.flags&32768)!==0){JE(l,wi);return}s=l.return;var h=jI(l.alternate,l,_i);if(h!==null){lt=h;return}if(l=l.sibling,l!==null){lt=l;return}lt=l=s}while(l!==null);Qt===0&&(Qt=5)}function JE(s,l){do{var h=qI(s.alternate,s);if(h!==null){h.flags&=32767,lt=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(s=s.sibling,s!==null)){lt=s;return}lt=s=h}while(s!==null);Qt=6,lt=null}function eS(s,l,h,m,b,E,A,M,z,Q){var ce=k.T,me=he.p;try{he.p=2,k.T=null,XI(s,l,h,m,me,b,E,A,M,z,Q)}finally{k.T=ce,he.p=me}}function XI(s,l,h,m,b,E,A,M){do ju();while(Ss!==null);if((Ut&6)!==0)throw Error(r(327));var z=s.finishedWork;if(m=s.finishedLanes,z===null)return null;if(s.finishedWork=null,s.finishedLanes=0,z===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var Q=z.lanes|z.childLanes;if(Q|=qm,ON(s,m,Q,E,A,M),s===It&&(lt=It=null,vt=0),(z.subtreeFlags&10256)===0&&(z.flags&10256)===0||Id||(Id=!0,$g=Q,Kg=h,eM(Zn,function(){return ju(),null})),h=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||h?(h=k.T,k.T=null,E=he.p,he.p=2,A=Ut,Ut|=4,zI(s,z),ME(z,s),xI(hy,s.containerInfo),Qd=!!fy,hy=fy=null,s.current=z,kE(s,z.alternate,z),ta(),Ut=A,he.p=E,k.T=h):s.current=z,Id?(Id=!1,Ss=s,Zc=m):tS(s,Q),Q=s.pendingLanes,Q===0&&(fo=null),vc(z.stateNode),ka(s),l!==null)for(b=s.onRecoverableError,z=0;z<l.length;z++)Q=l[z],b(Q.value,{componentStack:Q.stack});return(Zc&3)!==0&&ju(),Q=s.pendingLanes,(m&4194218)!==0&&(Q&42)!==0?s===Xg?Jc++:(Jc=0,Xg=s):Jc=0,ef(0),null}function tS(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Lc(l)))}function ju(){if(Ss!==null){var s=Ss,l=$g;$g=0;var h=cw(Zc),m=k.T,b=he.p;try{if(he.p=32>h?32:h,k.T=null,Ss===null)var E=!1;else{h=Kg,Kg=null;var A=Ss,M=Zc;if(Ss=null,Zc=0,(Ut&6)!==0)throw Error(r(331));var z=Ut;if(Ut|=4,zE(A.current),LE(A,A.current,M,h),Ut=z,ef(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(si,A)}catch{}E=!0}return E}finally{he.p=b,k.T=m,tS(s,l)}}return!1}function nS(s,l,h){l=Pr(h,l),l=yg(s.stateNode,l,2),s=io(s,l,2),s!==null&&(gc(s,2),ka(s))}function Dt(s,l,h){if(s.tag===3)nS(s,s,h);else for(;l!==null;){if(l.tag===3){nS(l,s,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(fo===null||!fo.has(m))){s=Pr(h,s),h=iE(2),m=io(l,h,2),m!==null&&(oE(h,m,l,s),gc(m,2),ka(m));break}}l=l.return}}function ty(s,l,h){var m=s.pingCache;if(m===null){m=s.pingCache=new HI;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(h)||(Wg=!0,b.add(h),s=YI.bind(null,s,l,h),l.then(s,s))}function YI(s,l,h){var m=s.pingCache;m!==null&&m.delete(l),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,It===s&&(vt&h)===h&&(Qt===4||Qt===3&&(vt&62914560)===vt&&300>Dn()-Qg?(Ut&2)===0&&Uu(s,0):Hg|=h,zu===vt&&(zu=0)),ka(s)}function rS(s,l){l===0&&(l=sw()),s=Yi(s,l),s!==null&&(gc(s,l),ka(s))}function ZI(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),rS(s,h)}function JI(s,l){var h=0;switch(s.tag){case 13:var m=s.stateNode,b=s.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),rS(s,h)}function eM(s,l){return Sa(s,l)}var Ld=null,qu=null,ny=!1,Pd=!1,ry=!1,Cs=0;function ka(s){s!==qu&&s.next===null&&(qu===null?Ld=qu=s:qu=qu.next=s),Pd=!0,ny||(ny=!0,nM(tM))}function ef(s,l){if(!ry&&Pd){ry=!0;do for(var h=!1,m=Ld;m!==null;){if(s!==0){var b=m.pendingLanes;if(b===0)var E=0;else{var A=m.suspendedLanes,M=m.pingedLanes;E=(1<<31-br(42|s)+1)-1,E&=b&~(A&~M),E=E&201326677?E&201326677|1:E?E|2:0}E!==0&&(h=!0,oS(m,E))}else E=vt,E=Gh(m,m===It?E:0),(E&3)===0||mc(m,E)||(h=!0,oS(m,E));m=m.next}while(h);ry=!1}}function tM(){Pd=ny=!1;var s=0;Cs!==0&&(cM()&&(s=Cs),Cs=0);for(var l=Dn(),h=null,m=Ld;m!==null;){var b=m.next,E=aS(m,l);E===0?(m.next=null,h===null?Ld=b:h.next=b,b===null&&(qu=h)):(h=m,(s!==0||(E&3)!==0)&&(Pd=!0)),m=b}ef(s)}function aS(s,l){for(var h=s.suspendedLanes,m=s.pingedLanes,b=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var A=31-br(E),M=1<<A,z=b[A];z===-1?((M&h)===0||(M&m)!==0)&&(b[A]=TN(M,l)):z<=l&&(s.expiredLanes|=M),E&=~M}if(l=It,h=vt,h=Gh(s,s===l?h:0),m=s.callbackNode,h===0||s===l&&Mt===2||s.cancelPendingCommit!==null)return m!==null&&m!==null&&yr(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||mc(s,h)){if(l=h&-h,l===s.callbackPriority)return l;switch(m!==null&&yr(m),cw(h)){case 2:case 8:h=oi;break;case 32:h=Zn;break;case 268435456:h=qh;break;default:h=Zn}return m=iS.bind(null,s),h=Sa(h,m),s.callbackPriority=l,s.callbackNode=h,l}return m!==null&&m!==null&&yr(m),s.callbackPriority=2,s.callbackNode=null,2}function iS(s,l){var h=s.callbackNode;if(ju()&&s.callbackNode!==h)return null;var m=vt;return m=Gh(s,s===It?m:0),m===0?null:(GE(s,m,l),aS(s,Dn()),s.callbackNode!=null&&s.callbackNode===h?iS.bind(null,s):null)}function oS(s,l){if(ju())return null;GE(s,l,!0)}function nM(s){hM(function(){(Ut&6)!==0?Sa(hu,s):s()})}function ay(){return Cs===0&&(Cs=ow()),Cs}function sS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Yh(""+s)}function uS(s,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,s.id&&h.setAttribute("form",s.id),l.parentNode.insertBefore(h,l),s=new FormData(s),h.parentNode.removeChild(h),s}function rM(s,l,h,m,b){if(l==="submit"&&h&&h.stateNode===b){var E=sS((b[sr]||null).action),A=m.submitter;A&&(l=(l=A[sr]||null)?sS(l.formAction):A.getAttribute("formAction"),l!==null&&(E=l,A=null));var M=new td("action","action",null,m,b);s.push({event:M,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Cs!==0){var z=A?uS(b,A):new FormData(b);dg(h,{pending:!0,data:z,method:b.method,action:E},null,z)}}else typeof E=="function"&&(M.preventDefault(),z=A?uS(b,A):new FormData(b),dg(h,{pending:!0,data:z,method:b.method,action:E},E,z))},currentTarget:b}]})}}for(var iy=0;iy<e_.length;iy++){var oy=e_[iy],aM=oy.toLowerCase(),iM=oy[0].toUpperCase()+oy.slice(1);ra(aM,"on"+iM)}ra(Kw,"onAnimationEnd"),ra(Xw,"onAnimationIteration"),ra(Yw,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(_I,"onTransitionRun"),ra(EI,"onTransitionStart"),ra(SI,"onTransitionCancel"),ra(Zw,"onTransitionEnd"),mu("onMouseEnter",["mouseout","mouseover"]),mu("onMouseLeave",["mouseout","mouseover"]),mu("onPointerEnter",["pointerout","pointerover"]),mu("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tf));function lS(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],b=m.event;m=m.listeners;e:{var E=void 0;if(l)for(var A=m.length-1;0<=A;A--){var M=m[A],z=M.instance,Q=M.currentTarget;if(M=M.listener,z!==E&&b.isPropagationStopped())break e;E=M,b.currentTarget=Q;try{E(b)}catch(ce){Ed(ce)}b.currentTarget=null,E=z}else for(A=0;A<m.length;A++){if(M=m[A],z=M.instance,Q=M.currentTarget,M=M.listener,z!==E&&b.isPropagationStopped())break e;E=M,b.currentTarget=Q;try{E(b)}catch(ce){Ed(ce)}b.currentTarget=null,E=z}}}}function ht(s,l){var h=l[_m];h===void 0&&(h=l[_m]=new Set);var m=s+"__bubble";h.has(m)||(cS(l,s,2,!1),h.add(m))}function sy(s,l,h){var m=0;l&&(m|=4),cS(h,s,m,l)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function uy(s){if(!s[Bd]){s[Bd]=!0,dw.forEach(function(h){h!=="selectionchange"&&(oM.has(h)||sy(h,!1,s),sy(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Bd]||(l[Bd]=!0,sy("selectionchange",!1,l))}}function cS(s,l,h,m){switch(IS(l)){case 2:var b=NM;break;case 8:b=IM;break;default:b=wy}h=b.bind(null,l,h,s),b=void 0,!km||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?s.addEventListener(l,h,{capture:!0,passive:b}):s.addEventListener(l,h,!0):b!==void 0?s.addEventListener(l,h,{passive:b}):s.addEventListener(l,h,!1)}function ly(s,l,h,m,b){var E=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var M=m.stateNode.containerInfo;if(M===b||M.nodeType===8&&M.parentNode===b)break;if(A===4)for(A=m.return;A!==null;){var z=A.tag;if((z===3||z===4)&&(z=A.stateNode.containerInfo,z===b||z.nodeType===8&&z.parentNode===b))return;A=A.return}for(;M!==null;){if(A=is(M),A===null)return;if(z=A.tag,z===5||z===6||z===26||z===27){m=E=A;continue e}M=M.parentNode}}m=m.return}Cw(function(){var Q=E,ce=Om(h),me=[];e:{var ae=Jw.get(s);if(ae!==void 0){var le=td,ze=s;switch(s){case"keypress":if(Jh(h)===0)break e;case"keydown":case"keyup":le=JN;break;case"focusin":ze="focus",le=Mm;break;case"focusout":ze="blur",le=Mm;break;case"beforeblur":case"afterblur":le=Mm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ow;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=VN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=nI;break;case Kw:case Xw:case Yw:le=WN;break;case Zw:le=aI;break;case"scroll":case"scrollend":le=zN;break;case"wheel":le=oI;break;case"copy":case"cut":case"paste":le=GN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=kw;break;case"toggle":case"beforetoggle":le=uI}var Ze=(l&4)!==0,$t=!Ze&&(s==="scroll"||s==="scrollend"),X=Ze?ae!==null?ae+"Capture":null:ae;Ze=[];for(var H=Q,ne;H!==null;){var de=H;if(ne=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ne===null||X===null||(de=xc(H,X),de!=null&&Ze.push(nf(H,de,ne))),$t)break;H=H.return}0<Ze.length&&(ae=new le(ae,ze,null,h,ce),me.push({event:ae,listeners:Ze}))}}if((l&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",ae&&h!==Tm&&(ze=h.relatedTarget||h.fromElement)&&(is(ze)||ze[du]))break e;if((le||ae)&&(ae=ce.window===ce?ce:(ae=ce.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(ze=h.relatedTarget||h.toElement,le=Q,ze=ze?is(ze):null,ze!==null&&($t=G(ze),Ze=ze.tag,ze!==$t||Ze!==5&&Ze!==27&&Ze!==6)&&(ze=null)):(le=null,ze=Q),le!==ze)){if(Ze=Ow,de="onMouseLeave",X="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Ze=kw,de="onPointerLeave",X="onPointerEnter",H="pointer"),$t=le==null?ae:bc(le),ne=ze==null?ae:bc(ze),ae=new Ze(de,H+"leave",le,h,ce),ae.target=$t,ae.relatedTarget=ne,de=null,is(ce)===Q&&(Ze=new Ze(X,H+"enter",ze,h,ce),Ze.target=ne,Ze.relatedTarget=$t,de=Ze),$t=de,le&&ze)t:{for(Ze=le,X=ze,H=0,ne=Ze;ne;ne=Wu(ne))H++;for(ne=0,de=X;de;de=Wu(de))ne++;for(;0<H-ne;)Ze=Wu(Ze),H--;for(;0<ne-H;)X=Wu(X),ne--;for(;H--;){if(Ze===X||X!==null&&Ze===X.alternate)break t;Ze=Wu(Ze),X=Wu(X)}Ze=null}else Ze=null;le!==null&&fS(me,ae,le,Ze,!1),ze!==null&&$t!==null&&fS(me,$t,ze,Ze,!0)}}e:{if(ae=Q?bc(Q):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var Ae=Bw;else if(Lw(ae))if(zw)Ae=yI;else{Ae=mI;var st=vI}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?Q&&Rm(Q.elementType)&&(Ae=Bw):Ae=gI;if(Ae&&(Ae=Ae(s,Q))){Pw(me,Ae,h,ce);break e}st&&st(s,ae,Q),s==="focusout"&&Q&&ae.type==="number"&&Q.memoizedProps.value!=null&&Cm(ae,"number",ae.value)}switch(st=Q?bc(Q):window,s){case"focusin":(Lw(st)||st.contentEditable==="true")&&(_u=st,Um=Q,Oc=null);break;case"focusout":Oc=Um=_u=null;break;case"mousedown":Vm=!0;break;case"contextmenu":case"mouseup":case"dragend":Vm=!1,Qw(me,h,ce);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":Qw(me,h,ce)}var Ue;if(Lm)e:{switch(s){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else wu?Mw(s,h)&&(We="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(We="onCompositionStart");We&&(Dw&&h.locale!=="ko"&&(wu||We!=="onCompositionStart"?We==="onCompositionEnd"&&wu&&(Ue=Rw()):(Xi=ce,Dm="value"in Xi?Xi.value:Xi.textContent,wu=!0)),st=zd(Q,We),0<st.length&&(We=new Aw(We,s,null,h,ce),me.push({event:We,listeners:st}),Ue?We.data=Ue:(Ue=Fw(h),Ue!==null&&(We.data=Ue)))),(Ue=cI?fI(s,h):hI(s,h))&&(We=zd(Q,"onBeforeInput"),0<We.length&&(st=new Aw("onBeforeInput","beforeinput",null,h,ce),me.push({event:st,listeners:We}),st.data=Ue)),rM(me,s,Q,h,ce)}lS(me,l)})}function nf(s,l,h){return{instance:s,listener:l,currentTarget:h}}function zd(s,l){for(var h=l+"Capture",m=[];s!==null;){var b=s,E=b.stateNode;b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=xc(s,h),b!=null&&m.unshift(nf(s,b,E)),b=xc(s,l),b!=null&&m.push(nf(s,b,E))),s=s.return}return m}function Wu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function fS(s,l,h,m,b){for(var E=l._reactName,A=[];h!==null&&h!==m;){var M=h,z=M.alternate,Q=M.stateNode;if(M=M.tag,z!==null&&z===m)break;M!==5&&M!==26&&M!==27||Q===null||(z=Q,b?(Q=xc(h,E),Q!=null&&A.unshift(nf(h,Q,z))):b||(Q=xc(h,E),Q!=null&&A.push(nf(h,Q,z)))),h=h.return}A.length!==0&&s.push({event:l,listeners:A})}var sM=/\r\n?/g,uM=/\u0000|\uFFFD/g;function hS(s){return(typeof s=="string"?s:""+s).replace(sM,`
`).replace(uM,"")}function dS(s,l){return l=hS(l),hS(s)===l}function Ud(){}function kt(s,l,h,m,b,E){switch(h){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||yu(s,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&yu(s,""+m);break;case"className":$h(s,"class",m);break;case"tabIndex":$h(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":$h(s,h,m);break;case"style":Ew(s,m,E);break;case"data":if(l!=="object"){$h(s,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Yh(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(l!=="input"&&kt(s,l,"name",b.name,b,null),kt(s,l,"formEncType",b.formEncType,b,null),kt(s,l,"formMethod",b.formMethod,b,null),kt(s,l,"formTarget",b.formTarget,b,null)):(kt(s,l,"encType",b.encType,b,null),kt(s,l,"method",b.method,b,null),kt(s,l,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Yh(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=Ud);break;case"onScroll":m!=null&&ht("scroll",s);break;case"onScrollEnd":m!=null&&ht("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=Yh(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":ht("beforetoggle",s),ht("toggle",s),Qh(s,"popover",m);break;case"xlinkActuate":li(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":li(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":li(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":li(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":li(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":li(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":li(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":li(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":li(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Qh(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=PN.get(h)||h,Qh(s,h,m))}}function cy(s,l,h,m,b,E){switch(h){case"style":Ew(s,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"children":typeof m=="string"?yu(s,m):(typeof m=="number"||typeof m=="bigint")&&yu(s,""+m);break;case"onScroll":m!=null&&ht("scroll",s);break;case"onScrollEnd":m!=null&&ht("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Ud);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pw.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),l=h.slice(2,b?h.length-7:void 0),E=s[sr]||null,E=E!=null?E[h]:null,typeof E=="function"&&s.removeEventListener(l,E,b),typeof m=="function")){typeof E!="function"&&E!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(l,m,b);break e}h in s?s[h]=m:m===!0?s.setAttribute(h,""):Qh(s,h,m)}}}function Fn(s,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",s),ht("load",s);var m=!1,b=!1,E;for(E in h)if(h.hasOwnProperty(E)){var A=h[E];if(A!=null)switch(E){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:kt(s,l,E,A,h,null)}}b&&kt(s,l,"srcSet",h.srcSet,h,null),m&&kt(s,l,"src",h.src,h,null);return;case"input":ht("invalid",s);var M=E=A=b=null,z=null,Q=null;for(m in h)if(h.hasOwnProperty(m)){var ce=h[m];if(ce!=null)switch(m){case"name":b=ce;break;case"type":A=ce;break;case"checked":z=ce;break;case"defaultChecked":Q=ce;break;case"value":E=ce;break;case"defaultValue":M=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:kt(s,l,m,ce,h,null)}}bw(s,E,M,z,Q,A,b,!1),Kh(s);return;case"select":ht("invalid",s),m=A=E=null;for(b in h)if(h.hasOwnProperty(b)&&(M=h[b],M!=null))switch(b){case"value":E=M;break;case"defaultValue":A=M;break;case"multiple":m=M;default:kt(s,l,b,M,h,null)}l=E,h=A,s.multiple=!!m,l!=null?gu(s,!!m,l,!1):h!=null&&gu(s,!!m,h,!0);return;case"textarea":ht("invalid",s),E=b=m=null;for(A in h)if(h.hasOwnProperty(A)&&(M=h[A],M!=null))switch(A){case"value":m=M;break;case"defaultValue":b=M;break;case"children":E=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:kt(s,l,A,M,h,null)}ww(s,m,b,E),Kh(s);return;case"option":for(z in h)if(h.hasOwnProperty(z)&&(m=h[z],m!=null))switch(z){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:kt(s,l,z,m,h,null)}return;case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":ht("load",s);break;case"video":case"audio":for(m=0;m<tf.length;m++)ht(tf[m],s);break;case"image":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"embed":case"source":case"link":ht("error",s),ht("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in h)if(h.hasOwnProperty(Q)&&(m=h[Q],m!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:kt(s,l,Q,m,h,null)}return;default:if(Rm(l)){for(ce in h)h.hasOwnProperty(ce)&&(m=h[ce],m!==void 0&&cy(s,l,ce,m,h,void 0));return}}for(M in h)h.hasOwnProperty(M)&&(m=h[M],m!=null&&kt(s,l,M,m,h,null))}function lM(s,l,h,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,A=null,M=null,z=null,Q=null,ce=null;for(le in h){var me=h[le];if(h.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":z=me;default:m.hasOwnProperty(le)||kt(s,l,le,null,m,me)}}for(var ae in m){var le=m[ae];if(me=h[ae],m.hasOwnProperty(ae)&&(le!=null||me!=null))switch(ae){case"type":E=le;break;case"name":b=le;break;case"checked":Q=le;break;case"defaultChecked":ce=le;break;case"value":A=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:le!==me&&kt(s,l,ae,le,m,me)}}Sm(s,A,M,z,Q,ce,E,b);return;case"select":le=A=M=ae=null;for(E in h)if(z=h[E],h.hasOwnProperty(E)&&z!=null)switch(E){case"value":break;case"multiple":le=z;default:m.hasOwnProperty(E)||kt(s,l,E,null,m,z)}for(b in m)if(E=m[b],z=h[b],m.hasOwnProperty(b)&&(E!=null||z!=null))switch(b){case"value":ae=E;break;case"defaultValue":M=E;break;case"multiple":A=E;default:E!==z&&kt(s,l,b,E,m,z)}l=M,h=A,m=le,ae!=null?gu(s,!!h,ae,!1):!!m!=!!h&&(l!=null?gu(s,!!h,l,!0):gu(s,!!h,h?[]:"",!1));return;case"textarea":le=ae=null;for(M in h)if(b=h[M],h.hasOwnProperty(M)&&b!=null&&!m.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:kt(s,l,M,null,m,b)}for(A in m)if(b=m[A],E=h[A],m.hasOwnProperty(A)&&(b!=null||E!=null))switch(A){case"value":ae=b;break;case"defaultValue":le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==E&&kt(s,l,A,b,m,E)}xw(s,ae,le);return;case"option":for(var ze in h)if(ae=h[ze],h.hasOwnProperty(ze)&&ae!=null&&!m.hasOwnProperty(ze))switch(ze){case"selected":s.selected=!1;break;default:kt(s,l,ze,null,m,ae)}for(z in m)if(ae=m[z],le=h[z],m.hasOwnProperty(z)&&ae!==le&&(ae!=null||le!=null))switch(z){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:kt(s,l,z,ae,m,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in h)ae=h[Ze],h.hasOwnProperty(Ze)&&ae!=null&&!m.hasOwnProperty(Ze)&&kt(s,l,Ze,null,m,ae);for(Q in m)if(ae=m[Q],le=h[Q],m.hasOwnProperty(Q)&&ae!==le&&(ae!=null||le!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:kt(s,l,Q,ae,m,le)}return;default:if(Rm(l)){for(var $t in h)ae=h[$t],h.hasOwnProperty($t)&&ae!==void 0&&!m.hasOwnProperty($t)&&cy(s,l,$t,void 0,m,ae);for(ce in m)ae=m[ce],le=h[ce],!m.hasOwnProperty(ce)||ae===le||ae===void 0&&le===void 0||cy(s,l,ce,ae,m,le);return}}for(var X in h)ae=h[X],h.hasOwnProperty(X)&&ae!=null&&!m.hasOwnProperty(X)&&kt(s,l,X,null,m,ae);for(me in m)ae=m[me],le=h[me],!m.hasOwnProperty(me)||ae===le||ae==null&&le==null||kt(s,l,me,ae,m,le)}var fy=null,hy=null;function Vd(s){return s.nodeType===9?s:s.ownerDocument}function pS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vS(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function dy(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var py=null;function cM(){var s=window.event;return s&&s.type==="popstate"?s===py?!1:(py=s,!0):(py=null,!1)}var mS=typeof setTimeout=="function"?setTimeout:void 0,fM=typeof clearTimeout=="function"?clearTimeout:void 0,gS=typeof Promise=="function"?Promise:void 0,hM=typeof queueMicrotask=="function"?queueMicrotask:typeof gS<"u"?function(s){return gS.resolve(null).then(s).catch(dM)}:mS;function dM(s){setTimeout(function(){throw s})}function vy(s,l){var h=l,m=0;do{var b=h.nextSibling;if(s.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"){if(m===0){s.removeChild(b),ff(l);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=b}while(h);ff(l)}function my(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":my(h),Em(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function pM(s,l,h,m){for(;s.nodeType===1;){var b=h;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[yc])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==b.rel||s.getAttribute("href")!==(b.href==null?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=oa(s.nextSibling),s===null)break}return null}function vM(s,l,h){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=oa(s.nextSibling),s===null))return null;return s}function oa(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}function yS(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}function bS(s,l,h){switch(l=Vd(h),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var Hr=new Map,xS=new Set;function jd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var Si=he.d;he.d={f:mM,r:gM,D:yM,C:bM,L:xM,m:wM,X:EM,S:_M,M:SM};function mM(){var s=Si.f(),l=Md();return s||l}function gM(s){var l=pu(s);l!==null&&l.tag===5&&l.type==="form"?Q_(l):Si.r(s)}var Hu=typeof document>"u"?null:document;function wS(s,l,h){var m=Hu;if(m&&typeof l=="string"&&l){var b=Fr(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),xS.has(b)||(xS.add(b),s={rel:s,crossOrigin:h,href:l},m.querySelector(b)===null&&(l=m.createElement("link"),Fn(l,"link",s),bn(l),m.head.appendChild(l)))}}function yM(s){Si.D(s),wS("dns-prefetch",s,null)}function bM(s,l){Si.C(s,l),wS("preconnect",s,l)}function xM(s,l,h){Si.L(s,l,h);var m=Hu;if(m&&s&&l){var b='link[rel="preload"][as="'+Fr(l)+'"]';l==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+Fr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+Fr(h.imageSizes)+'"]')):b+='[href="'+Fr(s)+'"]';var E=b;switch(l){case"style":E=Gu(s);break;case"script":E=Qu(s)}Hr.has(E)||(s=I({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:s,as:l},h),Hr.set(E,s),m.querySelector(b)!==null||l==="style"&&m.querySelector(rf(E))||l==="script"&&m.querySelector(af(E))||(l=m.createElement("link"),Fn(l,"link",s),bn(l),m.head.appendChild(l)))}}function wM(s,l){Si.m(s,l);var h=Hu;if(h&&s){var m=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Fr(m)+'"][href="'+Fr(s)+'"]',E=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Qu(s)}if(!Hr.has(E)&&(s=I({rel:"modulepreload",href:s},l),Hr.set(E,s),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(af(E)))return}m=h.createElement("link"),Fn(m,"link",s),bn(m),h.head.appendChild(m)}}}function _M(s,l,h){Si.S(s,l,h);var m=Hu;if(m&&s){var b=vu(m).hoistableStyles,E=Gu(s);l=l||"default";var A=b.get(E);if(!A){var M={loading:0,preload:null};if(A=m.querySelector(rf(E)))M.loading=5;else{s=I({rel:"stylesheet",href:s,"data-precedence":l},h),(h=Hr.get(E))&&gy(s,h);var z=A=m.createElement("link");bn(z),Fn(z,"link",s),z._p=new Promise(function(Q,ce){z.onload=Q,z.onerror=ce}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,qd(A,l,m)}A={type:"stylesheet",instance:A,count:1,state:M},b.set(E,A)}}}function EM(s,l){Si.X(s,l);var h=Hu;if(h&&s){var m=vu(h).hoistableScripts,b=Qu(s),E=m.get(b);E||(E=h.querySelector(af(b)),E||(s=I({src:s,async:!0},l),(l=Hr.get(b))&&yy(s,l),E=h.createElement("script"),bn(E),Fn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function SM(s,l){Si.M(s,l);var h=Hu;if(h&&s){var m=vu(h).hoistableScripts,b=Qu(s),E=m.get(b);E||(E=h.querySelector(af(b)),E||(s=I({src:s,async:!0,type:"module"},l),(l=Hr.get(b))&&yy(s,l),E=h.createElement("script"),bn(E),Fn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function _S(s,l,h,m){var b=(b=Ye.current)?jd(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=Gu(h.href),h=vu(b).hoistableStyles,m=h.get(l),m||(m={type:"style",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=Gu(h.href);var E=vu(b).hoistableStyles,A=E.get(s);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,A),(E=b.querySelector(rf(s)))&&!E._p&&(A.instance=E,A.state.loading=5),Hr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Hr.set(s,h),E||CM(b,s,h,A.state))),l&&m===null)throw Error(r(528,""));return A}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Qu(h),h=vu(b).hoistableScripts,m=h.get(l),m||(m={type:"script",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Gu(s){return'href="'+Fr(s)+'"'}function rf(s){return'link[rel="stylesheet"]['+s+"]"}function ES(s){return I({},s,{"data-precedence":s.precedence,precedence:null})}function CM(s,l,h,m){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=s.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Fn(l,"link",h),bn(l),s.head.appendChild(l))}function Qu(s){return'[src="'+Fr(s)+'"]'}function af(s){return"script[async]"+s}function SS(s,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var m=s.querySelector('style[data-href~="'+Fr(h.href)+'"]');if(m)return l.instance=m,bn(m),m;var b=I({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),bn(m),Fn(m,"style",b),qd(m,h.precedence,s),l.instance=m;case"stylesheet":b=Gu(h.href);var E=s.querySelector(rf(b));if(E)return l.state.loading|=4,l.instance=E,bn(E),E;m=ES(h),(b=Hr.get(b))&&gy(m,b),E=(s.ownerDocument||s).createElement("link"),bn(E);var A=E;return A._p=new Promise(function(M,z){A.onload=M,A.onerror=z}),Fn(E,"link",m),l.state.loading|=4,qd(E,h.precedence,s),l.instance=E;case"script":return E=Qu(h.src),(b=s.querySelector(af(E)))?(l.instance=b,bn(b),b):(m=h,(b=Hr.get(E))&&(m=I({},h),yy(m,b)),s=s.ownerDocument||s,b=s.createElement("script"),bn(b),Fn(b,"link",m),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,qd(m,h.precedence,s));return l.instance}function qd(s,l,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,E=b,A=0;A<m.length;A++){var M=m[A];if(M.dataset.precedence===l)E=M;else if(E!==b)break}E?E.parentNode.insertBefore(s,E.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(s,l.firstChild))}function gy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function yy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Wd=null;function CS(s,l,h){if(Wd===null){var m=new Map,b=Wd=new Map;b.set(h,m)}else b=Wd,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),b=0;b<h.length;b++){var E=h[b];if(!(E[yc]||E[Un]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var A=E.getAttribute(l)||"";A=s+A;var M=m.get(A);M?M.push(E):m.set(A,[E])}}return m}function RS(s,l,h){s=s.ownerDocument||s,s.head.insertBefore(h,l==="title"?s.querySelector("head > title"):null)}function RM(s,l,h){if(h===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function TS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var of=null;function TM(){}function OM(s,l,h){if(of===null)throw Error(r(475));var m=of;if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=Gu(h.href),E=s.querySelector(rf(b));if(E){s=E._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Hd.bind(m),s.then(m,m)),l.state.loading|=4,l.instance=E,bn(E);return}E=s.ownerDocument||s,h=ES(h),(b=Hr.get(b))&&gy(h,b),E=E.createElement("link"),bn(E);var A=E;A._p=new Promise(function(M,z){A.onload=M,A.onerror=z}),Fn(E,"link",h),l.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Hd.bind(m),s.addEventListener("load",l),s.addEventListener("error",l))}}function AM(){if(of===null)throw Error(r(475));var s=of;return s.stylesheets&&s.count===0&&by(s,s.stylesheets),0<s.count?function(l){var h=setTimeout(function(){if(s.stylesheets&&by(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(h)}}:null}function Hd(){if(this.count--,this.count===0){if(this.stylesheets)by(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Gd=null;function by(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Gd=new Map,l.forEach(kM,s),Gd=null,Hd.call(s))}function kM(s,l){if(!(l.state.loading&4)){var h=Gd.get(s);if(h)var m=h.get(null);else{h=new Map,Gd.set(s,h);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var A=b[E];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(h.set(A.dataset.precedence,A),m=A)}m&&h.set(null,m)}b=l.instance,A=b.getAttribute("data-precedence"),E=h.get(A)||m,E===m&&h.set(null,b),h.set(A,b),this.count++,m=Hd.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),E?E.parentNode.insertBefore(b,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var sf={$$typeof:g,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function DM(s,l,h,m,b,E,A,M){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.hiddenUpdates=wm(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function OS(s,l,h,m,b,E,A,M,z,Q,ce,me){return s=new DM(s,l,h,A,M,z,Q,me),l=1,E===!0&&(l|=24),E=qr(3,null,null,l),s.current=E,E.stateNode=s,l=Ym(),l.refCount++,s.pooledCache=l,l.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:l},Dg(E),s}function AS(s){return s?(s=Cu,s):Cu}function kS(s,l,h,m,b,E){b=AS(b),m.context===null?m.context=b:m.pendingContext=b,m=ao(l),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=io(s,m,l),h!==null&&(er(h,s,l),qc(h,s,l))}function DS(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function xy(s,l){DS(s,l),(s=s.alternate)&&DS(s,l)}function NS(s){if(s.tag===13){var l=Yi(s,67108864);l!==null&&er(l,s,67108864),xy(s,67108864)}}var Qd=!0;function NM(s,l,h,m){var b=k.T;k.T=null;var E=he.p;try{he.p=2,wy(s,l,h,m)}finally{he.p=E,k.T=b}}function IM(s,l,h,m){var b=k.T;k.T=null;var E=he.p;try{he.p=8,wy(s,l,h,m)}finally{he.p=E,k.T=b}}function wy(s,l,h,m){if(Qd){var b=_y(m);if(b===null)ly(s,l,m,$d,h),MS(s,m);else if(FM(b,s,l,h,m))m.stopPropagation();else if(MS(s,m),l&4&&-1<MM.indexOf(s)){for(;b!==null;){var E=pu(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var A=as(E.pendingLanes);if(A!==0){var M=E;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var z=1<<31-br(A);M.entanglements[1]|=z,A&=~z}ka(E),(Ut&6)===0&&(Dd=Dn()+500,ef(0))}}break;case 13:M=Yi(E,2),M!==null&&er(M,E,2),Md(),xy(E,2)}if(E=_y(m),E===null&&ly(s,l,m,$d,h),E===b)break;b=E}b!==null&&m.stopPropagation()}else ly(s,l,m,null,h)}}function _y(s){return s=Om(s),Ey(s)}var $d=null;function Ey(s){if($d=null,s=is(s),s!==null){var l=G(s);if(l===null)s=null;else{var h=l.tag;if(h===13){if(s=Y(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return $d=s,null}function IS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(na()){case hu:return 2;case oi:return 8;case Zn:case pc:return 32;case qh:return 268435456;default:return 32}default:return 32}}var Sy=!1,ho=null,po=null,vo=null,uf=new Map,lf=new Map,mo=[],MM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MS(s,l){switch(s){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":uf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":lf.delete(l.pointerId)}}function cf(s,l,h,m,b,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[b]},l!==null&&(l=pu(l),l!==null&&NS(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function FM(s,l,h,m,b){switch(l){case"focusin":return ho=cf(ho,s,l,h,m,b),!0;case"dragenter":return po=cf(po,s,l,h,m,b),!0;case"mouseover":return vo=cf(vo,s,l,h,m,b),!0;case"pointerover":var E=b.pointerId;return uf.set(E,cf(uf.get(E)||null,s,l,h,m,b)),!0;case"gotpointercapture":return E=b.pointerId,lf.set(E,cf(lf.get(E)||null,s,l,h,m,b)),!0}return!1}function FS(s){var l=is(s.target);if(l!==null){var h=G(l);if(h!==null){if(l=h.tag,l===13){if(l=Y(h),l!==null){s.blockedOn=l,AN(s.priority,function(){if(h.tag===13){var m=Sr(),b=Yi(h,m);b!==null&&er(b,h,m),xy(h,m)}});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=_y(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);Tm=m,h.target.dispatchEvent(m),Tm=null}else return l=pu(h),l!==null&&NS(l),s.blockedOn=h,!1;l.shift()}return!0}function LS(s,l,h){Kd(s)&&h.delete(l)}function LM(){Sy=!1,ho!==null&&Kd(ho)&&(ho=null),po!==null&&Kd(po)&&(po=null),vo!==null&&Kd(vo)&&(vo=null),uf.forEach(LS),lf.forEach(LS)}function Xd(s,l){s.blockedOn===l&&(s.blockedOn=null,Sy||(Sy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,LM)))}var Yd=null;function PS(s){Yd!==s&&(Yd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yd===s&&(Yd=null);for(var l=0;l<s.length;l+=3){var h=s[l],m=s[l+1],b=s[l+2];if(typeof m!="function"){if(Ey(m||h)===null)continue;break}var E=pu(h);E!==null&&(s.splice(l,3),l-=3,dg(E,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function ff(s){function l(z){return Xd(z,s)}ho!==null&&Xd(ho,s),po!==null&&Xd(po,s),vo!==null&&Xd(vo,s),uf.forEach(l),lf.forEach(l);for(var h=0;h<mo.length;h++){var m=mo[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<mo.length&&(h=mo[0],h.blockedOn===null);)FS(h),h.blockedOn===null&&mo.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],E=h[m+1],A=b[sr]||null;if(typeof E=="function")A||PS(h);else if(A){var M=null;if(E&&E.hasAttribute("formAction")){if(b=E,A=E[sr]||null)M=A.formAction;else if(Ey(b)!==null)continue}else M=A.action;typeof M=="function"?h[m+1]=M:(h.splice(m,3),m-=3),PS(h)}}}function Cy(s){this._internalRoot=s}Zd.prototype.render=Cy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,m=Sr();kS(h,m,s,l,null,null)},Zd.prototype.unmount=Cy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;s.tag===0&&ju(),kS(s.current,2,null,s,null,null),Md(),l[du]=null}};function Zd(s){this._internalRoot=s}Zd.prototype.unstable_scheduleHydration=function(s){if(s){var l=fw();s={blockedOn:null,target:s,priority:l};for(var h=0;h<mo.length&&l!==0&&l<mo[h].priority;h++);mo.splice(h,0,s),h===0&&FS(s)}};var BS=e.version;if(BS!=="19.0.0")throw Error(r(527,BS,"19.0.0"));he.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=K(l),s=s!==null?se(s):null,s=s===null?null:s.stateNode,s};var PM={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:k,findFiberByHostInstance:is,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{si=Jd.inject(PM),Nn=Jd}catch{}}return df.createRoot=function(s,l){if(!a(s))throw Error(r(299));var h=!1,m="",b=tE,E=nE,A=rE,M=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks)),l=OS(s,1,!1,null,null,h,m,b,E,A,M,null),s[du]=l.current,uy(s.nodeType===8?s.parentNode:s),new Cy(l)},df.hydrateRoot=function(s,l,h){if(!a(s))throw Error(r(299));var m=!1,b="",E=tE,A=nE,M=rE,z=null,Q=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(A=h.onCaughtError),h.onRecoverableError!==void 0&&(M=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(z=h.unstable_transitionCallbacks),h.formState!==void 0&&(Q=h.formState)),l=OS(s,1,!0,l,h??null,m,b,E,A,M,z,Q),l.context=AS(null),h=l.current,m=Sr(),b=ao(m),b.callback=null,io(h,b,m),l.current.lanes=m,gc(l,m),ka(l),s[du]=l.current,uy(s),new Zd(l)},df.version="19.0.0",df}var KS;function KM(){if(KS)return Oy.exports;KS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Oy.exports=$M(),Oy.exports}var XM=KM();const w9=fx(XM);var J=Fv();const pr=fx(J);var Tn=function(){return Tn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Tn.apply(this,arguments)};function Vl(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Pt="-ms-",If="-moz-",Ct="-webkit-",pT="comm",Lv="rule",hx="decl",YM="@import",vT="@keyframes",ZM="@layer",mT=Math.abs,dx=String.fromCharCode,F0=Object.assign;function JM(n,e){return Cn(n,0)^45?(((e<<2^Cn(n,0))<<2^Cn(n,1))<<2^Cn(n,2))<<2^Cn(n,3):0}function gT(n){return n.trim()}function Ai(n,e){return(n=e.exec(n))?n[0]:n}function at(n,e,t){return n.replace(e,t)}function Rp(n,e,t){return n.indexOf(e,t)}function Cn(n,e){return n.charCodeAt(e)|0}function jl(n,e,t){return n.slice(e,t)}function Ba(n){return n.length}function yT(n){return n.length}function Rf(n,e){return e.push(n),n}function eF(n,e){return n.map(e).join("")}function XS(n,e){return n.filter(function(t){return!Ai(t,e)})}var Pv=1,ql=1,bT=0,Zr=0,on=0,ac="";function Bv(n,e,t,r,a,i,o,u){return{value:n,root:e,parent:t,type:r,props:a,children:i,line:Pv,column:ql,length:o,return:"",siblings:u}}function xo(n,e){return F0(Bv("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function $u(n){for(;n.root;)n=xo(n.root,{children:[n]});Rf(n,n.siblings)}function tF(){return on}function nF(){return on=Zr>0?Cn(ac,--Zr):0,ql--,on===10&&(ql=1,Pv--),on}function va(){return on=Zr<bT?Cn(ac,Zr++):0,ql++,on===10&&(ql=1,Pv++),on}function Hs(){return Cn(ac,Zr)}function Tp(){return Zr}function zv(n,e){return jl(ac,n,e)}function L0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rF(n){return Pv=ql=1,bT=Ba(ac=n),Zr=0,[]}function aF(n){return ac="",n}function Iy(n){return gT(zv(Zr-1,P0(n===91?n+2:n===40?n+1:n)))}function iF(n){for(;(on=Hs())&&on<33;)va();return L0(n)>2||L0(on)>3?"":" "}function oF(n,e){for(;--e&&va()&&!(on<48||on>102||on>57&&on<65||on>70&&on<97););return zv(n,Tp()+(e<6&&Hs()==32&&va()==32))}function P0(n){for(;va();)switch(on){case n:return Zr;case 34:case 39:n!==34&&n!==39&&P0(on);break;case 40:n===41&&P0(n);break;case 92:va();break}return Zr}function sF(n,e){for(;va()&&n+on!==57;)if(n+on===84&&Hs()===47)break;return"/*"+zv(e,Zr-1)+"*"+dx(n===47?n:va())}function uF(n){for(;!L0(Hs());)va();return zv(n,Zr)}function lF(n){return aF(Op("",null,null,null,[""],n=rF(n),0,[0],n))}function Op(n,e,t,r,a,i,o,u,c){for(var f=0,d=0,p=o,v=0,g=0,y=0,x=1,w=1,_=1,S=0,C="",R=a,T=i,O=r,D=C;w;)switch(y=S,S=va()){case 40:if(y!=108&&Cn(D,p-1)==58){Rp(D+=at(Iy(S),"&","&\f"),"&\f",mT(f?u[f-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:D+=Iy(S);break;case 9:case 10:case 13:case 32:D+=iF(y);break;case 92:D+=oF(Tp()-1,7);continue;case 47:switch(Hs()){case 42:case 47:Rf(cF(sF(va(),Tp()),e,t,c),c);break;default:D+="/"}break;case 123*x:u[f++]=Ba(D)*_;case 125*x:case 59:case 0:switch(S){case 0:case 125:w=0;case 59+d:_==-1&&(D=at(D,/\f/g,"")),g>0&&Ba(D)-p&&Rf(g>32?ZS(D+";",r,t,p-1,c):ZS(at(D," ","")+";",r,t,p-2,c),c);break;case 59:D+=";";default:if(Rf(O=YS(D,e,t,f,d,a,u,C,R=[],T=[],p,i),i),S===123)if(d===0)Op(D,e,O,O,R,i,p,u,T);else switch(v===99&&Cn(D,3)===110?100:v){case 100:case 108:case 109:case 115:Op(n,O,O,r&&Rf(YS(n,O,O,0,0,a,u,C,a,R=[],p,T),T),a,T,p,u,r?R:T);break;default:Op(D,O,O,O,[""],T,0,u,T)}}f=d=g=0,x=_=1,C=D="",p=o;break;case 58:p=1+Ba(D),g=y;default:if(x<1){if(S==123)--x;else if(S==125&&x++==0&&nF()==125)continue}switch(D+=dx(S),S*x){case 38:_=d>0?1:(D+="\f",-1);break;case 44:u[f++]=(Ba(D)-1)*_,_=1;break;case 64:Hs()===45&&(D+=Iy(va())),v=Hs(),d=p=Ba(C=D+=uF(Tp())),S++;break;case 45:y===45&&Ba(D)==2&&(x=0)}}return i}function YS(n,e,t,r,a,i,o,u,c,f,d,p){for(var v=a-1,g=a===0?i:[""],y=yT(g),x=0,w=0,_=0;x<r;++x)for(var S=0,C=jl(n,v+1,v=mT(w=o[x])),R=n;S<y;++S)(R=gT(w>0?g[S]+" "+C:at(C,/&\f/g,g[S])))&&(c[_++]=R);return Bv(n,e,t,a===0?Lv:u,c,f,d,p)}function cF(n,e,t,r){return Bv(n,e,t,pT,dx(tF()),jl(n,2,-2),0,r)}function ZS(n,e,t,r,a){return Bv(n,e,t,hx,jl(n,0,r),jl(n,r+1,-1),r,a)}function xT(n,e,t){switch(JM(n,e)){case 5103:return Ct+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+n+n;case 4789:return If+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+n+If+n+Pt+n+n;case 5936:switch(Cn(n,e+11)){case 114:return Ct+n+Pt+at(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ct+n+Pt+at(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ct+n+Pt+at(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return Ct+n+Pt+n+n;case 6165:return Ct+n+Pt+"flex-"+n+n;case 5187:return Ct+n+at(n,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+Pt+"flex-$1$2")+n;case 5443:return Ct+n+Pt+"flex-item-"+at(n,/flex-|-self/g,"")+(Ai(n,/flex-|baseline/)?"":Pt+"grid-row-"+at(n,/flex-|-self/g,""))+n;case 4675:return Ct+n+Pt+"flex-line-pack"+at(n,/align-content|flex-|-self/g,"")+n;case 5548:return Ct+n+Pt+at(n,"shrink","negative")+n;case 5292:return Ct+n+Pt+at(n,"basis","preferred-size")+n;case 6060:return Ct+"box-"+at(n,"-grow","")+Ct+n+Pt+at(n,"grow","positive")+n;case 4554:return Ct+at(n,/([^-])(transform)/g,"$1"+Ct+"$2")+n;case 6187:return at(at(at(n,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),n,"")+n;case 5495:case 3959:return at(n,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return at(at(n,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+Pt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+n+n;case 4200:if(!Ai(n,/flex-|baseline/))return Pt+"grid-column-align"+jl(n,e)+n;break;case 2592:case 3360:return Pt+at(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,a){return e=a,Ai(r.props,/grid-\w+-end/)})?~Rp(n+(t=t[e].value),"span",0)?n:Pt+at(n,"-start","")+n+Pt+"grid-row-span:"+(~Rp(t,"span",0)?Ai(t,/\d+/):+Ai(t,/\d+/)-+Ai(n,/\d+/))+";":Pt+at(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return Ai(r.props,/grid-\w+-start/)})?n:Pt+at(at(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return at(n,/(.+)-inline(.+)/,Ct+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ba(n)-1-e>6)switch(Cn(n,e+1)){case 109:if(Cn(n,e+4)!==45)break;case 102:return at(n,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+If+(Cn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Rp(n,"stretch",0)?xT(at(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return at(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,i,o,u,c,f){return Pt+a+":"+i+f+(o?Pt+a+"-span:"+(u?c:+c-+i)+f:"")+n});case 4949:if(Cn(n,e+6)===121)return at(n,":",":"+Ct)+n;break;case 6444:switch(Cn(n,Cn(n,14)===45?18:11)){case 120:return at(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ct+(Cn(n,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+Pt+"$2box$3")+n;case 100:return at(n,":",":"+Pt)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return at(n,"scroll-","scroll-snap-")+n}return n}function qp(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function fF(n,e,t,r){switch(n.type){case ZM:if(n.children.length)break;case YM:case hx:return n.return=n.return||n.value;case pT:return"";case vT:return n.return=n.value+"{"+qp(n.children,r)+"}";case Lv:if(!Ba(n.value=n.props.join(",")))return""}return Ba(t=qp(n.children,r))?n.return=n.value+"{"+t+"}":""}function hF(n){var e=yT(n);return function(t,r,a,i){for(var o="",u=0;u<e;u++)o+=n[u](t,r,a,i)||"";return o}}function dF(n){return function(e){e.root||(e=e.return)&&n(e)}}function pF(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case hx:n.return=xT(n.value,n.length,t);return;case vT:return qp([xo(n,{value:at(n.value,"@","@"+Ct)})],r);case Lv:if(n.length)return eF(t=n.props,function(a){switch(Ai(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":$u(xo(n,{props:[at(a,/:(read-\w+)/,":"+If+"$1")]})),$u(xo(n,{props:[a]})),F0(n,{props:XS(t,r)});break;case"::placeholder":$u(xo(n,{props:[at(a,/:(plac\w+)/,":"+Ct+"input-$1")]})),$u(xo(n,{props:[at(a,/:(plac\w+)/,":"+If+"$1")]})),$u(xo(n,{props:[at(a,/:(plac\w+)/,Pt+"input-$1")]})),$u(xo(n,{props:[a]})),F0(n,{props:XS(t,r)});break}return""})}}var vF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Cr={},Wl=typeof process<"u"&&Cr!==void 0&&(Cr.REACT_APP_SC_ATTR||Cr.SC_ATTR)||"data-styled",wT="active",_T="data-styled-version",Uv="6.1.16",px=`/*!sc*/
`,Wp=typeof window<"u"&&"HTMLElement"in window,mF=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Cr!==void 0&&Cr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Cr.REACT_APP_SC_DISABLE_SPEEDY!==""?Cr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Cr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Cr!==void 0&&Cr.SC_DISABLE_SPEEDY!==void 0&&Cr.SC_DISABLE_SPEEDY!==""&&Cr.SC_DISABLE_SPEEDY!=="false"&&Cr.SC_DISABLE_SPEEDY),gF={},Vv=Object.freeze([]),Hl=Object.freeze({});function ET(n,e,t){return t===void 0&&(t=Hl),n.theme!==t.theme&&n.theme||e||t.theme}var ST=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),yF=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,bF=/(^-|-$)/g;function JS(n){return n.replace(yF,"-").replace(bF,"")}var xF=/(a)(d)/gi,tp=52,e2=function(n){return String.fromCharCode(n+(n>25?39:97))};function B0(n){var e,t="";for(e=Math.abs(n);e>tp;e=e/tp|0)t=e2(e%tp)+t;return(e2(e%tp)+t).replace(xF,"$1-$2")}var My,CT=5381,ll=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},RT=function(n){return ll(CT,n)};function vx(n){return B0(RT(n)>>>0)}function wF(n){return n.displayName||n.name||"Component"}function Fy(n){return typeof n=="string"&&!0}var TT=typeof Symbol=="function"&&Symbol.for,OT=TT?Symbol.for("react.memo"):60115,_F=TT?Symbol.for("react.forward_ref"):60112,EF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},SF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},AT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},CF=((My={})[_F]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},My[OT]=AT,My);function t2(n){return("type"in(e=n)&&e.type.$$typeof)===OT?AT:"$$typeof"in n?CF[n.$$typeof]:EF;var e}var RF=Object.defineProperty,TF=Object.getOwnPropertyNames,n2=Object.getOwnPropertySymbols,OF=Object.getOwnPropertyDescriptor,AF=Object.getPrototypeOf,r2=Object.prototype;function kT(n,e,t){if(typeof e!="string"){if(r2){var r=AF(e);r&&r!==r2&&kT(n,r,t)}var a=TF(e);n2&&(a=a.concat(n2(e)));for(var i=t2(n),o=t2(e),u=0;u<a.length;++u){var c=a[u];if(!(c in SF||t&&t[c]||o&&c in o||i&&c in i)){var f=OF(e,c);try{RF(n,c,f)}catch{}}}}return n}function Xs(n){return typeof n=="function"}function mx(n){return typeof n=="object"&&"styledComponentId"in n}function Ns(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function Hp(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function qf(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function z0(n,e,t){if(t===void 0&&(t=!1),!t&&!qf(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=z0(n[r],e[r]);else if(qf(e))for(var r in e)n[r]=z0(n[r],e[r]);return n}function gx(n,e){Object.defineProperty(n,"toString",{value:e})}function Wo(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var kF=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,i=a;e>=i;)if((i<<=1)<0)throw Wo(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var o=a;o<i;o++)this.groupSizes[o]=0}for(var u=this.indexOfGroup(e+1),c=(o=0,t.length);o<c;o++)this.tag.insertRule(u,t[o])&&(this.groupSizes[e]++,u++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t;this.groupSizes[e]=0;for(var i=r;i<a;i++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),i=a+r,o=a;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(px);return t},n}(),Ap=new Map,Gp=new Map,kp=1,np=function(n){if(Ap.has(n))return Ap.get(n);for(;Gp.has(kp);)kp++;var e=kp++;return Ap.set(n,e),Gp.set(e,n),e},DF=function(n,e){kp=e+1,Ap.set(n,e),Gp.set(e,n)},NF="style[".concat(Wl,"][").concat(_T,'="').concat(Uv,'"]'),IF=new RegExp("^".concat(Wl,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),MF=function(n,e,t){for(var r,a=t.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&n.registerName(e,r)},FF=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(px),a=[],i=0,o=r.length;i<o;i++){var u=r[i].trim();if(u){var c=u.match(IF);if(c){var f=0|parseInt(c[1],10),d=c[2];f!==0&&(DF(d,f),MF(n,d,c[3]),n.getTag().insertRules(f,a)),a.length=0}else a.push(u)}}},a2=function(n){for(var e=document.querySelectorAll(NF),t=0,r=e.length;t<r;t++){var a=e[t];a&&a.getAttribute(Wl)!==wT&&(FF(n,a),a.parentNode&&a.parentNode.removeChild(a))}};function LF(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var DT=function(n){var e=document.head,t=n||e,r=document.createElement("style"),a=function(u){var c=Array.from(u.querySelectorAll("style[".concat(Wl,"]")));return c[c.length-1]}(t),i=a!==void 0?a.nextSibling:null;r.setAttribute(Wl,wT),r.setAttribute(_T,Uv);var o=LF();return o&&r.setAttribute("nonce",o),t.insertBefore(r,i),r},PF=function(){function n(e){this.element=DT(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,a=0,i=r.length;a<i;a++){var o=r[a];if(o.ownerNode===t)return o}throw Wo(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),BF=function(){function n(e){this.element=DT(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),zF=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),i2=Wp,UF={isServer:!Wp,useCSSOMInjection:!mF},Qp=function(){function n(e,t,r){e===void 0&&(e=Hl),t===void 0&&(t={});var a=this;this.options=Tn(Tn({},UF),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Wp&&i2&&(i2=!1,a2(this)),gx(this,function(){return function(i){for(var o=i.getTag(),u=o.length,c="",f=function(p){var v=function(_){return Gp.get(_)}(p);if(v===void 0)return"continue";var g=i.names.get(v),y=o.getGroup(p);if(g===void 0||!g.size||y.length===0)return"continue";var x="".concat(Wl,".g").concat(p,'[id="').concat(v,'"]'),w="";g!==void 0&&g.forEach(function(_){_.length>0&&(w+="".concat(_,","))}),c+="".concat(y).concat(x,'{content:"').concat(w,'"}').concat(px)},d=0;d<u;d++)f(d);return c}(a)})}return n.registerId=function(e){return np(e)},n.prototype.rehydrate=function(){!this.server&&Wp&&a2(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(Tn(Tn({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var r=t.useCSSOMInjection,a=t.target;return t.isServer?new zF(a):r?new PF(a):new BF(a)}(this.options),new kF(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(np(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(np(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(np(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),VF=/&/g,jF=/^\s*\/\/.*$/gm;function NT(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=NT(t.children,e)),t})}function qF(n){var e,t,r,a=Hl,i=a.options,o=i===void 0?Hl:i,u=a.plugins,c=u===void 0?Vv:u,f=function(v,g,y){return y.startsWith(t)&&y.endsWith(t)&&y.replaceAll(t,"").length>0?".".concat(e):v},d=c.slice();d.push(function(v){v.type===Lv&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(VF,t).replace(r,f))}),o.prefix&&d.push(pF),d.push(fF);var p=function(v,g,y,x){g===void 0&&(g=""),y===void 0&&(y=""),x===void 0&&(x="&"),e=x,t=g,r=new RegExp("\\".concat(t,"\\b"),"g");var w=v.replace(jF,""),_=lF(y||g?"".concat(y," ").concat(g," { ").concat(w," }"):w);o.namespace&&(_=NT(_,o.namespace));var S=[];return qp(_,hF(d.concat(dF(function(C){return S.push(C)})))),S};return p.hash=c.length?c.reduce(function(v,g){return g.name||Wo(15),ll(v,g.name)},CT).toString():"",p}var WF=new Qp,U0=qF(),IT=pr.createContext({shouldForwardProp:void 0,styleSheet:WF,stylis:U0});IT.Consumer;pr.createContext(void 0);function V0(){return J.useContext(IT)}var MT=function(){function n(e,t){var r=this;this.inject=function(a,i){i===void 0&&(i=U0);var o=r.name+i.hash;a.hasNameForId(r.id,o)||a.insertRules(r.id,o,i(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,gx(this,function(){throw Wo(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=U0),this.name+e.hash},n}(),HF=function(n){return n>="A"&&n<="Z"};function o2(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;HF(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var FT=function(n){return n==null||n===!1||n===""},LT=function(n){var e,t,r=[];for(var a in n){var i=n[a];n.hasOwnProperty(a)&&!FT(i)&&(Array.isArray(i)&&i.isCss||Xs(i)?r.push("".concat(o2(a),":"),i,";"):qf(i)?r.push.apply(r,Vl(Vl(["".concat(a," {")],LT(i),!1),["}"],!1)):r.push("".concat(o2(a),": ").concat((e=a,(t=i)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in vF||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function zo(n,e,t,r){if(FT(n))return[];if(mx(n))return[".".concat(n.styledComponentId)];if(Xs(n)){if(!Xs(i=n)||i.prototype&&i.prototype.isReactComponent||!e)return[n];var a=n(e);return zo(a,e,t,r)}var i;return n instanceof MT?t?(n.inject(t,r),[n.getName(r)]):[n]:qf(n)?LT(n):Array.isArray(n)?Array.prototype.concat.apply(Vv,n.map(function(o){return zo(o,e,t,r)})):[n.toString()]}function PT(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(Xs(t)&&!mx(t))return!1}return!0}var GF=RT(Uv),QF=function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&PT(e),this.componentId=t,this.baseHash=ll(GF,t),this.baseStyle=r,Qp.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))a=Ns(a,this.staticRulesId);else{var i=Hp(zo(this.rules,e,t,r)),o=B0(ll(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var u=r(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,u)}a=Ns(a,o),this.staticRulesId=o}else{for(var c=ll(this.baseHash,r.hash),f="",d=0;d<this.rules.length;d++){var p=this.rules[d];if(typeof p=="string")f+=p;else if(p){var v=Hp(zo(p,e,t,r));c=ll(c,v+d),f+=v}}if(f){var g=B0(c>>>0);t.hasNameForId(this.componentId,g)||t.insertRules(this.componentId,g,r(f,".".concat(g),void 0,this.componentId)),a=Ns(a,g)}}return a},n}(),Gl=pr.createContext(void 0);Gl.Consumer;function _9(){var n=J.useContext(Gl);if(!n)throw Wo(18);return n}function E9(n){var e=pr.useContext(Gl),t=J.useMemo(function(){return function(r,a){if(!r)throw Wo(14);if(Xs(r)){var i=r(a);return i}if(Array.isArray(r)||typeof r!="object")throw Wo(8);return a?Tn(Tn({},a),r):r}(n.theme,e)},[n.theme,e]);return n.children?pr.createElement(Gl.Provider,{value:t},n.children):null}var Ly={};function $F(n,e,t){var r=mx(n),a=n,i=!Fy(n),o=e.attrs,u=o===void 0?Vv:o,c=e.componentId,f=c===void 0?function(R,T){var O=typeof R!="string"?"sc":JS(R);Ly[O]=(Ly[O]||0)+1;var D="".concat(O,"-").concat(vx(Uv+O+Ly[O]));return T?"".concat(T,"-").concat(D):D}(e.displayName,e.parentComponentId):c,d=e.displayName,p=d===void 0?function(R){return Fy(R)?"styled.".concat(R):"Styled(".concat(wF(R),")")}(n):d,v=e.displayName&&e.componentId?"".concat(JS(e.displayName),"-").concat(e.componentId):e.componentId||f,g=r&&a.attrs?a.attrs.concat(u).filter(Boolean):u,y=e.shouldForwardProp;if(r&&a.shouldForwardProp){var x=a.shouldForwardProp;if(e.shouldForwardProp){var w=e.shouldForwardProp;y=function(R,T){return x(R,T)&&w(R,T)}}else y=x}var _=new QF(t,v,r?a.componentStyle:void 0);function S(R,T){return function(O,D,N){var k=O.attrs,I=O.componentStyle,B=O.defaultProps,U=O.foldedComponentIds,ee=O.styledComponentId,te=O.target,re=pr.useContext(Gl),q=V0(),Z=O.shouldForwardProp||q.shouldForwardProp,G=ET(D,re,B)||Hl,Y=function(be,ye,Be){for(var xe,Oe=Tn(Tn({},ye),{className:void 0,theme:Be}),je=0;je<be.length;je+=1){var Ve=Xs(xe=be[je])?xe(Oe):xe;for(var $e in Ve)Oe[$e]=$e==="className"?Ns(Oe[$e],Ve[$e]):$e==="style"?Tn(Tn({},Oe[$e]),Ve[$e]):Ve[$e]}return ye.className&&(Oe.className=Ns(Oe.className,ye.className)),Oe}(k,D,G),F=Y.as||te,K={};for(var se in Y)Y[se]===void 0||se[0]==="$"||se==="as"||se==="theme"&&Y.theme===G||(se==="forwardedAs"?K.as=Y.forwardedAs:Z&&!Z(se,F)||(K[se]=Y[se]));var fe=function(be,ye){var Be=V0(),xe=be.generateAndInjectStyles(ye,Be.styleSheet,Be.stylis);return xe}(I,Y),he=Ns(U,ee);return fe&&(he+=" "+fe),Y.className&&(he+=" "+Y.className),K[Fy(F)&&!ST.has(F)?"class":"className"]=he,N&&(K.ref=N),J.createElement(F,K)}(C,R,T)}S.displayName=p;var C=pr.forwardRef(S);return C.attrs=g,C.componentStyle=_,C.displayName=p,C.shouldForwardProp=y,C.foldedComponentIds=r?Ns(a.foldedComponentIds,a.styledComponentId):"",C.styledComponentId=v,C.target=r?a.target:n,Object.defineProperty(C,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(R){this._foldedDefaultProps=r?function(T){for(var O=[],D=1;D<arguments.length;D++)O[D-1]=arguments[D];for(var N=0,k=O;N<k.length;N++)z0(T,k[N],!0);return T}({},a.defaultProps,R):R}}),gx(C,function(){return".".concat(C.styledComponentId)}),i&&kT(C,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),C}function s2(n,e){for(var t=[n[0]],r=0,a=e.length;r<a;r+=1)t.push(e[r],n[r+1]);return t}var u2=function(n){return Object.assign(n,{isCss:!0})};function yx(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Xs(n)||qf(n))return u2(zo(s2(Vv,Vl([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?zo(r):u2(zo(s2(r,e)))}function j0(n,e,t){if(t===void 0&&(t=Hl),!e)throw Wo(1,e);var r=function(a){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return n(e,t,yx.apply(void 0,Vl([a],i,!1)))};return r.attrs=function(a){return j0(n,e,Tn(Tn({},t),{attrs:Array.prototype.concat(t.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return j0(n,e,Tn(Tn({},t),a))},r}var BT=function(n){return j0($F,n)},KF=BT;ST.forEach(function(n){KF[n]=BT(n)});var XF=function(){function n(e,t){this.rules=e,this.componentId=t,this.isStatic=PT(e),Qp.registerId(this.componentId+1)}return n.prototype.createStyles=function(e,t,r,a){var i=a(Hp(zo(this.rules,t,r,a)),""),o=this.componentId+e;r.insertRules(o,o,i)},n.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},n.prototype.renderStyles=function(e,t,r,a){e>2&&Qp.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,a)},n}();function S9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=yx.apply(void 0,Vl([n],e,!1)),a="sc-global-".concat(vx(JSON.stringify(r))),i=new XF(r,a),o=function(c){var f=V0(),d=pr.useContext(Gl),p=pr.useRef(f.styleSheet.allocateGSInstance(a)).current;return f.styleSheet.server&&u(p,c,f.styleSheet,d,f.stylis),pr.useLayoutEffect(function(){if(!f.styleSheet.server)return u(p,c,f.styleSheet,d,f.stylis),function(){return i.removeStyles(p,f.styleSheet)}},[p,c,f.styleSheet,d,f.stylis]),null};function u(c,f,d,p,v){if(i.isStatic)i.renderStyles(c,gF,d,v);else{var g=Tn(Tn({},f),{theme:ET(f,p,o.defaultProps)});i.renderStyles(c,g,d,v)}}return pr.memo(o)}function C9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=Hp(yx.apply(void 0,Vl([n],e,!1))),a=vx(r);return new MT(a,r)}var pf={},l2;function YF(){if(l2)return pf;l2=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.parse=o,pf.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function o(v,g){const y=new i,x=v.length;if(x<2)return y;const w=(g==null?void 0:g.decode)||d;let _=0;do{const S=v.indexOf("=",_);if(S===-1)break;const C=v.indexOf(";",_),R=C===-1?x:C;if(S>R){_=v.lastIndexOf(";",S-1)+1;continue}const T=u(v,_,S),O=c(v,S,T),D=v.slice(T,O);if(y[D]===void 0){let N=u(v,S+1,R),k=c(v,R,N);const I=w(v.slice(N,k));y[D]=I}_=R+1}while(_<x);return y}function u(v,g,y){do{const x=v.charCodeAt(g);if(x!==32&&x!==9)return g}while(++g<y);return y}function c(v,g,y){for(;g>y;){const x=v.charCodeAt(--g);if(x!==32&&x!==9)return g+1}return y}function f(v,g,y){const x=(y==null?void 0:y.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const w=x(g);if(!e.test(w))throw new TypeError(`argument val is invalid: ${g}`);let _=v+"="+w;if(!y)return _;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);_+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);_+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);_+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);_+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(_+="; HttpOnly"),y.secure&&(_+="; Secure"),y.partitioned&&(_+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return _}function d(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function p(v){return a.call(v)==="[object Date]"}return pf}YF();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var c2="popstate";function ZF(n={}){function e(r,a){let{pathname:i,search:o,hash:u}=r.location;return q0("",{pathname:i,search:o,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Wf(a)}return e3(e,t,null,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ba(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JF(){return Math.random().toString(36).substring(2,10)}function f2(n,e){return{usr:n.state,key:n.key,idx:e}}function q0(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ic(e):e,state:t,key:e&&e.key||r||JF()}}function Wf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ic(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function e3(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,u="POP",c=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function p(){u="POP";let w=d(),_=w==null?null:w-f;f=w,c&&c({action:u,location:x.location,delta:_})}function v(w,_){u="PUSH";let S=q0(x.location,w,_);f=d()+1;let C=f2(S,f),R=x.createHref(S);try{o.pushState(C,"",R)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(R)}i&&c&&c({action:u,location:x.location,delta:1})}function g(w,_){u="REPLACE";let S=q0(x.location,w,_);f=d();let C=f2(S,f),R=x.createHref(S);o.replaceState(C,"",R),i&&c&&c({action:u,location:x.location,delta:0})}function y(w){let _=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof w=="string"?w:Wf(w);return S=S.replace(/ $/,"%20"),Wt(_,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,_)}let x={get action(){return u},get location(){return n(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(c2,p),c=w,()=>{a.removeEventListener(c2,p),c=null}},createHref(w){return e(a,w)},createURL:y,encodeLocation(w){let _=y(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:g,go(w){return o.go(w)}};return x}function zT(n,e,t="/"){return t3(n,e,t,!1)}function t3(n,e,t,r){let a=typeof e=="string"?ic(e):e,i=Li(a.pathname||"/",t);if(i==null)return null;let o=UT(n);n3(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let f=d3(i);u=f3(o[c],f,r)}return u}function UT(n,e=[],t=[],r=""){let a=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Wt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Mi([r,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(Wt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),UT(i.children,e,d,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:l3(f,i.index),routesMeta:d})};return n.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,o);else for(let c of VT(i.path))a(i,o,c)}),e}function VT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=VT(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&u.push(...o),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function n3(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:c3(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var r3=/^:[\w-]+$/,a3=3,i3=2,o3=1,s3=10,u3=-2,h2=n=>n==="*";function l3(n,e){let t=n.split("/"),r=t.length;return t.some(h2)&&(r+=u3),e&&(r+=i3),t.filter(a=>!h2(a)).reduce((a,i)=>a+(r3.test(i)?a3:i===""?o3:s3),r)}function c3(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function f3(n,e,t=!1){let{routesMeta:r}=n,a={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=$p({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),v=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=$p({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Mi([i,p.pathname]),pathnameBase:g3(Mi([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Mi([i,p.pathnameBase]))}return o}function $p(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=h3(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},v)=>{if(d==="*"){let y=u[v]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=u[v];return p&&!g?f[d]=void 0:f[d]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:n}}function h3(n,e=!1,t=!0){ba(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function d3(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ba(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Li(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function p3(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?ic(n):n;return{pathname:t?t.startsWith("/")?t:v3(t,e):e,search:y3(r),hash:b3(a)}}function v3(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Py(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function m3(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jT(n){let e=m3(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function qT(n,e,t,r=!1){let a;typeof n=="string"?a=ic(n):(a={...n},Wt(!a.pathname||!a.pathname.includes("?"),Py("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),Py("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),Py("#","search","hash",a)));let i=n===""||a.pathname==="",o=i?"/":a.pathname,u;if(o==null)u=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}u=p>=0?e[p]:"/"}let c=p3(a,u),f=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}var Mi=n=>n.join("/").replace(/\/\/+/g,"/"),g3=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),y3=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,b3=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function x3(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var WT=["POST","PUT","PATCH","DELETE"];new Set(WT);var w3=["GET",...WT];new Set(w3);var oc=J.createContext(null);oc.displayName="DataRouter";var jv=J.createContext(null);jv.displayName="DataRouterState";var HT=J.createContext({isTransitioning:!1});HT.displayName="ViewTransition";var _3=J.createContext(new Map);_3.displayName="Fetchers";var E3=J.createContext(null);E3.displayName="Await";var ti=J.createContext(null);ti.displayName="Navigation";var Rh=J.createContext(null);Rh.displayName="Location";var Ui=J.createContext({outlet:null,matches:[],isDataRoute:!1});Ui.displayName="Route";var bx=J.createContext(null);bx.displayName="RouteError";function S3(n,{relative:e}={}){Wt(Th(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=J.useContext(ti),{hash:a,pathname:i,search:o}=Oh(n,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:Mi([t,i])),r.createHref({pathname:u,search:o,hash:a})}function Th(){return J.useContext(Rh)!=null}function es(){return Wt(Th(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(Rh).location}var GT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QT(n){J.useContext(ti).static||J.useLayoutEffect(n)}function $T(){let{isDataRoute:n}=J.useContext(Ui);return n?P3():C3()}function C3(){Wt(Th(),"useNavigate() may be used only in the context of a <Router> component.");let n=J.useContext(oc),{basename:e,navigator:t}=J.useContext(ti),{matches:r}=J.useContext(Ui),{pathname:a}=es(),i=JSON.stringify(jT(r)),o=J.useRef(!1);return QT(()=>{o.current=!0}),J.useCallback((c,f={})=>{if(ba(o.current,GT),!o.current)return;if(typeof c=="number"){t.go(c);return}let d=qT(c,JSON.parse(i),a,f.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Mi([e,d.pathname])),(f.replace?t.replace:t.push)(d,f.state,f)},[e,t,i,a,n])}J.createContext(null);function Oh(n,{relative:e}={}){let{matches:t}=J.useContext(Ui),{pathname:r}=es(),a=JSON.stringify(jT(t));return J.useMemo(()=>qT(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function R3(n,e){return KT(n,e)}function KT(n,e,t,r){var S;Wt(Th(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:i}=J.useContext(ti),{matches:o}=J.useContext(Ui),u=o[o.length-1],c=u?u.params:{},f=u?u.pathname:"/",d=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";XT(f,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=es(),g;if(e){let C=typeof e=="string"?ic(e):e;Wt(d==="/"||((S=C.pathname)==null?void 0:S.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${C.pathname}" was given in the \`location\` prop.`),g=C}else g=v;let y=g.pathname||"/",x=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=!i&&t&&t.matches&&t.matches.length>0?t.matches:zT(n,{pathname:x});ba(p||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ba(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=D3(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Mi([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Mi([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,t,r);return e&&_?J.createElement(Rh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},_):_}function T3(){let n=L3(),e=x3(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=J.createElement(J.Fragment,null,J.createElement("p",null," Hey developer "),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:i},"ErrorBoundary")," or"," ",J.createElement("code",{style:i},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:a},t):null,o)}var O3=J.createElement(T3,null),A3=class extends J.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?J.createElement(Ui.Provider,{value:this.props.routeContext},J.createElement(bx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function k3({routeContext:n,match:e,children:t}){let r=J.useContext(oc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),J.createElement(Ui.Provider,{value:n},t)}function D3(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,i=t==null?void 0:t.errors;if(i!=null){let c=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);Wt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,u=-1;if(t)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:p}=t,v=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){o=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,f,d)=>{let p,v=!1,g=null,y=null;t&&(p=i&&f.route.id?i[f.route.id]:void 0,g=f.route.errorElement||O3,o&&(u<0&&d===0?(XT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):u===d&&(v=!0,y=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,d+1)),w=()=>{let _;return p?_=g:v?_=y:f.route.Component?_=J.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,J.createElement(k3,{match:f,routeContext:{outlet:c,matches:x,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?J.createElement(A3,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}function xx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N3(n){let e=J.useContext(oc);return Wt(e,xx(n)),e}function I3(n){let e=J.useContext(jv);return Wt(e,xx(n)),e}function M3(n){let e=J.useContext(Ui);return Wt(e,xx(n)),e}function wx(n){let e=M3(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function F3(){return wx("useRouteId")}function L3(){var r;let n=J.useContext(bx),e=I3("useRouteError"),t=wx("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function P3(){let{router:n}=N3("useNavigate"),e=wx("useNavigate"),t=J.useRef(!1);return QT(()=>{t.current=!0}),J.useCallback(async(a,i={})=>{ba(t.current,GT),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...i}))},[n,e])}var d2={};function XT(n,e,t){!e&&!d2[n]&&(d2[n]=!0,ba(!1,t))}J.memo(B3);function B3({routes:n,future:e,state:t}){return KT(n,void 0,t,e)}function z3(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function U3({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:i=!1}){Wt(!Th(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),u=J.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof t=="string"&&(t=ic(t));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:v="default"}=t,g=J.useMemo(()=>{let y=Li(c,o);return y==null?null:{location:{pathname:y,search:f,hash:d,state:p,key:v},navigationType:r}},[o,c,f,d,p,v,r]);return ba(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:J.createElement(ti.Provider,{value:u},J.createElement(Rh.Provider,{children:e,value:g}))}function R9({children:n,location:e}){return R3(W0(n),e)}function W0(n,e=[]){let t=[];return J.Children.forEach(n,(r,a)=>{if(!J.isValidElement(r))return;let i=[...e,a];if(r.type===J.Fragment){t.push.apply(t,W0(r.props.children,i));return}Wt(r.type===z3,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=W0(r.props.children,i)),t.push(o)}),t}var Dp="get",Np="application/x-www-form-urlencoded";function qv(n){return n!=null&&typeof n.tagName=="string"}function V3(n){return qv(n)&&n.tagName.toLowerCase()==="button"}function j3(n){return qv(n)&&n.tagName.toLowerCase()==="form"}function q3(n){return qv(n)&&n.tagName.toLowerCase()==="input"}function W3(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function H3(n,e){return n.button===0&&(!e||e==="_self")&&!W3(n)}function H0(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(a=>[t,a]):[[t,r]])},[]))}function G3(n,e){let t=H0(n);return e&&e.forEach((r,a)=>{t.has(a)||e.getAll(a).forEach(i=>{t.append(a,i)})}),t}var rp=null;function Q3(){if(rp===null)try{new FormData(document.createElement("form"),0),rp=!1}catch{rp=!0}return rp}var $3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function By(n){return n!=null&&!$3.has(n)?(ba(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Np}"`),null):n}function K3(n,e){let t,r,a,i,o;if(j3(n)){let u=n.getAttribute("action");r=u?Li(u,e):null,t=n.getAttribute("method")||Dp,a=By(n.getAttribute("enctype"))||Np,i=new FormData(n)}else if(V3(n)||q3(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?Li(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Dp,a=By(n.getAttribute("formenctype"))||By(u.getAttribute("enctype"))||Np,i=new FormData(u,n),!Q3()){let{name:f,type:d,value:p}=n;if(d==="image"){let v=f?`${f}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else f&&i.append(f,p)}}else{if(qv(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dp,r=null,a=Np,o=n}return i&&a==="text/plain"&&(o=i,i=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:i,body:o}}function _x(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function X3(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Y3(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Z3(n,e,t){let r=await Promise.all(n.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await X3(i,t);return o.links?o.links():[]}return[]}));return n4(r.flat(1).filter(Y3).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function p2(n,e,t,r,a,i){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,u=(c,f)=>{var d;return t[f].pathname!==c.pathname||((d=t[f].route.path)==null?void 0:d.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,f)=>o(c,f)||u(c,f)):i==="data"?e.filter((c,f)=>{var p;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function J3(n,e,{includeHydrateFallback:t}={}){return e4(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function e4(n){return[...new Set(n)]}function t4(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function n4(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let i=JSON.stringify(t4(a));return t.has(i)||(t.add(i),r.push({key:i,link:a})),r},[])}function r4(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Li(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function YT(){let n=J.useContext(oc);return _x(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function a4(){let n=J.useContext(jv);return _x(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ex=J.createContext(void 0);Ex.displayName="FrameworkContext";function ZT(){let n=J.useContext(Ex);return _x(n,"You must render this element inside a <HydratedRouter> element"),n}function i4(n,e){let t=J.useContext(Ex),[r,a]=J.useState(!1),[i,o]=J.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=e,v=J.useRef(null);J.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let x=_=>{_.forEach(S=>{o(S.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[n]),J.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{a(!0)},y=()=>{a(!1),o(!1)};return t?n!=="intent"?[i,v,{}]:[i,v,{onFocus:vf(u,g),onBlur:vf(c,y),onMouseEnter:vf(f,g),onMouseLeave:vf(d,y),onTouchStart:vf(p,g)}]:[!1,v,{}]}function vf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function o4({page:n,...e}){let{router:t}=YT(),r=J.useMemo(()=>zT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?J.createElement(u4,{page:n,matches:r,...e}):null}function s4(n){let{manifest:e,routeModules:t}=ZT(),[r,a]=J.useState([]);return J.useEffect(()=>{let i=!1;return Z3(n,e,t).then(o=>{i||a(o)}),()=>{i=!0}},[n,e,t]),r}function u4({page:n,matches:e,...t}){let r=es(),{manifest:a,routeModules:i}=ZT(),{basename:o}=YT(),{loaderData:u,matches:c}=a4(),f=J.useMemo(()=>p2(n,e,c,a,r,"data"),[n,e,c,a,r]),d=J.useMemo(()=>p2(n,e,c,a,r,"assets"),[n,e,c,a,r]),p=J.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let y=new Set,x=!1;if(e.forEach(_=>{var C;let S=a.routes[_.route.id];!S||!S.hasLoader||(!f.some(R=>R.route.id===_.route.id)&&_.route.id in u&&((C=i[_.route.id])!=null&&C.shouldRevalidate)||S.hasClientLoader?x=!0:y.add(_.route.id))}),y.size===0)return[];let w=r4(n,o);return x&&y.size>0&&w.searchParams.set("_routes",e.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,u,r,a,f,e,n,i]),v=J.useMemo(()=>J3(d,a),[d,a]),g=s4(d);return J.createElement(J.Fragment,null,p.map(y=>J.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),v.map(y=>J.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:x})=>J.createElement("link",{key:y,...x})))}function l4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var JT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JT&&(window.__reactRouterVersion="7.4.0")}catch{}function T9({basename:n,children:e,window:t}){let r=J.useRef();r.current==null&&(r.current=ZF({window:t,v5Compat:!0}));let a=r.current,[i,o]=J.useState({action:a.action,location:a.location}),u=J.useCallback(c=>{J.startTransition(()=>o(c))},[o]);return J.useLayoutEffect(()=>a.listen(u),[a,u]),J.createElement(U3,{basename:n,children:e,location:i.location,navigationType:i.action,navigator:a})}var eO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tO=J.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:i,replace:o,state:u,target:c,to:f,preventScrollReset:d,viewTransition:p,...v},g){let{basename:y}=J.useContext(ti),x=typeof f=="string"&&eO.test(f),w,_=!1;if(typeof f=="string"&&x&&(w=f,JT))try{let k=new URL(window.location.href),I=f.startsWith("//")?new URL(k.protocol+f):new URL(f),B=Li(I.pathname,y);I.origin===k.origin&&B!=null?f=B+I.search+I.hash:_=!0}catch{ba(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=S3(f,{relative:a}),[C,R,T]=i4(r,v),O=d4(f,{replace:o,state:u,target:c,preventScrollReset:d,relative:a,viewTransition:p});function D(k){e&&e(k),k.defaultPrevented||O(k)}let N=J.createElement("a",{...v,...T,href:w||S,onClick:_||i?e:D,ref:l4(g,R),target:c,"data-discover":!x&&t==="render"?"true":void 0});return C&&!x?J.createElement(J.Fragment,null,N,J.createElement(o4,{page:S})):N});tO.displayName="Link";var c4=J.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:i,to:o,viewTransition:u,children:c,...f},d){let p=Oh(o,{relative:f.relative}),v=es(),g=J.useContext(jv),{navigator:y,basename:x}=J.useContext(ti),w=g!=null&&y4(p)&&u===!0,_=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,S=v.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&x&&(C=Li(C,x)||C);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=S===_||!a&&S.startsWith(_)&&S.charAt(R)==="/",O=C!=null&&(C===_||!a&&C.startsWith(_)&&C.charAt(_.length)==="/"),D={isActive:T,isPending:O,isTransitioning:w},N=T?e:void 0,k;typeof r=="function"?k=r(D):k=[r,T?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(D):i;return J.createElement(tO,{...f,"aria-current":N,className:k,ref:d,style:I,to:o,viewTransition:u},typeof c=="function"?c(D):c)});c4.displayName="NavLink";var f4=J.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:i,method:o=Dp,action:u,onSubmit:c,relative:f,preventScrollReset:d,viewTransition:p,...v},g)=>{let y=m4(),x=g4(u,{relative:f}),w=o.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&eO.test(u),S=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let R=C.nativeEvent.submitter,T=(R==null?void 0:R.getAttribute("formmethod"))||o;y(R||C.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:a,state:i,relative:f,preventScrollReset:d,viewTransition:p})};return J.createElement("form",{ref:g,method:w,action:x,onSubmit:r?c:S,...v,"data-discover":!_&&n==="render"?"true":void 0})});f4.displayName="Form";function h4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nO(n){let e=J.useContext(oc);return Wt(e,h4(n)),e}function d4(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:o}={}){let u=$T(),c=es(),f=Oh(n,{relative:i});return J.useCallback(d=>{if(H3(d,e)){d.preventDefault();let p=t!==void 0?t:Wf(c)===Wf(f);u(n,{replace:p,state:r,preventScrollReset:a,relative:i,viewTransition:o})}},[c,u,f,t,r,e,n,a,i,o])}function O9(n){ba(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=J.useRef(H0(n)),t=J.useRef(!1),r=es(),a=J.useMemo(()=>G3(r.search,t.current?null:e.current),[r.search]),i=$T(),o=J.useCallback((u,c)=>{const f=H0(typeof u=="function"?u(a):u);t.current=!0,i("?"+f,c)},[i,a]);return[a,o]}var p4=0,v4=()=>`__${String(++p4)}__`;function m4(){let{router:n}=nO("useSubmit"),{basename:e}=J.useContext(ti),t=F3();return J.useCallback(async(r,a={})=>{let{action:i,method:o,encType:u,formData:c,body:f}=K3(r,e);if(a.navigate===!1){let d=a.fetcherKey||v4();await n.fetch(d,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,flushSync:a.flushSync})}else await n.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function g4(n,{relative:e}={}){let{basename:t}=J.useContext(ti),r=J.useContext(Ui);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...Oh(n||".",{relative:e})},o=es();if(n==null){i.search=o.search;let u=new URLSearchParams(i.search),c=u.getAll("index");if(c.some(d=>d==="")){u.delete("index"),c.filter(p=>p).forEach(p=>u.append("index",p));let d=u.toString();i.search=d?`?${d}`:""}}return(!n||n===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Mi([t,i.pathname])),Wf(i)}function y4(n,e={}){let t=J.useContext(HT);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nO("useViewTransitionState"),a=Oh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Li(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Li(t.nextLocation.pathname,r)||t.nextLocation.pathname;return $p(a.pathname,o)!=null||$p(a.pathname,i)!=null}new TextEncoder;function b4(n={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}=n,[a,i]=J.useState(!1),o=J.useRef(t);o.current=t;const u=J.useRef(r);return u.current=r,J.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var f;i(!0),(f=o.current)===null||f===void 0||f.call(o)},c.onerror=()=>{var f;i(!1),(f=u.current)===null||f===void 0||f.call(u)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),a}const rO=J.createContext(null);function A9({clientId:n,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r,children:a}){const i=b4({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}),o=J.useMemo(()=>({clientId:n,scriptLoadedSuccessfully:i}),[n,i]);return pr.createElement(rO.Provider,{value:o},a)}function x4(){const n=J.useContext(rO);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function k9({flow:n="implicit",scope:e="",onSuccess:t,onError:r,onNonOAuthError:a,overrideScope:i,state:o,...u}){const{clientId:c,scriptLoadedSuccessfully:f}=x4(),d=J.useRef(),p=J.useRef(t);p.current=t;const v=J.useRef(r);v.current=r;const g=J.useRef(a);g.current=a,J.useEffect(()=>{var w,_;if(!f)return;const S=n==="implicit"?"initTokenClient":"initCodeClient",C=(_=(w=window==null?void 0:window.google)===null||w===void 0?void 0:w.accounts)===null||_===void 0?void 0:_.oauth2[S]({client_id:c,scope:i?e:`openid profile email ${e}`,callback:R=>{var T,O;if(R.error)return(T=v.current)===null||T===void 0?void 0:T.call(v,R);(O=p.current)===null||O===void 0||O.call(p,R)},error_callback:R=>{var T;(T=g.current)===null||T===void 0||T.call(g,R)},state:o,...u});d.current=C},[c,f,n,e,o]);const y=J.useCallback(w=>{var _;return(_=d.current)===null||_===void 0?void 0:_.requestAccessToken(w)},[]),x=J.useCallback(()=>{var w;return(w=d.current)===null||w===void 0?void 0:w.requestCode()},[]);return n==="implicit"?y:x}var sc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ys=typeof window>"u"||"Deno"in globalThis;function Qr(){}function w4(n,e){return typeof n=="function"?n(e):n}function G0(n){return typeof n=="number"&&n>=0&&n!==1/0}function aO(n,e){return Math.max(n+(e||0)-Date.now(),0)}function vl(n,e){return typeof n=="function"?n(e):n}function ca(n,e){return typeof n=="function"?n(e):n}function v2(n,e){const{type:t="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:u}=n;if(o){if(r){if(e.queryHash!==Sx(o,e.options))return!1}else if(!Hf(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||a&&a!==e.state.fetchStatus||i&&!i(e))}function m2(n,e){const{exact:t,status:r,predicate:a,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Zs(e.options.mutationKey)!==Zs(i))return!1}else if(!Hf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function Sx(n,e){return((e==null?void 0:e.queryKeyHashFn)||Zs)(n)}function Zs(n){return JSON.stringify(n,(e,t)=>Q0(t)?Object.keys(t).sort().reduce((r,a)=>(r[a]=t[a],r),{}):t)}function Hf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Hf(n[t],e[t])):!1}function iO(n,e){if(n===e)return n;const t=g2(n)&&g2(e);if(t||Q0(n)&&Q0(e)){const r=t?n:Object.keys(n),a=r.length,i=t?e:Object.keys(e),o=i.length,u=t?[]:{};let c=0;for(let f=0;f<o;f++){const d=t?f:i[f];(!t&&r.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(u[d]=void 0,c++):(u[d]=iO(n[d],e[d]),u[d]===n[d]&&n[d]!==void 0&&c++)}return a===o&&c===a?n:u}return e}function Kp(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function g2(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Q0(n){if(!y2(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!y2(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function y2(n){return Object.prototype.toString.call(n)==="[object Object]"}function _4(n){return new Promise(e=>{setTimeout(e,n)})}function $0(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?iO(n,e):e}function E4(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function S4(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Cx=Symbol();function oO(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Cx?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ps,To,Ol,aT,C4=(aT=class extends sc{constructor(){super();qe(this,Ps);qe(this,To);qe(this,Ol);Se(this,Ol,e=>{if(!Ys&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){V(this,To)||this.setEventListener(V(this,Ol))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,To))==null||e.call(this),Se(this,To,void 0))}setEventListener(e){var t;Se(this,Ol,e),(t=V(this,To))==null||t.call(this),Se(this,To,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){V(this,Ps)!==e&&(Se(this,Ps,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof V(this,Ps)=="boolean"?V(this,Ps):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ps=new WeakMap,To=new WeakMap,Ol=new WeakMap,aT),Rx=new C4,Al,Oo,kl,iT,R4=(iT=class extends sc{constructor(){super();qe(this,Al,!0);qe(this,Oo);qe(this,kl);Se(this,kl,e=>{if(!Ys&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){V(this,Oo)||this.setEventListener(V(this,kl))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,Oo))==null||e.call(this),Se(this,Oo,void 0))}setEventListener(e){var t;Se(this,kl,e),(t=V(this,Oo))==null||t.call(this),Se(this,Oo,e(this.setOnline.bind(this)))}setOnline(e){V(this,Al)!==e&&(Se(this,Al,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return V(this,Al)}},Al=new WeakMap,Oo=new WeakMap,kl=new WeakMap,iT),Xp=new R4;function K0(){let n,e;const t=new Promise((a,i)=>{n=a,e=i});t.status="pending",t.catch(()=>{});function r(a){Object.assign(t,a),delete t.resolve,delete t.reject}return t.resolve=a=>{r({status:"fulfilled",value:a}),n(a)},t.reject=a=>{r({status:"rejected",reason:a}),e(a)},t}function T4(n){return Math.min(1e3*2**n,3e4)}function sO(n){return(n??"online")==="online"?Xp.isOnline():!0}var uO=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function zy(n){return n instanceof uO}function lO(n){let e=!1,t=0,r=!1,a;const i=K0(),o=x=>{var w;r||(v(new uO(x)),(w=n.abort)==null||w.call(n))},u=()=>{e=!0},c=()=>{e=!1},f=()=>Rx.isFocused()&&(n.networkMode==="always"||Xp.isOnline())&&n.canRun(),d=()=>sO(n.networkMode)&&n.canRun(),p=x=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,x),a==null||a(),i.resolve(x))},v=x=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,x),a==null||a(),i.reject(x))},g=()=>new Promise(x=>{var w;a=_=>{(r||f())&&x(_)},(w=n.onPause)==null||w.call(n)}).then(()=>{var x;a=void 0,r||(x=n.onContinue)==null||x.call(n)}),y=()=>{if(r)return;let x;const w=t===0?n.initialPromise:void 0;try{x=w??n.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(p).catch(_=>{var O;if(r)return;const S=n.retry??(Ys?0:3),C=n.retryDelay??T4,R=typeof C=="function"?C(t,_):C,T=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,_);if(e||!T){v(_);return}t++,(O=n.onFail)==null||O.call(n,t,_),_4(R).then(()=>f()?void 0:g()).then(()=>{e?v(_):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?y():g().then(y),i)}}function O4(){let n=[],e=0,t=u=>{u()},r=u=>{u()},a=u=>setTimeout(u,0);const i=u=>{e?n.push(u):a(()=>{t(u)})},o=()=>{const u=n;n=[],u.length&&a(()=>{r(()=>{u.forEach(c=>{t(c)})})})};return{batch:u=>{let c;e++;try{c=u()}finally{e--,e||o()}return c},batchCalls:u=>(...c)=>{i(()=>{u(...c)})},schedule:i,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{a=u}}}var hn=O4(),Bs,oT,cO=(oT=class{constructor(){qe(this,Bs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),G0(this.gcTime)&&Se(this,Bs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ys?1/0:5*60*1e3))}clearGcTimeout(){V(this,Bs)&&(clearTimeout(V(this,Bs)),Se(this,Bs,void 0))}},Bs=new WeakMap,oT),Dl,Nl,Gr,zs,qn,_h,Us,ua,Ri,sT,A4=(sT=class extends cO{constructor(e){super();qe(this,ua);qe(this,Dl);qe(this,Nl);qe(this,Gr);qe(this,zs);qe(this,qn);qe(this,_h);qe(this,Us);Se(this,Us,!1),Se(this,_h,e.defaultOptions),this.setOptions(e.options),this.observers=[],Se(this,zs,e.client),Se(this,Gr,V(this,zs).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Se(this,Dl,k4(this.options)),this.state=e.state??V(this,Dl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=V(this,qn))==null?void 0:e.promise}setOptions(e){this.options={...V(this,_h),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,Gr).remove(this)}setData(e,t){const r=$0(this.state.data,e,this.options);return rt(this,ua,Ri).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){rt(this,ua,Ri).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,a;const t=(r=V(this,qn))==null?void 0:r.promise;return(a=V(this,qn))==null||a.cancel(e),t?t.then(Qr).catch(Qr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,Dl))}isActive(){return this.observers.some(e=>ca(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!aO(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=V(this,qn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=V(this,qn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),V(this,Gr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(V(this,qn)&&(V(this,Us)?V(this,qn).cancel({revert:!0}):V(this,qn).cancelRetry()),this.scheduleGc()),V(this,Gr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||rt(this,ua,Ri).call(this,{type:"invalidate"})}fetch(e,t){var c,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(V(this,qn))return V(this,qn).continueRetry(),V(this,qn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(v=>v.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Se(this,Us,!0),r.signal)})},i=()=>{const p=oO(this.options,t),v={client:V(this,zs),queryKey:this.queryKey,meta:this.meta};return a(v),Se(this,Us,!1),this.options.persister?this.options.persister(p,v,this):p(v)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:V(this,zs),state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),Se(this,Nl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=o.fetchOptions)==null?void 0:f.meta))&&rt(this,ua,Ri).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const u=p=>{var v,g,y,x;zy(p)&&p.silent||rt(this,ua,Ri).call(this,{type:"error",error:p}),zy(p)||((g=(v=V(this,Gr).config).onError)==null||g.call(v,p,this),(x=(y=V(this,Gr).config).onSettled)==null||x.call(y,this.state.data,p,this)),this.scheduleGc()};return Se(this,qn,lO({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var v,g,y,x;if(p===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(w){u(w);return}(g=(v=V(this,Gr).config).onSuccess)==null||g.call(v,p,this),(x=(y=V(this,Gr).config).onSettled)==null||x.call(y,p,this.state.error,this),this.scheduleGc()},onError:u,onFail:(p,v)=>{rt(this,ua,Ri).call(this,{type:"failed",failureCount:p,error:v})},onPause:()=>{rt(this,ua,Ri).call(this,{type:"pause"})},onContinue:()=>{rt(this,ua,Ri).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),V(this,qn).start()}},Dl=new WeakMap,Nl=new WeakMap,Gr=new WeakMap,zs=new WeakMap,qn=new WeakMap,_h=new WeakMap,Us=new WeakMap,ua=new WeakSet,Ri=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...fO(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return zy(a)&&a.revert&&V(this,Nl)?{...V(this,Nl),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),hn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),V(this,Gr).notify({query:this,type:"updated",action:e})})},sT);function fO(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sO(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function k4(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ma,uT,D4=(uT=class extends sc{constructor(e={}){super();qe(this,Ma);this.config=e,Se(this,Ma,new Map)}build(e,t,r){const a=t.queryKey,i=t.queryHash??Sx(a,t);let o=this.get(i);return o||(o=new A4({client:e,queryKey:a,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){V(this,Ma).has(e.queryHash)||(V(this,Ma).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=V(this,Ma).get(e.queryHash);t&&(e.destroy(),t===e&&V(this,Ma).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return V(this,Ma).get(e)}getAll(){return[...V(this,Ma).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>v2(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>v2(e,r)):t}notify(e){hn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){hn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ma=new WeakMap,uT),Fa,tr,Vs,La,wo,lT,N4=(lT=class extends cO{constructor(e){super();qe(this,La);qe(this,Fa);qe(this,tr);qe(this,Vs);this.mutationId=e.mutationId,Se(this,tr,e.mutationCache),Se(this,Fa,[]),this.state=e.state||hO(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){V(this,Fa).includes(e)||(V(this,Fa).push(e),this.clearGcTimeout(),V(this,tr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Se(this,Fa,V(this,Fa).filter(t=>t!==e)),this.scheduleGc(),V(this,tr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){V(this,Fa).length||(this.state.status==="pending"?this.scheduleGc():V(this,tr).remove(this))}continue(){var e;return((e=V(this,Vs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D;Se(this,Vs,lO({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,k)=>{rt(this,La,wo).call(this,{type:"failed",failureCount:N,error:k})},onPause:()=>{rt(this,La,wo).call(this,{type:"pause"})},onContinue:()=>{rt(this,La,wo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,tr).canRun(this)}));const t=this.state.status==="pending",r=!V(this,Vs).canStart();try{if(!t){rt(this,La,wo).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(a=V(this,tr).config).onMutate)==null?void 0:i.call(a,e,this));const k=await((u=(o=this.options).onMutate)==null?void 0:u.call(o,e));k!==this.state.context&&rt(this,La,wo).call(this,{type:"pending",context:k,variables:e,isPaused:r})}const N=await V(this,Vs).start();return await((f=(c=V(this,tr).config).onSuccess)==null?void 0:f.call(c,N,e,this.state.context,this)),await((p=(d=this.options).onSuccess)==null?void 0:p.call(d,N,e,this.state.context)),await((g=(v=V(this,tr).config).onSettled)==null?void 0:g.call(v,N,null,this.state.variables,this.state.context,this)),await((x=(y=this.options).onSettled)==null?void 0:x.call(y,N,null,e,this.state.context)),rt(this,La,wo).call(this,{type:"success",data:N}),N}catch(N){try{throw await((_=(w=V(this,tr).config).onError)==null?void 0:_.call(w,N,e,this.state.context,this)),await((C=(S=this.options).onError)==null?void 0:C.call(S,N,e,this.state.context)),await((T=(R=V(this,tr).config).onSettled)==null?void 0:T.call(R,void 0,N,this.state.variables,this.state.context,this)),await((D=(O=this.options).onSettled)==null?void 0:D.call(O,void 0,N,e,this.state.context)),N}finally{rt(this,La,wo).call(this,{type:"error",error:N})}}finally{V(this,tr).runNext(this)}}},Fa=new WeakMap,tr=new WeakMap,Vs=new WeakMap,La=new WeakSet,wo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),hn.batch(()=>{V(this,Fa).forEach(r=>{r.onMutationUpdate(e)}),V(this,tr).notify({mutation:this,type:"updated",action:e})})},lT);function hO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Di,la,Eh,cT,I4=(cT=class extends sc{constructor(e={}){super();qe(this,Di);qe(this,la);qe(this,Eh);this.config=e,Se(this,Di,new Set),Se(this,la,new Map),Se(this,Eh,0)}build(e,t,r){const a=new N4({mutationCache:this,mutationId:++ep(this,Eh)._,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){V(this,Di).add(e);const t=ap(e);if(typeof t=="string"){const r=V(this,la).get(t);r?r.push(e):V(this,la).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(V(this,Di).delete(e)){const t=ap(e);if(typeof t=="string"){const r=V(this,la).get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&V(this,la).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ap(e);if(typeof t=="string"){const r=V(this,la).get(t),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const t=ap(e);if(typeof t=="string"){const a=(r=V(this,la).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hn.batch(()=>{V(this,Di).forEach(e=>{this.notify({type:"removed",mutation:e})}),V(this,Di).clear(),V(this,la).clear()})}getAll(){return Array.from(V(this,Di))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>m2(t,r))}findAll(e={}){return this.getAll().filter(t=>m2(e,t))}notify(e){hn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return hn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Qr))))}},Di=new WeakMap,la=new WeakMap,Eh=new WeakMap,cT);function ap(n){var e;return(e=n.options.scope)==null?void 0:e.id}function b2(n){return{onFetch:(e,t)=>{var d,p,v,g,y;const r=e.options,a=(v=(p=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:p.fetchMore)==null?void 0:v.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let u={pages:[],pageParams:[]},c=0;const f=async()=>{let x=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},_=oO(e.options,e.fetchOptions),S=async(C,R,T)=>{if(x)return Promise.reject();if(R==null&&C.pages.length)return Promise.resolve(C);const O={client:e.client,queryKey:e.queryKey,pageParam:R,direction:T?"backward":"forward",meta:e.options.meta};w(O);const D=await _(O),{maxPages:N}=e.options,k=T?S4:E4;return{pages:k(C.pages,D,N),pageParams:k(C.pageParams,R,N)}};if(a&&i.length){const C=a==="backward",R=C?M4:x2,T={pages:i,pageParams:o},O=R(r,T);u=await S(T,O,C)}else{const C=n??i.length;do{const R=c===0?o[0]??r.initialPageParam:x2(r,u);if(c>0&&R==null)break;u=await S(u,R),c++}while(c<C)}return u};e.options.persister?e.fetchFn=()=>{var x,w;return(w=(x=e.options).persister)==null?void 0:w.call(x,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=f}}}function x2(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function M4(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Xt,Ao,ko,Il,Ml,Do,Fl,Ll,fT,D9=(fT=class{constructor(n={}){qe(this,Xt);qe(this,Ao);qe(this,ko);qe(this,Il);qe(this,Ml);qe(this,Do);qe(this,Fl);qe(this,Ll);Se(this,Xt,n.queryCache||new D4),Se(this,Ao,n.mutationCache||new I4),Se(this,ko,n.defaultOptions||{}),Se(this,Il,new Map),Se(this,Ml,new Map),Se(this,Do,0)}mount(){ep(this,Do)._++,V(this,Do)===1&&(Se(this,Fl,Rx.subscribe(async n=>{n&&(await this.resumePausedMutations(),V(this,Xt).onFocus())})),Se(this,Ll,Xp.subscribe(async n=>{n&&(await this.resumePausedMutations(),V(this,Xt).onOnline())})))}unmount(){var n,e;ep(this,Do)._--,V(this,Do)===0&&((n=V(this,Fl))==null||n.call(this),Se(this,Fl,void 0),(e=V(this,Ll))==null||e.call(this),Se(this,Ll,void 0))}isFetching(n){return V(this,Xt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return V(this,Ao).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=V(this,Xt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=V(this,Xt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(vl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return V(this,Xt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),a=V(this,Xt).get(r.queryHash),i=a==null?void 0:a.state.data,o=w4(e,i);if(o!==void 0)return V(this,Xt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return hn.batch(()=>V(this,Xt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=V(this,Xt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=V(this,Xt);hn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=V(this,Xt);return hn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=hn.batch(()=>V(this,Xt).findAll(n).map(a=>a.cancel(t)));return Promise.all(r).then(Qr).catch(Qr)}invalidateQueries(n,e={}){return hn.batch(()=>(V(this,Xt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=hn.batch(()=>V(this,Xt).findAll(n).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,t);return t.throwOnError||(i=i.catch(Qr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Qr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=V(this,Xt).build(this,e);return t.isStaleByTime(vl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Qr).catch(Qr)}fetchInfiniteQuery(n){return n.behavior=b2(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Qr).catch(Qr)}ensureInfiniteQueryData(n){return n.behavior=b2(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Xp.isOnline()?V(this,Ao).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,Xt)}getMutationCache(){return V(this,Ao)}getDefaultOptions(){return V(this,ko)}setDefaultOptions(n){Se(this,ko,n)}setQueryDefaults(n,e){V(this,Il).set(Zs(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...V(this,Il).values()],t={};return e.forEach(r=>{Hf(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){V(this,Ml).set(Zs(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...V(this,Ml).values()],t={};return e.forEach(r=>{Hf(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...V(this,ko).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Sx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Cx&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...V(this,ko).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){V(this,Xt).clear(),V(this,Ao).clear()}},Xt=new WeakMap,Ao=new WeakMap,ko=new WeakMap,Il=new WeakMap,Ml=new WeakMap,Do=new WeakMap,Fl=new WeakMap,Ll=new WeakMap,fT),cr,dt,Sh,nr,js,Pl,No,Pa,Ch,Bl,zl,qs,Ws,Io,Ul,Tt,Tf,X0,Y0,Z0,J0,eb,tb,nb,dO,hT,F4=(hT=class extends sc{constructor(e,t){super();qe(this,Tt);qe(this,cr);qe(this,dt);qe(this,Sh);qe(this,nr);qe(this,js);qe(this,Pl);qe(this,No);qe(this,Pa);qe(this,Ch);qe(this,Bl);qe(this,zl);qe(this,qs);qe(this,Ws);qe(this,Io);qe(this,Ul,new Set);this.options=t,Se(this,cr,e),Se(this,Pa,null),Se(this,No,K0()),this.options.experimental_prefetchInRender||V(this,No).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(V(this,dt).addObserver(this),w2(V(this,dt),this.options)?rt(this,Tt,Tf).call(this):this.updateResult(),rt(this,Tt,J0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rb(V(this,dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rb(V(this,dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,rt(this,Tt,eb).call(this),rt(this,Tt,tb).call(this),V(this,dt).removeObserver(this)}setOptions(e,t){const r=this.options,a=V(this,dt);if(this.options=V(this,cr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ca(this.options.enabled,V(this,dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");rt(this,Tt,nb).call(this),V(this,dt).setOptions(this.options),r._defaulted&&!Kp(this.options,r)&&V(this,cr).getQueryCache().notify({type:"observerOptionsUpdated",query:V(this,dt),observer:this});const i=this.hasListeners();i&&_2(V(this,dt),a,this.options,r)&&rt(this,Tt,Tf).call(this),this.updateResult(t),i&&(V(this,dt)!==a||ca(this.options.enabled,V(this,dt))!==ca(r.enabled,V(this,dt))||vl(this.options.staleTime,V(this,dt))!==vl(r.staleTime,V(this,dt)))&&rt(this,Tt,X0).call(this);const o=rt(this,Tt,Y0).call(this);i&&(V(this,dt)!==a||ca(this.options.enabled,V(this,dt))!==ca(r.enabled,V(this,dt))||o!==V(this,Io))&&rt(this,Tt,Z0).call(this,o)}getOptimisticResult(e){const t=V(this,cr).getQueryCache().build(V(this,cr),e),r=this.createResult(t,e);return P4(this,r)&&(Se(this,nr,r),Se(this,Pl,this.options),Se(this,js,V(this,dt).state)),r}getCurrentResult(){return V(this,nr)}trackResult(e,t){const r={};return Object.keys(e).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t==null||t(a),e[a])})}),r}trackProp(e){V(this,Ul).add(e)}getCurrentQuery(){return V(this,dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=V(this,cr).defaultQueryOptions(e),r=V(this,cr).getQueryCache().build(V(this,cr),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return rt(this,Tt,Tf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),V(this,nr)))}createResult(e,t){var N;const r=V(this,dt),a=this.options,i=V(this,nr),o=V(this,js),u=V(this,Pl),f=e!==r?e.state:V(this,Sh),{state:d}=e;let p={...d},v=!1,g;if(t._optimisticResults){const k=this.hasListeners(),I=!k&&w2(e,t),B=k&&_2(e,r,t,a);(I||B)&&(p={...p,...fO(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:w}=p;if(t.select&&p.data!==void 0)if(i&&p.data===(o==null?void 0:o.data)&&t.select===V(this,Ch))g=V(this,Bl);else try{Se(this,Ch,t.select),g=t.select(p.data),g=$0(i==null?void 0:i.data,g,t),Se(this,Bl,g),Se(this,Pa,null)}catch(k){Se(this,Pa,k)}else g=p.data;if(t.placeholderData!==void 0&&g===void 0&&w==="pending"){let k;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData))k=i.data;else if(k=typeof t.placeholderData=="function"?t.placeholderData((N=V(this,zl))==null?void 0:N.state.data,V(this,zl)):t.placeholderData,t.select&&k!==void 0)try{k=t.select(k),Se(this,Pa,null)}catch(I){Se(this,Pa,I)}k!==void 0&&(w="success",g=$0(i==null?void 0:i.data,k,t),v=!0)}V(this,Pa)&&(y=V(this,Pa),g=V(this,Bl),x=Date.now(),w="error");const _=p.fetchStatus==="fetching",S=w==="pending",C=w==="error",R=S&&_,T=g!==void 0,D={status:w,fetchStatus:p.fetchStatus,isPending:S,isSuccess:w==="success",isError:C,isInitialLoading:R,isLoading:R,data:g,dataUpdatedAt:p.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:_,isRefetching:_&&!S,isLoadingError:C&&!T,isPaused:p.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:C&&T,isStale:Tx(e,t),refetch:this.refetch,promise:V(this,No)};if(this.options.experimental_prefetchInRender){const k=U=>{D.status==="error"?U.reject(D.error):D.data!==void 0&&U.resolve(D.data)},I=()=>{const U=Se(this,No,D.promise=K0());k(U)},B=V(this,No);switch(B.status){case"pending":e.queryHash===r.queryHash&&k(B);break;case"fulfilled":(D.status==="error"||D.data!==B.value)&&I();break;case"rejected":(D.status!=="error"||D.error!==B.reason)&&I();break}}return D}updateResult(e){const t=V(this,nr),r=this.createResult(V(this,dt),this.options);if(Se(this,js,V(this,dt).state),Se(this,Pl,this.options),V(this,js).data!==void 0&&Se(this,zl,V(this,dt)),Kp(r,t))return;Se(this,nr,r);const a={},i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!V(this,Ul).size)return!0;const c=new Set(u??V(this,Ul));return this.options.throwOnError&&c.add("error"),Object.keys(V(this,nr)).some(f=>{const d=f;return V(this,nr)[d]!==t[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&i()&&(a.listeners=!0),rt(this,Tt,dO).call(this,{...a,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&rt(this,Tt,J0).call(this)}},cr=new WeakMap,dt=new WeakMap,Sh=new WeakMap,nr=new WeakMap,js=new WeakMap,Pl=new WeakMap,No=new WeakMap,Pa=new WeakMap,Ch=new WeakMap,Bl=new WeakMap,zl=new WeakMap,qs=new WeakMap,Ws=new WeakMap,Io=new WeakMap,Ul=new WeakMap,Tt=new WeakSet,Tf=function(e){rt(this,Tt,nb).call(this);let t=V(this,dt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Qr)),t},X0=function(){rt(this,Tt,eb).call(this);const e=vl(this.options.staleTime,V(this,dt));if(Ys||V(this,nr).isStale||!G0(e))return;const r=aO(V(this,nr).dataUpdatedAt,e)+1;Se(this,qs,setTimeout(()=>{V(this,nr).isStale||this.updateResult()},r))},Y0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(V(this,dt)):this.options.refetchInterval)??!1},Z0=function(e){rt(this,Tt,tb).call(this),Se(this,Io,e),!(Ys||ca(this.options.enabled,V(this,dt))===!1||!G0(V(this,Io))||V(this,Io)===0)&&Se(this,Ws,setInterval(()=>{(this.options.refetchIntervalInBackground||Rx.isFocused())&&rt(this,Tt,Tf).call(this)},V(this,Io)))},J0=function(){rt(this,Tt,X0).call(this),rt(this,Tt,Z0).call(this,rt(this,Tt,Y0).call(this))},eb=function(){V(this,qs)&&(clearTimeout(V(this,qs)),Se(this,qs,void 0))},tb=function(){V(this,Ws)&&(clearInterval(V(this,Ws)),Se(this,Ws,void 0))},nb=function(){const e=V(this,cr).getQueryCache().build(V(this,cr),this.options);if(e===V(this,dt))return;const t=V(this,dt);Se(this,dt,e),Se(this,Sh,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},dO=function(e){hn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(V(this,nr))}),V(this,cr).getQueryCache().notify({query:V(this,dt),type:"observerResultsUpdated"})})},hT);function L4(n,e){return ca(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function w2(n,e){return L4(n,e)||n.state.data!==void 0&&rb(n,e,e.refetchOnMount)}function rb(n,e,t){if(ca(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Tx(n,e)}return!1}function _2(n,e,t,r){return(n!==e||ca(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Tx(n,t)}function Tx(n,e){return ca(e.enabled,n)!==!1&&n.isStaleByTime(vl(e.staleTime,n))}function P4(n,e){return!Kp(n.getCurrentResult(),e)}var Mo,Fo,fr,Ni,Fi,Ip,ab,dT,B4=(dT=class extends sc{constructor(t,r){super();qe(this,Fi);qe(this,Mo);qe(this,Fo);qe(this,fr);qe(this,Ni);Se(this,Mo,t),this.setOptions(r),this.bindMethods(),rt(this,Fi,Ip).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const r=this.options;this.options=V(this,Mo).defaultMutationOptions(t),Kp(this.options,r)||V(this,Mo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:V(this,fr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Zs(r.mutationKey)!==Zs(this.options.mutationKey)?this.reset():((a=V(this,fr))==null?void 0:a.state.status)==="pending"&&V(this,fr).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=V(this,fr))==null||t.removeObserver(this)}onMutationUpdate(t){rt(this,Fi,Ip).call(this),rt(this,Fi,ab).call(this,t)}getCurrentResult(){return V(this,Fo)}reset(){var t;(t=V(this,fr))==null||t.removeObserver(this),Se(this,fr,void 0),rt(this,Fi,Ip).call(this),rt(this,Fi,ab).call(this)}mutate(t,r){var a;return Se(this,Ni,r),(a=V(this,fr))==null||a.removeObserver(this),Se(this,fr,V(this,Mo).getMutationCache().build(V(this,Mo),this.options)),V(this,fr).addObserver(this),V(this,fr).execute(t)}},Mo=new WeakMap,Fo=new WeakMap,fr=new WeakMap,Ni=new WeakMap,Fi=new WeakSet,Ip=function(){var r;const t=((r=V(this,fr))==null?void 0:r.state)??hO();Se(this,Fo,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},ab=function(t){hn.batch(()=>{var r,a,i,o,u,c,f,d;if(V(this,Ni)&&this.hasListeners()){const p=V(this,Fo).variables,v=V(this,Fo).context;(t==null?void 0:t.type)==="success"?((a=(r=V(this,Ni)).onSuccess)==null||a.call(r,t.data,p,v),(o=(i=V(this,Ni)).onSettled)==null||o.call(i,t.data,null,p,v)):(t==null?void 0:t.type)==="error"&&((c=(u=V(this,Ni)).onError)==null||c.call(u,t.error,p,v),(d=(f=V(this,Ni)).onSettled)==null||d.call(f,void 0,t.error,p,v))}this.listeners.forEach(p=>{p(V(this,Fo))})})},dT),pO=J.createContext(void 0),vO=n=>{const e=J.useContext(pO);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},I9=({client:n,children:e})=>(J.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),jM.jsx(pO.Provider,{value:n,children:e})),mO=J.createContext(!1),z4=()=>J.useContext(mO);mO.Provider;function U4(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var V4=J.createContext(U4()),j4=()=>J.useContext(V4);function gO(n,e){return typeof n=="function"?n(...e):!!n}function ib(){}var q4=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},W4=n=>{J.useEffect(()=>{n.clearReset()},[n])},H4=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:a})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(a&&n.data===void 0||gO(t,[n.error,r])),G4=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Q4=(n,e)=>n.isLoading&&n.isFetching&&!e,$4=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,E2=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function K4(n,e,t){var p,v,g,y,x;const r=vO(),a=z4(),i=j4(),o=r.defaultQueryOptions(n);(v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||v.call(p,o),o._optimisticResults=a?"isRestoring":"optimistic",G4(o),q4(o,i),W4(i);const u=!r.getQueryCache().get(o.queryHash),[c]=J.useState(()=>new e(r,o)),f=c.getOptimisticResult(o),d=!a&&n.subscribed!==!1;if(J.useSyncExternalStore(J.useCallback(w=>{const _=d?c.subscribe(hn.batchCalls(w)):ib;return c.updateResult(),_},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),J.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),$4(o,f))throw E2(o,c,i);if(H4({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;if((y=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||y.call(g,o,f),o.experimental_prefetchInRender&&!Ys&&Q4(f,a)){const w=u?E2(o,c,i):(x=r.getQueryCache().get(o.queryHash))==null?void 0:x.promise;w==null||w.catch(ib).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?f:c.trackResult(f)}function M9(n,e){return K4(n,F4)}function F9(n,e){const t=vO(),[r]=J.useState(()=>new B4(t,n));J.useEffect(()=>{r.setOptions(n)},[r,n]);const a=J.useSyncExternalStore(J.useCallback(o=>r.subscribe(hn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=J.useCallback((o,u)=>{r.mutate(o,u).catch(ib)},[r]);if(a.error&&gO(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var L9=function(){return null};const X4=(n,e,t,r)=>{var i,o,u,c;const a=[t,{code:e,...r||{}}];if((o=(i=n==null?void 0:n.services)==null?void 0:i.logger)!=null&&o.forward)return n.services.logger.forward(a,"warn","react-i18next::",!0);Gs(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(c=(u=n==null?void 0:n.services)==null?void 0:u.logger)!=null&&c.warn?n.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},S2={},ob=(n,e,t,r)=>{Gs(t)&&S2[t]||(Gs(t)&&(S2[t]=new Date),X4(n,e,t,r))},yO=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},sb=(n,e,t)=>{n.loadNamespaces(e,yO(n,t))},C2=(n,e,t,r)=>{if(Gs(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return sb(n,t,r);t.forEach(a=>{n.options.ns.indexOf(a)<0&&n.options.ns.push(a)}),n.loadLanguages(e,yO(n,r))},Y4=(n,e,t={})=>!e.languages||!e.languages.length?(ob(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,a)=>{var i;if(((i=t.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,n))return!1}}),Gs=n=>typeof n=="string",Z4=n=>typeof n=="object"&&n!==null,J4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,eL={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},tL=n=>eL[n],nL=n=>n.replace(J4,tL);let ub={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:nL};const rL=(n={})=>{ub={...ub,...n}},aL=()=>ub;let bO;const iL=n=>{bO=n},oL=()=>bO,P9={type:"3rdParty",init(n){rL(n.options.react),iL(n)}},xO=J.createContext();class sL{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const uL=(n,e)=>{const t=J.useRef();return J.useEffect(()=>{t.current=n},[n,e]),t.current},wO=(n,e,t,r)=>n.getFixedT(e,t,r),lL=(n,e,t,r)=>J.useCallback(wO(n,e,t,r),[n,e,t,r]),B9=(n,e={})=>{var R,T,O,D;const{i18n:t}=e,{i18n:r,defaultNS:a}=J.useContext(xO)||{},i=t||r||oL();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new sL),!i){ob(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const N=(I,B)=>Gs(B)?B:Z4(B)&&Gs(B.defaultValue)?B.defaultValue:Array.isArray(I)?I[I.length-1]:I,k=[N,{},!1];return k.t=N,k.i18n={},k.ready=!1,k}(R=i.options.react)!=null&&R.wait&&ob(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...aL(),...i.options.react,...e},{useSuspense:u,keyPrefix:c}=o;let f=a||((T=i.options)==null?void 0:T.defaultNS);f=Gs(f)?[f]:f||["translation"],(D=(O=i.reportNamespaces).addUsedNamespaces)==null||D.call(O,f);const d=(i.isInitialized||i.initializedStoreOnce)&&f.every(N=>Y4(N,i,o)),p=lL(i,e.lng||null,o.nsMode==="fallback"?f:f[0],c),v=()=>p,g=()=>wO(i,e.lng||null,o.nsMode==="fallback"?f:f[0],c),[y,x]=J.useState(v);let w=f.join();e.lng&&(w=`${e.lng}${w}`);const _=uL(w),S=J.useRef(!0);J.useEffect(()=>{const{bindI18n:N,bindI18nStore:k}=o;S.current=!0,!d&&!u&&(e.lng?C2(i,e.lng,f,()=>{S.current&&x(g)}):sb(i,f,()=>{S.current&&x(g)})),d&&_&&_!==w&&S.current&&x(g);const I=()=>{S.current&&x(g)};return N&&(i==null||i.on(N,I)),k&&(i==null||i.store.on(k,I)),()=>{S.current=!1,i&&(N==null||N.split(" ").forEach(B=>i.off(B,I))),k&&i&&k.split(" ").forEach(B=>i.store.off(B,I))}},[i,w]),J.useEffect(()=>{S.current&&d&&x(v)},[i,c,d]);const C=[y,i,d];if(C.t=y,C.i18n=i,C.ready=d,d||!d&&!u)return C;throw new Promise(N=>{e.lng?C2(i,e.lng,f,()=>N()):sb(i,f,()=>N())})};function z9({i18n:n,defaultNS:e,children:t}){const r=J.useMemo(()=>({i18n:n,defaultNS:e}),[n,e]);return J.createElement(xO.Provider,{value:r},t)}function cL(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Yp(){return Yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yp.apply(null,arguments)}function lb(n,e){return lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},lb(n,e)}function fL(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,lb(n,e)}var cb=function(n,e){return cb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},cb(n,e)};function ni(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cb(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $=function(){return $=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$.apply(this,arguments)};function ma(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function Eo(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?i(d.value):a(d.value).then(u,c)}f((r=r.apply(n,e||[])).next())})}function So(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=u(0),o.throw=u(1),o.return=u(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function dn(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var ip={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var R2;function hL(){if(R2)return ip;R2=1;var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;ip.format=o,ip.parse=u;function o(p){if(!p||typeof p!="object")throw new TypeError("argument obj is required");var v=p.parameters,g=p.type;if(!g||!i.test(g))throw new TypeError("invalid type");var y=g;if(v&&typeof v=="object")for(var x,w=Object.keys(v).sort(),_=0;_<w.length;_++){if(x=w[_],!t.test(x))throw new TypeError("invalid parameter name");y+="; "+x+"="+f(v[x])}return y}function u(p){if(!p)throw new TypeError("argument string is required");var v=typeof p=="object"?c(p):p;if(typeof v!="string")throw new TypeError("argument string is required to be a string");var g=v.indexOf(";"),y=g!==-1?v.slice(0,g).trim():v.trim();if(!i.test(y))throw new TypeError("invalid media type");var x=new d(y.toLowerCase());if(g!==-1){var w,_,S;for(n.lastIndex=g;_=n.exec(v);){if(_.index!==g)throw new TypeError("invalid parameter format");g+=_[0].length,w=_[1].toLowerCase(),S=_[2],S.charCodeAt(0)===34&&(S=S.slice(1,-1),S.indexOf("\\")!==-1&&(S=S.replace(r,"$1"))),x.parameters[w]=S}if(g!==v.length)throw new TypeError("invalid parameter format")}return x}function c(p){var v;if(typeof p.getHeader=="function"?v=p.getHeader("content-type"):typeof p.headers=="object"&&(v=p.headers&&p.headers["content-type"]),typeof v!="string")throw new TypeError("content-type header is missing from object");return v}function f(p){var v=String(p);if(t.test(v))return v;if(v.length>0&&!e.test(v))throw new TypeError("invalid parameter value");return'"'+v.replace(a,"\\$1")+'"'}function d(p){this.parameters=Object.create(null),this.type=p}return ip}var dL=hL(),tl=new Map,_O=function(e){return e.cloneNode(!0)},T2=function(){return window.location.protocol==="file:"},EO=function(e,t,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&a.readyState===2){var i=a.getResponseHeader("Content-Type");if(!i)throw new Error("Content type not found");var o=dL.parse(i).type;if(!(o==="image/svg+xml"||o==="text/plain"))throw new Error("Invalid content type: ".concat(o))}if(a.readyState===4){if(a.status===404||a.responseXML===null)throw new Error(T2()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(a.status===200||T2()&&a.status===0)r(null,a);else throw new Error("There was a problem injecting the SVG: "+a.status+" "+a.statusText)}}catch(u){if(a.abort(),u instanceof Error)r(u,a);else throw u}},a.open("GET",e),a.withCredentials=t,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.send()},Ro={},O2=function(e,t){Ro[e]=Ro[e]||[],Ro[e].push(t)},pL=function(e){for(var t=function(o,u){setTimeout(function(){if(Array.isArray(Ro[e])){var c=tl.get(e),f=Ro[e][o];c instanceof SVGSVGElement&&f(null,_O(c)),c instanceof Error&&f(c),o===Ro[e].length-1&&delete Ro[e]}},0)},r=0,a=Ro[e].length;r<a;r++)t(r)},vL=function(e,t,r){if(tl.has(e)){var a=tl.get(e);if(a===void 0){O2(e,r);return}if(a instanceof SVGSVGElement){r(null,_O(a));return}}tl.set(e,void 0),O2(e,r),EO(e,t,function(i,o){var u;i?tl.set(e,i):((u=o.responseXML)===null||u===void 0?void 0:u.documentElement)instanceof SVGSVGElement&&tl.set(e,o.responseXML.documentElement),pL(e)})},mL=function(e,t,r){EO(e,t,function(a,i){var o;a?r(a):((o=i.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&r(null,i.responseXML.documentElement)})},gL=0,yL=function(){return++gL},Da=[],A2={},bL="http://www.w3.org/2000/svg",Uy="http://www.w3.org/1999/xlink",k2=function(e,t,r,a,i,o,u){var c=e.getAttribute("data-src")||e.getAttribute("src");if(!c){u(new Error("Invalid data-src or src attribute"));return}if(Da.indexOf(e)!==-1){Da.splice(Da.indexOf(e),1),e=null;return}Da.push(e),e.setAttribute("src","");var f=a?vL:mL;f(c,i,function(d,p){if(!p){Da.splice(Da.indexOf(e),1),e=null,u(d);return}var v=e.getAttribute("id");v&&p.setAttribute("id",v);var g=e.getAttribute("title");g&&p.setAttribute("title",g);var y=e.getAttribute("width");y&&p.setAttribute("width",y);var x=e.getAttribute("height");x&&p.setAttribute("height",x);var w=Array.from(new Set(dn(dn(dn([],(p.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();p.setAttribute("class",w);var _=e.getAttribute("style");_&&p.setAttribute("style",_),p.setAttribute("data-src",c);var S=[].filter.call(e.attributes,function(G){return/^data-\w[\w-]*$/.test(G.name)});if(Array.prototype.forEach.call(S,function(G){G.name&&G.value&&p.setAttribute(G.name,G.value)}),r){var C={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},R,T,O,D,N;Object.keys(C).forEach(function(G){R=G,O=C[G],T=p.querySelectorAll(R+"[id]");for(var Y=function(fe,he){D=T[fe].id,N=D+"-"+yL();var be;Array.prototype.forEach.call(O,function(Ye){be=p.querySelectorAll("["+Ye+'*="'+D+'"]');for(var bt=0,St=be.length;bt<St;bt++){var yt=be[bt].getAttribute(Ye);yt&&!yt.match(new RegExp('url\\("?#'+D+'"?\\)'))||be[bt].setAttribute(Ye,"url(#"+N+")")}});for(var ye=p.querySelectorAll("[*|href]"),Be=[],xe=0,Oe=ye.length;xe<Oe;xe++){var je=ye[xe].getAttributeNS(Uy,"href");je&&je.toString()==="#"+T[fe].id&&Be.push(ye[xe])}for(var Ve=0,$e=Be.length;Ve<$e;Ve++)Be[Ve].setAttributeNS(Uy,"href","#"+N);T[fe].id=N},F=0,K=T.length;F<K;F++)Y(F)})}p.removeAttribute("xmlns:a");for(var k=p.querySelectorAll("script"),I=[],B,U,ee=0,te=k.length;ee<te;ee++)U=k[ee].getAttribute("type"),(!U||U==="application/ecmascript"||U==="application/javascript"||U==="text/javascript")&&(B=k[ee].innerText||k[ee].textContent,B&&I.push(B),p.removeChild(k[ee]));if(I.length>0&&(t==="always"||t==="once"&&!A2[c])){for(var re=0,q=I.length;re<q;re++)new Function(I[re])(window);A2[c]=!0}var Z=p.querySelectorAll("style");if(Array.prototype.forEach.call(Z,function(G){G.textContent+=""}),p.setAttribute("xmlns",bL),p.setAttribute("xmlns:xlink",Uy),o(p),!e.parentNode){Da.splice(Da.indexOf(e),1),e=null,u(new Error("Parent node is null"));return}e.parentNode.replaceChild(p,e),Da.splice(Da.indexOf(e),1),e=null,u(null,p)})},xL=function(e,t){var r=t===void 0?{}:t,a=r.afterAll,i=a===void 0?function(){}:a,o=r.afterEach,u=o===void 0?function(){}:o,c=r.beforeEach,f=c===void 0?function(){}:c,d=r.cacheRequests,p=d===void 0?!0:d,v=r.evalScripts,g=v===void 0?"never":v,y=r.httpRequestWithCredentials,x=y===void 0?!1:y,w=r.renumerateIRIElements,_=w===void 0?!0:w;if(e&&"length"in e)for(var S=0,C=0,R=e.length;C<R;C++)k2(e[C],g,_,p,x,f,function(T,O){u(T,O),e&&"length"in e&&e.length===++S&&i(S)});else e?k2(e,g,_,p,x,f,function(T,O){u(T,O),i(1),e=null}):i(0)},Vy={exports:{}},jy,D2;function wL(){if(D2)return jy;D2=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return jy=n,jy}var qy,N2;function _L(){if(N2)return qy;N2=1;var n=wL();function e(){}function t(){}return t.resetWarningCache=e,qy=function(){function r(o,u,c,f,d,p){if(p!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},qy}var I2;function EL(){return I2||(I2=1,Vy.exports=_L()()),Vy.exports}var cn=EL(),SL=function(e){var t=(e==null?void 0:e.ownerDocument)||document;return t.defaultView||window},CL=function(e,t){for(var r in e)if(!(r in t))return!0;for(var a in t)if(e[a]!==t[a])return!0;return!1},RL=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],op="http://www.w3.org/2000/svg",M2="http://www.w3.org/1999/xlink",SO=function(n){function e(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=n.call.apply(n,[this].concat(i))||this,r.initialState={hasError:!1,isLoading:!0},r.state=r.initialState,r._isMounted=!1,r.reactWrapper=void 0,r.nonReactWrapper=void 0,r.refCallback=function(u){r.reactWrapper=u},r}fL(e,n);var t=e.prototype;return t.renderSVG=function(){var a=this;if(this.reactWrapper instanceof SL(this.reactWrapper).Node){var i=this.props,o=i.desc,u=i.evalScripts,c=i.httpRequestWithCredentials,f=i.renumerateIRIElements,d=i.src,p=i.title,v=i.useRequestCache,g=this.props.onError,y=this.props.beforeInjection,x=this.props.afterInjection,w=this.props.wrapper,_,S;w==="svg"?(_=document.createElementNS(op,w),_.setAttribute("xmlns",op),_.setAttribute("xmlns:xlink",M2),S=document.createElementNS(op,w)):(_=document.createElement(w),S=document.createElement(w)),_.appendChild(S),S.dataset.src=d,this.nonReactWrapper=this.reactWrapper.appendChild(_);var C=function(D){if(a.removeSVG(),!a._isMounted){g(D);return}a.setState(function(){return{hasError:!0,isLoading:!1}},function(){g(D)})},R=function(D,N){if(D){C(D);return}a._isMounted&&a.setState(function(){return{isLoading:!1}},function(){try{x(N)}catch(k){C(k)}})},T=function(D){if(D.setAttribute("role","img"),o){var N=D.querySelector(":scope > desc");N&&D.removeChild(N);var k=document.createElement("desc");k.innerHTML=o,D.prepend(k)}if(p){var I=D.querySelector(":scope > title");I&&D.removeChild(I);var B=document.createElement("title");B.innerHTML=p,D.prepend(B)}try{y(D)}catch(U){C(U)}};xL(S,{afterEach:R,beforeEach:T,cacheRequests:v,evalScripts:u,httpRequestWithCredentials:c,renumerateIRIElements:f})}},t.removeSVG=function(){var a;(a=this.nonReactWrapper)!=null&&a.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},t.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},t.componentDidUpdate=function(a){var i=this;CL(Yp({},a),this.props)&&this.setState(function(){return i.initialState},function(){i.removeSVG(),i.renderSVG()})},t.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},t.render=function(){var a=this.props;a.afterInjection,a.beforeInjection,a.desc,a.evalScripts;var i=a.fallback;a.httpRequestWithCredentials;var o=a.loading;a.renumerateIRIElements,a.src,a.title,a.useRequestCache;var u=a.wrapper,c=cL(a,RL),f=u;return J.createElement(f,Yp({},c,{ref:this.refCallback},u==="svg"?{xmlns:op,xmlnsXlink:M2}:{}),this.state.isLoading&&o&&J.createElement(o,null),this.state.hasError&&i&&J.createElement(i,null))},e}(J.Component);SO.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};SO.propTypes={afterInjection:cn.func,beforeInjection:cn.func,desc:cn.string,evalScripts:cn.oneOf(["always","once","never"]),fallback:cn.oneOfType([cn.func,cn.object,cn.string]),httpRequestWithCredentials:cn.bool,loading:cn.oneOfType([cn.func,cn.object,cn.string]),onError:cn.func,renumerateIRIElements:cn.bool,src:cn.string.isRequired,title:cn.string,useRequestCache:cn.bool,wrapper:cn.oneOf(["div","span","svg"])};const Ke=n=>typeof n=="string",mf=()=>{let n,e;const t=new Promise((r,a)=>{n=r,e=a});return t.resolve=n,t.reject=e,t},F2=n=>n==null?"":""+n,TL=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},OL=/###/g,L2=n=>n&&n.indexOf("###")>-1?n.replace(OL,"."):n,P2=n=>!n||Ke(n),Mf=(n,e,t)=>{const r=Ke(e)?e.split("."):e;let a=0;for(;a<r.length-1;){if(P2(n))return{};const i=L2(r[a]);!n[i]&&t&&(n[i]=new t),Object.prototype.hasOwnProperty.call(n,i)?n=n[i]:n={},++a}return P2(n)?{}:{obj:n,k:L2(r[a])}},B2=(n,e,t)=>{const{obj:r,k:a}=Mf(n,e,Object);if(r!==void 0||e.length===1){r[a]=t;return}let i=e[e.length-1],o=e.slice(0,e.length-1),u=Mf(n,o,Object);for(;u.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),u=Mf(n,o,Object),u!=null&&u.obj&&typeof u.obj[`${u.k}.${i}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${i}`]=t},AL=(n,e,t,r)=>{const{obj:a,k:i}=Mf(n,e,Object);a[i]=a[i]||[],a[i].push(t)},Zp=(n,e)=>{const{obj:t,k:r}=Mf(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},kL=(n,e,t)=>{const r=Zp(n,t);return r!==void 0?r:Zp(e,t)},CO=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Ke(n[r])||n[r]instanceof String||Ke(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):CO(n[r],e[r],t):n[r]=e[r]);return n},Ku=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var DL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const NL=n=>Ke(n)?n.replace(/[&<>"'\/]/g,e=>DL[e]):n;class IL{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const ML=[" ",",","?","!",";"],FL=new IL(20),LL=(n,e,t)=>{e=e||"",t=t||"";const r=ML.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(r.length===0)return!0;const a=FL.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(n);if(!i){const o=n.indexOf(t);o>0&&!a.test(n.substring(0,o))&&(i=!0)}return i},fb=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let a=n;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,u="";for(let c=i;c<r.length;++c)if(c!==i&&(u+=t),u+=r[c],o=a[u],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;i+=c-i+1;break}a=o}return a},Jp=n=>n==null?void 0:n.replace("_","-"),PL={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class ev{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||PL,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,a){return a&&!this.debug?null:(Ke(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new ev(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ev(this.logger,e)}}var qa=new ev;class Wv{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(t)||0;this.observers[r].set(t,a+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[u,c]=o;for(let f=0;f<c;f++)u(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[u,c]=o;for(let f=0;f<c;f++)u.apply(u,[e,...r])})}}class z2 extends Wv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var f,d;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],r&&(Array.isArray(r)?u.push(...r):Ke(r)&&i?u.push(...r.split(i)):u.push(r)));const c=Zp(this.data,u);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=u[0],t=u[1],r=u.slice(2).join(".")),c||!o||!Ke(r)?c:fb((d=(f=this.data)==null?void 0:f[e])==null?void 0:d[t],r,i)}addResource(e,t,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let u=[e,t];r&&(u=u.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(u=e.split("."),a=t,t=u[1]),this.addNamespaces(t),B2(this.data,u,a),i.silent||this.emit("added",e,t,r,a)}addResources(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(Ke(r[i])||Array.isArray(r[i]))&&this.addResource(e,t,i,r[i],{silent:!0});a.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),a=r,r=t,t=u[1]),this.addNamespaces(t);let c=Zp(this.data,u)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?CO(c,r,i):c={...c,...r},B2(this.data,u,c),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(a=>t[a]&&Object.keys(t[a]).length>0)}toJSON(){return this.data}}var RO={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,a){return n.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,t,r,a))??e}),e}};const U2={},V2=n=>!Ke(n)&&typeof n!="boolean"&&typeof n!="number";class tv extends Wv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),TL(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=qa.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!LL(e,r,a);if(o&&!u){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Ke(i)?[i]:i};const f=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(f[0])>-1)&&(i=f.shift()),e=f.join(a)}return{key:e,namespaces:Ke(i)?[i]:i}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:u}=this.extractFromKey(e[e.length-1],t),c=u[u.length-1],f=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode"){if(d){const B=t.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${B}${o}`,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${B}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:o}const p=this.resolve(e,t);let v=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||o,y=(p==null?void 0:p.exactUsedKey)||o,x=["[object Number]","[object Function]","[object RegExp]"],w=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,S=t.count!==void 0&&!Ke(t.count),C=tv.hasDefaultValue(t),R=S?this.pluralResolver.getSuffix(f,t.count,t):"",T=t.ordinal&&S?this.pluralResolver.getSuffix(f,t.count,{ordinal:!1}):"",O=S&&!t.ordinal&&t.count===0,D=O&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${R}`]||t[`defaultValue${T}`]||t.defaultValue;let N=v;_&&!v&&C&&(N=D);const k=V2(N),I=Object.prototype.toString.apply(N);if(_&&N&&k&&x.indexOf(I)<0&&!(Ke(w)&&Array.isArray(N))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,N,{...t,ns:u}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(p.res=B,p.usedParams=this.getUsedParamsDetails(t),p):B}if(i){const B=Array.isArray(N),U=B?[]:{},ee=B?y:g;for(const te in N)if(Object.prototype.hasOwnProperty.call(N,te)){const re=`${ee}${i}${te}`;C&&!v?U[te]=this.translate(re,{...t,defaultValue:V2(D)?D[te]:void 0,joinArrays:!1,ns:u}):U[te]=this.translate(re,{...t,joinArrays:!1,ns:u}),U[te]===re&&(U[te]=N[te])}v=U}}else if(_&&Ke(w)&&Array.isArray(v))v=v.join(w),v&&(v=this.extendTranslation(v,e,t,r));else{let B=!1,U=!1;!this.isValidLookup(v)&&C&&(B=!0,v=D),this.isValidLookup(v)||(U=!0,v=o);const te=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:v,re=C&&D!==v&&this.options.updateMissing;if(U||B||re){if(this.logger.log(re?"updateKey":"missingKey",f,c,o,re?D:v),i){const Y=this.resolve(o,{...t,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const Z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Z&&Z[0])for(let Y=0;Y<Z.length;Y++)q.push(Z[Y]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(t.lng||this.language):q.push(t.lng||this.language);const G=(Y,F,K)=>{var fe;const se=C&&K!==v?K:te;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,c,F,se,re,t):(fe=this.backendConnector)!=null&&fe.saveMissing&&this.backendConnector.saveMissing(Y,c,F,se,re,t),this.emit("missingKey",Y,c,F,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?q.forEach(Y=>{const F=this.pluralResolver.getSuffixes(Y,t);O&&t[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(K=>{G([Y],o+K,t[`defaultValue${K}`]||D)})}):G(q,o,D))}v=this.extendTranslation(v,e,t,p,r),U&&v===o&&this.options.appendNamespaceToMissingKey&&(v=`${c}:${o}`),(U||B)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,B?v:void 0))}return a?(p.res=v,p.usedParams=this.getUsedParamsDetails(t),p):v}extendTranslation(e,t,r,a,i){var f,d;var o=this;if((f=this.i18nFormat)!=null&&f.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=Ke(e)&&(((d=r==null?void 0:r.interpolation)==null?void 0:d.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(p){const y=e.match(this.interpolator.nestingRegexp);v=y&&y.length}let g=r.replace&&!Ke(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||a.usedLng,r),p){const y=e.match(this.interpolator.nestingRegexp),x=y&&y.length;v<x&&(r.nest=!1)}!r.lng&&a&&a.res&&(r.lng=this.language||a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,x=new Array(y),w=0;w<y;w++)x[w]=arguments[w];return(i==null?void 0:i[0])===x[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${t[0]}`),null):o.translate(...x,t)},r)),r.interpolation&&this.interpolator.reset()}const u=r.postProcess||this.options.postProcess,c=Ke(u)?[u]:u;return e!=null&&(c!=null&&c.length)&&r.applyPostProcessor!==!1&&(e=RO.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,u;return Ke(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(c,t),d=f.key;a=d;let p=f.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ke(t.count),g=v&&!t.ordinal&&t.count===0,y=t.context!==void 0&&(Ke(t.context)||typeof t.context=="number")&&t.context!=="",x=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);p.forEach(w=>{var _,S;this.isValidLookup(r)||(u=w,!U2[`${x[0]}-${w}`]&&((_=this.utils)!=null&&_.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(u))&&(U2[`${x[0]}-${w}`]=!0,this.logger.warn(`key "${a}" for languages "${x.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(C=>{var O;if(this.isValidLookup(r))return;o=C;const R=[d];if((O=this.i18nFormat)!=null&&O.addLookupKeys)this.i18nFormat.addLookupKeys(R,d,C,w,t);else{let D;v&&(D=this.pluralResolver.getSuffix(C,t.count,t));const N=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(R.push(d+D),t.ordinal&&D.indexOf(k)===0&&R.push(d+D.replace(k,this.options.pluralSeparator)),g&&R.push(d+N)),y){const I=`${d}${this.options.contextSeparator}${t.context}`;R.push(I),v&&(R.push(I+D),t.ordinal&&D.indexOf(k)===0&&R.push(I+D.replace(k,this.options.pluralSeparator)),g&&R.push(I+N))}}let T;for(;T=R.pop();)this.isValidLookup(r)||(i=T,r=this.getResource(C,w,T,t))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var i;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,t,r,a):this.resourceStore.getResource(e,t,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ke(e.replace);let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of t)delete a[i]}return a}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class j2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=qa.create("languageUtils")}getScriptPartFromCode(e){if(e=Jp(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Jp(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ke(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(t=a)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(i=>{if(i===a)return i;if(!(i.indexOf("-")<0&&a.indexOf("-")<0)&&(i.indexOf("-")>0&&a.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===a||i.indexOf(a)===0&&a.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ke(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ke(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):Ke(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}const q2={zero:0,one:1,two:2,few:3,many:4,other:5},W2={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class BL{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=qa.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Jp(e==="dev"?"en":e),a=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),W2;if(!e.match(/-|_/))return W2;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[i]=o,o}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${t}${a}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((a,i)=>q2[a]-q2[i]).map(a=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const H2=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=kL(n,e,t);return!i&&a&&Ke(t)&&(i=fb(n,t,r),i===void 0&&(i=fb(e,t,r))),i},Wy=n=>n.replace(/\$/g,"$$$$");class zL{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qa.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:a,prefix:i,prefixEscaped:o,suffix:u,suffixEscaped:c,formatSeparator:f,unescapeSuffix:d,unescapePrefix:p,nestingPrefix:v,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:x,nestingOptionsSeparator:w,maxReplaces:_,alwaysFormat:S}=e.interpolation;this.escape=t!==void 0?t:NL,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Ku(i):o||"{{",this.suffix=u?Ku(u):c||"}}",this.formatSeparator=f||",",this.unescapePrefix=d?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=v?Ku(v):g||Ku("$t("),this.nestingSuffix=y?Ku(y):x||Ku(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=_||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,a){var g;let i,o,u;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=y=>{if(y.indexOf(this.formatSeparator)<0){const S=H2(t,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...a,...t,interpolationkey:y}):S}const x=y.split(this.formatSeparator),w=x.shift().trim(),_=x.join(this.formatSeparator).trim();return this.format(H2(t,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...a,...t,interpolationkey:w})};this.resetRegExp();const d=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((g=a==null?void 0:a.interpolation)==null?void 0:g.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>Wy(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?Wy(this.escape(y)):Wy(y)}].forEach(y=>{for(u=0;i=y.regex.exec(e);){const x=i[1].trim();if(o=f(x),o===void 0)if(typeof d=="function"){const _=d(e,i,a);o=Ke(_)?_:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!Ke(o)&&!this.useRawValueToEscape&&(o=F2(o));const w=y.safeValue(o);if(e=e.replace(i[0],w),p?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=i[0].length):y.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;const u=(c,f)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const p=c.split(new RegExp(`${d}[ ]*{`));let v=`{${p[1]}`;c=p[0],v=this.interpolate(v,o);const g=v.match(/'/g),y=v.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!y||y.length%2!==0)&&(v=v.replace(/'/g,'"'));try{o=JSON.parse(v),f&&(o={...f,...o})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${d}${v}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;a=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!Ke(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let f=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const d=a[1].split(this.formatSeparator).map(p=>p.trim());a[1]=d.shift(),c=d,f=!0}if(i=t(u.call(this,a[1].trim(),o),o),i&&a[0]===e&&!Ke(i))return i;Ke(i)||(i=F2(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),f&&(i=c.reduce((d,p)=>this.format(d,p,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const UL=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?t.currency||(t.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?t.range||(t.range=a.trim()):a.split(";").forEach(o=>{if(o){const[u,...c]=o.split(":"),f=c.join(":").trim().replace(/^'+|'+$/g,""),d=u.trim();t[d]||(t[d]=f),f==="false"&&(t[d]=!1),f==="true"&&(t[d]=!0),isNaN(f)||(t[d]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},Xu=n=>{const e={};return(t,r,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const o=r+JSON.stringify(i);let u=e[o];return u||(u=n(Jp(r),a),e[o]=u),u(t)}};class VL{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=qa.create("formatter"),this.options=e,this.formats={number:Xu((t,r)=>{const a=new Intl.NumberFormat(t,{...r});return i=>a.format(i)}),currency:Xu((t,r)=>{const a=new Intl.NumberFormat(t,{...r,style:"currency"});return i=>a.format(i)}),datetime:Xu((t,r)=>{const a=new Intl.DateTimeFormat(t,{...r});return i=>a.format(i)}),relativetime:Xu((t,r)=>{const a=new Intl.RelativeTimeFormat(t,{...r});return i=>a.format(i,r.range||"day")}),list:Xu((t,r)=>{const a=new Intl.ListFormat(t,{...r});return i=>a.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Xu(t)}format(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(u=>u.indexOf(")")>-1)){const u=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,u)].join(this.formatSeparator)}return i.reduce((u,c)=>{var p;const{formatName:f,formatOptions:d}=UL(c);if(this.formats[f]){let v=u;try{const g=((p=a==null?void 0:a.formatParams)==null?void 0:p[a.interpolationkey])||{},y=g.locale||g.lng||a.locale||a.lng||r;v=this.formats[f](u,y,{...d,...a,...g})}catch(g){this.logger.warn(g)}return v}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const jL=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class qL extends Wv{constructor(e,t,r){var i,o;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=qa.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,a.backend,a)}queueLoad(e,t,r,a){const i={},o={},u={},c={};return e.forEach(f=>{let d=!0;t.forEach(p=>{const v=`${f}|${p}`;!r.reload&&this.store.hasResourceBundle(f,p)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?o[v]===void 0&&(o[v]=!0):(this.state[v]=1,d=!1,o[v]===void 0&&(o[v]=!0),i[v]===void 0&&(i[v]=!0),c[p]===void 0&&(c[p]=!0)))}),d||(u[f]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const a=e.split("|"),i=a[0],o=a[1];t&&this.emit("failedLoading",i,o,t),!t&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const u={};this.queue.forEach(c=>{AL(c.loaded,[i],o),jL(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(f=>{u[f]||(u[f]={});const d=c.loaded[f];d.length&&d.forEach(p=>{u[f][p]===void 0&&(u[f][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const u=(f,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(f&&d&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,a+1,i*2,o)},i);return}o(f,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const f=c(e,t);f&&typeof f.then=="function"?f.then(d=>u(null,d)).catch(u):u(null,f)}catch(f){u(f)}return}return c(e,t,u)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Ke(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ke(t)&&(t=[t]);const i=this.queueLoad(e,t,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,u)=>{o&&this.logger.warn(`${t}loading namespace ${i} for language ${a} failed`,o),!o&&u&&this.logger.log(`${t}loaded namespace ${i} for language ${a}`,u),this.loaded(e,o,u)})}saveMissing(e,t,r,a,i){var c,f,d,p,v;let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((f=(c=this.services)==null?void 0:c.utils)!=null&&f.hasLoadedNamespace&&!((p=(d=this.services)==null?void 0:d.utils)!=null&&p.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const g={...o,isUpdate:i},y=this.backend.create.bind(this.backend);if(y.length<6)try{let x;y.length===5?x=y(e,t,r,a,g):x=y(e,t,r,a),x&&typeof x.then=="function"?x.then(w=>u(null,w)).catch(u):u(null,x)}catch(x){u(x)}else y(e,t,r,a,u,g)}!e||!e[0]||this.store.addResource(e[0],t,r,a)}}}const G2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Ke(n[1])&&(e.defaultValue=n[1]),Ke(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Q2=n=>{var e,t;return Ke(n.ns)&&(n.ns=[n.ns]),Ke(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Ke(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},sp=()=>{},WL=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Gf extends Wv{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Q2(e),this.services={},this.logger=qa,this.modules={external:[]},WL(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Ke(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=G2();this.options={...a,...this.options,...Q2(t)},this.options.interpolation={...a.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?qa.init(i(this.modules.logger),this.options):qa.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=VL;const p=new j2(this.options);this.store=new z2(this.options.resources,this.options);const v=this.services;v.logger=qa,v.resourceStore=this.store,v.languageUtils=p,v.pluralResolver=new BL(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(v.formatter=i(d),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new zL(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new qL(i(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(g){for(var y=arguments.length,x=new Array(y>1?y-1:0),w=1;w<y;w++)x[w-1]=arguments[w];e.emit(g,...x)}),this.modules.languageDetector&&(v.languageDetector=i(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=i(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new tv(this.services,this.options),this.translator.on("*",function(g){for(var y=arguments.length,x=new Array(y>1?y-1:0),w=1;w<y;w++)x[w-1]=arguments[w];e.emit(g,...x)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=sp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=mf(),f=()=>{const d=(p,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(v),r(p,v)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),c}loadResources(e){var i,o;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sp;const a=Ke(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const u=[],c=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(p=>{p!=="cimode"&&u.indexOf(p)<0&&u.push(p)})};a?c(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,f=>c(f)),this.services.backendConnector.load(u,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(f)})}else r(null)}reloadResources(e,t,r){const a=mf();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=sp),this.services.backendConnector.reload(e,t,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&RO.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const a=mf();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,f)=>{f?(i(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),t&&t(c,function(){return r.t(...arguments)})},u=c=>{var d,p;!e&&!c&&this.services.languageDetector&&(c=[]);const f=Ke(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);f&&(this.language||i(f),this.translator.language||this.translator.changeLanguage(f),(p=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||p.call(d,f)),this.loadResources(f,v=>{o(v,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(e),a}getFixedT(e,t,r){var a=this;const i=function(o,u){let c;if(typeof u!="object"){for(var f=arguments.length,d=new Array(f>2?f-2:0),p=2;p<f;p++)d[p-2]=arguments[p];c=a.options.overloadTranslationOptionHandler([o,u].concat(d))}else c={...u};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const v=a.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(o)?g=o.map(y=>`${c.keyPrefix}${v}${y}`):g=c.keyPrefix?`${c.keyPrefix}${v}${o}`:o,a.t(g,c)};return Ke(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(){var a;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(a=this.translator)==null?void 0:a.translate(...t)}exists(){var a;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(a=this.translator)==null?void 0:a.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(u,c)=>{const f=this.services.backendConnector.state[`${u}|${c}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,o);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,t){const r=mf();return this.options.ns?(Ke(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=mf();Ke(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),t&&t(o)}),r):(t&&t(),Promise.resolve())}dir(e){var a,i;if(e||(e=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new j2(G2());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Gf(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sp;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new Gf(a);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(u=>{i[u]=this[u]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const u=Object.keys(this.store.data).reduce((c,f)=>(c[f]={...this.store.data[f]},Object.keys(c[f]).reduce((d,p)=>(d[p]={...c[f][p]},d),{})),{});i.store=new z2(u,a),i.services.resourceStore=i.store}return i.translator=new tv(i.services,a),i.translator.on("*",function(u){for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];i.emit(u,...f)}),i.init(a,t),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ir=Gf.createInstance();ir.createInstance=Gf.createInstance;ir.createInstance;ir.dir;ir.init;ir.loadResources;ir.reloadResources;ir.use;ir.changeLanguage;ir.getFixedT;ir.t;ir.exists;ir.setDefaultNamespace;ir.hasLoadedNamespace;ir.loadNamespaces;ir.loadLanguages;const $2=n=>{let e;const t=new Set,r=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const v=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(g=>g(e,v))}},a=()=>e,u={setState:r,getState:a,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(r,a,u);return u},HL=n=>n?$2(n):$2,GL=n=>n;function QL(n,e=GL){const t=pr.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return pr.useDebugValue(t),t}const $L=n=>{const e=HL(n),t=r=>QL(e,r);return Object.assign(t,e),t},U9=n=>$L;function KL(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),u=(i=t.getItem(a))!=null?i:null;return u instanceof Promise?u.then(o):o(u)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>t.removeItem(a)}}const hb=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return hb(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return hb(r)(t)}}}},XL=(n,e)=>(t,r,a)=>{let i={storage:KL(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},o=!1;const u=new Set,c=new Set;let f=i.storage;if(!f)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...x)},r,a);const d=()=>{const x=i.partialize({...r()});return f.setItem(i.name,{state:x,version:i.version})},p=a.setState;a.setState=(x,w)=>{p(x,w),d()};const v=n((...x)=>{t(...x),d()},r,a);a.getInitialState=()=>v;let g;const y=()=>{var x,w;if(!f)return;o=!1,u.forEach(S=>{var C;return S((C=r())!=null?C:v)});const _=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(x=r())!=null?x:v))||void 0;return hb(f.getItem.bind(f))(i.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==i.version){if(i.migrate){const C=i.migrate(S.state,S.version);return C instanceof Promise?C.then(R=>[!0,R]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var C;const[R,T]=S;if(g=i.merge(T,(C=r())!=null?C:v),t(g,!0),R)return d()}).then(()=>{_==null||_(g,void 0),g=r(),o=!0,c.forEach(S=>S(g))}).catch(S=>{_==null||_(void 0,S)})};return a.persist={setOptions:x=>{i={...i,...x},x.storage&&(f=x.storage)},clearStorage:()=>{f==null||f.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:x=>(u.add(x),()=>{u.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||y(),g||v},V9=XL;var mt;(function(n){n.assertEqual=a=>a;function e(a){}n.assertIs=e;function t(a){throw new Error}n.assertNever=t,n.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},n.getValidEnumValues=a=>{const i=n.objectKeys(a).filter(u=>typeof a[a[u]]!="number"),o={};for(const u of i)o[u]=a[u];return n.objectValues(o)},n.objectValues=a=>n.objectKeys(a).map(function(i){return a[i]}),n.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},n.find=(a,i)=>{for(const o of a)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(mt||(mt={}));var db;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(db||(db={}));const Re=mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ki=n=>{switch(typeof n){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return isNaN(n)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(n)?Re.array:n===null?Re.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Re.promise:typeof Map<"u"&&n instanceof Map?Re.map:typeof Set<"u"&&n instanceof Set?Re.set:typeof Date<"u"&&n instanceof Date?Re.date:Re.object;default:return Re.unknown}},ge=mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),YL=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Dr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let u=r,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(t(o))):u[f]=u[f]||{_errors:[]},u=u[f],c++}}};return a(this),r}static assert(e){if(!(e instanceof Dr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Dr.create=n=>new Dr(n);const Ql=(n,e)=>{let t;switch(n.code){case ge.invalid_type:n.received===Re.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ge.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,mt.jsonStringifyReplacer)}`;break;case ge.unrecognized_keys:t=`Unrecognized key(s) in object: ${mt.joinValues(n.keys,", ")}`;break;case ge.invalid_union:t="Invalid input";break;case ge.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${mt.joinValues(n.options)}`;break;case ge.invalid_enum_value:t=`Invalid enum value. Expected ${mt.joinValues(n.options)}, received '${n.received}'`;break;case ge.invalid_arguments:t="Invalid function arguments";break;case ge.invalid_return_type:t="Invalid function return type";break;case ge.invalid_date:t="Invalid date";break;case ge.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:mt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ge.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ge.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ge.custom:t="Invalid input";break;case ge.invalid_intersection_types:t="Intersection results could not be merged";break;case ge.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ge.not_finite:t="Number must be finite";break;default:t=e.defaultError,mt.assertNever(n)}return{message:t}};let TO=Ql;function ZL(n){TO=n}function nv(){return TO}const rv=n=>{const{data:e,path:t,errorMaps:r,issueData:a}=n,i=[...t,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let u="";const c=r.filter(f=>!!f).slice().reverse();for(const f of c)u=f(o,{data:e,defaultError:u}).message;return{...a,path:i,message:u}},JL=[];function _e(n,e){const t=nv(),r=rv({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Ql?void 0:Ql].filter(a=>!!a)});n.common.issues.push(r)}class Kn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const a of t){if(a.status==="aborted")return Ge;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const a of t){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Kn.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const a of t){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Ge;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ge=Object.freeze({status:"aborted"}),cl=n=>({status:"dirty",value:n}),rr=n=>({status:"valid",value:n}),pb=n=>n.status==="aborted",vb=n=>n.status==="dirty",Js=n=>n.status==="valid",Qf=n=>typeof Promise<"u"&&n instanceof Promise;function av(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function OO(n,e,t,r,a){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var Me;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));var Of,Af;class Xa{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const K2=(n,e)=>{if(Js(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Dr(n.common.issues);return this._error=t,this._error}}};function et(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:a}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,u)=>{var c,f;const{message:d}=n;return o.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:u.defaultError}:o.code!=="invalid_type"?{message:u.defaultError}:{message:(f=d??t)!==null&&f!==void 0?f:u.defaultError}},description:a}}class it{get description(){return this._def.description}_getType(e){return ki(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ki(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kn,ctx:{common:e.parent.common,data:e.data,parsedType:ki(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Qf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const a={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ki(e)},i=this._parseSync({data:e,path:a.path,parent:a});return K2(a,i)}"~validate"(e){var t,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ki(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:a});return Js(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(t=i==null?void 0:i.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(i=>Js(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ki(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Qf(a)?a:Promise.resolve(a));return K2(r,i)}refine(e,t){const r=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const o=e(a),u=()=>i.addIssue({code:ge.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(e,t){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof t=="function"?t(r,a):t),!1))}_refinement(e){return new xa({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ha.create(this,this._def)}nullable(){return $o.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ga.create(this)}promise(){return Kl.create(this,this._def)}or(e){return Yf.create([this,e],this._def)}and(e){return Zf.create(this,e,this._def)}transform(e){return new xa({...et(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new rh({...et(this._def),innerType:this,defaultValue:t,typeName:He.ZodDefault})}brand(){return new Ox({typeName:He.ZodBranded,type:this,...et(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new ah({...et(this._def),innerType:this,catchValue:t,typeName:He.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ah.create(this,e)}readonly(){return ih.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const eP=/^c[^\s-]{8,}$/i,tP=/^[0-9a-z]+$/,nP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,rP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aP=/^[a-z0-9_-]{21}$/i,iP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,oP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sP=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Hy;const lP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vP=new RegExp(`^${AO}$`);function kO(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function mP(n){return new RegExp(`^${kO(n)}$`)}function DO(n){let e=`${AO}T${kO(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function gP(n,e){return!!((e==="v4"||!e)&&lP.test(n)||(e==="v6"||!e)&&fP.test(n))}function yP(n,e){if(!iP.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function bP(n,e){return!!((e==="v4"||!e)&&cP.test(n)||(e==="v6"||!e)&&hP.test(n))}class da extends it{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_type,expected:Re.string,received:i.parsedType}),Ge}const r=new Kn;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,u=e.data.length<i.value;(o||u)&&(a=this._getOrReturnCtx(e,a),o?_e(a,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&_e(a,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")sP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"email",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Hy||(Hy=new RegExp(uP,"u")),Hy.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"emoji",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")rP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"uuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")aP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"nanoid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")eP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"cuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")tP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"cuid2",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")nP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"ulid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),_e(a,{validation:"url",code:ge.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"regex",code:ge.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?DO(i).test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?vP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?mP(i).test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?oP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"duration",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?gP(e.data,i.version)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"ip",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?yP(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"jwt",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?bP(e.data,i.version)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"cidr",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?dP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"base64",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?pP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"base64url",code:ge.invalid_string,message:i.message}),r.dirty()):mt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(a=>e.test(a),{validation:t,code:ge.invalid_string,...Me.errToObj(r)})}_addCheck(e){return new da({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Me.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Me.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Me.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Me.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Me.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Me.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Me.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Me.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Me.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Me.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Me.errToObj(t)})}nonempty(e){return this.min(1,Me.errToObj(e))}trim(){return new da({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new da({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new da({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}da.create=n=>{var e;return new da({checks:[],typeName:He.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...et(n)})};function xP(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=t>r?t:r,i=parseInt(n.toFixed(a).replace(".","")),o=parseInt(e.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Ho extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_type,expected:Re.number,received:i.parsedType}),Ge}let r;const a=new Kn;for(const i of this._def.checks)i.kind==="int"?mt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?xP(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.not_finite,message:i.message}),a.dirty()):mt.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Me.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Me.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Me.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Me.toString(t))}setLimit(e,t,r,a){return new Ho({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Me.toString(a)}]})}_addCheck(e){return new Ho({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Me.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&mt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ho.create=n=>new Ho({checks:[],typeName:He.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...et(n)});class Go extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Re.bigint)return this._getInvalidInput(e);let r;const a=new Kn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):mt.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return _e(t,{code:ge.invalid_type,expected:Re.bigint,received:t.parsedType}),Ge}gte(e,t){return this.setLimit("min",e,!0,Me.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Me.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Me.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Me.toString(t))}setLimit(e,t,r,a){return new Go({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Me.toString(a)}]})}_addCheck(e){return new Go({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Go.create=n=>{var e;return new Go({checks:[],typeName:He.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...et(n)})};class $f extends it{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.boolean,received:r.parsedType}),Ge}return rr(e.data)}}$f.create=n=>new $f({typeName:He.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...et(n)});class eu extends it{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_type,expected:Re.date,received:i.parsedType}),Ge}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_date}),Ge}const r=new Kn;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):mt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eu({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}eu.create=n=>new eu({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:He.ZodDate,...et(n)});class iv extends it{_parse(e){if(this._getType(e)!==Re.symbol){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.symbol,received:r.parsedType}),Ge}return rr(e.data)}}iv.create=n=>new iv({typeName:He.ZodSymbol,...et(n)});class Kf extends it{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.undefined,received:r.parsedType}),Ge}return rr(e.data)}}Kf.create=n=>new Kf({typeName:He.ZodUndefined,...et(n)});class Xf extends it{_parse(e){if(this._getType(e)!==Re.null){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.null,received:r.parsedType}),Ge}return rr(e.data)}}Xf.create=n=>new Xf({typeName:He.ZodNull,...et(n)});class $l extends it{constructor(){super(...arguments),this._any=!0}_parse(e){return rr(e.data)}}$l.create=n=>new $l({typeName:He.ZodAny,...et(n)});class Qs extends it{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rr(e.data)}}Qs.create=n=>new Qs({typeName:He.ZodUnknown,...et(n)});class Pi extends it{_parse(e){const t=this._getOrReturnCtx(e);return _e(t,{code:ge.invalid_type,expected:Re.never,received:t.parsedType}),Ge}}Pi.create=n=>new Pi({typeName:He.ZodNever,...et(n)});class ov extends it{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.void,received:r.parsedType}),Ge}return rr(e.data)}}ov.create=n=>new ov({typeName:He.ZodVoid,...et(n)});class ga extends it{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==Re.array)return _e(t,{code:ge.invalid_type,expected:Re.array,received:t.parsedType}),Ge;if(a.exactLength!==null){const o=t.data.length>a.exactLength.value,u=t.data.length<a.exactLength.value;(o||u)&&(_e(t,{code:o?ge.too_big:ge.too_small,minimum:u?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(_e(t,{code:ge.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(_e(t,{code:ge.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,u)=>a.type._parseAsync(new Xa(t,o,t.path,u)))).then(o=>Kn.mergeArray(r,o));const i=[...t.data].map((o,u)=>a.type._parseSync(new Xa(t,o,t.path,u)));return Kn.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new ga({...this._def,minLength:{value:e,message:Me.toString(t)}})}max(e,t){return new ga({...this._def,maxLength:{value:e,message:Me.toString(t)}})}length(e,t){return new ga({...this._def,exactLength:{value:e,message:Me.toString(t)}})}nonempty(e){return this.min(1,e)}}ga.create=(n,e)=>new ga({type:n,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...et(e)});function nl(n){if(n instanceof Vt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Ha.create(nl(r))}return new Vt({...n._def,shape:()=>e})}else return n instanceof ga?new ga({...n._def,type:nl(n.element)}):n instanceof Ha?Ha.create(nl(n.unwrap())):n instanceof $o?$o.create(nl(n.unwrap())):n instanceof Ya?Ya.create(n.items.map(e=>nl(e))):n}class Vt extends it{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=mt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Re.object){const f=this._getOrReturnCtx(e);return _e(f,{code:ge.invalid_type,expected:Re.object,received:f.parsedType}),Ge}const{status:r,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof Pi&&this._def.unknownKeys==="strip"))for(const f in a.data)o.includes(f)||u.push(f);const c=[];for(const f of o){const d=i[f],p=a.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Xa(a,p,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof Pi){const f=this._def.unknownKeys;if(f==="passthrough")for(const d of u)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(f==="strict")u.length>0&&(_e(a,{code:ge.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const d of u){const p=a.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Xa(a,p,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const f=[];for(const d of c){const p=await d.key,v=await d.value;f.push({key:p,value:v,alwaysSet:d.alwaysSet})}return f}).then(f=>Kn.mergeObjectSync(r,f)):Kn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new Vt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,i,o,u;const c=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(u=Me.errToObj(e).message)!==null&&u!==void 0?u:c}:{message:c}}}:{}})}strip(){return new Vt({...this._def,unknownKeys:"strip"})}passthrough(){return new Vt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Vt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Vt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Vt({...this._def,catchall:e})}pick(e){const t={};return mt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Vt({...this._def,shape:()=>t})}omit(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Vt({...this._def,shape:()=>t})}deepPartial(){return nl(this)}partial(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}),new Vt({...this._def,shape:()=>t})}required(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ha;)i=i._def.innerType;t[r]=i}}),new Vt({...this._def,shape:()=>t})}keyof(){return NO(mt.objectKeys(this.shape))}}Vt.create=(n,e)=>new Vt({shape:()=>n,unknownKeys:"strip",catchall:Pi.create(),typeName:He.ZodObject,...et(e)});Vt.strictCreate=(n,e)=>new Vt({shape:()=>n,unknownKeys:"strict",catchall:Pi.create(),typeName:He.ZodObject,...et(e)});Vt.lazycreate=(n,e)=>new Vt({shape:n,unknownKeys:"strip",catchall:Pi.create(),typeName:He.ZodObject,...et(e)});class Yf extends it{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function a(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const o=i.map(u=>new Dr(u.ctx.common.issues));return _e(t,{code:ge.invalid_union,unionErrors:o}),Ge}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of r){const f={...t,common:{...t.common,issues:[]},parent:null},d=c._parseSync({data:t.data,path:t.path,parent:f});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const u=o.map(c=>new Dr(c));return _e(t,{code:ge.invalid_union,unionErrors:u}),Ge}}get options(){return this._def.options}}Yf.create=(n,e)=>new Yf({options:n,typeName:He.ZodUnion,...et(e)});const Ti=n=>n instanceof eh?Ti(n.schema):n instanceof xa?Ti(n.innerType()):n instanceof th?[n.value]:n instanceof Qo?n.options:n instanceof nh?mt.objectValues(n.enum):n instanceof rh?Ti(n._def.innerType):n instanceof Kf?[void 0]:n instanceof Xf?[null]:n instanceof Ha?[void 0,...Ti(n.unwrap())]:n instanceof $o?[null,...Ti(n.unwrap())]:n instanceof Ox||n instanceof ih?Ti(n.unwrap()):n instanceof ah?Ti(n._def.innerType):[];class Hv extends it{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.object)return _e(t,{code:ge.invalid_type,expected:Re.object,received:t.parsedType}),Ge;const r=this.discriminator,a=t.data[r],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(_e(t,{code:ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const a=new Map;for(const i of t){const o=Ti(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of o){if(a.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);a.set(u,i)}}return new Hv({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...et(r)})}}function mb(n,e){const t=ki(n),r=ki(e);if(n===e)return{valid:!0,data:n};if(t===Re.object&&r===Re.object){const a=mt.objectKeys(e),i=mt.objectKeys(n).filter(u=>a.indexOf(u)!==-1),o={...n,...e};for(const u of i){const c=mb(n[u],e[u]);if(!c.valid)return{valid:!1};o[u]=c.data}return{valid:!0,data:o}}else if(t===Re.array&&r===Re.array){if(n.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<n.length;i++){const o=n[i],u=e[i],c=mb(o,u);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return t===Re.date&&r===Re.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Zf extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(i,o)=>{if(pb(i)||pb(o))return Ge;const u=mb(i.value,o.value);return u.valid?((vb(i)||vb(o))&&t.dirty(),{status:t.value,value:u.data}):(_e(r,{code:ge.invalid_intersection_types}),Ge)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Zf.create=(n,e,t)=>new Zf({left:n,right:e,typeName:He.ZodIntersection,...et(t)});class Ya extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.array)return _e(r,{code:ge.invalid_type,expected:Re.array,received:r.parsedType}),Ge;if(r.data.length<this._def.items.length)return _e(r,{code:ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ge;!this._def.rest&&r.data.length>this._def.items.length&&(_e(r,{code:ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,u)=>{const c=this._def.items[u]||this._def.rest;return c?c._parse(new Xa(r,o,r.path,u)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Kn.mergeArray(t,o)):Kn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Ya({...this._def,rest:e})}}Ya.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ya({items:n,typeName:He.ZodTuple,rest:null,...et(e)})};class Jf extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.object)return _e(r,{code:ge.invalid_type,expected:Re.object,received:r.parsedType}),Ge;const a=[],i=this._def.keyType,o=this._def.valueType;for(const u in r.data)a.push({key:i._parse(new Xa(r,u,r.path,u)),value:o._parse(new Xa(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Kn.mergeObjectAsync(t,a):Kn.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof it?new Jf({keyType:e,valueType:t,typeName:He.ZodRecord,...et(r)}):new Jf({keyType:da.create(),valueType:e,typeName:He.ZodRecord,...et(t)})}}class sv extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.map)return _e(r,{code:ge.invalid_type,expected:Re.map,received:r.parsedType}),Ge;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([u,c],f)=>({key:a._parse(new Xa(r,u,r.path,[f,"key"])),value:i._parse(new Xa(r,c,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const c of o){const f=await c.key,d=await c.value;if(f.status==="aborted"||d.status==="aborted")return Ge;(f.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(f.value,d.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const c of o){const f=c.key,d=c.value;if(f.status==="aborted"||d.status==="aborted")return Ge;(f.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(f.value,d.value)}return{status:t.value,value:u}}}}sv.create=(n,e,t)=>new sv({valueType:e,keyType:n,typeName:He.ZodMap,...et(t)});class tu extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.set)return _e(r,{code:ge.invalid_type,expected:Re.set,received:r.parsedType}),Ge;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(_e(r,{code:ge.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(_e(r,{code:ge.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const f=new Set;for(const d of c){if(d.status==="aborted")return Ge;d.status==="dirty"&&t.dirty(),f.add(d.value)}return{status:t.value,value:f}}const u=[...r.data.values()].map((c,f)=>i._parse(new Xa(r,c,r.path,f)));return r.common.async?Promise.all(u).then(c=>o(c)):o(u)}min(e,t){return new tu({...this._def,minSize:{value:e,message:Me.toString(t)}})}max(e,t){return new tu({...this._def,maxSize:{value:e,message:Me.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}tu.create=(n,e)=>new tu({valueType:n,minSize:null,maxSize:null,typeName:He.ZodSet,...et(e)});class ml extends it{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.function)return _e(t,{code:ge.invalid_type,expected:Re.function,received:t.parsedType}),Ge;function r(u,c){return rv({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nv(),Ql].filter(f=>!!f),issueData:{code:ge.invalid_arguments,argumentsError:c}})}function a(u,c){return rv({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nv(),Ql].filter(f=>!!f),issueData:{code:ge.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Kl){const u=this;return rr(async function(...c){const f=new Dr([]),d=await u._def.args.parseAsync(c,i).catch(g=>{throw f.addIssue(r(c,g)),f}),p=await Reflect.apply(o,this,d);return await u._def.returns._def.type.parseAsync(p,i).catch(g=>{throw f.addIssue(a(p,g)),f})})}else{const u=this;return rr(function(...c){const f=u._def.args.safeParse(c,i);if(!f.success)throw new Dr([r(c,f.error)]);const d=Reflect.apply(o,this,f.data),p=u._def.returns.safeParse(d,i);if(!p.success)throw new Dr([a(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ml({...this._def,args:Ya.create(e).rest(Qs.create())})}returns(e){return new ml({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ml({args:e||Ya.create([]).rest(Qs.create()),returns:t||Qs.create(),typeName:He.ZodFunction,...et(r)})}}class eh extends it{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eh.create=(n,e)=>new eh({getter:n,typeName:He.ZodLazy,...et(e)});class th extends it{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return _e(t,{received:t.data,code:ge.invalid_literal,expected:this._def.value}),Ge}return{status:"valid",value:e.data}}get value(){return this._def.value}}th.create=(n,e)=>new th({value:n,typeName:He.ZodLiteral,...et(e)});function NO(n,e){return new Qo({values:n,typeName:He.ZodEnum,...et(e)})}class Qo extends it{constructor(){super(...arguments),Of.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return _e(t,{expected:mt.joinValues(r),received:t.parsedType,code:ge.invalid_type}),Ge}if(av(this,Of)||OO(this,Of,new Set(this._def.values)),!av(this,Of).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return _e(t,{received:t.data,code:ge.invalid_enum_value,options:r}),Ge}return rr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qo.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Of=new WeakMap;Qo.create=NO;class nh extends it{constructor(){super(...arguments),Af.set(this,void 0)}_parse(e){const t=mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Re.string&&r.parsedType!==Re.number){const a=mt.objectValues(t);return _e(r,{expected:mt.joinValues(a),received:r.parsedType,code:ge.invalid_type}),Ge}if(av(this,Af)||OO(this,Af,new Set(mt.getValidEnumValues(this._def.values))),!av(this,Af).has(e.data)){const a=mt.objectValues(t);return _e(r,{received:r.data,code:ge.invalid_enum_value,options:a}),Ge}return rr(e.data)}get enum(){return this._def.values}}Af=new WeakMap;nh.create=(n,e)=>new nh({values:n,typeName:He.ZodNativeEnum,...et(e)});class Kl extends it{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.promise&&t.common.async===!1)return _e(t,{code:ge.invalid_type,expected:Re.promise,received:t.parsedType}),Ge;const r=t.parsedType===Re.promise?t.data:Promise.resolve(t.data);return rr(r.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Kl.create=(n,e)=>new Kl({type:n,typeName:He.ZodPromise,...et(e)});class xa extends it{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{_e(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async u=>{if(t.value==="aborted")return Ge;const c=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return c.status==="aborted"?Ge:c.status==="dirty"||t.value==="dirty"?cl(c.value):c});{if(t.value==="aborted")return Ge;const u=this._def.schema._parseSync({data:o,path:r.path,parent:r});return u.status==="aborted"?Ge:u.status==="dirty"||t.value==="dirty"?cl(u.value):u}}if(a.type==="refinement"){const o=u=>{const c=a.refinement(u,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?Ge:(u.status==="dirty"&&t.dirty(),o(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?Ge:(u.status==="dirty"&&t.dirty(),o(u.value).then(()=>({status:t.value,value:u.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Js(o))return o;const u=a.transform(o.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Js(o)?Promise.resolve(a.transform(o.value,i)).then(u=>({status:t.value,value:u})):o);mt.assertNever(a)}}xa.create=(n,e,t)=>new xa({schema:n,typeName:He.ZodEffects,effect:e,...et(t)});xa.createWithPreprocess=(n,e,t)=>new xa({schema:e,effect:{type:"preprocess",transform:n},typeName:He.ZodEffects,...et(t)});class Ha extends it{_parse(e){return this._getType(e)===Re.undefined?rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ha.create=(n,e)=>new Ha({innerType:n,typeName:He.ZodOptional,...et(e)});class $o extends it{_parse(e){return this._getType(e)===Re.null?rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$o.create=(n,e)=>new $o({innerType:n,typeName:He.ZodNullable,...et(e)});class rh extends it{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}rh.create=(n,e)=>new rh({innerType:n,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...et(e)});class ah extends it{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Qf(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dr(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Dr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ah.create=(n,e)=>new ah({innerType:n,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...et(e)});class uv extends it{_parse(e){if(this._getType(e)!==Re.nan){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.nan,received:r.parsedType}),Ge}return{status:"valid",value:e.data}}}uv.create=n=>new uv({typeName:He.ZodNaN,...et(n)});const wP=Symbol("zod_brand");class Ox extends it{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ah extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ge:i.status==="dirty"?(t.dirty(),cl(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ge:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,t){return new Ah({in:e,out:t,typeName:He.ZodPipeline})}}class ih extends it{_parse(e){const t=this._def.innerType._parse(e),r=a=>(Js(a)&&(a.value=Object.freeze(a.value)),a);return Qf(t)?t.then(a=>r(a)):r(t)}unwrap(){return this._def.innerType}}ih.create=(n,e)=>new ih({innerType:n,typeName:He.ZodReadonly,...et(e)});function X2(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function IO(n,e={},t){return n?$l.create().superRefine((r,a)=>{var i,o;const u=n(r);if(u instanceof Promise)return u.then(c=>{var f,d;if(!c){const p=X2(e,r),v=(d=(f=p.fatal)!==null&&f!==void 0?f:t)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...p,fatal:v})}});if(!u){const c=X2(e,r),f=(o=(i=c.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...c,fatal:f})}}):$l.create()}const _P={object:Vt.lazycreate};var He;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(He||(He={}));const EP=(n,e={message:`Input not instance of ${n.name}`})=>IO(t=>t instanceof n,e),MO=da.create,FO=Ho.create,SP=uv.create,CP=Go.create,LO=$f.create,RP=eu.create,TP=iv.create,OP=Kf.create,AP=Xf.create,kP=$l.create,DP=Qs.create,NP=Pi.create,IP=ov.create,MP=ga.create,FP=Vt.create,LP=Vt.strictCreate,PP=Yf.create,BP=Hv.create,zP=Zf.create,UP=Ya.create,VP=Jf.create,jP=sv.create,qP=tu.create,WP=ml.create,HP=eh.create,GP=th.create,QP=Qo.create,$P=nh.create,KP=Kl.create,Y2=xa.create,XP=Ha.create,YP=$o.create,ZP=xa.createWithPreprocess,JP=Ah.create,eB=()=>MO().optional(),tB=()=>FO().optional(),nB=()=>LO().optional(),rB={string:n=>da.create({...n,coerce:!0}),number:n=>Ho.create({...n,coerce:!0}),boolean:n=>$f.create({...n,coerce:!0}),bigint:n=>Go.create({...n,coerce:!0}),date:n=>eu.create({...n,coerce:!0})},aB=Ge;var j9=Object.freeze({__proto__:null,defaultErrorMap:Ql,setErrorMap:ZL,getErrorMap:nv,makeIssue:rv,EMPTY_PATH:JL,addIssueToContext:_e,ParseStatus:Kn,INVALID:Ge,DIRTY:cl,OK:rr,isAborted:pb,isDirty:vb,isValid:Js,isAsync:Qf,get util(){return mt},get objectUtil(){return db},ZodParsedType:Re,getParsedType:ki,ZodType:it,datetimeRegex:DO,ZodString:da,ZodNumber:Ho,ZodBigInt:Go,ZodBoolean:$f,ZodDate:eu,ZodSymbol:iv,ZodUndefined:Kf,ZodNull:Xf,ZodAny:$l,ZodUnknown:Qs,ZodNever:Pi,ZodVoid:ov,ZodArray:ga,ZodObject:Vt,ZodUnion:Yf,ZodDiscriminatedUnion:Hv,ZodIntersection:Zf,ZodTuple:Ya,ZodRecord:Jf,ZodMap:sv,ZodSet:tu,ZodFunction:ml,ZodLazy:eh,ZodLiteral:th,ZodEnum:Qo,ZodNativeEnum:nh,ZodPromise:Kl,ZodEffects:xa,ZodTransformer:xa,ZodOptional:Ha,ZodNullable:$o,ZodDefault:rh,ZodCatch:ah,ZodNaN:uv,BRAND:wP,ZodBranded:Ox,ZodPipeline:Ah,ZodReadonly:ih,custom:IO,Schema:it,ZodSchema:it,late:_P,get ZodFirstPartyTypeKind(){return He},coerce:rB,any:kP,array:MP,bigint:CP,boolean:LO,date:RP,discriminatedUnion:BP,effect:Y2,enum:QP,function:WP,instanceof:EP,intersection:zP,lazy:HP,literal:GP,map:jP,nan:SP,nativeEnum:$P,never:NP,null:AP,nullable:YP,number:FO,object:FP,oboolean:nB,onumber:tB,optional:XP,ostring:eB,pipeline:JP,preprocess:ZP,promise:KP,record:VP,set:qP,strictObject:LP,string:MO,symbol:TP,transformer:Y2,tuple:UP,undefined:OP,union:PP,unknown:DP,void:IP,NEVER:aB,ZodIssueCode:ge,quotelessJson:YL,ZodError:Dr});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var PO=function(n,e){return(PO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])})(n,e)};function _a(n,e){function t(){this.constructor=n}PO(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ke(n,e,t,r){return new(t||(t=Promise))(function(a,i){function o(f){try{c(r.next(f))}catch(d){i(d)}}function u(f){try{c(r.throw(f))}catch(d){i(d)}}function c(f){f.done?a(f.value):new t(function(d){d(f.value)}).then(o,u)}c((r=r.apply(n,[])).next())})}function De(n,e){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(c){return function(f){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&d[0]?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,r=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=e.call(n,o)}catch(p){d=[6,p],r=0}finally{t=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,f])}}}var iB=function(){function n(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},n.prototype.registerFlag=function(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){var a=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+a+"."),this.set(e,a)}},n.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},n.prototype.getNumber=function(e){return this.get(e)},n.prototype.getBool=function(e){return this.get(e)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},n.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},n.prototype.setFlags=function(e){this.flags=Object.assign({},e)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,a=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return oB(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),u=o[0],c=o[1];e.urlFlags[u]=function(f,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+f+".")}(u,c)})}},n}();function oB(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function ue(){return BO}var BO=null,lv=new Map,gb=new Map;function zO(n,e){var t=VO(n,e);return lv.get(t)}function sB(n){return gb.get(n)}function Z2(n){for(var e=lv.entries(),t=[];;){var r=e.next(),a=r.done,i=r.value;if(a)break;var o=i[0],u=i[1];o.split("_")[0]===n&&t.push(u)}return t}function UO(n){var e=n.kernelName,t=n.backendName,r=VO(e,t);if(lv.has(r))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");lv.set(r,n)}function uB(n){var e=n.kernelName;gb.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),gb.set(e,n)}function VO(n,e){return e+"_"+n}function yb(n,e,t){return Math.max(n,Math.min(e,t))}function jO(n){return n%2==0?n:n+1}function lB(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e}function P(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Ot(n,e,t){t===void 0&&(t=""),P(On(n,e),function(){return t+" Shapes "+n+" and "+e+" must match"})}function uc(n){P(n!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Xl(n,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(n)||Ga(n)&&!t)for(var r=0;r<n.length;++r)Xl(n[r],e,t);else e.push(n);return e}function Ie(n){if(n.length===0)return 1;for(var e=n[0],t=1;t<n.length;t++)e*=n[t];return e}function On(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function en(n){return n%1==0}function cB(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var e=Math.exp(2*n);return(e-1)/(e+1)}function bb(n){var e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function gl(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function J2(n,e,t){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,a){var i=0,o=function(){if(n())r();else{i++;var u=e(i);t!=null&&i>=t?a():setTimeout(o,u)}};o()})}function fB(n,e){for(var t=1,r=-1,a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(n[a]<0)throw Error("Shapes can not be < 0. Found "+n[a]+" at dim "+a);if(r===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+n);return n}if(t===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var i=n.slice();return i[r]=e/t,i}function yn(n,e){var t=e.length;return P((n=n==null?e.map(function(r,a){return a}):[].concat(n)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+n}),P(n.every(function(r){return en(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?t+r:r})}function ks(n,e){for(var t=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:yn(e,n).sort(),o=0,u=0;u<n.length;++u){if(i!=null){if(i[o]===u&&n[u]!==1)throw new Error("Can't squeeze axis "+u+" since its dim '"+n[u]+"' is not 1");(i[o]==null||i[o]>u)&&n[u]===1&&(t.push(n[u]),r.push(u)),i[o]<=u&&o++}n[u]!==1&&(t.push(n[u]),r.push(u))}return{newShape:t,keptDims:r}}function oh(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);t=new Uint8Array(e)}return t}function cv(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else{if(n!=="string")throw new Error("Unknown data type "+n);t=new Array(e)}return t}function hB(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function dB(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function pB(n,e){return e!=="complex64"&&(e!=="float32"||n==="complex64")&&(e!=="int32"||n==="float32"||n==="complex64")&&(e!=="bool"||n!=="bool")}function Ga(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function qO(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function vB(n){if(n==null)return 0;var e=0;return n.forEach(function(t){return e+=t.length}),e}function Ax(n){return typeof n=="string"||n instanceof String}function mB(n){return typeof n=="boolean"}function gB(n){return typeof n=="number"}function kh(n){return Array.isArray(n)?kh(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":gB(n)?"float32":Ax(n)?"string":mB(n)?"bool":"float32"}function xb(n){return!!(n&&n.constructor&&n.call&&n.apply)}function wb(n,e){for(var t=e;t<n;++t)if(n%t==0)return t;return n}function Qa(n){var e=n.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=n[e-1];for(var r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function WO(n,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Xl(n)),t&&hB(n,e),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){for(var r=new Uint8Array(n.length),a=0;a<r.length;++a)Math.round(n[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+e)}function eC(n,e){if(n.length===0)return e[0];var t=n.reduce(function(r,a){return r*a});if(t===0)return[];if(t!==e.length)throw new Error("["+n+"] does not match the input size.");return function r(a,i,o){var u=new Array;if(i.length===1)for(var c=i[0],f=0;f<c;f++)u[f]=o[a+f];else{c=i[0];var d=i.slice(1),p=d.reduce(function(v,g){return v*g});for(f=0;f<c;f++)u[f]=r(a+f*p,d,o)}return u}(0,n,e)}function HO(n,e){for(var t=Dh(n,e),r=0;r<t.length;r++)t[r]=1;return t}function Dh(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+e)}function za(){return ue().platform.now()}function GO(n){n.forEach(function(e){P(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function yB(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ue().platform.encode(n,e)}function fv(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ue().platform.decode(n,e)}function tC(n,e,t){if(e===0)return 0;if(e===1)return n[0];for(var r=n[n.length-1],a=0;a<n.length-1;++a)r+=t[a]*n[a];return r}function bB(n,e,t){if(e===0)return[];if(e===1)return[n];for(var r=new Array(e),a=0;a<r.length-1;++a)r[a]=Math.floor(n/t[a]),n-=r[a]*t[a];return r[r.length-1]=n,r}var xB=function(){function n(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new wB)}return n.prototype.profileKernel=function(e,t,r){var a,i=this,o=this.backendTimer.time(function(){a=r()});return a.forEach(function(u){u.data().then(function(c){(function(f,d,p){if(d!=="float32")return!1;for(var v=0;v<f.length;v++){var g=f[v];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+p+"'"),!0}})(c,u.dtype,e),o.then(function(f){var d="";f.getExtraProfileInfo!=null&&(d=f.getExtraProfileInfo()),i.logger.logKernelProfile(e,u,c,f.kernelMs,t,d)})})}),a},n}(),wB=function(){function n(){}return n.prototype.logKernelProfile=function(e,t,r,a,i,o){var u=typeof a=="number"?gl(a+"ms",9):a.error,c=gl(e,25),f=t.rank,d=t.size,p=gl(t.shape.toString(),14),v="";for(var g in i){var y=i[g].shape||t.shape,x=y.length;v+=g+": "+x+"D "+(x>0?y:"")+" "}console.log("%c"+c+"	%c"+u+"	%c"+f+"D "+p+"	%c"+d+"	%c"+v+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}(),nC=20,gf=3,Gy=7;function _B(n,e,t,r){var a=Qa(e),i=function(f,d,p,v){var g=Ie(d),y=v[v.length-1],x=new Array(y).fill(0),w=d.length,_=p==="complex64"?bf(f):f;if(w>1)for(var S=0;S<g/y;S++)for(var C=S*y,R=0;R<y;R++)x[R]=Math.max(x[R],yf(_[C+R],0,p).length);return x}(n,e,t,a),o=e.length,u=function f(d,p,v,g,y,x){x===void 0&&(x=!0);var w=v==="complex64"?2:1,_=p[0],S=p.length;if(S===0)return v==="complex64"?[yf(bf(d)[0],0,v)]:v==="bool"?[QO(d[0])]:[d[0].toString()];if(S===1){if(_>nC){var C=gf*w,R=Array.from(d.slice(0,C)),T=Array.from(d.slice((_-gf)*w,_*w));return v==="complex64"&&(R=bf(R),T=bf(T)),["["+R.map(function(re,q){return yf(re,y[q],v)}).join(", ")+", ..., "+T.map(function(re,q){return yf(re,y[_-gf+q],v)}).join(", ")+"]"]}return["["+(v==="complex64"?bf(d):Array.from(d)).map(function(re,q){return yf(re,y[q],v)}).join(", ")+"]"]}var O=p.slice(1),D=g.slice(1),N=g[0]*w,k=[];if(_>nC){for(var I=0;I<gf;I++){var B=(U=I*N)+N;k.push.apply(k,f(d.slice(U,B),O,v,D,y,!1))}for(k.push("..."),I=_-gf;I<_;I++)B=(U=I*N)+N,k.push.apply(k,f(d.slice(U,B),O,v,D,y,I===_-1))}else for(I=0;I<_;I++){var U;B=(U=I*N)+N,k.push.apply(k,f(d.slice(U,B),O,v,D,y,I===_-1))}var ee=S===2?",":"";for(k[0]="["+k[0]+ee,I=1;I<k.length-1;I++)k[I]=" "+k[I]+ee;var te=`,
`;for(I=2;I<S;I++)te+=`
`;return k[k.length-1]=" "+k[k.length-1]+"]"+(x?"":te),k}(n,e,t,a,i),c=["Tensor"];return r&&(c.push("  dtype: "+t),c.push("  rank: "+o),c.push("  shape: ["+e+"]"),c.push("  values:")),c.push(u.map(function(f){return"    "+f}).join(`
`)),c.join(`
`)}function yf(n,e,t){return gl(Array.isArray(n)?parseFloat(n[0].toFixed(Gy))+" + "+parseFloat(n[1].toFixed(Gy))+"j":Ax(n)?"'"+n+"'":t==="bool"?QO(n):parseFloat(n.toFixed(Gy)).toString(),e)}function QO(n){return n===0?"false":"true"}function bf(n){for(var e=[],t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}var sh=function(){function n(e,t,r){var a=this;if(this.dtype=t,this.shape=e.slice(),this.size=Ie(e),r!=null){var i=r.length;P(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||cv(t,this.size),this.strides=Qa(e)}return n.prototype.set=function(e){for(var t=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),P(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var i=this.locToIndex(r);this.values[i]=e},n.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var r=0,a=0,i=e;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var u="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(u)}r++}for(var c=e[e.length-1],f=0;f<e.length-1;++f)c+=this.strides[f]*e[f];return this.values[c]},n.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},n.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return Va().makeTensor(this.values,this.shape,this.dtype)},n}(),Va=null,oe=null,$O=null,jt=function(){function n(e,t,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Ie(e),this.strides=Qa(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},n.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},n.prototype.as4D=function(e,t,r,a){return this.throwIfDisposed(),this.reshape([e,t,r,a])},n.prototype.as5D=function(e,t,r,a,i){return this.throwIfDisposed(),this.reshape([e,t,r,a,i])},n.prototype.asType=function(e){return this.throwIfDisposed(),oe.cast(this,e)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,oe.buffer(this.shape,this.dtype,e)]}})})},n.prototype.bufferSync=function(){return oe.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,eC(this.shape,e)]}})})},n.prototype.arraySync=function(){return eC(this.shape,this.dataSync())},n.prototype.data=function(){return ke(this,void 0,void 0,function(){var e,t;return De(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Va().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=r.sent();try{return[2,t.map(function(a){return fv(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var e=Va().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(t){return fv(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},n.prototype.bytes=function(){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Va().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(Va().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(e){return e===void 0&&(e=!1),oe.print(this,e)},n.prototype.reshape=function(e){return this.throwIfDisposed(),oe.reshape(this,e)},n.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},n.prototype.expandDims=function(e){return e===void 0&&(e=0),oe.expandDims(this,e)},n.prototype.cumsum=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1),oe.cumsum(this,e,t,r)},n.prototype.squeeze=function(e){return this.throwIfDisposed(),oe.squeeze(this,e)},n.prototype.clone=function(){return this.throwIfDisposed(),oe.clone(this)},n.prototype.oneHot=function(e,t,r){return this.throwIfDisposed(),oe.oneHot(this,e,t,r)},n.prototype.toString=function(e){return e===void 0&&(e=!1),_B(this.dataSync(),this.shape,this.dtype,e)},n.prototype.tile=function(e){return this.throwIfDisposed(),oe.tile(this,e)},n.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),oe.gather(this,e,t)},n.prototype.matMul=function(e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),oe.matMul(this,e,t,r)},n.prototype.dot=function(e){return this.throwIfDisposed(),oe.dot(this,e)},n.prototype.norm=function(e,t,r){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),oe.norm(this,e,t,r)},n.prototype.slice=function(e,t){return this.throwIfDisposed(),oe.slice(this,e,t)},n.prototype.reverse=function(e){return this.throwIfDisposed(),oe.reverse(this,e)},n.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof n&&(e=[e]),oe.concat([this].concat(e),t)},n.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),oe.split(this,e,t)},n.prototype.stack=function(e,t){return t===void 0&&(t=0),oe.stack([this,e],t)},n.prototype.unstack=function(e){return e===void 0&&(e=0),oe.unstack(this,e)},n.prototype.pad=function(e,t){return t===void 0&&(t=0),oe.pad(this,e,t)},n.prototype.batchNormalization=function(e,t,r,a,i){return r===void 0&&(r=.001),$O("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,a,r)},n.prototype.batchNorm=function(e,t,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),oe.batchNorm(this,e,t,r,a,i)},n.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.all(this,e,t)},n.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.any(this,e,t)},n.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.logSumExp(this,e,t)},n.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.sum(this,e,t)},n.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.prod(this,e,t)},n.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.mean(this,e,t)},n.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.min(this,e,t)},n.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.max(this,e,t)},n.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),oe.argMin(this,e)},n.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),oe.argMax(this,e)},n.prototype.cast=function(e){return this.throwIfDisposed(),oe.cast(this,e)},n.prototype.add=function(e){return this.throwIfDisposed(),oe.add(this,e)},n.prototype.addStrict=function(e){return this.throwIfDisposed(),oe.addStrict(this,e)},n.prototype.atan2=function(e){return this.throwIfDisposed(),oe.atan2(this,e)},n.prototype.sub=function(e){return this.throwIfDisposed(),oe.sub(this,e)},n.prototype.subStrict=function(e){return this.throwIfDisposed(),oe.subStrict(this,e)},n.prototype.pow=function(e){return this.throwIfDisposed(),oe.pow(this,e)},n.prototype.powStrict=function(e){return this.throwIfDisposed(),oe.powStrict(this,e)},n.prototype.mul=function(e){return this.throwIfDisposed(),oe.mul(this,e)},n.prototype.mulStrict=function(e){return this.throwIfDisposed(),oe.mulStrict(this,e)},n.prototype.div=function(e){return this.throwIfDisposed(),oe.div(this,e)},n.prototype.divNoNan=function(e){return this.throwIfDisposed(),oe.divNoNan(this,e)},n.prototype.floorDiv=function(e){return this.throwIfDisposed(),oe.floorDiv(this,e)},n.prototype.divStrict=function(e){return this.throwIfDisposed(),oe.divStrict(this,e)},n.prototype.minimum=function(e){return this.throwIfDisposed(),oe.minimum(this,e)},n.prototype.minimumStrict=function(e){return this.throwIfDisposed(),oe.minimumStrict(this,e)},n.prototype.maximum=function(e){return this.throwIfDisposed(),oe.maximum(this,e)},n.prototype.maximumStrict=function(e){return this.throwIfDisposed(),oe.maximumStrict(this,e)},n.prototype.mod=function(e){return this.throwIfDisposed(),oe.mod(this,e)},n.prototype.modStrict=function(e){return this.throwIfDisposed(),oe.modStrict(this,e)},n.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),oe.squaredDifferenceStrict(this,e)},n.prototype.transpose=function(e){return this.throwIfDisposed(),oe.transpose(this,e)},n.prototype.notEqual=function(e){return this.throwIfDisposed(),oe.notEqual(this,e)},n.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),oe.notEqualStrict(this,e)},n.prototype.less=function(e){return this.throwIfDisposed(),oe.less(this,e)},n.prototype.lessStrict=function(e){return this.throwIfDisposed(),oe.lessStrict(this,e)},n.prototype.equal=function(e){return this.throwIfDisposed(),oe.equal(this,e)},n.prototype.equalStrict=function(e){return this.throwIfDisposed(),oe.equalStrict(this,e)},n.prototype.lessEqual=function(e){return this.throwIfDisposed(),oe.lessEqual(this,e)},n.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),oe.lessEqualStrict(this,e)},n.prototype.greater=function(e){return this.throwIfDisposed(),oe.greater(this,e)},n.prototype.greaterStrict=function(e){return this.throwIfDisposed(),oe.greaterStrict(this,e)},n.prototype.greaterEqual=function(e){return this.throwIfDisposed(),oe.greaterEqual(this,e)},n.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),oe.greaterEqualStrict(this,e)},n.prototype.logicalAnd=function(e){return this.throwIfDisposed(),oe.logicalAnd(this,e)},n.prototype.logicalOr=function(e){return this.throwIfDisposed(),oe.logicalOr(this,e)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),oe.logicalNot(this)},n.prototype.logicalXor=function(e){return this.throwIfDisposed(),oe.logicalXor(this,e)},n.prototype.where=function(e,t){return this.throwIfDisposed(),oe.where(e,this,t)},n.prototype.neg=function(){return this.throwIfDisposed(),oe.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),oe.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),oe.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),oe.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),oe.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),oe.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),oe.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),oe.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),oe.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),oe.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),oe.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),oe.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),oe.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),oe.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),oe.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),oe.abs(this)},n.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),oe.clipByValue(this,e,t)},n.prototype.relu=function(){return this.throwIfDisposed(),oe.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),oe.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),oe.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),oe.selu(this)},n.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),oe.leakyRelu(this,e)},n.prototype.prelu=function(e){return this.throwIfDisposed(),oe.prelu(this,e)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),oe.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),oe.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),oe.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),oe.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),oe.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),oe.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),oe.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),oe.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),oe.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),oe.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),oe.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),oe.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),oe.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),oe.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),oe.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),oe.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),oe.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),oe.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),oe.round(this)},n.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),oe.step(this,e)},n.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),oe.softmax(this,e)},n.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),oe.logSoftmax(this,e)},n.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),oe.image.resizeBilinear(this,e,t)},n.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),oe.image.resizeNearestNeighbor(this,e,t)},n.prototype.conv1d=function(e,t,r,a,i,o){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),oe.conv1d(this,e,t,r,a,i,o)},n.prototype.conv2d=function(e,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),oe.conv2d(this,e,t,r,a,i,o)},n.prototype.conv2dTranspose=function(e,t,r,a,i){return this.throwIfDisposed(),oe.conv2dTranspose(this,e,t,r,a,i)},n.prototype.depthwiseConv2D=function(e,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),oe.depthwiseConv2d(this,e,t,r,a,i,o)},n.prototype.separableConv2d=function(e,t,r,a,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),oe.separableConv2d(this,e,t,r,a,i,o)},n.prototype.avgPool=function(e,t,r,a){return this.throwIfDisposed(),oe.avgPool(this,e,t,r,a)},n.prototype.maxPool=function(e,t,r,a){return this.throwIfDisposed(),oe.maxPool(this,e,t,r,a)},n.prototype.localResponseNormalization=function(e,t,r,a){return e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5),oe.localResponseNormalization(this,e,t,r,a)},n.prototype.pool=function(e,t,r,a,i){return this.throwIfDisposed(),oe.pool(this,e,t,r,a,i)},n.prototype.variable=function(e,t,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Va().makeVariable(this,e,t,r)},n.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),oe.unsortedSegmentSum(this,e,t)},n.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),oe.batchToSpaceND(this,e,t)},n.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),oe.spaceToBatchND(this,e,t)},n.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),oe.topk(this,e,t)},n.prototype.stridedSlice=function(e,t,r,a,i,o,u,c){return a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),this.throwIfDisposed(),oe.stridedSlice(this,e,t,r,a,i,o,u,c)},n.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),oe.depthToSpace(this,e,t)},n.prototype.fft=function(){return this.throwIfDisposed(),oe.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),oe.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),oe.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),oe.spectral.irfft(this)},n}();Object.defineProperty(jt,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var rC,_b,Eb,Sb,Cb,Yl=function(n){function e(t,r,a,i){var o=n.call(this,t.shape,t.dtype,t.dataId,i)||this;return o.trainable=r,o.name=a,o}return _a(e,n),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!On(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");Va().disposeTensor(this),this.dataId=t.dataId,Va().incRef(this,null)},e.prototype.dispose=function(){Va().disposeVariable(this),this.isDisposedInternal=!0},e}(jt);Object.defineProperty(Yl,Symbol.hasInstance,{value:function(n){return n instanceof jt&&n.assign!=null&&n.assign instanceof Function}}),function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"}(rC||(rC={})),function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(_b||(_b={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(Eb||(Eb={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(Sb||(Sb={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(Cb||(Cb={}));var EB={float32:Sb,int32:_b,bool:Eb,complex64:Cb};function Bn(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error("Can not upcast "+n+" with "+e)}return EB[n][e]}function Qy(n){return Bn(n,"int32")}function Ht(n,e){if(n.dtype===e.dtype)return[n,e];var t=Bn(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function SB(n,e){P(n.dtype===e.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+e.dtype+") input must match"})}function KO(n){var e=[];return function t(r,a,i){if(r!=null){if(r instanceof jt)return void a.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,u=r;for(var c in u){var f=u[c];i.has(f)||(i.add(f),t(f,a,i))}}}}(n,e,new Set),e}var $y,aC=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},n}(),CB=function(){function n(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new aC}return n.prototype.ready=function(){return ke(this,void 0,void 0,function(){var e,t,r;return De(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,a.label=1;case 1:return t<e.length?(r=e[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},n.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},n.prototype.registerBackend=function(e,t,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:r},!0)},n.prototype.setBackend=function(e){return ke(this,void 0,void 0,function(){var t,r,a;return De(this,function(i){switch(i.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new xB(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var e=this;Z2(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)})},n.prototype.disposeRegisteredKernels=function(e){var t=this;Z2(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[e])})},n.prototype.initializeBackend=function(e){var t=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,o=a.then(function(u){return!(i<t.pendingBackendInitId)&&(t.registry[e]=u,t.pendingBackendInit=null,!0)}).catch(function(u){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(u.stack||u.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=a,{success:!0,asyncInit:!1}}catch(u){return console.warn("Initialization of backend "+e+" failed"),console.warn(u.stack||u.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return e.registryFactory[r].priority-e.registryFactory[t].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var r=e[t],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(e,t){var r=this.state.tensorInfo.get(t),a=r.backend,i=this.readSync(t);a.disposeData(t),r.backend=e,e.move(t,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(e,t){var r,a=this,i=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return a.startScope(i)},function(){return a.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(e,t,r){e();try{var a=r();return t(),a}catch(i){throw t(),i}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],function(a){return{x:function(){return a.toFloat()}}},[]),t},n.prototype.runKernel=function(e,t,r,a,i){return this.runKernelFunc(null,t,null,e,r,a,i)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(e,t,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=a-t-i-o;if(u>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+u+" data ids) after running '"+e+"'")},n.prototype.runKernelFunc=function(e,t,r,a,i,o,u){var c,f=this;o===void 0&&(o=[]),u===void 0&&(u=[]);var d=[],p=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var v,g=function(S){p&&(d=S.map(function(C){return f.keep(f.clone(C))}))},y=this.state.numBytes,x=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,_=zO(a,this.backendName);return v=_!=null?function(){var S=f.backend.numDataIds();w=_.kernelFunc({inputs:t,attrs:i,backend:f.backend});var C=Array.isArray(w)?w:[w];f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,S,C);var R=C.map(function(O){var D=O.dataId,N=O.shape,k=O.dtype;return f.makeTensorFromDataId(D,N,k)}),T=R.filter(function(O,D){return u[D]});return g((o||[]).slice().concat(T)),R}:function(){var S=f.backend.numDataIds();w=f.tidy(function(){return e(f.backend,g)});var C=Array.isArray(w)?w:[w];return f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,S,C),C},this.scopedRun(function(){return f.state.kernelDepth++},function(){return f.state.kernelDepth--},function(){c=f.ENV.getBool("DEBUG")?f.profiler.profileKernel(a,t,function(){return v()}):v()}),p&&this.addTapeNode(a,t,c,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-x,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(S){return t[S].shape}),outputShapes:c.map(function(S){return S.shape})}),Array.isArray(w)?c:c[0]},n.prototype.makeTensor=function(e,t,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=e;r==="string"&&Ax(e[0])&&(i=e.map(function(d){return yB(d)}));var o=a.write(i,t,r),u=new jt(t,r,o,this.nextTensorId());if(this.incRef(u,a),r==="string"){var c=this.state.tensorInfo.get(o),f=vB(i);this.state.numBytes+=f-c.bytes,c.bytes=f}return u},n.prototype.makeTensorFromDataId=function(e,t,r,a){var i=new jt(t,r=r||"float32",e,this.nextTensorId());return this.incRef(i,a),i},n.prototype.makeVariable=function(e,t,r,a){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.asType(a));var i=new Yl(e,t,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},n.prototype.incRef=function(e,t){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(a=e.size*qO(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Yl||this.track(e)},n.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},n.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},n.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},n.prototype.profile=function(e){return ke(this,void 0,void 0,function(){var t,r;return De(this,function(a){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(e,t,r,a,i){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:i},c=sB(e);c!=null&&(a=c.gradFunc),a!=null&&(u.gradient=function(f){return f=f.map(function(d,p){if(d==null){var v=r[p],g=Dh(v.size,v.dtype);return o.makeTensor(g,v.shape,v.dtype)}return d}),a(f.length>1?f:f[0],i)}),this.state.activeTape.push(u)},n.prototype.keep=function(e){return e.kept=!0,e},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},n.prototype.endScope=function(e){for(var t=this,r=KO(e),a=new Set(r.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||a.has(o.id)||o.dispose()}var u=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(c){c.kept||c.scopeId!==u.id||t.track(c)})},n.prototype.gradients=function(e,t,r,a){var i=this;if(a===void 0&&(a=!1),P(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)});P(o instanceof jt,function(){return"The result y returned by f() must be a tensor."});var u=function(c,f,d){for(var p={},v={},g=0;g<f.length;g++)p[f[g].id]=!0;for(g=0;g<c.length;g++){var y=(O=c[g]).inputs;for(var x in y){for(var w=y[x],_=!1,S=0;S<f.length;S++)if(p[w.id]){O.outputs.forEach(function(I){return p[I.id]=!0}),_=!0,v[O.id]=!0;break}if(_)break}}var C={};C[d.id]=!0;var R={};for(g=c.length-1;g>=0;g--)for(y=(O=c[g]).inputs,S=0;S<O.outputs.length;S++)if(C[O.outputs[S].id]){for(var x in y)C[y[x].id]=!0,R[O.id]=!0;break}var T=[];for(g=0;g<c.length;g++){var O;if(v[(O=c[g]).id]&&R[O.id]){var D={};for(var x in O.inputs){var N=O.inputs[x];p[N.id]&&(D[x]=N)}var k=Object.assign({},O);k.inputs=D,k.outputs=O.outputs,T.push(k)}}return T}(this.state.activeTape,t,o);if(!a&&u.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,f,d={};d[o.id]=r??(c=o.shape,f=HO(Ie(c),"float32"),W.makeTensor(f,c,"float32")),function(v,g,y){for(var x=function(_){var S=g[_],C=[];if(S.outputs.forEach(function(D){var N=v[D.id];N!=null?C.push(N):C.push(null)}),S.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+S.kernelName+".");var R=S.gradient(C),T=function(D){if(!(D in R))throw new Error("Cannot backprop through input "+D+". Available gradients found: "+Object.keys(R)+".");var N=y(function(){return R[D]()});if(N.dtype!=="float32")throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input "+D+" must have 'float32' dtype, but has '"+N.dtype+"'");var k=S.inputs[D];if(!On(N.shape,k.shape))throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input '"+D+"' has shape '"+N.shape+"', which does not match the shape of the input '"+k.shape+"'");if(v[k.id]==null)v[k.id]=N;else{var I=v[k.id];v[k.id]=I.add(N),I.dispose()}};for(var O in S.inputs)T(O)},w=g.length-1;w>=0;w--)x(w)}(d,u,function(v){return i.tidy(v)});var p=t.map(function(v){return d[v.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(v){for(var g=0,y=v.saved;g<y.length;g++)y[g].dispose()}),i.state.activeTape=null),{value:o,grads:p}})},n.prototype.customGrad=function(e){var t=this;return P(xb(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];P(a.every(function(u){return u instanceof jt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return a.forEach(function(u,c){o[c]=u}),t.runKernelFunc(function(u,c){return P((r=e.apply(void 0,a.concat([c]))).value instanceof jt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),P(xb(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(u,c){var f=r.gradFunc(u,c),d=Array.isArray(f)?f:[f];P(d.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),P(d.every(function(v){return v instanceof jt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return d.forEach(function(v,g){p[g]=function(){return v}}),p})}},n.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},n.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},n.prototype.time=function(e){return ke(this,void 0,void 0,function(){var t,r;return De(this,function(a){switch(a.label){case 0:return t=za(),[4,this.backend.time(e)];case 1:return(r=a.sent()).wallMs=za()-t,[2,r]}})})},n.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new aC,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),W=function(){var n=function(){if($y==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}$y=t}return $y}();if(n._tfengine==null){var e=new iB(n);n._tfengine=new CB(e)}return function(t){BO=t}(n._tfengine.ENV),Va=function(){return n._tfengine},n._tfengine}();function XO(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ci=ue();Ci.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ci.registerFlag("IS_BROWSER",function(){return XO()}),Ci.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ci.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ci.registerFlag("PROD",function(){return!1}),Ci.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ci.getBool("DEBUG")}),Ci.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ci.registerFlag("IS_TEST",function(){return!1});var uh,Or,Tr,Ts={},Ky={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function RB(n,e){Ts[n]=e}function ri(n){n in Ts||(Ts[n]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete Ts[t]},!1),t===1?r.getContext("webgl",Ky)||r.getContext("experimental-webgl",Ky):r.getContext("webgl2",Ky)}(n));var e=Ts[n];return e.isContextLost()?(delete Ts[n],ri(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Ts[n])}function Gv(n,e){return[e,n]}function Ff(n){var e=Ie(n);return bb(Math.ceil(e/4))}function Nh(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function kx(n,e){var t,r,a,i,o,u,c,f,d,p=n;return ue().getNumber("WEBGL_VERSION")===2?(t=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,u=4,c=1,f=p.HALF_FLOAT,d=p.FLOAT):(t=n.RGBA,r=n.RGBA,a=n.RGBA,i=p.RGBA,o=n.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=n.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}function Fe(n,e,t){var r=t();return e&&function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+kB(a,i))}(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(uh||(uh={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(Or||(Or={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Tr||(Tr={}));var TB=596e-10,OB=65504;function AB(n){return!!(ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||TB<Math.abs(n)&&Math.abs(n)<OB)}function kB(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function up(n,e,t){return Vi(n,e,function(){return n.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function DB(n,e,t){var r=Vi(n,e,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Fe(n,e,function(){return n.shaderSource(r,t)}),Fe(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function NB(n,e,t){var r=Vi(n,e,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Fe(n,e,function(){return n.shaderSource(r,t)}),Fe(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw function(a,i){var o=IB.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var u=+o[1],c=a.split(`
`),f=c.length.toString().length+2,d=c.map(function(w,_){return gl((_+1).toString(),f)+w}),p=0,v=0;v<d.length;v++)p=Math.max(d[v].length,p);var g=d.slice(0,u-1),y=d.slice(u-1,u),x=d.slice(u);console.log(g.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+gl(y[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(x.join(`
`))}(t,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Xy,Yy,IB=/ERROR: [0-9]+:([0-9]+):/g;function MB(n,e){return Vi(n,e,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function FB(n,e,t){if(Fe(n,e,function(){return n.linkProgram(t)}),n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Zy(n,e,t){if(Fe(n,e,function(){return n.validateProgram(t)}),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function LB(n,e,t){var r=Vi(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Fe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),Fe(n,e,function(){return n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function PB(n,e,t){var r=Vi(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Fe(n,e,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),Fe(n,e,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function BB(n,e){return Vi(n,e,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function zB(n,e){var t=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){var r="["+n+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t)throw r="["+n+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function UB(n,e){return Vi(n,e,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function iC(n,e,t,r,a,i,o,u){var c=n.getAttribLocation(t,r);return c!==-1&&(Fe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,a)}),Fe(n,e,function(){return n.vertexAttribPointer(c,i,n.FLOAT,!1,o,u)}),Fe(n,e,function(){return n.enableVertexAttribArray(c)}),!0)}function VB(n,e,t,r){GB(n,r),Fe(n,e,function(){return n.activeTexture(n.TEXTURE0+r)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)})}function jB(n,e,t,r){return Vi(n,e,function(){return n.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function qB(n,e,t){return n.getUniformLocation(e,t)}function WB(n,e,t,r,a,i){Fe(n,e,function(){return VB(n,e,r,i)}),Fe(n,e,function(){return n.uniform1i(a,i)})}function Jy(n,e,t,r){Fe(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),Fe(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)})}function oC(n,e,t){Fe(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,t)}),Fe(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function lp(n){var e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+HB(n,e))}function HB(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Vi(n,e,t,r){var a=Fe(n,e,function(){return t()});if(a==null)throw new Error(r);return a}function GB(n,e){var t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function hv(n,e){return e===void 0&&(e=2),Ie(n.slice(0,n.length-e))}function dv(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function e0(n){var e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[hv(n)].concat(dv(n))),e}function QB(n,e){var t;e===void 0&&(e=!1);var r=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(n=n.map(function(f,d){return d>=n.length-2?jO(n[d]):n[d]})).length===1&&(n=[2,n[0]])),n.length!==2){var a=ks(n);n=a.newShape}var i=Ie(n);if(n.length<=1&&i<=r)return[1,i];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(e){var o=hv(n),u=2,c=2;return n.length&&(u=(t=dv(n))[0],c=t[1]),bb(i=o*(u/2)*(c/2)).map(function(f){return 2*f})}return bb(i)}function cp(n){return n%2==0}function fp(n,e){if(On(n=n.slice(-2),e=e.slice(-2))||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){var t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||cp(t)&&cp(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&cp(n[0])&&cp(e[0])}function $B(n){if(Xy==null){var e=ri(n);Xy=e.getParameter(e.MAX_TEXTURE_SIZE)}return Xy}function KB(n){if(Yy==null){var e=ri(n);Yy=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Yy)}function XB(n){if(n===0)return 0;var e=ri(n);return Xr(e,"EXT_disjoint_timer_query_webgl2")&&n===2?2:Xr(e,"EXT_disjoint_timer_query")?1:0}function Xr(n,e){return n.getExtension(e)!=null}function sC(n){try{if(ri(n)!=null)return!0}catch{return!1}return!1}function YB(n){if(n===0)return!1;var e=ri(n);if(n===1){if(!Xr(e,"OES_texture_float"))return!1}else if(!Xr(e,"EXT_color_buffer_float"))return!1;return Rb(e)}function ZB(n){if(n===0)return!1;var e=ri(n);if(n!==1){if(Xr(e,"EXT_color_buffer_float"))return Rb(e);if(Xr(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return function(r,a){var i=kx(r,a),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var u=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,u),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(u),c}(e,t)}return!1}return!!Xr(e,"OES_texture_float")&&!!Xr(e,"WEBGL_color_buffer_float")&&Rb(e)}function Rb(n){var e=kx(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(r),a}function JB(n){return n===2&&ri(n).fenceSync!=null}var Qe=ue();function YO(n){ue().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Te(n,e){return W.tidy(n,e)}function vr(n){KO(n).forEach(function(e){return e.dispose()})}function ez(n){return W.keep(n)}function pv(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];ue().getBool("IS_TEST")||console.warn.apply(console,n)}function ts(n,e){var t=n;if(Ga(n))return e==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(t)||Ga(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&ue().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(i,o,u){if(u=u||[],!Array.isArray(i)&&!Ga(i))return void P(o.length===0,function(){return"Element arr["+u.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});P(o.length>0,function(){return"Element arr["+u.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),P(i.length===o[0],function(){return"Element arr["+u.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),f=0;f<i.length;++f)a(i[f],c,u.concat(f))}(n,r,[]),r}function uC(n,e,t,r){if(n!=null&&(n!=="numeric"&&n!==e||n==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+n+" tensor, but got "+e+" tensor")}function L(n,e,t,r){if(r===void 0&&(r="numeric"),n instanceof jt)return uC(r,n.dtype,e,t),n;var a=kh(n);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),uC(r,a,e,t),n==null||!Ga(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var i=n==null?"null":n.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=ts(n,a);Ga(n)||Array.isArray(n)||(n=[n]);var u=a!=="string"?WO(n,a,ue().getBool("DEBUG")):Xl(n,[],!0);return W.makeTensor(u,o,a)}function vv(n,e,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(a,i){return L(a,e+"["+i+"]",t)},r)}function ZO(n,e){for(var t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function tz(n,e,t){for(var r=n.length+e.length,a=[],i=0,o=0,u=0;u<r;u++)t.indexOf(u)===-1?a.push(n[i++]):a.push(e[o++]);return a}function Wn(n,e){for(var t=[],r=n.length,a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);return[t,e.map(function(i){return n[i]})]}function mr(n,e){return tz(n,e.map(function(t){return 1}),e)}function Rr(n,e,t){P(ZO(e,t),function(){return n+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."})}function ai(n,e){if(ZO(n,e))return null;for(var t=[],r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(function(a){return t.push(a)}),t}function Dx(n){return n.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function ii(n,e){for(var t=[],r=e-n;r<e;++r)t.push(r);return t}function nz(n,e){var t=n[0].length;n.forEach(function(a,i){P(a.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+t+")"})}),P(e>=0&&e<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=n[0];n.forEach(function(a,i){for(var o=0;o<t;o++)P(o===e||a[o]===r[o],function(){return"Error in concat"+t+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Zl(n,e){for(var t=n[0].slice(),r=1;r<n.length;r++)t[e]+=n[r][e];return t}function j(n){var e=Object.keys(n);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];W.startScope(t);try{var u=r.apply(void 0,i);return u instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),W.endScope(u),u}catch(c){throw W.endScope(null),c}};return Object.defineProperty(a,"name",{value:t,configurable:!0}),a}Qe.registerFlag("HAS_WEBGL",function(){return Qe.getNumber("WEBGL_VERSION")>0}),Qe.registerFlag("WEBGL_VERSION",function(){return sC(2)?2:sC(1)?1:0}),Qe.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Qe.get("WEBGL_VERSION")===2}),Qe.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Qe.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Qe.registerFlag("WEBGL_PACK",function(){return Qe.getBool("HAS_WEBGL")}),Qe.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_CLIP",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Qe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_REDUCE",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_CONV_IM2COL",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return $B(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return KB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=Qe.getNumber("WEBGL_VERSION");return n===0?0:XB(n)}),Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Qe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),Qe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return YB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Qe.getBool("WEBGL_FORCE_F16_TEXTURES")&&Qe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Qe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return ZB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return JB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Qe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),$O=YO;var Pn=j({complex_:function(n,e){var t=L(n,"real","complex"),r=L(e,"imag","complex");return Ot(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),W.runKernelFunc(function(a){return a.complex(t,r)},{$real:t,$imag:r})}}),Kr=j({real_:function(n){var e=L(n,"input","real");return W.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),ja=j({imag_:function(n){var e=L(n,"input","imag");return W.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function zn(n,e,t){return ns(n,e,ts(n,t),t)}function ns(n,e,t,r){if(r==null&&(r=kh(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ga(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){GO(e);var a=Ie(e),i=Ie(t);P(a===i,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+a+" values but has "+i});for(var o=0;o<t.length;++o){var u=t[o],c=o!==t.length-1||u!==Ie(e.slice(o));P(t[o]===e[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "})}}return Ga(n)||Array.isArray(n)||(n=[n]),e=e||t,n=r!=="string"?WO(n,r,ue().getBool("DEBUG")):Xl(n,[],!0),W.makeTensor(n,e,r)}function we(n,e){if((Ga(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ga(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ns(n,[],[],e)}function sn(n,e){uc(n);var t=ts(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ns(n,null,t,e)}function Uo(n,e,t){if(uc(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=ts(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ns(n,e,r,t)}function Nx(n,e,t){if(uc(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=ts(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ns(n,e,r,t)}function hr(n,e,t){if(uc(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=ts(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ns(n,e,r,t)}function rz(n,e,t){if(uc(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=ts(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ns(n,e,r,t)}function az(n,e,t){if(uc(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=ts(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ns(n,e=e||r,r,t)}function iz(n,e,t,r){return e===void 0&&(e=!0),W.makeVariable(n,e,t,r)}function lc(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=lc(n,"float32"),r=Bt(n,"float32");return Pn(t,r)}var a=HO(Ie(n),e);return W.makeTensor(a,n,e)}function Bt(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Bt(n,"float32"),r=Bt(n,"float32");return Pn(t,r)}var a=Dh(Ie(n),e);return W.makeTensor(a,n,e)}function $a(n,e,t){return W.runKernelFunc(function(r){return r.fill(n,e,t)},{})}function oz(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");return W.runKernelFunc(function(r){return r.linspace(n,e,t)},{})}function mv(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(n===e||n<e&&t<0||e<n&&t>1)return Bt([0],r);var a=Dh(Math.abs(Math.ceil((e-n)/t)),r);e<n&&t===1&&(t=-1),a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+t;return sn(a,r)}var JO=j({onesLike_:function(n){var e=L(n,"x","onesLike");if(e.dtype==="complex64"){var t=JO(Kr(e)),r=gt(ja(e));return Pn(t,r)}return W.runKernelFunc(function(a){return a.onesLike(e)},{$x:e},function(a,i){return{$x:function(){return gt(a)}}})}}),gt=j({zerosLike_:function(n){var e=L(n,"x","zerosLike");return W.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,r){return{$x:function(){return gt(t)}}})}}),pn=j({concat_:function(n,e){e===void 0&&(e=0),P(n.length>=1,function(){return"Pass at least one tensor to concat"});var t=vv(n,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(u){if(u.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+u.dtype+". ")}),e=yn(e,t[0].shape)[0];var r=Zl(t.map(function(u){return u.shape}),e);if(Ie(r)===0)return zn([],r);if((t=t.filter(function(u){return u.size>0})).length===1)return t[0];var a=t.map(function(u){return u.shape});nz(a,e);var i=t,o={axis:e};return W.runKernelFunc(function(u){return u.concat(t,e)},i,function(u){var c=a.map(function(f){return f[e]});return Ix(u,c,e).map(function(f){return function(){return f}})},"Concat",o)}}),sz=j({concat1d_:function(n){return pn(n,0)}}),uz=j({concat2d_:function(n,e){return pn(n,e)}}),lz=j({concat3d_:function(n,e){return pn(n,e)}}),cz=j({concat4d_:function(n,e){return pn(n,e)}}),Ix=j({split_:function(n,e,t){t===void 0&&(t=0);var r,a=L(n,"x","split");return t=yn(t,a.shape)[0],typeof e=="number"?(P(a.shape[t]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(a.shape[t]/e)):(P(a.shape[t]===e.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),W.runKernelFunc(function(i){return i.split(a,r,t)},{$x:a},function(i){return{$x:function(){return pn(i,t)}}})}});function ou(n,e){return n(e={exports:{}},e.exports),e.exports}var fz=ou(function(n){(function(e,t,r){function a(u){var c,f=this,d=(c=4022871197,function(p){p=p.toString();for(var v=0;v<p.length;v++){var g=.02519603282416938*(c+=p.charCodeAt(v));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});f.next=function(){var p=2091639*f.s0+23283064365386963e-26*f.c;return f.s0=f.s1,f.s1=f.s2,f.s2=p-(f.c=0|p)},f.c=1,f.s0=d(" "),f.s1=d(" "),f.s2=d(" "),f.s0-=d(u),f.s0<0&&(f.s0+=1),f.s1-=d(u),f.s1<0&&(f.s1+=1),f.s2-=d(u),f.s2<0&&(f.s2+=1),d=null}function i(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var f=new a(u),d=c&&c.state,p=f.next;return p.int32=function(){return 4294967296*f.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.alea=o})(0,n)}),hz=ou(function(n){(function(e,t,r){function a(u){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var p=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^p^p>>>8},u===(0|u)?c.x=u:f+=u;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor128=o})(0,n)}),dz=ou(function(n){(function(e,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^p^p<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,u===(0|u)?c.x=u:f+=u;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),d==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c.v=u.v,c.d=u.d,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorwow=o})(0,n)}),pz=ou(function(n){(function(e,t,r){function a(u){var c=this;c.next=function(){var f,d,p=c.x,v=c.i;return f=p[v],d=(f^=f>>>7)^f<<24,d^=(f=p[v+1&7])^f>>>10,d^=(f=p[v+3&7])^f>>>3,d^=(f=p[v+4&7])^f<<7,f=p[v+7&7],d^=(f^=f<<13)^f<<9,p[v]=d,c.i=v+1&7,d},function(f,d){var p,v=[];if(d===(0|d))v[0]=d;else for(d=""+d,p=0;p<d.length;++p)v[7&p]=v[7&p]<<15^d.charCodeAt(p)+v[p+1&7]<<13;for(;v.length<8;)v.push(0);for(p=0;p<8&&v[p]===0;++p);for(p==8?v[7]=-1:v[p],f.x=v,f.i=0,p=256;p>0;--p)f.next()}(c,u)}function i(u,c){return c.x=u.x.slice(),c.i=u.i,c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.x&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorshift7=o})(0,n)}),vz=ou(function(n){(function(e,t,r){function a(u){var c=this;c.next=function(){var f,d,p=c.w,v=c.X,g=c.i;return c.w=p=p+1640531527|0,d=v[g+34&127],f=v[g=g+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,d=v[g]=d^f,c.i=g,d+(p^p>>>16)|0},function(f,d){var p,v,g,y,x,w=[],_=128;for(d===(0|d)?(v=d,d=null):(d+="\0",v=0,_=Math.max(_,d.length)),g=0,y=-32;y<_;++y)d&&(v^=d.charCodeAt((y+32)%d.length)),y===0&&(x=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,y>=0&&(x=x+1640531527|0,g=(p=w[127&y]^=v+x)==0?g+1:0);for(g>=128&&(w[127&(d&&d.length||0)]=-1),g=127,y=512;y>0;--y)v=w[g+34&127],p=w[g=g+1&127],v^=v<<13,p^=p<<17,v^=v>>>15,p^=p>>>12,w[g]=v^p;f.w=x,f.X=w,f.i=g}(c,u)}function i(u,c){return c.i=u.i,c.w=u.w,c.X=u.X.slice(),c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.X&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor4096=o})(0,n)}),mz=ou(function(n){(function(e,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.b,v=c.c,g=c.d,y=c.a;return p=p<<25^p>>>7^v,v=v-g|0,g=g<<24^g>>>8^y,y=y-p|0,c.b=p=p<<20^p>>>12^v,c.c=v=v-g|0,c.d=g<<16^v>>>16^y,c.a=y-p|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,u===Math.floor(u)?(c.a=u/4294967296|0,c.b=0|u):f+=u;for(var d=0;d<f.length+20;d++)c.b^=0|f.charCodeAt(d),c.next()}function i(u,c){return c.a=u.a,c.b=u.b,c.c=u.c,c.d=u.d,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.tychei=o})(0,n)}),Os=ou(function(n){(function(e,t){var r,a=this,i=256,o=6,u="random",c=t.pow(i,o),f=t.pow(2,52),d=2*f,p=i-1;function v(_,S,C){var R=[],T=x(function N(k,I){var B,U=[],ee=typeof k;if(I&&ee=="object")for(B in k)try{U.push(N(k[B],I-1))}catch{}return U.length?U:ee=="string"?k:k+"\0"}((S=S==1?{entropy:!0}:S||{}).entropy?[_,w(e)]:_??function(){try{var N;return r&&(N=r.randomBytes)?N=N(i):(N=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(N)),w(N)}catch{var k=a.navigator,I=k&&k.plugins;return[+new Date,a,I,a.screen,w(e)]}}(),3),R),O=new g(R),D=function(){for(var N=O.g(o),k=c,I=0;N<f;)N=(N+I)*i,k*=i,I=O.g(1);for(;N>=d;)N/=2,k/=2,I>>>=1;return(N+I)/k};return D.int32=function(){return 0|O.g(4)},D.quick=function(){return O.g(4)/4294967296},D.double=D,x(w(O.S),e),(S.pass||C||function(N,k,I,B){return B&&(B.S&&y(B,O),N.state=function(){return y(O,{})}),I?(t[u]=N,k):N})(D,T,"global"in S?S.global:this==t,S.state)}function g(_){var S,C=_.length,R=this,T=0,O=R.i=R.j=0,D=R.S=[];for(C||(_=[C++]);T<i;)D[T]=T++;for(T=0;T<i;T++)D[T]=D[O=p&O+_[T%C]+(S=D[T])],D[O]=S;(R.g=function(N){for(var k,I=0,B=R.i,U=R.j,ee=R.S;N--;)k=ee[B=p&B+1],I=I*i+ee[p&(ee[B]=ee[U=p&U+k])+(ee[U]=k)];return R.i=B,R.j=U,I})(i)}function y(_,S){return S.i=_.i,S.j=_.j,S.S=_.S.slice(),S}function x(_,S){for(var C,R=_+"",T=0;T<R.length;)S[p&T]=p&(C^=19*S[p&T])+R.charCodeAt(T++);return w(S)}function w(_){return String.fromCharCode.apply(0,_)}if(t["seed"+u]=v,x(t.random(),e),n.exports){n.exports=v;try{r=require("crypto")}catch{}}})([],Math)});Os.alea=fz,Os.xor128=hz,Os.xorwow=dz,Os.xorshift7=pz,Os.xor4096=vz,Os.tychei=mz;var Qv=Os.alea,Mx=function(){function n(e,t,r,a,i){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Qv(o.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,r,a=!1;!a;){var i=void 0,o=void 0,u=void 0;do u=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(u>=1||u===0);var c=Math.sqrt(-2*Math.log(u)/u);t=this.mean+this.stdDev*i*c,r=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(t)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},n.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},n.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},n}(),gz=function(){function n(e,t,r,a){this.alpha=e,this.beta=1/t,this.dtype=r;var i=a||Math.random();this.randu=Qv(i.toString()),this.randn=new Mx(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var e,t,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,t=1-.331*(e=a*a)*e,r=.5*e+this.d*(1-o+Math.log(o)),(i=this.randu())<t||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},n.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},n}(),yz=function(){function n(e,t,r,a){var i=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Qv(a)}return n.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}();function Je(n,e,t){return e===void 0&&(e="float32"),e=e||"float32",GO(n),new sh(n,e,t)}function bz(n,e){e===void 0&&(e=!1),console.log(n.toString(e))}var eA=j({batchToSpaceND_:function(n,e,t){var r=L(n,"x","batchToSpaceND"),a=e.reduce(function(i,o){return i*o});return P(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),P(t.length===e.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length}),P(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+a}),W.runKernelFunc(function(i){return i.batchToSpaceND(r,e,t)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(e,t)}}})}}),xz=j({broadcastTo_:function(n,e){var t=L(n,"broadcastTo","x"),r=t.shape;if(e.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var a=t.shape.slice();a.length<e.length;)a.unshift(1);t=t.reshape(a)}for(var i=Array.from(e),o=e.length-1;o>=0;o--)if(t.shape[o]===e[o])i[o]=1;else if(t.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var u=i.map(function(c,f){return c>1?f:-1}).filter(function(c){return c>=0});return u.length===0?t.clone():W.runKernelFunc(function(c){return c.tile(t,i)},{input:t},function(c){return{input:function(){return c.sum(u,!0)}}})}}),wz=j({cast_:function(n,e){var t=L(n,"x","cast");if(!dB(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return W.runKernelFunc(function(a){return a.cast(t,e)},{x:t},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),_z=j({clone_:function(n){var e=L(n,"x","clone",null);return W.runKernelFunc(function(){return W.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),Ez=j({cumsum_:function(n,e,t,r){e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var a=L(n,"x","cumsum"),i=ai([e|=0],a.rank),o=a;i!=null&&(o=a.transpose(i));var u=ii(1,a.rank)[0],c=W.runKernelFunc(function(f){return f.cumsum(o,u,t,r)},{permutedX:o},function(f){return{permutedX:function(){return f.cumsum(e,t,!r)}}});return i!=null&&(c=c.transpose(i)),c}}),Sz=j({depthToSpace_:function(n,e,t){t===void 0&&(t="NHWC");var r=L(n,"x","depthToSpace"),a=t==="NHWC"?r.shape[1]:r.shape[2],i=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];return P(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),P(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+` for depthToSpace with input shape
          `+r.shape}),P(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),W.runKernelFunc(function(u){return u.depthToSpace(r,e,t)},{$x:r})}}),$r=j({expandDims_:function(n,e){e===void 0&&(e=0);var t=L(n,"x","expandDims",null);P(e<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return e<0&&(P(-(t.rank+1)<=e,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),e=t.rank+e+1),r.splice(e,0,1),pa(t,r)}}),tA=j({eye_:function(n,e,t,r){r===void 0&&(r="float32"),e==null&&(e=n);for(var a=Je([n,e],r),i=n<=e?n:e,o=0;o<i;++o)a.set(1,o,o);var u=a.toTensor().as2D(n,e);if(t==null)return u;if(t.length===1)return yl($r(u,0),[t[0],1,1]);if(t.length===2)return yl($r($r(u,0),0),[t[0],t[1],1,1]);if(t.length===3)return yl($r($r($r(u,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),Cz=j({multinomial_:function(n,e,t,r){r===void 0&&(r=!1);var a=L(n,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);t=t||Math.random();var u=o===1?a.as2D(1,-1):a,c=W.runKernelFunc(function(f){return f.multinomial(u,r,e,t)},{logits2D:u});return o===1?c.as1D():c}}),Tb=j({oneHot_:function(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var a=L(n,"indices","oneHot","int32"),i=a.shape.concat([e]);return a=a.flatten(),W.runKernelFunc(function(o){return o.oneHot(a,e,t,r)},{$indices:a},function(o){return{$indices:function(){return Bt(a.shape,"float32")}}}).reshape(i)}}),su=j({pad_:function(n,e,t){t===void 0&&(t=0);var r=L(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:e,constantValue:t};return W.runKernelFunc(function(i){return i.pad(r,e,t)},{x:r},function(i){var o=e.map(function(u){return u[0]});return{x:function(){return i.slice(o,r.shape)}}},"PadV2",a)}}),Rz=j({pad1d_:function(n,e,t){return t===void 0&&(t=0),P(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),su(n,[e],t)}}),Tz=j({pad2d_:function(n,e,t){return t===void 0&&(t=0),P(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),su(n,e,t)}}),Oz=j({pad3d_:function(n,e,t){return t===void 0&&(t=0),P(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),su(n,e,t)}}),Az=j({pad4d_:function(n,e,t){return t===void 0&&(t=0),P(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),su(n,e,t)}}),kz=j({rand_:function(n,e,t){var r=Ie(n),a=null;if(t==null||t==="float32")a=new Float32Array(r);else if(t==="int32")a=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=e();return W.makeTensor(a,n,t)}}),Dz=j({randomNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new Mx(e,t,r,!1,a),o=Je(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),Nz=j({randomGamma_:function(n,e,t,r,a){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new gz(e,t,r,a),o=Je(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),nA=j({randomUniform_:function(n,e,t,r,a){e===void 0&&(e=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var i=Je(n,r),o=new yz(e,t,null,a),u=0;u<i.values.length;u++)i.values[u]=o.nextValue();return i.toTensor()}}),pa=j({reshape_:function(n,e){var t=L(n,"x","reshape",null);e=fB(e,t.size),P(t.size===Ie(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return W.runKernelFunc(function(a){return a.reshape(t,e)},{x:t},function(a){return{x:function(){return a.reshape(t.shape)}}},"Reshape",r)}}),rA=j({spaceToBatchND_:function(n,e,t){var r=L(n,"x","spaceToBatchND");return P(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),P(t.length===e.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length}),P(r.shape.reduce(function(a,i,o){return o>0&&o<=e.length?a&&(i+t[o-1][0]+t[o-1][1])%e[o-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()}),W.runKernelFunc(function(a){return a.spaceToBatchND(r,e,t)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(e,t)}}})}}),aA=j({squeeze_:function(n,e){var t=L(n,"x","squeeze");return pa(t,ks(t.shape,e).newShape)}}),Nr=j({stack_:function(n,e){e===void 0&&(e=0);var t=vv(n,"tensors","stack");if(P(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(e);var r=t[0].rank,a=t[0].shape,i=t[0].dtype;P(e<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(u){Ot(a,u.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(u){P(i===u.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=t.map(function(u){return u.expandDims(e)});return pn(o,e)}}),yl=j({tile_:function(n,e){var t=L(n,"x","tile",null);P(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."});var r=[t],a={reps:e};return W.runKernelFunc(function(i,o){var u=i.tile(t,e);return o([t]),u},{x:t},function(i,o){var u=o[0];return{x:function(){var c=gt(u);if(u.rank===1)for(var f=0;f<e[0];++f)c=c.add(i.slice([f*u.shape[0]],[u.shape[0]]));else if(u.rank===2)for(f=0;f<e[0];++f)for(var d=0;d<e[1];++d)c=c.add(i.slice([f*u.shape[0],d*u.shape[1]],[u.shape[0],u.shape[1]]));else if(u.rank===3)for(f=0;f<e[0];++f)for(d=0;d<e[1];++d)for(var p=0;p<e[2];++p)c=c.add(i.slice([f*u.shape[0],d*u.shape[1],p*u.shape[2]],[u.shape[0],u.shape[1],u.shape[2]]));else{if(u.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+u.rank+" tensors yet.");for(f=0;f<e[0];++f)for(d=0;d<e[1];++d)for(p=0;p<e[2];++p)for(var v=0;v<e[3];++v)c=c.add(i.slice([f*u.shape[0],d*u.shape[1],p*u.shape[2],v*u.shape[3]],[u.shape[0],u.shape[1],u.shape[2],u.shape[3]]))}return c}}},"Tile",a,r)}}),Iz=j({truncatedNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new Mx(e,t,r,!0,a),o=Je(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),vn=j({unstack_:function(n,e){e===void 0&&(e=0),e=e||0;var t=L(n,"x","unstack");P(e>=-t.shape.length&&e<t.shape.length,function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),e<0&&(e+=t.shape.length);var r={axis:e};return W.runKernelFunc(function(a){return a.unstack(t,e)},{x:t},function(a){return{x:function(){return Nr(a,e)}}},"Unpack",r)}}),Mz=function(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p;return De(this,function(v){switch(v.label){case 0:return t=L(n,"x","setdiff1d"),r=L(e,"y","setdiff1d"),P(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),P(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),P(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return a=v.sent(),[4,r.data()];case 2:for(i=v.sent(),o=new Set(i),u=0,d=0;d<a.length;d++)o.has(a[d])||u++;for(c=new sh([u],t.dtype),f=new sh([u],"int32"),d=0,p=0;d<a.length;d++)o.has(a[d])||(c.values[p]=a[d],f.values[p]=d,p++);return[2,[c.toTensor(),f.toTensor()]]}})})};function gv(n,e,t,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(e.slice(0))).push(n[0]/t),a=a.concat(n.slice(1));else{a=a.concat(n[0]);for(var i=e.length,o=0;o<i;++o)a=a.concat([n[o+1]/e[o],e[o]]);a=a.concat(n.slice(i+1))}return a}function yv(n,e,t){t===void 0&&(t=!0);var r=[];if(t){r.push(e);for(var a=e+1;a<n;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<n;++a)a>=2*e+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function bv(n,e,t,r){r===void 0&&(r=!0);var a=[];r?a.push(n[0]/t):a.push(n[0]*t);for(var i=1;i<n.length;++i)i<=e.length?r?a.push(e[i-1]*n[i]):a.push(n[i]/e[i-1]):a.push(n[i]);return a}function iA(n,e){for(var t=[0],r=0;r<e;++r)t.push(n[r][0]);return t}function oA(n,e,t){for(var r=n.slice(0,1),a=0;a<t;++a)r.push(n[a+1]-e[a][0]-e[a][1]);return r}function sA(n,e){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var t=e.shape,r=t[t.length-1],a=1,i=0;i<t.length-1;++i)a*=t[i];var o=n.shape,u=t.slice();u.pop();var c=1;for(i=r;i<n.rank;++i)c*=o[i],u.push(o[i]);var f=Qa(n.shape).map(function(d){return d/c}).concat([1]).slice(0,r);return[u,a,c,f]}var uA=30;function t0(n){return n<=uA?n:wb(n,Math.floor(Math.sqrt(n)))}function Fz(n,e,t){var r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+a+".";if(t.rank<a)throw new Error(i+" update.rank < "+a+". ");if(n.length<r+(t.rank-a))throw new Error(i+" Output shape length < "+(r+(t.rank-a)));if(t.rank!==a+n.length-r)throw new Error(i+" update.rank != "+(a+n.length-r));for(var o=0;o<a;++o)if(t.shape[o]!==e.shape[o])throw new Error(i+" updates.shape["+o+"] ("+t.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<t.rank-a;++o)if(t.shape[o+a]!==n[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+t.shape[o+a]+") != shape["+(o+a)+"] ("+n[o+a]+")")}function Lz(n,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}Fz(t,e,n)}function xv(n,e,t){for(var r=e.shape.length,a=r>1?e.shape[r-1]:1,i=t.length,o=1,u=a;u<i;++u)o*=t[u];var c=a<1?1:a;return{sliceRank:a,numUpdates:Ie(e.shape)/c,sliceSize:o,strides:Qa(t.slice(0,a)).concat([1]),outputSize:Ie(t)}}function Pz(n,e,t){P(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+e+" must match the rank of the array ("+n.rank+")."}),P(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of size "+t+" must match the rank of the array ("+n.rank+")."});for(var r=function(i){P(e[i]+t[i]<=n.shape[i],function(){return"Error in slice"+n.rank+"D: begin["+i+"] + size["+i+"] ("+(e[i]+t[i])+") would overflow input.shape["+i+"] ("+n.shape[i]+")"})},a=0;a<n.rank;++a)r(a)}function lC(n){for(var e=[],t=0;n>0;)1&n&&e.push(t),n/=2,t++;return e}function Fx(n,e,t){for(var r=[],a=0;a<n.length;a++)r[a]=Math.ceil((e[a]-n[a])/t[a]);return r}function Bz(n,e,t,r,a){var i=e[a],o=t[a]||1;(n&1<<a||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=yb(0,i,u-1)}function zz(n,e,t,r,a){var i=e[a],o=t[a]||1;(n&1<<a||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=o>0?yb(0,i,u):yb(-1,i,u-1)}function lA(n,e,t){for(var r=t.length,a=0;a<t.length;a++)if(t[a]>1){r=a;break}for(a=r+1;a<t.length;a++)if(e[a]>0||t[a]!==n[a])return!1;return!0}function cA(n,e){for(var t=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function Uz(n,e){P(xb(n),function(){return"The f passed in variableGrads(f) must be a function"}),P(e==null||Array.isArray(e)&&e.every(function(d){return d instanceof Yl}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=e!=null;if(!t)for(var r in e=[],W.registeredVariables)e.push(W.registeredVariables[r]);var a=t?e.filter(function(d){return!d.trainable}):null,i=e.length;P((e=e.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=W.gradients(n,e,null,!0),u=o.value,c=o.grads;P(c.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),P(u.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+u.rank+" tensor"});var f={};return e.forEach(function(d,p){c[p]!=null&&(f[d.name]=c[p])}),a!=null&&a.forEach(function(d){return f[d.name]=null}),{value:u,grads:f}}function $v(n){return W.customGrad(n)}var ji=j({softmax_:function(n,e){e===void 0&&(e=-1);var t=L(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return W.runKernelFunc(function(r,a){var i=r.softmax(t,e);return a([i]),i},{logits:t},function(r,a){var i=a[0],o=r.mul(i);return{logits:function(){return o.sub(o.sum([e],!0).mul(i))}}},"Softmax",{dim:e},[],[!0])}}),Vz=j({logSoftmax_:function(n,e){e===void 0&&(e=-1);var t=L(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return $v(function(r,a){var i=r.max(e,!0),o=r.sub(i),u=o.toFloat().sub(o.exp().sum(e,!0).log());return a([u]),{value:u,gradFunc:function(c,f){var d=f[0].exp();return c.sub(c.sum(e,!0).mul(d))}}})(t)}}),fA=function(){function n(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},n.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},n.prototype.has=function(e){return this.data.has(e)},n.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),hA=function(){function n(){}return n.prototype.time=function(e){return ie("time")},n.prototype.read=function(e){return ie("read")},n.prototype.readSync=function(e){return ie("readSync")},n.prototype.numDataIds=function(){return ie("numDataIds")},n.prototype.disposeData=function(e){return ie("disposeData")},n.prototype.write=function(e,t,r){return ie("write")},n.prototype.move=function(e,t,r,a){return ie("move")},n.prototype.memory=function(){return ie("memory")},n.prototype.floatPrecision=function(){return ie("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(e,t,r,a){return ie("batchMatMul")},n.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ie("fusedBatchMatMul")},n.prototype.slice=function(e,t,r){return ie("slice")},n.prototype.stridedSlice=function(e,t,r,a){return ie("stridedSlice")},n.prototype.unstack=function(e,t){return ie("unstack")},n.prototype.reverse=function(e,t){return ie("reverse")},n.prototype.concat=function(e,t){return ie("concat")},n.prototype.neg=function(e){return ie("neg")},n.prototype.add=function(e,t){return ie("add")},n.prototype.addN=function(e){return ie("addN")},n.prototype.subtract=function(e,t){return ie("subtract")},n.prototype.multiply=function(e,t){return ie("multiply")},n.prototype.realDivide=function(e,t){return ie("realDivide")},n.prototype.floorDiv=function(e,t){return ie("floorDiv")},n.prototype.sum=function(e,t){return ie("sum")},n.prototype.prod=function(e,t){return ie("prod")},n.prototype.unsortedSegmentSum=function(e,t,r){return ie("unsortedSegmentSum")},n.prototype.argMin=function(e,t){return ie("argMin")},n.prototype.argMax=function(e,t){return ie("argMax")},n.prototype.equal=function(e,t){return ie("equal")},n.prototype.notEqual=function(e,t){return ie("notEqual")},n.prototype.less=function(e,t){return ie("less")},n.prototype.lessEqual=function(e,t){return ie("lessEqual")},n.prototype.greater=function(e,t){return ie("greater")},n.prototype.greaterEqual=function(e,t){return ie("greaterEqual")},n.prototype.logicalNot=function(e){return ie("logicalNot")},n.prototype.logicalAnd=function(e,t){return ie("logicalAnd")},n.prototype.logicalOr=function(e,t){return ie("logicalOr")},n.prototype.where=function(e){return ie("where")},n.prototype.select=function(e,t,r){return ie("select")},n.prototype.topk=function(e,t,r){return ie("topk")},n.prototype.min=function(e,t){return ie("min")},n.prototype.minimum=function(e,t){return ie("minimum")},n.prototype.mod=function(e,t){return ie("mod")},n.prototype.max=function(e,t){return ie("max")},n.prototype.maximum=function(e,t){return ie("maximum")},n.prototype.all=function(e,t){return ie("all")},n.prototype.any=function(e,t){return ie("any")},n.prototype.squaredDifference=function(e,t){return ie("squaredDifference")},n.prototype.ceil=function(e){return ie("ceil")},n.prototype.floor=function(e){return ie("floor")},n.prototype.round=function(e){return ie("round")},n.prototype.sign=function(e){return ie("sign")},n.prototype.isNaN=function(e){return ie("isNaN")},n.prototype.isInf=function(e){return ie("isInf")},n.prototype.isFinite=function(e){return ie("isFinite")},n.prototype.pow=function(e,t){return ie("pow")},n.prototype.exp=function(e){return ie("exp")},n.prototype.expm1=function(e){return ie("expm1")},n.prototype.softmax=function(e,t){return ie("softmax")},n.prototype.log=function(e){return ie("log")},n.prototype.log1p=function(e){return ie("log1p")},n.prototype.sqrt=function(e){return ie("sqrt")},n.prototype.rsqrt=function(e){return ie("rsqrt")},n.prototype.square=function(e){return ie("square")},n.prototype.reciprocal=function(e){return ie("reciprocal")},n.prototype.relu=function(e){return ie("relu")},n.prototype.relu6=function(e){return ie("relu6")},n.prototype.prelu=function(e,t){return ie("prelu")},n.prototype.elu=function(e){return ie("elu")},n.prototype.eluDer=function(e,t){return ie("eluDer")},n.prototype.selu=function(e){return ie("selu")},n.prototype.int=function(e){return ie("int")},n.prototype.clip=function(e,t,r){return ie("clip")},n.prototype.abs=function(e){return ie("abs")},n.prototype.complexAbs=function(e){return ie("complexAbs")},n.prototype.sigmoid=function(e){return ie("sigmoid")},n.prototype.softplus=function(e){return ie("softplus")},n.prototype.sin=function(e){return ie("sin")},n.prototype.cos=function(e){return ie("cos")},n.prototype.tan=function(e){return ie("tan")},n.prototype.asin=function(e){return ie("asin")},n.prototype.acos=function(e){return ie("acos")},n.prototype.atan=function(e){return ie("atan")},n.prototype.atan2=function(e,t){return ie("atan2")},n.prototype.sinh=function(e){return ie("sinh")},n.prototype.cosh=function(e){return ie("cosh")},n.prototype.tanh=function(e){return ie("tanh")},n.prototype.asinh=function(e){return ie("asinh")},n.prototype.acosh=function(e){return ie("acosh")},n.prototype.atanh=function(e){return ie("atanh")},n.prototype.erf=function(e){return ie("erf")},n.prototype.step=function(e,t){return ie("step")},n.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ie("fusedConv2d")},n.prototype.conv2d=function(e,t,r){return ie("conv2d")},n.prototype.conv2dDerInput=function(e,t,r){return ie("conv2dDerInput")},n.prototype.conv2dDerFilter=function(e,t,r){return ie("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ie("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(e,t,r){return ie("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(e,t,r){return ie("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(e,t,r){return ie("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(e,t,r){return ie("conv3d")},n.prototype.conv3dDerInput=function(e,t,r){return ie("conv3dDerInput")},n.prototype.conv3dDerFilter=function(e,t,r){return ie("conv3dDerFilter")},n.prototype.maxPool=function(e,t){return ie("maxPool")},n.prototype.maxPoolBackprop=function(e,t,r,a){return ie("maxPoolBackprop")},n.prototype.avgPool=function(e,t){return ie("avgPool")},n.prototype.avgPoolBackprop=function(e,t,r){return ie("avgPoolBackprop")},n.prototype.avgPool3d=function(e,t){return ie("avgPool3d")},n.prototype.avgPool3dBackprop=function(e,t,r){return ie("avgPool3dBackprop")},n.prototype.maxPool3d=function(e,t){return ie("maxPool3d")},n.prototype.maxPool3dBackprop=function(e,t,r,a){return ie("maxPool3dBackprop")},n.prototype.reshape=function(e,t){return ie("reshape")},n.prototype.cast=function(e,t){return ie("cast")},n.prototype.tile=function(e,t){return ie("tile")},n.prototype.pad=function(e,t,r){return ie("pad")},n.prototype.transpose=function(e,t){return ie("transpose")},n.prototype.gather=function(e,t,r){return ie("gather")},n.prototype.gatherND=function(e,t){return ie("gatherND")},n.prototype.scatterND=function(e,t,r){return ie("scatterND")},n.prototype.batchToSpaceND=function(e,t,r){return ie("batchToSpaceND")},n.prototype.spaceToBatchND=function(e,t,r){return ie("spaceToBatchND")},n.prototype.resizeBilinear=function(e,t,r,a){return ie("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(e,t,r){return ie("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(e,t,r,a){return ie("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(e,t,r){return ie("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(e,t,r,a,i,o){return ie("batchNormalization")},n.prototype.localResponseNormalization4D=function(e,t,r,a,i){return ie("localResponseNormalization4D")},n.prototype.LRNGrad=function(e,t,r,a,i,o,u){return ie("LRNGrad")},n.prototype.multinomial=function(e,t,r,a){return ie("multinomial")},n.prototype.oneHot=function(e,t,r,a){return ie("oneHot")},n.prototype.cumsum=function(e,t,r,a){return ie("cumsum")},n.prototype.nonMaxSuppression=function(e,t,r,a,i){return ie("nonMaxSuppression")},n.prototype.fft=function(e){return ie("fft")},n.prototype.ifft=function(e){return ie("ifft")},n.prototype.complex=function(e,t){return ie("complex")},n.prototype.real=function(e){return ie("real")},n.prototype.imag=function(e){return ie("imag")},n.prototype.cropAndResize=function(e,t,r,a,i,o){return ie("cropAndResize")},n.prototype.depthToSpace=function(e,t,r){return ie("depthToSpace")},n.prototype.split=function(e,t,r){return ie("split")},n.prototype.sparseToDense=function(e,t,r,a){return ie("sparseToDense")},n.prototype.diag=function(e){return ie("diag")},n.prototype.fill=function(e,t,r){return ie("fill")},n.prototype.onesLike=function(e){return ie("onesLike")},n.prototype.zerosLike=function(e){return ie("zerosLike")},n.prototype.linspace=function(e,t,r){return ie("linspace")},n.prototype.dispose=function(){return ie("dispose")},n}();function ie(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Lo(n,e){for(var t=n.length,r=[],a=0;a<t;a++){var i=t-1-a,o=n[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function mn(n,e){for(var t=[],r=0;r<e.length;r++){var a=n[n.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&t.unshift(i)}return t}function ct(n,e){for(var t=[],r=Math.max(n.length,e.length),a=0;a<r;a++){var i=n[n.length-a-1];i==null&&(i=1);var o=e[e.length-a-1];if(o==null&&(o=1),i===1)t.unshift(o);else if(o===1)t.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+n+" and "+e+".");t.unshift(i)}}return t}function lh(n,e,t,r,a,i,o){o===void 0&&(o="channelsLast");var u,c=Ev(e),f=c[0],d=c[1];if(o==="channelsLast")u=[f,d,n[3],n[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);u=[f,d,n[1],n[1]]}return uu(n,u,t,r,a,i,!1,o)}function wv(n,e,t,r,a,i,o){o===void 0&&(o="NDHWC");var u,c,f=Ob(e),d=f[0],p=f[1],v=f[2];if(o==="NDHWC")c="channelsLast",u=[d,p,v,n[4],n[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",u=[d,p,v,n[1],n[1]]}return _v(n,u,t,r,a,!1,c,i)}function uu(n,e,t,r,a,i,o,u){o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var c=[-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3];if(u==="channelsLast")f=n[0],d=n[1],p=n[2],v=n[3];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);f=n[0],v=n[1],d=n[2],p=n[3]}var g,y=e[0],x=e[1],w=e[3],_=Ev(t),S=_[0],C=_[1],R=Ev(r),T=R[0],O=R[1],D=bl(y,T),N=bl(x,O),k=function(te,re,q,Z,G,Y,F,K){var se,fe,he;if(typeof te=="number"){se={top:te,bottom:te,left:te,right:te,type:te===0?"VALID":"NUMBER"};var be=function(Ve,$e,Ye,bt,St){bt==null&&(bt=dA(Ve,$e,Ye));var yt=Ve[0],or=Ve[1],Yn=Lf((yt-$e+2*bt)/Ye+1,St);P(en(Yn),function(){return"The output # of rows ("+Yn+") must be an integer. Change the stride and/or zero pad parameters"});var kn=Lf((or-$e+2*bt)/Ye+1,St);return P(en(kn),function(){return"The output # of columns ("+kn+") must be an integer. Change the stride and/or zero pad parameters"}),[Yn,kn]}([re,q],Y,Z,te,K);fe=be[0],he=be[1]}else if(te==="same"){fe=Math.ceil(re/Z),he=Math.ceil(q/G);var ye=Math.max(0,(fe-1)*Z+Y-re),Be=Math.max(0,(he-1)*G+F-q),xe=Math.floor(ye/2),Oe=ye-xe,je=Math.floor(Be/2);se={top:xe,bottom:Oe,left:je,right:Be-je,type:"SAME"}}else{if(te!=="valid")throw Error("Unknown padding parameter: "+te);se={top:0,bottom:0,left:0,right:0,type:"VALID"},fe=Math.ceil((re-Y+1)/Z),he=Math.ceil((q-F+1)/G)}return{padInfo:se,outHeight:fe,outWidth:he}}(a,d,p,S,C,D,N,i),I=k.padInfo,B=k.outHeight,U=k.outWidth,ee=o?w*v:w;return u==="channelsFirst"?g=[f,ee,B,U]:u==="channelsLast"&&(g=[f,B,U,ee]),{batchSize:f,dataFormat:u,inHeight:d,inWidth:p,inChannels:v,outHeight:B,outWidth:U,outChannels:ee,padInfo:I,strideHeight:S,strideWidth:C,filterHeight:y,filterWidth:x,effectiveFilterHeight:D,effectiveFilterWidth:N,dilationHeight:T,dilationWidth:O,inShape:n,outShape:g,filterShape:e}}function _v(n,e,t,r,a,i,o,u){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3],g=c[4];if(o==="channelsLast")f=n[0],d=n[1],p=n[2],v=n[3],g=n[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);f=n[0],g=n[1],d=n[2],p=n[3],v=n[4]}var y,x=e[0],w=e[1],_=e[2],S=e[4],C=Ob(t),R=C[0],T=C[1],O=C[2],D=Ob(r),N=D[0],k=D[1],I=D[2],B=bl(x,N),U=bl(w,k),ee=bl(_,I),te=function(F,K,se,fe,he,be,ye,Be,xe,Oe,je){var Ve,$e,Ye,bt;if(typeof F=="number"){Ve={top:F,bottom:F,left:F,right:F,front:F,back:F,type:F===0?"VALID":"NUMBER"};var St=function(Dn,na,hu,oi,Zn,pc){Zn==null&&(Zn=dA(Dn,na,oi));var qh=Dn[0],bm=Dn[1],xm=Dn[2],si=Lf((qh-na+2*Zn)/oi+1,pc);P(en(si),function(){return"The output # of depths ("+si+") must be an integer. Change the stride and/or zero pad parameters"});var Nn=Lf((bm-na+2*Zn)/oi+1,pc);P(en(Nn),function(){return"The output # of rows ("+Nn+") must be an integer. Change the stride and/or zero pad parameters"});var vc=Lf((xm-na+2*Zn)/oi+1,pc);return P(en(vc),function(){return"The output # of columns ("+vc+") must be an integer. Change the stride and/or zero pad parameters"}),[si,Nn,vc,hu]}([K,se,fe,1],Be,1,he,F,je);$e=St[0],Ye=St[1],bt=St[2]}else if(F==="same"){$e=Math.ceil(K/he),Ye=Math.ceil(se/be),bt=Math.ceil(fe/ye);var yt=($e-1)*he+Be-K,or=(Ye-1)*be+xe-se,Yn=(bt-1)*ye+Oe-fe,kn=Math.floor(yt/2),Sa=yt-kn,yr=Math.floor(or/2),Ca=or-yr,ta=Math.floor(Yn/2);Ve={top:yr,bottom:Ca,left:ta,right:Yn-ta,front:kn,back:Sa,type:"SAME"}}else{if(F!=="valid")throw Error("Unknown padding parameter: "+F);Ve={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},$e=Math.ceil((K-Be+1)/he),Ye=Math.ceil((se-xe+1)/be),bt=Math.ceil((fe-Oe+1)/ye)}return{padInfo:Ve,outDepth:$e,outHeight:Ye,outWidth:bt}}(a,d,p,v,R,T,O,B,U,ee,u),re=te.padInfo,q=te.outDepth,Z=te.outHeight,G=te.outWidth,Y=i?S*g:S;return o==="channelsFirst"?y=[f,Y,q,Z,G]:o==="channelsLast"&&(y=[f,q,Z,G,Y]),{batchSize:f,dataFormat:o,inDepth:d,inHeight:p,inWidth:v,inChannels:g,outDepth:q,outHeight:Z,outWidth:G,outChannels:Y,padInfo:re,strideDepth:R,strideHeight:T,strideWidth:O,filterDepth:x,filterHeight:w,filterWidth:_,effectiveFilterDepth:B,effectiveFilterHeight:U,effectiveFilterWidth:ee,dilationDepth:N,dilationHeight:k,dilationWidth:I,inShape:n,outShape:y,filterShape:e}}function dA(n,e,t,r){r===void 0&&(r=1);var a=bl(e,r);return Math.floor((n[0]*(t-1)-t+a)/2)}function Ev(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function Ob(n){return typeof n=="number"?[n,n,n]:n}function bl(n,e){return e<=1?n:n+(n-1)*(e-1)}function Lf(n,e){if(!e)return n;switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+e)}}function Jl(n){var e=Ev(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function gr(n,e){return Jl(n)||Jl(e)}function Lx(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function pA(n,e,t){if(e==="complex64"){if(n.dtype==="complex64")return n.clone();var r=Bt(n.shape),a=n.toFloat(),i=t.complex(a,r);return r.dispose(),a.dispose(),i}if(!pB(n.dtype,e))return W.makeTensorFromDataId(n.dataId,n.shape,e);if(n.dtype==="complex64"){var o=t.real(n);return i=o.cast(e),o.dispose(),i}if(e==="int32")return t.int(n);if(e==="bool"){var u=we(0,n.dtype);return i=t.notEqual(n,u),u.dispose(),i}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+e)}function Ab(n,e){return W.makeTensorFromDataId(n.dataId,e,n.dtype)}function vA(n,e,t){var r=(e-n)/(t-1),a=Dh(t,"float32");a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return sn(a,"float32")}function kb(n,e){if(n.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+e.length+".");for(var t=new Float32Array(2*n.length),r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function cC(n,e){return{real:n[2*e],imag:n[2*e+1]}}function jz(n,e,t,r){n[2*r]=e,n[2*r+1]=t}function qz(n,e,t){var r=(t?2:-2)*Math.PI*(n/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Wz(n,e,t){var r=function(i,o,u){return function(c,f,d){for(var p=0,v=c.length,g=0,y=!1;p<v;){var x=d(f,c[g=p+(v-p>>>1)]);x>0?p=g+1:(v=g,y=!x)}return y?p:-p-1}(i,o,u||Hz)}(n,e,t),a=r<0?-(r+1):r;n.splice(a,0,e)}function Hz(n,e){return n>e?1:n<e?-1:0}function Px(n,e,t,r,a){return mA(n,e,t,r,a,0).selectedIndices}function Bx(n,e,t,r,a,i){var o=mA(n,e,t,r,a,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function mA(n,e,t,r,a,i,o,u){u===void 0&&(u=!1);for(var c=Array.from(e).map(function(R,T){return{score:R,boxIndex:T,suppressBeginIndex:0}}).filter(function(R){return R.score>a}).sort(fC),f=i>0?-.5/i:0,d=[],p=[];d.length<t&&c.length>0;){var v=c.pop(),g=v.score,y=v.boxIndex,x=v.suppressBeginIndex;if(g<a)break;for(var w=!1,_=d.length-1;_>=x;--_){var S=Gz(n,y,d[_]);if(S>=r){w=!0;break}if(v.score=v.score*Qz(r,f,S),v.score<=a)break}v.suppressBeginIndex=d.length,w||(v.score===g?(d.push(y),p.push(v.score)):v.score>a&&Wz(c,v,fC))}var C=d.length;return u&&(d.fill(0,C),p.fill(0,C)),{selectedIndices:sn(d,"int32"),selectedScores:sn(p,"float32"),numValidOutputs:we(C,"int32")}}function Gz(n,e,t){var r=n.subarray(4*e,4*e+4),a=n.subarray(4*t,4*t+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),f=Math.min(a[0],a[2]),d=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),v=Math.max(a[1],a[3]),g=(u-i)*(c-o),y=(p-f)*(v-d);if(g<=0||y<=0)return 0;var x=Math.max(i,f),w=Math.max(o,d),_=Math.min(u,p),S=Math.min(c,v),C=Math.max(_-x,0)*Math.max(S-w,0);return C/(g+y-C)}function Qz(n,e,t){var r=Math.exp(e*t*t);return t<=n?r:0}function fC(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}function gA(n,e,t){var r=new Array(n.rank).fill(0),a=n.shape.slice();return e.map(function(i){a[t]=i;var o=n.slice(r,a);return r[t]+=i,o})}function yA(n,e){for(var t=new Array(n.rank),r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];var a=Je(t,n.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(n.rank),u=0;u<o.length;u++)o[u]=i[u]%n.shape[u];var c=n.locToIndex(o);a.values[r]=n.values[c]}return a.toTensor()}function bA(n,e,t,r,a){for(var i=e[e.length-1],o=[n.length/i,i],u=o[0],c=o[1],f=oh(t,u*r),d=oh("int32",u*r),p=0;p<u;p++){for(var v=p*c,g=n.subarray(v,v+c),y=[],x=0;x<g.length;x++)y.push({value:g[x],index:x});y.sort(function(R,T){return T.value-R.value});var w=p*r,_=f.subarray(w,w+r),S=d.subarray(w,w+r);for(x=0;x<r;x++)_[x]=y[x].value,S[x]=y[x].index}var C=e.slice();return C[C.length-1]=r,[zn(f,C,t),zn(d,C,"int32")]}function zx(n,e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(r);var a=Je(n,"int32"),i=Je([t.length,n.length],"int32");for(r=0;r<t.length;r++){var o=a.indexToLoc(t[r]),u=r*n.length;i.values.set(o,u)}return i.toTensor()}var $z=function(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},Kz=function(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},Xz=function(n,e,t){this.variableNames=["A"];var r=n.windowSize,a=n.batchSize,i=n.inSize,o=Math.ceil(i/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var u=e==="max"?">":"<",c=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+u+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function xA(n,e){return["x","y","z","w","u","v"].slice(0,e).map(function(t){return n+"."+t})}function dr(n,e){return e===1?[n]:xA(n,e)}function Gn(){var n,e,t,r,a,i,o,u,c,f;return ue().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",u=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",a="texture2D",i="gl_FragColor",o="",u=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:u,defineSpecialInf:c,defineRound:f}}function Is(n,e,t){t===void 0&&(t="index");var r=Qa(e);return r.map(function(a,i){return"int "+n[i]+" = "+t+" / "+a+"; "+(i===r.length-1?"int "+n[i+1]+" = "+t+" - "+n[i]+" * "+a:"index -= "+n[i]+" * "+a)+";"}).join("")}function Ux(n){var e=Qa(n).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var wA=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Yz(n,e,t,r){var a=[];n.forEach(function(g){var y=Ie(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(y>1?"["+y+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))});var i,o,u=a.join(`
`),c=n.map(function(g){return function(y,x,w){w===void 0&&(w=!1);var _="";_+=w?_A(y):rl(y);var S=y.shapeInfo.logicalShape,C=x.logicalShape;return S.length<=C.length&&(_+=w?function(R,T){var O,D=R.name,N=D.charAt(0).toUpperCase()+D.slice(1),k="get"+N+"AtOutCoords",I=R.shapeInfo.logicalShape.length,B=T.logicalShape.length,U=Lo(R.shapeInfo.logicalShape,T.logicalShape),ee=Lt(B),te=B-I,re=["x","y","z","w","u","v"];O=I===0?"":B<2&&U.length>=1?"coords = 0;":U.map(function(se){return"coords."+re[se+te]+" = 0;"}).join(`
`);var q="";q=B<2&&I>0?"coords":R.shapeInfo.logicalShape.map(function(se,fe){return"coords."+re[fe+te]}).join(", ");var Z="return outputValue;",G=Ie(R.shapeInfo.logicalShape)===1,Y=Ie(T.logicalShape)===1;if(I!==1||G||Y){if(G&&!Y)Z=B===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(U.length){var F=I-2,K=I-1;U.indexOf(F)>-1&&U.indexOf(K)>-1?Z="return vec4(outputValue.x);":U.indexOf(F)>-1?Z="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":U.indexOf(K)>-1&&(Z="return vec4(outputValue.xx, outputValue.zz);")}}else Z=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+k+`() {
      `+ee+` coords = getOutputCoords();
      `+O+`
      vec4 outputValue = get`+N+"("+q+`);
      `+Z+`
    }
  `}(y,x):function(R,T){var O=R.name,D=O.charAt(0).toUpperCase()+O.slice(1),N="get"+D+"AtOutCoords",k=T.texShape,I=R.shapeInfo.texShape,B=R.shapeInfo.logicalShape.length,U=T.logicalShape.length;if(!R.shapeInfo.isUniform&&B===U&&R.shapeInfo.flatOffset==null&&On(I,k))return`
      float `+N+`() {
        return sampleTexture(`+O+`, resultUV);
      }
    `;var ee,te=Lt(U),re=Lo(R.shapeInfo.logicalShape,T.logicalShape),q=U-B,Z=["x","y","z","w","u","v"];ee=B===0?"":U<2&&re.length>=1?"coords = 0;":re.map(function(Y){return"coords."+Z[Y+q]+" = 0;"}).join(`
`);var G="";return G=U<2&&B>0?"coords":R.shapeInfo.logicalShape.map(function(Y,F){return"coords."+Z[F+q]}).join(", "),`
    float `+N+`() {
      `+te+` coords = getOutputCoords();
      `+ee+`
      return get`+D+"("+G+`);
    }
  `}(y,x)),_}(g,e,r)}).join(`
`),f=e.texShape,d=Gn(),p=function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `}(d),v=function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Zz+`
    `+Jz+`
    `+eU+`
  `}(d);return e.isPacked?(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(R,T){var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];return O[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+O[1]+`.0);
      }
    `:O[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+O[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      return 2 * (resTexRC.x * `+O[1]+` + resTexRC.y);
    }
  `}(0,y);case 2:return function(R,T){var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];if(On(R,T))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+O[0]+", "+O[1]+`));
      }
    `;var D=Math.ceil(R[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));

      int index = resTexRC.x * `+O[1]+` + resTexRC.y;
      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=g,w=y,_=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],S=Math.ceil(x[2]/2),C=S*Math.ceil(x[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(R,T){for(var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)],D=Math.ceil(R[R.length-1]/2),N=D*Math.ceil(R[R.length-2]/2),k=N,I="",B="b, r, c",U=2;U<R.length-1;U++)k*=R[R.length-U-1],I=`
      int b`+U+" = index / "+k+`;
      index -= b`+U+" * "+k+`;
    `+I,B="b"+U+", "+B;return`
    ivec`+R.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      int index = resTexRC.x * `+O[1]+` + resTexRC.y;

      `+I+`

      int b = index / `+N+`;
      index -= b * `+N+`;

      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec`+R.length+"("+B+`);
    }
  `}(g,y)}var x,w,_,S,C}(e.logicalShape,f),o=function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `}(d)):(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,S){return S[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return resTexRC.x * `+S[1]+` + resTexRC.y;
    }
  `}(0,y);case 2:return function(_,S){return On(_,S)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `:_[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = index / `+_[1]+`;
      int c = index - r * `+_[1]+`;
      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=y,w=Is(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+w+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(_,S){var C=Is(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      `+C+`
      return ivec4(r, c, d, d2);
    }
  `}(g,y);case 5:return function(_,S){var C=Is(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+S[0]+`,
                             `+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+C+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(g,y);case 6:return function(_,S){var C=Is(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+C+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(g,y);default:throw new Error(g.length+"-D output sampling is not yet supported")}var x,w}(e.logicalShape,f),o=function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),r&&(v+=tU),[v,p,o,u,i,c,t].join(`
`)}function rl(n){var e=n.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(o===1&&u===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=t.shapeInfo.texShape,f=c[0],d=c[1],p=Rs(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+f+", "+d+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 1:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Yu(t)+`
      }
    `;var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(u===1&&o===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=Rs(r);return u===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+u+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+u+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 2:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=t.shapeInfo.texShape;if(o!=null&&On(r,o)){var u=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+u+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var f=ks(r),d=f.newShape,p=f.keptDims,v=d;if(v.length<r.length){var g=al(t,v);return`
      `+rl(g)+`
      float `+i+`(int row, int col) {
        return `+i+"("+il(["row","col"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Yu(t)+`
      }
    `;var y=o[0],x=o[1],w=Rs(a);return x===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:y===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+x+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+w+`;
    vec2 uv = uvFromFlat(`+y+", "+x+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(n);case 3:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[1]*r[2],u=r[2],c=ks(r),f=c.newShape,d=c.keptDims,p=f;if(p.length<r.length){var v=al(t,p);return`
        `+rl(v)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+il(["row","col","depth"],d)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+u+`, 1)));
        `+Yu(t)+`
      }
    `;var g=t.shapeInfo.texShape,y=g[0],x=g[1],w=t.shapeInfo.flatOffset;if(x===o&&w==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+u+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+x+".0, "+y+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(x===u&&w==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+x+".0, "+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var _=Rs(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+u+" + depth + "+_+`;
        vec2 uv = uvFromFlat(`+y+", "+x+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(n);case 4:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[3],u=r[2]*o,c=r[1]*u,f=ks(r),d=f.newShape,p=f.keptDims;if(d.length<r.length){var v=al(t,d);return`
      `+rl(v)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+il(["row","col","depth","depth2"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+u+", "+o+`, 1)));
        `+Yu(t)+`
      }
    `;var g=t.shapeInfo.flatOffset,y=t.shapeInfo.texShape,x=y[0],w=y[1];if(w===c&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(w===o&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=Rs(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+x+", "+w+", index + "+_+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 5:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[4],u=r[3]*o,c=r[2]*u,f=r[1]*c,d=ks(r),p=d.newShape,v=d.keptDims;if(p.length<r.length){var g=al(t,p);return`
      `+rl(g)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+il(["row","col","depth","depth2","depth3"],v)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+c+", "+u+", "+o+`)) +
          depth3;
        `+Yu(t)+`
      }
    `;var y=t.shapeInfo.flatOffset,x=t.shapeInfo.texShape,w=x[0],_=x[1];if(_===f&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===o&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var S=Rs(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+c+" + depth * "+u+` +
          depth2 * `+o+" + depth3 + "+S+`;
      vec2 uv = uvFromFlat(`+w+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 6:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=ks(r),u=o.newShape,c=o.keptDims;if(u.length<r.length){var f=al(t,u);return`
      `+rl(f)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+il(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=r[5],p=r[4]*d,v=r[3]*p,g=r[2]*v,y=r[1]*g;if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+g+", "+v+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Yu(t)+`
      }
    `;var x=t.shapeInfo.flatOffset,w=t.shapeInfo.texShape,_=w[0],S=w[1];if(S===y&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+v+", "+p+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===d&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var C=Rs(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+g+" + depth * "+v+` +
          depth2 * `+p+" + depth3 * "+d+" + depth4 + "+C+`;
      vec2 uv = uvFromFlat(`+_+", "+S+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function _A(n){var e,t,r;switch(n.shapeInfo.logicalShape.length){case 0:return e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Gn(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(a){var i=a.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),u=a.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],f=Gn();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+f.texture2D+"("+i+`, uv);
    }
  `}(n);case 2:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=c[0],d=c[1],p=Gn();if(c!=null&&On(i,c))return`
      vec4 `+u+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+f+`.0);

        return `+p.texture2D+"("+o+`, uv);
      }
    `;var v=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(i[1]/2);return`
    vec4 `+u+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+v[0]+", "+v[1]+`, row, col);
      return `+p.texture2D+"("+o+`, uv);
    }
  `}(n);case 3:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var d=i.slice(1),p=al(a,d);return`
        `+_A(p)+`
        vec4 `+u+`(int b, int row, int col) {
          return `+u+"("+il(["b","row","col"],[1,2])+`);
        }
      `}var v=f[0],g=f[1],y=Math.ceil(i[2]/2),x=y*Math.ceil(i[1]/2),w=Gn();return`
    vec4 `+u+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+v+", "+g+", "+x+", "+y+`, b, row, col);
      return `+w.texture2D+"("+o+`, uv);
    }
  `}(n);default:return function(a){for(var i=a.shapeInfo.logicalShape,o=i.length,u=a.name,c="get"+u.charAt(0).toUpperCase()+u.slice(1),f=a.shapeInfo.texShape,d=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],p=d[0],v=d[1],g=Math.ceil(i[o-1]/2),y=g*Math.ceil(i[o-2]/2),x="int b, int row, int col",w="b * "+y+" + (row / 2) * "+g+" + (col / 2)",_=2;_<o-1;_++)x="int b"+_+", "+x,y*=i[o-_-1],w="b"+_+" * "+y+" + "+w;var S=Gn();return`
    vec4 `+c+"("+x+`) {
      int index = `+w+`;
      int texR = index / `+v+`;
      int texC = index - texR * `+v+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+", "+p+`);
      return `+S.texture2D+"("+u+`, uv);
    }
  `}(n)}}var Zz=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Jz=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,eU=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,tU=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Rs(n){return"offset"+n}function Yu(n){var e=n.name,t=Ie(n.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Lt(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function al(n,e){var t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function il(n,e){return e.map(function(t){return n[t]}).join(", ")}var nU=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(n.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var a=n[n.length-1],i=Math.ceil(a/e);this.outputShape=n.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,u,c=this.outputShape,f=c.length,d=Lt(f),p=dr("coords",f);if(i===1){var v=Lt(u=f+1);o=`
        `+v+" sourceLocR = "+v+"("+p.join()+`, 0);
        ++`+p[f-1]+`;
        `+v+" sourceLocG = "+v+"("+p.join()+`, 0);
        ++`+p[f-2]+`;
        `+v+" sourceLocA = "+v+"("+p.join()+`, 0);
        --`+p[f-1]+`;
        `+v+" sourceLocB = "+v+"("+p.join()+`, 0);
        --`+p[f-2]+";"}else u=f,o=`
        `+d+` sourceLocR = coords;
        ++`+p[f-1]+`;
        `+d+` sourceLocG = coords;
        ++`+p[f-2]+`;
        `+d+` sourceLocA = coords;
        --`+p[f-1]+`;
        `+d+` sourceLocB = coords;
        --`+p[f-2]+";";var g=["x","y","z","w","u","v"].slice(0,u),y="."+g[u-1],x=g.map(function(N){return"int "+N}),w=dr("sourceLocR",u-1).concat("inIdx.r"),_=dr("sourceLocG",u-1).concat("inIdx.g"),S=dr("sourceLocB",u-1).concat("inIdx.b"),C=dr("sourceLocA",u-1).concat("inIdx.a"),R=t==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+C.join()+")));",O=`vec4(
            getAChannel(`+w.join()+`),
            hasNextCol ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+C.join()+") : 0.)",D=r?"":`
      float getBestIndicesAChannel(`+x.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+x.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+D+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+p[f-1]+" < "+(c[f-1]-1)+`;
        bool hasNextRow = `+p[f-2]+" < "+(c[f-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+O+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+O+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+R+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},rU=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,o=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,f=u-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+f+", "+d+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},aU=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,v=n.effectiveFilterWidth,g=d-1-n.padInfo.front,y=p-1-n.padInfo.top,x=v-1-n.padInfo.left,w=1/(e*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float avgMultiplier = float(`+w+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+u+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+v+`;
                wC += `+f+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},iU=function(n,e,t,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],ct(n,e),ct(n,t);var o="0.0";r!=null&&(ct(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="1.0";a!=null&&(ct(n,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+u+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},oU=function(n,e,t,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ct(n,e),ct(n,t);var o="vec4(0.0)";r!=null&&(ct(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="vec4(1.0)";a!=null&&(ct(n,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+u+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},sU="return areal * breal - aimag * bimag;",uU="return areal * bimag + aimag * breal;",hC=function(n,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ct(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},n0="return a + b;",r0="return a - b;",dC="return a * b;",EA="return (a < 0.) ? b * a : a;",Kt=function(n,e,t){this.variableNames=["A","B"],this.outputShape=ct(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},SA=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Oi=function(n,e,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ct(e,t);var a=this.outputShape.length,i="";if(r)if(a===0||Ie(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Lt(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=dr("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+o[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+o[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},lU=function(){function n(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),cU=function(){function n(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),fU=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},hU=function(n){this.outputShape=[],this.outputShape=Zl(n,1),this.variableNames=n.map(function(u,c){return"T"+c});var e=new Array(n.length-1);e[0]=n[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+n[t][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var a=e[t-1];r.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+a+"));")}var i=e.length,o=e[e.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},dU=function(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Zl(n,e);var t=this.outputShape,r=t.length,a=Lt(r),i=dr("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(w,_){return"T"+_});var u=new Array(n.length-1);u[0]=n[0][e];for(var c=1;c<u.length;c++)u[c]=u[c-1]+n[c][e];var f=o[e],d=o.slice(-2),p=o.join(),v="if ("+f+" < "+u[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+d.join()+`));
        }`;for(c=1;c<u.length;c++){var g=u[c-1];v+=`
        if (`+f+" < "+u[c]+"  && "+f+" >= "+u[c-1]+`) {
          return getChannel(
            getT`+c+"("+hp(o,f,g)+`),
            vec2(`+hp(d,f,g)+`));
        }`}var y=u.length,x=u[u.length-1];v+=`
        return getChannel(
          getT`+y+"("+hp(o,f,x)+`),
          vec2(`+hp(d,f,x)+"));",this.userCode=`
      float getValue(`+o.map(function(w){return"int "+w})+`) {
        `+v+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+t[r-2]+` &&
            `+i[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function hp(n,e,t){var r=n.indexOf(e);return n.map(function(a,i){return i===r?a+" - "+t:a}).join()}var pU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},vU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dataFormat==="channelsLast",o=e-1-n.padInfo.top,u=t-1-n.padInfo.left,c=i?1:2,f=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+f+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},mU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.padInfo.front,i=n.padInfo.top,o=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+a+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+i+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},gU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=e-1-n.padInfo.front,c=t-1-n.padInfo.top,f=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},yU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},bU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=e-1-n.padInfo.top,o=t-1-n.padInfo.left,u=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+u+`; dm++) {
              int d2 = d1 * `+u+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},pC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.padInfo.top,i=n.padInfo.left,o=n.strideHeight,u=n.strideWidth,c=n.dilationHeight,f=n.dilationWidth,d=n.filterHeight,p=n.filterWidth,v=4*Math.floor(n.inChannels/4),g=n.inChannels%4,y=n.dataFormat==="channelsLast",x=y?1:2,w=y?2:3,_=y?3:1,S="",C="";t&&(S=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,C="result = activation(result);");var R=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+o+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+_+`];

        ivec2 xRCCorner =
            ivec2(coords[`+x+"], coords["+w+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+v+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+v+`) *
                    getW(wR, wC, `+v+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+v+`, xR, xC) *
                    getW(wR, wC, `+v+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2),
                getW(wR, wC, `+v+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1),
                  getX(batch, xR, xC, `+v+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC),
                  getX(batch, `+v+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+R+`
        `+C+`
        setOutput(result);
      }
    `},xU=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var e=n.padInfo.front,t=n.padInfo.top,r=n.padInfo.left,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,v=n.filterWidth,g=4*Math.floor(n.inChannels/4),y=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+u+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+v+`; wC++) {
              int xC = xCCorner + wC * `+f+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},vC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.inHeight,i=n.inWidth,o=n.padInfo.top,u=n.padInfo.left,c=n.strideHeight,f=n.strideWidth,d=n.dilationHeight,p=n.dilationWidth,v=n.filterHeight,g=n.filterWidth,y=n.outChannels/n.inChannels,x="",w="";t&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,w="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+v+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+_+`
        `+w+`
        setOutput(result);
      }
    `},mC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var a=n.inHeight,i=n.inWidth,o=n.padInfo.top,u=n.padInfo.left,c=n.strideHeight,f=n.strideWidth,d=n.dilationHeight,p=n.dilationWidth,v=n.filterHeight,g=n.filterWidth,y=g,x="int xR; int xC; int xCOffset;",w=0;w<v;w++)for(var _=0;_<g;_++)x+=`
          vec4 xTexelR`+w+"C"+2*_+` = vec4(0.);
          vec4 wR`+w+"C"+_+` = vec4(0.);
          vec4 xR`+w+"C"+_+" = vec4(0.);";for(w=0;w<v;w++)for(var S=0;S<y;S++){if(x+=`
          xR = xRCorner + `+w*d+`;
          xC = xCCorner + `+(_=2*S)*p+`;
        `,f===1){if(_<g&&(x+=u%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+w+"C"+_+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+w+"C"+_+" = vec4(previous.zw, xTexelR"+w+"C"+_+`.xy);
                } else {
                  xR`+w+"C"+_+" = vec4(0, 0, xTexelR"+w+"C"+_+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xR`+w+"C"+_+" = xTexelR"+w+"C"+_+`;
              `,_+1<g)){var C=u%2==0?jO(p):p;p%2==0&&u%2==1||p%2!=0&&u%2!=1?(x+=`
                  xCOffset = xC + `+u%2+" + "+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(x+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+w+"C"+_+` = vec4(0.);
                    }
                  `),x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.xy);
                `):x+=`
                  xCOffset = xC + `+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+w+"C"+(_+1)+" = xTexelR"+w+"C"+(_+2)+`;
                `}}else _<g&&(x+=`
              if(xR >= 0 && xR < `+a+`) {
            `,u%2==1?(x+=`
                xCOffset = xC + 1 - `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
              `,_+1<g&&(x+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+f+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+w+"C"+(_+1)+" = vec4(xTexelR"+w+"C"+(_+2)+`.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".xy, xTexelR"+w+"C"+(_+2)+`.xy);
              `,_+1<g&&(x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
                `)),x+="}");_<g&&(x+=`
            vec4 wTexelR`+w+"C"+_+" = getW("+w+", "+_+`, d1, q);
            wR`+w+"C"+_+" = vec4(wTexelR"+w+"C"+_+".xz, wTexelR"+w+"C"+_+`.xz);
          `,_+1<g&&(x+=`
              vec4 wTexelR`+w+"C"+(_+1)+" = getW("+w+", "+(_+1)+`, d1, q);
              wR`+w+"C"+(_+1)+` =
                vec4(wTexelR`+w+"C"+(_+1)+".xz, wTexelR"+w+"C"+(_+1)+".xz);"))}for(w=0;w<v;w++)for(_=0;_<g;_++)x+="dotProd += xR"+w+"C"+_+" * wR"+w+"C"+_+";";var R="",T="";t&&(R=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,T="result = activation(result);");var O=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+R+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+x+`

        vec4 result = dotProd;
        `+O+`
        `+T+`
        setOutput(result);
      }
    `},wU=function(n,e,t,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=n[0],o=n[1],u=n[2],c=n[3],f=e[0],d=t[0],p=t[1];this.outputShape=[f,d,p,c];var v=r==="bilinear"?1:0,g=[o-1+".0",u-1+".0"],y=g[0],x=g[1],w=d>1?[""+(o-1)/(d-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],_=w[0],S=w[1],C=w[2],R=p>1?[""+(u-1)/(p-1),"(x2-x1) * width_ratio","x1*"+x+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+x],T=R[0],O=R[1],D=R[2];this.userCode=`
      const float height_ratio = float(`+_+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+O+`;

        float in_y = `+C+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+D+`;
        if( in_x < 0.0 || in_x > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+v+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},_U=function(n,e,t){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=n[n.length-1],i=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Lt(r)+` coords = getOutputCoords();
        int end = `+gC(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+gC(r,"coords")+` = idx;
          val += getX(`+function(o,u){if(o===1)return""+u;if(o===2)return u+".x, "+u+".y";if(o===3)return u+".x, "+u+".y, "+u+".z";if(o===4)return u+".x, "+u+".y, "+u+".z, "+u+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function gC(n,e){if(n===1)return""+e;if(n===2)return e+".y";if(n===3)return e+".z";if(n===4)return e+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var EU=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=uh.DENSE;var e=Ff(n),t=Gn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Is(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},SU=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=uh.DENSE;var e=Ff(n),t=Gn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Is(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},CU=function(){function n(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),RU=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},TU=function(n){this.variableNames=["A"],this.outTexUsage=Or.DOWNLOAD;var e=Gn();this.outputShape=n,this.userCode=`
      `+wA+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},OU=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Or.DOWNLOAD;var e=Gn();this.outputShape=n,this.userCode=`
      `+wA+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},AU=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=Gn(),a=e[0],i=e[1];this.outputShape=n;var o="result";t&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+Ux(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},kU=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Gn(),a=e[0],i=e[1];this.outputShape=n;var o="",u="result";t&&(u="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var f=0;f<=1;f++){var d=2*c+f;o+=`
          localCoords = coords;
          if(localCoords[2] + `+f+" < "+n[2]+`) {
            localCoords[2] += `+f+`;
            if(localCoords[1] + `+c+" < "+n[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Ux(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+u+`;
      }
    `},DU="return real * expR - imag * expI;",NU="return real * expI + imag * expR;",yC=function(n,e,t){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var a=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},IU=function(){function n(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(t.valueLoc,e)}},n}(),MU=function(n,e,t){this.variableNames=["A","indices"];var r=n.slice();r[t]=e,this.outputShape=r,this.rank=r.length;var a=Lt(this.rank),i=function(o,u){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var f=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],p=0;p<o.length;p++)p===u?d.push("int(getIndices("+f[p]+"))"):d.push(""+f[p]);return d.join()}(n,t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},FU=function(n,e,t){this.sliceDim=n,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var r=Lt(e.length),a=Lt(t.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function LU(n,e){var t=Gn();return DB(n,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function PU(n,e){return LB(n,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function BU(n,e){return PB(n,e,new Uint16Array([0,1,2,2,1,3]))}function Ih(n,e,t,r,a,i,o){zB(t,r);var u=BB(n,e),c=n.TEXTURE_2D;return Fe(n,e,function(){return n.bindTexture(c,u)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_MIN_FILTER,n.NEAREST)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_MAG_FILTER,n.NEAREST)}),Fe(n,e,function(){return n.texImage2D(c,0,a,t,r,0,i,o,null)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)}),u}function zU(n,e,t,r,a){var i=Gv(t,r);return Ih(n,e,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,n.FLOAT)}function UU(n,e,t,r,a){var i=Gv(t,r);return Ih(n,e,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function VU(n,e,t,r,a){var i=Gv(t,r);return Ih(n,e,i[0],i[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function jU(n,e,t,r,a){var i=Nh(t,r);return Ih(n,e,i[0],i[1],a.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function qU(n,e,t,r,a){var i=Nh(t,r);return Ih(n,e,i[0],i[1],a.internalFormatPackedHalfFloat,n.RGBA,a.textureTypeHalfFloat)}function WU(n,e,t,r){return Fe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),iC(n,e,t,"clipSpacePos",r,3,20,0)&&iC(n,e,t,"uv",r,2,20,12)}function HU(n,e,t,r,a,i,o){var u,c,f;Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),i instanceof Uint8Array?(u=new Uint8Array(r*a*4),c=n.UNSIGNED_BYTE,f=n.RGBA):(u=new Float32Array(r*a*4),c=n.FLOAT,f=o.internalFormatPackedFloat),u.set(i),Fe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,f,r,a,0,n.RGBA,c,u)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function GU(n,e,t,r){Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),r.data instanceof Uint8Array?Fe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):Fe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function QU(n,e,t,r,a){var i=n.createBuffer();Fe(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,i)});var o=16*t*r;return Fe(n,e,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)}),Fe(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,0)}),Fe(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),i}function $U(n,e,t){var r=n,a=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function KU(n,e,t,r,a){var i=Gv(t,r),o=i[0],u=i[1],c=new Uint8Array(t*r*4);return Fe(n,e,function(){return n.readPixels(0,0,o,u,a.downloadTextureFormat,n.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function XU(n,e,t,r,a,i,o,u){var c=n,f=new Float32Array(function(d,p){var v=Nh(d,p);return v[0]*v[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,f),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),f}function YU(n,e,t,r){var a=new Float32Array(t*r*4);return Fe(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,a)}),a}var ZU=function(){function n(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=ue().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,RB(t,e)):this.gl=ri(t);var r="WEBGL_color_buffer_float";if(ue().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=up(this.gl,this.debug,"OES_texture_float"),Xr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=up(this.gl,this.debug,"OES_texture_half_float");else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Xr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=up(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Xr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Xr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=PU(this.gl,this.debug),this.indexBuffer=BU(this.gl,this.debug),this.framebuffer=UB(this.gl,this.debug),this.textureConfig=kx(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return ue().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Fe(t,this.debug,function(){return t.finish()}),Fe(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Fe(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Fe(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Fe(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Fe(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),zU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),UU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),VU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),GU(this.gl,this.debug,e,t)},n.prototype.uploadDenseMatrixToTexture=function(e,t,r,a){this.throwIfDisposed(),HU(this.gl,this.debug,e,t,r,a,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),qU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),jU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(oC(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Fe(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return KU(a.gl,a.debug,t,r,a.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(e,t,r,a,i,o){return XU(this.gl,e,0,0,0,i,o,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return $U(this.gl,e,t)},n.prototype.createBufferFromTexture=function(e,t,r){this.bindTextureToFrameBuffer(e);var a=QU(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},n.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},n.prototype.createFence=function(e){var t,r,a=this;if(ue().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var u=i.clientWaitSync(o,0,0);return u===i.ALREADY_SIGNALED||u===i.CONDITION_SATISFIED},t=o}else ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(t,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return YU(a.gl,a.debug,t,r)})},n.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,r=NB(t,this.debug,e),a=LU(t,this.debug),i=MB(t,this.debug);return Fe(t,this.debug,function(){return t.attachShader(i,a)}),Fe(t,this.debug,function(){return t.attachShader(i,r)}),FB(t,this.debug,i),this.debug&&Zy(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=WU(t,this.debug,this.program,this.vertexBuffer)),i},n.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Fe(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},n.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Zy(this.gl,this.debug,this.program),Fe(this.gl,this.debug,function(){return t.gl.useProgram(e)})},n.prototype.getUniformLocation=function(e,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?jB(this.gl,this.debug,e,t):qB(this.gl,e,t)},n.prototype.getAttributeLocation=function(e,t){var r=this;return this.throwIfDisposed(),Fe(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,t)})},n.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},n.prototype.setInputMatrixTexture=function(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),WB(this.gl,this.debug,this.program,e,t,r)},n.prototype.setOutputMatrixTexture=function(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)},n.prototype.setOutputPackedMatrixTexture=function(e,t,r){this.throwIfDisposed();var a=Nh(t,r),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)},n.prototype.setOutputMatrixWriteRegion=function(e,t,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,t)},n.prototype.setOutputPackedMatrixWriteRegion=function(e,t,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&Zy(this.gl,this.debug,this.program),lp(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Fe(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Fe(this.gl,this.debug,function(){return e.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=up(this.gl,this.debug,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},n.prototype.endQuery=function(){if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(e){return ke(this,void 0,void 0,function(){var t=this;return De(this,function(r){switch(r.label){case 0:return[4,J2(function(){return t.disposed||t.isQueryAvailable(e,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},n.prototype.pollFence=function(e){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var e=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},n.prototype.addItemToPoll=function(e,t){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||J2(function(){return r.pollItems(),r.itemsToPoll.length===0})},n.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Jy(this.gl,this.debug,e,this.framebuffer),this.debug&&lp(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Jy(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&lp(this.gl)):oC(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var r=t();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(e,t,r){this.throwIfDisposed();var a=this.gl;Jy(a,this.debug,e,this.framebuffer),this.debug&&lp(a),this.outputTexture=e,Fe(a,this.debug,function(){return a.viewport(0,0,t,r)}),Fe(a,this.debug,function(){return a.scissor(0,0,t,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(e,t,r,a){var i=this;this.throwIfDisposed(),Fe(this.gl,this.debug,function(){return i.gl.scissor(e,t,r,a)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n}();function bC(n,e){if(n.length!==e.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+e.length+" inputs");n.forEach(function(t,r){var a=t.logicalShape,i=e[r],o=i.shape;if(!On(a,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+o+" must match");if(!t.isUniform||!i.isUniform){var u=t.texShape,c=i.isUniform?null:i.texData.texShape;if(!On(u,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+u+" and "+c+" must match")}})}var JU=function(n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=t.filterWidth,a=t.inChannels,i=t.strideWidth,o=t.strideHeight,u=t.padInfo,c=t.outWidth,f=t.dilationWidth,d=t.dilationHeight,p=t.dataFormat,v=u.left,g=u.top,y=a*r,x=Gn(),w=p==="channelsLast",_=w?0:1,S=w?1:2,C="",R=0;R<=1;R++)for(var T=0;T<=1;T++)C+=`
          blockIndex = rc.y + `+T+`;
          pos = rc.x + `+R+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+g+`;
            d0 = offsetY + `+d+" * (pos / "+y+`);

            if(d0 < `+e[_]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+v+`.);
              d1 = offsetX + `+f+" * (int(mod(float(pos), "+y+".) / "+a+`.));

              if(d1 < `+e[S]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+w+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*R+T)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*R+T)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+C+`

        `+x.output+` = result;
      }
    `},eV=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=e,u=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+u+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},tV=function(n,e,t,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=t,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},nV=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=e,u=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+u+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},rV=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideHeight,t=n.strideWidth,r=n.dilationHeight,a=n.effectiveFilterHeight,i=n.effectiveFilterWidth,o=a-1-n.padInfo.top,u=i-1-n.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},aV=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.dilationDepth,i=n.dilationHeight,o=n.dilationWidth,u=n.effectiveFilterDepth,c=n.effectiveFilterHeight,f=n.effectiveFilterWidth,d=u-1-n.padInfo.front,p=c-1-n.padInfo.top,v=f-1-n.padInfo.left,g=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+p+", "+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+f+` +
                  wR * `+f+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},a0=function(n,e,t,r,a,i,o){t===void 0&&(t=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var u=t?n[1]:n[2],c=Math.ceil(u/2),f=t?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",p=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";i&&(g=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,y="result = activation(result);");var x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+f+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+v[0]+`);
          result += (`+p[1]+" * "+v[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+x+`

        `+y+`

        setOutput(result);
      }
    `},iV=function(){function n(e,t,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(t.seedLoc,e)}},n}(),oV=function(n,e,t,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},sV=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var e=n.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=dr("rc",e),r=Lt(e),a=function(u,c,f){if(u===1)return"rc > "+c[0];for(var d="",p=u-2;p<u;p++)d+=f[p]+" >= "+c[p],p<u-1&&(d+="||");return d}(e,n,t),i=function(u,c,f,d){if(u===1)return"";var p=d.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+f+`;
  `}(e,n[n.length-1],n[n.length-2],t),o=function(u,c){var f=u.length,d=function(p,v){for(var g=[],y=0;y<=1;y++)for(var x=0;x<=1;x++){for(var w=(y===0?"r":"rp1")+", "+(x===0?"c":"cp1"),_=2;_<p;_++)w=v[v.length-1-_]+","+w;g.push(w)}return g}(f,c);return f===1?`getA(rc),
            rc + 1 >= `+u[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(n,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},uV=function(n,e,t){this.variableNames=["x"],this.outputShape=e.map(function(c,f){return c[0]+n[f]+c[1]});var r=n.length,a=Lt(r),i=e.map(function(c){return c[0]}).join(","),o=e.map(function(c,f){return c[0]+n[f]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+u+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},lV=function(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(w,_){return w[0]+n[_]+w[1]});for(var r=n.length,a=Lt(r),i=e.map(function(w){return w[0]}).join(","),o=e.map(function(w,_){return w[0]+n[_]}).join(","),u=dr("rc",r),c=dr("source",r),f=u[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+c.slice(-2).join()+")",p=[a+" rc = outputLoc;",u[r-1]+` += 1;
       if(`+f+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+u[r-2]+` += 1;
       if(`+u[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+u[r-1]+` += 1;
         if(`+f+") {"],v=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",y=0,x=r===1?2:4;y<x;y++)g+=`
        `+p[y]+`
        if (`+v+`) {
          result[`+y+"] = float("+t+`);
        } else {
          `+a+` source = rc - start;
          result[`+y+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},i0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideHeight,i=n.strideWidth,o=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,f=n.effectiveFilterWidth,d=n.padInfo.top,p=n.padInfo.left;this.outputShape=n.outShape;var v=e==="avg",g="0.0";if(v||(g="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+d+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+u+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+f+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),w=r%4,_=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+d+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+x+`; wC += 4) {
            int xC = xCCorner + wC * `+u+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              getValue(batch, xR, xC + 3 * `+u+`, d)
            );

            `+_+`
          }

          int xC = xCCorner + `+x+`;
          if (`+(w===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              initializationValue
            );

            `+_+`
          }
        }
        setOutput(`+y+`);
      }
    `}},o0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,v=n.effectiveFilterWidth,g=n.padInfo.front,y=n.padInfo.top,x=n.padInfo.left;this.outputShape=n.outShape;var w=e==="avg",_="0.0";if(w||(_="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+u+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+v+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+v+` +
                      wR * `+v+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var S=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(S="avgValue / count");var C=4*Math.floor(r/4),R=r%4,T=`
      if (`+w+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float initializationValue = `+_+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+_+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+u+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+C+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+T+`
            }

            int xC = xCCorner + `+C+`;
            if (`+(R===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(R===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(R===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+T+`
            }
          }
          setOutput(`+S+`);
        }
      }
    `}},cV=function(n,e){this.variableNames=["x"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=Math.ceil(a/t);this.outputShape=[r,i];var o="0.0",u="";e==="prod"?o="1.0":e==="min"?(o="1.0 / 1e-20",u="min"):e==="max"&&(o="-1.0 / 1e-20",u="max");var c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");var f=4*Math.floor(t/4),d=t%4,p=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+u+`(values, minMaxValue);
      }
    `,v="vec4";e==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,v="bvec4"):e==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,v="bvec4");var g="";a%t>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+f+`; i += 4) {
          int inIdx = inOffset + i;
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+f+`;
        if (`+(d===1)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===2)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===3)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+c+`);
      }
    `},fV=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var t="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),t+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Is(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+Ux(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+t+`

        setOutput(result);
      }
    `},hV=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],o=n.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],d=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},dV=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},pV=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`,
          `+c[1]/f[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(u-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},vV=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],o=n.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],d=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+f[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+f[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},mV=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},gV=function(n,e){this.variableNames=["x"];var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=n,t!==1){var r=n.map(function(i,o){return function(u){return e.indexOf(u)!==-1&&n[u]!==1?n[u]+" - coords["+u+"] - 1":"coords["+u+"]"}(o)}).join(","),a=Lt(t);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},yV=function(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=n;var r=dr("rc",t),a=r[t-1]+" + 1 < "+this.outputShape[t-1],i=r[t-2]+" + 1 < "+this.outputShape[t-2],o=Lt(t);function u(c){var f=n.map(function(d,p){return function(v,g){return e.indexOf(v)!==-1&&n[v]!==1?n[v]+" - "+g[v]+" - 1":""+g[v]}(p,c)});return"getChannel(getX("+f.join(",")+"), vec2("+f.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return u(c)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",u(c)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},xC=function(n,e,t,r,a,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var u=Lt(a.length),c=Lt(i.length),f="";t===1?f="i":t===2&&(f="i, j");var d="getIndices("+f+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var v="getUpdates("+p+")",g=e>1?"strides[j]":"strides";this.userCode=`
        `+u+" strides = "+u+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+v+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},bV=function(n,e){this.variableNames=["x","segmentIds"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=n.numSegments,o=i*Math.ceil(a/t);this.outputShape=[r,o];var u=4*Math.floor(t/4),c=t%4,f=`
        sumValue += dot(values, segFilter);
    `,d="";a%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var p="";a%t>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+f+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+f+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+f+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+f+`
        }
        setOutput(sumValue);
      }
    `},xV=function(n,e,t){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],u=[],c=0;c<e.length;c++)u.push(""+i[c]),c<n&&o.push(""+i[c]);r=o.join(),a=u.join()}var f=Lt(t);this.userCode=`
      void main() {
        `+f+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},wV=function(){function n(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,r=Lt(this.rank),a="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return s0.slice(0,o).map(function(u){return"sourceLoc."+u}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(o,u){return"sourceLoc."+s0[u]+" = start["+u+"] + coords."+s0[u]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+t+`
        setOutput(getSource(`+i+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),s0=["x","y","z","w","u","v"],_V=function(){function n(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Lt(this.rank),r=dr("coords",this.rank),a=dr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",o="getChannel(getSource("+a.join()+"), "+i+")",u=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+o+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map(function(d,p){return"start["+p+"]"}).join()+");":e.map(function(d,p){return a[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+f+`
        vec4 result = vec4(0.);
        `+u+`
        `+c+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),EV=function(n,e,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=Lt(t.length),i=Lt(t.length),o="";if(r===1)o="coords * strides + begin";else{var u=0;o=t.map(function(c,f){return u++,t.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(u-1)+"] * strides["+f+"] + begin["+f+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+n+`);
      `+a+" strides = "+a+"("+e+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},SV=function(){function n(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(e,t,r){var a,i=wC(t,r),o=_C(e,i,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var u=this.freeTextures[o].shift();return this.usedTextures[o].push(u),u}return this.numUsedTextures++,this.log(),i===Tr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Tr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Tr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Tr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Tr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),a},n.prototype.releaseTexture=function(e,t,r,a){if(this.freeTextures!=null){var i=_C(t,wC(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],u=o.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(u,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(a){e.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function wC(n,e){if(n===Or.UPLOAD)return Tr.PACKED_2X2_FLOAT32;if(n===Or.RENDER||n==null)return function(t){return ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Tr.PACKED_2X2_FLOAT32:Tr.UNPACKED_FLOAT32:t?Tr.PACKED_2X2_FLOAT16:Tr.UNPACKED_FLOAT16}(e);if(n===Or.DOWNLOAD||n===Or.PIXELS)return Tr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function _C(n,e,t){return n[0]+"_"+n[1]+"_"+e+"_"+t}var CV=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[r]*e[r];this.outputShape=t,this.rank=t.length;var a=Lt(this.rank),i=function(o){var u=o.length;if(u>5)throw Error("Tile for rank "+u+" is not yet supported");if(u===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],f=[],d=0;d<o.length;d++)f.push("imod("+c[d]+", "+o[d]+")");return f.join()}(n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},RV=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];this.outputShape=t,this.rank=t.length;var a=Lt(this.rank),i=function(o){var u=o.length;if(u>6)throw Error("Transpose for rank "+u+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],f=new Array(u),d=0;d<o.length;d++)f[o[d]]=c[d];return f.join()}(e);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},TV=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Lt(this.rank),i=xA("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=i[r];var u="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+t[this.rank-1],f="getChannel(getA("+o.join()+"), "+u+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+f+`;
      if(`+c+`) {
        result[1] = `+f+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+f+`;
        if(`+c+`) {
          result[3] = `+f+`;
        }
      }
      setOutput(result);
    }
    `},Vx=1.7580993408473768,jx=1.0507009873554805,nt=function(n,e){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ea="if (isnan(x)) return x;",OV="return x;",EC="return abs(x);",CA=Ea+`
  return (x < 0.0) ? 0.0 : x;
`,RA=Ea+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,TA="return (x >= 0.0) ? x : (exp(x) - 1.0);",AV=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Vx+`;
  float scale = `+jx+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,SC="return -x;",CC="return ceil(x);",RC="return floor(x);",TC="return exp(x);",OC="return exp(x) - 1.0;",kV=Ea+`
  return sin(x);
`,DV=Ea+`
  return cos(x);
`,NV=Ea+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,IV=Ea+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,MV=Ea+`
  return atan(x);
`,FV=Ea+"return log(x + sqrt(x * x + 1.0));",LV=Ea+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,PV=Ea+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,dp="return x;",BV="return x;",OA=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AA=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kA=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,xf=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},zV=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var e=n.length,t=dr("rc",e),r=Lt(e),a=function(u,c){if(u===1)return"rc";for(var f="",d=0;d<u;d++)f+=c[d],d<u-1&&(f+=",");return f}(e,t),i=t.slice(-2),o=e<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},pp={};function vp(n,e){if(e===void 0&&(e=!1),n==="linear")return e?BV:OV;if(n==="relu")return e?OA:CA;if(n==="elu")return e?kA:TA;if(n==="relu6")return e?AA:RA;if(n==="prelu")return e?SA:EA;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var UV=600,VV=function(n){function e(t){var r,a=n.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!ue().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var i=ri(ue().getNumber("WEBGL_VERSION"));a.binaryCache=((r=ue().getNumber("WEBGL_VERSION"))in pp||(pp[r]={}),pp[r]),a.gpgpu=new ZU(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=t,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=t.gl.canvas;return a.textureManager=new SV(a.gpgpu),a.numMBBeforeWarning=ue().global.screen==null?1024:ue().global.screen.height*ue().global.screen.width*window.devicePixelRatio*UV/1024/1024,a.texData=new fA(a,W),a}return _a(e,n),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,r,a){if(ue().getBool("DEBUG")&&this.checkNumericalProblems(t),a==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:t,usage:Or.UPLOAD}),i},e.prototype.move=function(t,r,a,i){if(ue().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:a,dtype:i,values:r,usage:Or.UPLOAD})},e.prototype.readSync=function(t){var r=this.texData.get(t),a=r.values,i=r.dtype,o=r.complexTensors,u=r.slice,c=r.shape,f=r.isPacked;if(u!=null){var d=void 0;d=f?new xf(c,dp):new nt(c,dp);var p=this.runWebGLProgram(d,[{dataId:t,shape:c,dtype:i}],i),v=this.readSync(p.dataId);return this.disposeData(p.dataId),v}if(a!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return a;var g,y,x=this.activeTimers!=null;return x&&(g=za()),i==="complex64"?y=kb(o.real.dataSync(),o.imag.dataSync()):y=this.getValuesFromTexture(t),x&&(this.downloadWaitMs+=za()-g),this.convertAndCacheOnCPU(t,y)},e.prototype.read=function(t){return ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return De(this,function(k){switch(k.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(I){return r.push(I)})];if(a=this.texData.get(t),i=a.values,o=a.shape,u=a.slice,c=a.dtype,f=a.complexTensors,d=a.isPacked,u!=null)return p=void 0,p=d?new xf(o,dp):new nt(o,dp),v=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:c}],c),g=this.read(v.dataId),this.disposeData(v.dataId),[2,g];if(i!=null)return[2,this.convertAndCacheOnCPU(t)];if(!ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ue().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,c!=="complex64"&&ue().get("WEBGL_BUFFER_SUPPORTED")&&(x=this.decode(t),w=this.texData.get(x.dataId),y=(N=this.gpgpu).createBufferFromTexture.apply(N,[w.texture].concat(Ff(o)))),this.pendingRead.set(t,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([f.real.data(),f.imag.data()])];case 3:return S=k.sent(),C=S[0],R=S[1],_=kb(C,R),[3,5];case 4:y==null?_=this.getValuesFromTexture(t):(T=Ie(o),_=this.gpgpu.downloadFloat32MatrixFromBuffer(y,T)),k.label=5;case 5:return x!=null&&this.disposeData(x.dataId),O=this.convertAndCacheOnCPU(t,_),D=this.pendingRead.get(t),this.pendingRead.delete(t),D.forEach(function(I){return I(O)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,O]}})})},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var a=t[r];if(!AB(a))throw ue().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.isPacked,c=Ie(i);if(ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var f=this.decode(t),d=this.texData.get(f.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(Ff(i))).subarray(0,c);return this.disposeData(f.dataId),p}var v=ue().getBool("WEBGL_PACK")&&u===!0,g=v?e0(i):i,y=v?new OU(g):new TU(g),x=this.runWebGLProgram(y,[{shape:g,dtype:o,dataId:t}],"float32"),w=this.texData.get(x.dataId),_=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,c);return this.disposeData(x.dataId),_},e.prototype.time=function(t){return ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f;return De(this,function(d){switch(d.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,t(),o=Xl(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),u=Xl(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return f=d.sent(),c.kernelMs=lB(f),c.getExtraProfileInfo=function(){return f.map(function(p,v){return{name:u[v],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:za(),endMs:null}},e.prototype.endTimer=function(t){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=za(),t)},e.prototype.getQueryTime=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var r=this.texData.get(t),a=r.texture,i=r.dtype,o=r.texShape,u=r.usage,c=r.isPacked,f=r.slice,d=f&&f.origDataId||t,p=this.dataRefCount.get(d);p>1?this.dataRefCount.set(d,p-1):(this.dataRefCount.delete(d),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,u,c)));var v=this.texData.get(t);v.texture=null,v.texShape=null,v.isPacked=!1,v.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return ue().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=W.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(i){return a.texData.get(i.dataId).texture==null&&i.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,r){var a=this.makeOutput(t.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,a);if(Ie(a)===0)return zn([],a,t.dtype);var i=this.texData.get(t.dataId).isPacked,o=lA(t.shape,r,a);if(i||!o){var u=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _V(a):new wV(a),c=u.getCustomSetupFunc(r);return this.compileAndRun(u,[t],null,c)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,a)},e.prototype.shallowSlice=function(t,r,a){var i=this.texData.get(t.dataId),o=this.makeOutput(a,t.dtype),u=this.texData.get(o.dataId);Object.assign(u,i),u.shape=a,u.dtype=t.dtype;var c=cA(r,t.strides);i.slice&&(c+=i.slice.flatOffset),u.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||t.dataId};var f=this.dataRefCount.get(u.slice.origDataId)||1;return this.dataRefCount.set(u.slice.origDataId,f+1),o},e.prototype.stridedSlice=function(t,r,a,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,a,i);var o=Fx(r,a,i);if(o.some(function(c){return c===0}))return zn([],o);var u=new EV(r,i,o);return this.compileAndRun(u,[t])},e.prototype.reverse=function(t,r){var a=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yV(t.shape,r):new gV(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var a=t.map(function(g){return Kr(g)}),i=t.map(function(g){return ja(g)});return Pn(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>ue().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),u=this.concat(t.slice(0,o),r),c=this.concat(t.slice(o),r);return this.concat([u,c],r)}if(ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var f=new dU(t.map(function(g){return g.shape}),r);return this.compileAndRun(f,t)}var d=Zl(t.map(function(g){return g.shape}),r),p=t.map(function(g){return g.as2D(-1,Ie(g.shape.slice(r)))}),v=new hU(p.map(function(g){return g.shape}));return this.compileAndRun(v,p).reshape(d)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,SC,t.dtype);var r=new nt(t.shape,SC);return this.compileAndRun(r,[t])},e.prototype.batchMatMul=function(t,r,a,i){var o=a?t.shape[2]:t.shape[1],u=i?r.shape[1]:r.shape[2],c=a?t.shape[1]:t.shape[2],f=t.shape[0];if((o===1||u===1)&&c>1e3){a&&(t=t.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var d=u===1?t:t.as3D(f,c,1),p=u===1?2:1,v=u===1?r.as3D(f,1,c):r;return this.multiply(d,v).sum(p,!0)}var g=Bn(t.dtype,r.dtype),y=new a0(t.shape,[f,o,u],a,i);return this.compileAndRun(y,[t,r],g)},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=i?r.shape[2]:r.shape[1],p=o?a.shape[1]:a.shape[2],v=r.shape[0],g=Bn(r.dtype,a.dtype),y=u!=null,x=f!=null,w=c?vp(c,!0):null,_=new a0(r.shape,[v,d,p],i,o,y,w,x),S=[r,a];return u&&S.push(u),f&&S.push(f),this.compileAndRun(_,S,g)},e.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var a=this.texData.get(t.dataId),i=this.texData.get(r.dataId),o=new hC(sU,t.shape,r.shape),u=new hC(uU,t.shape,r.shape),c=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],f=this.compileAndRun(o,c),d=this.compileAndRun(u,c),p=this.complex(f,d);return f.dispose(),d.dispose(),p}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,dC,t.dtype);var v=new Kt(dC,t.shape,r.shape);return this.compileAndRun(v,[t,r],t.dtype)},e.prototype.batchNormalization=function(t,r,a,i,o,u){var c=[t,r,a],f=null;u!=null&&(f=u.shape,c.push(u));var d=null;if(o!=null&&(d=o.shape,c.push(o)),ue().getBool("WEBGL_PACK_NORMALIZATION")){var p=new oU(t.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(p,c)}var v=new iU(t.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(v,c)},e.prototype.localResponseNormalization4D=function(t,r,a,i,o){var u=ue().getBool("WEBGL_PACK_NORMALIZATION")?new nV(t.shape,r,a,i,o):new eV(t.shape,r,a,i,o);return this.compileAndRun(u,[t])},e.prototype.LRNGrad=function(t,r,a,i,o,u,c){var f=new tV(r.shape,i,o,u,c);return this.compileAndRun(f,[r,a,t])},e.prototype.tile=function(t,r){if(t.dtype==="string"){var a=this.readSync(t.dataId).map(function(o){return fv(o)});return yA(Je(t.shape,t.dtype,a),r)}var i=new CV(t.shape,r);return this.compileAndRun(i,[t])},e.prototype.pad=function(t,r,a){var i=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lV(t.shape,r,a):new uV(t.shape,r,a);return this.compileAndRun(i,[t])},e.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var a=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TV(t.shape,r):new RV(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.gather=function(t,r,a){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,a);var i=new MU(t.shape,r.size,a);return this.compileAndRun(i,[t,r])},e.prototype.batchToSpaceND=function(t,r,a){P(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(p,v){return p*v}),o=gv(t.shape,r,i),u=yv(o.length,r.length),c=bv(t.shape,r,i),f=iA(a,r.length),d=oA(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,d)},e.prototype.spaceToBatchND=function(t,r,a){P(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(v,g){return v*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=gv(c.shape,r,i,!1),d=yv(f.length,r.length,!1),p=bv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},e.prototype.reduce=function(t,r,a){var i=t.shape[0],o=t.shape[1],u=t0(o),c=new cV({windowSize:u,inSize:o,batchSize:i},r),f=this.compileAndRun(c,[t],a);return f.shape[1]===1?f:this.reduce(f,r,a)},e.prototype.argReduce=function(t,r,a){a===void 0&&(a=null);var i=t.shape[0],o=t.shape[1];a!=null&&(i=a.shape[0],o=a.shape[1]);var u=t0(o),c=new Xz({windowSize:u,inSize:o,batchSize:i},r,a==null),f=[t];a!=null&&f.push(a);var d=this.compileAndRun(c,f,"int32");return d.shape[1]===1?d:this.argReduce(t,r,d)},e.prototype.argReducePacked=function(t,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:t.shape,o=t0(i[i.length-1]),u=new nU(i,o,r,a==null),c=a==null?[t]:[t,a],f=this.compileAndRun(u,c,"int32");return f.rank===t.rank?this.argReducePacked(t,r,f):f},e.prototype.sum=function(t,r){Rr("sum",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o),c=Qy(t.dtype);return this.reduce(u,"sum",c).reshape(i)},e.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o),c=Qy(t.dtype);return this.reduce(u,"prod",c).reshape(i)},e.prototype.unsortedSegmentSum=function(t,r,a){var i=0,o=ai([i],t.rank),u=t;o!=null&&(u=t.transpose(o),i=ii(1,t.rank)[0]);var c=function(g,y,x){for(var w=[],_=g.length,S=0;S<_;S++)S!==y?w.push(g[S]):w.push(x);return w}(u.shape,i,a),f=Ie([u.shape[i]]),d=u.as2D(-1,f),p=Qy(t.dtype),v=this.segOpCompute(d,"unsortedSegmentSum",r,p,a).reshape(c);return o!=null&&(v=v.transpose(Dx(o))),v},e.prototype.segOpCompute=function(t,r,a,i,o){var u=t.shape[0],c=t.shape[1],f=function(v,g){var y,x=!1;for(v<=uA?(y=v,x=!0):y=wb(v,Math.floor(Math.sqrt(v)));!x;)y>g||y===v?x=!0:y=wb(v,y+1);return y}(c,o),d=new bV({windowSize:f,inSize:c,batchSize:u,numSegments:o}),p=this.compileAndRun(d,[t,a],i);return p.shape[1]===o?p:(a=mv(0,o).tile([c/f]),this.segOpCompute(p,r,a,i,o))},e.prototype.argMinMaxReduce=function(t,r,a){var i=[r];if(Rr("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,t.rank),!ue().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=Wn(t.shape,i),u=o[0],c=Ie(o[1]),f=t.as2D(-1,c);return this.argReduce(f,a).reshape(u)}return this.argReducePacked(t,a)},e.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},e.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},e.prototype.cumsum=function(t,r,a,i){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var o=new _U(t.shape,a,i);return this.compileAndRun(o,[t])},e.prototype.equal=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Kt("return float(a == b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.notEqual=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Kt("return float(a != b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Kt("return float(a < b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.lessEqual=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Kt("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Kt("return float(a > b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greaterEqual=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Kt("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalNot=function(t){var r=new nt(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},e.prototype.logicalAnd=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Kt("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalOr=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Kt("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.select=function(t,r,a){var i=new xV(t.rank,r.shape,r.rank);return this.compileAndRun(i,[t,r,a],Bn(r.dtype,a.dtype))},e.prototype.where=function(t){pv("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return zx(t.shape,r)},e.prototype.topk=function(t,r,a){return bA(t.dataSync(),t.shape,t.dtype,r)},e.prototype.min=function(t,r){Rr("min",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"min",u.dtype).reshape(i)},e.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.mod=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);Rr("max",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"max",u.dtype).reshape(i)},e.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.all=function(t,r){Rr("all",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"all",u.dtype).reshape(i)},e.prototype.any=function(t,r){Rr("any",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"any",u.dtype).reshape(i)},e.prototype.realDivide=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Kt(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"float32")},e.prototype.floorDiv=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Kt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"int32")},e.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,n0);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var a=Bn(t.dtype,r.dtype);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,n0,a);var i=new Kt(n0,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.packedUnaryOp=function(t,r,a){var i=new xf(t.shape,r);return this.compileAndRun(i,[t],a)},e.prototype.packedBinaryOp=function(t,r,a,i,o){o===void 0&&(o=!1);var u=new Oi(a,t.shape,r.shape,o);return this.compileAndRun(u,[t,r],i)},e.prototype.complexSeparableBinaryOp=function(t,r,a){var i=this,o=this.texData.get(t.dataId),u=this.texData.get(r.dataId),c=[[o.complexTensors.real,u.complexTensors.real],[o.complexTensors.imag,u.complexTensors.imag]].map(function(v){var g=v[0],y=v[1],x=i.makeComplexComponentTensorInfo(t,g),w=i.makeComplexComponentTensorInfo(r,y),_=new Kt(a,t.shape,r.shape);return i.compileAndRun(_,[x,w],Bn(g.dtype,y.dtype))}),f=c[0],d=c[1],p=this.complex(f,d);return f.dispose(),d.dispose(),p},e.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>ue().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),a=this.addN(t.slice(0,r)),i=this.addN(t.slice(r));return this.addN([a,i])}var o=t.map(function(f){return f.dtype}).reduce(function(f,d){return Bn(f,d)}),u=t.map(function(f){return f.shape}),c=ue().getBool("WEBGL_PACK")?new Kz(t[0].shape,u):new $z(t[0].shape,u);return this.compileAndRun(c,t,o)},e.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,r0);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var a=Bn(t.dtype,r.dtype);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,r0,t.dtype);var i=new Kt(r0,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.pow=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),i=Bn(t.dtype,r.dtype);return this.compileAndRun(a,[t,r],i)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,CC,t.dtype);var r=new nt(t.shape,CC);return this.compileAndRun(r,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,RC,t.dtype);var r=new nt(t.shape,RC);return this.compileAndRun(r,[t])},e.prototype.sign=function(t){var r=new nt(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},e.prototype.isNaN=function(t){var r=new nt(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isInf=function(t){var r=new nt(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isFinite=function(t){var r=new nt(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.round=function(t){var r=new nt(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,TC,t.dtype);var r=new nt(t.shape,TC);return this.compileAndRun(r,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,OC,t.dtype);var r=new nt(t.shape,OC);return this.compileAndRun(r,[t])},e.prototype.softmax=function(t,r){var a=yn([r],t.shape),i=this.max(t,a),o=mr(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new nt(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},e.prototype.log1p=function(t){var r=new nt(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},e.prototype.sqrt=function(t){var r=new nt(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new nt(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},e.prototype.reciprocal=function(t){var r=new nt(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},e.prototype.relu=function(t){var r;return r=ue().getBool("WEBGL_PACK")?new xf(t.shape,OA):new nt(t.shape,CA),this.compileAndRun(r,[t])},e.prototype.relu6=function(t){var r;return r=ue().getBool("WEBGL_PACK")?new xf(t.shape,AA):new nt(t.shape,RA),this.compileAndRun(r,[t])},e.prototype.prelu=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(SA,t.shape,r.shape):new Kt(EA,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.elu=function(t){if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,kA,t.dtype);var r=new nt(t.shape,TA);return this.compileAndRun(r,[t])},e.prototype.eluDer=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new Kt("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.selu=function(t){var r=new nt(t.shape,AV);return this.compileAndRun(r,[t])},e.prototype.int=function(t){var r=new nt(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},e.prototype.clip=function(t,r,a){var i,o=(i=ue().getBool("WEBGL_PACK_CLIP")?new cU(t.shape):new lU(t.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[t],null,o)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,EC,t.dtype);var r=new nt(t.shape,EC);return this.compileAndRun(r,[t])},e.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),a=new fU(t.shape),i=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(a,i)},e.prototype.sigmoid=function(t){var r=new nt(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},e.prototype.softplus=function(t){var r=new nt(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},e.prototype.sin=function(t){var r=new nt(t.shape,kV);return this.compileAndRun(r,[t])},e.prototype.cos=function(t){var r=new nt(t.shape,DV);return this.compileAndRun(r,[t])},e.prototype.tan=function(t){var r=new nt(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},e.prototype.asin=function(t){var r=new nt(t.shape,NV);return this.compileAndRun(r,[t])},e.prototype.acos=function(t){var r=new nt(t.shape,IV);return this.compileAndRun(r,[t])},e.prototype.atan=function(t){var r=new nt(t.shape,MV);return this.compileAndRun(r,[t])},e.prototype.atan2=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.sinh=function(t){var r=new nt(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.cosh=function(t){var r=new nt(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.tanh=function(t){var r=new nt(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},e.prototype.asinh=function(t){var r=new nt(t.shape,FV);return this.compileAndRun(r,[t])},e.prototype.acosh=function(t){var r=new nt(t.shape,LV);return this.compileAndRun(r,[t])},e.prototype.atanh=function(t){var r=new nt(t.shape,PV);return this.compileAndRun(r,[t])},e.prototype.erf=function(t){var r=new nt(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},e.prototype.step=function(t,r){var a=new nt(t.shape,function(i){return i===void 0&&(i=0),Ea+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(a,[t])},e.prototype.conv2dByMatMul=function(t,r,a,i,o,u){var c=t.shape,f=this.texData.get(t.dataId),d=a.inChannels,p=c[0]*c[1]*c[2],v=a.outChannels,g=a.dataFormat==="channelsLast",y=(p===1||v===1)&&d>1e3,x=c[2]%2!=0&&!!f.isPacked;if(y||!ue().getBool("WEBGL_LAZILY_UNPACK")||!ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!x){var w=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],_=this.reshape(t,[1,w,a.inChannels]),S=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:_,b:S,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),a.outShape)}var C=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),R={dataId:t.dataId,shape:[1,C,a.inChannels],dtype:t.dtype},T=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,P(fp(f.shape,R.shape),function(){return"packed reshape "+f.shape+" to "+R.shape+" isn't free"});var O=this.reshape(r,[1,a.inChannels,a.outChannels]),D=this.fusedBatchMatMul({a:R,b:O,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),N=this.texData.get(D.dataId);return P(N.isPacked,function(){return"batchMatMul result is expected to be packed"}),f.shape=T,N.shape=a.outShape,W.makeTensorFromDataId(D.dataId,a.outShape,D.dtype)},e.prototype.conv2dWithIm2Row=function(t,r,a,i,o,u){var c=a.filterWidth,f=a.filterHeight,d=a.inChannels,p=a.outWidth,v=a.outHeight,g=a.dataFormat==="channelsLast",y=c*f*d,x=v*p,w=[y,x],_=t.squeeze([0]),S=r.reshape([1,y,-1]),C=new JU(w,_.shape,a),R=this.compileAndRun(C,[_]).reshape([1,w[0],w[1]]),T=i!=null,O=u!=null,D=o?vp(o,!0):null,N=new a0(R.shape,[1,x,a.outChannels],!0,!1,T,D,O),k=[R,S];i&&k.push(i),O&&k.push(u);var I=this.compileAndRun(N,k);return g?I.reshape([1,v,p,a.outChannels]):I.reshape([1,a.outChannels,v,p])},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,o,u,c);if(ue().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,o,u,c);var f=o!=null,d=c!=null,p=u?vp(u,!1):null,v=new pC(i,f,p,d),g=[r,a];return o&&g.push(o),c&&g.push(c),this.compileAndRun(v,g)},e.prototype.conv2d=function(t,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,a);if(ue().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,a);var i=new pC(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerInput=function(t,r,a){var i=new vU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerFilter=function(t,r,a){var i=new pU(a);return this.compileAndRun(i,[t,r])},e.prototype.fusedDepthwiseConv2D=function(t){var r,a=t.input,i=t.filter,o=t.convInfo,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,p=c?vp(c,d):null,v=[a,i],g=u!=null,y=f!=null;return g&&v.push(u),y&&v.push(f),d?(r=new mC(o,g,p,y),this.compileAndRun(r,v)):(r=new vC(o,g,p,y),this.compileAndRun(r,v))},e.prototype.depthwiseConv2D=function(t,r,a){var i;return ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new mC(a),this.compileAndRun(i,[t,r])):(i=new vC(a),this.compileAndRun(i,[t,r]))},e.prototype.depthwiseConv2DDerInput=function(t,r,a){var i=new bU(a);return this.compileAndRun(i,[t,r])},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){var i=new yU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3d=function(t,r,a){var i=new xU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerInput=function(t,r,a){var i=new gU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerFilter=function(t,r,a){var i=new mU(a);return this.compileAndRun(i,[t,r])},e.prototype.maxPool=function(t,r){var a=new i0(r,"max",!1);return this.compileAndRun(a,[t])},e.prototype.avgPool=function(t,r){var a=new i0(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPoolBackprop=function(t,r,a,i){var o=new i0(i,"max",!0),u=this.compileAndRun(o,[r]),c=new rV(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},e.prototype.avgPoolBackprop=function(t,r,a){var i=new rU(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.cast=function(t,r){return pA(t,r,this)},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var d=new Array(a);for(u=0;u<d.length;u++)c[r]=u,d[u]=this.slice(t,c,f).reshape(i);return d},e.prototype.avgPool3d=function(t,r){var a=new o0(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,r,a){var i=new aU(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.maxPool3d=function(t,r){var a=new o0(r,"max",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,r,a,i){var o=new o0(i,"max",!0),u=this.compileAndRun(o,[r]),c=new aV(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},e.prototype.reshape=function(t,r){var a=this.texData.get(t.dataId);if(a.isPacked&&!fp(t.shape,r)&&(a.texture===null||!fp(a.shape,r))){var i=this.packedReshape(t,r);return W.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return Ab(t,r)},e.prototype.resizeBilinear=function(t,r,a,i){var o=ue().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new pV(t.shape,r,a,i):new dV(t.shape,r,a,i);return this.compileAndRun(o,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,r,a){var i=new hV(t,r,a);return this.compileAndRun(i,[t])},e.prototype.resizeNearestNeighbor=function(t,r,a,i){var o=new mV(t.shape,r,a,i);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){var i=new vV(t,r,a);return this.compileAndRun(i,[t])},e.prototype.multinomial=function(t,r,a,i){var o=r?t:ji(t),u=o.shape[0],c=o.shape[1],f=new iV(u,c,a),d=f.getCustomSetupFunc(i);return this.compileAndRun(f,[o],"int32",d)},e.prototype.oneHot=function(t,r,a,i){var o=new oV(t.size,r,a,i);return this.compileAndRun(o,[t])},e.prototype.diag=function(t){var r=new RU(t.size);return this.compileAndRun(r,[t])},e.prototype.nonMaxSuppression=function(t,r,a,i,o){return pv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Px(t.dataSync(),r.dataSync(),a,i,o)},e.prototype.cropAndResize=function(t,r,a,i,o,u){var c=new wU(t.shape,r.shape,i,o,u);return this.compileAndRun(c,[t,r,a],"float32")},e.prototype.depthToSpace=function(t,r,a){P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=t.shape[0],o=a==="NHWC"?t.shape[1]:t.shape[2],u=a==="NHWC"?t.shape[2]:t.shape[3],c=a==="NHWC"?t.shape[3]:t.shape[1],f=o*r,d=u*r,p=c/(r*r),v=new CU(a==="NHWC"?[i,f,d,p]:[i,p,f,d],r,a);return this.compileAndRun(v,[t])},e.prototype.split=function(t,r,a){return gA(t,r,a)},e.prototype.scatterND=function(t,r,a){var i=xv(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=[d/c,c],v=t.reshape([u,o]),g=r.reshape([u,c]);if(d===0)return Ab(zn([]),a);var y=we(0),x=new xC(u,o,v.rank,g.rank,f,p);return this.compileAndRun(x,[g,v,y]).reshape(a)},e.prototype.sparseToDense=function(t,r,a,i){var o=xv(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.strides,d=o.outputSize,p=new xC(c,u,t.rank,r.rank,f,[d,1]);return this.compileAndRun(p,[r,t,i]).reshape(a)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,r){var a=this.texData.get(t.dataId),i=new yC(DU,t.shape,r),o=new yC(NU,t.shape,r),u=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag)],c=this.compileAndRun(i,u),f=this.compileAndRun(o,u),d=this.complex(c,f).as2D(t.shape[0],t.shape[1]);return c.dispose(),f.dispose(),d},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=sA(t,r),u=o[0],c=o[1],f=o[2],d=o[3],p=r.reshape([c,i]),v=t.reshape([t.size/f,f]),g=new FU(i,d,[c,f]);return this.compileAndRun(g,[v,p]).reshape(u)},e.prototype.fill=function(t,r,a){if((a=a||kh(r))==="string"){var i=cv(a,Ie(t));return i.fill(r),W.makeTensor(i,t,a,this)}var o=new IU(t,r),u=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],a,u)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,r,a){return vA(t,r,a)},e.prototype.makeTensorInfo=function(t,r){var a=this.write(null,t,r);return this.texData.get(a).usage=null,{dataId:a,shape:t,dtype:r}},e.prototype.makeOutput=function(t,r){var a=this.makeTensorInfo(t,r).dataId;return W.makeTensorFromDataId(a,t,r,this)},e.prototype.unpackTensor=function(t){var r=new zV(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},e.prototype.packTensor=function(t){var r=new sV(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,r){var a=[hv(t.shape)].concat(dv(t.shape)),i={dtype:t.dtype,shape:a,dataId:t.dataId},o=[hv(r)].concat(dv(r)),u=new fV(o,a),c=this.runWebGLProgram(u,[i],t.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},e.prototype.decode=function(t){var r,a=this.texData.get(t),i=a.isPacked,o=a.shape,u=a.dtype,c=e0(o);return r=i?new SU(c):new EU(c),{dtype:u,shape:o,dataId:this.runWebGLProgram(r,[{shape:c,dtype:u,dataId:t}],u,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,r,a,i,o){var u=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(t.outputShape,a),f=this.texData.get(c.dataId);if(t.packedOutput&&(f.isPacked=!0),t.outPackingScheme===uh.DENSE){var d=Ff(t.outputShape);f.texShape=d.map(function(C){return 2*C})}if(t.outTexUsage!=null&&(f.usage=t.outTexUsage),Ie(c.shape)===0)return f.values=oh(c.dtype,0),c;var p=[],v=r.map(function(C){if(C.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var R=u.texData.get(C.dataId);if(R.texture==null){if(!t.packedInputs&&Ie(C.shape)<=ue().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:C.shape,texData:null,isUniform:!0,uniformValues:R.values};t.packedInputs&&(R.isPacked=!0,R.shape=C.shape)}else if(!!R.isPacked!=!!t.packedInputs)C=R.isPacked?u.unpackTensor(C):u.packTensor(C),p.push(C),R=u.texData.get(C.dataId);else if(R.isPacked&&!fp(R.shape,C.shape)){var T=C,O=C.shape;C.shape=R.shape,C=u.packedReshape(C,O),p.push(C),R=u.texData.get(C.dataId),T.shape=O}return u.uploadToGPU(C.dataId),{shape:C.shape,texData:R,isUniform:!1}});this.uploadToGPU(c.dataId);var g,y={shape:c.shape,texData:f,isUniform:!1},x=function(C,R,T){var O="";R.concat(T).forEach(function(k){var I=k.texData!=null&&k.texData.slice!=null&&k.texData.slice.flatOffset>0,B=k.isUniform?"uniform":k.texData.texShape;O+=k.shape+"_"+B+"_"+I});var D=C.userCode,N=C.constructor.name;return N+="_"+O+"_"+D}(t,v,y),w=this.getAndSaveBinary(x,function(){return function(C,R,T,O){var D=R.userCode,N=T.map(function(G,Y){var F={logicalShape:G.shape,texShape:G.isUniform?null:G.texData.texShape,isUniform:G.isUniform,isPacked:!G.isUniform&&G.texData.isPacked,flatOffset:null};return G.texData!=null&&G.texData.slice!=null&&G.texData.slice.flatOffset>0&&(F.flatOffset=G.texData.slice.flatOffset),{name:R.variableNames[Y],shapeInfo:F}}),k=N.map(function(G){return G.shapeInfo}),I={logicalShape:O.shape,texShape:O.texData.texShape,isUniform:!1,isPacked:O.texData.isPacked,flatOffset:null},B=Yz(N,I,D,R.packedInputs),U=C.createProgram(B),ee=null,te=C.getUniformLocation(U,"NAN",!1);ue().getNumber("WEBGL_VERSION")===1&&(ee=C.getUniformLocation(U,"INFINITY",!1));for(var re={},q=0;q<R.variableNames.length;q++){var Z=R.variableNames[q];re[Z]=C.getUniformLocation(U,Z,!1),re["offset"+Z]=C.getUniformLocation(U,"offset"+Z,!1)}return{program:R,source:B,webGLProgram:U,uniformLocations:re,inShapeInfos:k,outShapeInfo:I,infLoc:ee,nanLoc:te}}(u.gpgpu,t,v,y)}),_=this.activeTimers!=null;if(_&&(g=this.startTimer()),function(C,R,T,O,D){bC(R.inShapeInfos,T),bC([R.outShapeInfo],[O]);var N=O.texData.texture,k=O.texData.texShape;O.texData.isPacked?C.setOutputPackedMatrixTexture(N,k[0],k[1]):C.setOutputMatrixTexture(N,k[0],k[1]),C.setProgram(R.webGLProgram),ue().getNumber("WEBGL_VERSION")===1&&R.infLoc!==null&&C.gl.uniform1f(R.infLoc,1/0),R.nanLoc!==null&&C.gl.uniform1f(R.nanLoc,NaN),T.forEach(function(I,B){var U=R.program.variableNames[B],ee=R.uniformLocations[U],te=R.uniformLocations["offset"+U];if(ee!=null)if(I.isUniform)if(Ie(I.shape)<2)C.gl.uniform1f(ee,I.uniformValues[0]);else{var re=I.uniformValues;re instanceof Float32Array||(re=new Float32Array(re)),C.gl.uniform1fv(ee,re)}else I.texData.slice!=null&&te!=null&&C.gl.uniform1i(te,I.texData.slice.flatOffset),C.setInputMatrixTexture(I.texData.texture,ee,B)}),D!=null&&D(C,R.webGLProgram),C.executeProgram()}(this.gpgpu,w,v,y,i),p.forEach(function(C){return u.disposeData(C.dataId)}),_&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)})),!ue().getBool("WEBGL_LAZILY_UNPACK")&&f.isPacked&&o===!1){var S=this.unpackTensor(c);return this.disposeData(c.dataId),S}return c},e.prototype.compileAndRun=function(t,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var u=this.runWebGLProgram(t,r,a,i,o);return W.makeTensorFromDataId(u.dataId,u.shape,u.dtype)},e.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(ue().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Te(function(){if(!ue().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ue().getBool("DEBUG");ue().set("DEBUG",!1);var a=t.abs(we(1e-8)).dataSync()[0];if(ue().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.values,c=a.texture,f=a.usage,d=a.isPacked;if(c==null){var p,v=this.activeTimers!=null;v&&(p=za());var g=a.texShape;if(g==null&&(g=QB(i,d),a.texShape=g),u!=null){var y=e0(i),x=void 0,w=g[1],_=g[0],S=u instanceof Uint8Array;d?(w=(r=Nh(g[0],g[1]))[0],_=r[1],x=new kU(y,[_,w],S)):x=new AU(y,[_,w],S);var C=this.makeTensorInfo([_,w],o);this.texData.get(C.dataId).usage=S?Or.PIXELS:Or.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),w,_,u);var R=this.runWebGLProgram(x,[C],o,null,!0),T=this.texData.get(R.dataId);a.texture=T.texture,a.texShape=T.texShape,a.isPacked=T.isPacked,a.usage=T.usage,this.disposeData(C.dataId),this.texData.delete(R.dataId),a.values=null,v&&(this.uploadWaitMs+=za()-p)}else{var O=this.acquireTexture(g,f,o,d);a.texture=O}}},e.prototype.convertAndCacheOnCPU=function(t,r){var a=this.texData.get(t),i=a.dtype;return this.releaseGPUData(t),r!=null&&(a.values=function(o,u){if(u==="float32"||u==="complex64")return o;if(u==="int32"||u==="bool"){for(var c=u==="int32"?new Int32Array(o.length):new Uint8Array(o.length),f=0;f<c.length;++f)c[f]=Math.round(o[f]);return c}throw new Error("Unknown dtype "+u)}(r,i)),a.values},e.prototype.acquireTexture=function(t,r,a,i){if(this.numBytesInGPU+=this.computeBytes(t,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,i)},e.prototype.computeBytes=function(t,r){return t[0]*t[1]*qO(r)},e}(hA);XO()&&W.registerBackend("webgl",function(){return new VV},2);var jV=j({square_:function(n){var e=L(n,"x","square"),t=[e];return W.runKernelFunc(function(r,a){return a([e]),r.square(e)},{x:e},null,"Square",{},t,[])}}),ch="SquaredDifference",DA=j({squaredDifference_:function(n,e){var t,r=L(n,"a","squaredDifference"),a=L(e,"b","squaredDifference");t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return W.runKernelFunc(function(u,c){var f=u.squaredDifference(r,a);return c([r,a]),f},i,function(u,c){var f=c[0],d=c[1],p=we(2);return{a:function(){return u.mul(f.sub(d).mul(p))},b:function(){return u.mul(d.sub(f).mul(p))}}},ch,{},o,[])}}),qV=j({abs_:function(n){var e=L(n,"x","abs");return e.dtype==="complex64"?W.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):W.runKernelFunc(function(t,r){var a=t.abs(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.toFloat().step(-1))}}},"Abs")}}),WV=j({acos_:function(n){var e=L(n,"x","acos");return W.runKernelFunc(function(t,r){var a=t.acos(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(we(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),HV=j({acosh_:function(n){var e=L(n,"x","acosh");return W.runKernelFunc(function(t,r){var a=t.acosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),GV=j({asin_:function(n){var e=L(n,"x","asin");return W.runKernelFunc(function(t,r){var a=t.asin(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(we(1).sub(a.toFloat().square()).sqrt())}}})}}),QV=j({asinh_:function(n){var e=L(n,"x","asinh");return W.runKernelFunc(function(t,r){var a=t.asinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(we(1).add(a.toFloat().square()).sqrt())}}})}}),$V=j({atan_:function(n){var e=L(n,"x","atan");return W.runKernelFunc(function(t,r){var a=t.atan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().square().add(1))}}})}}),KV=j({atanh_:function(n){var e=L(n,"x","atanh");return W.runKernelFunc(function(t,r){var a=t.atanh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(we(1).sub(a.toFloat().square()))}}})}}),XV=j({ceil_:function(n){var e=L(n,"x","ceil");return W.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),qx=j({clipByValue_:function(n,e,t){var r=L(n,"x","clipByValue");P(e<=t,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."});var a=[r],i={min:e,max:t};return W.runKernelFunc(function(o,u){var c=o.clip(r,e,t);return u([r]),c},{x:r},function(o,u){var c=u[0];return{x:function(){return o.where(c.greaterEqual(e).logicalAnd(c.lessEqual(t)),gt(o))}}},"ClipByValue",i,a)}}),YV=j({cos_:function(n){var e=L(n,"x","cos"),t=[e];return W.runKernelFunc(function(r,a){var i=r.cos(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),ZV=j({cosh_:function(n){var e=L(n,"x","cosh");return W.runKernelFunc(function(t,r){var a=t.cosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(t)}}})}}),JV=j({erf_:function(n){var e=L(n,"x","erf");return P(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),W.runKernelFunc(function(t,r){var a=t.erf(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Db=j({exp_:function(n){var e=L(n,"x","exp");return W.runKernelFunc(function(t,r){var a=t.exp(e);return r([a]),a},{x:e},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),ej=j({expm1_:function(n){var e=L(n,"x","expm1");return W.runKernelFunc(function(t,r){var a=t.expm1(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.exp())}}})}}),tj=j({floor_:function(n){var e=L(n,"x","floor");return W.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),nj=j({log_:function(n){var e=L(n,"x","log"),t=[e];return W.runKernelFunc(function(r,a){var i=r.log(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},t)}}),rj=j({log1p_:function(n){var e=L(n,"x","log1p");return W.runKernelFunc(function(t,r){var a=t.log1p(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.add(1))}}})}}),aj=j({logSigmoid_:function(n){var e=L(n,"x","logSigmoid");return W.runKernelFunc(function(t,r){var a=t.softplus(e.neg()).neg();return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.neg().sigmoid())}}})}}),Sv=j({neg_:function(n){var e=L(n,"x","neg"),t=[e];return W.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),ij=j({reciprocal_:function(n){var e=L(n,"x","reciprocal");return W.runKernelFunc(function(t,r){var a=t.reciprocal(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.square().neg())}}})}}),oj=j({round_:function(n){var e=L(n,"x","round");return W.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),NA=j({rsqrt_:function(n){var e=L(n,"x","rsqrt"),t=[e];return W.runKernelFunc(function(r,a){var i=r.rsqrt(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),IA=j({sigmoid_:function(n){var e=L(n,"x","sigmoid");return W.runKernelFunc(function(t,r){var a=t.sigmoid(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.mul(we(1).sub(a)))}}},"Sigmoid")}}),sj=j({sign_:function(n){var e=L(n,"x","sign");return W.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),uj=j({isNaN_:function(n){var e=L(n,"x","isNaN");return W.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),lj=j({isInf_:function(n){var e=L(n,"x","isInf");return W.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),cj=j({isFinite_:function(n){var e=L(n,"x","isFinite");return W.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),fj=j({sin_:function(n){var e=L(n,"x","sin"),t=[e];return W.runKernelFunc(function(r,a){var i=r.sin(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},t)}}),hj=j({sinh_:function(n){var e=L(n,"x","sinh");return W.runKernelFunc(function(t,r){var a=t.sinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(t)}}})}}),dj=j({softplus_:function(n){var e=L(n,"x","softplus");return W.runKernelFunc(function(t,r){var a=t.softplus(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.sigmoid())}}})}}),pj=j({sqrt_:function(n){var e=L(n,"x","sqrt");return W.runKernelFunc(function(t,r){var a=t.sqrt(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().sqrt().mul(2))}}})}}),vj=j({step_:function(n,e){e===void 0&&(e=0);var t=L(n,"x","step");return W.runKernelFunc(function(r){return r.step(t,e)},{$x:t},function(r){return{$x:function(){return gt(r)}}})}}),mj=j({tan_:function(n){var e=L(n,"x","tan");return W.runKernelFunc(function(t,r){var a=t.tan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.cos().square())}}})}}),gj=j({tanh_:function(n){var e=L(n,"x","tanh");return W.runKernelFunc(function(t,r){var a=t.tanh(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return we(1).sub(a.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function MA(n,e,t,r,a,i){var o,u,c=L(n,"x","batchNorm"),f=L(e,"mean","batchNorm"),d=L(t,"variance","batchNorm");return a!=null&&(o=L(a,"scale","batchNorm")),r!=null&&(u=L(r,"offset","batchNorm")),P(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),P(f.rank===2||f.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+f.rank+"."}),P(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),o!=null&&P(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),u!=null&&P(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."}),Mh(c,f,d,u,o,i)}function FA(n,e,t,r,a,i){var o,u,c=L(n,"x","batchNorm"),f=L(e,"mean","batchNorm"),d=L(t,"variance","batchNorm");return a!=null&&(o=L(a,"scale","batchNorm")),r!=null&&(u=L(r,"offset","batchNorm")),P(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),P(f.rank===3||f.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+f.rank+"."}),P(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),o!=null&&P(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),u!=null&&P(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."}),Mh(c,f,d,u,o,i)}function LA(n,e,t,r,a,i){var o,u,c=L(n,"x","batchNorm"),f=L(e,"mean","batchNorm"),d=L(t,"variance","batchNorm");return a!=null&&(o=L(a,"scale","batchNorm")),r!=null&&(u=L(r,"offset","batchNorm")),P(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),P(f.rank===4||f.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+f.rank+"."}),P(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),o!=null&&P(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),u!=null&&P(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."}),Mh(c,f,d,u,o,i)}function Mh(n,e,t,r,a,i){i==null&&(i=.001);var o,u,c,f=L(n,"x","batchNorm"),d=L(e,"mean","batchNorm"),p=L(t,"variance","batchNorm");a!=null&&(o=L(a,"scale","batchNorm")),r!=null&&(u=L(r,"offset","batchNorm")),P(d.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),P(u==null||d.rank===u.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),P(o==null||d.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=f.rank===0||f.rank===1?f.as4D(1,1,1,f.size):f.rank===2?f.as4D(1,1,f.shape[0],f.shape[1]):f.rank===3?f.as4D(1,f.shape[0],f.shape[1],f.shape[2]):f;var v=[f,d,p,o];return W.runKernelFunc(function(g,y){var x=g.batchNormalization(c,mp(d),mp(p),i,mp(o),mp(u));return y([f,d,p,o]),x},{x:f,mean:d,variance:p,scale:o,offset:u},function(g,y){var x=y,w=x[0],_=x[1],S=x[2],C=x[3],R=C??we(1),T=mn(_.shape,c.shape),O=[];if(_.rank===1){for(var D=0;D<c.shape.length-1;++D)O.push(c.shape[D]);O.push(1)}var N=w.sub(_),k=g.mul(R),I=NA(S.add(we(i))),B=I.mul(I).mul(I).mul(we(-.5));return{x:function(){return _.rank===1?g.mul(yl(I.as4D(1,1,1,_.shape[0]),O)).mul(R).reshape(w.shape):g.mul(I).mul(R).reshape(w.shape)},mean:function(){var U=I.mul(we(-1)).mul(k);return _.rank===1&&(U=U.sum(T)),U.reshape(_.shape)},variance:function(){var U=B.mul(N).mul(k);return _.rank===1&&(U=U.sum(T)),U.reshape(_.shape)},scale:function(){var U=N.mul(I),ee=g.mul(U);return _.rank===1&&(ee=ee.sum(T)),ee.reshape(_.shape)},offset:function(){var U=g;return _.rank===1&&(U=U.sum(T)),U.reshape(_.shape)}}},"BatchNormalization",{varianceEpsilon:i},v).reshape(f.shape)}function mp(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function Kv(){YO("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var yj=j({batchNormalization2d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),MA(n,e,t,i,a,r)}}),bj=j({batchNormalization3d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),FA(n,e,t,i,a,r)}}),xj=j({batchNormalization4d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),LA(n,e,t,i,a,r)}}),wj=j({batchNormalization_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),Mh(n,e,t,i,a,r)}}),PA=j({batchNorm_:Mh}),_j=j({batchNorm2d_:MA}),Ej=j({batchNorm3d_:FA}),Sj=j({batchNorm4d_:LA}),Xv=j({logicalAnd_:function(n,e){var t=L(n,"a","logicalAnd","bool"),r=L(e,"b","logicalAnd","bool");return ct(t.shape,r.shape),W.runKernelFunc(function(a){return a.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),Cj=j({logicalNot_:function(n){var e=L(n,"x","logicalNot","bool");return W.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),BA=j({logicalOr_:function(n,e){var t=L(n,"a","logicalOr","bool"),r=L(e,"b","logicalOr","bool");return ct(t.shape,r.shape),W.runKernelFunc(function(a){return a.logicalOr(t,r)},{$a:t,$b:r})}}),Rj=j({logicalXor_:function(n,e){var t=L(n,"a","logicalXor","bool"),r=L(e,"b","logicalXor","bool");return ct(t.shape,r.shape),BA(n,e).logicalAnd(Xv(n,e).logicalNot())}}),nu=j({where_:function(n,e,t){var r=L(e,"a","where"),a=L(t,"b","where"),i=L(n,"condition","where","bool");return Ot(r.shape,a.shape,"Error in where: "),i.rank===1?P(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Ot(i.shape,a.shape,"Error in where: "),W.runKernelFunc(function(o,u){var c=o.select(i,r,a);return u([i]),c},{$condition:i,$a:r,$b:a},function(o,u){var c=u[0];return{$condition:function(){return gt(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),zA=function(n){return ke(this,void 0,void 0,function(){var e,t,r;return De(this,function(a){switch(a.label){case 0:return[4,(e=L(n,"condition","whereAsync","bool")).data()];case 1:return t=a.sent(),r=zx(e.shape,t),n!==e&&e.dispose(),[2,r]}})})},ut=j({add_:function(n,e){var t,r=L(n,"a","add"),a=L(e,"b","add");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o){return o.add(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=mn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=mn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(a.shape)}}},"Add")}}),Tj=j({addN_:function(n){P(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),P(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var e=n.map(function(a,i){return L(a,"tensors"+i,"addN")}),t=e[0];e.forEach(function(a){if(a.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(a){if(!On(a.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return W.runKernelFunc(function(a){return a.addN(e)},r,function(a){var i={};return e.forEach(function(o,u){i[u]=function(){return a.clone()}}),i},"AddN")}}),Oj=j({addStrict_:function(n,e){var t=L(n,"a","addStrict"),r=L(e,"b","addStrict");return Ot(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),Aj=j({atan2_:function(n,e){var t,r=L(n,"a","atan2"),a=L(e,"b","atan2");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.atan2(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var d=ut(c.square(),f.square()),p=o.mul(f.div(d)),v=mn(c.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)},$b:function(){var d=ut(c.square(),f.square()),p=Sv(o.mul(c.div(d))),v=mn(f.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(f.shape)}}})}}),fa=j({div_:function(n,e){var t,r=L(n,"a","div"),a=L(e,"b","div");if(t=Ht(r,a),r=t[0],a=t[1],r.dtype==="int32"&&a.dtype==="int32")return UA(r,a);var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.realDivide(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.div(f.toFloat()),p=mn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=mn(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}},"Div")}}),kj=j({divNoNan_:function(n,e){var t,r=L(n,"a","div"),a=L(e,"b","div");r=(t=Ht(r,a))[0],a=t[1];var i=fa(r,a),o=gt(i),u=a.equal(o);return nu(u,o,i)}}),Dj=j({divStrict_:function(n,e){var t=L(n,"a","div"),r=L(e,"b","div");return Ot(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),UA=j({floorDiv_:function(n,e){var t,r=L(n,"a","floorDiv"),a=L(e,"b","floorDiv");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.floorDiv(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.div(f.toFloat()),p=mn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=mn(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}},"FloorDiv")}}),Wx=j({maximum_:function(n,e){var t,r=L(n,"a","maximum"),a=L(e,"b","maximum");return t=Ht(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.maximum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.greaterEqual(c).toFloat())},b:function(){return i.mul(u.less(c).toFloat())}}},"Maximum")}}),Nj=j({maximumStrict_:function(n,e){var t=L(n,"a","maximumStrict"),r=L(e,"b","maximumStrict");return Ot(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),VA=j({minimum_:function(n,e){var t,r=L(n,"a","minimum"),a=L(e,"b","minimum");return t=Ht(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.minimum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.lessEqual(c).toFloat())},b:function(){return i.mul(u.greater(c).toFloat())}}},"Minimum")}}),Ij=j({minimumStrict_:function(n,e){var t=L(n,"a","minimumStrict"),r=L(e,"b","minimumStrict");return Ot(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),Mj=j({mod_:function(n,e){var t,r=L(n,"a","mod"),a=L(e,"b","mod");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.mod(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var d=mn(c.shape,i);return d.length>0?o.sum(d).reshape(c.shape):o},$b:function(){var d=o.mul(c.div(f).floor().neg()),p=mn(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}})}}),Fj=j({modStrict_:function(n,e){var t=L(n,"a","modStrict"),r=L(e,"b","modStrict");return Ot(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),$n=j({mul_:function(n,e){var t,r=L(n,"a","mul"),a=L(e,"b","mul");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.multiply(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.mul(f.toFloat()),p=mn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=mn(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}},"Mul")}}),Lj=j({mulStrict_:function(n,e){var t=L(n,"a","mul"),r=L(e,"b","mul");return Ot(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),Cv=j({pow_:function(n,e){var t,r=L(n,"base","pow"),a=L(e,"exp","pow");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape),o=[r,a];return W.runKernelFunc(function(u,c){var f=u.pow(r,a);return c([r,a,f]),f},{a:r,b:a},function(u,c){var f=c[0],d=c[1],p=c[2];return{a:function(){var v=d.toFloat(),g=u.mul(v.mul(f.pow(v.sub(we(1))))),y=mn(f.shape,i);return y.length>0&&(g=g.sum(y)),g.reshape(f.shape)},b:function(){var v=f.greater(0),g=f.log().where(v,gt(f)),y=u.mul(p.mul(g)),x=mn(d.shape,i);return x.length>0&&(y=y.sum(x)),y.reshape(d.shape)}}},"Pow",{},o,[!0])}}),Pj=j({powStrict_:function(n,e){return Ot(n.shape,e.shape,"Error in powStrict: "),n.pow(e)}}),Bj=j({squaredDifferenceStrict_:function(n,e){var t=L(n,"a","squaredDifferenceStrict"),r=L(e,"b","squaredDifferenceStrict");return Ot(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),gn=j({sub_:function(n,e){var t,r=L(n,"a","sub"),a=L(e,"b","sub");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o){return o.subtract(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=mn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=mn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.neg().reshape(a.shape)}}},"Sub")}}),zj=j({subStrict_:function(n,e){var t=L(n,"a","subStrict"),r=L(e,"b","subStrict");return Ot(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),jA=j({equal_:function(n,e){var t,r=L(n,"a","equal"),a=L(e,"b","equal");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.equal(r,a)},{$a:r,$b:a})}}),Uj=j({equalStrict_:function(n,e){var t=L(n,"a","equalStrict"),r=L(e,"b","equalStrict");return Ot(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),Vj=j({greater_:function(n,e){var t,r=L(n,"a","greater"),a=L(e,"b","greater");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.greater(r,a)},{a:r,b:a},null,"Greater")}}),qA=j({greaterEqual_:function(n,e){var t,r=L(n,"a","greaterEqual"),a=L(e,"b","greaterEqual");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.greaterEqual(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return gt(u)},b:function(){return gt(c)}}},"GreaterEqual")}}),jj=j({greaterEqualStrict_:function(n,e){var t=L(n,"a","greaterEqualStrict"),r=L(e,"b","greaterEqualStrict");return Ot(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),qj=j({greaterStrict_:function(n,e){var t=L(n,"a","greaterStrict"),r=L(e,"b","greaterStrict");return Ot(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),Wj=j({less_:function(n,e){var t,r=L(n,"a","less"),a=L(e,"b","less");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.less(r,a)},{a:r,b:a},null,"Less")}}),Hj=j({lessEqual_:function(n,e){var t,r=L(n,"a","lessEqual"),a=L(e,"b","lessEqual");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.lessEqual(r,a);return o([r,a]),u},{a:r,b:a},null,"LessEqual")}}),Gj=j({lessEqualStrict_:function(n,e){var t=L(n,"a","lessEqualStrict"),r=L(e,"b","lessEqualStrict");return Ot(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),Qj=j({lessStrict_:function(n,e){var t=L(n,"a","lessStrict"),r=L(e,"b","lessStrict");return Ot(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),$j=j({notEqual_:function(n,e){var t,r=L(n,"a","notEqual"),a=L(e,"b","notEqual");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),Kj=j({notEqualStrict_:function(n,e){var t=L(n,"a","notEqualStrict"),r=L(e,"b","notEqualStrict");return Ot(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function AC(n,e){for(var t=[],r=n;r<e;++r)t.push(r);return t}function kC(n){for(var e=[],t=0;t<n.length;++t)for(var r=0;r<n[t].length;++r)e.push(n[t][r]);return e}var Hx=j({gather_:function(n,e,t){t===void 0&&(t=0);var r=L(n,"x","gather"),a=L(e,"indices","gather","int32");t=yn(t,r.shape)[0];var i=function(o,u,c){for(var f=o.shape[c],d=[],p=1,v=1,g=0;g<c;g++)d.push(o.shape[g]),p*=o.shape[g];for(g=0;g<u.rank;g++)d.push(u.shape[g]);for(g=c+1;g<o.rank;g++)d.push(o.shape[g]),v*=o.shape[g];return{batchSize:p,sliceSize:v,dimSize:f,outputShape:d}}(r,a,t);return W.runKernelFunc(function(o,u){var c=o.gather(r,a.flatten(),t);return u([a]),c},{x:r,indices:a},function(o,u){var c=u[0];return{x:function(){var f=r.shape,d=c.size,p=f.slice(0,t),v=p.length,g=f.slice(t,f.length).slice(1),y=g.length,x=AC(0,v),w=AC(v+1,v+1+y),_=kC([p,[d],g]),S=o.reshape(_),C=c.reshape([d]),R=kC([[v],x,w]),T=S.transpose(R),O=WA(T,C,r.shape[t]),D=Dx(R);return O=O.transpose(D)},indices:function(){return c}}},"Gather",{axis:t}).reshape(i.outputShape)}}),WA=j({unsortedSegmentSum_:function(n,e,t){var r=L(n,"x","unsortedSegmentSum"),a=L(e,"segmentIds","unsortedSegmentSum","int32");return P(en(t),function(){return"numSegments must be of dtype int"}),W.runKernelFunc(function(i,o){var u=i.unsortedSegmentSum(r,a,t);return o([a]),u},{$x:r},function(i,o){var u=o[0];return{$x:function(){return function(c,f){for(var d=Wx(f,gt(f)),p=Hx(c,d),v=qA(f,we(0,"int32")),g=p.rank-v.rank,y=0;y<g;++y)v=$r(v,y+1);v=Xv(v,lc(p.shape,"bool"));var x=gt(p);return nu(v,p,x)}(i,u)}}})}}),Xj=function(n,e,t){return ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x;return De(this,function(w){switch(w.label){case 0:for(r=L(n,"tensor","boolMask"),a=L(e,"mask","boolMask","bool"),i=t??0,o=a.rank,u=r.shape,P(o>0,function(){return"mask cannot be scalar"}),Ot(u.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,f=i;f<i+o;f++)c*=u[f];return d=u.slice(0,i).concat([c],u.slice(i+o)),p=r.reshape(d),v=a.reshape([-1]),[4,zA(v)];case 1:return g=w.sent(),y=g.squeeze([1]),x=Hx(p,y,i),n!==r&&r.dispose(),e!==a&&a.dispose(),y.dispose(),p.dispose(),v.dispose(),g.dispose(),[2,x]}})})};function HA(n,e,t,r,a,i,o){i===void 0&&(i="NHWC"),P(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var u=n,c=e,f=!1;e.rank===3&&(f=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),u=[1,n[0],n[1],n[2]]),P(u.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+u.length+"."}),P(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),P(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var d=i==="NHWC"?u[3]:u[1],p=i==="NHWC"?c.shape[3]:c.shape[1];P(d===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+t.shape[2]+"."}),P(p===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+t.shape[3]+"."}),o!=null&&P(en(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var v=Lx(i),g=uu(u,t.shape,r,1,a,o,!1,v),y=W.runKernelFunc(function(x,w){var _=x.conv2dDerInput(c,t,g);return w([t,c]),_},{dy4D:c,filter:t},function(x,w){var _=w[0],S=w[1];return{dy4D:function(){return ea(x,_,r,a,i,1,o)},filter:function(){return Gx(x,S,_.shape,r,a,i,o)}}});return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function u0(n){var e=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function GA(n,e,t,r,a){P(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var i=n,o=e,u=!1;e.rank===4&&(u=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,n[0],n[1],n[2],n[3]]);var c=i[4],f=o.shape[4];P(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),P(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),P(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),P(c===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+t.shape[3]+"."}),P(f===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+f+") must match output depth for filter "+t.shape[4]+"."});var d=_v(i,t.shape,r,1,a),p=W.runKernelFunc(function(v){return v.conv3dDerInput(o,t,d)},{dy5D:o});return u?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var Yj=j({conv1d_:function(n,e,t,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var u=L(n,"x","conv1d"),c=L(e,"filter","conv1d"),f=u,d=!1;u.rank===2&&(d=!0,f=u.as3D(1,u.shape[0],u.shape[1])),P(f.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+f.rank+"."}),P(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&P(en(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),P(f.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+f.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),P(gr(t,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+i+"'"}),P(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var p=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),v=f.as4D(f.shape[0],1,f.shape[1],f.shape[2]),g=ea(v,p,[1,t],r,"NHWC",[1,i],o);return d?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),ea=j({conv2d_:function(n,e,t,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var u=L(n,"x","conv2d"),c=L(e,"filter","conv2d"),f=u,d=!1;u.rank===3&&(d=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),P(f.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+f.rank+"."}),P(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&P(en(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=a==="NHWC"?f.shape[3]:f.shape[1];P(p===c.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+c.shape[2]+"."}),P(gr(t,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"});var v=Lx(a),g=uu(f.shape,c.shape,t,i,r,o,!1,v),y=[c,f],x=W.runKernelFunc(function(w,_){var S=w.conv2d(f,c,g);return _([c,f]),S},{x:f,filter:c},function(w,_){var S=_,C=S[0],R=S[1];return P(Jl(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return QA(R.shape,w,C,t,r,a)},filter:function(){return Gx(R,w,C.shape,t,r,a)}}},"Conv2D",g,y);return d?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Zj=j({conv3d_:function(n,e,t,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=L(n,"x","conv3d"),u=L(e,"filter","conv3d"),c=o,f=!1;o.rank===4&&(f=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),P(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),P(u.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+u.rank+"."}),P(c.shape[4]===u.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+u.shape[3]+"."}),P(function(v,g){return u0(v)||u0(g)}(t,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),P(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var d=_v(c.shape,u.shape,t,i,r),p=W.runKernelFunc(function(v,g){var y=v.conv3d(c,u,d);return g([c,u]),y},{x:c,$filter:u},function(v,g){P(u0(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var y=g[0],x=g[1];return{x:function(){return GA(y.shape,v,x,t,r)},$filter:function(){return function(w,_,S,C,R){var T=w;w.rank===4&&(T=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var O=_;O.rank===4&&(O=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),P(T.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+T.shape+"."}),P(O.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+O.shape+"."}),P(S.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+S+"."}),P(T.shape[4]===S[3],function(){return"Error in conv3dDerFilter: depth of input "+T.shape[4]+") must match input depth in filter ("+S[3]+"."}),P(O.shape[4]===S[4],function(){return"Error in conv3dDerFilter: depth of dy ("+O.shape[4]+") must match output depth for filter ("+S[4]+")."});var D=_v(T.shape,S,C,1,R);return W.runKernelFunc(function(N){return N.conv3dDerFilter(T,O,D)},{x5D:T,dy5D:O})}(y,v,x.shape,t,r)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Gx=j({conv2dDerFilter_:function(n,e,t,r,a,i,o){i===void 0&&(i="NHWC");var u=n;n.rank===3&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var c=e;c.rank===3&&(c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),P(u.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+u.shape+"."}),P(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),P(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var f=i==="NHWC"?u.shape[3]:u.shape[1],d=i==="NHWC"?c.shape[3]:c.shape[1];P(f===t[2],function(){return"Error in conv2dDerFilter: depth of input "+f+") must match input depth in filter ("+t[2]+"."}),P(d===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+t[3]+")."}),o!=null&&P(en(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var p=Lx(i),v=uu(u.shape,t,r,1,a,o,!1,p);return W.runKernelFunc(function(g){return g.conv2dDerFilter(u,c,v)},{x4D:u,dy4D:c})}}),QA=j({conv2dDerInput_:HA}),Yv=j({depthwiseConv2d_:function(n,e,t,r,a,i,o){i===void 0&&(i=[1,1]);var u=L(n,"x","depthwiseConv2d"),c=L(e,"filter","depthwiseConv2d"),f=u,d=!1;u.rank===3&&(d=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),P(f.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."}),P(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),P(f.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),P(gr(t,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),o!=null&&P(en(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=uu(f.shape,c.shape,t,i,r,o,!0),v=[f,c],g=W.runKernelFunc(function(y,x){var w=y.depthwiseConv2D(f,c,p);return x([f,c]),w},{x:f,filter:c},function(y,x){P(Jl(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var w=x[0],_=x[1];return{x:function(){return $A(w.shape,y,_,p)},filter:function(){return KA(w,y,_.shape,p)}}},"DepthwiseConv2dNative",p,v);return d?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),$A=j({depthwiseConv2dDerInput_:function(n,e,t,r){var a=e,i=!1;e.rank===3&&(i=!0,a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=W.runKernelFunc(function(u){return u.depthwiseConv2DDerInput(a,t,r)},{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),KA=j({depthwiseConv2dDerFilter_:function(n,e,t,r){var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var i=e;return i.rank===3&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),W.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(a,i,r)},{x4D:a,dy4D:i})}}),Qx=j({separableConv2d_:function(n,e,t,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var u=L(n,"x","separableConv2d"),c=L(e,"depthwiseFilter","separableConv2d"),f=L(t,"pointwiseFilter","separableConv2d"),d=u,p=!1;if(u.rank===3&&(p=!0,d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),P(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),P(f.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),P(f.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+f.shape[0]+"."}),P(f.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+f.shape[1]+"."});var v=c.shape[2],g=c.shape[3];P(f.shape[2]===v*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+v*g+", but got "+f.shape[2]+"."});var y=Yv(d,c,r,a,o,i),x=ea(y,f,1,"valid",o);return p?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Jj=j({conv2dTranspose_:function(n,e,t,r,a,i){return HA(t,L(n,"x","conv2dTranspose"),L(e,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),e5=j({conv3dTranspose_:function(n,e,t,r,a){return GA(t,L(n,"x","conv3dTranspose"),L(e,"filter","conv3dTranspose"),r,a)}}),Zv=j({matMul_:function(n,e,t,r){var a;t===void 0&&(t=!1),r===void 0&&(r=!1);var i=L(n,"a","matMul"),o=L(e,"b","matMul");a=Ht(i,o),i=a[0],o=a[1];var u=t?i.shape[i.rank-2]:i.shape[i.rank-1],c=r?o.shape[o.rank-1]:o.shape[o.rank-2],f=t?i.shape[i.rank-1]:i.shape[i.rank-2],d=r?o.shape[o.rank-2]:o.shape[o.rank-1],p=i.shape.slice(0,-2),v=o.shape.slice(0,-2),g=Ie(p),y=Ie(v);P(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),P(On(p,v),function(){return"Error in matMul: outer dimensions ("+p+") and ("+v+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),P(u===c,function(){return"Error in matMul: inner shapes ("+u+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var x=i.shape.slice(0,-2).concat([f,d]),w=t?i.as3D(g,u,f):i.as3D(g,f,u),_=r?o.as3D(y,d,c):o.as3D(y,c,d),S={transposeA:t,transposeB:r};return W.runKernelFunc(function(C,R){var T=C.batchMatMul(w,_,t,r);return R([w,_]),T},{a:w,b:_},function(C,R){var T=R,O=T[0],D=T[1];return t||r?!t&&r?{a:function(){return C.matMul(D,!1,!1)},b:function(){return C.matMul(O,!0,!1)}}:t&&!r?{a:function(){return D.matMul(C,!1,!0)},b:function(){return O.matMul(C,!1,!1)}}:{a:function(){return D.matMul(C,!0,!0)},b:function(){return C.matMul(O,!0,!0)}}:{a:function(){return C.matMul(D,!1,!0)},b:function(){return O.matMul(C,!0,!1)}}},"BatchMatMul",S).reshape(x)}}),t5=j({dot_:function(n,e){var t=L(n,"t1","dot"),r=L(e,"t2","dot");P(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var a=t.rank===1?t.size:t.shape[1],i=r.rank===1?r.size:r.shape[0];return P(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),n5=j({outerProduct_:function(n,e){var t=L(n,"v1","outerProduct"),r=L(e,"v2","outerProduct");return P(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),Fh=j({reverse_:function(n,e){var t=L(n,"x","reverse");if(t.rank===0)return t.clone();var r=yn(e,t.shape);return W.runKernelFunc(function(a){return a.reverse(t,r)},{$x:t},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(t)}}),r5=j({reverse1d_:function(n){var e=L(n,"x","reverse");return P(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Fh(e,0)}}),a5=j({reverse2d_:function(n,e){var t=L(n,"x","reverse");return P(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),Fh(t,e)}}),i5=j({reverse3d_:function(n,e){var t=L(n,"x","reverse");return P(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),Fh(t,e)}}),o5=j({reverse4d_:function(n,e){var t=L(n,"x","reverse");return P(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),Fh(t,e)}});function XA(n,e,t,r,a,i){var o=L(n,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),P(u.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."}),P(gr(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),i!=null&&P(en(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=lh(u.shape,e,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&On(f.inShape,f.outShape))return o.clone();var d=[u],p=W.runKernelFunc(function(v,g){var y=v.maxPool(u,f);return g([u,y]),y},{x:u},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(w,_,S,C,R,T,O,D){var N=L(w,"dy","maxPoolBackprop"),k=L(_,"input","maxPoolBackprop"),I=L(S,"output","maxPoolBackprop");P(k.rank===N.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+N.rank+")"}),P(gr(R,T),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+T+"'"}),P(N.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+N.rank+"."}),P(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var B=lh(k.shape,C,R,T,O,D);return W.runKernelFunc(function(U){return U.maxPoolBackprop(N,k,I,B)},{$dy:N,$input:k})}(v,y,x,e,t,r,a)}}},"MaxPool",f,d);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function YA(n,e,t,r,a,i){var o=L(n,"x","avgPool","float32");P(gr(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),P(u.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."}),i!=null&&P(en(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=lh(u.shape,e,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&On(f.inShape,f.outShape))return o.clone();var d=W.runKernelFunc(function(p){return p.avgPool(u,f)},{x:u},function(p){return{x:function(){return function(v,g,y,x,w,_){var S=L(v,"dy","avgPoolBackprop"),C=L(g,"input","avgPoolBackprop");P(C.rank===S.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+S.rank+")"}),P(gr(x,w),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+w+"'"});var R=C,T=S,O=!1;C.rank===3&&(O=!0,R=C.as4D(1,C.shape[0],C.shape[1],C.shape[2]),T=S.as4D(1,S.shape[0],S.shape[1],S.shape[2])),P(T.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),P(R.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+R.rank+"."});var D=lh(R.shape,y,x,w,_),N=W.runKernelFunc(function(k){return k.avgPoolBackprop(T,R,D)},{dy4D:T,input4D:R});return O?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}(p,u,e,t,r,a)}}},"AvgPool",f);return d=d.cast(o.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var En=j({maxPool_:function(n,e,t,r,a){return XA(n,e,t,1,r,a)}}),Lh=j({avgPool_:function(n,e,t,r,a){return YA(n,e,t,1,r,a)}}),s5=j({pool_:function(n,e,t,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var o=L(n,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),P(gr(i,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"});var f,d=lh(u.shape,e,i,a,r),p=[d.dilationHeight,d.dilationWidth];f=r==="same"?function(R,T){var O=R.map(function(k,I){return k+(k-1)*(T[I]-1)}).map(function(k){return k-1}),D=O.map(function(k){return Math.floor(k/2)}),N=O.map(function(k,I){return k-D[I]});return O.map(function(k,I){return[D[I],N[I]]})}([d.filterHeight,d.filterWidth],p):[[0,0],[0,0]];var v=p[0]===1&&p[1]===1,g=function(R,T,O){var D=O.map(function(te){return te[0]}),N=O.map(function(te){return te[1]}),k=R.concat(D,N),I=T.map(function(te,re){return(te-k[re]%te)%te}),B=N.map(function(te,re){return te+I[re]}),U=T.map(function(te,re){return[D[re],B[re]]}),ee=T.map(function(te,re){return[0,I[re]]});return[U,ee]}([d.inHeight,d.inWidth],p,f),y=g[0],x=g[1],w=v?r:"valid",_=v?u:rA(u,p,y),S=(t==="avg"?function(){return YA(_,e,i,1,w)}:function(){return XA(_,e,i,1,w)})(),C=v?S:eA(S,p,x);return c?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),u5=j({maxPool3d_:function(n,e,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=L(n,"x","maxPool3d"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),P(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),P(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),P(gr(t,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&P(en(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=wv(c.shape,e,t,o,r,a,i),p=W.runKernelFunc(function(v,g){var y=v.maxPool3d(c,d);return g([c,y]),y},{x:c},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(w,_,S,C,R,T,O,D){var N=L(w,"dy","maxPool3dBackprop"),k=L(_,"input","maxPool3dBackprop"),I=L(S,"output","maxPool3dBackprop"),B=N,U=k,ee=I,te=!1;k.rank===4&&(te=!0,B=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),U=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),ee=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3])),P(B.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+B.rank+"."}),P(U.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+U.rank+"."}),P(ee.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+ee.rank+"."}),T==null&&(T=[1,1,1]),P(gr(R,T),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+T+"'"}),D!=null&&P(en(O),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+D+" but got pad "+O+"."});var re=wv(U.shape,C,R,T,O,D),q=W.runKernelFunc(function(Z){return Z.maxPool3dBackprop(B,U,ee,re)},{dy5D:B,input5D:U});return te?q.as4D(q.shape[1],q.shape[2],q.shape[3],q.shape[4]):q}(v,y,x,e,t,o,r,a)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),l5=j({avgPool3d_:function(n,e,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=L(n,"x","avgPool3d","float32"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),P(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),P(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),P(gr(t,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&P(en(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=wv(c.shape,e,t,o,r,a,i),p=W.runKernelFunc(function(v){return v.avgPool3d(c,d)},{x:c},function(v){return{x:function(){return function(g,y,x,w,_,S,C){var R=L(g,"dy","avgPool3dBackprop"),T=L(y,"input","avgPool3dBackprop"),O=R,D=T,N=!1;T.rank===4&&(N=!0,O=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),D=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),P(O.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+O.rank+"."}),P(D.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),_==null&&(_=[1,1,1]),P(gr(w,_),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),C!=null&&P(en(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+S+"."});var k=wv(D.shape,x,w,_,S,C),I=W.runKernelFunc(function(B){return B.avgPool3dBackprop(O,D,k)},{dy5D:O,input5D:D});return N?I.as4D(I.shape[1],I.shape[2],I.shape[3],I.shape[4]):I}(v,c,e,t,o,r,a)}}});return p=p.cast(c.dtype),f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Za=j({slice_:function(n,e,t){var r,a,i=L(n,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice()).forEach(function(c){P(c!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=t==null?new Array(i.rank).fill(-1):typeof t=="number"?[t].concat(new Array(i.rank-1).fill(-1)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(-1)):t).map(function(c,f){return c>=0?c:(P(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+f+"."}),i.shape[f]-r[f])}),Pz(i,r,a);var o=i.shape,u={begin:r,size:a};return W.runKernelFunc(function(c){return c.slice(i,r,a)},{x:i},function(c){for(var f=[],d=0;d<c.rank;d++)f.push([r[d],o[d]-r[d]-a[d]]);return{x:function(){return c.pad(f)}}},"Slice",u)}}),c5=j({slice1d_:function(n,e,t){var r=L(n,"x","slice1d");return P(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Za(r,[e],[t])}}),f5=j({slice2d_:function(n,e,t){var r=L(n,"x","slice2d");return P(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Za(r,e,t)}}),ZA=j({slice3d_:function(n,e,t){var r=L(n,"x","slice3d");return P(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Za(r,e,t)}}),h5=j({slice4d_:function(n,e,t){var r=L(n,"x","slice4d");return P(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Za(r,e,t)}});function JA(n,e,t,r,a){return e.rank<t.rank&&(e=e.reshape(mr(e.shape,r))),n.rank<t.rank&&(n=n.reshape(mr(n.shape,r))),{x:function(){var i=n.mul(t.equal(e).cast(n.dtype));return a==null?i:i.transpose(a)}}}var d5=j({all_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","all","bool"),a=yn(e,r.shape),i=a,o=ai(i,r.rank);o!=null&&(r=r.transpose(o),i=ii(i.length,r.rank));var u=W.runKernelFunc(function(f){return f.all(r,i)},{$x:r});if(t){var c=mr(u.shape,a);return u.reshape(c)}return u}}),p5=j({any_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","any","bool"),a=yn(e,r.shape),i=a,o=ai(i,r.rank);o!=null&&(r=r.transpose(o),i=ii(i.length,r.rank));var u=W.runKernelFunc(function(f){return f.any(r,i)},{$x:r});if(t){var c=mr(u.shape,a);return u.reshape(c)}return u}}),v5=j({argMax_:function(n,e){e===void 0&&(e=0);var t=L(n,"x","argMax");e==null&&(e=0);var r=yn(e,t.shape),a=ai(r,t.rank);a!=null&&(t=t.transpose(a),r=ii(r.length,t.rank));var i={axis:r[0]},o=[t];return W.runKernelFunc(function(u,c){var f=u.argMax(t,r[0]);return c([t]),f},{x:t},function(u,c){var f=c[0];return{x:function(){return gt(f)}}},"ArgMax",i,o)}}),m5=j({argMin_:function(n,e){e===void 0&&(e=0);var t=L(n,"x","argMin");e==null&&(e=0);var r=yn(e,t.shape),a=ai(r,t.rank);return a!=null&&(t=t.transpose(a),r=ii(r.length,t.rank)),W.runKernelFunc(function(i,o){var u=i.argMin(t,r[0]);return o([t]),u},{$x:t},function(i,o){var u=o[0];return{$x:function(){return gt(u)}}})}}),g5=j({logSumExp_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","logSumExp"),a=yn(e,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),u=i.reshape(o.shape).add(o);if(t){var c=mr(u.shape,a);return u.reshape(c)}return u}}),Jv=j({max_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","max"),a=r,i=yn(e,r.shape),o=i,u=ai(o,r.rank);u!=null&&(r=r.transpose(u),o=ii(o.length,r.rank));var c=[r],f=W.runKernelFunc(function(p,v){var g=p.max(r,o);return v([a,g]),g},{x:r},function(p,v){return JA(p,v[1],v[0],i,u)},"Max",{axes:o},c,[!0]);if(t){var d=mr(f.shape,i);f=f.reshape(d)}return f}}),y5=j({mean_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","mean"),a=yn(e,r.shape),i=Ie(Wn(r.shape,a)[1]);return $v(function(o){var u=we(i);return{value:(u.dtype===o.dtype?o:o.cast(u.dtype)).div(u).sum(e,t),gradFunc:function(c){var f=o.shape.slice();return a.forEach(function(d){f[d]=1}),c.reshape(f).mul(lc(o.shape,"float32")).div(i)}}})(r)}}),b5=j({min_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","min"),a=r,i=yn(e,r.shape),o=i,u=ai(o,r.rank);u!=null&&(r=r.transpose(u),o=ii(o.length,r.rank));var c=[r],f=W.runKernelFunc(function(p,v){var g=p.min(r,o);return v([a,g]),g},{x:r},function(p,v){return JA(p,v[1],v[0],i,u)},"Min",{axes:o},c,[!0]);if(t){var d=mr(f.shape,i);f=f.reshape(d)}return f}}),x5=j({moments_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=yn(e,(n=L(n,"x","moments")).shape),a=n.mean(r,t),i=a.shape;t||(i=mr(a.shape,r));var o=n.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,t)}}}),ek=j({sum_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=yn(e,r.shape);return $v(function(i){var o=ai(a,i.rank),u=a,c=i;o!=null&&(c=i.transpose(o),u=ii(u.length,i.rank));var f=function(g){var y=i.shape.slice();return a.forEach(function(x){y[x]=1}),g.reshape(y).mul(lc(i.shape,"float32"))},d={axes:u},p=W.runKernelFunc(function(g){return g.sum(c,u)},{x:c},function(g){return{x:function(){return f(g)}}},"Sum",d);if(t){var v=mr(p.shape,a);p=p.reshape(v)}return{value:p,gradFunc:f}})(r)}}),w5=j({prod_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=L(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=yn(e,r.shape),i=ai(a,r.rank),o=a,u=r;i!=null&&(u=r.transpose(i),o=ii(o.length,r.rank));var c=W.runKernelFunc(function(d){return d.prod(u,o)},{permutedX:u});if(t){var f=mr(c.shape,a);c=c.reshape(f)}return c}}),tk=j({elu_:function(n){var e=L(n,"x","elu");return W.runKernelFunc(function(t,r){var a=t.elu(e);return r([a]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return W.runKernelFunc(function(i){return i.eluDer(t,a)},{dy:t,y:a})}}})}}),_5=j({leakyRelu_:function(n,e){e===void 0&&(e=.2);var t=L(n,"x","leakyRelu");return Wx(we(e).mul(t),t)}}),nk=j({prelu_:function(n,e){var t=L(n,"x","prelu"),r=L(e,"alpha","prelu");return W.runKernelFunc(function(a,i){var o=a.prelu(t,r);return i([t,r]),o},{x:t,alpha:r},function(a,i){var o=i[0],u=i[1],c=o.greater(0);return{x:function(){return nu(c,a,a.mul(u))},alpha:function(){var f=nu(c,gt(a),a.mul(o)),d=mn(u.shape,a.shape);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)}}},"Prelu")}}),qt=j({relu_:function(n){var e=L(n,"x","relu");return e.dtype==="bool"?e.toInt():W.runKernelFunc(function(t,r){var a=t.relu(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mulStrict(a.step().toFloat())}}},"Relu")}}),rk=j({relu6_:function(n){var e=L(n,"x","relu6");return e.dtype==="bool"?e.toInt():W.runKernelFunc(function(t,r){var a=t.relu6(e);return r([e]),a},{x:e},function(t,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return t.mulStrict(i.toFloat())}}},"Relu6")}}),E5=j({selu_:function(n){var e=L(n,"x","selu");return W.runKernelFunc(function(t,r){var a=t.selu(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){var i=a.greater(we(0)),o=we(Vx),u=we(jx),c=t.mul(u),f=t.mul(o).mul(a.toFloat().exp());return nu(i,c,f)}}})}}),Ko=j({transpose_:function(n,e){var t=L(n,"x","transpose");if(e==null&&(e=t.shape.map(function(a,i){return i}).reverse()),P(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."}),e.forEach(function(a){P(a>=0&&a<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e})}),t.rank<=1)return t.clone();var r={perm:e};return W.runKernelFunc(function(a){return a.transpose(t,e)},{x:t},function(a){var i=Dx(e);return{x:function(){return a.transpose(i)}}},"Transpose",r)}}),S5=j({localResponseNormalization_:function(n,e,t,r,a){e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=L(n,"x","localResponseNormalization");P(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),P(en(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=i,u=!1;i.rank===3&&(u=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=W.runKernelFunc(function(f,d){var p=f.localResponseNormalization4D(o,e,t,r,a);return d([o,p]),p},{x4D:o},function(f,d){var p=d[0],v=d[1];return{x4D:function(){return W.runKernelFunc(function(g){return g.LRNGrad(f,p,v,e,t,r,a)},{})}}});return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),ak=j({norm_:function(n,e,t,r){e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var a=function u(c,f,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return u(c.reshape([-1]),f,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(f===1)return c.abs().sum(d);if(f===1/0)return c.abs().max(d);if(f===-1/0)return c.abs().min(d);if(f==="euclidean"||f===2)return c.abs().pow(we(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}if(Array.isArray(d)&&d.length===2){if(f===1)return c.abs().sum(d[0]).max(d[1]-1);if(f===1/0)return c.abs().sum(d[1]).max(d[0]);if(f===-1/0)return c.abs().sum(d[1]).min(d[0]);if(f==="fro"||f==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}throw new Error("Error in norm: invalid axis: "+d)}(n=L(n,"x","norm"),e,t),i=a.shape;if(r){var o=yn(t,n.shape);i=mr(a.shape,o)}return a.reshape(i)}}),C5=j({basicLSTMCell_:function(n,e,t,r,a,i){var o=L(n,"forgetBias","basicLSTMCell"),u=L(e,"lstmKernel","basicLSTMCell"),c=L(t,"lstmBias","basicLSTMCell"),f=L(r,"data","basicLSTMCell"),d=L(a,"c","basicLSTMCell"),p=L(i,"h","basicLSTMCell"),v=f.concat(p,1).matMul(u).add(c),g=v.shape[0],y=v.shape[1]/4,x=[g,y],w=v.slice([0,0],x),_=v.slice([0,y],x),S=v.slice([0,2*y],x),C=v.slice([0,3*y],x),R=w.sigmoid().mulStrict(_.tanh()).addStrict(d.mulStrict(o.add(S).sigmoid())),T=R.tanh().mulStrict(C.sigmoid());return[R,T]}}),R5=j({multiRNNCell_:function(n,e,t,r){for(var a=L(e,"data","multiRNNCell"),i=vv(t,"c","multiRNNCell"),o=vv(r,"h","multiRNNCell"),u=a,c=[],f=0;f<n.length;f++){var d=n[f](u,i[f],o[f]);c.push(d[0]),c.push(d[1]),u=d[1]}var p=[],v=[];for(f=0;f<c.length;f+=2)p.push(c[f]),v.push(c[f+1]);return[p,v]}}),T5=j({movingAverage_:function(n,e,t,r,a){a===void 0&&(a=!0);var i=L(n,"v","movingAverage"),o=L(e,"x","movingAverage"),u=L(t,"decay","movingAverage");SB(i,o),P(On(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=we(1),f=c.sub(u),d=o.sub(i).mul(f);if(a){P(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=L(r,"step","movingAverage");d=d.div(c.sub(Cv(u,p)))}return i.add(d)}}),O5=j({stridedSlice_:function(n,e,t,r,a,i,o,u,c){if(a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),r==null&&(r=new Array(e.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var f=L(n,"x","stridedSlice"),d=lC(u),p=f.shape.slice();d.forEach(function(w){e[w]=0,t[w]=1,p.splice(w,0,1)}),f=f.reshape(p);for(var v=0;v<f.rank;v++)e[v]=Bz(a,e,r,f.shape,v),t[v]=zz(i,t,r,f.shape,v),r[v]=r[v]||1;var g=lC(c);g.forEach(function(w){t[w]=e[w]+1,r[w]=1});var y=Fx(e,t,r),x=y.filter(function(w,_){return g.indexOf(_)===-1});return r.every(function(w){return w===1})?Za(f,e,y).reshape(x):W.runKernelFunc(function(w){return w.stridedSlice(f,e,t,r)},{$x:f}).reshape(x)}}),A5=j({topk_:function(n,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var r=L(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(e>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+e);var i=W.runKernelFunc(function(o){return o.topk(r,e,t)},{$x:r});return{values:i[0],indices:i[1]}}}),k5=j({scatterND_:function(n,e,t){var r=L(n,"indices","scatterND","int32"),a=L(e,"updates","scatterND");return Lz(a,r,t),W.runKernelFunc(function(i){return i.scatterND(r,a,t)},{indices:r,updates:a},null,"ScatterNd",{shape:t})}}),$x=j({fft_:function(n){P(n.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return W.runKernelFunc(function(a){return a.fft(r)},{input:n}).reshape(n.shape)}}),Rv=j({ifft_:function(n){P(n.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return W.runKernelFunc(function(a){return a.ifft(r)},{input:n}).reshape(n.shape)}}),Kx=j({rfft_:function(n,e){P(n.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+n.dtype});var t,r=n.shape[n.shape.length-1],a=n.size/r;if(e!=null&&e<r){var i=n.shape.map(function(_){return 0}),o=n.shape.map(function(_){return _});o[n.shape.length-1]=e,t=n.slice(i,o),r=e}else if(e!=null&&e>r){var u=n.shape.map(function(_){return _});u[n.shape.length-1]=e-r,t=n.concat(Bt(u),n.shape.length-1),r=e}else t=n;var c=t.zerosLike(),f=Pn(t,c).as2D(a,r),d=$x(f),p=Math.floor(r/2)+1,v=Kr(d),g=ja(d),y=v.split([p,r-p],v.shape.length-1),x=g.split([p,r-p],g.shape.length-1),w=t.shape.slice();return w[t.shape.length-1]=p,Pn(y[0],x[0]).reshape(w)}}),ik=j({irfft_:function(n){var e=n.shape[n.shape.length-1],t=n.size/e;if(e<=2){var r=n.as2D(t,e),a=Rv(r);return Kr(a)}var i=[t,2*(e-1)],o=Kr(n).as2D(t,e),u=ja(n).as2D(t,e),c=o.slice([0,1],[t,e-2]).reverse(1),f=u.slice([0,1],[t,e-2]).reverse(1).mul(we(-1)),d=o.concat(c,1),p=u.concat(f,1);return r=Pn(d,p).as2D(i[0],i[1]),a=Rv(r),Kr(a)}}),D5=Object.freeze({fft:$x,ifft:Rv,rfft:Kx,irfft:ik}),N5=j({sparseToDense_:function(n,e,t,r){r===void 0&&(r=0);var a=L(n,"sparseIndices","sparseToDense","int32"),i=L(e,"sparseValues","sparseToDense"),o=L(r,"defaultValue","sparseToDense",i.dtype);return function(u,c,f,d){if(u.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+u.dtype+".");if(u.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+u.shape+".");var p=u.rank>0?u.shape[0]:1,v=u.rank>1?u.shape[1]:1;if(f.length!==v)throw new Error("outputShape has incorrect number of elements:, "+f.length+", should be: "+v+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==p))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+p+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,t,o),W.runKernelFunc(function(u){return u.sparseToDense(a,i,t,o)},{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),I5=j({gatherND_:function(n,e){var t=L(e,"indices","gatherND","int32"),r=L(n,"x","gatherND");return W.runKernelFunc(function(a){return a.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),M5=j({diag_:function(n){var e=L(n,"x","diag").flatten(),t=n.shape.concat(n.shape);return W.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(t)}}),F5=j({dropout_:function(n,e,t,r){var a=L(n,"x","dropout");if(P(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),P(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return n instanceof jt?a.clone():a;var i=function(c,f){if(f==null)return c.shape.slice();if(On(c.shape,f))return f;if(c.shape.length===f.length){for(var d=[],p=0;p<c.shape.length;p++)f[p]==null&&c.shape[p]!=null?d.push(c.shape[p]):d.push(f[p]);return d}return f}(a,t),o=1-e,u=nA(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(u)}});function ok(n,e,t){for(var r=1-n%2,a=new Float32Array(n),i=0;i<n;++i){var o=2*Math.PI*i/(n+r-1);a[i]=e-t*Math.cos(o)}return sn(a,"float32")}var Xx=j({hannWindow_:function(n){return ok(n,.5,.5)}}),sk=j({hammingWindow_:function(n){return ok(n,.54,.46)}}),Yx=j({frame_:function(n,e,t,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+e<=n.size;)o.push(Za(n,i,e)),i+=t;if(r)for(;i<n.size;){var u=i+e-n.size,c=pn([Za(n,i,e-u),$a([u],a)]);o.push(c),i+=t}return o.length===0?Uo([],[0,e]):pn(o).as2D(o.length,e)}}),uk=j({stft_:function(n,e,t,r,a){var i;a===void 0&&(a=Xx),r==null&&(i=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=Yx(n,e,t),u=$n(o,a(e)),c=[],f=0;f<o.shape[0];f++)c.push(Kx(u.slice([f,0],[1,e]),r));return pn(c)}}),L5=Object.freeze({hannWindow:Xx,hammingWindow:sk,frame:Yx,stft:uk}),Qn,P5=function(n,e,t){return t===void 0&&(t=1),ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x,w;return De(this,function(_){switch(_.label){case 0:return r=L(n,"predictions","inTopK"),a=L(e,"targets","inTopK"),P(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),P(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),Ot(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],P(t>0&&t<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+t}),[4,r.data()];case 1:return o=_.sent(),[4,a.data()];case 2:for(u=_.sent(),c=[o.length/i,i],d=c[1],p=oh("bool",f=c[0]),v=0;v<f;v++){for(g=v*d,y=o.subarray(g,g+d),x=[],w=0;w<y.length;w++)x.push({value:y[w],index:w});for(x.sort(function(S,C){return C.value-S.value}),p[v]=0,w=0;w<t;w++)if(x[w].index===u[v]){p[v]=1;break}}return n!==r&&r.dispose(),e!==a&&a.dispose(),[2,zn(p,a.shape,"bool")]}})})};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Qn||(Qn={}));var B5=j({absoluteDifference_:function(n,e,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=L(n,"labels","absoluteDifference"),i=L(e,"predictions","absoluteDifference"),o=null;t!=null&&(o=L(t,"weights","absoluteDifference")),Ot(a.shape,i.shape,"Error in absoluteDifference: ");var u=a.sub(i).abs();return qi(u,o,r)}}),qi=j({computeWeightedLoss_:function(n,e,t){t===void 0&&(t=Qn.SUM_BY_NONZERO_WEIGHTS);var r=L(n,"losses","computeWeightedLoss"),a=null;e!=null&&(a=L(e,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(t===Qn.NONE)return i;if(t===Qn.SUM)return i.sum();if(t===Qn.MEAN){if(a==null)return i.mean();var o=r.size/a.size,u=i.sum().div(a.sum());return o>1?u.div(we(o)):u}if(t===Qn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(we(r.size));var c=a.mul(lc(r.shape)).notEqual(we(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+t)}}),z5=j({cosineDistance_:function(n,e,t,r,a){a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=L(n,"labels","cosineDistance"),o=L(e,"predictions","cosineDistance"),u=null;r!=null&&(u=L(r,"weights","cosineDistance")),Ot(i.shape,o.shape,"Error in cosineDistance: ");var c=we(1).sub(i.mul(o).sum(t,!0));return qi(c,u,a)}}),U5=j({hingeLoss_:function(n,e,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=L(n,"labels","hingeLoss"),i=L(e,"predictions","hingeLoss"),o=null;t!=null&&(o=L(t,"weights","hingeLoss")),Ot(a.shape,i.shape,"Error in hingeLoss: ");var u=we(1);a=we(2).mul(a).sub(u);var c=u.sub(a.mul(i)).relu();return qi(c,o,r)}}),V5=j({huberLoss_:function(n,e,t,r,a){r===void 0&&(r=1),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=L(n,"labels","huberLoss"),o=L(e,"predictions","huberLoss"),u=null;t!=null&&(u=L(t,"weights","huberLoss")),Ot(i.shape,o.shape,"Error in huberLoss: ");var c=we(r),f=o.sub(i).abs(),d=VA(f,c),p=f.sub(d),v=we(.5).mul(d.square()).add(c.mul(p));return qi(v,u,a)}}),j5=j({logLoss_:function(n,e,t,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=L(n,"labels","logLoss"),o=L(e,"predictions","logLoss"),u=null;t!=null&&(u=L(t,"weights","logLoss")),Ot(i.shape,o.shape,"Error in logLoss: ");var c=we(1),f=we(r),d=i.mul(o.add(f).log()).neg().sub(c.sub(i).mul(c.sub(o).add(f).log()));return qi(d,u,a)}}),q5=j({meanSquaredError_:function(n,e,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=L(n,"labels","meanSquaredError"),i=L(e,"predictions","meanSquaredError"),o=null;t!=null&&(o=L(t,"weights","meanSquaredError")),Ot(a.shape,i.shape,"Error in meanSquaredError: ");var u=a.squaredDifference(i);return qi(u,o,r)}}),W5=j({sigmoidCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=L(n,"multiClassLabels","sigmoidCrossEntropy"),o=L(e,"logits","sigmoidCrossEntropy"),u=null;if(t!=null&&(u=L(t,"weights","sigmoidCrossEntropy")),Ot(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=we(r),f=we(1),d=we(.5);i=i.mul(f.sub(c)).add(d.mul(c))}var p=function(v,g){var y=L(v,"labels","sigmoidCrossEntropyWithLogits"),x=L(g,"logits","sigmoidCrossEntropyWithLogits");Ot(y.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=x.relu(),_=x.mul(y),S=x.abs().neg().exp().log1p();return w.sub(_).add(S)}(i,o);return qi(p,u,a)}}),H5=j({softmaxCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=L(n,"onehotLabels","softmaxCrossEntropy"),o=L(e,"logits","softmaxCrossEntropy"),u=null;if(t!=null&&(u=L(t,"weights","softmaxCrossEntropy")),Ot(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=we(r),f=we(1),d=we(i.shape[1]);i=i.mul(f.sub(c)).add(c.div(d))}var p=function(v,g,y){if(y===void 0&&(y=-1),y===-1&&(y=g.rank-1),y!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+y);return $v(function(x,w,_){var S=w.logSumExp([y],!0),C=w.toFloat().sub(S);return _([x,C]),{value:C.mul(x).neg().sum([y]),gradFunc:function(R,T){var O=T[0],D=T[1],N=mr(R.shape,[y]);return[R.reshape(N).mul(O.toFloat().sub(D.exp())),R.reshape(N).mul(D.exp().sub(O.toFloat()))]}}})(v,g)}(i,o);return qi(p,u,a)}}),G5=Object.freeze({get Reduction(){return Qn},absoluteDifference:B5,computeWeightedLoss:qi,cosineDistance:z5,hingeLoss:U5,huberLoss:V5,logLoss:j5,meanSquaredError:q5,sigmoidCrossEntropy:W5,softmaxCrossEntropy:H5});function DC(n,e){return e===void 0&&(e=!1),W.tidy(function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var t=n.shape[0],r=n.shape[1],a=tA(t),i=n.clone(),o=Uo([[1]],[1,1]),u=o.clone(),c=t>=r?r:t,f=function(p){var v,g=i,y=u,x=a;v=W.tidy(function(){var w=i.slice([p,p],[t-p,1]),_=w.norm(),S=i.slice([p,p],[1,1]),C=Uo([[-1]]).where(S.greater(0),Uo([[1]])),R=S.sub(C.mul(_)),T=w.div(R);u=T.shape[0]===1?o.clone():o.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var O=C.matMul(R).div(_).neg(),D=i.slice([p,0],[t-p,r]),N=O.mul(u);if(p===0)i=D.sub(N.matMul(u.transpose().matMul(D)));else{var k=D.sub(N.matMul(u.transpose().matMul(D)));i=i.slice([0,0],[p,r]).concat(k,0)}var I=a.slice([0,p],[t,a.shape[1]-p]);if(p===0)a=I.sub(I.matMul(u).matMul(N.transpose()));else{var B=I.sub(I.matMul(u).matMul(N.transpose()));a=a.slice([0,0],[t,p]).concat(B,1)}return[u,i,a]}),u=v[0],i=v[1],a=v[2],vr([g,y,x])},d=0;d<c;++d)f(d);return!e&&t>r&&(a=a.slice([0,0],[t,r]),i=i.slice([0,0],[r,r])),[a,i]})}var Q5=j({bandPart_:function(n,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=L(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],u=i[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(t<=u))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+u+").");e<0&&(e=o),t<0&&(t=u);var c=mv(0,o,1,"int32").reshape([-1,1]),f=mv(0,u,1,"int32"),d=gn(c,f),p=Xv(d.lessEqual(we(+e,"int32")),d.greaterEqual(we(-t,"int32"))),v=Bt([o,u],r.dtype);return Nr(vn(r.reshape([-1,o,u])).map(function(g){return nu(p,g,v)})).reshape(a)}}),$5=j({gramSchmidt_:function(n){var e;if(Array.isArray(n)){e=!1,P(n!=null&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=n[0].shape[0],r=function(c){P(n[c].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[c].shape[0]+" vs. "+t+")"})},a=1;a<n.length;++a)r(a)}else e=!0,n=Ix(n,n.shape[0],0).map(function(c){return aA(c,[0])});P(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var i=[],o=n,u=function(c){i.push(W.tidy(function(){var f=o[c];if(c>0)for(var d=0;d<c;++d){var p=ek(i[d].mulStrict(f)).mul(i[d]);f=f.sub(p)}return f.div(ak(f,"euclidean"))}))};for(a=0;a<n.length;++a)u(a);return e?Nr(i,0):i}}),K5=j({qr_:function(n,e){if(e===void 0&&(e=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return DC(n,e);var t=n.shape.slice(0,n.shape.length-2).reduce(function(o,u){return o*u}),r=vn(n.reshape([t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),a=[],i=[];return r.forEach(function(o){var u=DC(o,e),c=u[0],f=u[1];a.push(c),i.push(f)}),[Nr(a,0).reshape(n.shape),Nr(i,0).reshape(n.shape)]}}),X5=Object.freeze({bandPart:Q5,gramSchmidt:$5,qr:K5});function em(n,e,t,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=n.shape[0];return t=Math.min(t,o),P(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),P(n.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),P(n.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),P(e.rank===1,function(){return"scores must be a 1D tensor"}),P(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),P(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Y5=j({resizeBilinear_:function(n,e,t){t===void 0&&(t=!1);var r=L(n,"images","resizeBilinear");P(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],u=e[1],c=W.runKernelFunc(function(f,d){return d([a]),f.resizeBilinear(a,o,u,t)},{x:a},function(f,d){return{x:function(){return W.runKernelFunc(function(p){return p.resizeBilinearBackprop(f,d[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:o,newWidth:u});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Z5=j({resizeNearestNeighbor_:function(n,e,t){t===void 0&&(t=!1);var r=L(n,"images","resizeNearestNeighbor");P(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),P(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],u=e[1],c=W.runKernelFunc(function(f,d){return d([a]),f.resizeNearestNeighbor(a,o,u,t)},{batchImages:a},function(f,d){return{batchImages:function(){return W.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(f,d[0],t)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),J5=j({nonMaxSuppression_:function(n,e,t,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=L(n,"boxes","nonMaxSuppression"),o=L(e,"scores","nonMaxSuppression"),u=em(i,o,t,r,a);t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold;var c={maxOutputSize:t,iouThreshold:r,scoreThreshold:a};return W.runKernelFunc(function(f){return f.nonMaxSuppression(i,o,t,r,a)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),e6=function(n,e,t,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),ke(this,void 0,void 0,function(){var i,o,u,c,f,d,p;return De(this,function(v){switch(v.label){case 0:return i=L(n,"boxes","nonMaxSuppressionAsync"),o=L(e,"scores","nonMaxSuppressionAsync"),u=em(i,o,t,r,a),t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=v.sent(),f=c[0],d=c[1],p=Px(f,d,t,r,a),i!==n&&i.dispose(),o!==e&&o.dispose(),[2,p]}})})},t6=j({nonMaxSuppressionWithScore_:function(n,e,t,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=L(n,"boxes","nonMaxSuppression"),u=L(e,"scores","nonMaxSuppression"),c=em(o,u,t,r,a,i),f={maxOutputSize:t=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},d=W.runKernel("NonMaxSuppressionV5",{boxes:o,scores:u},f);return{selectedIndices:d[0],selectedScores:d[1]}}}),n6=function(n,e,t,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),ke(this,void 0,void 0,function(){var o,u,c,f,d,p,v;return De(this,function(g){switch(g.label){case 0:return o=L(n,"boxes","nonMaxSuppressionAsync"),u=L(e,"scores","nonMaxSuppressionAsync"),c=em(o,u,t,r,a,i),t=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),u.data()])];case 1:return f=g.sent(),d=f[0],p=f[1],v=Bx(d,p,t,r,a,i),o!==n&&o.dispose(),u!==e&&u.dispose(),[2,v]}})})},r6=j({cropAndResize_:function(n,e,t,r,a,i){var o=L(n,"image","cropAndResize"),u=L(e,"boxes","cropAndResize","float32"),c=L(t,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var f=u.shape[0];return P(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),P(u.rank===2&&u.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+f+",4] but had shape "+u.shape+"."}),P(c.rank===1&&c.shape[0]===f,function(){return"Error in cropAndResize: boxInd must be have size ["+f+"] but had shape "+u.shape+"."}),P(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),P(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),P(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),W.runKernelFunc(function(d,p){return d.cropAndResize(o,u,c,r,a,i)},{images:o,boxes:u,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),Zx=Object.freeze({resizeBilinear:Y5,resizeNearestNeighbor:Z5,nonMaxSuppression:J5,nonMaxSuppressionAsync:e6,nonMaxSuppressionWithScore:t6,nonMaxSuppressionWithScoreAsync:n6,cropAndResize:r6}),Jx=function(n,e){return!(n>0)||e==="linear"},e1=function(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return n.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},t1=function(n,e){var t=e,r=mn(n.shape,e.shape);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},n1=function(n,e,t){if(e==="linear")return n;if(e==="relu")return qt(n);if(e==="elu")return tk(n);if(e==="relu6")return rk(n);if(e==="prelu")return nk(n,t);throw new Error("Unknown fused activation "+e+".")},a6=j({fusedMatMul_:function(n){var e,t=n.a,r=n.b,a=n.transposeA,i=a!==void 0&&a,o=n.transposeB,u=o!==void 0&&o,c=n.bias,f=n.activation,d=f===void 0?"linear":f,p=n.preluActivationWeights;if(Jx(W.state.gradientDepth,d)===!1){var v=Zv(t,r,i,u);return c!=null&&(v=ut(v,c)),n1(v,d,p)}var g=L(t,"a","fused matMul"),y=L(r,"b","fused matMul");e=Ht(g,y),g=e[0],y=e[1];var x=i?g.shape[g.rank-2]:g.shape[g.rank-1],w=u?y.shape[y.rank-1]:y.shape[y.rank-2],_=i?g.shape[g.rank-1]:g.shape[g.rank-2],S=u?y.shape[y.rank-2]:y.shape[y.rank-1],C=g.shape.slice(0,-2),R=y.shape.slice(0,-2),T=Ie(C),O=Ie(R);P(g.rank>=2&&y.rank>=2&&g.rank===y.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+y.rank+"."}),P(On(C,R),function(){return"Error in fused matMul: outer dimensions ("+C+") and ("+R+") of Tensors with shapes "+g.shape+" and "+y.shape+" must match."}),P(x===w,function(){return"Error in fused matMul: inner shapes ("+x+") and ("+w+") of Tensors with shapes "+g.shape+" and "+y.shape+" and transposeA="+i+" and transposeB="+u+" must match."});var D,N,k=g.shape.slice(0,-2).concat([_,S]),I=i?g.as3D(T,x,_):g.as3D(T,_,x),B=u?y.as3D(O,S,w):y.as3D(O,w,S);c!=null&&ct(k,(D=Ht(D=L(c,"bias","fused matMul"),g)[0]).shape),p!=null&&(N=L(p,"prelu weights","fused matMul"));var U={a:I,b:B};c!=null&&(U.bias=D),p!=null&&(U.preluActivationWeights=N);var ee=[I,B];return W.runKernelFunc(function(te,re){var q=te.fusedBatchMatMul({a:I,b:B,transposeA:i,transposeB:u,bias:D,activation:d,preluActivationWeights:N});return re([I,B,q]),q},U,function(te,re){var q=re[0],Z=re[1],G=re[2],Y=e1(te,G,d),F={};return c!=null&&(F={bias:function(){return t1(D,Y)}}),Object.assign(i||u?!i&&u?{a:function(){return Y.matMul(Z,!1,!1)},b:function(){return Y.matMul(q,!0,!1)}}:i&&!u?{a:function(){return Z.matMul(Y,!1,!0)},b:function(){return q.matMul(Y,!1,!1)}}:{a:function(){return Z.matMul(Y,!0,!0)},b:function(){return Y.matMul(q,!0,!0)}}:{a:function(){return Y.matMul(Z,!1,!0)},b:function(){return q.matMul(Y,!0,!1)}},F)},"_FusedMatMul",{transposeA:i,transposeB:u,activation:d},ee,[!0]).reshape(k)}}),i6=j({fusedConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,o=i===void 0?"NHWC":i,u=n.dilations,c=u===void 0?[1,1]:u,f=n.dimRoundingMode,d=n.bias,p=n.activation,v=p===void 0?"linear":p,g=n.preluActivationWeights;if(v=v||"linear",Jx(W.state.gradientDepth,v)===!1){var y=ea(e,t,r,a,o,c,f);return d!=null&&(y=ut(y,d)),n1(y,v,g)}var x=L(e,"x","conv2d"),w=L(t,"filter","conv2d"),_=x,S=!1;x.rank===3&&(S=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),P(_.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+_.rank+"."}),P(w.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."}),f!=null&&P(en(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+f+" but got pad "+a+"."}),P(_.shape[3]===w.shape[2],function(){return"Error in conv2d: depth of input ("+_.shape[3]+") must match input depth for filter "+w.shape[2]+"."}),P(gr(r,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),P(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var C,R,T=uu(_.shape,w.shape,r,c,a,f);d!=null&&(C=Ht(C=L(d,"bias","fused conv2d"),x)[0],ct(T.outShape,C.shape)),g!=null&&(R=L(g,"prelu weights","fused conv2d"));var O={x:_,filter:w};d!=null&&(O.bias=C),g!=null&&(O.preluActivationWeights=R);var D=[w,_],N=W.runKernelFunc(function(k,I){var B=k.fusedConv2d({input:_,filter:w,convInfo:T,bias:C,activation:v,preluActivationWeights:R});return I([w,_,B]),B},O,function(k,I){var B=I,U=B[0],ee=B[1],te=B[2],re=e1(k,te,v);P(Jl(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var q={};return d!=null&&(q={bias:function(){return t1(C,re)}}),Object.assign({x:function(){return QA(ee.shape,re,U,r,a)},filter:function(){return Gx(ee,re,U.shape,r,a)}},q)},"FusedConv2D",{convInfo:T,activation:v},D,[!0]);return S?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),o6=j({fusedDepthwiseConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,o=i===void 0?"NHWC":i,u=n.dilations,c=u===void 0?[1,1]:u,f=n.dimRoundingMode,d=n.bias,p=n.activation,v=p===void 0?"linear":p,g=n.preluActivationWeights;if(Jx(W.state.gradientDepth,v)===!1){var y=Yv(e,t,r,a,o,c,f);return d!=null&&(y=ut(y,d)),n1(y,v,g)}var x=L(e,"x","depthwiseConv2d"),w=L(t,"filter","depthwiseConv2d"),_=x,S=!1;x.rank===3&&(S=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),P(_.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+_.rank+"."}),P(w.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."}),P(_.shape[3]===w.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+_.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."}),c==null&&(c=[1,1]),P(gr(r,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),f!=null&&P(en(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+f+" but got pad "+a+"."});var C,R,T=uu(_.shape,w.shape,r,c,a,f,!0);d!=null&&(C=Ht(C=L(d,"bias","fused conv2d"),x)[0],ct(T.outShape,C.shape)),g!=null&&(R=L(g,"prelu weights","fused depthwiseConv2d"));var O={x:_,filter:w};d!=null&&(O.bias=C),g!=null&&(O.preluActivationWeights=R);var D=[w,_],N=W.runKernelFunc(function(k,I){var B=k.fusedDepthwiseConv2D({input:_,filter:w,convInfo:T,bias:C,activation:v,preluActivationWeights:R});return I([w,_,B]),B},O,function(k,I){P(Jl(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var B=I[0],U=I[1],ee=I[2],te=e1(k,ee,v),re={};return d!=null&&(re={bias:function(){return t1(C,te)}}),Object.assign({x:function(){return $A(U.shape,te,B,T)},filter:function(){return KA(U,te,B.shape,T)}},re)},"FusedDepthwiseConv2D",{convInfo:T,activation:v},D,[!0]);return S?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),s6=Object.freeze({matMul:a6,conv2d:i6,depthwiseConv2d:o6}),u6=Object.freeze({image:Zx,linalg:X5,losses:G5,spectral:D5,fused:s6,signal:L5,square:jV,squaredDifference:DA,conv1d:Yj,conv2d:ea,conv3d:Zj,depthwiseConv2d:Yv,separableConv2d:Qx,conv2dTranspose:Jj,conv3dTranspose:e5,op:j,batchNormalization2d:yj,batchNormalization3d:bj,batchNormalization4d:xj,batchNormalization:wj,batchNorm:PA,batchNorm2d:_j,batchNorm3d:Ej,batchNorm4d:Sj,booleanMaskAsync:Xj,complex:Pn,real:Kr,imag:ja,concat:pn,concat1d:sz,concat2d:uz,concat3d:lz,concat4d:cz,split:Ix,matMul:Zv,dot:t5,outerProduct:n5,reverse:Fh,reverse1d:r5,reverse2d:a5,reverse3d:i5,reverse4d:o5,maxPool:En,avgPool:Lh,pool:s5,maxPool3d:u5,avgPool3d:l5,slice:Za,slice1d:c5,slice2d:f5,slice3d:ZA,slice4d:h5,abs:qV,acos:WV,acosh:HV,asin:GV,asinh:QV,atan:$V,atanh:KV,ceil:XV,clipByValue:qx,cos:YV,cosh:ZV,erf:JV,exp:Db,expm1:ej,floor:tj,log:nj,log1p:rj,logSigmoid:aj,neg:Sv,reciprocal:ij,round:oj,rsqrt:NA,sigmoid:IA,sign:sj,isNaN:uj,isInf:lj,isFinite:cj,sin:fj,sinh:hj,softplus:dj,sqrt:pj,step:vj,tan:mj,tanh:gj,all:d5,any:p5,argMax:v5,argMin:m5,logSumExp:g5,max:Jv,mean:y5,min:b5,moments:x5,sum:ek,prod:w5,equal:jA,equalStrict:Uj,greater:Vj,greaterEqual:qA,greaterEqualStrict:jj,greaterStrict:qj,less:Wj,lessEqual:Hj,lessEqualStrict:Gj,lessStrict:Qj,notEqual:$j,notEqualStrict:Kj,add:ut,addN:Tj,addStrict:Oj,atan2:Aj,div:fa,divNoNan:kj,divStrict:Dj,floorDiv:UA,maximum:Wx,maximumStrict:Nj,minimum:VA,minimumStrict:Ij,mod:Mj,modStrict:Fj,mul:$n,mulStrict:Lj,pow:Cv,powStrict:Pj,squaredDifferenceStrict:Bj,sub:gn,subStrict:zj,elu:tk,leakyRelu:_5,prelu:nk,relu:qt,relu6:rk,selu:E5,logicalAnd:Xv,logicalNot:Cj,logicalOr:BA,logicalXor:Rj,where:nu,whereAsync:zA,buffer:Je,print:bz,batchToSpaceND:eA,broadcastTo:xz,cast:wz,clone:_z,cumsum:Ez,depthToSpace:Sz,expandDims:$r,eye:tA,multinomial:Cz,oneHot:Tb,pad:su,pad1d:Rz,pad2d:Tz,pad3d:Oz,pad4d:Az,rand:kz,randomNormal:Dz,randomGamma:Nz,randomUniform:nA,reshape:pa,spaceToBatchND:rA,squeeze:aA,stack:Nr,tile:yl,truncatedNormal:Iz,unstack:vn,setdiff1dAsync:Mz,fill:$a,linspace:oz,ones:lc,range:mv,scalar:we,tensor:zn,tensor1d:sn,tensor2d:Uo,tensor3d:Nx,tensor4d:hr,tensor5d:rz,tensor6d:az,variable:iz,zeros:Bt,onesLike:JO,zerosLike:gt,transpose:Ko,softmax:ji,logSoftmax:Vz,localResponseNormalization:S5,norm:ak,gather:Hx,unsortedSegmentSum:WA,basicLSTMCell:C5,multiRNNCell:R5,movingAverage:T5,stridedSlice:O5,topk:A5,scatterND:k5,fft:$x,ifft:Rv,rfft:Kx,irfft:ik,sparseToDense:N5,gatherND:I5,diag:M5,dropout:F5,hannWindow:Xx,hammingWindow:sk,frame:Yx,stft:uk,inTopKAsync:P5});function ve(n,e){Array.isArray(n)||(n=[n]),n.forEach(function(t){t!=null&&P(t.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function l0(n,e,t,r){if(t==="linear")return n.linear(e);if(t==="relu")return n.relu(e);if(t==="elu")return n.elu(e);if(t==="relu6")return n.relu6(e);if(t==="prelu")return n.prelu(e,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var l6=function(n){function e(){var t=n.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new fA(t,W),t}return _a(e,n),e.prototype.write=function(t,r,a){this.firstUse&&(this.firstUse=!1,ue().get("IS_NODE")&&pv(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:t,dtype:a}),i},e.prototype.move=function(t,r,a,i){this.data.set(t,{values:r,dtype:i})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var r=this.data.get(t),a=r.dtype,i=r.complexTensors;return a==="complex64"?kb(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),a=r;if(t.dtype==="string")try{a=r.map(function(i){return fv(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Je(t.shape,t.dtype,a)},e.prototype.makeOutput=function(t,r,a){var i=this.write(t,r,a);return W.makeTensorFromDataId(i,r,a,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){return r=za(),t(),[2,{kernelMs:za()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,r){var a=this.makeOutput(null,t.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(ve(t,"slice"),lA(t.shape,r,a)){var i=cA(r,t.strides),o=Ie(a);return zn(this.readSync(t.dataId).subarray(i,i+o),a,t.dtype)}for(var u=Je(a,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var d=u.indexToLoc(f).map(function(p,v){return p+r[v]});u.values[f]=c.get.apply(c,d)}return u.toTensor()},e.prototype.stridedSlice=function(t,r,a,i){ve(t,"stridedSlice");var o=Fx(r,a,i);if(o.some(function(g){return g===0}))return zn([],o);for(var u=Je(o,t.dtype),c=this.bufferSync(t),f=0;f<u.size;f++){for(var d=u.indexToLoc(f),p=new Array(d.length),v=0;v<p.length;v++)p[v]=d[v]*i[v]+r[v];u.set.apply(u,[c.get.apply(c,p)].concat(d))}return u.toTensor()},e.prototype.diag=function(t){for(var r=this.readSync(t.dataId),a=Je([t.size,t.size],t.dtype),i=a.values,o=0;o<r.length;o++)i[o*t.size+o]=r[o];return a.toTensor()},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var d=new Array(a);for(u=0;u<d.length;u++)c[r]=u,d[u]=this.slice(t,c,f).reshape(i);return d},e.prototype.reverse=function(t,r){ve(t,"reverse");for(var a=Je(t.shape,t.dtype),i=this.bufferSync(t),o=function(c){var f=a.indexToLoc(c),d=f.slice();r.forEach(function(p){return d[p]=t.shape[p]-1-d[p]}),a.set.apply(a,[i.get.apply(i,d)].concat(f))},u=0;u<a.size;u++)o(u);return a.toTensor()},e.prototype.concat=function(t,r){var a=this;if(t[0].dtype==="complex64"){var i=t.map(function(g){return Kr(g)}),o=t.map(function(g){return ja(g)});return Pn(this.concat(i,r),this.concat(o,r))}var u=t.map(function(g){var y=Ie(g.shape.slice(r));return g.as2D(-1,y)}),c=Zl(u.map(function(g){return g.shape}),1),f=Je(c,t[0].dtype).values;if(u[0].shape[0]===1){var d=0;u.forEach(function(g){f.set(a.readSync(g.dataId),d),d+=g.size})}else{var p=0;u.forEach(function(g){for(var y=a.readSync(g.dataId),x=0,w=0;w<g.shape[0];++w)for(var _=w*c[1]+p,S=0;S<g.shape[1];++S)f[_+S]=y[x++];p+=g.shape[1]})}var v=Zl(t.map(function(g){return g.shape}),r);return zn(f,v,t[0].dtype)},e.prototype.neg=function(t){return ve(t,"neg"),this.multiply(we(-1),t)},e.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a+o,imag:i+u}}):this.broadcastedBinaryOp(t,r,Bn(t.dtype,r.dtype),function(a,i){return a+i})},e.prototype.addN=function(t){var r=this;ve(t,"addN");for(var a=t.map(function(d){return r.readSync(d.dataId)}),i=Je(t[0].shape,t[0].dtype),o=i.values,u=0;u<t.length;u++)for(var c=a[u],f=0;f<o.length;f++)o[f]+=c[f];return i.toTensor()},e.prototype.softmax=function(t,r){var a=yn([r],t.shape),i=this.max(t,a),o=mr(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},e.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a-o,imag:i-u}}):this.broadcastedBinaryOp(t,r,Bn(t.dtype,r.dtype),function(a,i){return a-i})},e.prototype.pow=function(t,r){return ve([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.pow(a,i)})},e.prototype.batchMatMul=function(t,r,a,i){ve([t,r],"matMul");for(var o=a?t.shape[1]:t.shape[2],u=a?t.shape[2]:t.shape[1],c=i?r.shape[1]:r.shape[2],f=t.shape[0],d=this.readSync(t.dataId),p=this.readSync(r.dataId),v=a?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],g=v[0],y=v[1],x=v[2],w=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],_=w[0],S=w[1],C=w[2],R=u*c,T=Je([f,u,c],t.dtype),O=T.values,D=this.blockSize,N=0;N<f;N++)for(var k=0;k<u;k+=D)for(var I=0;I<c;I+=D)for(var B=0;B<o;B+=D)for(var U=Math.min(k+D,u),ee=Math.min(I+D,c),te=Math.min(B+D,o),re=k;re<U;re++)for(var q=I;q<ee;q++){for(var Z=0,G=B;G<te;G++)Z+=d[N*g+re*y+G*x]*p[G*_+q*S+N*C];O[N*R+(re*c+q)]+=Z}return T.toTensor()},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=this.batchMatMul(r,a,i,o);return u&&(d=this.add(d,u)),c&&(d=l0(this,d,c,f)),d},e.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a*o-i*u,imag:a*u+i*o}}):this.broadcastedBinaryOp(t,r,Bn(t.dtype,r.dtype),function(a,i){return a*i})},e.prototype.realDivide=function(t,r){return ve([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(a,i){return a/i})},e.prototype.floorDiv=function(t,r){return ve([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(a,i){return Math.floor(a/i)})},e.prototype.sum=function(t,r){ve(t,"sum"),Rr("sum",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,Bn(t.dtype,"int32")),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=0,y=0;y<c;++y)g+=d[v+y];f[p]=g}return u},e.prototype.prod=function(t,r){ve(t,"sum");for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,Bn(t.dtype,"int32")),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=1,y=0;y<c;++y)g*=d[v+y];f[p]=g}return u},e.prototype.unsortedSegmentSum=function(t,r,a){ve(t,"unsortedSegmentSum");for(var i=[],o=t.rank-r.rank,u=0;u<o;++u)r=r.expandDims(u+1);for(u=0;u<a;++u){var c=we(u,"int32"),f=jA(c,r).asType("float32").mul(t).sum(0);i.push(f)}return Nr(i)},e.prototype.argMin=function(t,r){ve(t,"argMin");var a=[r];Rr("argMin",a,t.rank);for(var i=Wn(t.shape,a),o=i[0],u=i[1],c=Bt(o,"int32"),f=Ie(u),d=this.readSync(c.dataId),p=this.readSync(t.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],x=0,w=0;w<f;++w){var _=p[g+w];_<y&&(y=_,x=w)}d[v]=x}return c},e.prototype.argMax=function(t,r){ve(t,"argMax");var a=[r];Rr("argMax",a,t.rank);for(var i=Wn(t.shape,a),o=i[0],u=i[1],c=Bt(o,"int32"),f=Ie(u),d=this.readSync(c.dataId),p=this.readSync(t.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],x=0,w=0;w<f;++w){var _=p[g+w];_>y&&(y=_,x=w)}d[v]=x}return c},e.prototype.cumsum=function(t,r,a,i){if(ve(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var o=Bn(t.dtype,"int32"),u=Bt(t.shape,o),c=this.readSync(u.dataId),f=this.readSync(t.dataId),d=t.shape[t.rank-1],p=i?function(w,_){return w+d-_-1}:function(w,_){return w+_},v=0;v<f.length;v+=d)for(var g=0;g<d;g++){var y=p(v,g);if(g===0)c[y]=a?0:f[y];else{var x=p(v,g-1);c[y]=a?f[x]+c[x]:f[y]+c[x]}}return u},e.prototype.equal=function(t,r){return ve([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a===i?1:0})},e.prototype.notEqual=function(t,r){return ve([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a!==i?1:0})},e.prototype.less=function(t,r){return ve([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<i?1:0})},e.prototype.lessEqual=function(t,r){return ve([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<=i?1:0})},e.prototype.greater=function(t,r){return ve([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>i?1:0})},e.prototype.greaterEqual=function(t,r){return ve([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>=i?1:0})},e.prototype.logicalNot=function(t){ve(t,"logicalNot");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,t.shape,"bool")},e.prototype.logicalAnd=function(t,r){return ve([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a&&i})},e.prototype.logicalOr=function(t,r){return ve([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a||i})},e.prototype.select=function(t,r,a){ve([t,r,a],"select");for(var i=this.readSync(t.dataId),o=this.readSync(r.dataId),u=this.readSync(a.dataId),c=Bt(r.shape,Bn(r.dtype,a.dtype)),f=this.readSync(c.dataId),d=0,p=t.rank===0||t.rank>1||r.rank===1?1:Ie(r.shape.slice(1)),v=0;v<i.length;v++)for(var g=0;g<p;g++)i[v]===1?f[d++]=o[v]:f[d++]=u[v];return c},e.prototype.where=function(t){ve([t],"where");var r=this.readSync(t.dataId);return zx(t.shape,r)},e.prototype.topk=function(t,r,a){return ve(t,"topk"),bA(this.readSync(t.dataId),t.shape,t.dtype,r)},e.prototype.min=function(t,r){ve(t,"min"),Rr("min",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];x<g&&(g=x)}f[p]=g}return u},e.prototype.minimum=function(t,r){return ve([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.min(a,i)})},e.prototype.mod=function(t,r){return ve([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a%i;return a<0&&i<0||a>=0&&i>=0?o:(o+i)%i})},e.prototype.max=function(t,r){ve(t,"max"),Rr("max",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];x>g&&(g=x)}f[p]=g}return u},e.prototype.maximum=function(t,r){return ve([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.max(a,i)})},e.prototype.all=function(t,r){ve(t,"all"),Rr("all",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];g=g&&x}f[p]=g}return u},e.prototype.any=function(t,r){ve(t,"any"),Rr("any",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];g=g||x}f[p]=g}return u},e.prototype.squaredDifference=function(t,r){return ve([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a-i;return o*o})},e.prototype.ceil=function(t){ve(t,"ceil");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.floor=function(t){ve(t,"floor");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.sign=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,t.shape,"float32")},e.prototype.isNaN=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isInf=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isFinite=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.round=function(t){ve(t,"round");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=Math.floor(r[i]);r[i]-o<.5?a[i]=Math.floor(r[i]):r[i]-o>.5?a[i]=Math.ceil(r[i]):a[i]=o%2==0?o:o+1}return this.makeOutput(a,t.shape,"float32")},e.prototype.exp=function(t){ve(t,"exp");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.expm1=function(t){ve(t,"expm1");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.log=function(t){ve(t,"log");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.log1p=function(t){ve(t,"log1p");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log1p(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.sqrt=function(t){ve(t,"sqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.rsqrt=function(t){ve(t,"rsqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=1/Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.reciprocal=function(t){ve(t,"reciprocal");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){ve(t,"relu");for(var r=Bt(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.max(0,i[o]);return r},e.prototype.relu6=function(t){ve(t,"relu");for(var r=Bt(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.min(Math.max(0,i[o]),6);return r},e.prototype.prelu=function(t,r){return ve([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return a<0?i*a:a})},e.prototype.elu=function(t){ve(t,"elu");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,t.shape,"float32")},e.prototype.eluDer=function(t,r){ve([t,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),o=this.readSync(t.dataId),u=0;u<i.length;++u){var c=i[u];a[u]=c>=1?o[u]:o[u]*(c+1)}return this.makeOutput(a,r.shape,"float32")},e.prototype.selu=function(t){ve(t,"selu");for(var r=Vx,a=jx,i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(i,t.shape,"float32")},e.prototype.clip=function(t,r,a){ve(t,"clip");for(var i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>a?a:c<r?r:c}return this.makeOutput(i,t.shape,"float32")},e.prototype.abs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<t.size;++i){var o=a[2*i],u=a[2*i+1];r[i]=Math.hypot(o,u)}return this.makeOutput(r,t.shape,"float32")},e.prototype.int=function(t){ve(t,"int");for(var r=new Int32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,t.shape,"int32")},e.prototype.sigmoid=function(t){ve(t,"sigmoid");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,t.shape,"float32")},e.prototype.softplus=function(t){ve(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o]>-r,c=i[o]<r,f=Math.exp(i[o]),d=void 0;d=c?f:u?i[o]:Math.log(1+f),a[o]=d}return this.makeOutput(a,t.shape,"float32")},e.prototype.sin=function(t){ve(t,"sin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cos=function(t){ve(t,"cos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tan=function(t){ve(t,"tan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asin=function(t){ve(t,"asin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acos=function(t){ve(t,"acos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan=function(t){ve(t,"atan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan2=function(t,r){return ve([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.atan2(a,i)})},e.prototype.sinh=function(t){ve(t,"sinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cosh=function(t){ve(t,"cosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tanh=function(t){ve(t,"tanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=cB(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asinh=function(t){ve(t,"asinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acosh=function(t){ve(t,"acosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atanh=function(t){ve(t,"atanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.erf=function(t){ve(t,"erf");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=Math.sign(a[i]),u=Math.abs(a[i]),c=1/(1+.3275911*u);r[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-u*u))}return this.makeOutput(r,t.shape,"float32")},e.prototype.step=function(t,r){r===void 0&&(r=0),ve(t,"step");for(var a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o];isNaN(u)?a[o]=NaN:a[o]=u>0?1:r}return this.makeOutput(a,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.conv2d(r,a,i);return o&&(f=this.add(f,o)),u&&(f=l0(this,f,u,c)),f},e.prototype.conv2d=function(t,r,a){ve([t,r],"conv2d");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.dataFormat==="channelsLast",v=Je(a.outShape,t.dtype),g=t.strides[0],y=p?t.strides[1]:t.strides[2],x=p?t.strides[2]:1,w=p?1:t.strides[1],_=v.strides[0],S=p?v.strides[1]:v.strides[2],C=p?v.strides[2]:1,R=p?1:v.strides[1],T=this.readSync(t.dataId),O=this.readSync(r.dataId),D=v.values,N=0;N<a.batchSize;++N)for(var k=N*g,I=N*_,B=0;B<a.outHeight;++B)for(var U=I+B*S,ee=B*a.strideHeight-d,te=0;te<i;te++){var re=ee+te*u;if(!(re<0||re>=a.inHeight))for(var q=te*r.strides[0],Z=k+re*y,G=0;G<a.outWidth;++G)for(var Y=U+G*C,F=G*a.strideWidth-f,K=0;K<o;K++){var se=F+K*c;if(!(se<0||se>=a.inWidth))for(var fe=Z+se*x,he=q+K*r.strides[1],be=0;be<a.inChannels;++be){for(var ye=T[fe+be*w],Be=0;Be<a.outChannels;++Be)D[Y+Be*R]+=ye*O[he+Be];he+=a.outChannels}}}return v.toTensor()},e.prototype.conv3d=function(t,r,a){for(var i=a.filterDepth,o=a.filterHeight,u=a.filterWidth,c=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,p=a.padInfo.front,v=a.padInfo.left,g=a.padInfo.top,y=Je(a.outShape,t.dtype),x=this.readSync(t.dataId),w=this.readSync(r.dataId),_=y.values,S=0;S<a.batchSize;++S)for(var C=S*t.strides[0],R=S*y.strides[0],T=0;T<a.outDepth;++T)for(var O=R+T*y.strides[1],D=T*a.strideDepth-p,N=0;N<i;N++){var k=D+N*c;if(!(k<0||k>=a.inDepth))for(var I=N*r.strides[0],B=C+k*t.strides[1],U=0;U<a.outHeight;++U)for(var ee=O+U*y.strides[2],te=U*a.strideHeight-g,re=0;re<o;re++){var q=te+re*f;if(!(q<0||q>=a.inHeight))for(var Z=I+re*r.strides[1],G=B+q*t.strides[2],Y=0;Y<a.outWidth;++Y)for(var F=ee+Y*a.outChannels,K=Y*a.strideWidth-v,se=0;se<u;se++){var fe=K+se*d;if(!(fe<0||fe>=a.inWidth))for(var he=Z+se*r.strides[2],be=G+fe*a.inChannels,ye=he,Be=0;Be<a.inChannels;++Be){for(var xe=x[be+Be],Oe=0;Oe<a.outChannels;++Oe)_[F+Oe]+=xe*w[ye+Oe];ye+=a.outChannels}}}}return y.toTensor()},e.prototype.conv2dDerInput=function(t,r,a){ve([t,r],"conv2dDerInput");for(var i=Je(a.inShape,"float32"),o=i.values,u=this.readSync(t.dataId),c=this.readSync(r.dataId),f=r.strides,d=f[0],p=f[1],v=f[2],g=a.batchSize,y=a.filterHeight,x=a.filterWidth,w=a.inChannels,_=a.inHeight,S=a.inWidth,C=a.outChannels,R=a.outHeight,T=a.outWidth,O=a.strideHeight,D=a.strideWidth,N=a.dataFormat,k=y-1-a.padInfo.top,I=x-1-a.padInfo.left,B=N==="channelsLast",U=i.strides[0],ee=B?i.strides[1]:i.strides[2],te=B?i.strides[2]:1,re=B?1:i.strides[1],q=t.strides[0],Z=B?t.strides[1]:t.strides[2],G=B?t.strides[2]:1,Y=B?1:t.strides[1],F=0;F<g;++F)for(var K=0;K<w;++K)for(var se=0;se<_;++se)for(var fe=se-k,he=Math.max(0,Math.ceil(fe/O)),be=Math.min(R,(y+fe)/O),ye=0;ye<S;++ye){for(var Be=ye-I,xe=Math.max(0,Math.ceil(Be/D)),Oe=Math.min(T,(x+Be)/D),je=0,Ve=he;Ve<be;++Ve)for(var $e=Ve*O-fe,Ye=xe;Ye<Oe;++Ye)for(var bt=q*F+Z*Ve+G*Ye,St=d*(y-1-$e)+p*(x-1-(Ye*D-Be))+v*K,yt=0;yt<C;++yt)je+=u[bt+Y*yt]*c[St+yt];o[U*F+ee*se+te*ye+re*K]=je}return i.toTensor()},e.prototype.conv3dDerInput=function(t,r,a){for(var i=Je(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],d=u[2],p=u[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],x=g[1],w=g[2],_=g[3],S=this.readSync(r.dataId),C=r.strides,R=C[0],T=C[1],O=C[2],D=C[3],N=a.batchSize,k=a.filterDepth,I=a.filterHeight,B=a.filterWidth,U=a.inChannels,ee=a.inDepth,te=a.inHeight,re=a.inWidth,q=a.outChannels,Z=a.outDepth,G=a.outHeight,Y=a.outWidth,F=a.strideDepth,K=a.strideHeight,se=a.strideWidth,fe=k-1-a.padInfo.front,he=I-1-a.padInfo.top,be=B-1-a.padInfo.left,ye=0;ye<N;++ye)for(var Be=0;Be<U;++Be)for(var xe=0;xe<ee;++xe)for(var Oe=xe-fe,je=Math.max(0,Math.ceil(Oe/F)),Ve=Math.min(Z,(k+Oe)/F),$e=0;$e<te;++$e)for(var Ye=$e-he,bt=Math.max(0,Math.ceil(Ye/K)),St=Math.min(G,(I+Ye)/K),yt=0;yt<re;++yt){for(var or=yt-be,Yn=Math.max(0,Math.ceil(or/se)),kn=Math.min(Y,(B+or)/se),Sa=0,yr=je;yr<Ve;++yr)for(var Ca=yr*F-Oe,ta=bt;ta<St;++ta)for(var Dn=ta*K-Ye,na=Yn;na<kn;++na)for(var hu=y*ye+x*yr+w*ta+_*na,oi=R*(k-1-Ca)+T*(I-1-Dn)+O*(B-1-(na*se-or))+D*Be,Zn=0;Zn<q;++Zn)Sa+=v[hu+Zn]*S[oi+Zn];o[c*ye+f*xe+d*$e+p*yt+Be]=Sa}return i.toTensor()},e.prototype.conv2dDerFilter=function(t,r,a){ve([t,r],"conv2dDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dataFormat==="channelsLast",d=Je(a.filterShape,"float32"),p=a.padInfo.left,v=a.padInfo.top,g=this.bufferSync(t),y=this.bufferSync(r),x=0;x<u;++x)for(var w=Math.max(0,Math.ceil((v-x)/i)),_=Math.min(a.outHeight,(a.inHeight+v-x)/i),S=0;S<c;++S)for(var C=Math.max(0,Math.ceil((p-S)/o)),R=Math.min(a.outWidth,(a.inWidth+p-S)/o),T=0;T<a.inChannels;++T)for(var O=0;O<a.outChannels;++O){for(var D=0,N=0;N<a.batchSize;++N)for(var k=w;k<_;++k)for(var I=x+k*i-v,B=C;B<R;++B){var U=S+B*o-p;D+=f?g.get(N,I,U,T)*y.get(N,k,B,O):g.get(N,T,I,U)*y.get(N,O,k,B)}d.set(D,x,S,T,O)}return d.toTensor()},e.prototype.conv3dDerFilter=function(t,r,a){for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=Je(a.filterShape,"float32"),v=p.values,g=p.strides,y=g[0],x=g[1],w=g[2],_=g[3],S=this.readSync(r.dataId),C=r.strides,R=C[0],T=C[1],O=C[2],D=C[3],N=this.readSync(t.dataId),k=t.strides,I=k[0],B=k[1],U=k[2],ee=k[3],te=a.padInfo.front,re=a.padInfo.left,q=a.padInfo.top,Z=0;Z<c;++Z)for(var G=Math.max(0,Math.ceil((te-Z)/i)),Y=Math.min(a.outDepth,(a.inDepth+te-Z)/i),F=Z*y,K=0;K<f;++K)for(var se=Math.max(0,Math.ceil((q-K)/o)),fe=Math.min(a.outHeight,(a.inHeight+q-K)/o),he=K*x+F,be=0;be<d;++be)for(var ye=Math.max(0,Math.ceil((re-be)/u)),Be=Math.min(a.outWidth,(a.inWidth+re-be)/u),xe=be*w+he,Oe=0;Oe<a.inChannels;++Oe)for(var je=Oe*_+xe,Ve=0;Ve<a.outChannels;++Ve){for(var $e=0,Ye=0;Ye<a.batchSize;++Ye)for(var bt=Ye*I,St=Ye*R,yt=G;yt<Y;++yt)for(var or=(Z+yt*i-te)*B+bt,Yn=yt*T+St,kn=se;kn<fe;++kn)for(var Sa=(K+kn*o-q)*U+or,yr=kn*O+Yn,Ca=ye;Ca<Be;++Ca){var ta=Ca*D+yr;$e+=N[(be+Ca*u-re)*ee+Sa+Oe]*S[ta+Ve]}v[je+Ve]=$e}return p.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.depthwiseConv2D(r,a,i);return o&&(f=this.add(f,o)),u&&(f=l0(this,f,u,c)),f},e.prototype.depthwiseConv2D=function(t,r,a){ve([t,r],"depthwiseConv2D");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.outChannels/a.inChannels,v=Je(a.outShape,t.dtype),g=this.readSync(t.dataId),y=this.readSync(r.dataId),x=v.values,w=0;w<a.batchSize;++w)for(var _=w*t.strides[0],S=w*v.strides[0],C=0;C<a.outHeight;++C)for(var R=S+C*v.strides[1],T=C*a.strideHeight-f,O=0;O<i;++O){var D=T+O*u;if(!(D<0||D>=a.inHeight))for(var N=O*r.strides[0],k=_+D*t.strides[1],I=0;I<a.outWidth;++I)for(var B=R+I*v.strides[2],U=I*a.strideWidth-d,ee=0;ee<o;++ee){var te=U+ee*c;if(!(te<0||te>=a.inWidth))for(var re=N+ee*r.strides[1],q=k+te*a.inChannels,Z=B,G=re,Y=0;Y<a.inChannels;++Y){for(var F=g[q+Y],K=0;K<p;++K)x[Z+K]+=F*y[G+K];Z+=p,G+=p}}}return v.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,r,a){ve([t,r],"depthwiseConv2DDerInput");for(var i=Je(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],d=u[2],p=this.readSync(t.dataId),v=t.strides,g=v[0],y=v[1],x=v[2],w=this.readSync(r.dataId),_=r.strides,S=_[0],C=_[1],R=_[2],T=a.batchSize,O=a.filterHeight,D=a.filterWidth,N=a.inChannels,k=a.inHeight,I=a.inWidth,B=a.outChannels,U=a.outHeight,ee=a.outWidth,te=a.strideHeight,re=a.strideWidth,q=O-1-a.padInfo.top,Z=D-1-a.padInfo.left,G=B/N,Y=0;Y<T;++Y)for(var F=0;F<N;++F)for(var K=0;K<k;++K)for(var se=K-q,fe=Math.max(0,Math.ceil(se/te)),he=Math.min(U,(O+se)/te),be=0;be<I;++be){for(var ye=be-Z,Be=Math.max(0,Math.ceil(ye/re)),xe=Math.min(ee,(D+ye)/re),Oe=0,je=fe;je<he;++je)for(var Ve=je*te-se,$e=Be;$e<xe;++$e)for(var Ye=g*Y+y*je+x*$e,bt=S*(O-1-Ve)+C*(D-1-($e*re-ye))+R*F,St=0;St<G;++St)Oe+=p[Ye+(F*G+St)]*w[bt+St];o[c*Y+f*K+d*be+F]=Oe}return i.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){ve([t,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=Je(a.filterShape,"float32"),d=a.padInfo.left,p=a.padInfo.top,v=a.outChannels/a.inChannels,g=this.bufferSync(t),y=this.bufferSync(r),x=0;x<u;++x)for(var w=Math.max(0,Math.ceil((p-x)/i)),_=Math.min(a.outHeight,(a.inHeight+p-x)/i),S=0;S<c;++S)for(var C=Math.max(0,Math.ceil((d-S)/o)),R=Math.min(a.outWidth,(a.inWidth+d-S)/o),T=0;T<a.outChannels;++T){for(var O=Math.trunc(T/v),D=T%v,N=0,k=0;k<a.batchSize;++k)for(var I=w;I<_;++I)for(var B=x+I*i-p,U=C;U<R;++U){var ee=S+U*o-d;N+=g.get(k,B,ee,O)*y.get(k,I,U,T)}f.set(N,x,S,O,D)}return f.toTensor()},e.prototype.tile=function(t,r){return ve(t,"tile"),yA(this.bufferSync(t),r)},e.prototype.pad=function(t,r,a){ve(t,"pad");var i=r.map(function(v,g){return v[0]+t.shape[g]+v[1]}),o=r.map(function(v){return v[0]}),u=this.bufferSync(t),c=Je(i,t.dtype);a!==0&&c.values.fill(a);for(var f=0;f<t.size;f++){var d=u.indexToLoc(f),p=d.map(function(v,g){return v+o[g]});c.set.apply(c,[u.get.apply(u,d)].concat(p))}return c.toTensor()},e.prototype.transpose=function(t,r){ve(t,"transpose");for(var a=new Array(t.rank),i=0;i<a.length;i++)a[i]=t.shape[r[i]];var o=this.readSync(t.dataId),u=Je(a,t.dtype),c=this.bufferSync(t);for(i=0;i<t.size;++i){for(var f=c.indexToLoc(i),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[r[p]];var v=u.locToIndex(d);u.values[v]=o[i]}return u.toTensor()},e.prototype.gather=function(t,r,a){ve([t,r],"gather");var i=t.shape.slice(),o=this.readSync(r.dataId);i[a]=o.length;for(var u=Je(i,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var d=u.indexToLoc(f),p=d.slice();p[a]=o[d[a]];var v=c.locToIndex(p);u.values[f]=c.values[v]}return u.toTensor()},e.prototype.batchToSpaceND=function(t,r,a){ve([t],"batchToSpaceND");var i=r.reduce(function(p,v){return p*v}),o=gv(t.shape,r,i),u=yv(o.length,r.length),c=bv(t.shape,r,i),f=iA(a,r.length),d=oA(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,d)},e.prototype.spaceToBatchND=function(t,r,a){ve([t],"spaceToBatchND");var i=r.reduce(function(v,g){return v*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=gv(c.shape,r,i,!1),d=yv(f.length,r.length,!1),p=bv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},e.prototype.pool=function(t,r,a){ve(t,"pool");for(var i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(t.dataId),x=Je(r.outShape,t.dtype),w=x.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3],S=r.outShape[2]*r.outShape[3],C=r.outShape[3],R=0;R<r.batchSize;++R)for(var T=R*_,O=R*t.strides[0],D=0;D<r.inChannels;++D)for(var N=0;N<r.outHeight;++N)for(var k=N*i-p,I=Math.max(0,k),B=Math.min(r.inHeight,f+k),U=T+N*S,ee=0;ee<r.outWidth;++ee){for(var te=ee*o-v,re=Math.max(0,te),q=Math.min(r.inWidth,d+te),Z=g,G=0,Y=0,F=I;F<B;F+=u){for(var K=O+F*t.strides[1],se=re;se<q;se+=c){var fe=y[K+se*t.strides[2]+D];a==="max"&&fe>Z?Z=fe:a==="avg"&&(G+=fe,Y++)}if(isNaN(Z))break}w[U+ee*C+D]=a==="avg"?G/Y:Z}return x.toTensor()},e.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},e.prototype.maxPoolPositions=function(t,r){for(var a=Je(r.outShape,"int32"),i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=this.bufferSync(t),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var w=0;w<r.outHeight;++w){for(var _=w*i-p,S=_;S<0;)S+=u;for(var C=Math.min(r.inHeight,f+_),R=0;R<r.outWidth;++R){for(var T=R*o-v,O=T;O<0;)O+=c;for(var D=Math.min(r.inWidth,d+T),N=Number.NEGATIVE_INFINITY,k=-1,I=S;I<C;I+=u)for(var B=I-_,U=O;U<D;U+=c){var ee=U-T,te=g.get(y,I,U,x);te>N&&(N=te,k=B*d+ee)}a.set(k,y,w,R,x)}}return a.toTensor()},e.prototype.maxPoolBackprop=function(t,r,a,i){ve([r,a],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,i),u=i.strideHeight,c=i.strideWidth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,g=v-1-i.padInfo.left,y=p-1-i.padInfo.top,x=Je(r.shape,"float32"),w=this.bufferSync(o),_=this.bufferSync(t),S=0;S<i.batchSize;++S)for(var C=0;C<i.inChannels;++C)for(var R=0;R<i.inHeight;++R)for(var T=0;T<i.inWidth;++T){for(var O=R-y,D=T-g,N=0,k=0;k<p;k+=f){var I=(O+k)/u;if(!(I<0||I>=i.outHeight||Math.floor(I)!==I))for(var B=0;B<v;B+=d){var U=(D+B)/c;if(!(U<0||U>=i.outWidth||Math.floor(U)!==U)){var ee=p*v-1-w.get(S,I,U,C)===k*v+B?1:0;ee!==0&&(N+=_.get(S,I,U,C)*ee)}}}x.set(N,S,R,T,C)}return x.toTensor()},e.prototype.avgPoolBackprop=function(t,r,a){ve([t,r],"avgPoolBackprop");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterHeight,v=a.effectiveFilterWidth,g=v-1-a.padInfo.left,y=p-1-a.padInfo.top,x=Je(r.shape,"float32"),w=1/(u*c),_=this.bufferSync(t),S=0;S<a.batchSize;++S)for(var C=0;C<a.inChannels;++C)for(var R=0;R<a.inHeight;++R)for(var T=0;T<a.inWidth;++T){for(var O=R-y,D=T-g,N=0,k=0;k<p;k+=f){var I=(O+k)/i;if(!(I<0||I>=a.outHeight||Math.floor(I)!==I))for(var B=0;B<v;B+=d){var U=(D+B)/o;U<0||U>=a.outWidth||Math.floor(U)!==U||(N+=_.get(S,I,U,C))}}x.set(N*w,S,R,T,C)}return x.toTensor()},e.prototype.pool3d=function(t,r,a){ve(t,"pool3d");for(var i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(t.dataId),C=Je(r.outShape,t.dtype),R=C.values,T=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],O=r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[3]*r.outShape[4],N=r.outShape[4],k=0;k<r.batchSize;++k)for(var I=k*T,B=k*t.strides[0],U=0;U<r.inChannels;++U)for(var ee=0;ee<r.outDepth;++ee){for(var te=ee*i-y,re=te;re<0;)re+=c;for(var q=Math.min(r.inDepth,p+te),Z=I+ee*O,G=0;G<r.outHeight;++G){for(var Y=G*o-x,F=Y;F<0;)F+=f;for(var K=Math.min(r.inHeight,v+Y),se=Z+G*D,fe=0;fe<r.outWidth;++fe){for(var he=fe*u-w,be=he;be<0;)be+=d;for(var ye=Math.min(r.inWidth,g+he),Be=se+fe*N,xe=_,Oe=0,je=0,Ve=re;Ve<q;Ve+=c){for(var $e=B+Ve*t.strides[1],Ye=F;Ye<K;Ye+=f){for(var bt=$e+Ye*t.strides[2],St=be;St<ye;St+=d){var yt=S[bt+St*t.strides[3]+U];if(a==="max"&&yt>xe?xe=yt:a==="avg"&&(Oe+=yt,je++),isNaN(xe))break}if(isNaN(xe))break}if(isNaN(xe))break}R[Be+U]=a==="avg"?Oe/je:xe}}}return C.toTensor()},e.prototype.avgPool3d=function(t,r){return ve(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,r,a){ve([t,r],"avgPool3dBackprop");for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=a.dilationDepth,v=a.dilationHeight,g=a.dilationWidth,y=a.effectiveFilterDepth,x=a.effectiveFilterHeight,w=a.effectiveFilterWidth,_=y-1-a.padInfo.front,S=w-1-a.padInfo.left,C=x-1-a.padInfo.top,R=Je(r.shape,"float32"),T=1/(c*f*d),O=this.bufferSync(t),D=0;D<a.batchSize;++D)for(var N=0;N<a.inChannels;++N)for(var k=0;k<a.inDepth;++k)for(var I=0;I<a.inHeight;++I)for(var B=0;B<a.inWidth;++B){for(var U=k-_,ee=I-C,te=B-S,re=0,q=0;q<y;q+=p){var Z=(U+q)/i;if(!(Z<0||Z>=a.outDepth||Math.floor(Z)!==Z))for(var G=0;G<x;G+=v){var Y=(ee+G)/o;if(!(Y<0||Y>=a.outHeight||Math.floor(Y)!==Y))for(var F=0;F<w;F+=g){var K=(te+F)/u;K<0||K>=a.outWidth||Math.floor(K)!==K||(re+=O.get(D,Z,Y,K,N))}}}R.set(re*T,D,k,I,B,N)}return R.toTensor()},e.prototype.maxPool3d=function(t,r){return ve(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,r){for(var a=Je(r.outShape,"int32"),i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=this.bufferSync(t),S=0;S<r.batchSize;++S)for(var C=0;C<r.inChannels;++C)for(var R=0;R<r.outDepth;++R){for(var T=R*i-y,O=T;O<0;)O+=c;for(var D=Math.min(r.inDepth,p+T),N=0;N<r.outHeight;++N){for(var k=N*o-x,I=k;I<0;)I+=f;for(var B=Math.min(r.inHeight,v+k),U=0;U<r.outWidth;++U){for(var ee=U*u-w,te=ee;te<0;)te+=d;for(var re=Math.min(r.inWidth,g+ee),q=Number.NEGATIVE_INFINITY,Z=-1,G=O;G<D;G+=c)for(var Y=G-T,F=I;F<B;F+=f)for(var K=F-k,se=te;se<re;se+=d){var fe=se-ee,he=_.get(S,G,F,se,C);he>=q&&(q=he,Z=Y*v*g+K*v+fe)}a.set(Z,S,R,N,U,C)}}}return a.toTensor()},e.prototype.maxPool3dBackprop=function(t,r,a,i){ve([r,a],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,i),u=i.strideDepth,c=i.strideHeight,f=i.strideWidth,d=i.dilationDepth,p=i.dilationHeight,v=i.dilationWidth,g=i.effectiveFilterDepth,y=i.effectiveFilterHeight,x=i.effectiveFilterWidth,w=g-1-i.padInfo.front,_=x-1-i.padInfo.left,S=y-1-i.padInfo.top,C=Je(r.shape,"float32"),R=this.bufferSync(o),T=this.bufferSync(t),O=0;O<i.batchSize;++O)for(var D=0;D<i.inChannels;++D)for(var N=0;N<i.inDepth;++N)for(var k=0;k<i.inHeight;++k)for(var I=0;I<i.inWidth;++I){for(var B=N-w,U=k-S,ee=I-_,te=0,re=0;re<g;re+=d){var q=(B+re)/u;if(!(q<0||q>=i.outDepth||Math.floor(q)!==q))for(var Z=0;Z<y;Z+=p){var G=(U+Z)/c;if(!(G<0||G>=i.outHeight||Math.floor(G)!==G))for(var Y=0;Y<x;Y+=v){var F=(ee+Y)/f;if(!(F<0||F>=i.outWidth||Math.floor(F)!==F)){var K=g*y*x-1-R.get(O,q,G,F,D)===re*y*x+Z*x+Y?1:0;K!==0&&(te+=T.get(O,q,G,F,D)*K)}}}}C.set(te,O,N,k,I,D)}return C.toTensor()},e.prototype.cast=function(t,r){return pA(t,r,this)},e.prototype.reshape=function(t,r){return Ab(t,r)},e.prototype.avgPool=function(t,r){return ve(t,"avgPool"),this.pool(t,r,"avg").toFloat()},e.prototype.resizeBilinear=function(t,r,a,i){ve(t,"resizeBilinear");for(var o=t.shape,u=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(t.dataId),v=new Float32Array(Ie([u,r,a,d])),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],x=0,w=g[0]/y[0],_=g[1]/y[1],S=0;S<u;S++)for(var C=0;C<r;C++)for(var R=w*C,T=Math.floor(R),O=R-T,D=Math.min(c-1,Math.ceil(R)),N=S*t.strides[0]+T*t.strides[1],k=S*t.strides[0]+D*t.strides[1],I=0;I<a;I++)for(var B=_*I,U=Math.floor(B),ee=B-U,te=Math.min(f-1,Math.ceil(B)),re=N+U*t.strides[2],q=k+U*t.strides[2],Z=N+te*t.strides[2],G=k+te*t.strides[2],Y=0;Y<d;Y++){var F=p[re+Y],K=p[q+Y],se=F+(p[Z+Y]-F)*ee,fe=se+(K+(p[G+Y]-K)*ee-se)*O;v[x++]=fe}return zn(v,[u,r,a,d])},e.prototype.resizeBilinearBackprop=function(t,r,a){ve([t,r],"resizeBilinearBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],d=t.shape,p=d[1],v=d[2],g=new Float32Array(o*u*c*f),y=[a&&p>1?u-1:u,a&&v>1?c-1:c],x=[a&&p>1?p-1:p,a&&v>1?v-1:v],w=y[0]/x[0],_=y[1]/x[1],S=this.readSync(t.dataId),C=0,R=0;R<o;R++)for(var T=R*r.strides[0],O=0;O<p;O++)for(var D=O*w,N=Math.floor(D),k=Math.min(Math.ceil(D),u-1),I=T+N*r.strides[1],B=T+k*r.strides[1],U=D-N,ee=1-U,te=0;te<v;te++)for(var re=te*_,q=Math.floor(re),Z=Math.min(Math.ceil(re),c-1),G=re-q,Y=1-G,F=I+q*r.strides[2],K=I+Z*r.strides[2],se=B+q*r.strides[2],fe=B+Z*r.strides[2],he=ee*Y,be=ee*G,ye=U*Y,Be=U*G,xe=0;xe<f;xe++){var Oe=S[C++];g[F+xe]+=Oe*he,g[K+xe]+=Oe*be,g[se+xe]+=Oe*ye,g[fe+xe]+=Oe*Be}return hr(g,[o,c,u,f],r.dtype)},e.prototype.resizeNearestNeighbor=function(t,r,a,i){ve(t,"resizeNearestNeighbor");for(var o=t.shape,u=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(t.dataId),v=new Float32Array(u*r*a*d),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],x=g[0]/y[0],w=g[1]/y[1],_=0,S=0;S<u;S++)for(var C=S*t.strides[0],R=0;R<r;R++)for(var T=x*R,O=C+Math.min(c-1,i?Math.round(T):Math.floor(T))*t.strides[1],D=0;D<a;D++)for(var N=w*D,k=O+Math.min(f-1,i?Math.round(N):Math.floor(N))*t.strides[2],I=0;I<d;I++){var B=p[k+I];v[_++]=B}return zn(v,[u,r,a,d],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){ve([t,r],"resizeNearestNeighborBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],d=t.shape,p=d[1],v=d[2],g=new Float32Array(o*u*c*f),y=this.readSync(t.dataId),x=[a&&p>1?u-1:u,a&&v>1?c-1:c],w=[a&&p>1?p-1:p,a&&v>1?v-1:v],_=x[0]/w[0],S=x[1]/w[1],C=1/_,R=1/S,T=2*Math.ceil(C)+2,O=2*Math.ceil(R)+2,D=0;D<o;D++)for(var N=D*r.strides[0],k=0;k<u;k++)for(var I=N+k*r.strides[1],B=Math.floor(k*C),U=Math.floor(B-T/2),ee=0;ee<c;ee++)for(var te=I+ee*r.strides[2],re=Math.floor(ee*R),q=Math.floor(re-O/2),Z=0;Z<f;Z++){for(var G=0,Y=0;Y<T;Y++){var F=Y+U;if(!(F<0||F>=p)){var K=N+F*t.strides[1],se=F*_;if(k===Math.min(u-1,a?Math.round(se):Math.floor(se)))for(var fe=0;fe<O;fe++){var he=fe+q;if(!(he<0||he>=v)){var be=K+he*t.strides[2],ye=he*S;ee===Math.min(c-1,a?Math.round(ye):Math.floor(ye))&&(G+=y[be+Z])}}}}g[te+Z]=G}return hr(g,r.shape,r.dtype)},e.prototype.batchNormalization=function(t,r,a,i,o,u){ve([t,r,a,o,u],"batchNorm");for(var c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=this.readSync(a.dataId),p=o?this.readSync(o.dataId):new Float32Array([1]),v=u?this.readSync(u.dataId):new Float32Array([0]),g=new Float32Array(c.length),y=v.length,x=p.length,w=d.length,_=f.length,S=0,C=0,R=0,T=0,O=0;O<c.length;++O)g[O]=v[S++]+(c[O]-f[C++])*p[R++]/Math.sqrt(d[T++]+i),S>=y&&(S=0),C>=_&&(C=0),R>=x&&(R=0),T>=w&&(T=0);return hr(g,t.shape)},e.prototype.localResponseNormalization4D=function(t,r,a,i,o){ve(t,"localResponseNormalization4D");var u=t.shape[3],c=u-1,f=this.readSync(t.dataId),d=t.size,p=new Float32Array(d);function v(w){for(var _=w%u,S=w-_+Math.max(0,_-r),C=w-_+Math.min(_+r,c),R=0;S<=C;S++){var T=f[S];R+=T*T}return R}for(var g=0;g<d;g++){var y=v(g),x=f[g]*Math.pow(a+i*y,-o);p[g]=x}return hr(p,t.shape)},e.prototype.LRNGrad=function(t,r,a,i,o,u,c){ve(t,"LRNGrad");for(var f=t.shape[3],d=this.readSync(t.dataId),p=this.readSync(r.dataId),v=this.readSync(a.dataId),g=new Float32Array(t.size),y=t.size,x=0;x<y;x++){for(var w=x%f,_=x-w+Math.max(0,w-i),S=x-w+Math.min(f,w+i+1),C=0,R=_;R<S;R++)C+=Math.pow(p[R],2);for(C=u*C+o,R=_;R<S;R++){var T=-2*u*c*p[R]*v[x]/C;x===R&&(T+=Math.pow(C,-c)),T*=d[x],g[R]+=T}}return hr(g,t.shape)},e.prototype.multinomial=function(t,r,a,i){ve(t,"multinomial");for(var o=r?t:ji(t),u=o.shape[0],c=o.shape[1],f=Bt([u,a],"int32"),d=this.readSync(f.dataId),p=this.readSync(o.dataId),v=0;v<u;++v){var g=v*c,y=new Float32Array(c-1);y[0]=p[g];for(var x=1;x<y.length;++x)y[x]=y[x-1]+p[g+x];for(var w=Qv(i.toString()),_=v*a,S=0;S<a;++S){var C=w();d[_+S]=y.length;for(var R=0;R<y.length;R++)if(C<y[R]){d[_+S]=R;break}}}return f},e.prototype.oneHot=function(t,r,a,i){ve(t,"oneHot");var o=new Float32Array(t.size*r);o.fill(i);for(var u=this.readSync(t.dataId),c=0;c<t.size;++c)u[c]>=0&&u[c]<r&&(o[c*r+u[c]]=a);return Uo(o,[t.size,r],"int32")},e.prototype.nonMaxSuppression=function(t,r,a,i,o){return ve(t,"nonMaxSuppression"),Px(this.readSync(t.dataId),this.readSync(r.dataId),a,i,o)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,r){for(var a=t.shape[0],i=t.shape[1],o=Je(t.shape,"float32"),u=Je(t.shape,"float32"),c=Kr(t).as2D(a,i),f=ja(t).as2D(a,i),d=0;d<a;d++)for(var p=c.slice([d,0],[1,i]),v=f.slice([d,0],[1,i]),g=Pn(p,v),y=this.readSync(this.fftImpl(g,r).dataId),x=0;x<i;x++){var w=cC(y,x);o.values[d*i+x]=w.real,u.values[d*i+x]=w.imag}return Pn(o.toTensor(),u.toTensor()).as2D(a,i)},e.prototype.fftImpl=function(t,r){var a=t.as1D(),i=a.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(a,i,r).as2D(t.shape[0],t.shape[1]);return r&&(o=Pn(Kr(o).div(we(i)),ja(o).div(we(i)))),o}var u=this.readSync(t.dataId),c=function(f){for(var d=new Float32Array(f.length/2),p=new Float32Array(f.length/2),v=0;v<f.length;v+=2)d[v/2]=f[v],p[v/2]=f[v+1];return{real:d,imag:p}}(this.fourierTransformByMatmul(u,i,r));return Pn(c.real,c.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,r,a){if(r===1)return t;var i=this.readSync(t.dataId),o=r/2,u=function(_){for(var S=Math.ceil(_.length/4),C=new Float32Array(S),R=new Float32Array(S),T=0;T<_.length;T+=4)C[Math.floor(T/4)]=_[T],R[Math.floor(T/4)]=_[T+1];return{real:C,imag:R}}(i),c=Pn(u.real,u.imag).as1D(),f=function(_){for(var S=Math.floor(_.length/4),C=new Float32Array(S),R=new Float32Array(S),T=2;T<_.length;T+=4)C[Math.floor(T/4)]=_[T],R[Math.floor(T/4)]=_[T+1];return{real:C,imag:R}}(i),d=Pn(f.real,f.imag).as1D();c=this.fftRadix2(c,o,a),d=this.fftRadix2(d,o,a);var p=function(_,S){for(var C=new Float32Array(_/2),R=new Float32Array(_/2),T=0;T<Math.ceil(_/2);T++){var O=(S?2:-2)*Math.PI*(T/_);C[T]=Math.cos(O),R[T]=Math.sin(O)}return{real:C,imag:R}}(r,a),v=Pn(p.real,p.imag).mul(d),g=c.add(v),y=c.sub(v),x=Kr(g).concat(Kr(y)),w=ja(g).concat(ja(y));return Pn(x,w).as1D()},e.prototype.fourierTransformByMatmul=function(t,r,a){for(var i=new Float32Array(2*r),o=0;o<r;o++){for(var u=0,c=0,f=0;f<r;f++){var d=qz(o*f,r,a),p=cC(t,f);u+=p.real*d.real-p.imag*d.imag,c+=p.real*d.imag+p.imag*d.real}a&&(u/=r,c/=r),jz(i,u,c,o)}return i},e.prototype.depthToSpace=function(t,r,a){P(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=t.shape[0],o=t.shape[1],u=t.shape[2],c=t.shape[3],f=o*r,d=u*r,p=c/(r*r),v=this.readSync(t.dataId),g=new Float32Array(i*f*d*p),y=0,x=0;x<i;++x)for(var w=0;w<f;++w)for(var _=Math.floor(w/r),S=w%r,C=0;C<d;++C)for(var R=Math.floor(C/r),T=(S*r+C%r)*p,O=0;O<p;++O){var D=O+T+c*(R+u*(_+o*x));g[y++]=v[D]}return hr(g,[i,f,d,p])},e.prototype.broadcastedBinaryOp=function(t,r,a,i){var o=ct(t.shape,r.shape),u=Je(o,a),c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=Lo(t.shape,o),p=Lo(r.shape,o),v=u.values;if(d.length+p.length===0)for(var g=0;g<v.length;++g)v[g]=i(c[g%c.length],f[g%f.length]);else{var y=this.bufferSync(t),x=this.bufferSync(r),w=function(_){var S=u.indexToLoc(_),C=S.slice(-t.rank);d.forEach(function(D){return C[D]=0});var R=y.locToIndex(C),T=S.slice(-r.rank);p.forEach(function(D){return T[D]=0});var O=x.locToIndex(T);v[_]=i(c[R],f[O])};for(g=0;g<v.length;++g)w(g)}return u.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,r,a){var i=ct(t.shape,r.shape),o=Je(i,"float32"),u=Je(i,"float32"),c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=Lo(t.shape,i),p=Lo(r.shape,i),v=o.values,g=u.values;if(d.length+p.length===0)for(var y=0;y<v.length;y++){var x=y%c.length,w=y%f.length,_=a(c[2*x],c[2*x+1],f[2*w],f[2*w+1]);v[y]=_.real,g[y]=_.imag}else{var S=this.bufferSync(this.data.get(t.dataId).complexTensors.real),C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),R=function(T){var O=o.indexToLoc(T),D=O.slice(-t.rank);d.forEach(function(U){return D[U]=0});var N=S.locToIndex(D),k=O.slice(-r.rank);p.forEach(function(U){return k[U]=0});var I=C.locToIndex(k),B=a(c[2*N],c[2*N+1],f[2*I],f[2*I+1]);v[T]=B.real,g[T]=B.imag};for(y=0;y<v.length;y++)R(y)}return this.complex(o.toTensor(),u.toTensor())},e.prototype.split=function(t,r,a){return gA(t,r,a)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,r,a,i,o,u){for(var c=t.shape,f=c[0],d=c[1],p=c[2],v=c[3],g=r.shape[0],y=i[0],x=i[1],w=Je([g,y,x,v],"float32"),_=this.readSync(r.dataId),S=this.readSync(a.dataId),C=this.readSync(t.dataId),R=t.strides,T=w.strides,O=0;O<g;O++){var D=4*O,N=_[D],k=_[D+1],I=_[D+2],B=_[D+3],U=S[O];if(!(U>=f))for(var ee=y>1?(I-N)*(d-1)/(y-1):0,te=x>1?(B-k)*(p-1)/(x-1):0,re=0;re<y;re++){var q=y>1?N*(d-1)+re*ee:.5*(N+I)*(d-1);if(q<0||q>d-1)for(var Z=0;Z<x;Z++)for(var G=0;G<v;G++){var Y=G+Z*T[2]+re*T[1]+O*T[0];w.values[Y]=u}else if(o==="bilinear"){var F=Math.floor(q),K=Math.ceil(q),se=q-F;for(Z=0;Z<x;Z++)if((Ve=x>1?k*(p-1)+Z*te:.5*(k+B)*(p-1))<0||Ve>p-1)for(G=0;G<v;G++)Y=G+Z*T[2]+re*T[1]+O*T[0],w.values[Y]=u;else{var fe=Math.floor(Ve),he=Math.ceil(Ve),be=Ve-fe;for(G=0;G<v;G++){var ye=C[Y=G+fe*R[2]+F*R[1]+U*R[0]],Be=C[Y=G+he*R[2]+F*R[1]+U*R[0]],xe=C[Y=G+fe*R[2]+K*R[1]+U*R[0]],Oe=ye+(Be-ye)*be,je=xe+(C[Y=G+he*R[2]+K*R[1]+U*R[0]]-xe)*be;Y=G+Z*T[2]+re*T[1]+O*T[0],w.values[Y]=Oe+(je-Oe)*se}}}else for(Z=0;Z<x;++Z){var Ve;if((Ve=x>1?k*(p-1)+Z*te:.5*(k+B)*(p-1))<0||Ve>p-1)for(G=0;G<v;G++)Y=G+Z*T[2]+re*T[1]+O*T[0],w.values[Y]=u;else{var $e=Math.round(Ve),Ye=Math.round(q);for(G=0;G<v;G++){var bt=G+$e*R[2]+Ye*R[1]+U*R[0],St=G+Z*T[2]+re*T[1]+O*T[0];w.values[St]=C[bt]}}}}}return w.toTensor()},e.prototype.sparseToDense=function(t,r,a,i){var o=xv(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.sliceSize,d=o.strides,p=o.outputSize;return this.scatter(t,r,a,p,f,c,u,d,i,!1)},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=sA(t,r),u=o[0],c=o[1],f=o[2],d=o[3];if(c===0)return zn([],u,t.dtype);for(var p=new sh([c,f],t.dtype),v=this.readSync(r.dataId),g=this.readSync(t.dataId),y=0;y<c;y++){for(var x=[],w=0,_=0;_<i;_++){var S=v[y*i+_];w+=S*d[_],x.push(S)}if(w<0||w>=t.size/f)throw new Error("Invalid indices: "+x+" does not index into "+t.shape);for(var C=0;C<f;C++)p.values[y*f+C]=g[w*f+C]}return p.toTensor().reshape(u)},e.prototype.scatterND=function(t,r,a){var i=xv(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=we(0);return this.scatter(t,r,a,d,c,u,o,f,p,!0)},e.prototype.fill=function(t,r,a){var i=cv(a=a||kh(r),Ie(t));return i.fill(r),W.makeTensor(i,t,a,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var r=cv(t.dtype,Ie(t.shape));return this.makeOutput(r,t.shape,t.dtype)},e.prototype.linspace=function(t,r,a){return vA(t,r,a)},e.prototype.scatter=function(t,r,a,i,o,u,c,f,d,p){var v=[i/o,o],g=this.readSync(t.dataId),y=this.readSync(r.dataId);if(i===0)return zn([],a,r.dtype);var x=new sh(v,r.dtype);x.values.fill(this.readSync(d.dataId)[0]);for(var w=0;w<u;w++){for(var _=[],S=0,C=0;C<c;C++){var R=g[w*c+C];_.push(R),S+=R*f[C]}if(S<0||S>=i/o)throw new Error("Invalid indices: "+_+" does not index into "+a);for(var T=0;T<o;T++)p?x.values[S*o+T]+=y[w*o+T]:x.values[S*o+T]=r.rank===0?y[0]:y[w*o+T]}return x.toTensor().reshape(a)},e}(hA);W.registerBackend("cpu",function(){return new l6},1);for(var c0=0,NC=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p=u.softNmsSigma,v=t;ve(i,"NonMaxSuppressionWithScore");var g=Bx(v.data.get(i.dataId).values,v.data.get(o.dataId).values,c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t;ve(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),u=0;u<i.length;++u){var c=i[u];o[u]=c*c}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:ch,backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,o=t;ve([a,i],ch);var u=o.data.get(a.dataId).values,c=o.data.get(i.dataId).values,f=function(v,g,y,x,w,_){var S=ct(v,g),C=S.length,R=Qa(S),T=oh(w,Ie(S)),O=v.length,D=g.length,N=Qa(v),k=Qa(g),I=Lo(v,S),B=Lo(g,S);if(I.length+B.length===0)for(var U=0;U<T.length;++U)T[U]=_(y[U%y.length],x[U%x.length]);else{var ee=function(te){var re=bB(te,C,R),q=re.slice(-O);I.forEach(function(F){return q[F]=0});var Z=tC(q,O,N),G=re.slice(-D);B.forEach(function(F){return G[F]=0});var Y=tC(G,D,k);T[te]=_(y[Z],x[Y])};for(U=0;U<T.length;++U)ee(U)}return[T,S]}(a.shape,i.shape,u,c,a.dtype,function(v,g){var y=v-g;return y*y}),d=f[0],p=f[1];return{dataId:o.write(d,p,a.dtype),shape:p,dtype:a.dtype}}}];c0<NC.length;c0++)UO(NC[c0]);var Zu,c6=function(n){this.variableNames=["A"];var e=Gn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},f6=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Gn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var f0=0,IC=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=c[0],d=c[1],p=[d,f],v=[d,f,i];(u||o)&&(Zu==null&&(Zu=document.createElement("canvas").getContext("2d")),Zu.canvas.width=f,Zu.canvas.height=d,Zu.drawImage(a,0,0,f,d),a=Zu.canvas);var g=t.makeTensorInfo(p,"int32");t.texData.get(g.dataId).usage=Or.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(g.dataId),a);var y=ue().getBool("WEBGL_PACK")?new f6(v):new c6(v),x=t.runWebGLProgram(y,[g],"int32");return t.disposeData(g.dataId),x}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs;pv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=e,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p=u.softNmsSigma,v=t,g=Bx(v.readSync(i.dataId),v.readSync(o.dataId),c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t,i=new nt(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:ch,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,o=t,u=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oi("return (a - b) * (a - b);",a.shape,i.shape):new Kt("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(u,[a,i])}}];f0<IC.length;f0++)UO(IC[f0]);for(var h0=0,MC=[{kernelName:"Square",gradFunc:function(n,e){var t=e[0];return{x:function(){return n.mul(t.toFloat().mul(2))}}}},{kernelName:ch,gradFunc:function(n,e){var t=e[0],r=e[1],a=we(2);return{a:function(){return $n(n,$n(a,gn(t,r)))},b:function(){return $n(n,$n(a,gn(r,t)))}}}}];h0<MC.length;h0++)uB(MC[h0]);var h6=function(){function n(){}return n.prototype.fetch=function(e,t){return fetch(e,t)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},n}();ue().get("IS_BROWSER")&&ue().setPlatform("browser",new h6);var d0,d6=function(){return require("node-fetch")},p6=function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(e,t){return ue().global.fetch!=null?ue().global.fetch(e,t):(d0==null&&(d0=d6()),d0(e,t))},n.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},n}();ue().get("IS_NODE")&&ue().setPlatform("node",new p6);var Nb={float32:4,int32:4,uint16:2,uint8:1,bool:1},Tv=4;function lk(n,e){for(var t={},r=0,a=function(u){var c=u.name,f=u.dtype,d=u.shape,p=Ie(d),v=void 0;if("quantization"in u){var g=u.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+u.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=Nb[g.dtype],x=n.slice(r,r+p*y),w=g.dtype==="uint8"?new Uint8Array(x):new Uint16Array(x);if(f==="float32")v=Float32Array.from(w,function(O){return O*g.scale+g.min});else{if(f!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=Int32Array.from(w,function(O){return Math.round(O*g.scale+g.min)})}r+=p*y}else if(f==="string"){var _=Ie(u.shape);v=[];for(var S=0;S<_;S++){var C=new Uint32Array(n.slice(r,r+Tv))[0];r+=Tv;var R=new Uint8Array(n.slice(r,r+C));v.push(R),r+=C}}else{var T=Nb[f];if(x=n.slice(r,r+p*T),f==="float32")v=new Float32Array(x);else if(f==="int32")v=new Int32Array(x);else{if(f!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=new Uint8Array(x)}r+=p*T}t[c]=zn(v,d,f)},i=0,o=e;i<o.length;i++)a(o[i]);return t}function v6(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var e=0,t=[];n.forEach(function(i){if(e+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(e),a=0;return t.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var Ib=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function FC(n){return Ib?Buffer.byteLength(n):new Blob([n]).size}function r1(n){var e=0;n.forEach(function(a){e+=a.byteLength});var t=new Uint8Array(e),r=0;return n.forEach(function(a){t.set(new Uint8Array(a),r),r+=a.byteLength}),t.buffer}function LC(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var e=n.split("/");return e[e.length-1]}function Ph(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:FC(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:FC(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var Ar=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(e){n.getInstance().saveRouters.push(e)},n.registerLoadRouter=function(e){n.getInstance().loadRouters.push(e)},n.getSaveHandlers=function(e){return n.getHandlers(e,"save")},n.getLoadHandlers=function(e,t){return n.getHandlers(e,"load",t)},n.getHandlers=function(e,t,r){var a=[];return(t==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(i){var o=i(e,r);o!==null&&a.push(o)}),a},n}(),xl="://",Vo=function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(e,t){P(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(xl)&&(e=e.slice(0,e.indexOf(xl))),P(e.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();P(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=t},n.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function Mp(n){if(n.indexOf(xl)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Vo.getSchemes().join(","));return{scheme:n.split(xl)[0],path:n.split(xl)[1]}}function PC(n,e,t){return t===void 0&&(t=!1),ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p;return De(this,function(v){switch(v.label){case 0:return P(n!==e,function(){return"Old path and new path are the same: '"+n+"'"}),P((r=Ar.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),P(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),a=r[0],P((i=Ar.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),P(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=i[0],u=Mp(n).scheme,c=Mp(n).path,f=u===Mp(n).scheme,[4,a.load()];case 1:return d=v.sent(),t&&f?[4,Vo.getManager(u).removeModel(c)]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,o.save(d)];case 4:return p=v.sent(),!t||f?[3,6]:[4,Vo.getManager(u).removeModel(c)];case 5:v.sent(),v.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var Ms="models_store",Po="model_info_store";function ck(){if(!ue().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Mb(n){var e=n.result;e.createObjectStore(Ms,{keyPath:"modelPath"}),e.createObjectStore(Po,{keyPath:"modelPath"})}var wl=function(){function n(e){if(this.indexedDB=ck(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){return De(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},n.prototype.load=function(){return ke(this,void 0,void 0,function(){return De(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(e,t){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Mb(o)},o.onsuccess=function(){var u=o.result;if(t==null){var c=u.transaction(Ms,"readonly"),f=c.objectStore(Ms).get(r.modelPath);f.onsuccess=function(){if(f.result==null)return u.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(f.result.modelArtifacts)},f.onerror=function(x){return u.close(),i(f.error)},c.oncomplete=function(){return u.close()}}else{var d,p=Ph(t),v=u.transaction(Po,"readwrite"),g=v.objectStore(Po),y=g.put({modelPath:r.modelPath,modelArtifactsInfo:p});y.onsuccess=function(){var x=(d=u.transaction(Ms,"readwrite")).objectStore(Ms).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:p});x.onsuccess=function(){return a({modelArtifactsInfo:p})},x.onerror=function(w){var _=(g=v.objectStore(Po)).delete(r.modelPath);_.onsuccess=function(){return u.close(),i(x.error)},_.onerror=function(S){return u.close(),i(x.error)}}},y.onerror=function(x){return u.close(),i(y.error)},v.oncomplete=function(){d==null?u.close():d.oncomplete=function(){return u.close()}}}},o.onerror=function(u){return i(o.error)}})},n.URL_SCHEME="indexeddb://",n}(),BC=function(n){return ue().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(wl.URL_SCHEME)?(e=n.slice(wl.URL_SCHEME.length),new wl(e)):null;var e};Ar.registerSaveRouter(BC),Ar.registerLoadRouter(BC);var m6=function(){function n(){this.indexedDB=ck()}return n.prototype.listModels=function(){return ke(this,void 0,void 0,function(){var e=this;return De(this,function(t){return[2,new Promise(function(r,a){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Mb(i)},i.onsuccess=function(){var o=i.result,u=o.transaction(Po,"readonly"),c=u.objectStore(Po).getAll();c.onsuccess=function(){for(var f={},d=0,p=c.result;d<p.length;d++){var v=p[d];f[v.modelPath]=v.modelArtifactsInfo}r(f)},c.onerror=function(f){return o.close(),a(c.error)},u.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}})]})})},n.prototype.removeModel=function(e){return ke(this,void 0,void 0,function(){var t=this;return De(this,function(r){var a;return e=(a=e).startsWith(wl.URL_SCHEME)?a.slice(wl.URL_SCHEME.length):a,[2,new Promise(function(i,o){var u=t.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return Mb(u)},u.onsuccess=function(){var c,f=u.result,d=f.transaction(Po,"readwrite"),p=d.objectStore(Po),v=p.get(e);v.onsuccess=function(){if(v.result==null)return f.close(),o(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var g=p.delete(e),y=function(){var x=(c=f.transaction(Ms,"readwrite")).objectStore(Ms).delete(e);x.onsuccess=function(){return i(v.result.modelArtifactsInfo)},x.onerror=function(w){return o(v.error)}};g.onsuccess=y,g.onerror=function(x){return y(),f.close(),o(v.error)}},v.onerror=function(g){return f.close(),o(v.error)},d.oncomplete=function(){c==null?f.close():c.oncomplete=function(){return f.close()}}},u.onerror=function(c){return o(u.error)}})]})})},n}();if(ue().getBool("IS_BROWSER"))try{Vo.registerManager(wl.URL_SCHEME,new m6)}catch{}var Ii="/",ol="tensorflowjs_models",fk="info",g6="model_topology",y6="weight_specs",b6="weight_data",x6="model_metadata";function hk(n){return{info:[ol,n,fk].join(Ii),topology:[ol,n,g6].join(Ii),weightSpecs:[ol,n,y6].join(Ii),weightData:[ol,n,b6].join(Ii),modelMetadata:[ol,n,x6].join(Ii)}}function w6(n){var e=n.split(Ii);if(e.length<3)throw new Error("Invalid key format: "+n);return e.slice(1,e.length-1).join(Ii)}var _l=function(){function n(e){if(!ue().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=hk(this.modelPath)}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){var t,r,a;return De(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Ph(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(Ib)return Buffer.from(o).toString("base64");for(var u=new Uint8Array(o),c="",f=0,d=u.length;f<d;f++)c+=String.fromCharCode(u[f]);return btoa(c)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return ke(this,void 0,void 0,function(){var e,t,r,a,i,o,u;return De(this,function(c){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),(u=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(f){if(Ib){var d=Buffer.from(f,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var p=atob(f),v=new Uint8Array(p.length),g=0;g<p.length;++g)v.set([p.charCodeAt(g)],g);return v.buffer}(u),[2,t]})})},n.URL_SCHEME="localstorage://",n}(),zC=function(n){return ue().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(_l.URL_SCHEME)?(e=n.slice(_l.URL_SCHEME.length),new _l(e)):null;var e};Ar.registerSaveRouter(zC),Ar.registerLoadRouter(zC);var _6=function(){function n(){P(ue().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),P(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return ke(this,void 0,void 0,function(){var e,t,r,a,i,o;return De(this,function(u){for(e={},t=ol+Ii,r=Ii+fk,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(t)&&i.endsWith(r)&&(o=w6(i),e[o]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},n.prototype.removeModel=function(e){return ke(this,void 0,void 0,function(){var t,r;return De(this,function(a){var i;if(e=(i=e).startsWith(_l.URL_SCHEME)?i.slice(_l.URL_SCHEME.length):i,t=hk(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},n}();if(ue().getBool("IS_BROWSER"))try{Vo.registerManager(_l.URL_SCHEME,new _6)}catch{}var E6="model",S6=".json",C6=".weights.bin";function UC(n){return new Promise(function(e){return setTimeout(e)}).then(n)}var p0=function(){function n(e){if(!ue().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),e!=null&&e.length!==0||(e=E6),this.modelTopologyFileName=e+S6,this.weightDataFileName=e+C6}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u;return De(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,UC(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),e.weightData==null?[3,4]:((u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,u.href=t,[4,UC(function(){return u.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Ph(e)}]}})})},n.URL_SCHEME="downloads://",n}(),R6=function(){function n(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return n.prototype.load=function(){return ke(this,void 0,void 0,function(){var e,t,r=this;return De(this,function(a){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(i,o){var u=new FileReader;u.onload=function(c){var f=JSON.parse(c.target.result),d=f.modelTopology;if(d!=null){t.length===0&&i({modelTopology:d});var p=f.weightsManifest;if(p!=null){var v;try{v=r.checkManifestAndWeightFiles(p,t)}catch(w){return void o(w)}var g=[],y=[],x=[];p.forEach(function(w){w.paths.forEach(function(_){y.push(_),x.push(null)}),g.push.apply(g,w.weights)}),p.forEach(function(w){w.paths.forEach(function(_){var S=new FileReader;S.onload=function(C){var R=C.target.result,T=y.indexOf(_);x[T]=R,x.indexOf(null)===-1&&i({modelTopology:d,weightSpecs:g,weightData:r1(x),format:f.format,generatedBy:f.generatedBy,convertedBy:f.convertedBy,userDefinedMetadata:f.userDefinedMetadata})},S.onerror=function(C){return o("Failed to weights data from file of path '"+_+"'.")},S.readAsArrayBuffer(v[_])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},u.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},u.readAsText(e)})]})})},n.prototype.checkManifestAndWeightFiles=function(e,t){for(var r=[],a=t.map(function(c){return LC(c.name)}),i={},o=0,u=e;o<u.length;o++)u[o].paths.forEach(function(c){var f=LC(c);if(r.indexOf(f)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+f+"'");if(r.push(f),a.indexOf(f)===-1)throw new Error("Weight file with basename '"+f+"' is not provided.");i[c]=t[a.indexOf(f)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return i},n}();function VC(n,e,t,r){(function(i){P(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(n),function(i,o){P(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),P(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),P(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(t=t??0,r=r??1);var a=0;return Promise.all(n.map(function(i){return i.then(function(o){var u=t+ ++a/n.length*(r-t);return e(u),o}),i}))}function dk(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d;return De(this,function(p){switch(p.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?ue().platform.fetch:e.fetchFunc,r=n.map(function(v){return t(v,e.requestInit,{isBinary:!0})}),a=0,i=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=p.sent(),[3,4];case 2:return[4,VC(r,e.onProgress,a,i)];case 3:o=p.sent(),p.label=4;case 4:return u=o.map(function(v){return v.arrayBuffer()}),c=.5,f=1,e.onProgress!=null?[3,6]:[4,Promise.all(u)];case 5:return d=p.sent(),[3,8];case 6:return[4,VC(u,e.onProgress,c,f)];case 7:d=p.sent(),p.label=8;case 8:return[2,d]}})})}function jC(n){var e=this;return function(t,r,a){return r===void 0&&(r=""),ke(e,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y;return De(this,function(x){switch(x.label){case 0:if(i=t.map(function(){return!1}),o={},u=a!=null?a.map(function(){return!1}):[],c=[],t.forEach(function(w,_){var S=0;w.weights.forEach(function(C){var R="quantization"in C?C.quantization.dtype:C.dtype,T=Nb[R]*Ie(C.shape),O=function(){i[_]=!0,o[_]==null&&(o[_]=[]),o[_].push({manifestEntry:C,groupOffset:S,sizeBytes:T})};a!=null?a.forEach(function(D,N){D===C.name&&(O(),u[N]=!0)}):O(),c.push(C.name),S+=T})}),!u.every(function(w){return w}))throw f=a.filter(function(w,_){return!u[_]}),new Error("Could not find weights in manifest with names: "+f.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=i.reduce(function(w,_,S){return _&&w.push(S),w},[]),p=[],d.forEach(function(w){t[w].paths.forEach(function(_){var S=r+(r.endsWith("/")?"":"/")+_;p.push(S)})}),[4,n(p)];case 1:return v=x.sent(),g={},y=0,d.forEach(function(w){for(var _=t[w].paths.length,S=0,C=0;C<_;C++)S+=v[y+C].byteLength;for(var R=new ArrayBuffer(S),T=new Uint8Array(R),O=0,D=0;D<_;D++){var N=new Uint8Array(v[y+D]);T.set(N,O),O+=N.byteLength}o[w].forEach(function(k){var I=lk(R.slice(k.groupOffset,k.groupOffset+k.sizeBytes),[k.manifestEntry]);for(var B in I)g[B]=I[B]}),y+=_}),[2,g]}})})}}Ar.registerSaveRouter(function(n){return ue().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(p0.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new p0(e)}(n.slice(p0.URL_SCHEME.length)):null});var pk=function(){function n(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(P(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=ue().platform.fetch,P(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&P(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){var t,r,a,i;return De(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Ph(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},n.prototype.load=function(){return ke(this,void 0,void 0,function(){var e,t,r,a,i,o,u,c,f,d,p,v;return De(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,e.json()];case 3:return t=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=t.modelTopology,i=t.weightsManifest,o=t.generatedBy,u=t.convertedBy,c=t.format,f=t.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:v=g.sent(),d=v[0],p=v[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:d,weightData:p,userDefinedMetadata:f,generatedBy:o,convertedBy:u,format:c}]}})})},n.prototype.loadWeights=function(e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v;return De(this,function(g){switch(g.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(y){var x=y.lastIndexOf("/"),w=y.lastIndexOf("?"),_=y.substring(0,x),S=w>x?y.substring(w):"";return[_+"/",S]}(t),a=r[0],i=r[1],o=this.weightPathPrefix||a,u=[],c=0,f=e;c<f.length;c++)d=f[c],u.push.apply(u,d.weights);return p=[],e.forEach(function(y){y.paths.forEach(function(x){p.push(o+x+i)})}),[4,dk(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return v=g.sent(),[2,[u,r1(v)]]}})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function Fb(n){return n.match(pk.URL_SCHEME_REGEX)!=null}var qC=function(n,e){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(t){return Fb(t)}):Fb(n))?Lb(n,{onProgress:e}):null};function Lb(n,e){return new pk(n,e)}Ar.registerSaveRouter(qC),Ar.registerLoadRouter(qC);var v0=function(){function n(e){this.modelArtifacts=e}return n.prototype.load=function(){return ke(this,void 0,void 0,function(){return De(this,function(e){return[2,this.modelArtifacts]})})},n}(),T6=function(){function n(e){this.saveHandler=e}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){return De(this,function(t){return[2,this.saveHandler(e)]})})},n}(),vk=Object.freeze({browserFiles:function(n){return new R6(n)},browserHTTPRequest:function(n,e){return Lb(n,e)},concatenateArrayBuffers:r1,decodeWeights:lk,encodeWeights:function(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return De(this,function(c){switch(c.label){case 0:for(t=[],r=[],a=Array.isArray(n)?n.map(function(f){return f.name}):Object.keys(n),i=function(f){var d=a[f],p=Array.isArray(n)?n[f].tensor:n[d];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+p.dtype);var v={name:d,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var g=new Promise(function(y){return ke(u,void 0,void 0,function(){var x,w,_,S,C,R,T;return De(this,function(O){switch(O.label){case 0:return[4,p.bytes()];case 1:for(x=O.sent(),w=x.reduce(function(D,N){return D+N.length},0)+Tv*x.length,_=new Uint8Array(w),S=0,C=0;C<x.length;C++)R=x[C],T=new Uint8Array(new Uint32Array([R.length]).buffer),_.set(T,S),S+=Tv,_.set(R,S),S+=R.length;return y(_),[2]}})})});r.push(g)}else r.push(p.data());e!=null&&(v.group=e),t.push(v)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:v6(c.sent()),specs:t}]}})})},fromMemory:function(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new v0(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v0({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v0({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))},getLoadHandlers:function(n,e){return Ar.getLoadHandlers(n,e)},getModelArtifactsInfoForJSON:Ph,getSaveHandlers:function(n){return Ar.getSaveHandlers(n)},http:Lb,isHTTPScheme:Fb,loadWeights:function(n,e,t,r){return e===void 0&&(e=""),ke(this,void 0,void 0,function(){return De(this,function(a){return[2,jC(function(i){return dk(i,{requestInit:r})})(n,e,t)]})})},registerLoadRouter:function(n){return Ar.registerLoadRouter(n)},registerSaveRouter:function(n){return Ar.registerSaveRouter(n)},weightsLoaderFactory:jC,withSaveHandler:function(n){return new T6(n)},copyModel:function(n,e){return ke(this,void 0,void 0,function(){return De(this,function(t){return[2,PC(n,e,!1)]})})},listModels:function(){return ke(this,void 0,void 0,function(){var n,e,t,r,a,i,o;return De(this,function(u){switch(u.label){case 0:n=Vo.getSchemes(),e={},t=0,r=n,u.label=1;case 1:return t<r.length?(a=r[t],[4,Vo.getManager(a).listModels()]):[3,4];case 2:for(o in i=u.sent())e[a+xl+o]=i[o];u.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},moveModel:function(n,e){return ke(this,void 0,void 0,function(){return De(this,function(t){return[2,PC(n,e,!0)]})})},removeModel:function(n){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){return e=Mp(n),[2,Vo.getManager(e.scheme).removeModel(e.path)]})})}}),Ju;j({confusionMatrix_:function(n,e,t){var r=L(n,"labels","confusionMatrix"),a=L(e,"predictions","confusionMatrix");P(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),P(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),P(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),P(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),P(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var i=Tb(r.asType("int32"),t),o=Tb(a.asType("int32"),t);return i.transpose().matMul(o).asType("int32")}});var O6=j({fromPixels_:function(n,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,a=!1,i=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)i=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);o=!0}if(a&&a&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(zO("FromPixels",W.backendName)!=null)return W.runKernel("FromPixels",{pixels:n},{numChannels:e});var u,c,f=a?[n.videoWidth,n.videoHeight]:[n.width,n.height],d=f[0],p=f[1];if(o?u=n.getContext("2d").getImageData(0,0,d,p).data:r||t?u=n.data:(i||a)&&(Ju==null&&(Ju=document.createElement("canvas").getContext("2d")),Ju.canvas.width=d,Ju.canvas.height=p,Ju.drawImage(n,0,0,d,p),u=Ju.getImageData(0,0,d,p).data),e===4)c=new Int32Array(u);else{var v=d*p;c=new Int32Array(v*e);for(var g=0;g<v;g++)for(var y=0;y<e;++y)c[g*e+y]=u[4*g+y]}return Nx(c,[p,d,e],"int32")}}),a1=Object.freeze({toPixels:function(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return De(this,function(k){switch(k.label){case 0:if(t=L(n,"img","toPixels"),n instanceof jt||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),a=r[0],i=r[1],(o=t.rank===2?1:t.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,t.data()];case 1:return u=k.sent(),c=t.min(),f=t.max(),[4,Promise.all([c.data(),f.data()])];case 2:if(d=k.sent(),p=d[0],v=d[1],g=p[0],y=v[0],c.dispose(),f.dispose(),t.dtype==="float32"){if(g<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+y+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(g<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+y+"].")}for(x=t.dtype==="float32"?255:1,w=new Uint8ClampedArray(i*a*4),_=0;_<a*i;++_)S=void 0,C=void 0,R=void 0,T=void 0,o===1?(S=u[_]*x,C=u[_]*x,R=u[_]*x,T=255):o===3?(S=u[3*_]*x,C=u[3*_+1]*x,R=u[3*_+2]*x,T=255):o===4&&(S=u[4*_]*x,C=u[4*_+1]*x,R=u[4*_+2]*x,T=u[4*_+3]*x),w[(O=4*_)+0]=Math.round(S),w[O+1]=Math.round(C),w[O+2]=Math.round(R),w[O+3]=Math.round(T);return e!=null&&(e.width=i,e.height=a,D=e.getContext("2d"),N=new ImageData(w,i,a),D.putImageData(N,0,0)),t!==n&&t.dispose(),[2,w]}})})},fromPixels:O6}),A6=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(e,t){return new e(t)},n}(),k6=function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(e){n.getMap().classNameMap[e.className]=[e,e.fromConfig]},n}();function lu(n){P(n.className!=null,function(){return"Class being registered does not have the static className property defined."}),P(typeof n.className=="string",function(){return"className is required to be a string, but got type "+typeof n.className}),P(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),k6.register(n)}var cu=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return _a(e,n),e.prototype.minimize=function(t,r,a){r===void 0&&(r=!1);var i=this.computeGradients(t,a),o=i.value,u=i.grads;if(a!=null){var c=a.map(function(f){return{name:f.name,tensor:u[f.name]}});this.applyGradients(c)}else this.applyGradients(u);return vr(u),r?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,r){return Uz(t,r)},e.prototype.dispose=function(){this.iterations_!=null&&vr(this.iterations_)},e.prototype.saveIterations=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:we(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){switch(a.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,t.slice(1)]}})})},e}(A6);Object.defineProperty(cu,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var D6=function(n){function e(t,r,a){a===void 0&&(a=null);var i=n.call(this)||this;return i.learningRate=t,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=W.backend.epsilon()),i}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:Te(function(){return gt(o).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:Te(function(){return gt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable,f=r.accumulatedUpdates[i].variable;Te(function(){var d=c.mul(r.rho).add(u.square().mul(1-r.rho)),p=f.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(u),v=f.mul(r.rho).add(p.square().mul(1-r.rho));c.assign(d),f.assign(v);var g=p.mul(-r.learningRate).add(o);o.assign(g)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(vr(this.accumulatedGrads.map(function(t){return t.variable})),vr(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var t;return De(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(cu);lu(D6);var N6=function(n){function e(t,r){r===void 0&&(r=.1);var a=n.call(this)||this;return a.learningRate=t,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:Te(function(){return $a(o.shape,r.initialAccumulatorValue).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable;Te(function(){var f=c.add(u.square());c.assign(f);var d=u.div(f.add(W.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&vr(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(cu);lu(N6);var I6=function(n){function e(t,r,a,i){i===void 0&&(i=null);var o=n.call(this)||this;return o.learningRate=t,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Te(function(){o.accBeta1=we(r).variable(),o.accBeta2=we(a).variable()}),i==null&&(o.epsilon=W.backend.epsilon()),o}return _a(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Te(function(){var i=gn(1,r.accBeta1),o=gn(1,r.accBeta2);a.forEach(function(u,c){var f=W.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:Te(function(){return gt(f).variable(!1)})}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:u+"/v",variable:Te(function(){return gt(f).variable(!1)})});var d=Array.isArray(t)?t[c].tensor:t[u];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedSecondMoment[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2).add(d.square().mul(1-r.beta2)),x=g.div(i),w=y.div(o);p.assign(g),v.assign(y);var _=x.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(f);f.assign(_)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&vr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&vr(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var t;return De(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){var r,a=this;return De(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),Te(function(){a.accBeta1.assign(Cv(a.beta1,a.iterations_+1)),a.accBeta2.assign(Cv(a.beta2,a.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(cu);lu(I6);var M6=function(n){function e(t,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var u=n.call(this)||this;return u.learningRate=t,u.beta1=r,u.beta2=a,u.epsilon=i,u.decay=o,u.accumulatedFirstMoment=[],u.accumulatedWeightedInfNorm=[],Te(function(){u.iteration=we(0).variable(),u.accBeta1=we(r).variable()}),i==null&&(u.epsilon=W.backend.epsilon()),u}return _a(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Te(function(){var i=gn(1,r.accBeta1),o=fa(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(u,c){var f=W.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:gt(f).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:u+"/v",variable:gt(f).variable(!1)});var d=Array.isArray(t)?t[c].tensor:t[u];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedWeightedInfNorm[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2),x=d.abs(),w=y.maximum(x);p.assign(g),v.assign(w);var _=o.div(i).mul(g.div(w.add(r.epsilon))).add(f);f.assign(_)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&vr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&vr(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(cu);lu(M6);var mk=function(n){function e(t){var r=n.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=Array.isArray(t)?t[i].tensor:t[a];if(o!=null){var u=W.registeredVariables[a];Te(function(){var c=r.c.mul(o).add(u);u.assign(c)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=ez(we(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,r){return new t(r.learningRate)},e.className="SGD",e}(cu);lu(mk);var F6=function(n){function e(t,r,a){a===void 0&&(a=!1);var i=n.call(this,t)||this;return i.learningRate=t,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=we(i.momentum),i}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:Te(function(){return gt(o).variable(!1)})});var u=r.accumulations[i].variable,c=Array.isArray(t)?t[i].tensor:t[a];c!=null&&Te(function(){var f,d=r.m.mul(u).add(c);f=r.useNesterov?r.c.mul(c.add(d.mul(r.m))).add(o):r.c.mul(d).add(o),u.assign(d),o.assign(f)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&vr(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(mk);lu(F6);var L6=function(n){function e(t,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var u=n.call(this)||this;if(u.learningRate=t,u.decay=r,u.momentum=a,u.epsilon=i,u.accumulatedMeanSquares=[],u.accumulatedMoments=[],u.accumulatedMeanGrads=[],u.centered=o,i==null&&(u.epsilon=W.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return u}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:Te(function(){return gt(o).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:Te(function(){return gt(o).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:Te(function(){return gt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedMeanSquares[i].variable,f=r.accumulatedMoments[i].variable;Te(function(){var d=c.mul(r.decay).add(u.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[i].variable,v=p.mul(r.decay).add(u.mul(1-r.decay)),g=f.mul(r.momentum).add(u.mul(r.learningRate).div(d.sub(v.square().add(r.epsilon)).sqrt()));c.assign(d),p.assign(v),f.assign(g);var y=o.sub(g);o.assign(y)}else{var x=c.mul(r.decay).add(u.square().mul(1-r.decay));g=f.mul(r.momentum).add(u.mul(r.learningRate).div(x.add(r.epsilon).sqrt())),c.assign(x),f.assign(g),y=o.sub(g),o.assign(y)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&vr(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&vr(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&vr(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var t;return De(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(cu);lu(L6);jt.prototype.squaredDifference=function(n){return DA(this,n)},oe=u6;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pb=function(n,e){return Pb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])},Pb(n,e)};function Xe(n,e){Pb(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hn=function(){return Hn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hn.apply(this,arguments)};function Le(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?i(d.value):a(d.value).then(u,c)}f((r=r.apply(n,[])).next())})}function Pe(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Pf(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<t;e++)for(var i=arguments[e],o=0,u=i.length;o<u;o++,a++)r[a]=i[o];return r}var $s=function(){function n(e,t){if(!Ks(e)||!Ks(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n}();function tm(n,e){return n instanceof jt&&n.shape.length===e}function P6(n){return tm(n,2)}function nm(n){return tm(n,3)}function jo(n){return tm(n,4)}function B6(n){return n%1!==0}function WC(n){return n%2===0}function i1(n,e){e===void 0&&(e=2);var t=Math.pow(10,e);return Math.floor(n*t)/t}function HC(n){return n&&n.width&&n.height}function z6(n,e){var t=n.width,r=n.height,a=e/Math.max(r,t);return new $s(Math.round(t*a),Math.round(r*a))}function o1(n){return n.reduce(function(e,t){return e.add(t)},new _t(0,0)).div(new _t(n.length,n.length))}function fh(n,e,t){return Array(n).fill(0).map(function(r,a){return e+a*t})}function Ks(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function GC(n){return Ks(n)&&0<=n&&n<=1}var _t=function(){function n(e,t){this._x=e,this._y=t}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(e){return new n(this.x+e.x,this.y+e.y)},n.prototype.sub=function(e){return new n(this.x-e.x,this.y-e.y)},n.prototype.mul=function(e){return new n(this.x*e.x,this.y*e.y)},n.prototype.div=function(e){return new n(this.x/e.x,this.y/e.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n}(),Ja=function(){function n(e,t){t===void 0&&(t=!0);var r=e||{},a=[r.left,r.top,r.right,r.bottom].every(Ks),i=[r.x,r.y,r.width,r.height].every(Ks);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],u=o[0],c=o[1],f=o[2],d=o[3];n.assertIsValidBox({x:u,y:c,width:f,height:d},"Box.constructor",t),this._x=u,this._y=c,this._width=f,this._height=d}return n.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Ks)},n.assertIsValidBox=function(e,t,r){if(r===void 0&&(r=!1),!n.isRect(e))throw new Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new _t(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new _t(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new _t(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new _t(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.toSquare=function(){var e=this,t=e.x,r=e.y,a=e.width,i=e.height,o=Math.abs(a-i);return a<i&&(t-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new n({x:t,y:r,width:a,height:i})},n.prototype.rescale=function(e){var t=HC(e)?e.width:e,r=HC(e)?e.height:e;return new n({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},n.prototype.pad=function(e,t){var r=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],a=r[0],i=r[1],o=r[2],u=r[3];return new n({x:a,y:i,width:o,height:u})},n.prototype.clipAtImageBorders=function(e,t){var r=this,a=r.x,i=r.y,o=r.right,u=r.bottom,c=Math.max(a,0),f=Math.max(i,0),d=o-c,p=u-f,v=Math.min(d,e-c),g=Math.min(p,t-f);return new n({x:c,y:f,width:v,height:g}).floor()},n.prototype.shift=function(e,t){var r=this,a=r.width,i=r.height,o=this.x+e,u=this.y+t;return new n({x:o,y:u,width:a,height:i})},n.prototype.padAtBorders=function(e,t){var r=this.width+1,a=this.height+1,i=1,o=1,u=r,c=a,f=this.left,d=this.top,p=this.right,v=this.bottom;return p>t&&(u=-p+t+r,p=t),v>e&&(c=-v+e+a,v=e),f<1&&(c=2-f,f=1),d<1&&(c=2-d,d=1),{dy:o,edy:c,dx:i,edx:u,y:d,ey:v,x:f,ex:p,w:r,h:a}},n.prototype.calibrate=function(e){return new n({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},n}(),rm=function(n){Xe(e,n);function e(t,r,a,i,o){return o===void 0&&(o=!1),n.call(this,{left:t,top:r,right:a,bottom:i},o)||this}return e}(Ja),gk=function(){function n(e,t,r,a,i){this._imageDims=new $s(i.width,i.height),this._score=e,this._classScore=t,this._className=r,this._box=new Ja(a).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new Ja(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},n}(),Ir=function(n){Xe(e,n);function e(t,r,a){return n.call(this,t,t,"",r,a)||this}return e.prototype.forSize=function(t,r){var a=n.prototype.forSize.call(this,t,r),i=a.score,o=a.relativeBox,u=a.imageDims;return new e(i,o,u)},e}(gk);function U6(n,e,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),a=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),i=r*a;return t?i/(n.area+e.area-i):i/Math.min(n.area,e.area)}function V6(n){var e=n.map(function(u){return u.x}),t=n.map(function(u){return u.y}),r=e.reduce(function(u,c){return c<u?c:u},1/0),a=t.reduce(function(u,c){return c<u?c:u},1/0),i=e.reduce(function(u,c){return u<c?c:u},0),o=t.reduce(function(u,c){return u<c?c:u},0);return new rm(r,a,i,o)}function hh(n,e,t,r){r===void 0&&(r=!0);for(var a=e.map(function(u,c){return{score:u,boxIndex:c}}).sort(function(u,c){return u.score-c.score}).map(function(u){return u.boxIndex}),i=[],o=function(){var u=a.pop();i.push(u);for(var c=a,f=[],d=0;d<c.length;d++){var p=c[d],v=n[u],g=n[p];f.push(U6(v,g,r))}a=a.filter(function(y,x){return f[x]<=t})};a.length>0;)o();return i}function Bh(n,e){return Te(function(){var t=e[0],r=e[1],a=e[2],i=$a(Pf(n.shape.slice(0,3),[1]),t),o=$a(Pf(n.shape.slice(0,3),[1]),r),u=$a(Pf(n.shape.slice(0,3),[1]),a),c=pn([i,o,u],3);return gn(n,c)})}function j6(n,e){return e===void 0&&(e=!1),Te(function(){var t=n.shape.slice(1),r=t[0],a=t[1];if(r===a)return n;var i=Math.abs(r-a),o=Math.round(i*(e?.5:1)),u=r>a?2:1,c=function(g){var y=n.shape.slice();return y[u]=g,$a(y,0)},f=c(o),d=i-f.shape[u],p=e&&d?c(d):null,v=[p,n,f].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return pn(v,u)})}function m0(n){return 1/(1+Math.exp(-n))}var s1=function(n){Xe(e,n);function e(t,r,a,i,o){return o===void 0&&(o=!1),n.call(this,{x:t,y:r,width:a,height:i},o)||this}return e}(Ja),q6=.5,W6=.43,H6=.45,dh=function(){function n(e,t,r){r===void 0&&(r=new _t(0,0));var a=t.width,i=t.height;this._imgDims=new $s(a,i),this._shift=r,this._positions=e.map(function(o){return o.mul(new _t(a,i)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new _t(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new _t(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},n.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new _t(e,t))},n.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},n.prototype.align=function(e,t){if(t===void 0&&(t={}),e){var r=e instanceof Ir?e.box.floor():new Ja(e);return this.shiftBy(r.x,r.y).align(null,t)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=a.useDlibAlignment,o=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},n.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],r=e[1],a=e[2],i=function(p){return a.sub(p).magnitude()},o=(i(t)+i(r))/2,u=Math.floor(o/H6),c=o1(e),f=Math.floor(Math.max(0,c.x-q6*u)),d=Math.floor(Math.max(0,c.y-W6*u));return new s1(f,d,Math.min(u,this.imageWidth+f),Math.min(u,this.imageHeight+d))},n.prototype.alignMinBbox=function(e){var t=V6(this.positions);return t.pad(t.width*e,t.height*e)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n}(),G6=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],o1([t[3],t[4]])]},e}(dh),Q6=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(o1)},e}(dh),QC=function(){function n(e,t){this._label=e,this._distance=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+i1(this.distance)+")":"")},n}(),$C=function(n){Xe(e,n);function e(t,r){var a=n.call(this,t)||this;return a._label=r,a}return e.assertIsValidLabeledBox=function(t,r){if(Ja.assertIsValidBox(t,r),!Ks(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Ja),gp=function(){function n(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},n.fromJSON=function(e){var t=e.descriptors.map(function(r){return new Float32Array(r)});return new n(e.label,t)},n}();(function(n){Xe(e,n);function e(t,r,a,i){var o=n.call(this,t,r)||this;return o._score=a,o._classScore=i,o}return e.assertIsValidPredictedBox=function(t,r){if($C.assertIsValidLabeledBox(t,r),!GC(t.score)||!GC(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})($C);function ph(n){return n.detection instanceof Ir}function vh(n,e){var t={detection:e};return Object.assign({},n,t)}function yk(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:e}}function bk(n){var e="";if(!n)try{n=require("fs")}catch(r){e=r.toString()}var t=n?function(r){return new Promise(function(a,i){n.readFile(r,function(o,u){return o?i(o):a(u)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:t}}function xk(){var n=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,t=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=bk();return Hn({Canvas:n||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:e||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:t,createImageElement:r,fetch:a},i)}function wk(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function _k(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var fn;function $6(){if(!fn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return fn}function Bb(n){fn=n}function u1(){wk()&&Bb(yk()),_k()&&Bb(xk())}function K6(n){if(fn||u1(),!fn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=n.Canvas,t=e===void 0?fn.Canvas:e,r=n.Image,a=r===void 0?fn.Image:r;fn.Canvas=t,fn.Image=a,fn.createCanvasElement=n.createCanvasElement||function(){return new t},fn.createImageElement=n.createImageElement||function(){return new a},fn.ImageData=n.ImageData||fn.ImageData,fn.Video=n.Video||fn.Video,fn.fetch=n.fetch||fn.fetch,fn.readFile=n.readFile||fn.readFile}var Xn={getEnv:$6,setEnv:Bb,initialize:u1,createBrowserEnv:yk,createFileSystem:bk,createNodejsEnv:xk,monkeyPatch:K6,isBrowser:wk,isNodejs:_k};u1();function l1(n){return!Xn.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function Bi(n){var e=Xn.getEnv(),t=e.Canvas,r=e.CanvasRenderingContext2D;if(n instanceof r)return n;var a=l1(n);if(!(a instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var Bo;(function(n){n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Bo||(Bo={}));var Ek=function(){function n(e){e===void 0&&(e={});var t=e.anchorPosition,r=e.backgroundColor,a=e.fontColor,i=e.fontSize,o=e.fontStyle,u=e.padding;this.anchorPosition=t||Bo.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=a||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=o||"Georgia",this.padding=u||4}return n}(),Sk=function(){function n(e,t,r){r===void 0&&(r={}),this.text=typeof e=="string"?[e]:e instanceof n?e.text:e,this.anchor=t,this.options=new Ek(r)}return n.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(r){return e.measureText(r).width}).reduce(function(r,a){return r<a?a:r},0)+2*t},n.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,r=e.padding;return this.text.length*t+2*r},n.prototype.getUpperLeft=function(e,t){var r=this.options.anchorPosition,a=r===Bo.BOTTOM_RIGHT||r===Bo.TOP_RIGHT,i=r===Bo.BOTTOM_LEFT||r===Bo.BOTTOM_RIGHT,o=this.measureWidth(e),u=this.measureHeight(),c=a?this.anchor.x-o:this.anchor.x,f=i?this.anchor.y-u:this.anchor.y;if(t){var d=t.width,p=t.height,v=Math.max(Math.min(c,d-o),0),g=Math.max(Math.min(f,p-u),0);return{x:v,y:g}}return{x:c,y:f}},n.prototype.draw=function(e){var t=l1(e),r=Bi(t),a=this.options,i=a.backgroundColor,o=a.fontColor,u=a.fontSize,c=a.fontStyle,f=a.padding;r.font=u+"px "+c;var d=this.measureWidth(r),p=this.measureHeight();r.fillStyle=i;var v=this.getUpperLeft(r,t);r.fillRect(v.x,v.y,d,p),r.fillStyle=o,this.text.forEach(function(g,y){var x=f+v.x,w=f+v.y+(y+1)*u;r.fillText(g,x,w)})},n}(),X6=function(){function n(e){e===void 0&&(e={});var t=e.boxColor,r=e.lineWidth,a=e.label,i=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=a;var o={anchorPosition:Bo.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Ek(Object.assign({},o,i))}return n}(),Y6=function(){function n(e,t){t===void 0&&(t={}),this.box=new Ja(e),this.options=new X6(t)}return n.prototype.draw=function(e){var t=Bi(e),r=this.options,a=r.boxColor,i=r.lineWidth,o=this.box,u=o.x,c=o.y,f=o.width,d=o.height;t.strokeStyle=a,t.lineWidth=i,t.strokeRect(u,c,f,d);var p=this.options.label;p&&new Sk([p],{x:u-i/2,y:c},this.options.drawLabelOptions).draw(e)},n}();function q9(n,e){var t=Array.isArray(e)?e:[e];t.forEach(function(r){var a=r instanceof Ir?r.score:ph(r)?r.detection.score:void 0,i=r instanceof Ir?r.box:ph(r)?r.detection.box:new Ja(r),o=a?""+i1(a):void 0;new Y6(i,{label:o}).draw(n)})}function Ck(n){var e=Xn.getEnv(),t=e.Image,r=e.Video;return n instanceof t&&n.complete||n instanceof r&&n.readyState>=3}function Z6(n){return new Promise(function(e,t){if(n instanceof Xn.getEnv().Canvas||Ck(n))return e();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),e(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}n.addEventListener("load",r),n.addEventListener("error",a)})}function c1(n){var e=Xn.getEnv(),t=e.Image,r=e.Video;return n instanceof t?new $s(n.naturalWidth,n.naturalHeight):n instanceof r?new $s(n.videoWidth,n.videoHeight):new $s(n.width,n.height)}function am(n){var e=n.width,t=n.height,r=Xn.getEnv().createCanvasElement,a=r();return a.width=e,a.height=t,a}function f1(n,e){var t=Xn.getEnv().ImageData;if(!(n instanceof t)&&!Ck(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=c1(n),a=r.width,i=r.height,o=am({width:a,height:i});return n instanceof t?Bi(o).putImageData(n,0,0):Bi(o).drawImage(n,0,0,a,i),o}function J6(n,e){return Le(this,void 0,void 0,function(){var t,r,a,i,o,u;return Pe(this,function(c){switch(c.label){case 0:return t=Xn.getEnv().createCanvasElement(),r=n.shape.slice(jo(n)?1:0),a=r[0],i=r[1],o=r[2],u=Te(function(){return n.as3D(a,i,o).toInt()}),[4,a1.toPixels(u,t)];case 1:return c.sent(),u.dispose(),[2,t]}})})}function KC(n){var e=Xn.getEnv(),t=e.Image,r=e.Canvas,a=e.Video;return n instanceof t||n instanceof r||n instanceof a}function eq(n,e,t){t===void 0&&(t=!1);var r=Xn.getEnv(),a=r.Image,i=r.Canvas;if(!(n instanceof a||n instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=c1(n),u=e/Math.max(o.height,o.width),c=u*o.width,f=u*o.height,d=am({width:e,height:e}),p=n instanceof i?n:f1(n),v=Math.abs(c-f)/2,g=t&&c<f?v:0,y=t&&f<c?v:0;return Bi(d).drawImage(p,g,y,c,f),d}var Ov=function(){function n(e,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(a,i){if(nm(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(jo(a)){var o=a.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var u=a instanceof Xn.getEnv().Canvas?a:f1(a);r._canvases[i]=u,r._inputDimensions[i]=[u.height,u.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var e=this;return fh(this.batchSize,0,1).map(function(t,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},n.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},n.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},n.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},n.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),r=this.getInputHeight(e);return z6({width:t,height:r},this.inputSize)},n.prototype.toBatchTensor=function(e,t){var r=this;return t===void 0&&(t=!0),this._inputSize=e,Te(function(){var a=fh(r.batchSize,0,1).map(function(o){var u=r.getInput(o);if(u instanceof jt){var c=jo(u)?u:u.expandDims();return c=j6(c,t),(c.shape[1]!==e||c.shape[2]!==e)&&(c=Zx.resizeBilinear(c,[e,e])),c.as3D(e,e,3)}if(u instanceof Xn.getEnv().Canvas)return a1.fromPixels(eq(u,e,t));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+u)}),i=Nr(a.map(function(o){return o.toFloat()})).as4D(r.batchSize,e,e,3);return i})},n}();function An(n){return Le(this,void 0,void 0,function(){var e,t,r;return Pe(this,function(a){switch(a.label){case 0:if(n instanceof Ov)return[2,n];if(e=Array.isArray(n)?n:[n],!e.length)throw new Error("toNetInput - empty array passed as input");return t=function(i){return Array.isArray(n)?" at input index "+i+":":""},r=e.map(l1),r.forEach(function(i,o){if(!KC(i)&&!nm(i)&&!jo(i))throw typeof e[o]=="string"?new Error("toNetInput -"+t(o)+" string passed, but could not resolve HTMLElement for element id "+e[o]):new Error("toNetInput -"+t(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(jo(i)){var u=i.shape[0];if(u!==1)throw new Error("toNetInput -"+t(o)+" tf.Tensor4D with batchSize "+u+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return KC(i)&&Z6(i)}))];case 1:return a.sent(),[2,new Ov(r,Array.isArray(n))]}})})}function h1(n,e){return Le(this,void 0,void 0,function(){var t,r,a,i,o,u,c;return Pe(this,function(f){switch(f.label){case 0:return t=Xn.getEnv().Canvas,r=n,n instanceof t?[3,5]:[4,An(n)];case 1:if(a=f.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof t?(o=i,[3,4]):[3,2];case 2:return[4,J6(i)];case 3:o=f.sent(),f.label=4;case 4:r=o,f.label=5;case 5:return u=Bi(r),c=e.map(function(d){return d instanceof Ir?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(d){var p=d.x,v=d.y,g=d.width,y=d.height,x=am({width:g,height:y});return Bi(x).putImageData(u.getImageData(p,v,g,y),0,0),x})]}})})}function d1(n,e){return Le(this,void 0,void 0,function(){return Pe(this,function(t){if(!nm(n)&&!jo(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(jo(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Te(function(){var r=n.shape.slice(jo(n)?1:0),a=r[0],i=r[1],o=r[2],u=e.map(function(f){return f instanceof Ir?f.forSize(i,a).box:f}).map(function(f){return f.clipAtImageBorders(i,a)}),c=u.map(function(f){var d=f.x,p=f.y,v=f.width,g=f.height;return ZA(n.as3D(a,i,o),[p,d,0],[g,v,o])});return c})]})})}function tq(n,e){return Le(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return t=Xn.getEnv().fetch,[4,t(n,e)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function nq(n){return Le(this,void 0,void 0,function(){return Pe(this,function(e){switch(e.label){case 0:return[4,tq(n)];case 1:return[2,e.sent().json()]}})})}function Rk(n,e){var t=e+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:t};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var a=n.split("/").filter(function(u){return u}),i=n.endsWith(".json")?a[a.length-1]:t,o=r+(n.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return o=n.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function rq(n,e){return Le(this,void 0,void 0,function(){var t,r,a,i;return Pe(this,function(o){switch(o.label){case 0:return t=Rk(n,e),r=t.manifestUri,a=t.modelBaseUri,[4,nq(r)];case 1:return i=o.sent(),[2,vk.loadWeights(i,a)]}})})}function W9(n,e,t){t===void 0&&(t=!1);var r=t?c1(e):e,a=r.width,i=r.height;return n.width=a,n.height=i,{width:a,height:i}}var Wi=function(){function n(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),r=t.obj,a=t.objProp;return r[a]},n.prototype.reassignParamFromPath=function(e,t){var r=this.traversePropertyPath(e),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=t},n.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Yl})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Yl)})},n.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var r=t.path,a=t.tensor;e.reassignParamFromPath(r,a.variable())})},n.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var r=t.path,a=t.tensor,i=zn(a.dataSync());a.dispose(),e.reassignParamFromPath(r,i)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},n.prototype.load=function(e){return Le(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},n.prototype.loadFromUri=function(e){return Le(this,void 0,void 0,function(){var t;return Pe(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,rq(e,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},n.prototype.loadFromDisk=function(e){return Le(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p;return Pe(this,function(v){switch(v.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=Xn.getEnv().readFile,r=Rk(e,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,o=function(g){return Promise.all(g.map(function(y){return t(y).then(function(x){return x.buffer})}))},u=vk.weightsLoaderFactory(o),d=(f=JSON).parse,[4,t(a)];case 1:return c=d.apply(f,[v.sent().toString()]),[4,u(c,i)];case 2:return p=v.sent(),this.loadFromWeightMap(p),[2]}})})},n.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.extractWeights=function(e){var t=this.extractParams(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+e);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),r=t.obj,a=t.objProp;if(!r||!a||!(r[a]instanceof jt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:a}},n}();function kr(n,e,t){return Te(function(){var r=Qx(n,e.depthwise_filter,e.pointwise_filter,t,"same");return r=ut(r,e.bias),r})}function g0(n,e,t){return t===void 0&&(t=!1),Te(function(){var r=qt(t?ut(ea(n,e.conv0.filters,[2,2],"same"),e.conv0.bias):kr(n,e.conv0,[2,2])),a=kr(r,e.conv1,[1,1]),i=qt(ut(r,a)),o=kr(i,e.conv2,[1,1]);return qt(ut(r,ut(a,o)))})}function yp(n,e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),Te(function(){var a=qt(t?ut(ea(n,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):kr(n,e.conv0,r?[2,2]:[1,1])),i=kr(a,e.conv1,[1,1]),o=qt(ut(a,i)),u=kr(o,e.conv2,[1,1]),c=qt(ut(a,ut(i,u))),f=kr(c,e.conv3,[1,1]);return qt(ut(a,ut(i,ut(u,f))))})}function ya(n,e,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),Te(function(){var a=ut(ea(n,e.filters,[1,1],t),e.bias);return r?qt(a):a})}function Hi(n,e){Object.keys(n).forEach(function(t){e.some(function(r){return r.originalPath===t})||n[t].dispose()})}function im(n,e){return function(t,r,a,i){var o=hr(n(t*r*a*a),[a,a,t,r]),u=sn(n(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:u}}}function p1(n,e){return function(t,r,a){var i=Uo(n(t*r),[t,r]),o=sn(n(r));return e.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var Tk=function(){function n(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}return n}();function v1(n,e){return function(t,r,a){var i=hr(n(9*t),[3,3,t,1]),o=hr(n(t*r),[1,1,t,r]),u=sn(n(r));return e.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new Tk(i,o,u)}}function m1(n){return function(e){var t=n(e+"/depthwise_filter",4),r=n(e+"/pointwise_filter",4),a=n(e+"/bias",1);return new Tk(t,r,a)}}function rs(n,e){return function(t,r,a){var i=n[t];if(!tm(i,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+i);return e.push({originalPath:t,paramPath:a||t}),i}}function Gi(n){var e=n;function t(a){var i=e.slice(0,a);return e=e.slice(a),i}function r(){return e}return{extractWeights:t,getRemainingWeights:r}}function Ok(n,e){var t=im(n,e),r=v1(n,e);function a(o,u,c,f){f===void 0&&(f=!1);var d=f?t(o,u,3,c+"/conv0"):r(o,u,c+"/conv0"),p=r(u,u,c+"/conv1"),v=r(u,u,c+"/conv2");return{conv0:d,conv1:p,conv2:v}}function i(o,u,c,f){f===void 0&&(f=!1);var d=a(o,u,c,f),p=d.conv0,v=d.conv1,g=d.conv2,y=r(u,u,c+"/conv3");return{conv0:p,conv1:v,conv2:g,conv3:y}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function aq(n){var e=[],t=Gi(n),r=t.extractWeights,a=t.getRemainingWeights,i=Ok(r,e).extractDenseBlock4Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2"),f=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:o,dense1:u,dense2:c,dense3:f}}}function Ak(n){return function(e){var t=n(e+"/filters",4),r=n(e+"/bias",1);return{filters:t,bias:r}}}function kk(n,e){var t=rs(n,e),r=Ak(t),a=m1(t);function i(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),d=a(u+"/conv1"),p=a(u+"/conv2");return{conv0:f,conv1:d,conv2:p}}function o(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),d=a(u+"/conv1"),p=a(u+"/conv2"),v=a(u+"/conv3");return{conv0:f,conv1:d,conv2:p,conv3:v}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function iq(n){var e=[],t=kk(n,e).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return Hi(n,e),{params:r,paramMappings:e}}var Dk=function(n){Xe(e,n);function e(){return n.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Te(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Bh(a,i).div(we(255)),u=yp(o,r.dense0,!0);return u=yp(u,r.dense1),u=yp(u,r.dense2),u=yp(u,r.dense3),u=Lh(u,[7,7],[2,2],"valid"),u})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return iq(t)},e.prototype.extractParams=function(t){return aq(t)},e}(Wi);function Wa(n,e){return Te(function(){return ut(Zv(n,e.weights),e.bias)})}function oq(n,e,t){var r=[],a=Gi(n),i=a.extractWeights,o=a.getRemainingWeights,u=p1(i,r),c=u(e,t,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:c}}}function sq(n){var e=[],t=rs(n,e);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:r("fc")};return Hi(n,e),{params:a,paramMappings:e}}function Nk(n){var e={},t={};return Object.keys(n).forEach(function(r){var a=r.startsWith("fc")?t:e;a[r]=n[r]}),{featureExtractorMap:e,classifierMap:t}}var Ik=function(n){Xe(e,n);function e(t,r){var a=n.call(this,t)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Te(function(){var i=t instanceof Ov?r.faceFeatureExtractor.forwardInput(t):t;return Wa(i.as2D(i.shape[0],-1),a.fc)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return oq(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var r=Nk(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),sq(i)},e.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,o=t.slice(0,t.length-i),u=t.slice(t.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(u)},e}(Wi),XC=["neutral","happy","sad","angry","fearful","disgusted","surprised"],g1=function(){function n(e){var t=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);XC.forEach(function(r,a){t[r]=e[a]})}return n.prototype.asSortedArray=function(){var e=this;return XC.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,r){return r.probability-t.probability})},n}(),uq=function(n){Xe(e,n);function e(t){return t===void 0&&(t=new Dk),n.call(this,"FaceExpressionNet",t)||this}return e.prototype.forwardInput=function(t){var r=this;return Te(function(){return ji(r.runNet(t))})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictExpressions=function(t){return Le(this,void 0,void 0,function(){var r,a,i,o,u=this;return Pe(this,function(c){switch(c.label){case 0:return[4,An(t)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(vn(a).map(function(f){return Le(u,void 0,void 0,function(){var d;return Pe(this,function(p){switch(p.label){case 0:return[4,f.data()];case 1:return d=p.sent(),f.dispose(),[2,d]}})})}))];case 3:return i=c.sent(),a.dispose(),o=i.map(function(f){return new g1(f)}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(Ik);function lq(n){return n.expressions instanceof g1}function Mk(n,e){var t={expressions:e};return Object.assign({},n,t)}function H9(n,e,t,r){t===void 0&&(t=.1);var a=Array.isArray(e)?e:[e];a.forEach(function(i){var o=i instanceof g1?i:lq(i)?i.expressions:void 0;if(!o)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var u=o.asSortedArray(),c=u.filter(function(p){return p.probability>t}),f=ph(i)?i.detection.box.bottomLeft:new _t(0,0),d=new Sk(c.map(function(p){return p.expression+" ("+i1(p.probability)+")"}),f);d.draw(n)})}function Fk(n){return ph(n)&&n.landmarks instanceof dh&&n.unshiftedLandmarks instanceof dh&&n.alignedRect instanceof Ir}function om(n,e){var t=n.detection.box,r=e.shiftBy(t.x,t.y),a=r.align(),i=n.detection.imageDims,o=new Ir(n.detection.score,a.rescale(i.reverse()),i),u={landmarks:r,unshiftedLandmarks:e,alignedRect:o};return Object.assign({},n,u)}function cq(n,e){var t=im(n,e),r=v1(n,e);function a(o,u,c){var f=r(o,u,c+"/separable_conv0"),d=r(u,u,c+"/separable_conv1"),p=t(o,u,1,c+"/expansion_conv");return{separable_conv0:f,separable_conv1:d,expansion_conv:p}}function i(o,u){var c=r(o,o,u+"/separable_conv0"),f=r(o,o,u+"/separable_conv1"),d=r(o,o,u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function fq(n,e){var t=[],r=Gi(n),a=r.extractWeights,i=r.getRemainingWeights,o=cq(a,t),u=o.extractConvParams,c=o.extractSeparableConvParams,f=o.extractReductionBlockParams,d=o.extractMainBlockParams,p=u(3,32,3,"entry_flow/conv_in"),v=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),y={conv_in:p,reduction_block_0:v,reduction_block_1:g},x={};fh(e,0,1).forEach(function(C){x["main_block_"+C]=d(128,"middle_flow/main_block_"+C)});var w=f(128,256,"exit_flow/reduction_block"),_=c(256,512,"exit_flow/separable_conv"),S={reduction_block:w,separable_conv:_};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{entry_flow:y,middle_flow:x,exit_flow:S}}}function hq(n,e){var t=rs(n,e),r=Ak(t),a=m1(t);function i(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),d=r(u+"/expansion_conv");return{separable_conv0:c,separable_conv1:f,expansion_conv:d}}function o(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),d=a(u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:o}}function dq(n,e){var t=[],r=hq(n,t),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,u=r.extractMainBlockParams,c=a("entry_flow/conv_in"),f=o("entry_flow/reduction_block_0"),d=o("entry_flow/reduction_block_1"),p={conv_in:c,reduction_block_0:f,reduction_block_1:d},v={};fh(e,0,1).forEach(function(w){v["main_block_"+w]=u("middle_flow/main_block_"+w)});var g=o("exit_flow/reduction_block"),y=i("exit_flow/separable_conv"),x={reduction_block:g,separable_conv:y};return Hi(n,t),{params:{entry_flow:p,middle_flow:v,exit_flow:x},paramMappings:t}}function Lk(n,e,t){return ut(ea(n,e.filters,t,"same"),e.bias)}function y0(n,e,t){t===void 0&&(t=!0);var r=t?qt(n):n;return r=kr(r,e.separable_conv0,[1,1]),r=kr(qt(r),e.separable_conv1,[1,1]),r=En(r,[3,3],[2,2],"same"),r=ut(r,Lk(n,e.expansion_conv,[2,2])),r}function pq(n,e){var t=kr(qt(n),e.separable_conv0,[1,1]);return t=kr(qt(t),e.separable_conv1,[1,1]),t=kr(qt(t),e.separable_conv2,[1,1]),t=ut(t,n),t}var vq=function(n){Xe(e,n);function e(t){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return e.prototype.forwardInput=function(t){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return Te(function(){var i=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=Bh(i,o).div(we(256)),c=qt(Lk(u,a.entry_flow.conv_in,[2,2]));return c=y0(c,a.entry_flow.reduction_block_0,!1),c=y0(c,a.entry_flow.reduction_block_1),fh(r._numMainBlocks,0,1).forEach(function(f){c=pq(c,a.middle_flow["main_block_"+f])}),c=y0(c,a.exit_flow.reduction_block),c=qt(kr(c,a.exit_flow.separable_conv,[1,1])),c})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return dq(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return fq(t,this._numMainBlocks)},e}(Wi);function mq(n){var e=[],t=Gi(n),r=t.extractWeights,a=t.getRemainingWeights,i=p1(r,e),o=i(512,1,"fc/age"),u=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{fc:{age:o,gender:u}}}}function gq(n){var e=[],t=rs(n,e);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Hi(n,e),{params:a,paramMappings:e}}var Av;(function(n){n.FEMALE="female",n.MALE="male"})(Av||(Av={}));var yq=function(n){Xe(e,n);function e(t){t===void 0&&(t=new vq(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Te(function(){var i=t instanceof Ov?r.faceFeatureExtractor.forwardInput(t):t,o=Lh(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),u=Wa(o,a.fc.age).as1D(),c=Wa(o,a.fc.gender);return{age:u,gender:c}})},e.prototype.forwardInput=function(t){var r=this;return Te(function(){var a=r.runNet(t),i=a.age,o=a.gender;return{age:i,gender:ji(o)}})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return Le(this,void 0,void 0,function(){var r,a,i,o,u,c,f=this;return Pe(this,function(d){switch(d.label){case 0:return[4,An(t)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return a=d.sent(),i=vn(a.age),o=vn(a.gender),u=i.map(function(p,v){return{ageTensor:p,genderTensor:o[v]}}),[4,Promise.all(u.map(function(p){var v=p.ageTensor,g=p.genderTensor;return Le(f,void 0,void 0,function(){var y,x,w,_,S;return Pe(this,function(C){switch(C.label){case 0:return[4,v.data()];case 1:return y=C.sent()[0],[4,g.data()];case 2:return x=C.sent()[0],w=x>.5,_=w?Av.MALE:Av.FEMALE,S=w?x:1-x,v.dispose(),g.dispose(),[2,{age:y,gender:_,genderProbability:S}]}})})}))];case 3:return c=d.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return mq(t)},e.prototype.extractParamsFromWeigthMap=function(t){var r=Nk(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),gq(i)},e.prototype.extractParams=function(t){var r=1539,a=t.slice(0,t.length-r),i=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},e}(Wi),Pk=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.postProcess=function(t,r,a){var i=a.map(function(u){var c=u.width,f=u.height,d=r/Math.max(f,c);return{width:c*d,height:f*d}}),o=i.length;return Te(function(){var u=function(v,g){return Nr([$a([68],v),$a([68],g)],1).as2D(1,136).as1D()},c=function(v,g){var y=i[v],x=y.width,w=y.height;return g(x,w)?Math.abs(x-w)/2:0},f=function(v){return c(v,function(g,y){return g<y})},d=function(v){return c(v,function(g,y){return y<g})},p=t.mul($a([o,136],r)).sub(Nr(Array.from(Array(o),function(v,g){return u(f(g),d(g))}))).div(Nr(Array.from(Array(o),function(v,g){return u(i[g].width,i[g].height)})));return p})},e.prototype.forwardInput=function(t){var r=this;return Te(function(){var a=r.runNet(t);return r.postProcess(a,t.inputSize,t.inputDimensions.map(function(i){var o=i[0],u=i[1];return{height:o,width:u}}))})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.detectLandmarks=function(t){return Le(this,void 0,void 0,function(){var r,a,i,o=this;return Pe(this,function(u){switch(u.label){case 0:return[4,An(t)];case 1:return r=u.sent(),a=Te(function(){return vn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c,f){return Le(o,void 0,void 0,function(){var d,p,v,g,y;return Pe(this,function(x){switch(x.label){case 0:return v=(p=Array).from,[4,c.data()];case 1:return d=v.apply(p,[x.sent()]),g=d.filter(function(w,_){return WC(_)}),y=d.filter(function(w,_){return!WC(_)}),[2,new Q6(Array(68).fill(0).map(function(w,_){return new _t(g[_],y[_])}),{height:r.getInputHeight(f),width:r.getInputWidth(f)})]}})})}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(Ik),Bk=function(n){Xe(e,n);function e(t){return t===void 0&&(t=new Dk),n.call(this,"FaceLandmark68Net",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(Pk);function bq(n){var e=[],t=kk(n,e).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return Hi(n,e),{params:r,paramMappings:e}}function xq(n){var e=[],t=Gi(n),r=t.extractWeights,a=t.getRemainingWeights,i=Ok(r,e).extractDenseBlock3Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:o,dense1:u,dense2:c}}}var wq=function(n){Xe(e,n);function e(){return n.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Te(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Bh(a,i).div(we(255)),u=g0(o,r.dense0,!0);return u=g0(u,r.dense1),u=g0(u,r.dense2),u=Lh(u,[14,14],[2,2],"valid"),u})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return bq(t)},e.prototype.extractParams=function(t){return xq(t)},e}(Wi),_q=function(n){Xe(e,n);function e(t){return t===void 0&&(t=new wq),n.call(this,"FaceLandmark68TinyNet",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(Pk);(function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Bk);function Eq(n,e){return ut($n(n,e.weights),e.biases)}function y1(n,e,t,r,a){a===void 0&&(a="same");var i=e.conv,o=i.filters,u=i.bias,c=ea(n,o,t,a);return c=ut(c,u),c=Eq(c,e.scale),r?qt(c):c}function Sq(n,e){return y1(n,e,[1,1],!0)}function zk(n,e){return y1(n,e,[1,1],!1)}function Uk(n,e){return y1(n,e,[2,2],!0,"valid")}function Cq(n,e){function t(u,c,f){var d=n(u),p=d.length/(c*f*f);if(B6(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+f);return Te(function(){return Ko(hr(d,[c,p,f,f]),[2,3,1,0])})}function r(u,c,f,d){var p=t(u,c,f),v=sn(n(c));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:p,bias:v}}function a(u,c){var f=sn(n(u)),d=sn(n(u));return e.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:f,biases:d}}function i(u,c,f,d){var p=r(u,c,f,d+"/conv"),v=a(c,d+"/scale");return{conv:p,scale:v}}function o(u,c,f,d,p){p===void 0&&(p=!1);var v=i((p?.5:1)*u,c,f,d+"/conv1"),g=i(u,c,f,d+"/conv2");return{conv1:v,conv2:g}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function Rq(n){var e=Gi(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=Cq(t,a),o=i.extractConvLayerParams,u=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),f=u(9216,32,3,"conv32_1"),d=u(9216,32,3,"conv32_2"),p=u(9216,32,3,"conv32_3"),v=u(36864,64,3,"conv64_down",!0),g=u(36864,64,3,"conv64_1"),y=u(36864,64,3,"conv64_2"),x=u(36864,64,3,"conv64_3"),w=u(147456,128,3,"conv128_down",!0),_=u(147456,128,3,"conv128_1"),S=u(147456,128,3,"conv128_2"),C=u(589824,256,3,"conv256_down",!0),R=u(589824,256,3,"conv256_1"),T=u(589824,256,3,"conv256_2"),O=u(589824,256,3,"conv256_down_out"),D=Te(function(){return Ko(Uo(t(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var N={conv32_down:c,conv32_1:f,conv32_2:d,conv32_3:p,conv64_down:v,conv64_1:g,conv64_2:y,conv64_3:x,conv128_down:w,conv128_1:_,conv128_2:S,conv256_down:C,conv256_1:R,conv256_2:T,conv256_down_out:O,fc:D};return{params:N,paramMappings:a}}function Tq(n,e){var t=rs(n,e);function r(o){var u=t(o+"/scale/weights",1),c=t(o+"/scale/biases",1);return{weights:u,biases:c}}function a(o){var u=t(o+"/conv/filters",4),c=t(o+"/conv/bias",1),f=r(o);return{conv:{filters:u,bias:c},scale:f}}function i(o){return{conv1:a(o+"/conv1"),conv2:a(o+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function Oq(n){var e=[],t=Tq(n,e),r=t.extractConvLayerParams,a=t.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),u=a("conv32_2"),c=a("conv32_3"),f=a("conv64_down"),d=a("conv64_1"),p=a("conv64_2"),v=a("conv64_3"),g=a("conv128_down"),y=a("conv128_1"),x=a("conv128_2"),w=a("conv256_down"),_=a("conv256_1"),S=a("conv256_2"),C=a("conv256_down_out"),R=n.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!P6(R))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+R);var T={conv32_down:i,conv32_1:o,conv32_2:u,conv32_3:c,conv64_down:f,conv64_1:d,conv64_2:p,conv64_3:v,conv128_down:g,conv128_1:y,conv128_2:x,conv256_down:w,conv256_1:_,conv256_2:S,conv256_down_out:C,fc:R};return Hi(n,e),{params:T,paramMappings:e}}function Na(n,e){var t=Sq(n,e.conv1);return t=zk(t,e.conv2),t=ut(t,n),t=qt(t),t}function bp(n,e){var t=Uk(n,e.conv1);t=zk(t,e.conv2);var r=Lh(n,2,2,"valid"),a=Bt(r.shape),i=r.shape[3]!==t.shape[3],o=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(o){var u=Pf(t.shape);u[1]=1;var c=Bt(u);t=pn([t,c],1);var f=Pf(t.shape);f[2]=1;var d=Bt(f);t=pn([t,d],2)}return r=i?pn([r,a],3):r,t=ut(r,t),t=qt(t),t}var Aq=function(n){Xe(e,n);function e(){return n.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Te(function(){var a=t.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=Bh(a,i).div(we(256)),u=Uk(o,r.conv32_down);u=En(u,3,2,"valid"),u=Na(u,r.conv32_1),u=Na(u,r.conv32_2),u=Na(u,r.conv32_3),u=bp(u,r.conv64_down),u=Na(u,r.conv64_1),u=Na(u,r.conv64_2),u=Na(u,r.conv64_3),u=bp(u,r.conv128_down),u=Na(u,r.conv128_1),u=Na(u,r.conv128_2),u=bp(u,r.conv256_down),u=Na(u,r.conv256_1),u=Na(u,r.conv256_2),u=bp(u,r.conv256_down_out);var c=u.mean([1,2]),f=Zv(c,r.fc);return f})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return Le(this,void 0,void 0,function(){var r,a,i,o=this;return Pe(this,function(u){switch(u.label){case 0:return[4,An(t)];case 1:return r=u.sent(),a=Te(function(){return vn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Oq(t)},e.prototype.extractParams=function(t){return Rq(t)},e}(Wi);function Vk(n,e){var t={descriptor:e};return Object.assign({},n,t)}function jk(n,e){var t={age:e};return Object.assign({},n,t)}function qk(n,e,t){var r={gender:e,genderProbability:t};return Object.assign({},n,r)}var Wk=function(){function n(e){var t=e===void 0?{}:e,r=t.minFaceSize,a=t.scaleFactor,i=t.maxNumScales,o=t.scoreThresholds,u=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=u,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n}();function kq(n,e){function t(c,f){var d=hr(n(9*c),[3,3,c,1]),p=sn(n(c)),v=sn(n(c)),g=sn(n(c)),y=sn(n(c));return e.push({paramPath:f+"/filters"},{paramPath:f+"/batch_norm_scale"},{paramPath:f+"/batch_norm_offset"},{paramPath:f+"/batch_norm_mean"},{paramPath:f+"/batch_norm_variance"}),{filters:d,batch_norm_scale:p,batch_norm_offset:v,batch_norm_mean:g,batch_norm_variance:y}}function r(c,f,d,p,v){var g=hr(n(c*f*d*d),[d,d,c,f]),y=sn(n(f));return e.push({paramPath:p+"/filters"},{paramPath:p+"/"+(v?"batch_norm_offset":"bias")}),{filters:g,bias:y}}function a(c,f,d,p){var v=r(c,f,d,p,!0),g=v.filters,y=v.bias;return{filters:g,batch_norm_offset:y}}function i(c,f,d){var p=t(c,d+"/depthwise_conv"),v=a(c,f,1,d+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:v}}function o(){var c=a(3,32,3,"mobilenetv1/conv_0"),f=i(32,64,"mobilenetv1/conv_1"),d=i(64,128,"mobilenetv1/conv_2"),p=i(128,128,"mobilenetv1/conv_3"),v=i(128,256,"mobilenetv1/conv_4"),g=i(256,256,"mobilenetv1/conv_5"),y=i(256,512,"mobilenetv1/conv_6"),x=i(512,512,"mobilenetv1/conv_7"),w=i(512,512,"mobilenetv1/conv_8"),_=i(512,512,"mobilenetv1/conv_9"),S=i(512,512,"mobilenetv1/conv_10"),C=i(512,512,"mobilenetv1/conv_11"),R=i(512,1024,"mobilenetv1/conv_12"),T=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,conv_8:w,conv_9:_,conv_10:S,conv_11:C,conv_12:R,conv_13:T}}function u(){var c=a(1024,256,1,"prediction_layer/conv_0"),f=a(256,512,3,"prediction_layer/conv_1"),d=a(512,128,1,"prediction_layer/conv_2"),p=a(128,256,3,"prediction_layer/conv_3"),v=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),y=a(256,64,1,"prediction_layer/conv_6"),x=a(64,128,3,"prediction_layer/conv_7"),w=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),_=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),S=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),C=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),R=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),T=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),O=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),N=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),I=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),B=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),U={box_encoding_predictor:w,class_predictor:_},ee={box_encoding_predictor:S,class_predictor:C},te={box_encoding_predictor:R,class_predictor:T},re={box_encoding_predictor:O,class_predictor:D},q={box_encoding_predictor:N,class_predictor:k},Z={box_encoding_predictor:I,class_predictor:B};return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,box_predictor_0:U,box_predictor_1:ee,box_predictor_2:te,box_predictor_3:re,box_predictor_4:q,box_predictor_5:Z}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function Dq(n){var e=[],t=Gi(n),r=t.extractWeights,a=t.getRemainingWeights,i=kq(r,e),o=i.extractMobilenetV1Params,u=i.extractPredictionLayerParams,c=o(),f=u(),d=Nx(r(5118*4),[1,5118,4]),p={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:f,output_layer:p},paramMappings:e}}function Nq(n,e){var t=rs(n,e);function r(f,d,p){var v=t(f+"/Conv2d_"+d+"_pointwise/weights",4,p+"/filters"),g=t(f+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:v,batch_norm_offset:g}}function a(f){var d="mobilenetv1/conv_"+f,p="MobilenetV1/Conv2d_"+f+"_depthwise",v=d+"/depthwise_conv",g=d+"/pointwise_conv",y=t(p+"/depthwise_weights",4,v+"/filters"),x=t(p+"/BatchNorm/gamma",1,v+"/batch_norm_scale"),w=t(p+"/BatchNorm/beta",1,v+"/batch_norm_offset"),_=t(p+"/BatchNorm/moving_mean",1,v+"/batch_norm_mean"),S=t(p+"/BatchNorm/moving_variance",1,v+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:x,batch_norm_offset:w,batch_norm_mean:_,batch_norm_variance:S},pointwise_conv:r("MobilenetV1",f,g)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function o(f,d){var p=t(f+"/weights",4,d+"/filters"),v=t(f+"/biases",1,d+"/bias");return{filters:p,bias:v}}function u(f){var d=o("Prediction/BoxPredictor_"+f+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+f+"/box_encoding_predictor"),p=o("Prediction/BoxPredictor_"+f+"/ClassPredictor","prediction_layer/box_predictor_"+f+"/class_predictor");return{box_encoding_predictor:d,class_predictor:p}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:u(0),box_predictor_1:u(1),box_predictor_2:u(2),box_predictor_3:u(3),box_predictor_4:u(4),box_predictor_5:u(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function Iq(n){var e=[],t=Nq(n,e),r=t.extractMobilenetV1Params,a=t.extractPredictionLayerParams,i=n["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!nm(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return Hi(n,e),{params:o,paramMappings:e}}function Ia(n,e,t){return Te(function(){var r=ea(n,e.filters,t,"same");return r=ut(r,e.batch_norm_offset),qx(r,0,6)})}var Mq=.0010000000474974513;function Fq(n,e,t){return Te(function(){var r=Yv(n,e.filters,t,"same");return r=PA(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,Mq),qx(r,0,6)})}function Lq(n){return[2,4,6,12].some(function(e){return e===n})?[2,2]:[1,1]}function Pq(n,e){return Te(function(){var t=null,r=Ia(n,e.conv_0,[2,2]),a=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(a.forEach(function(i,o){var u=o+1,c=Lq(u);r=Fq(r,i.depthwise_conv,c),r=Ia(r,i.pointwise_conv,[1,1]),u===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function Bq(n,e,t,r,a){var i=n.shape[0],o=Math.min(t,i),u=e.map(function(d,p){return{score:d,boxIndex:p}}).filter(function(d){return d.score>a}).sort(function(d,p){return p.score-d.score}),c=function(d){return d<=r?1:0},f=[];return u.forEach(function(d){if(!(f.length>=o)){for(var p=d.score,v=f.length-1;v>=0;--v){var g=zq(n,d.boxIndex,f[v]);if(g!==0&&(d.score*=c(g),d.score<=a))break}p===d.score&&f.push(d.boxIndex)}}),f}function zq(n,e,t){var r=n.arraySync(),a=Math.min(r[e][0],r[e][2]),i=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),u=Math.max(r[e][1],r[e][3]),c=Math.min(r[t][0],r[t][2]),f=Math.min(r[t][1],r[t][3]),d=Math.max(r[t][0],r[t][2]),p=Math.max(r[t][1],r[t][3]),v=(o-a)*(u-i),g=(d-c)*(p-f);if(v<=0||g<=0)return 0;var y=Math.max(a,c),x=Math.max(i,f),w=Math.min(o,d),_=Math.min(u,p),S=Math.max(w-y,0)*Math.max(_-x,0);return S/(v+g-S)}function Uq(n){var e=vn(Ko(n,[1,0])),t=[gn(e[2],e[0]),gn(e[3],e[1])],r=[ut(e[0],fa(t[0],we(2))),ut(e[1],fa(t[1],we(2)))];return{sizes:t,centers:r}}function Vq(n,e){var t=Uq(n),r=t.sizes,a=t.centers,i=vn(Ko(e,[1,0])),o=fa($n(Db(fa(i[2],we(5))),r[0]),we(2)),u=ut($n(fa(i[0],we(10)),r[0]),a[0]),c=fa($n(Db(fa(i[3],we(5))),r[1]),we(2)),f=ut($n(fa(i[1],we(10)),r[1]),a[1]);return Ko(Nr([gn(u,o),gn(f,c),ut(u,o),ut(f,c)]),[1,0])}function jq(n,e,t){return Te(function(){var r=n.shape[0],a=Vq(pa(yl(t.extra_dim,[r,1,1]),[-1,4]),pa(n,[-1,4]));a=pa(a,[r,a.shape[0]/r,4]);var i=IA(Za(e,[0,0,1],[-1,-1,-1])),o=Za(i,[0,0,0],[-1,-1,1]);o=pa(o,[r,o.shape[1]]);var u=vn(a),c=vn(o);return{boxes:u,scores:c}})}function el(n,e){return Te(function(){var t=n.shape[0],r=pa(ya(n,e.box_encoding_predictor),[t,-1,1,4]),a=pa(ya(n,e.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function qq(n,e,t){return Te(function(){var r=Ia(n,t.conv_0,[1,1]),a=Ia(r,t.conv_1,[2,2]),i=Ia(a,t.conv_2,[1,1]),o=Ia(i,t.conv_3,[2,2]),u=Ia(o,t.conv_4,[1,1]),c=Ia(u,t.conv_5,[2,2]),f=Ia(c,t.conv_6,[1,1]),d=Ia(f,t.conv_7,[2,2]),p=el(e,t.box_predictor_0),v=el(n,t.box_predictor_1),g=el(a,t.box_predictor_2),y=el(o,t.box_predictor_3),x=el(c,t.box_predictor_4),w=el(d,t.box_predictor_5),_=pn([p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,x.boxPredictionEncoding,w.boxPredictionEncoding],1),S=pn([p.classPrediction,v.classPrediction,g.classPrediction,y.classPrediction,x.classPrediction,w.classPrediction],1);return{boxPredictions:_,classPredictions:S}})}var sm=function(){function n(e){var t=e===void 0?{}:e,r=t.minConfidence,a=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n}(),Hk=function(n){Xe(e,n);function e(){return n.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Te(function(){var a=t.toBatchTensor(512,!1).toFloat(),i=gn($n(a,we(.007843137718737125)),we(1)),o=Pq(i,r.mobilenetv1),u=qq(o.out,o.conv11,r.prediction_layer),c=u.boxPredictions,f=u.classPredictions;return jq(c,f,r.output_layer)})},e.prototype.forward=function(t){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Le(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return Pe(this,function(k){switch(k.label){case 0:return a=new sm(r),i=a.maxResults,o=a.minConfidence,[4,An(t)];case 1:for(u=k.sent(),c=this.forwardInput(u),f=c.boxes,d=c.scores,p=f[0],v=d[0],g=1;g<f.length;g++)f[g].dispose(),d[g].dispose();return w=(x=Array).from,[4,v.data()];case 2:return y=w.apply(x,[k.sent()]),_=.5,S=Bq(p,y,i,_,o),C=u.getReshapedInputDimensions(0),R=u.inputSize,T=R/C.width,O=R/C.height,D=p.arraySync(),N=S.map(function(I){var B=[Math.max(0,D[I][0]),Math.min(1,D[I][2])].map(function(Z){return Z*O}),U=B[0],ee=B[1],te=[Math.max(0,D[I][1]),Math.min(1,D[I][3])].map(function(Z){return Z*T}),re=te[0],q=te[1];return new Ir(y[I],new s1(re,U,q-re,ee-U),{height:u.getInputHeight(0),width:u.getInputWidth(0)})}),p.dispose(),v.dispose(),[2,N]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Iq(t)},e.prototype.extractParams=function(t){return Dq(t)},e}(Wi);(function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Hk);var Wq=.4,Hq=[new _t(.738768,.874946),new _t(2.42204,2.65704),new _t(4.30971,7.04493),new _t(10.246,4.59428),new _t(12.6868,11.8741)],Gq=[new _t(1.603231,2.094468),new _t(6.041143,7.080126),new _t(2.882459,3.518061),new _t(4.266906,5.178857),new _t(9.041765,10.66308)],Qq=[117.001,114.697,97.404],$q="tiny_yolov2_model",Kq="tiny_yolov2_separable_conv_model",xp=function(n){return typeof n=="number"};function Xq(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!xp(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(e){return e||{}}).every(function(e){return xp(e.x)&&xp(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every(xp)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function b1(n){return Te(function(){var e=$n(n,we(.10000000149011612));return ut(qt(gn(n,e)),e)})}function yo(n,e){return Te(function(){var t=su(n,[[0,0],[1,1],[1,1],[0,0]]);return t=ea(t,e.conv.filters,[1,1],"valid"),t=gn(t,e.bn.sub),t=$n(t,e.bn.truediv),t=ut(t,e.conv.bias),b1(t)})}function bo(n,e){return Te(function(){var t=su(n,[[0,0],[1,1],[1,1],[0,0]]);return t=Qx(t,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t=ut(t,e.bias),b1(t)})}function Yq(n,e){var t=im(n,e);function r(o,u){var c=sn(n(o)),f=sn(n(o));return e.push({paramPath:u+"/sub"},{paramPath:u+"/truediv"}),{sub:c,truediv:f}}function a(o,u,c){var f=t(o,u,3,c+"/conv"),d=r(u,c+"/bn");return{conv:f,bn:d}}var i=v1(n,e);return{extractConvParams:t,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function Zq(n,e,t,r){var a=Gi(n),i=a.extractWeights,o=a.getRemainingWeights,u=[],c=Yq(i,u),f=c.extractConvParams,d=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams,v;if(e.withSeparableConvs){var g=r[0],y=r[1],x=r[2],w=r[3],_=r[4],S=r[5],C=r[6],R=r[7],T=r[8],O=e.isFirstLayerConv2d?f(g,y,3,"conv0"):p(g,y,"conv0"),D=p(y,x,"conv1"),N=p(x,w,"conv2"),k=p(w,_,"conv3"),I=p(_,S,"conv4"),B=p(S,C,"conv5"),U=R?p(C,R,"conv6"):void 0,ee=T?p(R,T,"conv7"):void 0,te=f(T||R||C,5*t,1,"conv8");v={conv0:O,conv1:D,conv2:N,conv3:k,conv4:I,conv5:B,conv6:U,conv7:ee,conv8:te}}else{var g=r[0],y=r[1],x=r[2],w=r[3],_=r[4],S=r[5],C=r[6],R=r[7],T=r[8],O=d(g,y,"conv0"),D=d(y,x,"conv1"),N=d(x,w,"conv2"),k=d(w,_,"conv3"),I=d(_,S,"conv4"),B=d(S,C,"conv5"),U=d(C,R,"conv6"),ee=d(R,T,"conv7"),te=f(T,5*t,1,"conv8");v={conv0:O,conv1:D,conv2:N,conv3:k,conv4:I,conv5:B,conv6:U,conv7:ee,conv8:te}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:v,paramMappings:u}}function Jq(n,e){var t=rs(n,e);function r(u){var c=t(u+"/sub",1),f=t(u+"/truediv",1);return{sub:c,truediv:f}}function a(u){var c=t(u+"/filters",4),f=t(u+"/bias",1);return{filters:c,bias:f}}function i(u){var c=a(u+"/conv"),f=r(u+"/bn");return{conv:c,bn:f}}var o=m1(t);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function eW(n,e){var t=[],r=Jq(n,t),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,u;if(e.withSeparableConvs){var c=e.filterSizes&&e.filterSizes.length||9;u={conv0:e.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:a("conv8")}}else u={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return Hi(n,t),{params:u,paramMappings:t}}var YC;(function(n){n[n.XS=224]="XS",n[n.SM=320]="SM",n[n.MD=416]="MD",n[n.LG=608]="LG"})(YC||(YC={}));var x1=function(){function n(e){var t=e===void 0?{}:e,r=t.inputSize,a=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n}(),Gk=function(n){Xe(e,n);function e(t){var r=n.call(this,"TinyYolov2")||this;return Xq(t),r._config=t,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,r){var a=yo(t,r.conv0);return a=En(a,[2,2],[2,2],"same"),a=yo(a,r.conv1),a=En(a,[2,2],[2,2],"same"),a=yo(a,r.conv2),a=En(a,[2,2],[2,2],"same"),a=yo(a,r.conv3),a=En(a,[2,2],[2,2],"same"),a=yo(a,r.conv4),a=En(a,[2,2],[2,2],"same"),a=yo(a,r.conv5),a=En(a,[2,2],[1,1],"same"),a=yo(a,r.conv6),a=yo(a,r.conv7),ya(a,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,r){var a=this.config.isFirstLayerConv2d?b1(ya(t,r.conv0,"valid",!1)):bo(t,r.conv0);return a=En(a,[2,2],[2,2],"same"),a=bo(a,r.conv1),a=En(a,[2,2],[2,2],"same"),a=bo(a,r.conv2),a=En(a,[2,2],[2,2],"same"),a=bo(a,r.conv3),a=En(a,[2,2],[2,2],"same"),a=bo(a,r.conv4),a=En(a,[2,2],[2,2],"same"),a=bo(a,r.conv5),a=En(a,[2,2],[1,1],"same"),a=r.conv6?bo(a,r.conv6):a,a=r.conv7?bo(a,r.conv7):a,ya(a,r.conv8,"valid",!1)},e.prototype.forwardInput=function(t,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Te(function(){var o=t.toBatchTensor(r,!1).toFloat();return o=a.config.meanRgb?Bh(o,a.config.meanRgb):o,o=o.div(we(256)),a.config.withSeparableConvs?a.runMobilenet(o,i):a.runTinyYolov2(o,i)})},e.prototype.forward=function(t,r){return Le(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,An(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},e.prototype.detect=function(t,r){return r===void 0&&(r={}),Le(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S=this;return Pe(this,function(C){switch(C.label){case 0:return a=new x1(r),i=a.inputSize,o=a.scoreThreshold,[4,An(t)];case 1:return u=C.sent(),[4,this.forwardInput(u,i)];case 2:return c=C.sent(),f=Te(function(){return vn(c)[0].expandDims()}),d={width:u.getInputWidth(0),height:u.getInputHeight(0)},[4,this.extractBoxes(f,u.getReshapedInputDimensions(0),o)];case 3:return p=C.sent(),c.dispose(),f.dispose(),v=p.map(function(R){return R.box}),g=p.map(function(R){return R.score}),y=p.map(function(R){return R.classScore}),x=p.map(function(R){return S.config.classes[R.label]}),w=hh(v.map(function(R){return R.rescale(i)}),g,this.config.iouThreshold,!0),_=w.map(function(R){return new gk(g[R],y[R],x[R],v[R],d)}),[2,_]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return eW(t,this.config)},e.prototype.extractParams=function(t){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return Zq(t,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(t,r,a){return Le(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N,k,I,B,U,ee,te,re,q,Z,G=this;return Pe(this,function(Y){switch(Y.label){case 0:return i=r.width,o=r.height,u=Math.max(i,o),c=u/i,f=u/o,d=t.shape[1],p=this.config.anchors.length,v=Te(function(){var F=t.reshape([d,d,p,G.boxEncodingSize]),K=F.slice([0,0,0,0],[d,d,p,4]),se=F.slice([0,0,0,4],[d,d,p,1]),fe=G.withClassScores?ji(F.slice([0,0,0,5],[d,d,p,G.config.classes.length]),3):we(0);return[K,se,fe]}),g=v[0],y=v[1],x=v[2],w=[],[4,y.array()];case 1:return _=Y.sent(),[4,g.array()];case 2:S=Y.sent(),C=0,Y.label=3;case 3:if(!(C<d))return[3,12];R=0,Y.label=4;case 4:if(!(R<d))return[3,11];T=0,Y.label=5;case 5:return T<p?(O=m0(_[C][R][T][0]),!a||O>a?(D=(R+m0(S[C][R][T][0]))/d*c,N=(C+m0(S[C][R][T][1]))/d*f,k=Math.exp(S[C][R][T][2])*this.config.anchors[T].x/d*c,I=Math.exp(S[C][R][T][3])*this.config.anchors[T].y/d*f,B=D-k/2,U=N-I/2,ee={row:C,col:R,anchor:T},this.withClassScores?[4,this.extractPredictedClass(x,ee)]:[3,7]):[3,9]):[3,10];case 6:return Z=Y.sent(),[3,8];case 7:Z={classScore:1,label:0},Y.label=8;case 8:te=Z,re=te.classScore,q=te.label,w.push(Hn({box:new rm(B,U,B+k,U+I),score:O,classScore:O*re,label:q},ee)),Y.label=9;case 9:return T++,[3,5];case 10:return R++,[3,4];case 11:return C++,[3,3];case 12:return g.dispose(),y.dispose(),x.dispose(),[2,w]}})})},e.prototype.extractPredictedClass=function(t,r){return Le(this,void 0,void 0,function(){var a,i,o,u;return Pe(this,function(c){switch(c.label){case 0:return a=r.row,i=r.col,o=r.anchor,[4,t.array()];case 1:return u=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(f,d){return u[a][i][o][d]}).map(function(f,d){return{classScore:f,label:d}}).reduce(function(f,d){return f.classScore>d.classScore?f:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Wi),tW=function(n){Xe(e,n);function e(t){t===void 0&&(t=!0);var r=this,a=Object.assign({},{withSeparableConvs:t,iouThreshold:Wq,classes:["face"]},t?{anchors:Gq,meanRgb:Qq}:{anchors:Hq,withClassScores:!0});return r=n.call(this,a)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Le(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new Ir(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Kq:$q},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(Gk),nW=function(n){Xe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return e}(x1),zh=function(){function n(){}return n.prototype.then=function(e){return Le(this,void 0,void 0,function(){var t;return Pe(this,function(r){switch(r.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Le(this,void 0,void 0,function(){return Pe(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},n}();function um(n,e,t,r,a){return a===void 0&&(a=function(i){var o=i.alignedRect;return o}),Le(this,void 0,void 0,function(){var i,o,u,c,f;return Pe(this,function(d){switch(d.label){case 0:return i=n.map(function(p){return Fk(p)?a(p):p.detection}),u=r,u?[3,5]:e instanceof jt?[4,d1(e,i)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,h1(e,i)];case 3:c=d.sent(),d.label=4;case 4:u=c,d.label=5;case 5:return o=u,[4,t(o)];case 6:return f=d.sent(),o.forEach(function(p){return p instanceof jt&&p.dispose()}),[2,f]}})})}function w1(n,e,t,r,a){return Le(this,void 0,void 0,function(){var i=this;return Pe(this,function(o){return[2,um([n],e,function(u){return Le(i,void 0,void 0,function(){return Pe(this,function(c){return[2,t(u[0])]})})},r,a)]})})}function rW(n){return Te(function(){return Nr(vn(n,3).reverse(),3)})}var wp=2,kv=12;function aW(n,e){var t=im(n,e),r=p1(n,e);function a(f,d){var p=sn(n(f));return e.push({paramPath:d}),p}function i(f,d,p){p===void 0&&(p=!1);var v=t(f[0],f[1],3,d+"/conv1"),g=a(f[1],d+"/prelu1_alpha"),y=t(f[1],f[2],3,d+"/conv2"),x=a(f[2],d+"/prelu2_alpha"),w=t(f[2],f[3],p?2:3,d+"/conv3"),_=a(f[3],d+"/prelu3_alpha");return{conv1:v,prelu1_alpha:g,conv2:y,prelu2_alpha:x,conv3:w,prelu3_alpha:_}}function o(){var f=i([3,10,16,32],"pnet"),d=t(32,2,1,"pnet/conv4_1"),p=t(32,4,1,"pnet/conv4_2");return Hn(Hn({},f),{conv4_1:d,conv4_2:p})}function u(){var f=i([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),p=a(128,"rnet/prelu4_alpha"),v=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return Hn(Hn({},f),{fc1:d,prelu4_alpha:p,fc2_1:v,fc2_2:g})}function c(){var f=i([3,32,64,64],"onet"),d=t(64,128,2,"onet/conv4"),p=a(128,"onet/prelu4_alpha"),v=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),x=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return Hn(Hn({},f),{conv4:d,prelu4_alpha:p,fc1:v,prelu5_alpha:g,fc2_1:y,fc2_2:x,fc2_3:w})}return{extractPNetParams:o,extractRNetParams:u,extractONetParams:c}}function iW(n){var e=Gi(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=aW(t,a),o=i.extractPNetParams,u=i.extractRNetParams,c=i.extractONetParams,f=o(),d=u(),p=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:f,rnet:d,onet:p},paramMappings:a}}function oW(n,e){var t=rs(n,e);function r(d){var p=t(d+"/weights",4,d+"/filters"),v=t(d+"/bias",1);return{filters:p,bias:v}}function a(d){var p=t(d+"/weights",2),v=t(d+"/bias",1);return{weights:p,bias:v}}function i(d){return t(d,1)}function o(d){var p=r(d+"/conv1"),v=i(d+"/prelu1_alpha"),g=r(d+"/conv2"),y=i(d+"/prelu2_alpha"),x=r(d+"/conv3"),w=i(d+"/prelu3_alpha");return{conv1:p,prelu1_alpha:v,conv2:g,prelu2_alpha:y,conv3:x,prelu3_alpha:w}}function u(){var d=o("pnet"),p=r("pnet/conv4_1"),v=r("pnet/conv4_2");return Hn(Hn({},d),{conv4_1:p,conv4_2:v})}function c(){var d=o("rnet"),p=a("rnet/fc1"),v=i("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),y=a("rnet/fc2_2");return Hn(Hn({},d),{fc1:p,prelu4_alpha:v,fc2_1:g,fc2_2:y})}function f(){var d=o("onet"),p=r("onet/conv4"),v=i("onet/prelu4_alpha"),g=a("onet/fc1"),y=i("onet/prelu5_alpha"),x=a("onet/fc2_1"),w=a("onet/fc2_2"),_=a("onet/fc2_3");return Hn(Hn({},d),{conv4:p,prelu4_alpha:v,fc1:g,prelu5_alpha:y,fc2_1:x,fc2_2:w,fc2_3:_})}return{extractPNetParams:u,extractRNetParams:c,extractONetParams:f}}function sW(n){var e=[],t=oW(n,e),r=t.extractPNetParams,a=t.extractRNetParams,i=t.extractONetParams,o=r(),u=a(),c=i();return Hi(n,e),{params:{pnet:o,rnet:u,onet:c},paramMappings:e}}function zb(n,e){var t=e[0],r=e[1];return{height:Math.floor(t*n),width:Math.floor(r*n)}}function uW(n,e,t){for(var r=t[0],a=t[1],i=kv/n,o=[],u=Math.min(r,a)*i,c=0;u>=12;)o.push(i*Math.pow(e,c)),u=u*e,c+=1;return o}var _1=function(n){Xe(e,n);function e(t,r,a,i){return n.call(this,{left:t,top:r,right:a,bottom:i},!0)||this}return e}(Ja);function Qk(n){return Te(function(){return $n(gn(n,we(127.5)),we(.0078125))})}function El(n,e){return Te(function(){return ut(qt(n),$n(e,Sv(qt(Sv(n)))))})}function E1(n,e,t){return t===void 0&&(t=!1),Te(function(){var r=ya(n,e.conv1,"valid");return r=El(r,e.prelu1_alpha),r=En(r,t?[2,2]:[3,3],[2,2],"same"),r=ya(r,e.conv2,"valid"),r=El(r,e.prelu2_alpha),r=t?r:En(r,[3,3],[2,2],"valid"),r=ya(r,e.conv3,"valid"),r=El(r,e.prelu3_alpha),r})}function lW(n,e){return Te(function(){var t=E1(n,e,!0),r=ya(t,e.conv4_1,"valid"),a=$r(Jv(r,3),3),i=ji(gn(r,a),3),o=ya(t,e.conv4_2,"valid");return{prob:i,regions:o}})}function cW(n,e){return Te(function(){var t=zb(e,n.shape.slice(1)),r=t.height,a=t.width,i=Zx.resizeBilinear(n,[r,a]),o=Qk(i);return Ko(o,[0,2,1,3])})}function fW(n,e,t,r){for(var a=[],i=n.arraySync(),o=0;o<n.shape[0];o++)for(var u=0;u<n.shape[1];u++)i[o][u]>=r&&a.push(new _t(u,o));var c=a.map(function(f){var d=new rm(Math.round((f.y*wp+1)/t),Math.round((f.x*wp+1)/t),Math.round((f.y*wp+kv)/t),Math.round((f.x*wp+kv)/t)),p=i[f.y][f.x],v=e.arraySync(),g=new _1(v[f.y][f.x][0],v[f.y][f.x][1],v[f.y][f.x][2],v[f.y][f.x][3]);return{cell:d,score:p,region:g}});return c}function hW(n,e,t,r,a){a.stage1=[];var i=e.map(function(v){return Te(function(){var g={scale:v},y=cW(n,v),x=Date.now(),w=lW(y,r),_=w.prob,S=w.regions;g.pnet=Date.now()-x;var C=vn(vn(_,3)[1])[0],R=vn(S)[0];return{scoresTensor:C,regionsTensor:R,scale:v,statsForScale:g}})}),o=i.map(function(v){var g=v.scoresTensor,y=v.regionsTensor,x=v.scale,w=v.statsForScale,_=fW(g,y,x,t);if(g.dispose(),y.dispose(),!_.length)return a.stage1.push(w),[];var S=Date.now(),C=hh(_.map(function(R){return R.cell}),_.map(function(R){return R.score}),.5);return w.nms=Date.now()-S,w.numBoxes=C.length,a.stage1.push(w),C.map(function(R){return _[R]})}),u=o.reduce(function(v,g){return v.concat(g)},[]),c=[],f=[];if(u.length>0){var d=Date.now(),p=hh(u.map(function(v){return v.cell}),u.map(function(v){return v.score}),.7);a.stage1_nms=Date.now()-d,f=p.map(function(v){return u[v].score}),c=p.map(function(v){return u[v]}).map(function(v){var g=v.cell,y=v.region;return new rm(g.left+y.left*g.width,g.top+y.top*g.height,g.right+y.right*g.width,g.bottom+y.bottom*g.height).toSquare().round()})}return{boxes:c,scores:f}}function $k(n,e,t){var r=t.width,a=t.height;return Le(this,void 0,void 0,function(){var i,o,u,c=this;return Pe(this,function(f){switch(f.label){case 0:return i=Bi(n),[4,Promise.all(e.map(function(d){return Le(c,void 0,void 0,function(){var p,v,g,y,x,w,_,S;return Pe(this,function(C){return p=d.padAtBorders(n.height,n.width),v=p.y,g=p.ey,y=p.x,x=p.ex,w=y-1,_=v-1,S=i.getImageData(w,_,x-w,g-_),[2,Xn.isNodejs()?f1(S):createImageBitmap(S)]})})}))];case 1:return o=f.sent(),u=[],o.forEach(function(d){var p=am({width:r,height:a}),v=Bi(p);v.drawImage(d,0,0,r,a);for(var g=v.getImageData(0,0,r,a).data,y=[],x=0;x<g.length;x+=4)y.push(g[x+2]),y.push(g[x+1]),y.push(g[x]);u.push(y)}),[2,u.map(function(d){var p=Te(function(){var v=Ko(hr(d,[1,r,a,3]),[0,2,1,3]).toFloat();return Qk(v)});return p})]}})})}function dW(n,e){return Te(function(){var t=E1(n,e),r=pa(t,[t.shape[0],e.fc1.weights.shape[0]]),a=Wa(r,e.fc1),i=El(a,e.prelu4_alpha),o=Wa(i,e.fc2_1),u=$r(Jv(o,1),1),c=ji(gn(o,u),1),f=Wa(i,e.fc2_2),d=vn(c,1)[1];return{scores:d,regions:f}})}function pW(n,e,t,r,a){return Le(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S;return Pe(this,function(C){switch(C.label){case 0:return i=Date.now(),[4,$k(n,e,{width:24,height:24})];case 1:return o=C.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(R){var T=dW(R,r);return R.dispose(),T}),a.stage2_rnet=Date.now()-i,c=u.length>1?pn(u.map(function(R){return R.scores})):u[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[C.sent()]),c.dispose(),v=f.map(function(R,T){return{score:R,idx:T}}).filter(function(R){return R.score>t}).map(function(R){var T=R.idx;return T}),g=v.map(function(R){return e[R]}),y=v.map(function(R){return f[R]}),x=[],w=[],g.length>0&&(i=Date.now(),_=hh(g,y,.7),a.stage2_nms=Date.now()-i,S=_.map(function(R){var T=u[v[R]].regions.arraySync();return new _1(T[0][0],T[0][1],T[0][2],T[0][3])}),w=_.map(function(R){return y[R]}),x=_.map(function(R,T){return g[R].calibrate(S[T])})),u.forEach(function(R){R.regions.dispose(),R.scores.dispose()}),[2,{boxes:x,scores:w}]}})})}function vW(n,e){return Te(function(){var t=E1(n,e);t=En(t,[2,2],[2,2],"same"),t=ya(t,e.conv4,"valid"),t=El(t,e.prelu4_alpha);var r=pa(t,[t.shape[0],e.fc1.weights.shape[0]]),a=Wa(r,e.fc1),i=El(a,e.prelu5_alpha),o=Wa(i,e.fc2_1),u=$r(Jv(o,1),1),c=ji(gn(o,u),1),f=Wa(i,e.fc2_2),d=Wa(i,e.fc2_3),p=vn(c,1)[1];return{scores:p,regions:f,points:d}})}function mW(n,e,t,r,a){return Le(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S,C;return Pe(this,function(R){switch(R.label){case 0:return i=Date.now(),[4,$k(n,e,{width:48,height:48})];case 1:return o=R.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(T){var O=vW(T,r);return T.dispose(),O}),a.stage3_onet=Date.now()-i,c=u.length>1?pn(u.map(function(T){return T.scores})):u[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[R.sent()]),c.dispose(),v=f.map(function(T,O){return{score:T,idx:O}}).filter(function(T){return T.score>t}).map(function(T){var O=T.idx;return O}),g=v.map(function(T){var O=u[T].regions.arraySync();return new _1(O[0][0],O[0][1],O[0][2],O[0][3])}),y=v.map(function(T,O){return e[T].calibrate(g[O])}),x=v.map(function(T){return f[T]}),w=[],_=[],S=[],y.length>0&&(i=Date.now(),C=hh(y,x,.7,!1),a.stage3_nms=Date.now()-i,w=C.map(function(T){return y[T]}),_=C.map(function(T){return x[T]}),S=C.map(function(T,O){return Array(5).fill(0).map(function(D,N){var k=u[T].points.arraySync();return new _t(k[0][N]*(w[O].width+1)+w[O].left,k[0][N+5]*(w[O].height+1)+w[O].top)})})),u.forEach(function(T){T.regions.dispose(),T.scores.dispose(),T.points.dispose()}),[2,{boxes:w,scores:_,points:S}]}})})}var gW=function(n){Xe(e,n);function e(){return n.call(this,"Mtcnn")||this}return e.prototype.load=function(t){return Le(this,void 0,void 0,function(){return Pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,t)]})})},e.prototype.loadFromDisk=function(t){return Le(this,void 0,void 0,function(){return Pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,t)]})})},e.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Le(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return Pe(this,function(k){switch(k.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=t.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},u=Date.now(),c=Te(function(){return rW($r(a1.fromPixels(i)).toFloat())}),f=function(I){return c.dispose(),o.total=Date.now()-u,I},d=c.shape.slice(1),p=d[0],v=d[1],g=new Wk(r),y=g.minFaceSize,x=g.scaleFactor,w=g.maxNumScales,_=g.scoreThresholds,S=g.scaleSteps,C=(S||uW(y,x,[p,v])).filter(function(I){var B=zb(I,[p,v]);return Math.min(B.width,B.height)>kv}).slice(0,w),o.scales=C,o.pyramid=C.map(function(I){return zb(I,[p,v])}),R=Date.now(),[4,hW(c,C,_[0],a.pnet,o)];case 1:return T=k.sent(),o.total_stage1=Date.now()-R,T.boxes.length?(o.stage2_numInputBoxes=T.boxes.length,R=Date.now(),[4,pW(i,T.boxes,_[1],a.rnet,o)]):[2,f({results:[],stats:o})];case 2:return O=k.sent(),o.total_stage2=Date.now()-R,O.boxes.length?(o.stage3_numInputBoxes=O.boxes.length,R=Date.now(),[4,mW(i,O.boxes,_[2],a.onet,o)]):[2,f({results:[],stats:o})];case 3:return D=k.sent(),o.total_stage3=Date.now()-R,N=D.boxes.map(function(I,B){return om(vh({},new Ir(D.scores[B],new s1(I.left/v,I.top/p,I.width/v,I.height/p),{height:p,width:v})),new G6(D.points[B].map(function(U){return U.sub(new _t(I.left,I.top)).div(new _t(I.width,I.height))}),{width:I.width,height:I.height}))}),[2,f({results:N,stats:o})]}})})},e.prototype.forward=function(t,r){return r===void 0&&(r={}),Le(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,An(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},e.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Le(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,An(t)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return sW(t)},e.prototype.extractParams=function(t){return iW(t)},e}(Wi),yW=.4,bW=[new _t(1.603231,2.094468),new _t(6.041143,7.080126),new _t(2.882459,3.518061),new _t(4.266906,5.178857),new _t(9.041765,10.66308)],xW=[117.001,114.697,97.404],wW=function(n){Xe(e,n);function e(){var t=this,r={withSeparableConvs:!0,iouThreshold:yW,classes:["face"],anchors:bW,meanRgb:xW,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=n.call(this,r)||this,t}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Le(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new Ir(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(Gk),Yr={ssdMobilenetv1:new Hk,tinyFaceDetector:new wW,tinyYolov2:new tW,mtcnn:new gW,faceLandmark68Net:new Bk,faceLandmark68TinyNet:new _q,faceRecognitionNet:new Aq,faceExpressionNet:new uq,ageGenderNet:new yq},Kk=function(n){Xe(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(zh),S1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r,a=this;return Pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,um(t,this.input,function(o){return Le(a,void 0,void 0,function(){return Pe(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return Yr.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){return Mk(o,r[u])})]}})})},e.prototype.withAgeAndGender=function(){return new O1(this,this.input)},e}(Kk),C1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,w1(t,this.input,function(i){return Yr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,Mk(t,r)]}})})},e.prototype.withAgeAndGender=function(){return new A1(this,this.input)},e}(Kk),R1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new k1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new N1(this,this.input)},e}(S1),T1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new D1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new I1(this,this.input)},e}(C1),Xk=function(n){Xe(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(zh),O1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r,a=this;return Pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,um(t,this.input,function(o){return Le(a,void 0,void 0,function(){return Pe(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return Yr.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){var c=r[u],f=c.age,d=c.gender,p=c.genderProbability;return jk(qk(o,d,p),f)})]}})})},e.prototype.withFaceExpressions=function(){return new S1(this,this.input)},e}(Xk),A1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r,a,i,o;return Pe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?[4,w1(t,this.input,function(c){return Yr.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=u.sent(),a=r.age,i=r.gender,o=r.genderProbability,[2,jk(qk(t,i,o),a)]}})})},e.prototype.withFaceExpressions=function(){return new C1(this,this.input)},e}(Xk),k1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new R1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new N1(this,this.input)},e}(O1),D1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new T1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new I1(this,this.input)},e}(A1),Yk=function(n){Xe(e,n);function e(t,r){var a=n.call(this)||this;return a.parentTask=t,a.input=r,a}return e}(zh),N1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,um(t,this.input,function(i){return Promise.all(i.map(function(o){return Yr.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,o){return Vk(t[o],i)})]}})})},e.prototype.withFaceExpressions=function(){return new R1(this,this.input)},e.prototype.withAgeAndGender=function(){return new k1(this,this.input)},e}(Yk),I1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,w1(t,this.input,function(i){return Yr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,Vk(t,r)]}})})},e.prototype.withFaceExpressions=function(){return new T1(this,this.input)},e.prototype.withAgeAndGender=function(){return new D1(this,this.input)},e}(Yk),Zk=function(n){Xe(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Yr.faceLandmark68TinyNet:Yr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(zh),_W=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return Pe(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return t=c.sent(),r=t.map(function(f){return f.detection}),this.input instanceof jt?[4,d1(this.input,r)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,h1(this.input,r)];case 4:i=c.sent(),c.label=5;case 5:return a=i,[4,Promise.all(a.map(function(f){return u.landmarkNet.detectLandmarks(f)}))];case 6:return o=c.sent(),a.forEach(function(f){return f instanceof jt&&f.dispose()}),[2,t.map(function(f,d){return om(f,o[d])})]}})})},e.prototype.withFaceExpressions=function(){return new R1(this,this.input)},e.prototype.withAgeAndGender=function(){return new k1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new N1(this,this.input)},e}(Zk),EW=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r,a,i,o;return Pe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?(r=t.detection,this.input instanceof jt?[4,d1(this.input,[r])]:[3,3]):[2];case 2:return i=u.sent(),[3,5];case 3:return[4,h1(this.input,[r])];case 4:i=u.sent(),u.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=u.sent(),a.forEach(function(c){return c instanceof jt&&c.dispose()}),[2,om(t,o)]}})})},e.prototype.withFaceExpressions=function(){return new T1(this,this.input)},e.prototype.withAgeAndGender=function(){return new D1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new I1(this,this.input)},e}(Zk),Jk=function(n){Xe(e,n);function e(t,r){r===void 0&&(r=new sm);var a=n.call(this)||this;return a.input=t,a.options=r,a}return e}(zh),eD=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r,a,i;return Pe(this,function(o){switch(o.label){case 0:return t=this,r=t.input,a=t.options,a instanceof Wk?[4,Yr.mtcnn.forward(r,a)]:[3,2];case 1:return[2,o.sent().map(function(u){return u.detection})];case 2:if(i=a instanceof nW?function(u){return Yr.tinyFaceDetector.locateFaces(u,a)}:a instanceof sm?function(u){return Yr.ssdMobilenetv1.locateFaces(u,a)}:a instanceof x1?function(u){return Yr.tinyYolov2.locateFaces(u,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Le(t,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(o){return vh({},o)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new _W(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new S1(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new O1(this.runAndExtendWithFaceDetections(),this.input)},e}(Jk);(function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Le(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,new eD(this.input,this.options)];case 1:return t=a.sent(),r=t[0],t.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Le(t,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?vh({},a):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new EW(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new C1(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new A1(this.runAndExtendWithFaceDetection(),this.input)},e})(Jk);function G9(n,e){return e===void 0&&(e=new sm),new eD(n,e)}function SW(n,e){if(n.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(n),r=Array.from(e);return Math.sqrt(t.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}(function(){function n(e,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(o){if(o instanceof gp)return o;if(o instanceof Float32Array)return new gp(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new gp(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(e,t){return t.map(function(r){return SW(r,e)}).reduce(function(r,a){return r+a},0)/(t.length||1)},n.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new QC(i,t.computeMeanDistance(e,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},n.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new QC("unknown",t.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},n.fromJSON=function(e){var t=e.labeledDescriptors.map(function(r){return gp.fromJSON(r)});return new n(t,e.distanceThreshold)},n})();function CW(n,e){var t=new $s(e.width,e.height),r=t.width,a=t.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(n))return n.map(function(u){return CW(u,{width:r,height:a})});if(Fk(n)){var i=n.detection.forSize(r,a),o=n.unshiftedLandmarks.forSize(i.box.width,i.box.height);return om(vh(n,i),o)}return ph(n)?vh(n,n.detection.forSize(r,a)):n instanceof dh||n instanceof Ir?n.forSize(r,a):n}var b0="Invariant Violation",ZC=Object.setPrototypeOf,RW=ZC===void 0?function(n,e){return n.__proto__=e,n}:ZC,tD=function(n){ni(e,n);function e(t){t===void 0&&(t=b0);var r=n.call(this,typeof t=="number"?b0+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return r.framesToPop=1,r.name=b0,RW(r,e.prototype),r}return e}(Error);function Ds(n,e){if(!n)throw new tD(e)}var nD=["debug","log","warn","error","silent"],TW=nD.indexOf("log");function _p(n){return function(){if(nD.indexOf(n)>=TW){var e=console[n]||console.log;return e.apply(console,arguments)}}}(function(n){n.debug=_p("debug"),n.log=_p("log"),n.warn=_p("warn"),n.error=_p("error")})(Ds||(Ds={}));var M1="3.13.5";function ha(n){try{return n()}catch{}}const Ub=ha(function(){return globalThis})||ha(function(){return window})||ha(function(){return self})||ha(function(){return global})||ha(function(){return ha.constructor("return this")()});var JC=new Map;function Vb(n){var e=JC.get(n)||1;return JC.set(n,e+1),"".concat(n,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function rD(n,e){e===void 0&&(e=0);var t=Vb("stringifyForDisplay");return JSON.stringify(n,function(r,a){return a===void 0?t:a},e).split(JSON.stringify(t)).join("<undefined>")}function Ep(n){return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(typeof e=="number"){var a=e;e=F1(a),e||(e=L1(a,t),t=[])}n.apply(void 0,[e].concat(t))}}var Ce=Object.assign(function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];e||Ds(e,F1(t,r)||L1(t,r))},{debug:Ep(Ds.debug),log:Ep(Ds.log),warn:Ep(Ds.warn),error:Ep(Ds.error)});function ar(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new tD(F1(n,e)||L1(n,e))}var eR=Symbol.for("ApolloErrorMessageHandler_"+M1);function aD(n){if(typeof n=="string")return n;try{return rD(n,2).slice(0,1e3)}catch{return"<non-serializable>"}}function F1(n,e){if(e===void 0&&(e=[]),!!n)return Ub[eR]&&Ub[eR](n,e.map(aD))}function L1(n,e){if(e===void 0&&(e=[]),!!n)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:M1,message:n,args:e.map(aD)})))}function Fp(n,e){if(!!!n)throw new Error(e)}function OW(n){return typeof n=="object"&&n!==null}function AW(n,e){if(!!!n)throw new Error("Unexpected invariant triggered.")}const kW=/\r\n|[\n\r]/g;function jb(n,e){let t=0,r=1;for(const a of n.body.matchAll(kW)){if(typeof a.index=="number"||AW(!1),a.index>=e)break;t=a.index+a[0].length,r+=1}return{line:r,column:e+1-t}}function DW(n){return iD(n.source,jb(n.source,n.start))}function iD(n,e){const t=n.locationOffset.column-1,r="".padStart(t)+n.body,a=e.line-1,i=n.locationOffset.line-1,o=e.line+i,u=e.line===1?t:0,c=e.column+u,f=`${n.name}:${o}:${c}
`,d=r.split(/\r\n|[\n\r]/g),p=d[a];if(p.length>120){const v=Math.floor(c/80),g=c%80,y=[];for(let x=0;x<p.length;x+=80)y.push(p.slice(x,x+80));return f+tR([[`${o} |`,y[0]],...y.slice(1,v+1).map(x=>["|",x]),["|","^".padStart(g)],["|",y[v+1]]])}return f+tR([[`${o-1} |`,d[a-1]],[`${o} |`,p],["|","^".padStart(c)],[`${o+1} |`,d[a+1]]])}function tR(n){const e=n.filter(([r,a])=>a!==void 0),t=Math.max(...e.map(([r])=>r.length));return e.map(([r,a])=>r.padStart(t)+(a?" "+a:"")).join(`
`)}function NW(n){const e=n[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:e}class P1 extends Error{constructor(e,...t){var r,a,i;const{nodes:o,source:u,positions:c,path:f,originalError:d,extensions:p}=NW(t);super(e),this.name="GraphQLError",this.path=f??void 0,this.originalError=d??void 0,this.nodes=nR(Array.isArray(o)?o:o?[o]:void 0);const v=nR((r=this.nodes)===null||r===void 0?void 0:r.map(y=>y.loc).filter(y=>y!=null));this.source=u??(v==null||(a=v[0])===null||a===void 0?void 0:a.source),this.positions=c??(v==null?void 0:v.map(y=>y.start)),this.locations=c&&u?c.map(y=>jb(u,y)):v==null?void 0:v.map(y=>jb(y.source,y.start));const g=OW(d==null?void 0:d.extensions)?d==null?void 0:d.extensions:void 0;this.extensions=(i=p??g)!==null&&i!==void 0?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),d!=null&&d.stack?Object.defineProperty(this,"stack",{value:d.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,P1):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+DW(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+iD(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function nR(n){return n===void 0||n.length===0?void 0:n}function Rn(n,e,t){return new P1(`Syntax Error: ${t}`,{source:n,positions:[e]})}class IW{constructor(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class oD{constructor(e,t,r,a,i,o){this.kind=e,this.start=t,this.end=r,this.line=a,this.column=i,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const sD={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},MW=new Set(Object.keys(sD));function rR(n){const e=n==null?void 0:n.kind;return typeof e=="string"&&MW.has(e)}var fl;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(fl||(fl={}));var qb;(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(qb||(qb={}));var Ee;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Ee||(Ee={}));function Wb(n){return n===9||n===32}function mh(n){return n>=48&&n<=57}function uD(n){return n>=97&&n<=122||n>=65&&n<=90}function lD(n){return uD(n)||n===95}function FW(n){return uD(n)||mh(n)||n===95}function LW(n){var e;let t=Number.MAX_SAFE_INTEGER,r=null,a=-1;for(let o=0;o<n.length;++o){var i;const u=n[o],c=PW(u);c!==u.length&&(r=(i=r)!==null&&i!==void 0?i:o,a=o,o!==0&&c<t&&(t=c))}return n.map((o,u)=>u===0?o:o.slice(t)).slice((e=r)!==null&&e!==void 0?e:0,a+1)}function PW(n){let e=0;for(;e<n.length&&Wb(n.charCodeAt(e));)++e;return e}function BW(n,e){const t=n.replace(/"""/g,'\\"""'),r=t.split(/\r\n|[\n\r]/g),a=r.length===1,i=r.length>1&&r.slice(1).every(g=>g.length===0||Wb(g.charCodeAt(0))),o=t.endsWith('\\"""'),u=n.endsWith('"')&&!o,c=n.endsWith("\\"),f=u||c,d=!a||n.length>70||f||i||o;let p="";const v=a&&Wb(n.charCodeAt(0));return(d&&!v||i)&&(p+=`
`),p+=t,(d||f)&&(p+=`
`),'"""'+p+'"""'}var pe;(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"})(pe||(pe={}));class zW{constructor(e){const t=new oD(pe.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==pe.EOF)do if(e.next)e=e.next;else{const t=VW(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===pe.COMMENT);return e}}function UW(n){return n===pe.BANG||n===pe.DOLLAR||n===pe.AMP||n===pe.PAREN_L||n===pe.PAREN_R||n===pe.SPREAD||n===pe.COLON||n===pe.EQUALS||n===pe.AT||n===pe.BRACKET_L||n===pe.BRACKET_R||n===pe.BRACE_L||n===pe.PIPE||n===pe.BRACE_R}function cc(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function lm(n,e){return cD(n.charCodeAt(e))&&fD(n.charCodeAt(e+1))}function cD(n){return n>=55296&&n<=56319}function fD(n){return n>=56320&&n<=57343}function ru(n,e){const t=n.source.body.codePointAt(e);if(t===void 0)return pe.EOF;if(t>=32&&t<=126){const r=String.fromCodePoint(t);return r==='"'?`'"'`:`"${r}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function an(n,e,t,r,a){const i=n.line,o=1+t-n.lineStart;return new oD(e,t,r,i,o,a)}function VW(n,e){const t=n.source.body,r=t.length;let a=e;for(;a<r;){const i=t.charCodeAt(a);switch(i){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++n.line,n.lineStart=a;continue;case 13:t.charCodeAt(a+1)===10?a+=2:++a,++n.line,n.lineStart=a;continue;case 35:return jW(n,a);case 33:return an(n,pe.BANG,a,a+1);case 36:return an(n,pe.DOLLAR,a,a+1);case 38:return an(n,pe.AMP,a,a+1);case 40:return an(n,pe.PAREN_L,a,a+1);case 41:return an(n,pe.PAREN_R,a,a+1);case 46:if(t.charCodeAt(a+1)===46&&t.charCodeAt(a+2)===46)return an(n,pe.SPREAD,a,a+3);break;case 58:return an(n,pe.COLON,a,a+1);case 61:return an(n,pe.EQUALS,a,a+1);case 64:return an(n,pe.AT,a,a+1);case 91:return an(n,pe.BRACKET_L,a,a+1);case 93:return an(n,pe.BRACKET_R,a,a+1);case 123:return an(n,pe.BRACE_L,a,a+1);case 124:return an(n,pe.PIPE,a,a+1);case 125:return an(n,pe.BRACE_R,a,a+1);case 34:return t.charCodeAt(a+1)===34&&t.charCodeAt(a+2)===34?$W(n,a):WW(n,a)}if(mh(i)||i===45)return qW(n,a,i);if(lD(i))return KW(n,a);throw Rn(n.source,a,i===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:cc(i)||lm(t,a)?`Unexpected character: ${ru(n,a)}.`:`Invalid character: ${ru(n,a)}.`)}return an(n,pe.EOF,r,r)}function jW(n,e){const t=n.source.body,r=t.length;let a=e+1;for(;a<r;){const i=t.charCodeAt(a);if(i===10||i===13)break;if(cc(i))++a;else if(lm(t,a))a+=2;else break}return an(n,pe.COMMENT,e,a,t.slice(e+1,a))}function qW(n,e,t){const r=n.source.body;let a=e,i=t,o=!1;if(i===45&&(i=r.charCodeAt(++a)),i===48){if(i=r.charCodeAt(++a),mh(i))throw Rn(n.source,a,`Invalid number, unexpected digit after 0: ${ru(n,a)}.`)}else a=x0(n,a,i),i=r.charCodeAt(a);if(i===46&&(o=!0,i=r.charCodeAt(++a),a=x0(n,a,i),i=r.charCodeAt(a)),(i===69||i===101)&&(o=!0,i=r.charCodeAt(++a),(i===43||i===45)&&(i=r.charCodeAt(++a)),a=x0(n,a,i),i=r.charCodeAt(a)),i===46||lD(i))throw Rn(n.source,a,`Invalid number, expected digit but got: ${ru(n,a)}.`);return an(n,o?pe.FLOAT:pe.INT,e,a,r.slice(e,a))}function x0(n,e,t){if(!mh(t))throw Rn(n.source,e,`Invalid number, expected digit but got: ${ru(n,e)}.`);const r=n.source.body;let a=e+1;for(;mh(r.charCodeAt(a));)++a;return a}function WW(n,e){const t=n.source.body,r=t.length;let a=e+1,i=a,o="";for(;a<r;){const u=t.charCodeAt(a);if(u===34)return o+=t.slice(i,a),an(n,pe.STRING,e,a+1,o);if(u===92){o+=t.slice(i,a);const c=t.charCodeAt(a+1)===117?t.charCodeAt(a+2)===123?HW(n,a):GW(n,a):QW(n,a);o+=c.value,a+=c.size,i=a;continue}if(u===10||u===13)break;if(cc(u))++a;else if(lm(t,a))a+=2;else throw Rn(n.source,a,`Invalid character within String: ${ru(n,a)}.`)}throw Rn(n.source,a,"Unterminated string.")}function HW(n,e){const t=n.source.body;let r=0,a=3;for(;a<12;){const i=t.charCodeAt(e+a++);if(i===125){if(a<5||!cc(r))break;return{value:String.fromCodePoint(r),size:a}}if(r=r<<4|kf(i),r<0)break}throw Rn(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+a)}".`)}function GW(n,e){const t=n.source.body,r=aR(t,e+2);if(cc(r))return{value:String.fromCodePoint(r),size:6};if(cD(r)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const a=aR(t,e+8);if(fD(a))return{value:String.fromCodePoint(r,a),size:12}}throw Rn(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function aR(n,e){return kf(n.charCodeAt(e))<<12|kf(n.charCodeAt(e+1))<<8|kf(n.charCodeAt(e+2))<<4|kf(n.charCodeAt(e+3))}function kf(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function QW(n,e){const t=n.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Rn(n.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function $W(n,e){const t=n.source.body,r=t.length;let a=n.lineStart,i=e+3,o=i,u="";const c=[];for(;i<r;){const f=t.charCodeAt(i);if(f===34&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34){u+=t.slice(o,i),c.push(u);const d=an(n,pe.BLOCK_STRING,e,i+3,LW(c).join(`
`));return n.line+=c.length-1,n.lineStart=a,d}if(f===92&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34&&t.charCodeAt(i+3)===34){u+=t.slice(o,i),o=i+1,i+=4;continue}if(f===10||f===13){u+=t.slice(o,i),c.push(u),f===13&&t.charCodeAt(i+1)===10?i+=2:++i,u="",o=i,a=i;continue}if(cc(f))++i;else if(lm(t,i))i+=2;else throw Rn(n.source,i,`Invalid character within String: ${ru(n,i)}.`)}throw Rn(n.source,i,"Unterminated string.")}function KW(n,e){const t=n.source.body,r=t.length;let a=e+1;for(;a<r;){const i=t.charCodeAt(a);if(FW(i))++a;else break}return an(n,pe.NAME,e,a,t.slice(e,a))}const XW=10,hD=2;function B1(n){return cm(n,[])}function cm(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return YW(n,e);default:return String(n)}}function YW(n,e){if(n===null)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(ZW(n)){const r=n.toJSON();if(r!==n)return typeof r=="string"?r:cm(r,t)}else if(Array.isArray(n))return eH(n,t);return JW(n,t)}function ZW(n){return typeof n.toJSON=="function"}function JW(n,e){const t=Object.entries(n);return t.length===0?"{}":e.length>hD?"["+tH(n)+"]":"{ "+t.map(([a,i])=>a+": "+cm(i,e)).join(", ")+" }"}function eH(n,e){if(n.length===0)return"[]";if(e.length>hD)return"[Array]";const t=Math.min(XW,n.length),r=n.length-t,a=[];for(let i=0;i<t;++i)a.push(cm(n[i],e));return r===1?a.push("... 1 more item"):r>1&&a.push(`... ${r} more items`),"["+a.join(", ")+"]"}function tH(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof n.constructor=="function"){const t=n.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const nH=globalThis.process&&!0,rH=nH?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var r;const a=t.prototype[Symbol.toStringTag],i=Symbol.toStringTag in e?e[Symbol.toStringTag]:(r=e.constructor)===null||r===void 0?void 0:r.name;if(a===i){const o=B1(e);throw new Error(`Cannot use ${a} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class dD{constructor(e,t="GraphQL request",r={line:1,column:1}){typeof e=="string"||Fp(!1,`Body must be a string. Received: ${B1(e)}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||Fp(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Fp(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function aH(n){return rH(n,dD)}function iH(n,e){const t=new oH(n,e),r=t.parseDocument();return Object.defineProperty(r,"tokenCount",{enumerable:!1,value:t.tokenCount}),r}class oH{constructor(e,t={}){const r=aH(e)?e:new dD(e);this._lexer=new zW(r),this._options=t,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(pe.NAME);return this.node(e,{kind:Ee.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:Ee.DOCUMENT,definitions:this.many(pe.SOF,this.parseDefinition,pe.EOF)})}parseDefinition(){if(this.peek(pe.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===pe.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Rn(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(pe.BRACE_L))return this.node(e,{kind:Ee.OPERATION_DEFINITION,operation:fl.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let r;return this.peek(pe.NAME)&&(r=this.parseName()),this.node(e,{kind:Ee.OPERATION_DEFINITION,operation:t,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(pe.NAME);switch(e.value){case"query":return fl.QUERY;case"mutation":return fl.MUTATION;case"subscription":return fl.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(pe.PAREN_L,this.parseVariableDefinition,pe.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Ee.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(pe.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(pe.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(pe.DOLLAR),this.node(e,{kind:Ee.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Ee.SELECTION_SET,selections:this.many(pe.BRACE_L,this.parseSelection,pe.BRACE_R)})}parseSelection(){return this.peek(pe.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let r,a;return this.expectOptionalToken(pe.COLON)?(r=t,a=this.parseName()):a=t,this.node(e,{kind:Ee.FIELD,alias:r,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(pe.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(pe.PAREN_L,t,pe.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,r=this.parseName();return this.expectToken(pe.COLON),this.node(t,{kind:Ee.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(pe.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(pe.NAME)?this.node(e,{kind:Ee.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:Ee.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:Ee.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:Ee.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case pe.BRACKET_L:return this.parseList(e);case pe.BRACE_L:return this.parseObject(e);case pe.INT:return this.advanceLexer(),this.node(t,{kind:Ee.INT,value:t.value});case pe.FLOAT:return this.advanceLexer(),this.node(t,{kind:Ee.FLOAT,value:t.value});case pe.STRING:case pe.BLOCK_STRING:return this.parseStringLiteral();case pe.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:Ee.BOOLEAN,value:!0});case"false":return this.node(t,{kind:Ee.BOOLEAN,value:!1});case"null":return this.node(t,{kind:Ee.NULL});default:return this.node(t,{kind:Ee.ENUM,value:t.value})}case pe.DOLLAR:if(e)if(this.expectToken(pe.DOLLAR),this._lexer.token.kind===pe.NAME){const r=this._lexer.token.value;throw Rn(this._lexer.source,t.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:Ee.STRING,value:e.value,block:e.kind===pe.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:Ee.LIST,values:this.any(pe.BRACKET_L,t,pe.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:Ee.OBJECT,fields:this.any(pe.BRACE_L,t,pe.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,r=this.parseName();return this.expectToken(pe.COLON),this.node(t,{kind:Ee.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(pe.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(pe.AT),this.node(t,{kind:Ee.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(pe.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(pe.BRACKET_R),t=this.node(e,{kind:Ee.LIST_TYPE,type:r})}else t=this.parseNamedType();return this.expectOptionalToken(pe.BANG)?this.node(e,{kind:Ee.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:Ee.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(pe.STRING)||this.peek(pe.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),a=this.many(pe.BRACE_L,this.parseOperationTypeDefinition,pe.BRACE_R);return this.node(e,{kind:Ee.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:a})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(pe.COLON);const r=this.parseNamedType();return this.node(e,{kind:Ee.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),a=this.parseConstDirectives();return this.node(e,{kind:Ee.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:a})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Ee.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:a,directives:i,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(pe.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(pe.BRACE_L,this.parseFieldDefinition,pe.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),a=this.parseArgumentDefs();this.expectToken(pe.COLON);const i=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:Ee.FIELD_DEFINITION,description:t,name:r,arguments:a,type:i,directives:o})}parseArgumentDefs(){return this.optionalMany(pe.PAREN_L,this.parseInputValueDef,pe.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName();this.expectToken(pe.COLON);const a=this.parseTypeReference();let i;this.expectOptionalToken(pe.EQUALS)&&(i=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:Ee.INPUT_VALUE_DEFINITION,description:t,name:r,type:a,defaultValue:i,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Ee.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:a,directives:i,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:Ee.UNION_TYPE_DEFINITION,description:t,name:r,directives:a,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(pe.EQUALS)?this.delimitedMany(pe.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:Ee.ENUM_TYPE_DEFINITION,description:t,name:r,directives:a,values:i})}parseEnumValuesDefinition(){return this.optionalMany(pe.BRACE_L,this.parseEnumValueDefinition,pe.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),a=this.parseConstDirectives();return this.node(e,{kind:Ee.ENUM_VALUE_DEFINITION,description:t,name:r,directives:a})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Rn(this._lexer.source,this._lexer.token.start,`${Sp(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:Ee.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:a,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(pe.BRACE_L,this.parseInputValueDef,pe.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===pe.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),r=this.optionalMany(pe.BRACE_L,this.parseOperationTypeDefinition,pe.BRACE_R);if(t.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:Ee.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(e,{kind:Ee.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Ee.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:a,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Ee.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:a,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseUnionMemberTypes();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Ee.UNION_TYPE_EXTENSION,name:t,directives:r,types:a})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseEnumValuesDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Ee.ENUM_TYPE_EXTENSION,name:t,directives:r,values:a})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseInputFieldsDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Ee.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:a})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(pe.AT);const r=this.parseName(),a=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:Ee.DIRECTIVE_DEFINITION,description:t,name:r,arguments:a,repeatable:i,locations:o})}parseDirectiveLocations(){return this.delimitedMany(pe.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(qb,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new IW(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw Rn(this._lexer.source,t.start,`Expected ${pD(e)}, found ${Sp(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===pe.NAME&&t.value===e)this.advanceLexer();else throw Rn(this._lexer.source,t.start,`Expected "${e}", found ${Sp(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===pe.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return Rn(this._lexer.source,t.start,`Unexpected ${Sp(t)}.`)}any(e,t,r){this.expectToken(e);const a=[];for(;!this.expectOptionalToken(r);)a.push(t.call(this));return a}optionalMany(e,t,r){if(this.expectOptionalToken(e)){const a=[];do a.push(t.call(this));while(!this.expectOptionalToken(r));return a}return[]}many(e,t,r){this.expectToken(e);const a=[];do a.push(t.call(this));while(!this.expectOptionalToken(r));return a}delimitedMany(e,t){this.expectOptionalToken(e);const r=[];do r.push(t.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==pe.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw Rn(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Sp(n){const e=n.value;return pD(n.kind)+(e!=null?` "${e}"`:"")}function pD(n){return UW(n)?`"${n}"`:n}function sH(n){return`"${n.replace(uH,lH)}"`}const uH=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function lH(n){return cH[n.charCodeAt(0)]}const cH=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],fm=Object.freeze({});function wa(n,e,t=sD){const r=new Map;for(const _ of Object.values(Ee))r.set(_,fH(e,_));let a,i=Array.isArray(n),o=[n],u=-1,c=[],f=n,d,p;const v=[],g=[];do{u++;const _=u===o.length,S=_&&c.length!==0;if(_){if(d=g.length===0?void 0:v[v.length-1],f=p,p=g.pop(),S)if(i){f=f.slice();let R=0;for(const[T,O]of c){const D=T-R;O===null?(f.splice(D,1),R++):f[D]=O}}else{f=Object.defineProperties({},Object.getOwnPropertyDescriptors(f));for(const[R,T]of c)f[R]=T}u=a.index,o=a.keys,c=a.edits,i=a.inArray,a=a.prev}else if(p){if(d=i?u:o[u],f=p[d],f==null)continue;v.push(d)}let C;if(!Array.isArray(f)){var y,x;rR(f)||Fp(!1,`Invalid AST Node: ${B1(f)}.`);const R=_?(y=r.get(f.kind))===null||y===void 0?void 0:y.leave:(x=r.get(f.kind))===null||x===void 0?void 0:x.enter;if(C=R==null?void 0:R.call(e,f,d,p,v,g),C===fm)break;if(C===!1){if(!_){v.pop();continue}}else if(C!==void 0&&(c.push([d,C]),!_))if(rR(C))f=C;else{v.pop();continue}}if(C===void 0&&S&&c.push([d,f]),_)v.pop();else{var w;a={inArray:i,index:u,keys:o,edits:c,prev:a},i=Array.isArray(f),o=i?f:(w=t[f.kind])!==null&&w!==void 0?w:[],u=-1,c=[],p&&g.push(p),p=f}}while(a!==void 0);return c.length!==0?c[c.length-1][1]:n}function fH(n,e){const t=n[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function hH(n){return wa(n,pH)}const dH=80,pH={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>Ne(n.definitions,`

`)},OperationDefinition:{leave(n){const e=ft("(",Ne(n.variableDefinitions,", "),")"),t=Ne([n.operation,Ne([n.name,e]),Ne(n.directives," ")]," ");return(t==="query"?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:r})=>n+": "+e+ft(" = ",t)+ft(" ",Ne(r," "))},SelectionSet:{leave:({selections:n})=>sa(n)},Field:{leave({alias:n,name:e,arguments:t,directives:r,selectionSet:a}){const i=ft("",n,": ")+e;let o=i+ft("(",Ne(t,", "),")");return o.length>dH&&(o=i+ft(`(
`,Lp(Ne(t,`
`)),`
)`)),Ne([o,Ne(r," "),a]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+ft(" ",Ne(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>Ne(["...",ft("on ",n),Ne(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:r,selectionSet:a})=>`fragment ${n}${ft("(",Ne(t,", "),")")} on ${e} ${ft("",Ne(r," ")," ")}`+a},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?BW(n):sH(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+Ne(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+Ne(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+ft("(",Ne(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>ft("",n,`
`)+Ne(["schema",Ne(e," "),sa(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>ft("",n,`
`)+Ne(["scalar",e,Ne(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:a})=>ft("",n,`
`)+Ne(["type",e,ft("implements ",Ne(t," & ")),Ne(r," "),sa(a)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:r,directives:a})=>ft("",n,`
`)+e+(iR(t)?ft(`(
`,Lp(Ne(t,`
`)),`
)`):ft("(",Ne(t,", "),")"))+": "+r+ft(" ",Ne(a," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:r,directives:a})=>ft("",n,`
`)+Ne([e+": "+t,ft("= ",r),Ne(a," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:a})=>ft("",n,`
`)+Ne(["interface",e,ft("implements ",Ne(t," & ")),Ne(r," "),sa(a)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:r})=>ft("",n,`
`)+Ne(["union",e,Ne(t," "),ft("= ",Ne(r," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:r})=>ft("",n,`
`)+Ne(["enum",e,Ne(t," "),sa(r)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>ft("",n,`
`)+Ne([e,Ne(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:r})=>ft("",n,`
`)+Ne(["input",e,Ne(t," "),sa(r)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:r,locations:a})=>ft("",n,`
`)+"directive @"+e+(iR(t)?ft(`(
`,Lp(Ne(t,`
`)),`
)`):ft("(",Ne(t,", "),")"))+(r?" repeatable":"")+" on "+Ne(a," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>Ne(["extend schema",Ne(n," "),sa(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>Ne(["extend scalar",n,Ne(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>Ne(["extend type",n,ft("implements ",Ne(e," & ")),Ne(t," "),sa(r)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>Ne(["extend interface",n,ft("implements ",Ne(e," & ")),Ne(t," "),sa(r)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>Ne(["extend union",n,Ne(e," "),ft("= ",Ne(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>Ne(["extend enum",n,Ne(e," "),sa(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>Ne(["extend input",n,Ne(e," "),sa(t)]," ")}};function Ne(n,e=""){var t;return(t=n==null?void 0:n.filter(r=>r).join(e))!==null&&t!==void 0?t:""}function sa(n){return ft(`{
`,Lp(Ne(n,`
`)),`
}`)}function ft(n,e,t=""){return e!=null&&e!==""?n+e+t:""}function Lp(n){return ft("  ",n.replace(/\n/g,`
  `))}function iR(n){var e;return(e=n==null?void 0:n.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function oR(n){return n.kind===Ee.FIELD||n.kind===Ee.FRAGMENT_SPREAD||n.kind===Ee.INLINE_FRAGMENT}function Uh(n,e){var t=n.directives;return!t||!t.length?!0:gH(t).every(function(r){var a=r.directive,i=r.ifArgument,o=!1;return i.value.kind==="Variable"?(o=e&&e[i.value.name.value],Ce(o!==void 0,78,a.name.value)):o=i.value.value,a.name.value==="skip"?!o:o})}function gh(n,e,t){var r=new Set(n),a=r.size;return wa(e,{Directive:function(i){if(r.delete(i.name.value)&&(!t||!r.size))return fm}}),t?!r.size:r.size<a}function vH(n){return n&&gh(["client","export"],n,!0)}function mH(n){var e=n.name.value;return e==="skip"||e==="include"}function gH(n){var e=[];return n&&n.length&&n.forEach(function(t){if(mH(t)){var r=t.arguments,a=t.name.value;Ce(r&&r.length===1,79,a);var i=r[0];Ce(i.name&&i.name.value==="if",80,a);var o=i.value;Ce(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),81,a),e.push({directive:t,ifArgument:i})}}),e}function yH(n){var e,t,r=(e=n.directives)===null||e===void 0?void 0:e.find(function(i){var o=i.name;return o.value==="unmask"});if(!r)return"mask";var a=(t=r.arguments)===null||t===void 0?void 0:t.find(function(i){var o=i.name;return o.value==="mode"});return globalThis.__DEV__!==!1&&a&&(a.value.kind===Ee.VARIABLE?globalThis.__DEV__!==!1&&Ce.warn(82):a.value.kind!==Ee.STRING?globalThis.__DEV__!==!1&&Ce.warn(83):a.value.value!=="migrate"&&globalThis.__DEV__!==!1&&Ce.warn(84,a.value.value)),a&&"value"in a.value&&a.value.value==="migrate"?"migrate":"unmask"}const bH=()=>Object.create(null),{forEach:xH,slice:sR}=Array.prototype,{hasOwnProperty:wH}=Object.prototype;class Qi{constructor(e=!0,t=bH){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return xH.call(e,r=>t=t.getChildTrie(r)),wH.call(t,"data")?t.data:t.data=this.makeData(sR.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,a=e.length;t&&r<a;++r){const i=t.mapFor(e[r],!1);t=i&&i.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const r=e[0],a=this.mapFor(r,!1),i=a&&a.get(r);i&&(t=i.removeArray(sR.call(e,1)),!i.data&&!i.weak&&!(i.strong&&i.strong.size)&&a.delete(r))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let r=t.get(e);return r||t.set(e,r=new Qi(this.weakness,this.makeData)),r}mapFor(e,t){return this.weakness&&_H(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function _H(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}var vD=ha(function(){return navigator.product})=="ReactNative",fu=typeof WeakMap=="function"&&!(vD&&!global.HermesInternal),z1=typeof WeakSet=="function",U1=typeof Symbol=="function"&&typeof Symbol.for=="function",hm=U1&&Symbol.asyncIterator,mD=typeof ha(function(){return window.document.createElement})=="function",EH=ha(function(){return navigator.userAgent.indexOf("jsdom")>=0})||!1,SH=(mD||vD)&&!EH;function Yt(n){return n!==null&&typeof n=="object"}function CH(n,e){var t=e,r=[];n.definitions.forEach(function(i){if(i.kind==="OperationDefinition")throw ar(85,i.operation,i.name?" named '".concat(i.name.value,"'"):"");i.kind==="FragmentDefinition"&&r.push(i)}),typeof t>"u"&&(Ce(r.length===1,86,r.length),t=r[0].name.value);var a=$($({},n),{definitions:dn([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],n.definitions,!0)});return a}function fc(n){n===void 0&&(n=[]);var e={};return n.forEach(function(t){e[t.name.value]=t}),e}function dm(n,e){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":{var t=n.name.value;if(typeof e=="function")return e(t);var r=e&&e[t];return Ce(r,87,t),r||null}default:return null}}function RH(n){var e=!0;return wa(n,{FragmentSpread:function(t){if(e=!!t.directives&&t.directives.some(function(r){return r.name.value==="unmask"}),!e)return fm}}),e}function TH(){}class Hb{constructor(e=1/0,t=TH){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:a}=t;a&&(a.older=r),r&&(r.newer=a),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=a)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1}}function Gb(){}const OH=Gb,AH=typeof WeakRef<"u"?WeakRef:function(n){return{deref:()=>n}},kH=typeof WeakMap<"u"?WeakMap:Map,DH=typeof FinalizationRegistry<"u"?FinalizationRegistry:function(){return{register:Gb,unregister:Gb}},NH=10024;class Dv{constructor(e=1/0,t=OH){this.max=e,this.dispose=t,this.map=new kH,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const r=this.unfinalizedNodes.values();for(let a=0;a<NH;a++){const i=r.next().value;if(!i)break;this.unfinalizedNodes.delete(i);const o=i.key;delete i.key,i.keyRef=new AH(o),this.registry.register(o,i,i)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new DH(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:a}=t;a&&(a.older=r),r&&(r.newer=a),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=a)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.scheduleFinalization(r),this.map.set(e,r),this.size++,r.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return t?(this.deleteNode(t),!0):!1}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}var w0=new WeakSet;function gD(n){n.size<=(n.max||-1)||w0.has(n)||(w0.add(n),setTimeout(function(){n.clean(),w0.delete(n)},100))}var V1=function(n,e){var t=new Dv(n,e);return t.set=function(r,a){var i=Dv.prototype.set.call(this,r,a);return gD(this),i},t},IH=function(n,e){var t=new Hb(n,e);return t.set=function(r,a){var i=Hb.prototype.set.call(this,r,a);return gD(this),i},t},MH=Symbol.for("apollo.cacheSize"),ei=$({},Ub[MH]),As={};function j1(n,e){As[n]=e}var FH=globalThis.__DEV__!==!1?zH:void 0,LH=globalThis.__DEV__!==!1?UH:void 0,PH=globalThis.__DEV__!==!1?yD:void 0;function BH(){var n={parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(n).map(function(e){var t=e[0],r=e[1];return[t,ei[t]||r]}))}function zH(){var n,e,t,r,a;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:BH(),sizes:$({print:(n=As.print)===null||n===void 0?void 0:n.call(As),parser:(e=As.parser)===null||e===void 0?void 0:e.call(As),canonicalStringify:(t=As.canonicalStringify)===null||t===void 0?void 0:t.call(As),links:$b(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:xD(this.queryManager.documentTransform)}},(a=(r=this.cache).getMemoryInternals)===null||a===void 0?void 0:a.call(r))}}function yD(){return{cache:{fragmentQueryDocuments:Co(this.getFragmentDoc)}}}function UH(){var n=this.config.fragments;return $($({},yD.apply(this)),{addTypenameDocumentTransform:xD(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:Co(this.storeReader.executeSelectionSet),executeSubSelectedArray:Co(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:Co(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:Co(n==null?void 0:n.findFragmentSpreads),lookup:Co(n==null?void 0:n.lookup),transform:Co(n==null?void 0:n.transform)}})}function VH(n){return!!n&&"dirtyKey"in n}function Co(n){return VH(n)?n.size:void 0}function bD(n){return n!=null}function xD(n){return Qb(n).map(function(e){return{cache:e}})}function Qb(n){return n?dn(dn([Co(n==null?void 0:n.performWork)],Qb(n==null?void 0:n.left),!0),Qb(n==null?void 0:n.right),!0).filter(bD):[]}function $b(n){var e;return n?dn(dn([(e=n==null?void 0:n.getMemoryInternals)===null||e===void 0?void 0:e.call(n)],$b(n==null?void 0:n.left),!0),$b(n==null?void 0:n.right),!0).filter(bD):[]}var qo=Object.assign(function(e){return JSON.stringify(e,jH)},{reset:function(){hl=new IH(ei.canonicalStringify||1e3)}});globalThis.__DEV__!==!1&&j1("canonicalStringify",function(){return hl.size});var hl;qo.reset();function jH(n,e){if(e&&typeof e=="object"){var t=Object.getPrototypeOf(e);if(t===Object.prototype||t===null){var r=Object.keys(e);if(r.every(qH))return e;var a=JSON.stringify(r),i=hl.get(a);if(!i){r.sort();var o=JSON.stringify(r);i=hl.get(o)||r,hl.set(a,i),hl.set(o,i)}var u=Object.create(t);return i.forEach(function(c){u[c]=e[c]}),u}}return e}function qH(n,e,t){return e===0||t[e-1]<=n}function Sl(n){return{__ref:String(n)}}function Rt(n){return!!(n&&typeof n=="object"&&typeof n.__ref=="string")}function WH(n){return Yt(n)&&n.kind==="Document"&&Array.isArray(n.definitions)}function HH(n){return n.kind==="StringValue"}function GH(n){return n.kind==="BooleanValue"}function QH(n){return n.kind==="IntValue"}function $H(n){return n.kind==="FloatValue"}function KH(n){return n.kind==="Variable"}function XH(n){return n.kind==="ObjectValue"}function YH(n){return n.kind==="ListValue"}function ZH(n){return n.kind==="EnumValue"}function JH(n){return n.kind==="NullValue"}function ec(n,e,t,r){if(QH(t)||$H(t))n[e.value]=Number(t.value);else if(GH(t)||HH(t))n[e.value]=t.value;else if(XH(t)){var a={};t.fields.map(function(o){return ec(a,o.name,o.value,r)}),n[e.value]=a}else if(KH(t)){var i=(r||{})[t.name.value];n[e.value]=i}else if(YH(t))n[e.value]=t.values.map(function(o){var u={};return ec(u,e,o,r),u[e.value]});else if(ZH(t))n[e.value]=t.value;else if(JH(t))n[e.value]=null;else throw ar(96,e.value,t.kind)}function eG(n,e){var t=null;n.directives&&(t={},n.directives.forEach(function(a){t[a.name.value]={},a.arguments&&a.arguments.forEach(function(i){var o=i.name,u=i.value;return ec(t[a.name.value],o,u,e)})}));var r=null;return n.arguments&&n.arguments.length&&(r={},n.arguments.forEach(function(a){var i=a.name,o=a.value;return ec(r,i,o,e)})),wD(n.name.value,r,t)}var tG=["connection","include","skip","client","rest","export","nonreactive"],wf=qo,wD=Object.assign(function(n,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var r=t.connection.filter?t.connection.filter:[];r.sort();var a={};return r.forEach(function(u){a[u]=e[u]}),"".concat(t.connection.key,"(").concat(wf(a),")")}else return t.connection.key;var i=n;if(e){var o=wf(e);i+="(".concat(o,")")}return t&&Object.keys(t).forEach(function(u){tG.indexOf(u)===-1&&(t[u]&&Object.keys(t[u]).length?i+="@".concat(u,"(").concat(wf(t[u]),")"):i+="@".concat(u))}),i},{setStringify:function(n){var e=wf;return wf=n,e}});function pm(n,e){if(n.arguments&&n.arguments.length){var t={};return n.arguments.forEach(function(r){var a=r.name,i=r.value;return ec(t,a,i,e)}),t}return null}function zi(n){return n.alias?n.alias.value:n.name.value}function Kb(n,e,t){for(var r,a=0,i=e.selections;a<i.length;a++){var o=i[a];if(Xo(o)){if(o.name.value==="__typename")return n[zi(o)]}else r?r.push(o):r=[o]}if(typeof n.__typename=="string")return n.__typename;if(r)for(var u=0,c=r;u<c.length;u++){var o=c[u],f=Kb(n,dm(o,t).selectionSet,t);if(typeof f=="string")return f}}function Xo(n){return n.kind==="Field"}function nG(n){return n.kind==="InlineFragment"}function hc(n){Ce(n&&n.kind==="Document",88);var e=n.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw ar(89,t.kind);return t});return Ce(e.length<=1,90,e.length),n}function au(n){return hc(n),n.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Df(n){return n.definitions.filter(function(e){return e.kind==="OperationDefinition"&&!!e.name}).map(function(e){return e.name.value})[0]||null}function dc(n){return n.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function _D(n){var e=au(n);return Ce(e&&e.operation==="query",91),e}function ED(n){Ce(n.kind==="Document",92),Ce(n.definitions.length<=1,93);var e=n.definitions[0];return Ce(e.kind==="FragmentDefinition",94),e}function Vh(n){hc(n);for(var e,t=0,r=n.definitions;t<r.length;t++){var a=r[t];if(a.kind==="OperationDefinition"){var i=a.operation;if(i==="query"||i==="mutation"||i==="subscription")return a}a.kind==="FragmentDefinition"&&!e&&(e=a)}if(e)return e;throw ar(95)}function q1(n){var e=Object.create(null),t=n&&n.variableDefinitions;return t&&t.length&&t.forEach(function(r){r.defaultValue&&ec(e,r.variable.name,r.defaultValue)}),e}let Ln=null;const uR={};let rG=1;const aG=()=>class{constructor(){this.id=["slot",rG++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=Ln;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===uR)break;return e!==Ln&&(Ln.slots[this.id]=t),!0}return Ln&&(Ln.slots[this.id]=uR),!1}getValue(){if(this.hasValue())return Ln.slots[this.id]}withValue(e,t,r,a){const i={__proto__:null,[this.id]:e},o=Ln;Ln={parent:o,slots:i};try{return t.apply(a,r)}finally{Ln=o}}static bind(e){const t=Ln;return function(){const r=Ln;try{return Ln=t,e.apply(this,arguments)}finally{Ln=r}}}static noContext(e,t,r){if(Ln){const a=Ln;try{return Ln=null,e.apply(r,t)}finally{Ln=a}}else return e.apply(r,t)}};function lR(n){try{return n()}catch{}}const _0="@wry/context:Slot",iG=lR(()=>globalThis)||lR(()=>global)||Object.create(null),cR=iG,vm=cR[_0]||Array[_0]||function(n){try{Object.defineProperty(cR,_0,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(aG()),{bind:$9,noContext:K9}=vm,mm=new vm,{hasOwnProperty:oG}=Object.prototype,W1=Array.from||function(n){const e=[];return n.forEach(t=>e.push(t)),e};function H1(n){const{unsubscribe:e}=n;typeof e=="function"&&(n.unsubscribe=void 0,e())}const yh=[],sG=100;function tc(n,e){if(!n)throw new Error(e||"assertion failure")}function SD(n,e){const t=n.length;return t>0&&t===e.length&&n[t-1]===e[t-1]}function CD(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}function RD(n){return n.slice(0)}class gm{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++gm.count}peek(){if(this.value.length===1&&!Yo(this))return fR(this),this.value[0]}recompute(e){return tc(!this.recomputing,"already recomputing"),fR(this),Yo(this)?uG(this,e):CD(this.value)}setDirty(){this.dirty||(this.dirty=!0,TD(this),H1(this))}dispose(){this.setDirty(),ND(this),G1(this,(e,t)=>{e.setDirty(),ID(e,this)})}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=yh.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(W1(this.deps).forEach(e=>e.delete(this)),this.deps.clear(),yh.push(this.deps),this.deps=null)}}gm.count=0;function fR(n){const e=mm.getValue();if(e)return n.parents.add(e),e.childValues.has(n)||e.childValues.set(n,[]),Yo(n)?AD(e,n):kD(e,n),e}function uG(n,e){return ND(n),mm.withValue(n,lG,[n,e]),fG(n,e)&&cG(n),CD(n.value)}function lG(n,e){n.recomputing=!0;const{normalizeResult:t}=n;let r;t&&n.value.length===1&&(r=RD(n.value)),n.value.length=0;try{if(n.value[0]=n.fn.apply(null,e),t&&r&&!SD(r,n.value))try{n.value[0]=t(n.value[0],r[0])}catch{}}catch(a){n.value[1]=a}n.recomputing=!1}function Yo(n){return n.dirty||!!(n.dirtyChildren&&n.dirtyChildren.size)}function cG(n){n.dirty=!1,!Yo(n)&&OD(n)}function TD(n){G1(n,AD)}function OD(n){G1(n,kD)}function G1(n,e){const t=n.parents.size;if(t){const r=W1(n.parents);for(let a=0;a<t;++a)e(r[a],n)}}function AD(n,e){tc(n.childValues.has(e)),tc(Yo(e));const t=!Yo(n);if(!n.dirtyChildren)n.dirtyChildren=yh.pop()||new Set;else if(n.dirtyChildren.has(e))return;n.dirtyChildren.add(e),t&&TD(n)}function kD(n,e){tc(n.childValues.has(e)),tc(!Yo(e));const t=n.childValues.get(e);t.length===0?n.childValues.set(e,RD(e.value)):SD(t,e.value)||n.setDirty(),DD(n,e),!Yo(n)&&OD(n)}function DD(n,e){const t=n.dirtyChildren;t&&(t.delete(e),t.size===0&&(yh.length<sG&&yh.push(t),n.dirtyChildren=null))}function ND(n){n.childValues.size>0&&n.childValues.forEach((e,t)=>{ID(n,t)}),n.forgetDeps(),tc(n.dirtyChildren===null)}function ID(n,e){e.parents.delete(n),n.childValues.delete(e),DD(n,e)}function fG(n,e){if(typeof n.subscribe=="function")try{H1(n),n.unsubscribe=n.subscribe.apply(null,e)}catch{return n.setDirty(),!1}return!0}const hG={setDirty:!0,dispose:!0,forget:!0};function MD(n){const e=new Map;function t(r){const a=mm.getValue();if(a){let i=e.get(r);i||e.set(r,i=new Set),a.dependOn(i)}}return t.dirty=function(a,i){const o=e.get(a);if(o){const u=i&&oG.call(hG,i)?i:"setDirty";W1(o).forEach(c=>c[u]()),e.delete(a),H1(o)}},t}let hR;function dG(...n){return(hR||(hR=new Qi(typeof WeakMap=="function"))).lookupArray(n)}const E0=new Set;function bh(n,{max:e=Math.pow(2,16),keyArgs:t,makeCacheKey:r=dG,normalizeResult:a,subscribe:i,cache:o=Hb}=Object.create(null)){const u=typeof o=="function"?new o(e,v=>v.dispose()):o,c=function(){const v=r.apply(null,t?t.apply(null,arguments):arguments);if(v===void 0)return n.apply(null,arguments);let g=u.get(v);g||(u.set(v,g=new gm(n)),g.normalizeResult=a,g.subscribe=i,g.forget=()=>u.delete(v));const y=g.recompute(Array.prototype.slice.call(arguments));return u.set(v,g),E0.add(u),mm.hasValue()||(E0.forEach(x=>x.clean()),E0.clear()),y};Object.defineProperty(c,"size",{get:()=>u.size,configurable:!1,enumerable:!1}),Object.freeze(c.options={max:e,keyArgs:t,makeCacheKey:r,normalizeResult:a,subscribe:i,cache:u});function f(v){const g=v&&u.get(v);g&&g.setDirty()}c.dirtyKey=f,c.dirty=function(){f(r.apply(null,arguments))};function d(v){const g=v&&u.get(v);if(g)return g.peek()}c.peekKey=d,c.peek=function(){return d(r.apply(null,arguments))};function p(v){return v?u.delete(v):!1}return c.forgetKey=p,c.forget=function(){return p(r.apply(null,arguments))},c.makeCacheKey=r,c.getKey=t?function(){return r.apply(null,t.apply(null,arguments))}:r,Object.freeze(c)}function pG(n){return n}var FD=function(){function n(e,t){t===void 0&&(t=Object.create(null)),this.resultCache=z1?new WeakSet:new Set,this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=t.cache!==!1,this.resetCache()}return n.prototype.getCacheKey=function(e){return[e]},n.identity=function(){return new n(pG,{cache:!1})},n.split=function(e,t,r){return r===void 0&&(r=n.identity()),Object.assign(new n(function(a){var i=e(a)?t:r;return i.transformDocument(a)},{cache:!1}),{left:t,right:r})},n.prototype.resetCache=function(){var e=this;if(this.cached){var t=new Qi(fu);this.performWork=bh(n.prototype.performWork.bind(this),{makeCacheKey:function(r){var a=e.getCacheKey(r);if(a)return Ce(Array.isArray(a),77),t.lookupArray(a)},max:ei["documentTransform.cache"],cache:Dv})}},n.prototype.performWork=function(e){return hc(e),this.transform(e)},n.prototype.transformDocument=function(e){if(this.resultCache.has(e))return e;var t=this.performWork(e);return this.resultCache.add(t),t},n.prototype.concat=function(e){var t=this;return Object.assign(new n(function(r){return e.transformDocument(t.transformDocument(r))},{cache:!1}),{left:this,right:e})},n}(),Bf,Fs=Object.assign(function(n){var e=Bf.get(n);return e||(e=hH(n),Bf.set(n,e)),e},{reset:function(){Bf=new V1(ei.print||2e3)}});Fs.reset();globalThis.__DEV__!==!1&&j1("print",function(){return Bf?Bf.size:0});var Zt=Array.isArray;function Jr(n){return Array.isArray(n)&&n.length>0}var dR={kind:Ee.FIELD,name:{kind:Ee.NAME,value:"__typename"}};function LD(n,e){return!n||n.selectionSet.selections.every(function(t){return t.kind===Ee.FRAGMENT_SPREAD&&LD(e[t.name.value],e)})}function vG(n){return LD(au(n)||ED(n),fc(dc(n)))?null:n}function mG(n){var e=new Map,t=new Map;return n.forEach(function(r){r&&(r.name?e.set(r.name,r):r.test&&t.set(r.test,r))}),function(r){var a=e.get(r.name.value);return!a&&t.size&&t.forEach(function(i,o){o(r)&&(a=i)}),a}}function pR(n){var e=new Map;return function(r){r===void 0&&(r=n);var a=e.get(r);return a||e.set(r,a={variables:new Set,fragmentSpreads:new Set}),a}}function PD(n,e){hc(e);for(var t=pR(""),r=pR(""),a=function(_){for(var S=0,C=void 0;S<_.length&&(C=_[S]);++S)if(!Zt(C)){if(C.kind===Ee.OPERATION_DEFINITION)return t(C.name&&C.name.value);if(C.kind===Ee.FRAGMENT_DEFINITION)return r(C.name.value)}return globalThis.__DEV__!==!1&&Ce.error(97),null},i=0,o=e.definitions.length-1;o>=0;--o)e.definitions[o].kind===Ee.OPERATION_DEFINITION&&++i;var u=mG(n),c=function(_){return Jr(_)&&_.map(u).some(function(S){return S&&S.remove})},f=new Map,d=!1,p={enter:function(_){if(c(_.directives))return d=!0,null}},v=wa(e,{Field:p,InlineFragment:p,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(_,S,C,R,T){var O=a(T);O&&O.variables.add(_.name.value)}},FragmentSpread:{enter:function(_,S,C,R,T){if(c(_.directives))return d=!0,null;var O=a(T);O&&O.fragmentSpreads.add(_.name.value)}},FragmentDefinition:{enter:function(_,S,C,R){f.set(JSON.stringify(R),_)},leave:function(_,S,C,R){var T=f.get(JSON.stringify(R));if(_===T)return _;if(i>0&&_.selectionSet.selections.every(function(O){return O.kind===Ee.FIELD&&O.name.value==="__typename"}))return r(_.name.value).removed=!0,d=!0,null}},Directive:{leave:function(_){if(u(_))return d=!0,null}}});if(!d)return e;var g=function(_){return _.transitiveVars||(_.transitiveVars=new Set(_.variables),_.removed||_.fragmentSpreads.forEach(function(S){g(r(S)).transitiveVars.forEach(function(C){_.transitiveVars.add(C)})})),_},y=new Set;v.definitions.forEach(function(_){_.kind===Ee.OPERATION_DEFINITION?g(t(_.name&&_.name.value)).fragmentSpreads.forEach(function(S){y.add(S)}):_.kind===Ee.FRAGMENT_DEFINITION&&i===0&&!r(_.name.value).removed&&y.add(_.name.value)}),y.forEach(function(_){g(r(_)).fragmentSpreads.forEach(function(S){y.add(S)})});var x=function(_){return!!(!y.has(_)||r(_).removed)},w={enter:function(_){if(x(_.name.value))return null}};return vG(wa(v,{FragmentSpread:w,FragmentDefinition:w,OperationDefinition:{leave:function(_){if(_.variableDefinitions){var S=g(t(_.name&&_.name.value)).transitiveVars;if(S.size<_.variableDefinitions.length)return $($({},_),{variableDefinitions:_.variableDefinitions.filter(function(C){return S.has(C.variable.name.value)})})}}}}))}var Q1=Object.assign(function(n){return wa(n,{SelectionSet:{enter:function(e,t,r){if(!(r&&r.kind===Ee.OPERATION_DEFINITION)){var a=e.selections;if(a){var i=a.some(function(u){return Xo(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!i){var o=r;if(!(Xo(o)&&o.directives&&o.directives.some(function(u){return u.name.value==="export"})))return $($({},e),{selections:dn(dn([],a,!0),[dR],!1)})}}}}}})},{added:function(n){return n===dR}});function gG(n){var e=Vh(n),t=e.operation;if(t==="query")return n;var r=wa(n,{OperationDefinition:{enter:function(a){return $($({},a),{operation:"query"})}}});return r}function BD(n){hc(n);var e=PD([{test:function(t){return t.name.value==="client"},remove:!0}],n);return e}function yG(n){return hc(n),wa(n,{FragmentSpread:function(e){var t;if(!(!((t=e.directives)===null||t===void 0)&&t.some(function(r){return r.name.value==="unmask"})))return $($({},e),{directives:dn(dn([],e.directives||[],!0),[{kind:Ee.DIRECTIVE,name:{kind:Ee.NAME,value:"nonreactive"}}],!1)})}})}var bG=Object.prototype.hasOwnProperty;function vR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return ym(n)}function ym(n){var e=n[0]||{},t=n.length;if(t>1)for(var r=new Zo,a=1;a<t;++a)e=r.merge(e,n[a]);return e}var xG=function(n,e,t){return this.merge(n[t],e[t])},Zo=function(){function n(e){e===void 0&&(e=xG),this.reconciler=e,this.isObject=Yt,this.pastCopies=new Set}return n.prototype.merge=function(e,t){for(var r=this,a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];return Yt(t)&&Yt(e)?(Object.keys(t).forEach(function(o){if(bG.call(e,o)){var u=e[o];if(t[o]!==u){var c=r.reconciler.apply(r,dn([e,t,o],a,!1));c!==u&&(e=r.shallowCopyForMerge(e),e[o]=c)}}else e=r.shallowCopyForMerge(e),e[o]=t[o]}),e):t},n.prototype.shallowCopyForMerge=function(e){return Yt(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=$({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},n}();function wG(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=_G(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _G(n,e){if(n){if(typeof n=="string")return mR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mR(n,e)}}function mR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function gR(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function $1(n,e,t){return e&&gR(n.prototype,e),t&&gR(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var K1=function(){return typeof Symbol=="function"},X1=function(n){return K1()&&!!Symbol[n]},Y1=function(n){return X1(n)?Symbol[n]:"@@"+n};K1()&&!X1("observable")&&(Symbol.observable=Symbol("observable"));var EG=Y1("iterator"),Xb=Y1("observable"),zD=Y1("species");function Nv(n,e){var t=n[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function _f(n){var e=n.constructor;return e!==void 0&&(e=e[zD],e===null&&(e=void 0)),e!==void 0?e:Ft}function SG(n){return n instanceof Ft}function nc(n){nc.log?nc.log(n):setTimeout(function(){throw n})}function Pp(n){Promise.resolve().then(function(){try{n()}catch(e){nc(e)}})}function UD(n){var e=n._cleanup;if(e!==void 0&&(n._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=Nv(e,"unsubscribe");t&&t.call(e)}}catch(r){nc(r)}}function Yb(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function CG(n){var e=n._queue;if(e){n._queue=void 0,n._state="ready";for(var t=0;t<e.length&&(VD(n,e[t].type,e[t].value),n._state!=="closed");++t);}}function VD(n,e,t){n._state="running";var r=n._observer;try{var a=Nv(r,e);switch(e){case"next":a&&a.call(r,t);break;case"error":if(Yb(n),a)a.call(r,t);else throw t;break;case"complete":Yb(n),a&&a.call(r);break}}catch(i){nc(i)}n._state==="closed"?UD(n):n._state==="running"&&(n._state="ready")}function S0(n,e,t){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:e,value:t});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:e,value:t}],Pp(function(){return CG(n)});return}VD(n,e,t)}}var RG=function(){function n(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var a=new TG(this);try{this._cleanup=r.call(void 0,a)}catch(i){a.error(i)}this._state==="initializing"&&(this._state="ready")}var e=n.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(Yb(this),UD(this))},$1(n,[{key:"closed",get:function(){return this._state==="closed"}}]),n}(),TG=function(){function n(t){this._subscription=t}var e=n.prototype;return e.next=function(r){S0(this._subscription,"next",r)},e.error=function(r){S0(this._subscription,"error",r)},e.complete=function(){S0(this._subscription,"complete")},$1(n,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),Ft=function(){function n(t){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=n.prototype;return e.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new RG(r,this._subscriber)},e.forEach=function(r){var a=this;return new Promise(function(i,o){if(typeof r!="function"){o(new TypeError(r+" is not a function"));return}function u(){c.unsubscribe(),i()}var c=a.subscribe({next:function(f){try{r(f,u)}catch(d){o(d),c.unsubscribe()}},error:o,complete:i})})},e.map=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=_f(this);return new i(function(o){return a.subscribe({next:function(u){try{u=r(u)}catch(c){return o.error(c)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.filter=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=_f(this);return new i(function(o){return a.subscribe({next:function(u){try{if(!r(u))return}catch(c){return o.error(c)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.reduce=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=_f(this),o=arguments.length>1,u=!1,c=arguments[1],f=c;return new i(function(d){return a.subscribe({next:function(p){var v=!u;if(u=!0,!v||o)try{f=r(f,p)}catch(g){return d.error(g)}else f=p},error:function(p){d.error(p)},complete:function(){if(!u&&!o)return d.error(new TypeError("Cannot reduce an empty sequence"));d.next(f),d.complete()}})})},e.concat=function(){for(var r=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var u=_f(this);return new u(function(c){var f,d=0;function p(v){f=v.subscribe({next:function(g){c.next(g)},error:function(g){c.error(g)},complete:function(){d===i.length?(f=void 0,c.complete()):p(u.from(i[d++]))}})}return p(r),function(){f&&(f.unsubscribe(),f=void 0)}})},e.flatMap=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=_f(this);return new i(function(o){var u=[],c=a.subscribe({next:function(d){if(r)try{d=r(d)}catch(v){return o.error(v)}var p=i.from(d).subscribe({next:function(v){o.next(v)},error:function(v){o.error(v)},complete:function(){var v=u.indexOf(p);v>=0&&u.splice(v,1),f()}});u.push(p)},error:function(d){o.error(d)},complete:function(){f()}});function f(){c.closed&&u.length===0&&o.complete()}return function(){u.forEach(function(d){return d.unsubscribe()}),c.unsubscribe()}})},e[Xb]=function(){return this},n.from=function(r){var a=typeof this=="function"?this:n;if(r==null)throw new TypeError(r+" is not an object");var i=Nv(r,Xb);if(i){var o=i.call(r);if(Object(o)!==o)throw new TypeError(o+" is not an object");return SG(o)&&o.constructor===a?o:new a(function(u){return o.subscribe(u)})}if(X1("iterator")&&(i=Nv(r,EG),i))return new a(function(u){Pp(function(){if(!u.closed){for(var c=wG(i.call(r)),f;!(f=c()).done;){var d=f.value;if(u.next(d),u.closed)return}u.complete()}})});if(Array.isArray(r))return new a(function(u){Pp(function(){if(!u.closed){for(var c=0;c<r.length;++c)if(u.next(r[c]),u.closed)return;u.complete()}})});throw new TypeError(r+" is not observable")},n.of=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=typeof this=="function"?this:n;return new o(function(u){Pp(function(){if(!u.closed){for(var c=0;c<a.length;++c)if(u.next(a[c]),u.closed)return;u.complete()}})})},$1(n,null,[{key:zD,get:function(){return this}}]),n}();K1()&&Object.defineProperty(Ft,Symbol("extensions"),{value:{symbol:Xb,hostReportError:nc},configurable:!0});function OG(n){var e,t=n.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var sl;typeof self<"u"?sl=self:typeof window<"u"?sl=window:typeof global<"u"?sl=global:typeof module<"u"?sl=module:sl=Function("return this")();OG(sl);var yR=Ft.prototype,bR="@@observable";yR[bR]||(yR[bR]=function(){return this});function AG(n){return n.catch(function(){}),n}var kG=Object.prototype.toString;function jD(n){return Zb(n)}function Zb(n,e){switch(kG.call(n)){case"[object Array]":{if(e=e||new Map,e.has(n))return e.get(n);var t=n.slice(0);return e.set(n,t),t.forEach(function(a,i){t[i]=Zb(a,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(n))return e.get(n);var r=Object.create(Object.getPrototypeOf(n));return e.set(n,r),Object.keys(n).forEach(function(a){r[a]=Zb(n[a],e)}),r}default:return n}}function DG(n){var e=new Set([n]);return e.forEach(function(t){Yt(t)&&NG(t)===t&&Object.getOwnPropertyNames(t).forEach(function(r){Yt(t[r])&&e.add(t[r])})}),n}function NG(n){if(globalThis.__DEV__!==!1&&!Object.isFrozen(n))try{Object.freeze(n)}catch(e){if(e instanceof TypeError)return null;throw e}return n}function rc(n){return globalThis.__DEV__!==!1&&DG(n),n}function zf(n,e,t){var r=[];n.forEach(function(a){return a[e]&&r.push(a)}),r.forEach(function(a){return a[e](t)})}function C0(n,e,t){return new Ft(function(r){var a={then:function(c){return new Promise(function(f){return f(c())})}};function i(c,f){return function(d){if(c){var p=function(){return r.closed?0:c(d)};a=a.then(p,p).then(function(v){return r.next(v)},function(v){return r.error(v)})}else r[f](d)}}var o={next:i(e,"next"),error:i(t,"error"),complete:function(){a.then(function(){return r.complete()})}},u=n.subscribe(o);return function(){return u.unsubscribe()}})}function qD(n){function e(t){Object.defineProperty(n,t,{value:Ft})}return U1&&Symbol.species&&e(Symbol.species),e("@@species"),n}function xR(n){return n&&typeof n.then=="function"}var ul=function(n){ni(e,n);function e(t){var r=n.call(this,function(a){return r.addObserver(a),function(){return r.removeObserver(a)}})||this;return r.observers=new Set,r.promise=new Promise(function(a,i){r.resolve=a,r.reject=i}),r.handlers={next:function(a){r.sub!==null&&(r.latest=["next",a],r.notify("next",a),zf(r.observers,"next",a))},error:function(a){var i=r.sub;i!==null&&(i&&setTimeout(function(){return i.unsubscribe()}),r.sub=null,r.latest=["error",a],r.reject(a),r.notify("error",a),zf(r.observers,"error",a))},complete:function(){var a=r,i=a.sub,o=a.sources,u=o===void 0?[]:o;if(i!==null){var c=u.shift();c?xR(c)?c.then(function(f){return r.sub=f.subscribe(r.handlers)},r.handlers.error):r.sub=c.subscribe(r.handlers):(i&&setTimeout(function(){return i.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),r.notify("complete"),zf(r.observers,"complete"))}}},r.nextResultListeners=new Set,r.cancel=function(a){r.reject(a),r.sources=[],r.handlers.error(a)},r.promise.catch(function(a){}),typeof t=="function"&&(t=[new Ft(t)]),xR(t)?t.then(function(a){return r.start(a)},r.handlers.error):r.start(t),r}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var r=this.latest[0],a=t[r];a&&a.call(t,this.latest[1]),this.sub===null&&r==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,r){var a=this.nextResultListeners;a.size&&(this.nextResultListeners=new Set,a.forEach(function(i){return i(t,r)}))},e.prototype.beforeNext=function(t){var r=!1;this.nextResultListeners.add(function(a,i){r||(r=!0,t(a,i))})},e}(Ft);qD(ul);function Cl(n){return"incremental"in n}function IG(n){return"hasNext"in n&&"data"in n}function MG(n){return Cl(n)||IG(n)}function FG(n){return Yt(n)&&"payload"in n}function WD(n,e){var t=n,r=new Zo;return Cl(e)&&Jr(e.incremental)&&e.incremental.forEach(function(a){for(var i=a.data,o=a.path,u=o.length-1;u>=0;--u){var c=o[u],f=!isNaN(+c),d=f?[]:{};d[c]=i,i=d}t=r.merge(t,i)}),t}function Bp(n){var e=Jb(n);return Jr(e)}function Jb(n){var e=Jr(n.errors)?n.errors.slice(0):[];return Cl(n)&&Jr(n.incremental)&&n.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function iu(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Object.create(null);return n.forEach(function(r){r&&Object.keys(r).forEach(function(a){var i=r[a];i!==void 0&&(t[a]=i)})}),t}function Uf(n,e){return iu(n,e,e.variables&&{variables:iu($($({},n&&n.variables),e.variables))})}function R0(n){return new Ft(function(e){e.error(n)})}var HD=function(n,e,t){var r=new Error(t);throw r.name="ServerError",r.response=n,r.statusCode=n.status,r.result=e,r};function LG(n){for(var e=["query","operationName","variables","extensions","context"],t=0,r=Object.keys(n);t<r.length;t++){var a=r[t];if(e.indexOf(a)<0)throw ar(46,a)}return n}function PG(n,e){var t=$({},n),r=function(i){typeof i=="function"?t=$($({},t),i(t)):t=$($({},t),i)},a=function(){return $({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:r}),Object.defineProperty(e,"getContext",{enumerable:!1,value:a}),e}function BG(n){var e={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return e.operationName||(e.operationName=typeof e.query!="string"?Df(e.query)||void 0:""),e}function zG(n,e){var t=$({},n),r=new Set(Object.keys(n));return wa(e,{Variable:function(a,i,o){o&&o.kind!=="VariableDefinition"&&r.delete(a.name.value)}}),r.forEach(function(a){delete t[a]}),t}function wR(n,e){return e?e(n):Ft.of()}function Ef(n){return typeof n=="function"?new jh(n):n}function Cp(n){return n.request.length<=1}var jh=function(){function n(e){e&&(this.request=e)}return n.empty=function(){return new n(function(){return Ft.of()})},n.from=function(e){return e.length===0?n.empty():e.map(Ef).reduce(function(t,r){return t.concat(r)})},n.split=function(e,t,r){var a=Ef(t),i=Ef(r||new n(wR)),o;return Cp(a)&&Cp(i)?o=new n(function(u){return e(u)?a.request(u)||Ft.of():i.request(u)||Ft.of()}):o=new n(function(u,c){return e(u)?a.request(u,c)||Ft.of():i.request(u,c)||Ft.of()}),Object.assign(o,{left:a,right:i})},n.execute=function(e,t){return e.request(PG(t.context,BG(LG(t))))||Ft.of()},n.concat=function(e,t){var r=Ef(e);if(Cp(r))return globalThis.__DEV__!==!1&&Ce.warn(38,r),r;var a=Ef(t),i;return Cp(a)?i=new n(function(o){return r.request(o,function(u){return a.request(u)||Ft.of()})||Ft.of()}):i=new n(function(o,u){return r.request(o,function(c){return a.request(c,u)||Ft.of()})||Ft.of()}),Object.assign(i,{left:r,right:a})},n.prototype.split=function(e,t,r){return this.concat(n.split(e,t,r||new n(wR)))},n.prototype.concat=function(e){return n.concat(this,e)},n.prototype.request=function(e,t){throw ar(39)},n.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},n.prototype.setOnError=function(e){return this.onError=e,this},n}(),ex=jh.execute;function UG(n){var e,t=n[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function VG(n){var e=null,t=null,r=!1,a=[],i=[];function o(p){if(!t){if(i.length){var v=i.shift();if(Array.isArray(v)&&v[0])return v[0]({value:p,done:!1})}a.push(p)}}function u(p){t=p;var v=i.slice();v.forEach(function(g){g[1](p)}),!e||e()}function c(){r=!0;var p=i.slice();p.forEach(function(v){v[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,n.removeListener("data",o),n.removeListener("error",u),n.removeListener("end",c),n.removeListener("finish",c),n.removeListener("close",c)},n.on("data",o),n.on("error",u),n.on("end",c),n.on("finish",c),n.on("close",c);function f(){return new Promise(function(p,v){if(t)return v(t);if(a.length)return p({value:a.shift(),done:!1});if(r)return p({value:void 0,done:!0});i.push([p,v])})}var d={next:function(){return f()}};return hm&&(d[Symbol.asyncIterator]=function(){return this}),d}function jG(n){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(r,a){n.then(function(i){r({value:i,done:!1})}).catch(a)}))}};return hm&&(t[Symbol.asyncIterator]=function(){return this}),t}function _R(n){var e={next:function(){return n.read()}};return hm&&(e[Symbol.asyncIterator]=function(){return this}),e}function qG(n){return!!n.body}function WG(n){return!!n.getReader}function HG(n){return!!(hm&&n[Symbol.asyncIterator])}function GG(n){return!!n.stream}function QG(n){return!!n.arrayBuffer}function $G(n){return!!n.pipe}function KG(n){var e=n;if(qG(n)&&(e=n.body),HG(e))return UG(e);if(WG(e))return _R(e.getReader());if(GG(e))return _R(e.stream().getReader());if(QG(e))return jG(e.arrayBuffer());if($G(e))return VG(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var Z1=Symbol();function XG(n){return n.extensions?Array.isArray(n.extensions[Z1]):!1}function GD(n){return n.hasOwnProperty("graphQLErrors")}var YG=function(n){var e=dn(dn(dn([],n.graphQLErrors,!0),n.clientErrors,!0),n.protocolErrors,!0);return n.networkError&&e.push(n.networkError),e.map(function(t){return Yt(t)&&t.message||"Error message not found."}).join(`
`)},Ua=function(n){ni(e,n);function e(t){var r=t.graphQLErrors,a=t.protocolErrors,i=t.clientErrors,o=t.networkError,u=t.errorMessage,c=t.extraInfo,f=n.call(this,u)||this;return f.name="ApolloError",f.graphQLErrors=r||[],f.protocolErrors=a||[],f.clientErrors=i||[],f.networkError=o||null,f.message=u||YG(f),f.extraInfo=c,f.cause=dn(dn(dn([o],r||[],!0),a||[],!0),i||[],!0).find(function(d){return!!d})||null,f.__proto__=e.prototype,f}return e}(Error),ER=Object.prototype.hasOwnProperty;function ZG(n,e){return Eo(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N,k;return So(this,function(I){switch(I.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");t=new TextDecoder("utf-8"),r=(k=n.headers)===null||k===void 0?void 0:k.get("content-type"),a="boundary=",i=r!=null&&r.includes(a)?r==null?void 0:r.substring((r==null?void 0:r.indexOf(a))+a.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",o=`\r
--`.concat(i),u="",c=KG(n),f=!0,I.label=1;case 1:return f?[4,c.next()]:[3,3];case 2:for(d=I.sent(),p=d.value,v=d.done,g=typeof p=="string"?p:t.decode(p),y=u.length-o.length+1,f=!v,u+=g,x=u.indexOf(o,y);x>-1;){if(w=void 0,D=[u.slice(0,x),u.slice(x+o.length)],w=D[0],u=D[1],_=w.indexOf(`\r
\r
`),S=JG(w.slice(0,_)),C=S["content-type"],C&&C.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(R=w.slice(_),R){if(T=QD(n,R),Object.keys(T).length>1||"data"in T||"incremental"in T||"errors"in T||"payload"in T)if(FG(T)){if(O={},"payload"in T){if(Object.keys(T).length===1&&T.payload===null)return[2];O=$({},T.payload)}"errors"in T&&(O=$($({},O),{extensions:$($({},"extensions"in O?O.extensions:null),(N={},N[Z1]=T.errors,N))})),e(O)}else e(T);else if(Object.keys(T).length===1&&"hasNext"in T&&!T.hasNext)return[2]}x=u.indexOf(o)}return[3,1];case 3:return[2]}})})}function JG(n){var e={};return n.split(`
`).forEach(function(t){var r=t.indexOf(":");if(r>-1){var a=t.slice(0,r).trim().toLowerCase(),i=t.slice(r+1).trim();e[a]=i}}),e}function QD(n,e){if(n.status>=300){var t=function(){try{return JSON.parse(e)}catch{return e}};HD(n,t(),"Response not successful: Received status code ".concat(n.status))}try{return JSON.parse(e)}catch(a){var r=a;throw r.name="ServerParseError",r.response=n,r.statusCode=n.status,r.bodyText=e,r}}function e8(n,e){n.result&&n.result.errors&&n.result.data&&e.next(n.result),e.error(n)}function t8(n){return function(e){return e.text().then(function(t){return QD(e,t)}).then(function(t){return!Array.isArray(t)&&!ER.call(t,"data")&&!ER.call(t,"errors")&&HD(e,t,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(r){return r.operationName}):n.operationName,"'.")),t})}}var tx=function(n,e){var t;try{t=JSON.stringify(n)}catch(a){var r=ar(42,e,a.message);throw r.parseError=a,r}return t},n8={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},r8={accept:"*/*","content-type":"application/json"},a8={method:"POST"},i8={http:n8,headers:r8,options:a8},o8=function(n,e){return e(n)};function s8(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var a={},i={};t.forEach(function(p){a=$($($({},a),p.options),{headers:$($({},a.headers),p.headers)}),p.credentials&&(a.credentials=p.credentials),i=$($({},i),p.http)}),a.headers&&(a.headers=u8(a.headers,i.preserveHeaderCase));var o=n.operationName,u=n.extensions,c=n.variables,f=n.query,d={operationName:o,variables:c};return i.includeExtensions&&(d.extensions=u),i.includeQuery&&(d.query=e(f,Fs)),{options:a,body:d}}function u8(n,e){if(!e){var t={};return Object.keys(Object(n)).forEach(function(i){t[i.toLowerCase()]=n[i]}),t}var r={};Object.keys(Object(n)).forEach(function(i){r[i.toLowerCase()]={originalName:i,value:n[i]}});var a={};return Object.keys(r).forEach(function(i){a[r[i].originalName]=r[i].value}),a}var l8=function(n){if(!n&&typeof fetch>"u")throw ar(40)},c8=function(n,e){var t=n.getContext(),r=t.uri;return r||(typeof e=="function"?e(n):e||"/graphql")};function f8(n,e){var t=[],r=function(p,v){t.push("".concat(p,"=").concat(encodeURIComponent(v)))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var a=void 0;try{a=tx(e.variables,"Variables map")}catch(p){return{parseError:p}}r("variables",a)}if(e.extensions){var i=void 0;try{i=tx(e.extensions,"Extensions map")}catch(p){return{parseError:p}}r("extensions",i)}var o="",u=n,c=n.indexOf("#");c!==-1&&(o=n.substr(c),u=n.substr(0,c));var f=u.indexOf("?")===-1?"?":"&",d=u+f+t.join("&")+o;return{newURI:d}}var SR=ha(function(){return fetch}),h8=function(n){n===void 0&&(n={});var e=n.uri,t=e===void 0?"/graphql":e,r=n.fetch,a=n.print,i=a===void 0?o8:a,o=n.includeExtensions,u=n.preserveHeaderCase,c=n.useGETForQueries,f=n.includeUnusedVariables,d=f===void 0?!1:f,p=ma(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);globalThis.__DEV__!==!1&&l8(r||SR);var v={http:{includeExtensions:o,preserveHeaderCase:u},options:p.fetchOptions,credentials:p.credentials,headers:p.headers};return new jh(function(g){var y=c8(g,t),x=g.getContext(),w={};if(x.clientAwareness){var _=x.clientAwareness,S=_.name,C=_.version;S&&(w["apollographql-client-name"]=S),C&&(w["apollographql-client-version"]=C)}var R=$($({},w),x.headers),T={http:x.http,options:x.fetchOptions,credentials:x.credentials,headers:R};if(gh(["client"],g.query)){var O=BD(g.query);if(!O)return R0(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));g.query=O}var D=s8(g,i,i8,v,T),N=D.options,k=D.body;k.variables&&!d&&(k.variables=zG(k.variables,g.query));var I;!N.signal&&typeof AbortController<"u"&&(I=new AbortController,N.signal=I.signal);var B=function(Y){return Y.kind==="OperationDefinition"&&Y.operation==="mutation"},U=function(Y){return Y.kind==="OperationDefinition"&&Y.operation==="subscription"},ee=U(Vh(g.query)),te=gh(["defer"],g.query);if(c&&!g.query.definitions.some(B)&&(N.method="GET"),te||ee){N.headers=N.headers||{};var re="multipart/mixed;";ee&&te&&globalThis.__DEV__!==!1&&Ce.warn(41),ee?re+="boundary=graphql;subscriptionSpec=1.0,application/json":te&&(re+="deferSpec=20220824,application/json"),N.headers.accept=re}if(N.method==="GET"){var q=f8(y,k),Z=q.newURI,G=q.parseError;if(G)return R0(G);y=Z}else try{N.body=tx(k,"Payload")}catch(Y){return R0(Y)}return new Ft(function(Y){var F=r||ha(function(){return fetch})||SR,K=Y.next.bind(Y);return F(y,N).then(function(se){var fe;g.setContext({response:se});var he=(fe=se.headers)===null||fe===void 0?void 0:fe.get("content-type");return he!==null&&/^multipart\/mixed/i.test(he)?ZG(se,K):t8(g)(se).then(K)}).then(function(){I=void 0,Y.complete()}).catch(function(se){I=void 0,e8(se,Y)}),function(){I&&I.abort()}})})},d8=function(n){ni(e,n);function e(t){t===void 0&&(t={});var r=n.call(this,h8(t).request)||this;return r.options=t,r}return e}(jh);const{toString:CR,hasOwnProperty:p8}=Object.prototype,RR=Function.prototype.toString,nx=new Map;function Et(n,e){try{return rx(n,e)}finally{nx.clear()}}function rx(n,e){if(n===e)return!0;const t=CR.call(n),r=CR.call(e);if(t!==r)return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":{if(OR(n,e))return!0;const a=TR(n),i=TR(e),o=a.length;if(o!==i.length)return!1;for(let u=0;u<o;++u)if(!p8.call(e,a[u]))return!1;for(let u=0;u<o;++u){const c=a[u];if(!rx(n[c],e[c]))return!1}return!0}case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!==n)return e!==e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n==`${e}`;case"[object Map]":case"[object Set]":{if(n.size!==e.size)return!1;if(OR(n,e))return!0;const a=n.entries(),i=t==="[object Map]";for(;;){const o=a.next();if(o.done)break;const[u,c]=o.value;if(!e.has(u)||i&&!rx(c,e.get(u)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":{let a=n.byteLength;if(a===e.byteLength)for(;a--&&n[a]===e[a];);return a===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const a=RR.call(n);return a!==RR.call(e)?!1:!g8(a,m8)}}return!1}function TR(n){return Object.keys(n).filter(v8,n)}function v8(n){return this[n]!==void 0}const m8="{ [native code] }";function g8(n,e){const t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}function OR(n,e){let t=nx.get(n);if(t){if(t.has(e))return!0}else nx.set(n,t=new Set);return t.add(e),!1}function $D(n,e,t,r){var a=e.data,i=ma(e,["data"]),o=t.data,u=ma(t,["data"]);return Et(i,u)&&zp(Vh(n).selectionSet,a,o,{fragmentMap:fc(dc(n)),variables:r})}function zp(n,e,t,r){if(e===t)return!0;var a=new Set;return n.selections.every(function(i){if(a.has(i)||(a.add(i),!Uh(i,r.variables))||AR(i))return!0;if(Xo(i)){var o=zi(i),u=e&&e[o],c=t&&t[o],f=i.selectionSet;if(!f)return Et(u,c);var d=Array.isArray(u),p=Array.isArray(c);if(d!==p)return!1;if(d&&p){var v=u.length;if(c.length!==v)return!1;for(var g=0;g<v;++g)if(!zp(f,u[g],c[g],r))return!1;return!0}return zp(f,u,c,r)}else{var y=dm(i,r.fragmentMap);if(y)return AR(y)?!0:zp(y.selectionSet,e,t,r)}})}function AR(n){return!!n.directives&&n.directives.some(y8)}function y8(n){return n.name.value==="nonreactive"}var KD=fu?WeakMap:Map,XD=z1?WeakSet:Set,J1=new vm,kR=!1;function YD(){kR||(kR=!0,globalThis.__DEV__!==!1&&Ce.warn(52))}function ZD(n,e,t){return J1.withValue(!0,function(){var r=Nf(n,e,t,!1);return Object.isFrozen(n)&&rc(r),r})}function b8(n,e){if(e.has(n))return e.get(n);var t=Array.isArray(n)?[]:Object.create(null);return e.set(n,t),t}function Nf(n,e,t,r,a){var i,o=t.knownChanged,u=b8(n,t.mutableTargets);if(Array.isArray(n)){for(var c=0,f=Array.from(n.entries());c<f.length;c++){var d=f[c],p=d[0],v=d[1];if(v===null){u[p]=null;continue}var g=Nf(v,e,t,r,globalThis.__DEV__!==!1?"".concat(a||"","[").concat(p,"]"):void 0);o.has(g)&&o.add(u),u[p]=g}return o.has(u)?u:n}for(var y=0,x=e.selections;y<x.length;y++){var w=x[y],_=void 0;if(r&&o.add(u),w.kind===Ee.FIELD){var S=zi(w),C=w.selectionSet;if(_=u[S]||n[S],_===void 0)continue;if(C&&_!==null){var g=Nf(n[S],C,t,r,globalThis.__DEV__!==!1?"".concat(a||"",".").concat(S):void 0);o.has(g)&&(_=g)}globalThis.__DEV__===!1&&(u[S]=_),globalThis.__DEV__!==!1&&(r&&S!=="__typename"&&!(!((i=Object.getOwnPropertyDescriptor(u,S))===null||i===void 0)&&i.value)?Object.defineProperty(u,S,x8(S,_,a||"",t.operationName,t.operationType)):(delete u[S],u[S]=_))}if(w.kind===Ee.INLINE_FRAGMENT&&(!w.typeCondition||t.cache.fragmentMatches(w,n.__typename))&&(_=Nf(n,w.selectionSet,t,r,a)),w.kind===Ee.FRAGMENT_SPREAD){var R=w.name.value,T=t.fragmentMap[R]||(t.fragmentMap[R]=t.cache.lookupFragment(R));Ce(T,47,R);var O=yH(w);O!=="mask"&&(_=Nf(n,T.selectionSet,t,O==="migrate",a))}o.has(_)&&o.add(u)}return"__typename"in n&&!("__typename"in u)&&(u.__typename=n.__typename),Object.keys(u).length!==Object.keys(n).length&&o.add(u),o.has(u)?u:n}function x8(n,e,t,r,a){var i=function(){return J1.getValue()||(globalThis.__DEV__!==!1&&Ce.warn(48,r?"".concat(a," '").concat(r,"'"):"anonymous ".concat(a),"".concat(t,".").concat(n).replace(/^\./,"")),i=function(){return e}),e};return{get:function(){return i()},set:function(o){i=function(){return o}},enumerable:!0,configurable:!0}}function JD(n,e,t,r){if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&YD(),n;var a=e.definitions.filter(function(o){return o.kind===Ee.FRAGMENT_DEFINITION});typeof r>"u"&&(Ce(a.length===1,49,a.length),r=a[0].name.value);var i=a.find(function(o){return o.name.value===r});return Ce(!!i,50,r),n==null||Et(n,{})?n:ZD(n,i.selectionSet,{operationType:"fragment",operationName:i.name.value,fragmentMap:fc(dc(e)),cache:t,mutableTargets:new KD,knownChanged:new XD})}function w8(n,e,t){var r;if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&YD(),n;var a=au(e);return Ce(a,51),n==null?n:ZD(n,a.selectionSet,{operationType:a.operation,operationName:(r=a.name)===null||r===void 0?void 0:r.value,fragmentMap:fc(dc(e)),cache:t,mutableTargets:new KD,knownChanged:new XD})}var eN=function(){function n(){this.assumeImmutableResults=!1,this.getFragmentDoc=bh(CH,{max:ei["cache.fragmentQueryDocuments"]||1e3,cache:Dv})}return n.prototype.lookupFragment=function(e){return null},n.prototype.batch=function(e){var t=this,r=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,a;return this.performTransaction(function(){return a=e.update(t)},r),a},n.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},n.prototype.transformDocument=function(e){return e},n.prototype.transformForLink=function(e){return e},n.prototype.identify=function(e){},n.prototype.gc=function(){return[]},n.prototype.modify=function(e){return!1},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read($($({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},n.prototype.watchFragment=function(e){var t=this,r=e.fragment,a=e.fragmentName,i=e.from,o=e.optimistic,u=o===void 0?!0:o,c=ma(e,["fragment","fragmentName","from","optimistic"]),f=this.getFragmentDoc(r,a),d=typeof i>"u"||typeof i=="string"?i:this.identify(i),p=!!e[Symbol.for("apollo.dataMasking")];if(globalThis.__DEV__!==!1){var v=a||ED(r).name.value;d||globalThis.__DEV__!==!1&&Ce.warn(1,v)}var g=$($({},c),{returnPartialData:!0,id:d,query:f,optimistic:u}),y;return new Ft(function(x){return t.watch($($({},g),{immediate:!0,callback:function(w){var _=p?JD(w.result,r,t,a):w.result;if(!(y&&$D(f,{data:y.result},{data:_},e.variables))){var S={data:_,complete:!!w.complete};w.missing&&(S.missing=ym(w.missing.map(function(C){return C.missing}))),y=$($({},w),{result:_}),x.next(S)}}}))})},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read($($({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},n.prototype.writeQuery=function(e){var t=e.id,r=e.data,a=ma(e,["id","data"]);return this.write(Object.assign(a,{dataId:t||"ROOT_QUERY",result:r}))},n.prototype.writeFragment=function(e){var t=e.id,r=e.data,a=e.fragment,i=e.fragmentName,o=ma(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(a,i),dataId:t,result:r}))},n.prototype.updateQuery=function(e,t){return this.batch({update:function(r){var a=r.readQuery(e),i=t(a);return i==null?a:(r.writeQuery($($({},e),{data:i})),i)}})},n.prototype.updateFragment=function(e,t){return this.batch({update:function(r){var a=r.readFragment(e),i=t(a);return i==null?a:(r.writeFragment($($({},e),{data:i})),i)}})},n}();globalThis.__DEV__!==!1&&(eN.prototype.getMemoryInternals=PH);var tN=function(n){ni(e,n);function e(t,r,a,i){var o,u=n.call(this,t)||this;if(u.message=t,u.path=r,u.query=a,u.variables=i,Array.isArray(u.path)){u.missing=u.message;for(var c=u.path.length-1;c>=0;--c)u.missing=(o={},o[u.path[c]]=u.missing,o)}else u.missing=u.path;return u.__proto__=e.prototype,u}return e}(Error),Sn=Object.prototype.hasOwnProperty;function Sf(n){return n==null}function nN(n,e){var t=n.__typename,r=n.id,a=n._id;if(typeof t=="string"&&(e&&(e.keyObject=Sf(r)?Sf(a)?void 0:{_id:a}:{id:r}),Sf(r)&&!Sf(a)&&(r=a),!Sf(r)))return"".concat(t,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var rN={dataIdFromObject:nN,addTypename:!0,resultCaching:!0,canonizeResults:!1};function _8(n){return iu(rN,n)}function aN(n){var e=n.canonizeResults;return e===void 0?rN.canonizeResults:e}function E8(n,e){return Rt(e)?n.get(e.__ref,"__typename"):e&&e.__typename}var iN=/^[_a-z][_0-9a-z]*/i;function Jo(n){var e=n.match(iN);return e?e[0]:n}function ax(n,e,t){return Yt(e)?Zt(e)?e.every(function(r){return ax(n,r,t)}):n.selections.every(function(r){if(Xo(r)&&Uh(r,t)){var a=zi(r);return Sn.call(e,a)&&(!r.selectionSet||ax(r.selectionSet,e[a],t))}return!0}):!1}function dl(n){return Yt(n)&&!Rt(n)&&!Zt(n)}function S8(){return new Zo}function oN(n,e){var t=fc(dc(n));return{fragmentMap:t,lookupFragment:function(r){var a=t[r];return!a&&e&&(a=e.lookup(r)),a||null}}}var Up=Object.create(null),T0=function(){return Up},DR=Object.create(null),xh=function(){function n(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(a,i){return rc(Rt(a)?r.get(a.__ref,i):a&&a[i])},this.canRead=function(a){return Rt(a)?r.has(a.__ref):typeof a=="object"},this.toReference=function(a,i){if(typeof a=="string")return Sl(a);if(Rt(a))return a;var o=r.policies.identify(a)[0];if(o){var u=Sl(o);return i&&r.merge(o,a),u}}}return n.prototype.toObject=function(){return $({},this.data)},n.prototype.has=function(e){return this.lookup(e,!0)!==void 0},n.prototype.get=function(e,t){if(this.group.depend(e,t),Sn.call(this.data,e)){var r=this.data[e];if(r&&Sn.call(r,t))return r[t]}if(t==="__typename"&&Sn.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof _o)return this.parent.get(e,t)},n.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),Sn.call(this.data,e))return this.data[e];if(this instanceof _o)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},n.prototype.merge=function(e,t){var r=this,a;Rt(e)&&(e=e.__ref),Rt(t)&&(t=t.__ref);var i=typeof e=="string"?this.lookup(a=e):e,o=typeof t=="string"?this.lookup(a=t):t;if(o){Ce(typeof a=="string",2);var u=new Zo(R8).merge(i,o);if(this.data[a]=u,u!==i&&(delete this.refs[a],this.group.caching)){var c=Object.create(null);i||(c.__exists=1),Object.keys(o).forEach(function(f){if(!i||i[f]!==u[f]){c[f]=1;var d=Jo(f);d!==f&&!r.policies.hasKeyArgs(u.__typename,d)&&(c[d]=1),u[f]===void 0&&!(r instanceof _o)&&delete u[f]}}),c.__typename&&!(i&&i.__typename)&&this.policies.rootTypenamesById[a]===u.__typename&&delete c.__typename,Object.keys(c).forEach(function(f){return r.group.dirty(a,f)})}}},n.prototype.modify=function(e,t){var r=this,a=this.lookup(e);if(a){var i=Object.create(null),o=!1,u=!0,c={DELETE:Up,INVALIDATE:DR,isReference:Rt,toReference:this.toReference,canRead:this.canRead,readField:function(f,d){return r.policies.readField(typeof f=="string"?{fieldName:f,from:d||Sl(e)}:f,{store:r})}};if(Object.keys(a).forEach(function(f){var d=Jo(f),p=a[f];if(p!==void 0){var v=typeof t=="function"?t:t[f]||t[d];if(v){var g=v===T0?Up:v(rc(p),$($({},c),{fieldName:d,storeFieldName:f,storage:r.getStorage(e,f)}));if(g===DR)r.group.dirty(e,f);else if(g===Up&&(g=void 0),g!==p&&(i[f]=g,o=!0,p=g,globalThis.__DEV__!==!1)){var y=function(T){if(r.lookup(T.__ref)===void 0)return globalThis.__DEV__!==!1&&Ce.warn(3,T),!0};if(Rt(g))y(g);else if(Array.isArray(g))for(var x=!1,w=void 0,_=0,S=g;_<S.length;_++){var C=S[_];if(Rt(C)){if(x=!0,y(C))break}else if(typeof C=="object"&&C){var R=r.policies.identify(C)[0];R&&(w=C)}if(x&&w!==void 0){globalThis.__DEV__!==!1&&Ce.warn(4,w);break}}}}p!==void 0&&(u=!1)}}),o)return this.merge(e,i),u&&(this instanceof _o?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},n.prototype.delete=function(e,t,r){var a,i=this.lookup(e);if(i){var o=this.getFieldValue(i,"__typename"),u=t&&r?this.policies.getStoreFieldName({typename:o,fieldName:t,args:r}):t;return this.modify(e,u?(a={},a[u]=T0,a):T0)}return!1},n.prototype.evict=function(e,t){var r=!1;return e.id&&(Sn.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof _o&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach(function(a){Sn.call(e.policies.rootTypenamesById,a)||r.push(a)}),r.length&&(t.__META={extraRootIds:r.sort()}),t},n.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(i){e&&Sn.call(e,i)||t.delete(i)}),e){var r=e.__META,a=ma(e,["__META"]);Object.keys(a).forEach(function(i){t.merge(i,a[i])}),r&&r.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},n.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},n.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof _o?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},n.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach(function(o){Sn.call(r,o)&&(Object.keys(e.findChildRefIds(o)).forEach(t.add,t),delete r[o])});var a=Object.keys(r);if(a.length){for(var i=this;i instanceof _o;)i=i.parent;a.forEach(function(o){return i.delete(o)})}return a},n.prototype.findChildRefIds=function(e){if(!Sn.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var a=new Set([r]);a.forEach(function(i){Rt(i)&&(t[i.__ref]=!0),Yt(i)&&Object.keys(i).forEach(function(o){var u=i[o];Yt(u)&&a.add(u)})})}return this.refs[e]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n}(),sN=function(){function n(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?MD():null,this.keyMaker=new Qi(fu)},n.prototype.depend=function(e,t){if(this.d){this.d(O0(e,t));var r=Jo(t);r!==t&&this.d(O0(e,r)),this.parent&&this.parent.depend(e,t)}},n.prototype.dirty=function(e,t){this.d&&this.d.dirty(O0(e,t),t==="__exists"?"forget":"setDirty")},n}();function O0(n,e){return e+"#"+n}function NR(n,e){Vf(n)&&n.group.depend(e,"__exists")}(function(n){var e=function(t){ni(r,t);function r(a){var i=a.policies,o=a.resultCaching,u=o===void 0?!0:o,c=a.seed,f=t.call(this,i,new sN(u))||this;return f.stump=new C8(f),f.storageTrie=new Qi(fu),c&&f.replace(c),f}return r.prototype.addLayer=function(a,i){return this.stump.addLayer(a,i)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(n);n.Root=e})(xh||(xh={}));var _o=function(n){ni(e,n);function e(t,r,a,i){var o=n.call(this,r.policies,i)||this;return o.id=t,o.parent=r,o.replay=a,o.group=i,a(o),o}return e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var r=this,a=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(i){var o=r.data[i],u=a.lookup(i);u?o?o!==u&&Object.keys(o).forEach(function(c){Et(o[c],u[c])||r.group.dirty(i,c)}):(r.group.dirty(i,"__exists"),Object.keys(u).forEach(function(c){r.group.dirty(i,c)})):r.delete(i)}),a):a===this.parent?this:a.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return $($({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return Sn.call(this.data,t)?$($({},r),n.prototype.findChildRefIds.call(this,t)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(xh),C8=function(n){ni(e,n);function e(t){return n.call(this,"EntityStore.Stump",t,function(){},new sN(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,r){return this.parent.merge(t,r)},e}(_o);function R8(n,e,t){var r=n[t],a=e[t];return Et(r,a)?r:a}function Vf(n){return!!(n instanceof xh&&n.group.caching)}function T8(n){return Yt(n)?Zt(n)?n.slice(0):$({__proto__:Object.getPrototypeOf(n)},n):n}var IR=function(){function n(){this.known=new(z1?WeakSet:Set),this.pool=new Qi(fu),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(e){return Yt(e)&&this.known.has(e)},n.prototype.pass=function(e){if(Yt(e)){var t=T8(e);return this.passes.set(t,e),t}return e},n.prototype.admit=function(e){var t=this;if(Yt(e)){var r=this.passes.get(e);if(r)return r;var a=Object.getPrototypeOf(e);switch(a){case Array.prototype:{if(this.known.has(e))return e;var i=e.map(this.admit,this),o=this.pool.lookupArray(i);return o.array||(this.known.add(o.array=i),globalThis.__DEV__!==!1&&Object.freeze(i)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var u=Object.getPrototypeOf(e),c=[u],f=this.sortedKeys(e);c.push(f.json);var d=c.length;f.sorted.forEach(function(g){c.push(t.admit(e[g]))});var o=this.pool.lookupArray(c);if(!o.object){var p=o.object=Object.create(u);this.known.add(p),f.sorted.forEach(function(g,y){p[g]=c[d+y]}),globalThis.__DEV__!==!1&&Object.freeze(p)}return o.object}}}return e},n.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var a=JSON.stringify(t);(r.keys=this.keysByJSON.get(a))||this.keysByJSON.set(a,r.keys={sorted:t,json:a})}return r.keys},n}();function MR(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var O8=function(){function n(e){var t=this;this.knownResults=new(fu?WeakMap:Map),this.config=iu(e,{addTypename:e.addTypename!==!1,canonizeResults:aN(e)}),this.canon=e.canon||new IR,this.executeSelectionSet=bh(function(r){var a,i=r.context.canonizeResults,o=MR(r);o[3]=!i;var u=(a=t.executeSelectionSet).peek.apply(a,o);return u?i?$($({},u),{result:t.canon.admit(u.result)}):u:(NR(r.context.store,r.enclosingRef.__ref),t.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize||ei["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:MR,makeCacheKey:function(r,a,i,o){if(Vf(i.store))return i.store.makeCacheKey(r,Rt(a)?a.__ref:a,i.varString,o)}}),this.executeSubSelectedArray=bh(function(r){return NR(r.context.store,r.enclosingRef.__ref),t.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize||ei["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(r){var a=r.field,i=r.array,o=r.context;if(Vf(o.store))return o.store.makeCacheKey(a,i,o.varString)}})}return n.prototype.resetCanon=function(){this.canon=new IR},n.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,a=e.rootId,i=a===void 0?"ROOT_QUERY":a,o=e.variables,u=e.returnPartialData,c=u===void 0?!0:u,f=e.canonizeResults,d=f===void 0?this.config.canonizeResults:f,p=this.config.cache.policies;o=$($({},q1(_D(r))),o);var v=Sl(i),g=this.executeSelectionSet({selectionSet:Vh(r).selectionSet,objectOrReference:v,enclosingRef:v,context:$({store:t,query:r,policies:p,variables:o,varString:qo(o),canonizeResults:d},oN(r,this.config.fragments))}),y;if(g.missing&&(y=[new tN(A8(g.missing),g.missing,r,o)],!c))throw y[0];return{result:g.result,complete:!y,missing:y}},n.prototype.isFresh=function(e,t,r,a){if(Vf(a.store)&&this.knownResults.get(e)===r){var i=this.executeSelectionSet.peek(r,t,a,this.canon.isKnown(e));if(i&&e===i.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,a=e.objectOrReference,i=e.enclosingRef,o=e.context;if(Rt(a)&&!o.policies.rootTypenamesById[a.__ref]&&!o.store.has(a.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(a.__ref," object")};var u=o.variables,c=o.policies,f=o.store,d=f.getFieldValue(a,"__typename"),p=[],v,g=new Zo;this.config.addTypename&&typeof d=="string"&&!c.rootIdsByTypename[d]&&p.push({__typename:d});function y(C,R){var T;return C.missing&&(v=g.merge(v,(T={},T[R]=C.missing,T))),C.result}var x=new Set(r.selections);x.forEach(function(C){var R,T;if(Uh(C,u))if(Xo(C)){var O=c.readField({fieldName:C.name.value,field:C,variables:o.variables,from:a},o),D=zi(C);O===void 0?Q1.added(C)||(v=g.merge(v,(R={},R[D]="Can't find field '".concat(C.name.value,"' on ").concat(Rt(a)?a.__ref+" object":"object "+JSON.stringify(a,null,2)),R))):Zt(O)?O.length>0&&(O=y(t.executeSubSelectedArray({field:C,array:O,enclosingRef:i,context:o}),D)):C.selectionSet?O!=null&&(O=y(t.executeSelectionSet({selectionSet:C.selectionSet,objectOrReference:O,enclosingRef:Rt(O)?O:i,context:o}),D)):o.canonizeResults&&(O=t.canon.pass(O)),O!==void 0&&p.push((T={},T[D]=O,T))}else{var N=dm(C,o.lookupFragment);if(!N&&C.kind===Ee.FRAGMENT_SPREAD)throw ar(10,C.name.value);N&&c.fragmentMatches(N,d)&&N.selectionSet.selections.forEach(x.add,x)}});var w=ym(p),_={result:w,missing:v},S=o.canonizeResults?this.canon.admit(_):rc(_);return S.result&&this.knownResults.set(S.result,r),S},n.prototype.execSubSelectedArrayImpl=function(e){var t=this,r=e.field,a=e.array,i=e.enclosingRef,o=e.context,u,c=new Zo;function f(d,p){var v;return d.missing&&(u=c.merge(u,(v={},v[p]=d.missing,v))),d.result}return r.selectionSet&&(a=a.filter(o.store.canRead)),a=a.map(function(d,p){return d===null?null:Zt(d)?f(t.executeSubSelectedArray({field:r,array:d,enclosingRef:i,context:o}),p):r.selectionSet?f(t.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:d,enclosingRef:Rt(d)?d:i,context:o}),p):(globalThis.__DEV__!==!1&&k8(o.store,r,d),d)}),{result:o.canonizeResults?this.canon.admit(a):a,missing:u}},n}();function A8(n){try{JSON.stringify(n,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function k8(n,e,t){if(!e.selectionSet){var r=new Set([t]);r.forEach(function(a){Yt(a)&&(Ce(!Rt(a),11,E8(n,a),e.name.value),Object.values(a).forEach(r.add,r))})}}var ew=new vm,FR=new WeakMap;function jf(n){var e=FR.get(n);return e||FR.set(n,e={vars:new Set,dep:MD()}),e}function LR(n){jf(n).vars.forEach(function(e){return e.forgetCache(n)})}function D8(n){jf(n).vars.forEach(function(e){return e.attachCache(n)})}function N8(n){var e=new Set,t=new Set,r=function(i){if(arguments.length>0){if(n!==i){n=i,e.forEach(function(c){jf(c).dep.dirty(r),I8(c)});var o=Array.from(t);t.clear(),o.forEach(function(c){return c(n)})}}else{var u=ew.getValue();u&&(a(u),jf(u).dep(r))}return n};r.onNextChange=function(i){return t.add(i),function(){t.delete(i)}};var a=r.attachCache=function(i){return e.add(i),jf(i).vars.add(r),r};return r.forgetCache=function(i){return e.delete(i)},r}function I8(n){n.broadcastWatches&&n.broadcastWatches()}var PR=Object.create(null);function tw(n){var e=JSON.stringify(n);return PR[e]||(PR[e]=Object.create(null))}function BR(n){var e=tw(n);return e.keyFieldsFn||(e.keyFieldsFn=function(t,r){var a=function(o,u){return r.readField(u,o)},i=r.keyObject=nw(n,function(o){var u=Rl(r.storeObject,o,a);return u===void 0&&t!==r.storeObject&&Sn.call(t,o[0])&&(u=Rl(t,o,lN)),Ce(u!==void 0,5,o.join("."),t),u});return"".concat(r.typename,":").concat(JSON.stringify(i))})}function zR(n){var e=tw(n);return e.keyArgsFn||(e.keyArgsFn=function(t,r){var a=r.field,i=r.variables,o=r.fieldName,u=nw(n,function(f){var d=f[0],p=d.charAt(0);if(p==="@"){if(a&&Jr(a.directives)){var v=d.slice(1),g=a.directives.find(function(_){return _.name.value===v}),y=g&&pm(g,i);return y&&Rl(y,f.slice(1))}return}if(p==="$"){var x=d.slice(1);if(i&&Sn.call(i,x)){var w=f.slice(0);return w[0]=x,Rl(i,w)}return}if(t)return Rl(t,f)}),c=JSON.stringify(u);return(t||c!=="{}")&&(o+=":"+c),o})}function nw(n,e){var t=new Zo;return uN(n).reduce(function(r,a){var i,o=e(a);if(o!==void 0){for(var u=a.length-1;u>=0;--u)o=(i={},i[a[u]]=o,i);r=t.merge(r,o)}return r},Object.create(null))}function uN(n){var e=tw(n);if(!e.paths){var t=e.paths=[],r=[];n.forEach(function(a,i){Zt(a)?(uN(a).forEach(function(o){return t.push(r.concat(o))}),r.length=0):(r.push(a),Zt(n[i+1])||(t.push(r.slice(0)),r.length=0))})}return e.paths}function lN(n,e){return n[e]}function Rl(n,e,t){return t=t||lN,cN(e.reduce(function r(a,i){return Zt(a)?a.map(function(o){return r(o,i)}):a&&t(a,i)},n))}function cN(n){return Yt(n)?Zt(n)?n.map(cN):nw(Object.keys(n).sort(),function(e){return Rl(n,e)}):n}function ix(n){return n.args!==void 0?n.args:n.field?pm(n.field,n.variables):null}var M8=function(){},UR=function(n,e){return e.fieldName},VR=function(n,e,t){var r=t.mergeObjects;return r(n,e)},jR=function(n,e){return e},F8=function(){function n(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=$({dataIdFromObject:nN},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return n.prototype.identify=function(e,t){var r,a=this,i=t&&(t.typename||((r=t.storeObject)===null||r===void 0?void 0:r.__typename))||e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o=t&&t.storeObject||e,u=$($({},t),{typename:i,storeObject:o,readField:t&&t.readField||function(){var p=rw(arguments,o);return a.readField(p,{store:a.cache.data,variables:p.variables})}}),c,f=i&&this.getTypePolicy(i),d=f&&f.keyFn||this.config.dataIdFromObject;return J1.withValue(!0,function(){for(;d;){var p=d($($({},e),o),u);if(Zt(p))d=BR(p);else{c=p;break}}}),c=c?String(c):void 0,u.keyObject?[c,u.keyObject]:[c]},n.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(r){var a=e[r],i=a.queryType,o=a.mutationType,u=a.subscriptionType,c=ma(a,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",r),o&&t.setRootTypename("Mutation",r),u&&t.setRootTypename("Subscription",r),Sn.call(t.toBeAdded,r)?t.toBeAdded[r].push(c):t.toBeAdded[r]=[c]})},n.prototype.updateTypePolicy=function(e,t){var r=this,a=this.getTypePolicy(e),i=t.keyFields,o=t.fields;function u(c,f){c.merge=typeof f=="function"?f:f===!0?VR:f===!1?jR:c.merge}u(a,t.merge),a.keyFn=i===!1?M8:Zt(i)?BR(i):typeof i=="function"?i:a.keyFn,o&&Object.keys(o).forEach(function(c){var f=r.getFieldPolicy(e,c,!0),d=o[c];if(typeof d=="function")f.read=d;else{var p=d.keyArgs,v=d.read,g=d.merge;f.keyFn=p===!1?UR:Zt(p)?zR(p):typeof p=="function"?p:f.keyFn,typeof v=="function"&&(f.read=v),u(f,g)}f.read&&f.merge&&(f.keyFn=f.keyFn||UR)})},n.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var r="ROOT_"+e.toUpperCase(),a=this.rootTypenamesById[r];t!==a&&(Ce(!a||a===e,6,e),a&&delete this.rootIdsByTypename[a],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},n.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(r){t.getSupertypeSet(r,!0),e[r].forEach(function(a){t.getSupertypeSet(a,!0).add(r);var i=a.match(iN);(!i||i[0]!==a)&&t.fuzzySubtypes.set(a,new RegExp(a))})})},n.prototype.getTypePolicy=function(e){var t=this;if(!Sn.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var a=this.supertypeMap.get(e);!a&&this.fuzzySubtypes.size&&(a=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(function(o,u){if(o.test(e)){var c=t.supertypeMap.get(u);c&&c.forEach(function(f){return a.add(f)})}})),a&&a.size&&a.forEach(function(o){var u=t.getTypePolicy(o),c=u.fields,f=ma(u,["fields"]);Object.assign(r,f),Object.assign(r.fields,c)})}var i=this.toBeAdded[e];return i&&i.length&&i.splice(0).forEach(function(o){t.updateTypePolicy(e,o)}),this.typePolicies[e]},n.prototype.getFieldPolicy=function(e,t,r){if(e){var a=this.getTypePolicy(e).fields;return a[t]||r&&(a[t]=Object.create(null))}},n.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},n.prototype.fragmentMatches=function(e,t,r,a){var i=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var u=this.getSupertypeSet(t,!0),c=[u],f=function(y){var x=i.getSupertypeSet(y,!1);x&&x.size&&c.indexOf(x)<0&&c.push(x)},d=!!(r&&this.fuzzySubtypes.size),p=!1,v=0;v<c.length;++v){var g=c[v];if(g.has(o))return u.has(o)||(p&&globalThis.__DEV__!==!1&&Ce.warn(7,t,o),u.add(o)),!0;g.forEach(f),d&&v===c.length-1&&ax(e.selectionSet,r,a)&&(d=!1,p=!0,this.fuzzySubtypes.forEach(function(y,x){var w=t.match(y);w&&w[0]===t&&f(x)}))}return!1},n.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!!(r&&r.keyFn)},n.prototype.getStoreFieldName=function(e){var t=e.typename,r=e.fieldName,a=this.getFieldPolicy(t,r,!1),i,o=a&&a.keyFn;if(o&&t)for(var u={typename:t,fieldName:r,field:e.field||null,variables:e.variables},c=ix(e);o;){var f=o(c,u);if(Zt(f))o=zR(f);else{i=f||r;break}}return i===void 0&&(i=e.field?eG(e.field,e.variables):wD(r,ix(e))),i===!1?r:r===Jo(i)?i:r+":"+i},n.prototype.readField=function(e,t){var r=e.from;if(r){var a=e.field||e.fieldName;if(a){if(e.typename===void 0){var i=t.store.getFieldValue(r,"__typename");i&&(e.typename=i)}var o=this.getStoreFieldName(e),u=Jo(o),c=t.store.getFieldValue(r,o),f=this.getFieldPolicy(e.typename,u,!1),d=f&&f.read;if(d){var p=qR(this,r,e,t,t.store.getStorage(Rt(r)?r.__ref:r,o));return ew.withValue(this.cache,d,[c,p])}return c}}},n.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t,!1);return r&&r.read},n.prototype.getMergeFunction=function(e,t,r){var a=this.getFieldPolicy(e,t,!1),i=a&&a.merge;return!i&&r&&(a=this.getTypePolicy(r),i=a&&a.merge),i},n.prototype.runMergeFunction=function(e,t,r,a,i){var o=r.field,u=r.typename,c=r.merge;return c===VR?fN(a.store)(e,t):c===jR?t:(a.overwrite&&(e=void 0),c(e,t,qR(this,void 0,{typename:u,fieldName:o.name.value,field:o,variables:a.variables},a,i||Object.create(null))))},n}();function qR(n,e,t,r,a){var i=n.getStoreFieldName(t),o=Jo(i),u=t.variables||r.variables,c=r.store,f=c.toReference,d=c.canRead;return{args:ix(t),field:t.field||null,fieldName:o,storeFieldName:i,variables:u,isReference:Rt,toReference:f,storage:a,cache:n.cache,canRead:d,readField:function(){return n.readField(rw(arguments,e,u),r)},mergeObjects:fN(r.store)}}function rw(n,e,t){var r=n[0],a=n[1],i=n.length,o;return typeof r=="string"?o={fieldName:r,from:i>1?a:e}:(o=$({},r),Sn.call(o,"from")||(o.from=e)),globalThis.__DEV__!==!1&&o.from===void 0&&globalThis.__DEV__!==!1&&Ce.warn(8,rD(Array.from(n))),o.variables===void 0&&(o.variables=t),o}function fN(n){return function(t,r){if(Zt(t)||Zt(r))throw ar(9);if(Yt(t)&&Yt(r)){var a=n.getFieldValue(t,"__typename"),i=n.getFieldValue(r,"__typename"),o=a&&i&&a!==i;if(o)return r;if(Rt(t)&&dl(r))return n.merge(t.__ref,r),t;if(dl(t)&&Rt(r))return n.merge(t,r.__ref),r;if(dl(t)&&dl(r))return $($({},t),r)}return r}}function A0(n,e,t){var r="".concat(e).concat(t),a=n.flavors.get(r);return a||n.flavors.set(r,a=n.clientOnly===e&&n.deferred===t?n:$($({},n),{clientOnly:e,deferred:t})),a}var L8=function(){function n(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return n.prototype.writeToStore=function(e,t){var r=this,a=t.query,i=t.result,o=t.dataId,u=t.variables,c=t.overwrite,f=au(a),d=S8();u=$($({},q1(f)),u);var p=$($({store:e,written:Object.create(null),merge:function(g,y){return d.merge(g,y)},variables:u,varString:qo(u)},oN(a,this.fragments)),{overwrite:!!c,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),v=this.processSelectionSet({result:i||Object.create(null),dataId:o,selectionSet:f.selectionSet,mergeTree:{map:new Map},context:p});if(!Rt(v))throw ar(12,i);return p.incomingById.forEach(function(g,y){var x=g.storeObject,w=g.mergeTree,_=g.fieldNodeSet,S=Sl(y);if(w&&w.map.size){var C=r.applyMerges(w,S,x,p);if(Rt(C))return;x=C}if(globalThis.__DEV__!==!1&&!p.overwrite){var R=Object.create(null);_.forEach(function(D){D.selectionSet&&(R[D.name.value]=!0)});var T=function(D){return R[Jo(D)]===!0},O=function(D){var N=w&&w.map.get(D);return!!(N&&N.info&&N.info.merge)};Object.keys(x).forEach(function(D){T(D)&&!O(D)&&P8(S,x,D,p.store)})}e.merge(y,x)}),e.retain(v.__ref),v},n.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,a=e.result,i=e.selectionSet,o=e.context,u=e.mergeTree,c=this.cache.policies,f=Object.create(null),d=r&&c.rootTypenamesById[r]||Kb(a,i,o.fragmentMap)||r&&o.store.get(r,"__typename");typeof d=="string"&&(f.__typename=d);var p=function(){var C=rw(arguments,f,o.variables);if(Rt(C.from)){var R=o.incomingById.get(C.from.__ref);if(R){var T=c.readField($($({},C),{from:R.storeObject}),o);if(T!==void 0)return T}}return c.readField(C,o)},v=new Set;this.flattenFields(i,a,o,d).forEach(function(C,R){var T,O=zi(R),D=a[O];if(v.add(R),D!==void 0){var N=c.getStoreFieldName({typename:d,fieldName:R.name.value,field:R,variables:C.variables}),k=WR(u,N),I=t.processFieldValue(D,R,R.selectionSet?A0(C,!1,!1):C,k),B=void 0;R.selectionSet&&(Rt(I)||dl(I))&&(B=p("__typename",I));var U=c.getMergeFunction(d,R.name.value,B);U?k.info={field:R,typename:d,merge:U}:HR(u,N),f=C.merge(f,(T={},T[N]=I,T))}else globalThis.__DEV__!==!1&&!C.clientOnly&&!C.deferred&&!Q1.added(R)&&!c.getReadFunction(d,R.name.value)&&globalThis.__DEV__!==!1&&Ce.error(13,zi(R),a)});try{var g=c.identify(a,{typename:d,selectionSet:i,fragmentMap:o.fragmentMap,storeObject:f,readField:p}),y=g[0],x=g[1];r=r||y,x&&(f=o.merge(f,x))}catch(C){if(!r)throw C}if(typeof r=="string"){var w=Sl(r),_=o.written[r]||(o.written[r]=[]);if(_.indexOf(i)>=0||(_.push(i),this.reader&&this.reader.isFresh(a,w,i,o)))return w;var S=o.incomingById.get(r);return S?(S.storeObject=o.merge(S.storeObject,f),S.mergeTree=ox(S.mergeTree,u),v.forEach(function(C){return S.fieldNodeSet.add(C)})):o.incomingById.set(r,{storeObject:f,mergeTree:Iv(u)?void 0:u,fieldNodeSet:v}),w}return f},n.prototype.processFieldValue=function(e,t,r,a){var i=this;return!t.selectionSet||e===null?globalThis.__DEV__!==!1?jD(e):e:Zt(e)?e.map(function(o,u){var c=i.processFieldValue(o,t,r,WR(a,u));return HR(a,u),c}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:a})},n.prototype.flattenFields=function(e,t,r,a){a===void 0&&(a=Kb(t,e,r.fragmentMap));var i=new Map,o=this.cache.policies,u=new Qi(!1);return function c(f,d){var p=u.lookup(f,d.clientOnly,d.deferred);p.visited||(p.visited=!0,f.selections.forEach(function(v){if(Uh(v,r.variables)){var g=d.clientOnly,y=d.deferred;if(!(g&&y)&&Jr(v.directives)&&v.directives.forEach(function(_){var S=_.name.value;if(S==="client"&&(g=!0),S==="defer"){var C=pm(_,r.variables);(!C||C.if!==!1)&&(y=!0)}}),Xo(v)){var x=i.get(v);x&&(g=g&&x.clientOnly,y=y&&x.deferred),i.set(v,A0(r,g,y))}else{var w=dm(v,r.lookupFragment);if(!w&&v.kind===Ee.FRAGMENT_SPREAD)throw ar(14,v.name.value);w&&o.fragmentMatches(w,a,t,r.variables)&&c(w.selectionSet,A0(r,g,y))}}}))}(e,r),i},n.prototype.applyMerges=function(e,t,r,a,i){var o,u=this;if(e.map.size&&!Rt(r)){var c=!Zt(r)&&(Rt(t)||dl(t))?t:void 0,f=r;c&&!i&&(i=[Rt(c)?c.__ref:c]);var d,p=function(v,g){return Zt(v)?typeof g=="number"?v[g]:void 0:a.store.getFieldValue(v,String(g))};e.map.forEach(function(v,g){var y=p(c,g),x=p(f,g);if(x!==void 0){i&&i.push(g);var w=u.applyMerges(v,y,x,a,i);w!==x&&(d=d||new Map,d.set(g,w)),i&&Ce(i.pop()===g)}}),d&&(r=Zt(f)?f.slice(0):$({},f),d.forEach(function(v,g){r[g]=v}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,a,i&&(o=a.store).getStorage.apply(o,i)):r},n}(),hN=[];function WR(n,e){var t=n.map;return t.has(e)||t.set(e,hN.pop()||{map:new Map}),t.get(e)}function ox(n,e){if(n===e||!e||Iv(e))return n;if(!n||Iv(n))return e;var t=n.info&&e.info?$($({},n.info),e.info):n.info||e.info,r=n.map.size&&e.map.size,a=r?new Map:n.map.size?n.map:e.map,i={info:t,map:a};if(r){var o=new Set(e.map.keys());n.map.forEach(function(u,c){i.map.set(c,ox(u,e.map.get(c))),o.delete(c)}),o.forEach(function(u){i.map.set(u,ox(e.map.get(u),n.map.get(u)))})}return i}function Iv(n){return!n||!(n.info||n.map.size)}function HR(n,e){var t=n.map,r=t.get(e);r&&Iv(r)&&(hN.push(r),t.delete(e))}var GR=new Set;function P8(n,e,t,r){var a=function(p){var v=r.getFieldValue(p,t);return typeof v=="object"&&v},i=a(n);if(i){var o=a(e);if(o&&!Rt(i)&&!Et(i,o)&&!Object.keys(i).every(function(p){return r.getFieldValue(o,p)!==void 0})){var u=r.getFieldValue(n,"__typename")||r.getFieldValue(e,"__typename"),c=Jo(t),f="".concat(u,".").concat(c);if(!GR.has(f)){GR.add(f);var d=[];!Zt(i)&&!Zt(o)&&[i,o].forEach(function(p){var v=r.getFieldValue(p,"__typename");typeof v=="string"&&!d.includes(v)&&d.push(v)}),globalThis.__DEV__!==!1&&Ce.warn(15,c,u,d.length?"either ensure all objects of type "+d.join(" and ")+" have an ID or a custom merge function, or ":"",f,$({},i),$({},o))}}}}var B8=function(n){ni(e,n);function e(t){t===void 0&&(t={});var r=n.call(this)||this;return r.watches=new Set,r.addTypenameTransform=new FD(Q1),r.assumeImmutableResults=!0,r.makeVar=N8,r.txCount=0,r.config=_8(t),r.addTypename=!!r.config.addTypename,r.policies=new F8({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return e.prototype.init=function(){var t=this.data=new xh.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var r=this,a=this.storeReader,i=this.config.fragments;this.storeWriter=new L8(this,this.storeReader=new O8({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:aN(this.config),canon:t?void 0:a&&a.canon,fragments:i}),i),this.maybeBroadcastWatch=bh(function(o,u){return r.broadcastWatch(o,u)},{max:this.config.resultCacheMaxSize||ei["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(o){var u=o.optimistic?r.optimisticData:r.data;if(Vf(u)){var c=o.optimistic,f=o.id,d=o.variables;return u.makeCacheKey(o.query,o.callback,qo({optimistic:c,id:f,variables:d}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var r=t.returnPartialData,a=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore($($({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:a})).result||null}catch(i){if(i instanceof tN)return null;throw i}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(Sn.call(t,"id")&&!t.id)return!1;var r=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore($($({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var r=this;return this.watches.size||D8(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&LR(r),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){var r;qo.reset(),Fs.reset(),this.addTypenameTransform.resetCache(),(r=this.config.fragments)===null||r===void 0||r.resetCaches();var a=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),a},e.prototype.retain=function(t,r){return(r?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,r){return(r?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(Rt(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(r){globalThis.__DEV__!==!1&&Ce.warn(r)}},e.prototype.evict=function(t){if(!t.id){if(Sn.call(t,"id"))return!1;t=$($({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var r=this;return this.init(),qo.reset(),t&&t.discardWatches?(this.watches.forEach(function(a){return r.maybeBroadcastWatch.forget(a)}),this.watches.clear(),LR(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var r=this.optimisticData.removeLayer(t);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},e.prototype.batch=function(t){var r=this,a=t.update,i=t.optimistic,o=i===void 0?!0:i,u=t.removeOptimistic,c=t.onWatchUpdated,f,d=function(v){var g=r,y=g.data,x=g.optimisticData;++r.txCount,v&&(r.data=r.optimisticData=v);try{return f=a(r)}finally{--r.txCount,r.data=y,r.optimisticData=x}},p=new Set;return c&&!this.txCount&&this.broadcastWatches($($({},t),{onWatchUpdated:function(v){return p.add(v),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,d):o===!1?d(this.data):d(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),c&&p.size?(this.broadcastWatches($($({},t),{onWatchUpdated:function(v,g){var y=c.call(this,v,g);return y!==!1&&p.delete(v),y}})),p.size&&p.forEach(function(v){return r.maybeBroadcastWatch.dirty(v)})):this.broadcastWatches(t),f},e.prototype.performTransaction=function(t,r){return this.batch({update:t,optimistic:r||r!==null})},e.prototype.transformDocument=function(t){return this.addTypenameToDocument(this.addFragmentsToDocument(t))},e.prototype.fragmentMatches=function(t,r){return this.policies.fragmentMatches(t,r)},e.prototype.lookupFragment=function(t){var r;return((r=this.config.fragments)===null||r===void 0?void 0:r.lookup(t))||null},e.prototype.broadcastWatches=function(t){var r=this;this.txCount||this.watches.forEach(function(a){return r.maybeBroadcastWatch(a,t)})},e.prototype.addFragmentsToDocument=function(t){var r=this.config.fragments;return r?r.transform(t):t},e.prototype.addTypenameToDocument=function(t){return this.addTypename?this.addTypenameTransform.transformDocument(t):t},e.prototype.broadcastWatch=function(t,r){var a=t.lastDiff,i=this.diff(t);r&&(t.optimistic&&typeof r.optimistic=="string"&&(i.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,t,i,a)===!1)||(!a||!Et(a.result,i.result))&&t.callback(t.lastDiff=i,a)},e}(eN);globalThis.__DEV__!==!1&&(B8.prototype.getMemoryInternals=LH);var pt;(function(n){n[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error"})(pt||(pt={}));function Tl(n){return n?n<7:!1}var QR=Object.assign,z8=Object.hasOwnProperty,sx=function(n){ni(e,n);function e(t){var r=t.queryManager,a=t.queryInfo,i=t.options,o=n.call(this,function(w){try{var _=w._subscription._observer;_&&!_.error&&(_.error=U8)}catch{}var S=!o.observers.size;o.observers.add(w);var C=o.last;return C&&C.error?w.error&&w.error(C.error):C&&C.result&&w.next&&w.next(o.maskResult(C.result)),S&&o.reobserve().catch(function(){}),function(){o.observers.delete(w)&&!o.observers.size&&o.tearDownQuery()}})||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=a,o.queryManager=r,o.waitForOwnResult=k0(i.fetchPolicy),o.isTornDown=!1,o.subscribeToMore=o.subscribeToMore.bind(o),o.maskResult=o.maskResult.bind(o);var u=r.defaultOptions.watchQuery,c=u===void 0?{}:u,f=c.fetchPolicy,d=f===void 0?"cache-first":f,p=i.fetchPolicy,v=p===void 0?d:p,g=i.initialFetchPolicy,y=g===void 0?v==="standby"?d:v:g;o.options=$($({},i),{initialFetchPolicy:y,fetchPolicy:v}),o.queryId=a.queryId||r.generateQueryId();var x=au(o.query);return o.queryName=x&&x.name&&x.name.value,o}return Object.defineProperty(e.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(r,a){var i={next:function(u){r(u),t.observers.delete(i),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){o.unsubscribe()},0)},error:a},o=t.subscribe(i)})},e.prototype.resetDiff=function(){this.queryInfo.resetDiff()},e.prototype.getCurrentFullResult=function(t){t===void 0&&(t=!0);var r=this.getLastResult(!0),a=this.queryInfo.networkStatus||r&&r.networkStatus||pt.ready,i=$($({},r),{loading:Tl(a),networkStatus:a}),o=this.options.fetchPolicy,u=o===void 0?"cache-first":o;if(!(k0(u)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers))if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var c=this.queryInfo.getDiff();(c.complete||this.options.returnPartialData)&&(i.data=c.result),Et(i.data,{})&&(i.data=void 0),c.complete?(delete i.partial,c.complete&&i.networkStatus===pt.loading&&(u==="cache-first"||u==="cache-only")&&(i.networkStatus=pt.ready,i.loading=!1)):i.partial=!0,i.networkStatus===pt.ready&&(i.error||i.errors)&&(i.networkStatus=pt.error),globalThis.__DEV__!==!1&&!c.complete&&!this.options.partialRefetch&&!i.loading&&!i.data&&!i.error&&pN(c.missing)}return t&&this.updateLastResult(i),i},e.prototype.getCurrentResult=function(t){return t===void 0&&(t=!0),this.maskResult(this.getCurrentFullResult(t))},e.prototype.isDifferentFromLastResult=function(t,r){if(!this.last)return!0;var a=this.queryManager.getDocumentInfo(this.query),i=this.queryManager.dataMasking,o=i?a.nonReactiveQuery:this.query,u=i||a.hasNonreactiveDirective?!$D(o,this.last.result,t,this.variables):!Et(this.last.result,t);return u||r&&!Et(this.last.variables,r)},e.prototype.getLast=function(t,r){var a=this.last;if(a&&a[t]&&(!r||Et(a.variables,this.variables)))return a[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var r,a={pollInterval:0},i=this.options.fetchPolicy;if(i==="no-cache"?a.fetchPolicy="no-cache":a.fetchPolicy="network-only",globalThis.__DEV__!==!1&&t&&z8.call(t,"variables")){var o=_D(this.query),u=o.variableDefinitions;(!u||!u.some(function(c){return c.variable.name.value==="variables"}))&&globalThis.__DEV__!==!1&&Ce.warn(21,t,((r=o.name)===null||r===void 0?void 0:r.value)||o)}return t&&!Et(this.options.variables,t)&&(a.variables=this.options.variables=$($({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(a,pt.refetch)},e.prototype.fetchMore=function(t){var r=this,a=$($({},t.query?t:$($($($({},this.options),{query:this.options.query}),t),{variables:$($({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"});a.query=this.transformDocument(a.query);var i=this.queryManager.generateQueryId();this.lastQuery=t.query?this.transformDocument(this.options.query):a.query;var o=this.queryInfo,u=o.networkStatus;o.networkStatus=pt.fetchMore,a.notifyOnNetworkStatusChange&&this.observe();var c=new Set,f=t==null?void 0:t.updateQuery,d=this.options.fetchPolicy!=="no-cache";return d||Ce(f,22),this.queryManager.fetchQuery(i,a,pt.fetchMore).then(function(p){if(r.queryManager.removeQuery(i),o.networkStatus===pt.fetchMore&&(o.networkStatus=u),d)r.queryManager.cache.batch({update:function(y){var x=t.updateQuery;x?y.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(w){return x(w,{fetchMoreResult:p.data,variables:a.variables})}):y.writeQuery({query:a.query,variables:a.variables,data:p.data})},onWatchUpdated:function(y){c.add(y.query)}});else{var v=r.getLast("result"),g=f(v.data,{fetchMoreResult:p.data,variables:a.variables});r.reportResult($($({},v),{networkStatus:u,loading:Tl(u),data:g}),r.variables)}return r.maskResult(p)}).finally(function(){d&&!c.has(r.query)&&dN(r)})},e.prototype.subscribeToMore=function(t){var r=this,a=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(i){var o=t.updateQuery;o&&r.updateQuery(function(u,c){return o(u,$({subscriptionData:i},c))})},error:function(i){if(t.onError){t.onError(i);return}globalThis.__DEV__!==!1&&Ce.error(23,i)}});return this.subscriptions.add(a),function(){r.subscriptions.delete(a)&&a.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.silentSetOptions=function(t){var r=iu(this.options,t||{});QR(this.options,r)},e.prototype.setVariables=function(t){return Et(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},pt.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var r=this.queryManager,a=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}),i=a.result,o=a.complete,u=t(i,{variables:this.variables,complete:!!o,previousData:i});u&&(r.cache.writeQuery({query:this.options.query,data:u,variables:this.variables}),r.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,r){if(r.nextFetchPolicy){var a=r.fetchPolicy,i=a===void 0?"cache-first":a,o=r.initialFetchPolicy,u=o===void 0?i:o;i==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(i,{reason:t,options:r,observable:this,initialFetchPolicy:u}):t==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},e.prototype.fetch=function(t,r,a){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,t,r,a)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var r=this,a=r.pollingInfo,i=r.options.pollInterval;if(!i||!this.hasObservers()){a&&(clearTimeout(a.timeout),delete this.pollingInfo);return}if(!(a&&a.interval===i)){Ce(i,24);var o=a||(this.pollingInfo={});o.interval=i;var u=function(){var f,d;t.pollingInfo&&(!Tl(t.queryInfo.networkStatus)&&!(!((d=(f=t.options).skipPollAttempt)===null||d===void 0)&&d.call(f))?t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},pt.poll).then(c,c):c())},c=function(){var f=t.pollingInfo;f&&(clearTimeout(f.timeout),f.timeout=setTimeout(u,f.interval))};c()}}},e.prototype.updateLastResult=function(t,r){r===void 0&&(r=this.variables);var a=this.getLastError();return a&&this.last&&!Et(r,this.last.variables)&&(a=void 0),this.last=$({result:this.queryManager.assumeImmutableResults?t:jD(t),variables:r},a?{error:a}:null)},e.prototype.reobserveAsConcast=function(t,r){var a=this;this.isTornDown=!1;var i=r===pt.refetch||r===pt.fetchMore||r===pt.poll,o=this.options.variables,u=this.options.fetchPolicy,c=iu(this.options,t||{}),f=i?c:QR(this.options,c),d=this.transformDocument(f.query);this.lastQuery=d,i||(this.updatePolling(),t&&t.variables&&!Et(t.variables,o)&&f.fetchPolicy!=="standby"&&(f.fetchPolicy===u||typeof f.nextFetchPolicy=="function")&&(this.applyNextFetchPolicy("variables-changed",f),r===void 0&&(r=pt.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=k0(f.fetchPolicy));var p=function(){a.concast===y&&(a.waitForOwnResult=!1)},v=f.variables&&$({},f.variables),g=this.fetch(f,r,d),y=g.concast,x=g.fromLink,w={next:function(_){Et(a.variables,v)&&(p(),a.reportResult(_,v))},error:function(_){Et(a.variables,v)&&(GD(_)||(_=new Ua({networkError:_})),p(),a.reportError(_,v))}};return!i&&(x||!this.concast)&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=y,this.observer=w),y.addObserver(w),y},e.prototype.reobserve=function(t,r){return AG(this.reobserveAsConcast(t,r).promise.then(this.maskResult))},e.prototype.resubscribeAfterError=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=this.last;this.resetLastResults();var i=this.subscribe.apply(this,t);return this.last=a,i},e.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},e.prototype.reportResult=function(t,r){var a=this.getLastError(),i=this.isDifferentFromLastResult(t,r);(a||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,r),(a||i)&&zf(this.observers,"next",this.maskResult(t))},e.prototype.reportError=function(t,r){var a=$($({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:pt.error,loading:!1});this.updateLastResult(a,r),zf(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e.prototype.transformDocument=function(t){return this.queryManager.transform(t)},e.prototype.maskResult=function(t){return t&&"data"in t?$($({},t),{data:this.queryManager.maskOperation({document:this.query,data:t.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):t},e}(Ft);qD(sx);function dN(n){var e=n.options,t=e.fetchPolicy,r=e.nextFetchPolicy;return t==="cache-and-network"||t==="network-only"?n.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(a,i){return this.nextFetchPolicy=r,typeof this.nextFetchPolicy=="function"?this.nextFetchPolicy(a,i):t}}):n.reobserve()}function U8(n){globalThis.__DEV__!==!1&&Ce.error(25,n.message,n.stack)}function pN(n){globalThis.__DEV__!==!1&&n&&globalThis.__DEV__!==!1&&Ce.debug(26,n)}function k0(n){return n==="network-only"||n==="no-cache"||n==="standby"}var pl=new(fu?WeakMap:Map);function D0(n,e){var t=n[e];typeof t=="function"&&(n[e]=function(){return pl.set(n,(pl.get(n)+1)%1e15),t.apply(this,arguments)})}function $R(n){n.notifyTimeout&&(clearTimeout(n.notifyTimeout),n.notifyTimeout=void 0)}var N0=function(){function n(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=e.cache;pl.has(r)||(pl.set(r,0),D0(r,"evict"),D0(r,"modify"),D0(r,"reset"))}return n.prototype.init=function(e){var t=e.networkStatus||pt.loading;return this.variables&&this.networkStatus!==pt.loading&&!Et(this.variables,e.variables)&&(t=pt.setVariables),Et(e.variables,this.variables)||(this.lastDiff=void 0,this.cancel()),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},n.prototype.reset=function(){$R(this),this.dirty=!1},n.prototype.resetDiff=function(){this.lastDiff=void 0},n.prototype.getDiff=function(){var e=this.getDiffOptions();if(this.lastDiff&&Et(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var t=this.observableQuery;if(t&&t.options.fetchPolicy==="no-cache")return{complete:!1};var r=this.cache.diff(e);return this.updateLastDiff(r,e),r},n.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},n.prototype.setDiff=function(e){var t=this,r,a=this.lastDiff&&this.lastDiff.diff;e&&!e.complete&&(!((r=this.observableQuery)===null||r===void 0)&&r.getLastError())||(this.updateLastDiff(e),!this.dirty&&!Et(a&&a.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0))))},n.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=t.getDiff();r.fromOptimisticTransaction?e.observe():dN(e)})):delete this.oqListener)},n.prototype.notify=function(){var e=this;$R(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},n.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Tl(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},n.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel();var e=this.observableQuery;e&&e.stopPolling()}},n.prototype.cancel=function(){var e;(e=this.cancelWatch)===null||e===void 0||e.call(this),this.cancelWatch=void 0},n.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var a=$($({},this.getDiffOptions(e)),{watcher:this,callback:function(i){return t.setDiff(i)}});(!this.lastWatch||!Et(a,this.lastWatch))&&(this.cancel(),this.cancelWatch=this.cache.watch(this.lastWatch=a))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(e,t){var r=this.lastWrite;return!(r&&r.dmCount===pl.get(this.cache)&&Et(t,r.variables)&&Et(e.data,r.result.data))},n.prototype.markResult=function(e,t,r,a){var i=this,o=new Zo,u=Jr(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&Jr(e.incremental)){var c=WD(this.getDiff().result,e);e.data=c}else if("hasNext"in e&&e.hasNext){var f=this.getDiff();e.data=o.merge(f.result,e.data)}this.graphQLErrors=u,r.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(r.variables)):a!==0&&(ux(e,r.errorPolicy)?this.cache.performTransaction(function(d){if(i.shouldWrite(e,r.variables))d.writeQuery({query:t,data:e.data,variables:r.variables,overwrite:a===1}),i.lastWrite={result:e,variables:r.variables,dmCount:pl.get(i.cache)};else if(i.lastDiff&&i.lastDiff.diff.complete){e.data=i.lastDiff.diff.result;return}var p=i.getDiffOptions(r.variables),v=d.diff(p);!i.stopped&&Et(i.variables,r.variables)&&i.updateWatch(r.variables),i.updateLastDiff(v,p),v.complete&&(e.data=v.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=pt.ready},n.prototype.markError=function(e){return this.networkStatus=pt.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},n}();function ux(n,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",r=!Bp(n);return!r&&t&&n.data&&(r=!0),r}var V8=Object.prototype.hasOwnProperty,KR=Object.create(null),j8=function(){function n(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new V1(ei["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Qi(!1),this.noCacheWarningsByQueryId=new Set;var r=new FD(function(i){return t.cache.transformDocument(i)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking;var a=e.documentTransform;this.documentTransform=a?r.concat(a).concat(r):r,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(ar(27))},n.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(e){return Eo(this,arguments,void 0,function(t){var r,a,i,o,u,c,f,d=t.mutation,p=t.variables,v=t.optimisticResponse,g=t.updateQueries,y=t.refetchQueries,x=y===void 0?[]:y,w=t.awaitRefetchQueries,_=w===void 0?!1:w,S=t.update,C=t.onQueryUpdated,R=t.fetchPolicy,T=R===void 0?((c=this.defaultOptions.mutate)===null||c===void 0?void 0:c.fetchPolicy)||"network-only":R,O=t.errorPolicy,D=O===void 0?((f=this.defaultOptions.mutate)===null||f===void 0?void 0:f.errorPolicy)||"none":O,N=t.keepRootFields,k=t.context;return So(this,function(I){switch(I.label){case 0:return Ce(d,28),Ce(T==="network-only"||T==="no-cache",29),r=this.generateMutationId(),d=this.cache.transformForLink(this.transform(d)),a=this.getDocumentInfo(d).hasClientExports,p=this.getVariables(d,p),a?[4,this.localState.addExportedVariables(d,p,k)]:[3,2];case 1:p=I.sent(),I.label=2;case 2:return i=this.mutationStore&&(this.mutationStore[r]={mutation:d,variables:p,loading:!0,error:null}),o=v&&this.markMutationOptimistic(v,{mutationId:r,document:d,variables:p,fetchPolicy:T,errorPolicy:D,context:k,updateQueries:g,update:S,keepRootFields:N}),this.broadcastQueries(),u=this,[2,new Promise(function(B,U){return C0(u.getObservableFromLink(d,$($({},k),{optimisticResponse:o?v:void 0}),p,{},!1),function(ee){if(Bp(ee)&&D==="none")throw new Ua({graphQLErrors:Jb(ee)});i&&(i.loading=!1,i.error=null);var te=$({},ee);return typeof x=="function"&&(x=x(te)),D==="ignore"&&Bp(te)&&delete te.errors,u.markMutationResult({mutationId:r,result:te,document:d,variables:p,fetchPolicy:T,errorPolicy:D,context:k,update:S,updateQueries:g,awaitRefetchQueries:_,refetchQueries:x,removeOptimistic:o?r:void 0,onQueryUpdated:C,keepRootFields:N})}).subscribe({next:function(ee){u.broadcastQueries(),(!("hasNext"in ee)||ee.hasNext===!1)&&B($($({},ee),{data:u.maskOperation({document:d,data:ee.data,fetchPolicy:T,id:r})}))},error:function(ee){i&&(i.loading=!1,i.error=ee),o&&u.cache.removeOptimistic(r),u.broadcastQueries(),U(ee instanceof Ua?ee:new Ua({networkError:ee}))}})})]}})})},n.prototype.markMutationResult=function(e,t){var r=this;t===void 0&&(t=this.cache);var a=e.result,i=[],o=e.fetchPolicy==="no-cache";if(!o&&ux(a,e.errorPolicy)){if(Cl(a)||i.push({result:a.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),Cl(a)&&Jr(a.incremental)){var u=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),c=void 0;u.result&&(c=WD(u.result,a)),typeof c<"u"&&(a.data=c,i.push({result:c,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var f=e.updateQueries;f&&this.queries.forEach(function(p,v){var g=p.observableQuery,y=g&&g.queryName;if(!(!y||!V8.call(f,y))){var x=f[y],w=r.queries.get(v),_=w.document,S=w.variables,C=t.diff({query:_,variables:S,returnPartialData:!0,optimistic:!1}),R=C.result,T=C.complete;if(T&&R){var O=x(R,{mutationResult:a,queryName:_&&Df(_)||void 0,queryVariables:S});O&&i.push({result:O,dataId:"ROOT_QUERY",query:_,variables:S})}}})}if(i.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var d=[];if(this.refetchQueries({updateCache:function(p){o||i.forEach(function(x){return p.write(x)});var v=e.update,g=!MG(a)||Cl(a)&&!a.hasNext;if(v){if(!o){var y=p.diff({id:"ROOT_MUTATION",query:r.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});y.complete&&(a=$($({},a),{data:y.result}),"incremental"in a&&delete a.incremental,"hasNext"in a&&delete a.hasNext)}g&&v(p,a,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&g&&p.modify({id:"ROOT_MUTATION",fields:function(x,w){var _=w.fieldName,S=w.DELETE;return _==="__typename"?x:S}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(p){return d.push(p)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(d).then(function(){return a})}return Promise.resolve(a)},n.prototype.markMutationOptimistic=function(e,t){var r=this,a=typeof e=="function"?e(t.variables,{IGNORE:KR}):e;return a===KR?!1:(this.cache.recordOptimisticTransaction(function(i){try{r.markMutationResult($($({},t),{result:{data:a}}),i)}catch(o){globalThis.__DEV__!==!1&&Ce.error(o)}},t.mutationId),!0)},n.prototype.fetchQuery=function(e,t,r){return this.fetchConcastWithInfo(e,t,r).concast.promise},n.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},n.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},n.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},n.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var r={hasClientExports:vH(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:gh(["nonreactive"],e),nonReactiveQuery:yG(e),clientQuery:this.localState.clientQuery(e),serverQuery:PD([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),defaultVars:q1(au(e)),asQuery:$($({},e),{definitions:e.definitions.map(function(a){return a.kind==="OperationDefinition"&&a.operation!=="query"?$($({},a),{operation:"query"}):a})})};t.set(e,r)}return t.get(e)},n.prototype.getVariables=function(e,t){return $($({},this.getDocumentInfo(e).defaultVars),t)},n.prototype.watchQuery=function(e){var t=this.transform(e.query);e=$($({},e),{variables:this.getVariables(t,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var r=new N0(this),a=new sx({queryManager:this,queryInfo:r,options:e});return a.lastQuery=t,this.queries.set(a.queryId,r),r.init({document:t,observableQuery:a,variables:a.variables}),a},n.prototype.query=function(e,t){var r=this;t===void 0&&(t=this.generateQueryId()),Ce(e.query,30),Ce(e.query.kind==="Document",31),Ce(!e.returnPartialData,32),Ce(!e.pollInterval,33);var a=this.transform(e.query);return this.fetchQuery(t,$($({},e),{query:a})).then(function(i){return i&&$($({},i),{data:r.maskOperation({document:a,data:i.data,fetchPolicy:e.fetchPolicy,id:t})})}).finally(function(){return r.stopQuery(t)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},n.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(ar(34)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=pt.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},n.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var r=new Map,a=new Map,i=new Map,o=new Set;return Array.isArray(e)&&e.forEach(function(u){if(typeof u=="string")a.set(u,u),i.set(u,!1);else if(WH(u)){var c=Fs(t.transform(u));a.set(c,Df(u)),i.set(c,!1)}else Yt(u)&&u.query&&o.add(u)}),this.queries.forEach(function(u,c){var f=u.observableQuery,d=u.document;if(f){if(e==="all"){r.set(c,f);return}var p=f.queryName,v=f.options.fetchPolicy;if(v==="standby"||e==="active"&&!f.hasObservers())return;(e==="active"||p&&i.has(p)||d&&i.has(Fs(d)))&&(r.set(c,f),p&&i.set(p,!0),d&&i.set(Fs(d),!0))}}),o.size&&o.forEach(function(u){var c=Vb("legacyOneTimeQuery"),f=t.getQuery(c).init({document:u.query,variables:u.variables}),d=new sx({queryManager:t,queryInfo:f,options:$($({},u),{fetchPolicy:"network-only"})});Ce(d.queryId===c),f.setObservableQuery(d),r.set(c,d)}),globalThis.__DEV__!==!1&&i.size&&i.forEach(function(u,c){if(!u){var f=a.get(c);f?globalThis.__DEV__!==!1&&Ce.warn(35,f):globalThis.__DEV__!==!1&&Ce.warn(36)}}),r},n.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(a,i){var o=a.options.fetchPolicy;a.resetLastResults(),(e||o!=="standby"&&o!=="cache-only")&&r.push(a.refetch()),t.getQuery(i).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},n.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},n.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,a=e.variables,i=e.fetchPolicy,o=e.errorPolicy,u=o===void 0?"none":o,c=e.context,f=c===void 0?{}:c,d=e.extensions,p=d===void 0?{}:d;r=this.transform(r),a=this.getVariables(r,a);var v=function(y){return t.getObservableFromLink(r,f,y,p).map(function(x){i!=="no-cache"&&(ux(x,u)&&t.cache.write({query:r,result:x.data,dataId:"ROOT_SUBSCRIPTION",variables:y}),t.broadcastQueries());var w=Bp(x),_=XG(x);if(w||_){var S={};if(w&&(S.graphQLErrors=x.errors),_&&(S.protocolErrors=x.extensions[Z1]),u==="none"||_)throw new Ua(S)}return u==="ignore"&&delete x.errors,x})};if(this.getDocumentInfo(r).hasClientExports){var g=this.localState.addExportedVariables(r,a,f).then(v);return new Ft(function(y){var x=null;return g.then(function(w){return x=w.subscribe(y)},y.error),function(){return x&&x.unsubscribe()}})}return v(a)},n.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},n.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(e,t,r,a,i){var o=this,u;i===void 0&&(i=(u=t==null?void 0:t.queryDeduplication)!==null&&u!==void 0?u:this.queryDeduplication);var c,f=this.getDocumentInfo(e),d=f.serverQuery,p=f.clientQuery;if(d){var v=this,g=v.inFlightLinkObservables,y=v.link,x={query:d,variables:r,operationName:Df(d)||void 0,context:this.prepareContext($($({},t),{forceFetch:!i})),extensions:a};if(t=x.context,i){var w=Fs(d),_=qo(r),S=g.lookup(w,_);if(c=S.observable,!c){var C=new ul([ex(y,x)]);c=S.observable=C,C.beforeNext(function R(T,O){T==="next"&&"hasNext"in O&&O.hasNext?C.beforeNext(R):g.remove(w,_)})}}else c=new ul([ex(y,x)])}else c=new ul([Ft.of({data:{}})]),t=this.prepareContext(t);return p&&(c=C0(c,function(R){return o.localState.runResolvers({document:p,remoteResult:R,context:t,variables:r})})),c},n.prototype.getResultsFromLink=function(e,t,r){var a=e.lastRequestId=this.generateRequestId(),i=this.cache.transformForLink(r.query);return C0(this.getObservableFromLink(i,r.context,r.variables),function(o){var u=Jb(o),c=u.length>0,f=r.errorPolicy;if(a>=e.lastRequestId){if(c&&f==="none")throw e.markError(new Ua({graphQLErrors:u}));e.markResult(o,i,r,t),e.markReady()}var d={data:o.data,loading:!1,networkStatus:pt.ready};return c&&f==="none"&&(d.data=void 0),c&&f!=="ignore"&&(d.errors=u,d.networkStatus=pt.error),d},function(o){var u=GD(o)?o:new Ua({networkError:o});throw a>=e.lastRequestId&&e.markError(u),u})},n.prototype.fetchConcastWithInfo=function(e,t,r,a){var i=this;r===void 0&&(r=pt.loading),a===void 0&&(a=t.query);var o=this.getVariables(a,t.variables),u=this.getQuery(e),c=this.defaultOptions.watchQuery,f=t.fetchPolicy,d=f===void 0?c&&c.fetchPolicy||"cache-first":f,p=t.errorPolicy,v=p===void 0?c&&c.errorPolicy||"none":p,g=t.returnPartialData,y=g===void 0?!1:g,x=t.notifyOnNetworkStatusChange,w=x===void 0?!1:x,_=t.context,S=_===void 0?{}:_,C=Object.assign({},t,{query:a,variables:o,fetchPolicy:d,errorPolicy:v,returnPartialData:y,notifyOnNetworkStatusChange:w,context:S}),R=function(k){C.variables=k;var I=i.fetchQueryByPolicy(u,C,r);return C.fetchPolicy!=="standby"&&I.sources.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",t),I},T=function(){return i.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(k){T(),setTimeout(function(){return O.cancel(k)})});var O,D;if(this.getDocumentInfo(C.query).hasClientExports)O=new ul(this.localState.addExportedVariables(C.query,C.variables,C.context).then(R).then(function(k){return k.sources})),D=!0;else{var N=R(C.variables);D=N.fromLink,O=new ul(N.sources)}return O.promise.then(T,T),{concast:O,fromLink:D}},n.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,a=e.include,i=e.optimistic,o=i===void 0?!1:i,u=e.removeOptimistic,c=u===void 0?o?Vb("refetchQueries"):void 0:u,f=e.onQueryUpdated,d=new Map;a&&this.getObservableQueries(a).forEach(function(v,g){d.set(g,{oq:v,lastDiff:t.getQuery(g).getDiff()})});var p=new Map;return r&&this.cache.batch({update:r,optimistic:o&&c||!1,removeOptimistic:c,onWatchUpdated:function(v,g,y){var x=v.watcher instanceof N0&&v.watcher.observableQuery;if(x){if(f){d.delete(x.queryId);var w=f(x,g,y);return w===!0&&(w=x.refetch()),w!==!1&&p.set(x,w),w}f!==null&&d.set(x.queryId,{oq:x,lastDiff:y,diff:g})}}}),d.size&&d.forEach(function(v,g){var y=v.oq,x=v.lastDiff,w=v.diff,_;if(f){if(!w){var S=y.queryInfo;S.reset(),w=S.getDiff()}_=f(y,w,x)}(!f||_===!0)&&(_=y.refetch()),_!==!1&&p.set(y,_),g.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(g)}),c&&this.cache.removeOptimistic(c),p},n.prototype.maskOperation=function(e){var t,r,a,i=e.document,o=e.data;if(globalThis.__DEV__!==!1){var u=e.fetchPolicy,c=e.id,f=(t=au(i))===null||t===void 0?void 0:t.operation,d=((r=f==null?void 0:f[0])!==null&&r!==void 0?r:"o")+c;this.dataMasking&&u==="no-cache"&&!RH(i)&&!this.noCacheWarningsByQueryId.has(d)&&(this.noCacheWarningsByQueryId.add(d),globalThis.__DEV__!==!1&&Ce.warn(37,(a=Df(i))!==null&&a!==void 0?a:"Unnamed ".concat(f??"operation")))}return this.dataMasking?w8(o,i,this.cache):o},n.prototype.maskFragment=function(e){var t=e.data,r=e.fragment,a=e.fragmentName;return this.dataMasking?JD(t,r,this.cache,a):t},n.prototype.fetchQueryByPolicy=function(e,t,r){var a=this,i=t.query,o=t.variables,u=t.fetchPolicy,c=t.refetchWritePolicy,f=t.errorPolicy,d=t.returnPartialData,p=t.context,v=t.notifyOnNetworkStatusChange,g=e.networkStatus;e.init({document:i,variables:o,networkStatus:r});var y=function(){return e.getDiff()},x=function(R,T){T===void 0&&(T=e.networkStatus||pt.loading);var O=R.result;globalThis.__DEV__!==!1&&!d&&!Et(O,{})&&pN(R.missing);var D=function(N){return Ft.of($({data:N,loading:Tl(T),networkStatus:T},R.complete?null:{partial:!0}))};return O&&a.getDocumentInfo(i).hasForcedResolvers?a.localState.runResolvers({document:i,remoteResult:{data:O},context:p,variables:o,onlyRunForcedResolvers:!0}).then(function(N){return D(N.data||void 0)}):f==="none"&&T===pt.refetch&&Array.isArray(R.missing)?D(void 0):D(O)},w=u==="no-cache"?0:r===pt.refetch&&c!=="merge"?1:2,_=function(){return a.getResultsFromLink(e,w,{query:i,variables:o,context:p,fetchPolicy:u,errorPolicy:f})},S=v&&typeof g=="number"&&g!==r&&Tl(r);switch(u){default:case"cache-first":{var C=y();return C.complete?{fromLink:!1,sources:[x(C,e.markReady())]}:d||S?{fromLink:!0,sources:[x(C),_()]}:{fromLink:!0,sources:[_()]}}case"cache-and-network":{var C=y();return C.complete||d||S?{fromLink:!0,sources:[x(C),_()]}:{fromLink:!0,sources:[_()]}}case"cache-only":return{fromLink:!1,sources:[x(y(),e.markReady())]};case"network-only":return S?{fromLink:!0,sources:[x(y()),_()]}:{fromLink:!0,sources:[_()]};case"no-cache":return S?{fromLink:!0,sources:[x(e.getDiff()),_()]}:{fromLink:!0,sources:[_()]};case"standby":return{fromLink:!1,sources:[]}}},n.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new N0(this,e)),this.queries.get(e)},n.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return $($($({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},n}(),q8=function(){function n(e){var t=e.cache,r=e.client,a=e.resolvers,i=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,r&&(this.client=r),a&&this.addResolvers(a),i&&this.setFragmentMatcher(i)}return n.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){t.resolvers=vR(t.resolvers,r)}):this.resolvers=vR(this.resolvers,e)},n.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(e){return Eo(this,arguments,void 0,function(t){var r=t.document,a=t.remoteResult,i=t.context,o=t.variables,u=t.onlyRunForcedResolvers,c=u===void 0?!1:u;return So(this,function(f){return r?[2,this.resolveDocument(r,a.data,i,o,this.fragmentMatcher,c).then(function(d){return $($({},a),{data:d.result})})]:[2,a]})})},n.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(e){return gh(["client"],e)&&this.resolvers?e:null},n.prototype.serverQuery=function(e){return BD(e)},n.prototype.prepareContext=function(e){var t=this.cache;return $($({},e),{cache:t,getCacheKey:function(r){return t.identify(r)}})},n.prototype.addExportedVariables=function(e){return Eo(this,arguments,void 0,function(t,r,a){return r===void 0&&(r={}),a===void 0&&(a={}),So(this,function(i){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,r)||{},this.prepareContext(a),r).then(function(o){return $($({},r),o.exportedVariables)})]:[2,$({},r)]})})},n.prototype.shouldForceResolvers=function(e){var t=!1;return wa(e,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(t=r.arguments.some(function(a){return a.name.value==="always"&&a.value.kind==="BooleanValue"&&a.value.value===!0}),t))return fm}}}),t},n.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:gG(e),variables:t,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(e,t){return Eo(this,arguments,void 0,function(r,a,i,o,u,c){var f,d,p,v,g,y,x,w,_,S,C;return i===void 0&&(i={}),o===void 0&&(o={}),u===void 0&&(u=function(){return!0}),c===void 0&&(c=!1),So(this,function(R){return f=Vh(r),d=dc(r),p=fc(d),v=this.collectSelectionsToResolve(f,p),g=f.operation,y=g?g.charAt(0).toUpperCase()+g.slice(1):"Query",x=this,w=x.cache,_=x.client,S={fragmentMap:p,context:$($({},i),{cache:w,client:_}),variables:o,fragmentMatcher:u,defaultOperationType:y,exportedVariables:{},selectionsToResolve:v,onlyRunForcedResolvers:c},C=!1,[2,this.resolveSelectionSet(f.selectionSet,C,a,S).then(function(T){return{result:T,exportedVariables:S.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(e,t,r,a){return Eo(this,void 0,void 0,function(){var i,o,u,c,f,d=this;return So(this,function(p){return i=a.fragmentMap,o=a.context,u=a.variables,c=[r],f=function(v){return Eo(d,void 0,void 0,function(){var g,y;return So(this,function(x){return!t&&!a.selectionsToResolve.has(v)?[2]:Uh(v,u)?Xo(v)?[2,this.resolveField(v,t,r,a).then(function(w){var _;typeof w<"u"&&c.push((_={},_[zi(v)]=w,_))})]:(nG(v)?g=v:(g=i[v.name.value],Ce(g,19,v.name.value)),g&&g.typeCondition&&(y=g.typeCondition.name.value,a.fragmentMatcher(r,y,o))?[2,this.resolveSelectionSet(g.selectionSet,t,r,a).then(function(w){c.push(w)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(f)).then(function(){return ym(c)})]})})},n.prototype.resolveField=function(e,t,r,a){return Eo(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y=this;return So(this,function(x){return r?(i=a.variables,o=e.name.value,u=zi(e),c=o!==u,f=r[u]||r[o],d=Promise.resolve(f),(!a.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(p=r.__typename||a.defaultOperationType,v=this.resolvers&&this.resolvers[p],v&&(g=v[c?o:u],g&&(d=Promise.resolve(ew.withValue(this.cache,g,[r,pm(e,i),a.context,{field:e,fragmentMap:a.fragmentMap}]))))),[2,d.then(function(w){var _,S;if(w===void 0&&(w=f),e.directives&&e.directives.forEach(function(R){R.name.value==="export"&&R.arguments&&R.arguments.forEach(function(T){T.name.value==="as"&&T.value.kind==="StringValue"&&(a.exportedVariables[T.value.value]=w)})}),!e.selectionSet||w==null)return w;var C=(S=(_=e.directives)===null||_===void 0?void 0:_.some(function(R){return R.name.value==="client"}))!==null&&S!==void 0?S:!1;if(Array.isArray(w))return y.resolveSubSelectedArray(e,t||C,w,a);if(e.selectionSet)return y.resolveSelectionSet(e.selectionSet,t||C,w,a)})]):[2,null]})})},n.prototype.resolveSubSelectedArray=function(e,t,r,a){var i=this;return Promise.all(r.map(function(o){if(o===null)return null;if(Array.isArray(o))return i.resolveSubSelectedArray(e,t,o,a);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,t,o,a)}))},n.prototype.collectSelectionsToResolve=function(e,t){var r=function(o){return!Array.isArray(o)},a=this.selectionsToResolveCache;function i(o){if(!a.has(o)){var u=new Set;a.set(o,u),wa(o,{Directive:function(c,f,d,p,v){c.name.value==="client"&&v.forEach(function(g){r(g)&&oR(g)&&u.add(g)})},FragmentSpread:function(c,f,d,p,v){var g=t[c.name.value];Ce(g,20,c.name.value);var y=i(g);y.size>0&&(v.forEach(function(x){r(x)&&oR(x)&&u.add(x)}),u.add(c),y.forEach(function(x){u.add(x)}))}})}return a.get(o)}return i(e)},n}(),XR=!1,W8=function(){function n(e){var t=this,r;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!e.cache)throw ar(16);var a=e.uri,i=e.credentials,o=e.headers,u=e.cache,c=e.documentTransform,f=e.ssrMode,d=f===void 0?!1:f,p=e.ssrForceFetchDelay,v=p===void 0?0:p,g=e.connectToDevTools,y=e.queryDeduplication,x=y===void 0?!0:y,w=e.defaultOptions,_=e.defaultContext,S=e.assumeImmutableResults,C=S===void 0?u.assumeImmutableResults:S,R=e.resolvers,T=e.typeDefs,O=e.fragmentMatcher,D=e.name,N=e.version,k=e.devtools,I=e.dataMasking,B=e.link;B||(B=a?new d8({uri:a,credentials:i,headers:o}):jh.empty()),this.link=B,this.cache=u,this.disableNetworkFetches=d||v>0,this.queryDeduplication=x,this.defaultOptions=w||Object.create(null),this.typeDefs=T,this.devtoolsConfig=$($({},k),{enabled:(r=k==null?void 0:k.enabled)!==null&&r!==void 0?r:g}),this.devtoolsConfig.enabled===void 0&&(this.devtoolsConfig.enabled=globalThis.__DEV__!==!1),v&&setTimeout(function(){return t.disableNetworkFetches=!1},v),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=M1,this.localState=new q8({cache:u,client:this,resolvers:R,fragmentMatcher:O}),this.queryManager=new j8({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:_,documentTransform:c,queryDeduplication:x,ssrMode:d,dataMasking:!!I,clientAwareness:{name:D,version:N},localState:this.localState,assumeImmutableResults:C,onBroadcast:this.devtoolsConfig.enabled?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return n.prototype.connectToDevTools=function(){if(!(typeof window>"u")){var e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this,!XR&&globalThis.__DEV__!==!1&&(XR=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol)&&setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var r=window.navigator,a=r&&r.userAgent,i=void 0;typeof a=="string"&&(a.indexOf("Chrome/")>-1?i="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":a.indexOf("Firefox/")>-1&&(i="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),i&&globalThis.__DEV__!==!1&&Ce.log("Download the Apollo DevTools for a better development experience: %s",i)}},1e4))}},Object.defineProperty(n.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Uf(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=$($({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},n.prototype.query=function(e){return this.defaultOptions.query&&(e=Uf(this.defaultOptions.query,e)),Ce(e.fetchPolicy!=="cache-and-network",17),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=$($({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},n.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Uf(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},n.prototype.subscribe=function(e){var t=this,r=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(e).map(function(a){return $($({},a),{data:t.queryManager.maskOperation({document:e.query,data:a.data,fetchPolicy:e.fetchPolicy,id:r})})})},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},n.prototype.watchFragment=function(e){var t;return this.cache.watchFragment($($({},e),(t={},t[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,t)))},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},n.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},n.prototype.__requestRaw=function(e){return ex(this.link,e)},n.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},n.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},n.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},n.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),r=[],a=[];t.forEach(function(o,u){r.push(u),a.push(o)});var i=Promise.all(a);return i.queries=r,i.results=a,i.catch(function(o){globalThis.__DEV__!==!1&&Ce.debug(18,o)}),i},n.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},n.prototype.extract=function(e){return this.cache.extract(e)},n.prototype.restore=function(e){return this.cache.restore(e)},n.prototype.addResolvers=function(e){this.localState.addResolvers(e)},n.prototype.setResolvers=function(e){this.localState.setResolvers(e)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},n.prototype.setLink=function(e){this.link=this.queryManager.link=e},Object.defineProperty(n.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),n}();globalThis.__DEV__!==!1&&(W8.prototype.getMemoryInternals=FH);var Vp=new Map,lx=new Map,vN=!0,Mv=!1;function mN(n){return n.replace(/[\s,]+/g," ").trim()}function H8(n){return mN(n.source.body.substring(n.start,n.end))}function G8(n){var e=new Set,t=[];return n.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var a=r.name.value,i=H8(r.loc),o=lx.get(a);o&&!o.has(i)?vN&&console.warn("Warning: fragment with name "+a+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||lx.set(a,o=new Set),o.add(i),e.has(i)||(e.add(i),t.push(r))}else t.push(r)}),$($({},n),{definitions:t})}function Q8(n){var e=new Set(n.definitions);e.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(a){var i=r[a];i&&typeof i=="object"&&e.add(i)})});var t=n.loc;return t&&(delete t.startToken,delete t.endToken),n}function $8(n){var e=mN(n);if(!Vp.has(e)){var t=iH(n,{experimentalFragmentVariables:Mv,allowLegacyFragmentVariables:Mv});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Vp.set(e,Q8(G8(t)))}return Vp.get(e)}function wh(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof n=="string"&&(n=[n]);var r=n[0];return e.forEach(function(a,i){a&&a.kind==="Document"?r+=a.loc.source.body:r+=a,r+=n[i+1]}),$8(r)}function K8(){Vp.clear(),lx.clear()}function X8(){vN=!1}function Y8(){Mv=!0}function Z8(){Mv=!1}var Cf={gql:wh,resetCaches:K8,disableFragmentWarnings:X8,enableExperimentalFragmentVariables:Y8,disableExperimentalFragmentVariables:Z8};(function(n){n.gql=Cf.gql,n.resetCaches=Cf.resetCaches,n.disableFragmentWarnings=Cf.disableFragmentWarnings,n.enableExperimentalFragmentVariables=Cf.enableExperimentalFragmentVariables,n.disableExperimentalFragmentVariables=Cf.disableExperimentalFragmentVariables})(wh||(wh={}));wh.default=wh;var I0={exports:{}},YR;function J8(){return YR||(YR=1,function(n){n.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=void 0,n.exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=void 0,n.exports.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=void 0,Object.assign(n.exports,Fv())}(I0)),I0.exports}var Nt=J8();const e9=fx(Nt),gN=zM({__proto__:null,default:e9},[Nt]);var ZR=U1?Symbol.for("__APOLLO_CONTEXT__"):"__APOLLO_CONTEXT__";function aw(){Ce("createContext"in gN,54);var n=Nt.createContext[ZR];return n||(Object.defineProperty(Nt.createContext,ZR,{value:n=Nt.createContext({}),enumerable:!1,writable:!1,configurable:!0}),n.displayName="ApolloContext"),n}var X9=function(n){var e=n.client,t=n.children,r=aw(),a=Nt.useContext(r),i=Nt.useMemo(function(){return $($({},a),{client:e||a.client})},[a,e]);return Ce(i.client,55),Nt.createElement(r.Provider,{value:i},t)};function iw(n){var e=Nt.useContext(aw()),t=n||e.client;return Ce(!!t,58),t}var JR=!1,t9="useSyncExternalStore",n9=gN[t9],r9=n9||function(n,e,t){var r=e();globalThis.__DEV__!==!1&&!JR&&r!==e()&&(JR=!0,globalThis.__DEV__!==!1&&Ce.error(68));var a=Nt.useState({inst:{value:r,getSnapshot:e}}),i=a[0].inst,o=a[1];return SH?Nt.useLayoutEffect(function(){Object.assign(i,{value:r,getSnapshot:e}),M0(i)&&o({inst:i})},[n,r,e]):Object.assign(i,{value:r,getSnapshot:e}),Nt.useEffect(function(){return M0(i)&&o({inst:i}),n(function(){M0(i)&&o({inst:i})})},[n]),r};function M0(n){var e=n.value,t=n.getSnapshot;try{return e!==t()}catch{return!0}}var Ka;(function(n){n[n.Query=0]="Query",n[n.Mutation=1]="Mutation",n[n.Subscription=2]="Subscription"})(Ka||(Ka={}));var Ls;function eT(n){var e;switch(n){case Ka.Query:e="Query";break;case Ka.Mutation:e="Mutation";break;case Ka.Subscription:e="Subscription";break}return e}function yN(n){Ls||(Ls=new V1(ei.parser||1e3));var e=Ls.get(n);if(e)return e;var t,r,a;Ce(!!n&&!!n.kind,70,n);for(var i=[],o=[],u=[],c=[],f=0,d=n.definitions;f<d.length;f++){var p=d[f];if(p.kind==="FragmentDefinition"){i.push(p);continue}if(p.kind==="OperationDefinition")switch(p.operation){case"query":o.push(p);break;case"mutation":u.push(p);break;case"subscription":c.push(p);break}}Ce(!i.length||o.length||u.length||c.length,71),Ce(o.length+u.length+c.length<=1,72,n,o.length,c.length,u.length),r=o.length?Ka.Query:Ka.Mutation,!o.length&&!u.length&&(r=Ka.Subscription);var v=o.length?o:u.length?u:c;Ce(v.length===1,73,n,v.length);var g=v[0];t=g.variableDefinitions||[],g.name&&g.name.kind==="Name"?a=g.name.value:a="data";var y={name:a,type:r,variables:t};return Ls.set(n,y),y}yN.resetCache=function(){Ls=void 0};globalThis.__DEV__!==!1&&j1("parser",function(){return Ls?Ls.size:0});function bN(n,e){var t=yN(n),r=eT(e),a=eT(t.type);Ce(t.type===e,74,r,r,a)}var a9=mD?Nt.useLayoutEffect:Nt.useEffect,i9=Symbol.for("apollo.hook.wrappers");function o9(n,e,t){var r=t.queryManager,a=r&&r[i9],i=a&&a[n];return i?i(e):e}var s9=Object.prototype.hasOwnProperty;function tT(){}var jp=Symbol();function Y9(n,e){return e===void 0&&(e=Object.create(null)),o9("useQuery",u9,iw(e&&e.client))(n,e)}function u9(n,e){var t=c9(n,e),r=t.result,a=t.obsQueryFields;return Nt.useMemo(function(){return $($({},r),a)},[r,a])}function l9(n,e,t,r,a){function i(p){var v;bN(e,Ka.Query);var g={client:n,query:e,observable:r&&r.getSSRObservable(a())||n.watchQuery(xN(void 0,n,t,a())),resultData:{previousData:(v=p==null?void 0:p.resultData.current)===null||v===void 0?void 0:v.data}};return g}var o=Nt.useState(i),u=o[0],c=o[1];function f(p){var v,g;Object.assign(u.observable,(v={},v[jp]=p,v));var y=u.resultData;c($($({},u),{query:p.query,resultData:Object.assign(y,{previousData:((g=y.current)===null||g===void 0?void 0:g.data)||y.previousData,current:void 0})}))}if(n!==u.client||e!==u.query){var d=i(u);return c(d),[d,f]}return[u,f]}function c9(n,e){var t=iw(e.client),r=Nt.useContext(aw()).renderPromises,a=!!r,i=t.disableNetworkFetches,o=e.ssr!==!1&&!e.skip,u=e.partialRefetch,c=p9(t,n,e,a),f=l9(t,n,e,r,c),d=f[0],p=d.observable,v=d.resultData,g=f[1],y=c(p);d9(v,p,t,e,y);var x=Nt.useMemo(function(){return y9(p)},[p]);h9(p,r,o);var w=f9(v,p,t,e,y,i,u,a,{onCompleted:e.onCompleted||tT,onError:e.onError||tT});return{result:w,obsQueryFields:x,observable:p,resultData:v,client:t,onQueryExecuted:g}}function f9(n,e,t,r,a,i,o,u,c){var f=Nt.useRef(c);Nt.useEffect(function(){f.current=c});var d=(u||i)&&r.ssr===!1&&!r.skip?_N:r.skip||a.fetchPolicy==="standby"?EN:void 0,p=n.previousData,v=Nt.useMemo(function(){return d&&wN(d,p,e,t)},[t,e,d,p]);return r9(Nt.useCallback(function(g){if(u)return function(){};var y=function(){var _=n.current,S=e.getCurrentResult();_&&_.loading===S.loading&&_.networkStatus===S.networkStatus&&Et(_.data,S.data)||cx(S,n,e,t,o,g,f.current)},x=function(_){if(w.current.unsubscribe(),w.current=e.resubscribeAfterError(y,x),!s9.call(_,"graphQLErrors"))throw _;var S=n.current;(!S||S&&S.loading||!Et(_,S.error))&&cx({data:S&&S.data,error:_,loading:!1,networkStatus:pt.error},n,e,t,o,g,f.current)},w={current:e.subscribe(y,x)};return function(){setTimeout(function(){return w.current.unsubscribe()})}},[i,u,e,n,o,t]),function(){return v||nT(n,e,f.current,o,t)},function(){return v||nT(n,e,f.current,o,t)})}function h9(n,e,t){e&&t&&(e.registerSSRObservable(n),n.getCurrentResult().loading&&e.addObservableQueryPromise(n))}function d9(n,e,t,r,a){var i;e[jp]&&!Et(e[jp],a)&&(e.reobserve(xN(e,t,r,a)),n.previousData=((i=n.current)===null||i===void 0?void 0:i.data)||n.previousData,n.current=void 0),e[jp]=a}function p9(n,e,t,r){t===void 0&&(t={});var a=t.skip;t.ssr,t.onCompleted,t.onError;var i=t.defaultOptions,o=ma(t,["skip","ssr","onCompleted","onError","defaultOptions"]);return function(u){var c=Object.assign(o,{query:e});return r&&(c.fetchPolicy==="network-only"||c.fetchPolicy==="cache-and-network")&&(c.fetchPolicy="cache-first"),c.variables||(c.variables={}),a?(c.initialFetchPolicy=c.initialFetchPolicy||c.fetchPolicy||rT(i,n.defaultOptions),c.fetchPolicy="standby"):c.fetchPolicy||(c.fetchPolicy=(u==null?void 0:u.options.initialFetchPolicy)||rT(i,n.defaultOptions)),c}}function xN(n,e,t,r){var a=[],i=e.defaultOptions.watchQuery;return i&&a.push(i),t.defaultOptions&&a.push(t.defaultOptions),a.push(iu(n&&n.options,r)),a.reduce(Uf)}function cx(n,e,t,r,a,i,o){var u=e.current;u&&u.data&&(e.previousData=u.data),!n.error&&Jr(n.errors)&&(n.error=new Ua({graphQLErrors:n.errors})),e.current=wN(g9(n,t,a),e.previousData,t,r),i(),v9(n,u==null?void 0:u.networkStatus,o)}function v9(n,e,t){if(!n.loading){var r=m9(n);Promise.resolve().then(function(){r?t.onError(r):n.data&&e!==n.networkStatus&&n.networkStatus===pt.ready&&t.onCompleted(n.data)}).catch(function(a){globalThis.__DEV__!==!1&&Ce.warn(a)})}}function nT(n,e,t,r,a){return n.current||cx(e.getCurrentResult(),n,e,a,r,function(){},t),n.current}function rT(n,e){var t;return(n==null?void 0:n.fetchPolicy)||((t=e==null?void 0:e.watchQuery)===null||t===void 0?void 0:t.fetchPolicy)||"cache-first"}function m9(n){return Jr(n.errors)?new Ua({graphQLErrors:n.errors}):n.error}function wN(n,e,t,r){var a=n.data;n.partial;var i=ma(n,["data","partial"]),o=$($({data:a},i),{client:r,observable:t,variables:t.variables,called:n!==_N&&n!==EN,previousData:e});return o}function g9(n,e,t){return n.partial&&t&&!n.loading&&(!n.data||Object.keys(n.data).length===0)&&e.options.fetchPolicy!=="cache-only"?(e.refetch(),$($({},n),{loading:!0,networkStatus:pt.refetch})):n}var _N=rc({loading:!0,data:void 0,error:void 0,networkStatus:pt.loading}),EN=rc({loading:!1,data:void 0,error:void 0,networkStatus:pt.ready});function y9(n){return{refetch:n.refetch.bind(n),reobserve:n.reobserve.bind(n),fetchMore:n.fetchMore.bind(n),updateQuery:n.updateQuery.bind(n),startPolling:n.startPolling.bind(n),stopPolling:n.stopPolling.bind(n),subscribeToMore:n.subscribeToMore.bind(n)}}function Z9(n,e){var t=iw(void 0);bN(n,Ka.Mutation);var r=Nt.useState({called:!1,loading:!1,client:t}),a=r[0],i=r[1],o=Nt.useRef({result:a,mutationId:0,isMounted:!0,client:t,mutation:n,options:e});a9(function(){Object.assign(o.current,{client:t,options:e,mutation:n})});var u=Nt.useCallback(function(f){f===void 0&&(f={});var d=o.current,p=d.options,v=d.mutation,g=$($({},p),{mutation:v}),y=f.client||o.current.client;!o.current.result.loading&&!g.ignoreResults&&o.current.isMounted&&i(o.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:y});var x=++o.current.mutationId,w=Uf(g,f);return y.mutate(w).then(function(_){var S,C,R=_.data,T=_.errors,O=T&&T.length>0?new Ua({graphQLErrors:T}):void 0,D=f.onError||((S=o.current.options)===null||S===void 0?void 0:S.onError);if(O&&D&&D(O,w),x===o.current.mutationId&&!w.ignoreResults){var N={called:!0,loading:!1,data:R,error:O,client:y};o.current.isMounted&&!Et(o.current.result,N)&&i(o.current.result=N)}var k=f.onCompleted||((C=o.current.options)===null||C===void 0?void 0:C.onCompleted);return O||k==null||k(_.data,w),_},function(_){var S;if(x===o.current.mutationId&&o.current.isMounted){var C={loading:!1,error:_,data:void 0,called:!0,client:y};Et(o.current.result,C)||i(o.current.result=C)}var R=f.onError||((S=o.current.options)===null||S===void 0?void 0:S.onError);if(R)return R(_,w),{data:void 0,errors:_};throw _})},[]),c=Nt.useCallback(function(){if(o.current.isMounted){var f={called:!1,loading:!1,client:o.current.client};Object.assign(o.current,{mutationId:0,result:f}),i(f)}},[]);return Nt.useEffect(function(){var f=o.current;return f.isMounted=!0,function(){f.isMounted=!1}},[]),[u,$({reset:c},a)]}export{pr as A,wh as B,Y9 as C,Z9 as D,W8 as E,X9 as F,A9 as G,z9 as H,B8 as I,T9 as J,I9 as K,R9 as L,z3 as M,L9 as N,w9 as O,D9 as Q,SO as R,nW as T,B9 as a,P9 as b,U9 as c,KF as d,KL as e,S9 as f,O9 as g,F9 as h,ir as i,jM as j,M9 as k,yx as l,C9 as m,_9 as n,E9 as o,V9 as p,k9 as q,J as r,Yr as s,W9 as t,$T as u,G9 as v,CW as w,q9 as x,H9 as y,j9 as z};
