var IS=n=>{throw TypeError(n)};var _y=(n,e,t)=>e.has(n)||IS("Cannot "+t);var V=(n,e,t)=>(_y(n,e,"read from private field"),t?t.call(n):e.get(n)),qe=(n,e,t)=>e.has(n)?IS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Se=(n,e,t,r)=>(_y(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),rt=(n,e,t)=>(_y(n,e,"access private method"),t);var Xd=(n,e,t,r)=>({set _(a){Se(n,e,a,t)},get _(){return V(n,e,r)}});import{g as sx}from"./index-BkuMKgkF.js";function IM(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(n,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Ey={exports:{}},ff={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function MM(){if(MS)return ff;MS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:n,type:r,key:o,ref:a!==void 0?a:null,props:i}}return ff.Fragment=e,ff.jsx=t,ff.jsxs=t,ff}var FS;function FM(){return FS||(FS=1,Ey.exports=MM()),Ey.exports}var PM=FM(),Sy={exports:{}},hf={},Cy={exports:{}},Ry={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function LM(){return PS||(PS=1,function(n){function e(q,Z){var G=q.length;q.push(Z);e:for(;0<G;){var Y=G-1>>>1,F=q[Y];if(0<a(F,Z))q[Y]=Z,q[G]=F,G=Y;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Z=q[0],G=q.pop();if(G!==Z){q[0]=G;e:for(var Y=0,F=q.length,K=F>>>1;Y<K;){var se=2*(Y+1)-1,fe=q[se],he=se+1,be=q[he];if(0>a(fe,G))he<F&&0>a(be,fe)?(q[Y]=be,q[he]=G,Y=he):(q[Y]=fe,q[se]=G,Y=se);else if(he<F&&0>a(be,G))q[Y]=be,q[he]=G,Y=he;else break e}}return Z}function a(q,Z){var G=q.sortIndex-Z.sortIndex;return G!==0?G:q.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var c=[],f=[],d=1,p=null,v=3,g=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function C(q){for(var Z=t(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=q)r(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(f)}}function R(q){if(x=!1,C(q),!y)if(t(c)!==null)y=!0,te();else{var Z=t(f);Z!==null&&re(R,Z.startTime-q)}}var T=!1,O=-1,D=5,N=-1;function k(){return!(n.unstable_now()-N<D)}function I(){if(T){var q=n.unstable_now();N=q;var Z=!0;try{e:{y=!1,x&&(x=!1,_(O),O=-1),g=!0;var G=v;try{t:{for(C(q),p=t(c);p!==null&&!(p.expirationTime>q&&k());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,v=p.priorityLevel;var F=Y(p.expirationTime<=q);if(q=n.unstable_now(),typeof F=="function"){p.callback=F,C(q),Z=!0;break t}p===t(c)&&r(c),C(q)}else r(c);p=t(c)}if(p!==null)Z=!0;else{var K=t(f);K!==null&&re(R,K.startTime-q),Z=!1}}break e}finally{p=null,v=G,g=!1}Z=void 0}}finally{Z?B():T=!1}}}var B;if(typeof S=="function")B=function(){S(I)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ee=U.port2;U.port1.onmessage=I,B=function(){ee.postMessage(null)}}else B=function(){w(I,0)};function te(){T||(T=!0,B())}function re(q,Z){O=w(function(){q(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,te())},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(q){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var G=v;v=Z;try{return q()}finally{v=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var G=v;v=q;try{return Z()}finally{v=G}},n.unstable_scheduleCallback=function(q,Z,G){var Y=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,q){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=G+F,q={id:d++,callback:Z,priorityLevel:q,startTime:G,expirationTime:F,sortIndex:-1},G>Y?(q.sortIndex=G,e(f,q),t(c)===null&&q===t(f)&&(x?(_(O),O=-1):x=!0,re(R,G-Y))):(q.sortIndex=F,e(c,q),y||g||(y=!0,te())),q},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(q){var Z=v;return function(){var G=v;v=Z;try{return q.apply(this,arguments)}finally{v=G}}}}(Ry)),Ry}var LS;function BM(){return LS||(LS=1,Cy.exports=LM()),Cy.exports}var Ty={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS;function zM(){if(BS)return tt;BS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function w(F,K,se){this.props=F,this.context=K,this.refs=x,this.updater=se||g}w.prototype.isReactComponent={},w.prototype.setState=function(F,K){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,K,"setState")},w.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=w.prototype;function S(F,K,se){this.props=F,this.context=K,this.refs=x,this.updater=se||g}var C=S.prototype=new _;C.constructor=S,y(C,w.prototype),C.isPureReactComponent=!0;var R=Array.isArray,T={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function D(F,K,se,fe,he,be){return se=be.ref,{$$typeof:n,type:F,key:K,ref:se!==void 0?se:null,props:be}}function N(F,K){return D(F.type,K,void 0,void 0,void 0,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function I(F){var K={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(se){return K[se]})}var B=/\/+/g;function U(F,K){return typeof F=="object"&&F!==null&&F.key!=null?I(""+F.key):K.toString(36)}function ee(){}function te(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ee,ee):(F.status="pending",F.then(function(K){F.status==="pending"&&(F.status="fulfilled",F.value=K)},function(K){F.status==="pending"&&(F.status="rejected",F.reason=K)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function re(F,K,se,fe,he){var be=typeof F;(be==="undefined"||be==="boolean")&&(F=null);var ye=!1;if(F===null)ye=!0;else switch(be){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(F.$$typeof){case n:case e:ye=!0;break;case d:return ye=F._init,re(ye(F._payload),K,se,fe,he)}}if(ye)return he=he(F),ye=fe===""?"."+U(F,0):fe,R(he)?(se="",ye!=null&&(se=ye.replace(B,"$&/")+"/"),re(he,K,se,"",function(Oe){return Oe})):he!=null&&(k(he)&&(he=N(he,se+(he.key==null||F&&F.key===he.key?"":(""+he.key).replace(B,"$&/")+"/")+ye)),K.push(he)),1;ye=0;var Be=fe===""?".":fe+":";if(R(F))for(var xe=0;xe<F.length;xe++)fe=F[xe],be=Be+U(fe,xe),ye+=re(fe,K,se,be,he);else if(xe=v(F),typeof xe=="function")for(F=xe.call(F),xe=0;!(fe=F.next()).done;)fe=fe.value,be=Be+U(fe,xe++),ye+=re(fe,K,se,be,he);else if(be==="object"){if(typeof F.then=="function")return re(te(F),K,se,fe,he);throw K=String(F),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ye}function q(F,K,se){if(F==null)return F;var fe=[],he=0;return re(F,fe,"","",function(be){return K.call(se,be,he++)}),fe}function Z(F){if(F._status===-1){var K=F._result;K=K(),K.then(function(se){(F._status===0||F._status===-1)&&(F._status=1,F._result=se)},function(se){(F._status===0||F._status===-1)&&(F._status=2,F._result=se)}),F._status===-1&&(F._status=0,F._result=K)}if(F._status===1)return F._result.default;throw F._result}var G=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Y(){}return tt.Children={map:q,forEach:function(F,K,se){q(F,function(){K.apply(this,arguments)},se)},count:function(F){var K=0;return q(F,function(){K++}),K},toArray:function(F){return q(F,function(K){return K})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},tt.Component=w,tt.Fragment=t,tt.Profiler=a,tt.PureComponent=S,tt.StrictMode=r,tt.Suspense=c,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,tt.act=function(){throw Error("act(...) is not supported in production builds of React.")},tt.cache=function(F){return function(){return F.apply(null,arguments)}},tt.cloneElement=function(F,K,se){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var fe=y({},F.props),he=F.key,be=void 0;if(K!=null)for(ye in K.ref!==void 0&&(be=void 0),K.key!==void 0&&(he=""+K.key),K)!O.call(K,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&K.ref===void 0||(fe[ye]=K[ye]);var ye=arguments.length-2;if(ye===1)fe.children=se;else if(1<ye){for(var Be=Array(ye),xe=0;xe<ye;xe++)Be[xe]=arguments[xe+2];fe.children=Be}return D(F.type,he,void 0,void 0,be,fe)},tt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:i,_context:F},F},tt.createElement=function(F,K,se){var fe,he={},be=null;if(K!=null)for(fe in K.key!==void 0&&(be=""+K.key),K)O.call(K,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(he[fe]=K[fe]);var ye=arguments.length-2;if(ye===1)he.children=se;else if(1<ye){for(var Be=Array(ye),xe=0;xe<ye;xe++)Be[xe]=arguments[xe+2];he.children=Be}if(F&&F.defaultProps)for(fe in ye=F.defaultProps,ye)he[fe]===void 0&&(he[fe]=ye[fe]);return D(F,be,void 0,void 0,null,he)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(F){return{$$typeof:u,render:F}},tt.isValidElement=k,tt.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:Z}},tt.memo=function(F,K){return{$$typeof:f,type:F,compare:K===void 0?null:K}},tt.startTransition=function(F){var K=T.T,se={};T.T=se;try{var fe=F(),he=T.S;he!==null&&he(se,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Y,G)}catch(be){G(be)}finally{T.T=K}},tt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},tt.use=function(F){return T.H.use(F)},tt.useActionState=function(F,K,se){return T.H.useActionState(F,K,se)},tt.useCallback=function(F,K){return T.H.useCallback(F,K)},tt.useContext=function(F){return T.H.useContext(F)},tt.useDebugValue=function(){},tt.useDeferredValue=function(F,K){return T.H.useDeferredValue(F,K)},tt.useEffect=function(F,K){return T.H.useEffect(F,K)},tt.useId=function(){return T.H.useId()},tt.useImperativeHandle=function(F,K,se){return T.H.useImperativeHandle(F,K,se)},tt.useInsertionEffect=function(F,K){return T.H.useInsertionEffect(F,K)},tt.useLayoutEffect=function(F,K){return T.H.useLayoutEffect(F,K)},tt.useMemo=function(F,K){return T.H.useMemo(F,K)},tt.useOptimistic=function(F,K){return T.H.useOptimistic(F,K)},tt.useReducer=function(F,K,se){return T.H.useReducer(F,K,se)},tt.useRef=function(F){return T.H.useRef(F)},tt.useState=function(F){return T.H.useState(F)},tt.useSyncExternalStore=function(F,K,se){return T.H.useSyncExternalStore(F,K,se)},tt.useTransition=function(){return T.H.useTransition()},tt.version="19.0.0",tt}var zS;function Nv(){return zS||(zS=1,Ty.exports=zM()),Ty.exports}var Oy={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function UM(){if(US)return jn;US=1;var n=Nv();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return i(c,f,null,d)},jn.flushSync=function(c){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=d,r.d.f()}},jn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},jn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},jn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=u(d,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:g}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},jn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=u(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},jn.requestFormReset=function(c){r.d.r(c)},jn.unstable_batchedUpdates=function(c,f){return c(f)},jn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},jn.useFormStatus=function(){return o.H.useHostTransitionStatus()},jn.version="19.0.0",jn}var VS;function VM(){if(VS)return Oy.exports;VS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Oy.exports=UM(),Oy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function jM(){if(jS)return hf;jS=1;var n=BM(),e=Nv(),t=VM();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var i=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),R=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=T&&s[T]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function N(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case w:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case g:return(s.displayName||"Context")+".Provider";case v:return(s._context.displayName||"Context")+".Consumer";case y:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case _:return l=s.displayName||null,l!==null?l:N(s.type)||"Memo";case S:l=s._payload,s=s._init;try{return N(s(l))}catch{}}return null}var k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,B,U;function ee(s){if(B===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||"",U=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+s+U}var te=!1;function re(s,l){if(!s||te)return"";te=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(le){var ae=le}Reflect.construct(s,[],me)}else{try{me.call()}catch(le){ae=le}s.call(me.prototype)}}else{try{throw Error()}catch(le){ae=le}(me=s())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),A=E[0],M=E[1];if(A&&M){var z=A.split(`
`),Q=M.split(`
`);for(b=m=0;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;for(;b<Q.length&&!Q[b].includes("DetermineComponentFrameRoot");)b++;if(m===z.length||b===Q.length)for(m=z.length-1,b=Q.length-1;1<=m&&0<=b&&z[m]!==Q[b];)b--;for(;1<=m&&0<=b;m--,b--)if(z[m]!==Q[b]){if(m!==1||b!==1)do if(m--,b--,0>b||z[m]!==Q[b]){var ce=`
`+z[m].replace(" at new "," at ");return s.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",s.displayName)),ce}while(1<=m&&0<=b);break}}}finally{te=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?ee(h):""}function q(s){switch(s.tag){case 26:case 27:case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return s=re(s.type,!1),s;case 11:return s=re(s.type.render,!1),s;case 1:return s=re(s.type,!0),s;default:return""}}function Z(s){try{var l="";do l+=q(s),s=s.return;while(s);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function G(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function Y(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function F(s){if(G(s)!==s)throw Error(r(188))}function K(s){var l=s.alternate;if(!l){if(l=G(s),l===null)throw Error(r(188));return l!==s?null:s}for(var h=s,m=l;;){var b=h.return;if(b===null)break;var E=b.alternate;if(E===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===h)return F(b),s;if(E===m)return F(b),l;E=E.sibling}throw Error(r(188))}if(h.return!==m.return)h=b,m=E;else{for(var A=!1,M=b.child;M;){if(M===h){A=!0,h=b,m=E;break}if(M===m){A=!0,m=b,h=E;break}M=M.sibling}if(!A){for(M=E.child;M;){if(M===h){A=!0,h=E,m=b;break}if(M===m){A=!0,m=E,h=b;break}M=M.sibling}if(!A)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?s:l}function se(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=se(s),l!==null)return l;s=s.sibling}return null}var fe=Array.isArray,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ye=[],Be=-1;function xe(s){return{current:s}}function Oe(s){0>Be||(s.current=ye[Be],ye[Be]=null,Be--)}function je(s,l){Be++,ye[Be]=s.current,s.current=l}var Ve=xe(null),$e=xe(null),Ye=xe(null),bt=xe(null);function St(s,l){switch(je(Ye,l),je($e,s),je(Ve,null),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)&&(l=l.namespaceURI)?uS(l):0;break;default:if(s=s===8?l.parentNode:l,l=s.tagName,s=s.namespaceURI)s=uS(s),l=lS(s,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Oe(Ve),je(Ve,l)}function yt(){Oe(Ve),Oe($e),Oe(Ye)}function or(s){s.memoizedState!==null&&je(bt,s);var l=Ve.current,h=lS(l,s.type);l!==h&&(je($e,s),je(Ve,h))}function Yn(s){$e.current===s&&(Oe(Ve),Oe($e)),bt.current===s&&(Oe(bt),of._currentValue=be)}var kn=Object.prototype.hasOwnProperty,Ea=n.unstable_scheduleCallback,yr=n.unstable_cancelCallback,Sa=n.unstable_shouldYield,ea=n.unstable_requestPaint,Dn=n.unstable_now,ta=n.unstable_getCurrentPriorityLevel,cu=n.unstable_ImmediatePriority,ii=n.unstable_UserBlockingPriority,Zn=n.unstable_NormalPriority,dc=n.unstable_LowPriority,zh=n.unstable_IdlePriority,vm=n.log,mm=n.unstable_setDisableYieldValue,oi=null,Nn=null;function pc(s){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(oi,s,void 0,(s.current.flags&128)===128)}catch{}}function Gi(s){if(typeof vm=="function"&&mm(s),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(oi,s)}catch{}}var br=Math.clz32?Math.clz32:xN,yN=Math.log,bN=Math.LN2;function xN(s){return s>>>=0,s===0?32:31-(yN(s)/bN|0)|0}var Uh=128,Vh=4194304;function ns(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function jh(s,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,b=s.suspendedLanes,E=s.pingedLanes,A=s.warmLanes;s=s.finishedLanes!==0;var M=h&134217727;return M!==0?(h=M&~b,h!==0?m=ns(h):(E&=M,E!==0?m=ns(E):s||(A=M&~A,A!==0&&(m=ns(A))))):(M=h&~b,M!==0?m=ns(M):E!==0?m=ns(E):s||(A=h&~A,A!==0&&(m=ns(A)))),m===0?0:l!==0&&l!==m&&(l&b)===0&&(b=m&-m,A=l&-l,b>=A||b===32&&(A&4194176)!==0)?l:m}function vc(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function wN(s,l){switch(s){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ew(){var s=Uh;return Uh<<=1,(Uh&4194176)===0&&(Uh=128),s}function tw(){var s=Vh;return Vh<<=1,(Vh&62914560)===0&&(Vh=4194304),s}function gm(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function mc(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function _N(s,l,h,m,b,E){var A=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var M=s.entanglements,z=s.expirationTimes,Q=s.hiddenUpdates;for(h=A&~h;0<h;){var ce=31-br(h),me=1<<ce;M[ce]=0,z[ce]=-1;var ae=Q[ce];if(ae!==null)for(Q[ce]=null,ce=0;ce<ae.length;ce++){var le=ae[ce];le!==null&&(le.lane&=-536870913)}h&=~me}m!==0&&nw(s,m,0),E!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=E&~(A&~l))}function nw(s,l,h){s.pendingLanes|=l,s.suspendedLanes&=~l;var m=31-br(l);s.entangledLanes|=l,s.entanglements[m]=s.entanglements[m]|1073741824|h&4194218}function rw(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var m=31-br(h),b=1<<m;b&l|s[m]&l&&(s[m]|=l),h&=~b}}function aw(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function iw(){var s=he.p;return s!==0?s:(s=window.event,s===void 0?32:TS(s.type))}function EN(s,l){var h=he.p;try{return he.p=s,l()}finally{he.p=h}}var Qi=Math.random().toString(36).slice(2),Un="__reactFiber$"+Qi,sr="__reactProps$"+Qi,fu="__reactContainer$"+Qi,ym="__reactEvents$"+Qi,SN="__reactListeners$"+Qi,CN="__reactHandles$"+Qi,ow="__reactResources$"+Qi,gc="__reactMarker$"+Qi;function bm(s){delete s[Un],delete s[sr],delete s[ym],delete s[SN],delete s[CN]}function rs(s){var l=s[Un];if(l)return l;for(var h=s.parentNode;h;){if(l=h[fu]||h[Un]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=hS(s);s!==null;){if(h=s[Un])return h;s=hS(s)}return l}s=h,h=s.parentNode}return null}function hu(s){if(s=s[Un]||s[fu]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function yc(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function du(s){var l=s[ow];return l||(l=s[ow]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function bn(s){s[gc]=!0}var sw=new Set,uw={};function as(s,l){pu(s,l),pu(s+"Capture",l)}function pu(s,l){for(uw[s]=l,s=0;s<l.length;s++)sw.add(l[s])}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lw={},cw={};function TN(s){return kn.call(cw,s)?!0:kn.call(lw,s)?!1:RN.test(s)?cw[s]=!0:(lw[s]=!0,!1)}function qh(s,l,h){if(TN(l))if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+h)}}function Wh(s,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+h)}}function ui(s,l,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(l,h,""+m)}}function Ir(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fw(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ON(s){var l=fw(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,E=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(A){m=""+A,E.call(this,A)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(A){m=""+A},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Hh(s){s._valueTracker||(s._valueTracker=ON(s))}function hw(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),m="";return s&&(m=fw(s)?s.checked?"true":"false":s.value),s=m,s!==h?(l.setValue(s),!0):!1}function Gh(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var AN=/[\n"\\]/g;function Mr(s){return s.replace(AN,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function xm(s,l,h,m,b,E,A,M){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),l!=null?A==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Ir(l)):s.value!==""+Ir(l)&&(s.value=""+Ir(l)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),l!=null?wm(s,A,Ir(l)):h!=null?wm(s,A,Ir(h)):m!=null&&s.removeAttribute("value"),b==null&&E!=null&&(s.defaultChecked=!!E),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+Ir(M):s.removeAttribute("name")}function dw(s,l,h,m,b,E,A,M){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),l!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||l!=null))return;h=h!=null?""+Ir(h):"",l=l!=null?""+Ir(l):h,M||l===s.value||(s.value=l),s.defaultValue=l}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=M?s.checked:!!m,s.defaultChecked=!!m,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A)}function wm(s,l,h){l==="number"&&Gh(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function vu(s,l,h,m){if(s=s.options,l){l={};for(var b=0;b<h.length;b++)l["$"+h[b]]=!0;for(h=0;h<s.length;h++)b=l.hasOwnProperty("$"+s[h].value),s[h].selected!==b&&(s[h].selected=b),b&&m&&(s[h].defaultSelected=!0)}else{for(h=""+Ir(h),l=null,b=0;b<s.length;b++){if(s[b].value===h){s[b].selected=!0,m&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function pw(s,l,h){if(l!=null&&(l=""+Ir(l),l!==s.value&&(s.value=l),h==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=h!=null?""+Ir(h):""}function vw(s,l,h,m){if(l==null){if(m!=null){if(h!=null)throw Error(r(92));if(fe(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),l=h}h=Ir(l),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m)}function mu(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var kN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mw(s,l,h){var m=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":m?s.setProperty(l,h):typeof h!="number"||h===0||kN.has(l)?l==="float"?s.cssFloat=h:s[l]=(""+h).trim():s[l]=h+"px"}function gw(s,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var b in l)m=l[b],l.hasOwnProperty(b)&&h[b]!==m&&mw(s,b,m)}else for(var E in l)l.hasOwnProperty(E)&&mw(s,E,l[E])}function _m(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),NN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qh(s){return NN.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Em=null;function Sm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var gu=null,yu=null;function yw(s){var l=hu(s);if(l&&(s=l.stateNode)){var h=s[sr]||null;e:switch(s=l.stateNode,l.type){case"input":if(xm(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Mr(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var m=h[l];if(m!==s&&m.form===s.form){var b=m[sr]||null;if(!b)throw Error(r(90));xm(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<h.length;l++)m=h[l],m.form===s.form&&hw(m)}break e;case"textarea":pw(s,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&vu(s,!!h.multiple,l,!1)}}}var Cm=!1;function bw(s,l,h){if(Cm)return s(l,h);Cm=!0;try{var m=s(l);return m}finally{if(Cm=!1,(gu!==null||yu!==null)&&(kd(),gu&&(l=gu,s=yu,yu=gu=null,yw(l),s)))for(l=0;l<s.length;l++)yw(s[l])}}function bc(s,l){var h=s.stateNode;if(h===null)return null;var m=h[sr]||null;if(m===null)return null;h=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var Rm=!1;if(si)try{var xc={};Object.defineProperty(xc,"passive",{get:function(){Rm=!0}}),window.addEventListener("test",xc,xc),window.removeEventListener("test",xc,xc)}catch{Rm=!1}var $i=null,Tm=null,$h=null;function xw(){if($h)return $h;var s,l=Tm,h=l.length,m,b="value"in $i?$i.value:$i.textContent,E=b.length;for(s=0;s<h&&l[s]===b[s];s++);var A=h-s;for(m=1;m<=A&&l[h-m]===b[E-m];m++);return $h=b.slice(s,1<m?1-m:void 0)}function Kh(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Xh(){return!0}function ww(){return!1}function ur(s){function l(h,m,b,E,A){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=E,this.target=A,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(h=s[M],this[M]=h?h(E):E[M]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Xh:ww,this.isPropagationStopped=ww,this}return I(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Xh)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Xh)},persist:function(){},isPersistent:Xh}),l}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yh=ur(is),wc=I({},is,{view:0,detail:0}),IN=ur(wc),Om,Am,_c,Zh=I({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==_c&&(_c&&s.type==="mousemove"?(Om=s.screenX-_c.screenX,Am=s.screenY-_c.screenY):Am=Om=0,_c=s),Om)},movementY:function(s){return"movementY"in s?s.movementY:Am}}),_w=ur(Zh),MN=I({},Zh,{dataTransfer:0}),FN=ur(MN),PN=I({},wc,{relatedTarget:0}),km=ur(PN),LN=I({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),BN=ur(LN),zN=I({},is,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),UN=ur(zN),VN=I({},is,{data:0}),Ew=ur(VN),jN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HN(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=WN[s])?!!l[s]:!1}function Dm(){return HN}var GN=I({},wc,{key:function(s){if(s.key){var l=jN[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Kh(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?qN[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(s){return s.type==="keypress"?Kh(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Kh(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),QN=ur(GN),$N=I({},Zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sw=ur($N),KN=I({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),XN=ur(KN),YN=I({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZN=ur(YN),JN=I({},Zh,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),eI=ur(JN),tI=I({},is,{newState:0,oldState:0}),nI=ur(tI),rI=[9,13,27,32],Nm=si&&"CompositionEvent"in window,Ec=null;si&&"documentMode"in document&&(Ec=document.documentMode);var aI=si&&"TextEvent"in window&&!Ec,Cw=si&&(!Nm||Ec&&8<Ec&&11>=Ec),Rw=" ",Tw=!1;function Ow(s,l){switch(s){case"keyup":return rI.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aw(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var bu=!1;function iI(s,l){switch(s){case"compositionend":return Aw(l);case"keypress":return l.which!==32?null:(Tw=!0,Rw);case"textInput":return s=l.data,s===Rw&&Tw?null:s;default:return null}}function oI(s,l){if(bu)return s==="compositionend"||!Nm&&Ow(s,l)?(s=xw(),$h=Tm=$i=null,bu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Cw&&l.locale!=="ko"?null:l.data;default:return null}}var sI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kw(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!sI[s.type]:l==="textarea"}function Dw(s,l,h,m){gu?yu?yu.push(m):yu=[m]:gu=m,l=Fd(l,"onChange"),0<l.length&&(h=new Yh("onChange","change",null,h,m),s.push({event:h,listeners:l}))}var Sc=null,Cc=null;function uI(s){rS(s,0)}function Jh(s){var l=yc(s);if(hw(l))return s}function Nw(s,l){if(s==="change")return l}var Iw=!1;if(si){var Im;if(si){var Mm="oninput"in document;if(!Mm){var Mw=document.createElement("div");Mw.setAttribute("oninput","return;"),Mm=typeof Mw.oninput=="function"}Im=Mm}else Im=!1;Iw=Im&&(!document.documentMode||9<document.documentMode)}function Fw(){Sc&&(Sc.detachEvent("onpropertychange",Pw),Cc=Sc=null)}function Pw(s){if(s.propertyName==="value"&&Jh(Cc)){var l=[];Dw(l,Cc,s,Sm(s)),bw(uI,l)}}function lI(s,l,h){s==="focusin"?(Fw(),Sc=l,Cc=h,Sc.attachEvent("onpropertychange",Pw)):s==="focusout"&&Fw()}function cI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Jh(Cc)}function fI(s,l){if(s==="click")return Jh(l)}function hI(s,l){if(s==="input"||s==="change")return Jh(l)}function dI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var xr=typeof Object.is=="function"?Object.is:dI;function Rc(s,l){if(xr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!kn.call(l,b)||!xr(s[b],l[b]))return!1}return!0}function Lw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bw(s,l){var h=Lw(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=l&&m>=l)return{node:h,offset:l-s};s=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Lw(h)}}function zw(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?zw(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Uw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Gh(s.document);l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Gh(s.document)}return l}function Fm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function pI(s,l){var h=Uw(l);l=s.focusedElem;var m=s.selectionRange;if(h!==l&&l&&l.ownerDocument&&zw(l.ownerDocument.documentElement,l)){if(m!==null&&Fm(l)){if(s=m.start,h=m.end,h===void 0&&(h=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(h,l.value.length);else if(h=(s=l.ownerDocument||document)&&s.defaultView||window,h.getSelection){h=h.getSelection();var b=l.textContent.length,E=Math.min(m.start,b);m=m.end===void 0?E:Math.min(m.end,b),!h.extend&&E>m&&(b=m,m=E,E=b),b=Bw(l,E);var A=Bw(l,m);b&&A&&(h.rangeCount!==1||h.anchorNode!==b.node||h.anchorOffset!==b.offset||h.focusNode!==A.node||h.focusOffset!==A.offset)&&(s=s.createRange(),s.setStart(b.node,b.offset),h.removeAllRanges(),E>m?(h.addRange(s),h.extend(A.node,A.offset)):(s.setEnd(A.node,A.offset),h.addRange(s)))}}for(s=[],h=l;h=h.parentNode;)h.nodeType===1&&s.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)h=s[l],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var vI=si&&"documentMode"in document&&11>=document.documentMode,xu=null,Pm=null,Tc=null,Lm=!1;function Vw(s,l,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Lm||xu==null||xu!==Gh(m)||(m=xu,"selectionStart"in m&&Fm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Tc&&Rc(Tc,m)||(Tc=m,m=Fd(Pm,"onSelect"),0<m.length&&(l=new Yh("onSelect","select",null,l,h),s.push({event:l,listeners:m}),l.target=xu)))}function os(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var wu={animationend:os("Animation","AnimationEnd"),animationiteration:os("Animation","AnimationIteration"),animationstart:os("Animation","AnimationStart"),transitionrun:os("Transition","TransitionRun"),transitionstart:os("Transition","TransitionStart"),transitioncancel:os("Transition","TransitionCancel"),transitionend:os("Transition","TransitionEnd")},Bm={},jw={};si&&(jw=document.createElement("div").style,"AnimationEvent"in window||(delete wu.animationend.animation,delete wu.animationiteration.animation,delete wu.animationstart.animation),"TransitionEvent"in window||delete wu.transitionend.transition);function ss(s){if(Bm[s])return Bm[s];if(!wu[s])return s;var l=wu[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in jw)return Bm[s]=l[h];return s}var qw=ss("animationend"),Ww=ss("animationiteration"),Hw=ss("animationstart"),mI=ss("transitionrun"),gI=ss("transitionstart"),yI=ss("transitioncancel"),Gw=ss("transitionend"),Qw=new Map,$w="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function na(s,l){Qw.set(s,l),as(l,[s])}var Fr=[],_u=0,zm=0;function ed(){for(var s=_u,l=zm=_u=0;l<s;){var h=Fr[l];Fr[l++]=null;var m=Fr[l];Fr[l++]=null;var b=Fr[l];Fr[l++]=null;var E=Fr[l];if(Fr[l++]=null,m!==null&&b!==null){var A=m.pending;A===null?b.next=b:(b.next=A.next,A.next=b),m.pending=b}E!==0&&Kw(h,b,E)}}function td(s,l,h,m){Fr[_u++]=s,Fr[_u++]=l,Fr[_u++]=h,Fr[_u++]=m,zm|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Um(s,l,h,m){return td(s,l,h,m),nd(s)}function Ki(s,l){return td(s,null,null,l),nd(s)}function Kw(s,l,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var b=!1,E=s.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(b=!0)),s=E,E=E.return;b&&l!==null&&s.tag===3&&(E=s.stateNode,b=31-br(h),E=E.hiddenUpdates,s=E[b],s===null?E[b]=[l]:s.push(l),l.lane=h|536870912)}function nd(s){if(50<Zc)throw Zc=0,Gg=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Eu={},Xw=new WeakMap;function Pr(s,l){if(typeof s=="object"&&s!==null){var h=Xw.get(s);return h!==void 0?h:(l={value:s,source:l,stack:Z(l)},Xw.set(s,l),l)}return{value:s,source:l,stack:Z(l)}}var Su=[],Cu=0,rd=null,ad=0,Lr=[],Br=0,us=null,li=1,ci="";function ls(s,l){Su[Cu++]=ad,Su[Cu++]=rd,rd=s,ad=l}function Yw(s,l,h){Lr[Br++]=li,Lr[Br++]=ci,Lr[Br++]=us,us=s;var m=li;s=ci;var b=32-br(m)-1;m&=~(1<<b),h+=1;var E=32-br(l)+b;if(30<E){var A=b-b%5;E=(m&(1<<A)-1).toString(32),m>>=A,b-=A,li=1<<32-br(l)+b|h<<b|m,ci=E+s}else li=1<<E|h<<b|m,ci=s}function Vm(s){s.return!==null&&(ls(s,1),Yw(s,1,0))}function jm(s){for(;s===rd;)rd=Su[--Cu],Su[Cu]=null,ad=Su[--Cu],Su[Cu]=null;for(;s===us;)us=Lr[--Br],Lr[Br]=null,ci=Lr[--Br],Lr[Br]=null,li=Lr[--Br],Lr[Br]=null}var Jn=null,In=null,xt=!1,ra=null,Ca=!1,qm=Error(r(519));function cs(s){var l=Error(r(418,""));throw kc(Pr(l,s)),qm}function Zw(s){var l=s.stateNode,h=s.type,m=s.memoizedProps;switch(l[Un]=s,l[sr]=m,h){case"dialog":ht("cancel",l),ht("close",l);break;case"iframe":case"object":case"embed":ht("load",l);break;case"video":case"audio":for(h=0;h<ef.length;h++)ht(ef[h],l);break;case"source":ht("error",l);break;case"img":case"image":case"link":ht("error",l),ht("load",l);break;case"details":ht("toggle",l);break;case"input":ht("invalid",l),dw(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Hh(l);break;case"select":ht("invalid",l);break;case"textarea":ht("invalid",l),vw(l,m.value,m.defaultValue,m.children),Hh(l)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||m.suppressHydrationWarning===!0||sS(l.textContent,h)?(m.popover!=null&&(ht("beforetoggle",l),ht("toggle",l)),m.onScroll!=null&&ht("scroll",l),m.onScrollEnd!=null&&ht("scrollend",l),m.onClick!=null&&(l.onclick=Pd),l=!0):l=!1,l||cs(s)}function Jw(s){for(Jn=s.return;Jn;)switch(Jn.tag){case 3:case 27:Ca=!0;return;case 5:case 13:Ca=!1;return;default:Jn=Jn.return}}function Oc(s){if(s!==Jn)return!1;if(!xt)return Jw(s),xt=!0,!1;var l=!1,h;if((h=s.tag!==3&&s.tag!==27)&&((h=s.tag===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||ly(s.type,s.memoizedProps)),h=!h),h&&(l=!0),l&&In&&cs(s),Jw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(h=s.data,h==="/$"){if(l===0){In=ia(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++;s=s.nextSibling}In=null}}else In=Jn?ia(s.stateNode.nextSibling):null;return!0}function Ac(){In=Jn=null,xt=!1}function kc(s){ra===null?ra=[s]:ra.push(s)}var Dc=Error(r(460)),e_=Error(r(474)),Wm={then:function(){}};function t_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function id(){}function n_(s,l,h){switch(h=s[h],h===void 0?s.push(l):h!==l&&(l.then(id,id),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Dc?Error(r(483)):s;default:if(typeof l.status=="string")l.then(id,id);else{if(s=It,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(m){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=m}},function(m){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===Dc?Error(r(483)):s}throw Nc=l,Dc}}var Nc=null;function r_(){if(Nc===null)throw Error(r(459));var s=Nc;return Nc=null,s}var Ru=null,Ic=0;function od(s){var l=Ic;return Ic+=1,Ru===null&&(Ru=[]),n_(Ru,s,l)}function Mc(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function sd(s,l){throw l.$$typeof===i?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function a_(s){var l=s._init;return l(s._payload)}function i_(s){function l(X,H){if(s){var ne=X.deletions;ne===null?(X.deletions=[H],X.flags|=16):ne.push(H)}}function h(X,H){if(!s)return null;for(;H!==null;)l(X,H),H=H.sibling;return null}function m(X){for(var H=new Map;X!==null;)X.key!==null?H.set(X.key,X):H.set(X.index,X),X=X.sibling;return H}function b(X,H){return X=so(X,H),X.index=0,X.sibling=null,X}function E(X,H,ne){return X.index=ne,s?(ne=X.alternate,ne!==null?(ne=ne.index,ne<H?(X.flags|=33554434,H):ne):(X.flags|=33554434,H)):(X.flags|=1048576,H)}function A(X){return s&&X.alternate===null&&(X.flags|=33554434),X}function M(X,H,ne,de){return H===null||H.tag!==6?(H=Bg(ne,X.mode,de),H.return=X,H):(H=b(H,ne),H.return=X,H)}function z(X,H,ne,de){var Ae=ne.type;return Ae===c?ce(X,H,ne.props.children,de,ne.key):H!==null&&(H.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===S&&a_(Ae)===H.type)?(H=b(H,ne.props),Mc(H,ne),H.return=X,H):(H=Cd(ne.type,ne.key,ne.props,null,X.mode,de),Mc(H,ne),H.return=X,H)}function Q(X,H,ne,de){return H===null||H.tag!==4||H.stateNode.containerInfo!==ne.containerInfo||H.stateNode.implementation!==ne.implementation?(H=zg(ne,X.mode,de),H.return=X,H):(H=b(H,ne.children||[]),H.return=X,H)}function ce(X,H,ne,de,Ae){return H===null||H.tag!==7?(H=xs(ne,X.mode,de,Ae),H.return=X,H):(H=b(H,ne),H.return=X,H)}function me(X,H,ne){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Bg(""+H,X.mode,ne),H.return=X,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case o:return ne=Cd(H.type,H.key,H.props,null,X.mode,ne),Mc(ne,H),ne.return=X,ne;case u:return H=zg(H,X.mode,ne),H.return=X,H;case S:var de=H._init;return H=de(H._payload),me(X,H,ne)}if(fe(H)||O(H))return H=xs(H,X.mode,ne,null),H.return=X,H;if(typeof H.then=="function")return me(X,od(H),ne);if(H.$$typeof===g)return me(X,_d(X,H),ne);sd(X,H)}return null}function ae(X,H,ne,de){var Ae=H!==null?H.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ae!==null?null:M(X,H,""+ne,de);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case o:return ne.key===Ae?z(X,H,ne,de):null;case u:return ne.key===Ae?Q(X,H,ne,de):null;case S:return Ae=ne._init,ne=Ae(ne._payload),ae(X,H,ne,de)}if(fe(ne)||O(ne))return Ae!==null?null:ce(X,H,ne,de,null);if(typeof ne.then=="function")return ae(X,H,od(ne),de);if(ne.$$typeof===g)return ae(X,H,_d(X,ne),de);sd(X,ne)}return null}function le(X,H,ne,de,Ae){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return X=X.get(ne)||null,M(H,X,""+de,Ae);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case o:return X=X.get(de.key===null?ne:de.key)||null,z(H,X,de,Ae);case u:return X=X.get(de.key===null?ne:de.key)||null,Q(H,X,de,Ae);case S:var st=de._init;return de=st(de._payload),le(X,H,ne,de,Ae)}if(fe(de)||O(de))return X=X.get(ne)||null,ce(H,X,de,Ae,null);if(typeof de.then=="function")return le(X,H,ne,od(de),Ae);if(de.$$typeof===g)return le(X,H,ne,_d(H,de),Ae);sd(H,de)}return null}function ze(X,H,ne,de){for(var Ae=null,st=null,Ue=H,We=H=0,_n=null;Ue!==null&&We<ne.length;We++){Ue.index>We?(_n=Ue,Ue=null):_n=Ue.sibling;var wt=ae(X,Ue,ne[We],de);if(wt===null){Ue===null&&(Ue=_n);break}s&&Ue&&wt.alternate===null&&l(X,Ue),H=E(wt,H,We),st===null?Ae=wt:st.sibling=wt,st=wt,Ue=_n}if(We===ne.length)return h(X,Ue),xt&&ls(X,We),Ae;if(Ue===null){for(;We<ne.length;We++)Ue=me(X,ne[We],de),Ue!==null&&(H=E(Ue,H,We),st===null?Ae=Ue:st.sibling=Ue,st=Ue);return xt&&ls(X,We),Ae}for(Ue=m(Ue);We<ne.length;We++)_n=le(Ue,X,We,ne[We],de),_n!==null&&(s&&_n.alternate!==null&&Ue.delete(_n.key===null?We:_n.key),H=E(_n,H,We),st===null?Ae=_n:st.sibling=_n,st=_n);return s&&Ue.forEach(function(vo){return l(X,vo)}),xt&&ls(X,We),Ae}function Ze(X,H,ne,de){if(ne==null)throw Error(r(151));for(var Ae=null,st=null,Ue=H,We=H=0,_n=null,wt=ne.next();Ue!==null&&!wt.done;We++,wt=ne.next()){Ue.index>We?(_n=Ue,Ue=null):_n=Ue.sibling;var vo=ae(X,Ue,wt.value,de);if(vo===null){Ue===null&&(Ue=_n);break}s&&Ue&&vo.alternate===null&&l(X,Ue),H=E(vo,H,We),st===null?Ae=vo:st.sibling=vo,st=vo,Ue=_n}if(wt.done)return h(X,Ue),xt&&ls(X,We),Ae;if(Ue===null){for(;!wt.done;We++,wt=ne.next())wt=me(X,wt.value,de),wt!==null&&(H=E(wt,H,We),st===null?Ae=wt:st.sibling=wt,st=wt);return xt&&ls(X,We),Ae}for(Ue=m(Ue);!wt.done;We++,wt=ne.next())wt=le(Ue,X,We,wt.value,de),wt!==null&&(s&&wt.alternate!==null&&Ue.delete(wt.key===null?We:wt.key),H=E(wt,H,We),st===null?Ae=wt:st.sibling=wt,st=wt);return s&&Ue.forEach(function(NM){return l(X,NM)}),xt&&ls(X,We),Ae}function $t(X,H,ne,de){if(typeof ne=="object"&&ne!==null&&ne.type===c&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case o:e:{for(var Ae=ne.key;H!==null;){if(H.key===Ae){if(Ae=ne.type,Ae===c){if(H.tag===7){h(X,H.sibling),de=b(H,ne.props.children),de.return=X,X=de;break e}}else if(H.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===S&&a_(Ae)===H.type){h(X,H.sibling),de=b(H,ne.props),Mc(de,ne),de.return=X,X=de;break e}h(X,H);break}else l(X,H);H=H.sibling}ne.type===c?(de=xs(ne.props.children,X.mode,de,ne.key),de.return=X,X=de):(de=Cd(ne.type,ne.key,ne.props,null,X.mode,de),Mc(de,ne),de.return=X,X=de)}return A(X);case u:e:{for(Ae=ne.key;H!==null;){if(H.key===Ae)if(H.tag===4&&H.stateNode.containerInfo===ne.containerInfo&&H.stateNode.implementation===ne.implementation){h(X,H.sibling),de=b(H,ne.children||[]),de.return=X,X=de;break e}else{h(X,H);break}else l(X,H);H=H.sibling}de=zg(ne,X.mode,de),de.return=X,X=de}return A(X);case S:return Ae=ne._init,ne=Ae(ne._payload),$t(X,H,ne,de)}if(fe(ne))return ze(X,H,ne,de);if(O(ne)){if(Ae=O(ne),typeof Ae!="function")throw Error(r(150));return ne=Ae.call(ne),Ze(X,H,ne,de)}if(typeof ne.then=="function")return $t(X,H,od(ne),de);if(ne.$$typeof===g)return $t(X,H,_d(X,ne),de);sd(X,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,H!==null&&H.tag===6?(h(X,H.sibling),de=b(H,ne),de.return=X,X=de):(h(X,H),de=Bg(ne,X.mode,de),de.return=X,X=de),A(X)):h(X,H)}return function(X,H,ne,de){try{Ic=0;var Ae=$t(X,H,ne,de);return Ru=null,Ae}catch(Ue){if(Ue===Dc)throw Ue;var st=jr(29,Ue,null,X.mode);return st.lanes=de,st.return=X,st}finally{}}}var fs=i_(!0),o_=i_(!1),Tu=xe(null),ud=xe(0);function s_(s,l){s=wi,je(ud,s),je(Tu,l),wi=s|l.baseLanes}function Hm(){je(ud,wi),je(Tu,Tu.current)}function Gm(){wi=ud.current,Oe(Tu),Oe(ud)}var zr=xe(null),Ra=null;function Xi(s){var l=s.alternate;je(un,un.current&1),je(zr,s),Ra===null&&(l===null||Tu.current!==null||l.memoizedState!==null)&&(Ra=s)}function u_(s){if(s.tag===22){if(je(un,un.current),je(zr,s),Ra===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Ra=s)}}else Yi()}function Yi(){je(un,un.current),je(zr,zr.current)}function fi(s){Oe(zr),Ra===s&&(Ra=null),Oe(un)}var un=xe(0);function ld(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var bI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){l.aborted=!0,s.forEach(function(h){return h()})}},xI=n.unstable_scheduleCallback,wI=n.unstable_NormalPriority,ln={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qm(){return{controller:new bI,data:new Map,refCount:0}}function Fc(s){s.refCount--,s.refCount===0&&xI(wI,function(){s.controller.abort()})}var Pc=null,$m=0,Ou=0,Au=null;function _I(s,l){if(Pc===null){var h=Pc=[];$m=0,Ou=ey(),Au={status:"pending",value:void 0,then:function(m){h.push(m)}}}return $m++,l.then(l_,l_),l}function l_(){if(--$m===0&&Pc!==null){Au!==null&&(Au.status="fulfilled");var s=Pc;Pc=null,Ou=0,Au=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function EI(s,l){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return s.then(function(){m.status="fulfilled",m.value=l;for(var b=0;b<h.length;b++)(0,h[b])(l)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var c_=k.S;k.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&_I(s,l),c_!==null&&c_(s,l)};var hs=xe(null);function Km(){var s=hs.current;return s!==null?s:It.pooledCache}function cd(s,l){l===null?je(hs,hs.current):je(hs,l.pool)}function f_(){var s=Km();return s===null?null:{parent:ln._currentValue,pool:s}}var Zi=0,ot=null,At=null,tn=null,fd=!1,ku=!1,ds=!1,hd=0,Lc=0,Du=null,SI=0;function Jt(){throw Error(r(321))}function Xm(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!xr(s[h],l[h]))return!1;return!0}function Ym(s,l,h,m,b,E){return Zi=E,ot=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,k.H=s===null||s.memoizedState===null?ps:Ji,ds=!1,E=h(m,b),ds=!1,ku&&(E=d_(l,h,m,b)),h_(s),E}function h_(s){k.H=Ta;var l=At!==null&&At.next!==null;if(Zi=0,tn=At=ot=null,fd=!1,Lc=0,Du=null,l)throw Error(r(300));s===null||xn||(s=s.dependencies,s!==null&&wd(s)&&(xn=!0))}function d_(s,l,h,m){ot=s;var b=0;do{if(ku&&(Du=null),Lc=0,ku=!1,25<=b)throw Error(r(301));if(b+=1,tn=At=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}k.H=vs,E=l(h,m)}while(ku);return E}function CI(){var s=k.H,l=s.useState()[0];return l=typeof l.then=="function"?Bc(l):l,s=s.useState()[0],(At!==null?At.memoizedState:null)!==s&&(ot.flags|=1024),l}function Zm(){var s=hd!==0;return hd=0,s}function Jm(s,l,h){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~h}function eg(s){if(fd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}fd=!1}Zi=0,tn=At=ot=null,ku=!1,Lc=hd=0,Du=null}function lr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?ot.memoizedState=tn=s:tn=tn.next=s,tn}function nn(){if(At===null){var s=ot.alternate;s=s!==null?s.memoizedState:null}else s=At.next;var l=tn===null?ot.memoizedState:tn.next;if(l!==null)tn=l,At=s;else{if(s===null)throw ot.alternate===null?Error(r(467)):Error(r(310));At=s,s={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},tn===null?ot.memoizedState=tn=s:tn=tn.next=s}return tn}var dd;dd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Bc(s){var l=Lc;return Lc+=1,Du===null&&(Du=[]),s=n_(Du,s,l),l=ot,(tn===null?l.memoizedState:tn.next)===null&&(l=l.alternate,k.H=l===null||l.memoizedState===null?ps:Ji),s}function pd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Bc(s);if(s.$$typeof===g)return Vn(s)}throw Error(r(438,String(s)))}function tg(s){var l=null,h=ot.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var m=ot.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=dd(),ot.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(s),m=0;m<s;m++)h[m]=R;return l.index++,h}function hi(s,l){return typeof l=="function"?l(s):l}function vd(s){var l=nn();return ng(l,At,s)}function ng(s,l,h){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var b=s.baseQueue,E=m.pending;if(E!==null){if(b!==null){var A=b.next;b.next=E.next,E.next=A}l.baseQueue=b=E,m.pending=null}if(E=s.baseState,b===null)s.memoizedState=E;else{l=b.next;var M=A=null,z=null,Q=l,ce=!1;do{var me=Q.lane&-536870913;if(me!==Q.lane?(vt&me)===me:(Zi&me)===me){var ae=Q.revertLane;if(ae===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),me===Ou&&(ce=!0);else if((Zi&ae)===ae){Q=Q.next,ae===Ou&&(ce=!0);continue}else me={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(M=z=me,A=E):z=z.next=me,ot.lanes|=ae,uo|=ae;me=Q.action,ds&&h(E,me),E=Q.hasEagerState?Q.eagerState:h(E,me)}else ae={lane:me,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},z===null?(M=z=ae,A=E):z=z.next=ae,ot.lanes|=me,uo|=me;Q=Q.next}while(Q!==null&&Q!==l);if(z===null?A=E:z.next=M,!xr(E,s.memoizedState)&&(xn=!0,ce&&(h=Au,h!==null)))throw h;s.memoizedState=E,s.baseState=A,s.baseQueue=z,m.lastRenderedState=E}return b===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function rg(s){var l=nn(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=s;var m=h.dispatch,b=h.pending,E=l.memoizedState;if(b!==null){h.pending=null;var A=b=b.next;do E=s(E,A.action),A=A.next;while(A!==b);xr(E,l.memoizedState)||(xn=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,m]}function p_(s,l,h){var m=ot,b=nn(),E=xt;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=l();var A=!xr((At||b).memoizedState,h);if(A&&(b.memoizedState=h,xn=!0),b=b.queue,og(g_.bind(null,m,b,s),[s]),b.getSnapshot!==l||A||tn!==null&&tn.memoizedState.tag&1){if(m.flags|=2048,Nu(9,m_.bind(null,m,b,h,l),{destroy:void 0},null),It===null)throw Error(r(349));E||(Zi&60)!==0||v_(m,l,h)}return h}function v_(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=ot.updateQueue,l===null?(l=dd(),ot.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function m_(s,l,h,m){l.value=h,l.getSnapshot=m,y_(l)&&b_(s)}function g_(s,l,h){return h(function(){y_(l)&&b_(s)})}function y_(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!xr(s,h)}catch{return!0}}function b_(s){var l=Ki(s,2);l!==null&&er(l,s,2)}function ag(s){var l=lr();if(typeof s=="function"){var h=s;if(s=h(),ds){Gi(!0);try{h()}finally{Gi(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:s},l}function x_(s,l,h,m){return s.baseState=h,ng(s,At,typeof m=="function"?m:hi)}function RI(s,l,h,m,b){if(yd(s))throw Error(r(485));if(s=l.action,s!==null){var E={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){E.listeners.push(A)}};k.T!==null?h(!0):E.isTransition=!1,m(E),h=l.pending,h===null?(E.next=l.pending=E,w_(l,E)):(E.next=h.next,l.pending=h.next=E)}}function w_(s,l){var h=l.action,m=l.payload,b=s.state;if(l.isTransition){var E=k.T,A={};k.T=A;try{var M=h(b,m),z=k.S;z!==null&&z(A,M),__(s,l,M)}catch(Q){ig(s,l,Q)}finally{k.T=E}}else try{E=h(b,m),__(s,l,E)}catch(Q){ig(s,l,Q)}}function __(s,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){E_(s,l,m)},function(m){return ig(s,l,m)}):E_(s,l,h)}function E_(s,l,h){l.status="fulfilled",l.value=h,S_(l),s.state=h,l=s.pending,l!==null&&(h=l.next,h===l?s.pending=null:(h=h.next,l.next=h,w_(s,h)))}function ig(s,l,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=h,S_(l),l=l.next;while(l!==m)}s.action=null}function S_(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function C_(s,l){return l}function R_(s,l){if(xt){var h=It.formState;if(h!==null){e:{var m=ot;if(xt){if(In){t:{for(var b=In,E=Ca;b.nodeType!==8;){if(!E){b=null;break t}if(b=ia(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){In=ia(b.nextSibling),m=b.data==="F!";break e}}cs(m)}m=!1}m&&(l=h[0])}}return h=lr(),h.memoizedState=h.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C_,lastRenderedState:l},h.queue=m,h=W_.bind(null,ot,m),m.dispatch=h,m=ag(!1),E=fg.bind(null,ot,!1,m.queue),m=lr(),b={state:l,dispatch:null,action:s,pending:null},m.queue=b,h=RI.bind(null,ot,b,E,h),b.dispatch=h,m.memoizedState=s,[l,h,!1]}function T_(s){var l=nn();return O_(l,At,s)}function O_(s,l,h){l=ng(s,l,C_)[0],s=vd(hi)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?Bc(l):l;var m=nn(),b=m.queue,E=b.dispatch;return h!==m.memoizedState&&(ot.flags|=2048,Nu(9,TI.bind(null,b,h),{destroy:void 0},null)),[l,E,s]}function TI(s,l){s.action=l}function A_(s){var l=nn(),h=At;if(h!==null)return O_(l,h,s);nn(),l=l.memoizedState,h=nn();var m=h.queue.dispatch;return h.memoizedState=s,[l,m,!1]}function Nu(s,l,h,m){return s={tag:s,create:l,inst:h,deps:m,next:null},l=ot.updateQueue,l===null&&(l=dd(),ot.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,l.lastEffect=s),s}function k_(){return nn().memoizedState}function md(s,l,h,m){var b=lr();ot.flags|=s,b.memoizedState=Nu(1|l,h,{destroy:void 0},m===void 0?null:m)}function gd(s,l,h,m){var b=nn();m=m===void 0?null:m;var E=b.memoizedState.inst;At!==null&&m!==null&&Xm(m,At.memoizedState.deps)?b.memoizedState=Nu(l,h,E,m):(ot.flags|=s,b.memoizedState=Nu(1|l,h,E,m))}function D_(s,l){md(8390656,8,s,l)}function og(s,l){gd(2048,8,s,l)}function N_(s,l){return gd(4,2,s,l)}function I_(s,l){return gd(4,4,s,l)}function M_(s,l){if(typeof l=="function"){s=s();var h=l(s);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function F_(s,l,h){h=h!=null?h.concat([s]):null,gd(4,4,M_.bind(null,l,s),h)}function sg(){}function P_(s,l){var h=nn();l=l===void 0?null:l;var m=h.memoizedState;return l!==null&&Xm(l,m[1])?m[0]:(h.memoizedState=[s,l],s)}function L_(s,l){var h=nn();l=l===void 0?null:l;var m=h.memoizedState;if(l!==null&&Xm(l,m[1]))return m[0];if(m=s(),ds){Gi(!0);try{s()}finally{Gi(!1)}}return h.memoizedState=[m,l],m}function ug(s,l,h){return h===void 0||(Zi&1073741824)!==0?s.memoizedState=l:(s.memoizedState=h,s=zE(),ot.lanes|=s,uo|=s,h)}function B_(s,l,h,m){return xr(h,l)?h:Tu.current!==null?(s=ug(s,h,m),xr(s,l)||(xn=!0),s):(Zi&42)===0?(xn=!0,s.memoizedState=h):(s=zE(),ot.lanes|=s,uo|=s,l)}function z_(s,l,h,m,b){var E=he.p;he.p=E!==0&&8>E?E:8;var A=k.T,M={};k.T=M,fg(s,!1,l,h);try{var z=b(),Q=k.S;if(Q!==null&&Q(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ce=EI(z,m);zc(s,l,ce,Sr(s))}else zc(s,l,m,Sr(s))}catch(me){zc(s,l,{then:function(){},status:"rejected",reason:me},Sr())}finally{he.p=E,k.T=A}}function OI(){}function lg(s,l,h,m){if(s.tag!==5)throw Error(r(476));var b=U_(s).queue;z_(s,b,l,be,h===null?OI:function(){return V_(s),h(m)})}function U_(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:be},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:h},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function V_(s){var l=U_(s).next.queue;zc(s,l,{},Sr())}function cg(){return Vn(of)}function j_(){return nn().memoizedState}function q_(){return nn().memoizedState}function AI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var h=Sr();s=no(h);var m=ro(l,s,h);m!==null&&(er(m,l,h),jc(m,l,h)),l={cache:Qm()},s.payload=l;return}l=l.return}}function kI(s,l,h){var m=Sr();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},yd(s)?H_(l,h):(h=Um(s,l,h,m),h!==null&&(er(h,s,m),G_(h,l,m)))}function W_(s,l,h){var m=Sr();zc(s,l,h,m)}function zc(s,l,h,m){var b={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(yd(s))H_(l,b);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var A=l.lastRenderedState,M=E(A,h);if(b.hasEagerState=!0,b.eagerState=M,xr(M,A))return td(s,l,b,0),It===null&&ed(),!1}catch{}finally{}if(h=Um(s,l,b,m),h!==null)return er(h,s,m),G_(h,l,m),!0}return!1}function fg(s,l,h,m){if(m={lane:2,revertLane:ey(),action:m,hasEagerState:!1,eagerState:null,next:null},yd(s)){if(l)throw Error(r(479))}else l=Um(s,h,m,2),l!==null&&er(l,s,2)}function yd(s){var l=s.alternate;return s===ot||l!==null&&l===ot}function H_(s,l){ku=fd=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function G_(s,l,h){if((h&4194176)!==0){var m=l.lanes;m&=s.pendingLanes,h|=m,l.lanes=h,rw(s,h)}}var Ta={readContext:Vn,use:pd,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt};Ta.useCacheRefresh=Jt,Ta.useMemoCache=Jt,Ta.useHostTransitionStatus=Jt,Ta.useFormState=Jt,Ta.useActionState=Jt,Ta.useOptimistic=Jt;var ps={readContext:Vn,use:pd,useCallback:function(s,l){return lr().memoizedState=[s,l===void 0?null:l],s},useContext:Vn,useEffect:D_,useImperativeHandle:function(s,l,h){h=h!=null?h.concat([s]):null,md(4194308,4,M_.bind(null,l,s),h)},useLayoutEffect:function(s,l){return md(4194308,4,s,l)},useInsertionEffect:function(s,l){md(4,2,s,l)},useMemo:function(s,l){var h=lr();l=l===void 0?null:l;var m=s();if(ds){Gi(!0);try{s()}finally{Gi(!1)}}return h.memoizedState=[m,l],m},useReducer:function(s,l,h){var m=lr();if(h!==void 0){var b=h(l);if(ds){Gi(!0);try{h(l)}finally{Gi(!1)}}}else b=l;return m.memoizedState=m.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},m.queue=s,s=s.dispatch=kI.bind(null,ot,s),[m.memoizedState,s]},useRef:function(s){var l=lr();return s={current:s},l.memoizedState=s},useState:function(s){s=ag(s);var l=s.queue,h=W_.bind(null,ot,l);return l.dispatch=h,[s.memoizedState,h]},useDebugValue:sg,useDeferredValue:function(s,l){var h=lr();return ug(h,s,l)},useTransition:function(){var s=ag(!1);return s=z_.bind(null,ot,s.queue,!0,!1),lr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,h){var m=ot,b=lr();if(xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),It===null)throw Error(r(349));(vt&60)!==0||v_(m,l,h)}b.memoizedState=h;var E={value:h,getSnapshot:l};return b.queue=E,D_(g_.bind(null,m,E,s),[s]),m.flags|=2048,Nu(9,m_.bind(null,m,E,h,l),{destroy:void 0},null),h},useId:function(){var s=lr(),l=It.identifierPrefix;if(xt){var h=ci,m=li;h=(m&~(1<<32-br(m)-1)).toString(32)+h,l=":"+l+"R"+h,h=hd++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=SI++,l=":"+l+"r"+h.toString(32)+":";return s.memoizedState=l},useCacheRefresh:function(){return lr().memoizedState=AI.bind(null,ot)}};ps.useMemoCache=tg,ps.useHostTransitionStatus=cg,ps.useFormState=R_,ps.useActionState=R_,ps.useOptimistic=function(s){var l=lr();l.memoizedState=l.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=fg.bind(null,ot,!0,h),h.dispatch=l,[s,l]};var Ji={readContext:Vn,use:pd,useCallback:P_,useContext:Vn,useEffect:og,useImperativeHandle:F_,useInsertionEffect:N_,useLayoutEffect:I_,useMemo:L_,useReducer:vd,useRef:k_,useState:function(){return vd(hi)},useDebugValue:sg,useDeferredValue:function(s,l){var h=nn();return B_(h,At.memoizedState,s,l)},useTransition:function(){var s=vd(hi)[0],l=nn().memoizedState;return[typeof s=="boolean"?s:Bc(s),l]},useSyncExternalStore:p_,useId:j_};Ji.useCacheRefresh=q_,Ji.useMemoCache=tg,Ji.useHostTransitionStatus=cg,Ji.useFormState=T_,Ji.useActionState=T_,Ji.useOptimistic=function(s,l){var h=nn();return x_(h,At,s,l)};var vs={readContext:Vn,use:pd,useCallback:P_,useContext:Vn,useEffect:og,useImperativeHandle:F_,useInsertionEffect:N_,useLayoutEffect:I_,useMemo:L_,useReducer:rg,useRef:k_,useState:function(){return rg(hi)},useDebugValue:sg,useDeferredValue:function(s,l){var h=nn();return At===null?ug(h,s,l):B_(h,At.memoizedState,s,l)},useTransition:function(){var s=rg(hi)[0],l=nn().memoizedState;return[typeof s=="boolean"?s:Bc(s),l]},useSyncExternalStore:p_,useId:j_};vs.useCacheRefresh=q_,vs.useMemoCache=tg,vs.useHostTransitionStatus=cg,vs.useFormState=A_,vs.useActionState=A_,vs.useOptimistic=function(s,l){var h=nn();return At!==null?x_(h,At,s,l):(h.baseState=s,[s,h.queue.dispatch])};function hg(s,l,h,m){l=s.memoizedState,h=h(m,l),h=h==null?l:I({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var dg={isMounted:function(s){return(s=s._reactInternals)?G(s)===s:!1},enqueueSetState:function(s,l,h){s=s._reactInternals;var m=Sr(),b=no(m);b.payload=l,h!=null&&(b.callback=h),l=ro(s,b,m),l!==null&&(er(l,s,m),jc(l,s,m))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var m=Sr(),b=no(m);b.tag=1,b.payload=l,h!=null&&(b.callback=h),l=ro(s,b,m),l!==null&&(er(l,s,m),jc(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=Sr(),m=no(h);m.tag=2,l!=null&&(m.callback=l),l=ro(s,m,h),l!==null&&(er(l,s,h),jc(l,s,h))}};function Q_(s,l,h,m,b,E,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,A):l.prototype&&l.prototype.isPureReactComponent?!Rc(h,m)||!Rc(b,E):!0}function $_(s,l,h,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==s&&dg.enqueueReplaceState(l,l.state,null)}function ms(s,l){var h=l;if("ref"in l){h={};for(var m in l)m!=="ref"&&(h[m]=l[m])}if(s=s.defaultProps){h===l&&(h=I({},h));for(var b in s)h[b]===void 0&&(h[b]=s[b])}return h}var bd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function K_(s){bd(s)}function X_(s){console.error(s)}function Y_(s){bd(s)}function xd(s,l){try{var h=s.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function Z_(s,l,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function pg(s,l,h){return h=no(h),h.tag=3,h.payload={element:null},h.callback=function(){xd(s,l)},h}function J_(s){return s=no(s),s.tag=3,s}function eE(s,l,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var E=m.value;s.payload=function(){return b(E)},s.callback=function(){Z_(l,h,m)}}var A=h.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){Z_(l,h,m),typeof b!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var M=m.stack;this.componentDidCatch(m.value,{componentStack:M!==null?M:""})})}function DI(s,l,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=h.alternate,l!==null&&Vc(l,h,b,!0),h=zr.current,h!==null){switch(h.tag){case 13:return Ra===null?Kg():h.alternate===null&&Qt===0&&(Qt=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===Wm?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([m]):l.add(m),Yg(s,m,b)),!1;case 22:return h.flags|=65536,m===Wm?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([m]):h.add(m)),Yg(s,m,b)),!1}throw Error(r(435,h.tag))}return Yg(s,m,b),Kg(),!1}if(xt)return l=zr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,m!==qm&&(s=Error(r(422),{cause:m}),kc(Pr(s,h)))):(m!==qm&&(l=Error(r(423),{cause:m}),kc(Pr(l,h))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,m=Pr(m,h),b=pg(s.stateNode,m,b),Ag(s,b),Qt!==4&&(Qt=2)),!1;var E=Error(r(520),{cause:m});if(E=Pr(E,h),Xc===null?Xc=[E]:Xc.push(E),Qt!==4&&(Qt=2),l===null)return!0;m=Pr(m,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,s=b&-b,h.lanes|=s,s=pg(h.stateNode,m,s),Ag(h,s),!1;case 1:if(l=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(lo===null||!lo.has(E))))return h.flags|=65536,b&=-b,h.lanes|=b,b=J_(b),eE(b,s,h,m),Ag(h,b),!1}h=h.return}while(h!==null);return!1}var tE=Error(r(461)),xn=!1;function Mn(s,l,h,m){l.child=s===null?o_(l,null,h,m):fs(l,s.child,h,m)}function nE(s,l,h,m,b){h=h.render;var E=l.ref;if("ref"in m){var A={};for(var M in m)M!=="ref"&&(A[M]=m[M])}else A=m;return ys(l),m=Ym(s,l,h,A,E,b),M=Zm(),s!==null&&!xn?(Jm(s,l,b),di(s,l,b)):(xt&&M&&Vm(l),l.flags|=1,Mn(s,l,m,b),l.child)}function rE(s,l,h,m,b){if(s===null){var E=h.type;return typeof E=="function"&&!Lg(E)&&E.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=E,aE(s,l,E,m,b)):(s=Cd(h.type,null,m,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,!Eg(s,b)){var A=E.memoizedProps;if(h=h.compare,h=h!==null?h:Rc,h(A,m)&&s.ref===l.ref)return di(s,l,b)}return l.flags|=1,s=so(E,m),s.ref=l.ref,s.return=l,l.child=s}function aE(s,l,h,m,b){if(s!==null){var E=s.memoizedProps;if(Rc(E,m)&&s.ref===l.ref)if(xn=!1,l.pendingProps=m=E,Eg(s,b))(s.flags&131072)!==0&&(xn=!0);else return l.lanes=s.lanes,di(s,l,b)}return vg(s,l,h,m,b)}function iE(s,l,h){var m=l.pendingProps,b=m.children,E=(l.stateNode._pendingVisibility&2)!==0,A=s!==null?s.memoizedState:null;if(Uc(s,l),m.mode==="hidden"||E){if((l.flags&128)!==0){if(m=A!==null?A.baseLanes|h:h,s!==null){for(b=l.child=s.child,E=0;b!==null;)E=E|b.lanes|b.childLanes,b=b.sibling;l.childLanes=E&~m}else l.childLanes=0,l.child=null;return oE(s,l,m,h)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&cd(l,A!==null?A.cachePool:null),A!==null?s_(l,A):Hm(),u_(l);else return l.lanes=l.childLanes=536870912,oE(s,l,A!==null?A.baseLanes|h:h,h)}else A!==null?(cd(l,A.cachePool),s_(l,A),Yi(),l.memoizedState=null):(s!==null&&cd(l,null),Hm(),Yi());return Mn(s,l,b,h),l.child}function oE(s,l,h,m){var b=Km();return b=b===null?null:{parent:ln._currentValue,pool:b},l.memoizedState={baseLanes:h,cachePool:b},s!==null&&cd(l,null),Hm(),u_(l),s!==null&&Vc(s,l,m,!0),null}function Uc(s,l){var h=l.ref;if(h===null)s!==null&&s.ref!==null&&(l.flags|=2097664);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(s===null||s.ref!==h)&&(l.flags|=2097664)}}function vg(s,l,h,m,b){return ys(l),h=Ym(s,l,h,m,void 0,b),m=Zm(),s!==null&&!xn?(Jm(s,l,b),di(s,l,b)):(xt&&m&&Vm(l),l.flags|=1,Mn(s,l,h,b),l.child)}function sE(s,l,h,m,b,E){return ys(l),l.updateQueue=null,h=d_(l,m,h,b),h_(s),m=Zm(),s!==null&&!xn?(Jm(s,l,E),di(s,l,E)):(xt&&m&&Vm(l),l.flags|=1,Mn(s,l,h,E),l.child)}function uE(s,l,h,m,b){if(ys(l),l.stateNode===null){var E=Eu,A=h.contextType;typeof A=="object"&&A!==null&&(E=Vn(A)),E=new h(m,E),l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=dg,l.stateNode=E,E._reactInternals=l,E=l.stateNode,E.props=m,E.state=l.memoizedState,E.refs={},Tg(l),A=h.contextType,E.context=typeof A=="object"&&A!==null?Vn(A):Eu,E.state=l.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(hg(l,h,A,m),E.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(A=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),A!==E.state&&dg.enqueueReplaceState(E,E.state,null),Wc(l,m,E,b),qc(),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(s===null){E=l.stateNode;var M=l.memoizedProps,z=ms(h,M);E.props=z;var Q=E.context,ce=h.contextType;A=Eu,typeof ce=="object"&&ce!==null&&(A=Vn(ce));var me=h.getDerivedStateFromProps;ce=typeof me=="function"||typeof E.getSnapshotBeforeUpdate=="function",M=l.pendingProps!==M,ce||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M||Q!==A)&&$_(l,E,m,A),to=!1;var ae=l.memoizedState;E.state=ae,Wc(l,m,E,b),qc(),Q=l.memoizedState,M||ae!==Q||to?(typeof me=="function"&&(hg(l,h,me,m),Q=l.memoizedState),(z=to||Q_(l,h,z,m,ae,Q,A))?(ce||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Q),E.props=m,E.state=Q,E.context=A,m=z):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{E=l.stateNode,Og(s,l),A=l.memoizedProps,ce=ms(h,A),E.props=ce,me=l.pendingProps,ae=E.context,Q=h.contextType,z=Eu,typeof Q=="object"&&Q!==null&&(z=Vn(Q)),M=h.getDerivedStateFromProps,(Q=typeof M=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==me||ae!==z)&&$_(l,E,m,z),to=!1,ae=l.memoizedState,E.state=ae,Wc(l,m,E,b),qc();var le=l.memoizedState;A!==me||ae!==le||to||s!==null&&s.dependencies!==null&&wd(s.dependencies)?(typeof M=="function"&&(hg(l,h,M,m),le=l.memoizedState),(ce=to||Q_(l,h,ce,m,ae,le,z)||s!==null&&s.dependencies!==null&&wd(s.dependencies))?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,le,z),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,le,z)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=le),E.props=m,E.state=le,E.context=z,m=ce):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),m=!1)}return E=m,Uc(s,l),m=(l.flags&128)!==0,E||m?(E=l.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),l.flags|=1,s!==null&&m?(l.child=fs(l,s.child,null,b),l.child=fs(l,null,h,b)):Mn(s,l,h,b),l.memoizedState=E.state,s=l.child):s=di(s,l,b),s}function lE(s,l,h,m){return Ac(),l.flags|=256,Mn(s,l,h,m),l.child}var mg={dehydrated:null,treeContext:null,retryLane:0};function gg(s){return{baseLanes:s,cachePool:f_()}}function yg(s,l,h){return s=s!==null?s.childLanes&~h:0,l&&(s|=qr),s}function cE(s,l,h){var m=l.pendingProps,b=!1,E=(l.flags&128)!==0,A;if((A=E)||(A=s!==null&&s.memoizedState===null?!1:(un.current&2)!==0),A&&(b=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,s===null){if(xt){if(b?Xi(l):Yi(),xt){var M=In,z;if(z=M){e:{for(z=M,M=Ca;z.nodeType!==8;){if(!M){M=null;break e}if(z=ia(z.nextSibling),z===null){M=null;break e}}M=z}M!==null?(l.memoizedState={dehydrated:M,treeContext:us!==null?{id:li,overflow:ci}:null,retryLane:536870912},z=jr(18,null,null,0),z.stateNode=M,z.return=l,l.child=z,Jn=l,In=null,z=!0):z=!1}z||cs(l)}if(M=l.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return M.data==="$!"?l.lanes=16:l.lanes=536870912,null;fi(l)}return M=m.children,m=m.fallback,b?(Yi(),b=l.mode,M=xg({mode:"hidden",children:M},b),m=xs(m,b,h,null),M.return=l,m.return=l,M.sibling=m,l.child=M,b=l.child,b.memoizedState=gg(h),b.childLanes=yg(s,A,h),l.memoizedState=mg,m):(Xi(l),bg(l,M))}if(z=s.memoizedState,z!==null&&(M=z.dehydrated,M!==null)){if(E)l.flags&256?(Xi(l),l.flags&=-257,l=wg(s,l,h)):l.memoizedState!==null?(Yi(),l.child=s.child,l.flags|=128,l=null):(Yi(),b=m.fallback,M=l.mode,m=xg({mode:"visible",children:m.children},M),b=xs(b,M,h,null),b.flags|=2,m.return=l,b.return=l,m.sibling=b,l.child=m,fs(l,s.child,null,h),m=l.child,m.memoizedState=gg(h),m.childLanes=yg(s,A,h),l.memoizedState=mg,l=b);else if(Xi(l),M.data==="$!"){if(A=M.nextSibling&&M.nextSibling.dataset,A)var Q=A.dgst;A=Q,m=Error(r(419)),m.stack="",m.digest=A,kc({value:m,source:null,stack:null}),l=wg(s,l,h)}else if(xn||Vc(s,l,h,!1),A=(h&s.childLanes)!==0,xn||A){if(A=It,A!==null){if(m=h&-h,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(A.suspendedLanes|h))!==0?0:m,m!==0&&m!==z.retryLane)throw z.retryLane=m,Ki(s,m),er(A,s,m),tE}M.data==="$?"||Kg(),l=wg(s,l,h)}else M.data==="$?"?(l.flags|=128,l.child=s.child,l=GI.bind(null,s),M._reactRetry=l,l=null):(s=z.treeContext,In=ia(M.nextSibling),Jn=l,xt=!0,ra=null,Ca=!1,s!==null&&(Lr[Br++]=li,Lr[Br++]=ci,Lr[Br++]=us,li=s.id,ci=s.overflow,us=l),l=bg(l,m.children),l.flags|=4096);return l}return b?(Yi(),b=m.fallback,M=l.mode,z=s.child,Q=z.sibling,m=so(z,{mode:"hidden",children:m.children}),m.subtreeFlags=z.subtreeFlags&31457280,Q!==null?b=so(Q,b):(b=xs(b,M,h,null),b.flags|=2),b.return=l,m.return=l,m.sibling=b,l.child=m,m=b,b=l.child,M=s.child.memoizedState,M===null?M=gg(h):(z=M.cachePool,z!==null?(Q=ln._currentValue,z=z.parent!==Q?{parent:Q,pool:Q}:z):z=f_(),M={baseLanes:M.baseLanes|h,cachePool:z}),b.memoizedState=M,b.childLanes=yg(s,A,h),l.memoizedState=mg,m):(Xi(l),h=s.child,s=h.sibling,h=so(h,{mode:"visible",children:m.children}),h.return=l,h.sibling=null,s!==null&&(A=l.deletions,A===null?(l.deletions=[s],l.flags|=16):A.push(s)),l.child=h,l.memoizedState=null,h)}function bg(s,l){return l=xg({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function xg(s,l){return PE(s,l,0,null)}function wg(s,l,h){return fs(l,s.child,null,h),s=bg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function fE(s,l,h){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),Cg(s.return,l,h)}function _g(s,l,h,m,b){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=h,E.tailMode=b)}function hE(s,l,h){var m=l.pendingProps,b=m.revealOrder,E=m.tail;if(Mn(s,l,m.children,h),m=un.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fE(s,h,l);else if(s.tag===19)fE(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(je(un,m),b){case"forwards":for(h=l.child,b=null;h!==null;)s=h.alternate,s!==null&&ld(s)===null&&(b=h),h=h.sibling;h=b,h===null?(b=l.child,l.child=null):(b=h.sibling,h.sibling=null),_g(l,!1,b,h,E);break;case"backwards":for(h=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&ld(s)===null){l.child=b;break}s=b.sibling,b.sibling=h,h=b,b=s}_g(l,!0,h,null,E);break;case"together":_g(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function di(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),uo|=l.lanes,(h&l.childLanes)===0)if(s!==null){if(Vc(s,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,h=so(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=so(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function Eg(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&wd(s)))}function NI(s,l,h){switch(l.tag){case 3:St(l,l.stateNode.containerInfo),eo(l,ln,s.memoizedState.cache),Ac();break;case 27:case 5:or(l);break;case 4:St(l,l.stateNode.containerInfo);break;case 10:eo(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Xi(l),l.flags|=128,null):(h&l.child.childLanes)!==0?cE(s,l,h):(Xi(l),s=di(s,l,h),s!==null?s.sibling:null);Xi(l);break;case 19:var b=(s.flags&128)!==0;if(m=(h&l.childLanes)!==0,m||(Vc(s,l,h,!1),m=(h&l.childLanes)!==0),b){if(m)return hE(s,l,h);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),je(un,un.current),m)break;return null;case 22:case 23:return l.lanes=0,iE(s,l,h);case 24:eo(l,ln,s.memoizedState.cache)}return di(s,l,h)}function dE(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps)xn=!0;else{if(!Eg(s,h)&&(l.flags&128)===0)return xn=!1,NI(s,l,h);xn=(s.flags&131072)!==0}else xn=!1,xt&&(l.flags&1048576)!==0&&Yw(l,ad,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var m=l.elementType,b=m._init;if(m=b(m._payload),l.type=m,typeof m=="function")Lg(m)?(s=ms(m,s),l.tag=1,l=uE(null,l,m,s,h)):(l.tag=0,l=vg(null,l,m,s,h));else{if(m!=null){if(b=m.$$typeof,b===y){l.tag=11,l=nE(null,l,m,s,h);break e}else if(b===_){l.tag=14,l=rE(null,l,m,s,h);break e}}throw l=N(m)||m,Error(r(306,l,""))}}return l;case 0:return vg(s,l,l.type,l.pendingProps,h);case 1:return m=l.type,b=ms(m,l.pendingProps),uE(s,l,m,b,h);case 3:e:{if(St(l,l.stateNode.containerInfo),s===null)throw Error(r(387));var E=l.pendingProps;b=l.memoizedState,m=b.element,Og(s,l),Wc(l,E,null,h);var A=l.memoizedState;if(E=A.cache,eo(l,ln,E),E!==b.cache&&Rg(l,[ln],h,!0),qc(),E=A.element,b.isDehydrated)if(b={element:E,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=lE(s,l,E,h);break e}else if(E!==m){m=Pr(Error(r(424)),l),kc(m),l=lE(s,l,E,h);break e}else for(In=ia(l.stateNode.containerInfo.firstChild),Jn=l,xt=!0,ra=null,Ca=!0,h=o_(l,null,E,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ac(),E===m){l=di(s,l,h);break e}Mn(s,l,E,h)}l=l.child}return l;case 26:return Uc(s,l),s===null?(h=mS(l.type,null,l.pendingProps,null))?l.memoizedState=h:xt||(h=l.type,s=l.pendingProps,m=Ld(Ye.current).createElement(h),m[Un]=l,m[sr]=s,Fn(m,h,s),bn(m),l.stateNode=m):l.memoizedState=mS(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return or(l),s===null&&xt&&(m=l.stateNode=dS(l.type,l.pendingProps,Ye.current),Jn=l,Ca=!0,In=ia(m.firstChild)),m=l.pendingProps.children,s!==null||xt?Mn(s,l,m,h):l.child=fs(l,null,m,h),Uc(s,l),l.child;case 5:return s===null&&xt&&((b=m=In)&&(m=uM(m,l.type,l.pendingProps,Ca),m!==null?(l.stateNode=m,Jn=l,In=ia(m.firstChild),Ca=!1,b=!0):b=!1),b||cs(l)),or(l),b=l.type,E=l.pendingProps,A=s!==null?s.memoizedProps:null,m=E.children,ly(b,E)?m=null:A!==null&&ly(b,A)&&(l.flags|=32),l.memoizedState!==null&&(b=Ym(s,l,CI,null,null,h),of._currentValue=b),Uc(s,l),Mn(s,l,m,h),l.child;case 6:return s===null&&xt&&((s=h=In)&&(h=lM(h,l.pendingProps,Ca),h!==null?(l.stateNode=h,Jn=l,In=null,s=!0):s=!1),s||cs(l)),null;case 13:return cE(s,l,h);case 4:return St(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=fs(l,null,m,h):Mn(s,l,m,h),l.child;case 11:return nE(s,l,l.type,l.pendingProps,h);case 7:return Mn(s,l,l.pendingProps,h),l.child;case 8:return Mn(s,l,l.pendingProps.children,h),l.child;case 12:return Mn(s,l,l.pendingProps.children,h),l.child;case 10:return m=l.pendingProps,eo(l,l.type,m.value),Mn(s,l,m.children,h),l.child;case 9:return b=l.type._context,m=l.pendingProps.children,ys(l),b=Vn(b),m=m(b),l.flags|=1,Mn(s,l,m,h),l.child;case 14:return rE(s,l,l.type,l.pendingProps,h);case 15:return aE(s,l,l.type,l.pendingProps,h);case 19:return hE(s,l,h);case 22:return iE(s,l,h);case 24:return ys(l),m=Vn(ln),s===null?(b=Km(),b===null&&(b=It,E=Qm(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=h),b=E),l.memoizedState={parent:m,cache:b},Tg(l),eo(l,ln,b)):((s.lanes&h)!==0&&(Og(s,l),Wc(l,null,null,h),qc()),b=s.memoizedState,E=l.memoizedState,b.parent!==m?(b={parent:m,cache:m},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),eo(l,ln,m)):(m=E.cache,eo(l,ln,m),m!==b.cache&&Rg(l,[ln],h,!0))),Mn(s,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}var Sg=xe(null),gs=null,pi=null;function eo(s,l,h){je(Sg,l._currentValue),l._currentValue=h}function vi(s){s._currentValue=Sg.current,Oe(Sg)}function Cg(s,l,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===h)break;s=s.return}}function Rg(s,l,h,m){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var E=b.dependencies;if(E!==null){var A=b.child;E=E.firstContext;e:for(;E!==null;){var M=E;E=b;for(var z=0;z<l.length;z++)if(M.context===l[z]){E.lanes|=h,M=E.alternate,M!==null&&(M.lanes|=h),Cg(E.return,h,s),m||(A=null);break e}E=M.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(r(341));A.lanes|=h,E=A.alternate,E!==null&&(E.lanes|=h),Cg(A,h,s),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===s){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function Vc(s,l,h,m){s=null;for(var b=l,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var M=b.type;xr(b.pendingProps.value,A.value)||(s!==null?s.push(M):s=[M])}}else if(b===bt.current){if(A=b.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(of):s=[of])}b=b.return}s!==null&&Rg(l,s,h,m),l.flags|=262144}function wd(s){for(s=s.firstContext;s!==null;){if(!xr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ys(s){gs=s,pi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Vn(s){return pE(gs,s)}function _d(s,l){return gs===null&&ys(s),pE(s,l)}function pE(s,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},pi===null){if(s===null)throw Error(r(308));pi=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else pi=pi.next=l;return h}var to=!1;function Tg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Og(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function no(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ro(s,l,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Ut&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,l=nd(s),Kw(s,null,h),l}return td(s,m,l,h),nd(s)}function jc(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194176)!==0)){var m=l.lanes;m&=s.pendingLanes,h|=m,l.lanes=h,rw(s,h)}}function Ag(s,l){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var A={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?b=E=A:E=E.next=A,h=h.next}while(h!==null);E===null?b=E=l:E=E.next=l}else b=E=l;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}var kg=!1;function qc(){if(kg){var s=Au;if(s!==null)throw s}}function Wc(s,l,h,m){kg=!1;var b=s.updateQueue;to=!1;var E=b.firstBaseUpdate,A=b.lastBaseUpdate,M=b.shared.pending;if(M!==null){b.shared.pending=null;var z=M,Q=z.next;z.next=null,A===null?E=Q:A.next=Q,A=z;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,M=ce.lastBaseUpdate,M!==A&&(M===null?ce.firstBaseUpdate=Q:M.next=Q,ce.lastBaseUpdate=z))}if(E!==null){var me=b.baseState;A=0,ce=Q=z=null,M=E;do{var ae=M.lane&-536870913,le=ae!==M.lane;if(le?(vt&ae)===ae:(m&ae)===ae){ae!==0&&ae===Ou&&(kg=!0),ce!==null&&(ce=ce.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var ze=s,Ze=M;ae=l;var $t=h;switch(Ze.tag){case 1:if(ze=Ze.payload,typeof ze=="function"){me=ze.call($t,me,ae);break e}me=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ze.payload,ae=typeof ze=="function"?ze.call($t,me,ae):ze,ae==null)break e;me=I({},me,ae);break e;case 2:to=!0}}ae=M.callback,ae!==null&&(s.flags|=64,le&&(s.flags|=8192),le=b.callbacks,le===null?b.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ce===null?(Q=ce=le,z=me):ce=ce.next=le,A|=ae;if(M=M.next,M===null){if(M=b.shared.pending,M===null)break;le=M,M=le.next,le.next=null,b.lastBaseUpdate=le,b.shared.pending=null}}while(!0);ce===null&&(z=me),b.baseState=z,b.firstBaseUpdate=Q,b.lastBaseUpdate=ce,E===null&&(b.shared.lanes=0),uo|=A,s.lanes=A,s.memoizedState=me}}function vE(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function mE(s,l){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)vE(h[s],l)}function Hc(s,l){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&s)===s){m=void 0;var E=h.create,A=h.inst;m=E(),A.destroy=m}h=h.next}while(h!==b)}}catch(M){Dt(l,l.return,M)}}function ao(s,l,h){try{var m=l.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var E=b.next;m=E;do{if((m.tag&s)===s){var A=m.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,b=l;var z=h;try{M()}catch(Q){Dt(b,z,Q)}}}m=m.next}while(m!==E)}}catch(Q){Dt(l,l.return,Q)}}function gE(s){var l=s.updateQueue;if(l!==null){var h=s.stateNode;try{mE(l,h)}catch(m){Dt(s,s.return,m)}}}function yE(s,l,h){h.props=ms(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){Dt(s,l,m)}}function bs(s,l){try{var h=s.ref;if(h!==null){var m=s.stateNode;switch(s.tag){case 26:case 27:case 5:var b=m;break;default:b=m}typeof h=="function"?s.refCleanup=h(b):h.current=b}}catch(E){Dt(s,l,E)}}function wr(s,l){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){Dt(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Dt(s,l,b)}else h.current=null}function bE(s){var l=s.type,h=s.memoizedProps,m=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){Dt(s,s.return,b)}}function xE(s,l,h){try{var m=s.stateNode;rM(m,s.type,h,l),m[sr]=l}catch(b){Dt(s,s.return,b)}}function wE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function Dg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ng(s,l,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(s,l):h.insertBefore(s,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(s,h)):(l=h,l.appendChild(s)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Pd));else if(m!==4&&m!==27&&(s=s.child,s!==null))for(Ng(s,l,h),s=s.sibling;s!==null;)Ng(s,l,h),s=s.sibling}function Ed(s,l,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(m!==4&&m!==27&&(s=s.child,s!==null))for(Ed(s,l,h),s=s.sibling;s!==null;)Ed(s,l,h),s=s.sibling}var mi=!1,Gt=!1,Ig=!1,_E=typeof WeakSet=="function"?WeakSet:Set,wn=null,EE=!1;function II(s,l){if(s=s.containerInfo,sy=qd,s=Uw(s),Fm(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var A=0,M=-1,z=-1,Q=0,ce=0,me=s,ae=null;t:for(;;){for(var le;me!==h||b!==0&&me.nodeType!==3||(M=A+b),me!==E||m!==0&&me.nodeType!==3||(z=A+m),me.nodeType===3&&(A+=me.nodeValue.length),(le=me.firstChild)!==null;)ae=me,me=le;for(;;){if(me===s)break t;if(ae===h&&++Q===b&&(M=A),ae===E&&++ce===m&&(z=A),(le=me.nextSibling)!==null)break;me=ae,ae=me.parentNode}me=le}h=M===-1||z===-1?null:{start:M,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for(uy={focusedElem:s,selectionRange:h},qd=!1,wn=l;wn!==null;)if(l=wn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,wn=s;else for(;wn!==null;){switch(l=wn,E=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,h=l,b=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var ze=ms(h.type,b,h.elementType===h.type);s=m.getSnapshotBeforeUpdate(ze,E),m.__reactInternalSnapshotBeforeUpdate=s}catch(Ze){Dt(h,h.return,Ze)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,h=s.nodeType,h===9)hy(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":hy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,wn=s;break}wn=l.return}return ze=EE,EE=!1,ze}function SE(s,l,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:yi(s,h),m&4&&Hc(5,h);break;case 1:if(yi(s,h),m&4)if(s=h.stateNode,l===null)try{s.componentDidMount()}catch(M){Dt(h,h.return,M)}else{var b=ms(h.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(M){Dt(h,h.return,M)}}m&64&&gE(h),m&512&&bs(h,h.return);break;case 3:if(yi(s,h),m&64&&(m=h.updateQueue,m!==null)){if(s=null,h.child!==null)switch(h.child.tag){case 27:case 5:s=h.child.stateNode;break;case 1:s=h.child.stateNode}try{mE(m,s)}catch(M){Dt(h,h.return,M)}}break;case 26:yi(s,h),m&512&&bs(h,h.return);break;case 27:case 5:yi(s,h),l===null&&m&4&&bE(h),m&512&&bs(h,h.return);break;case 12:yi(s,h);break;case 13:yi(s,h),m&4&&TE(s,h);break;case 22:if(b=h.memoizedState!==null||mi,!b){l=l!==null&&l.memoizedState!==null||Gt;var E=mi,A=Gt;mi=b,(Gt=l)&&!A?io(s,h,(h.subtreeFlags&8772)!==0):yi(s,h),mi=E,Gt=A}m&512&&(h.memoizedProps.mode==="manual"?bs(h,h.return):wr(h,h.return));break;default:yi(s,h)}}function CE(s){var l=s.alternate;l!==null&&(s.alternate=null,CE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&bm(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var rn=null,_r=!1;function gi(s,l,h){for(h=h.child;h!==null;)RE(s,l,h),h=h.sibling}function RE(s,l,h){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(oi,h)}catch{}switch(h.tag){case 26:Gt||wr(h,l),gi(s,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Gt||wr(h,l);var m=rn,b=_r;for(rn=h.stateNode,gi(s,l,h),h=h.stateNode,l=h.attributes;l.length;)h.removeAttributeNode(l[0]);bm(h),rn=m,_r=b;break;case 5:Gt||wr(h,l);case 6:b=rn;var E=_r;if(rn=null,gi(s,l,h),rn=b,_r=E,rn!==null)if(_r)try{s=rn,m=h.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)}catch(A){Dt(h,l,A)}else try{rn.removeChild(h.stateNode)}catch(A){Dt(h,l,A)}break;case 18:rn!==null&&(_r?(l=rn,h=h.stateNode,l.nodeType===8?fy(l.parentNode,h):l.nodeType===1&&fy(l,h),cf(l)):fy(rn,h.stateNode));break;case 4:m=rn,b=_r,rn=h.stateNode.containerInfo,_r=!0,gi(s,l,h),rn=m,_r=b;break;case 0:case 11:case 14:case 15:Gt||ao(2,h,l),Gt||ao(4,h,l),gi(s,l,h);break;case 1:Gt||(wr(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"&&yE(h,l,m)),gi(s,l,h);break;case 21:gi(s,l,h);break;case 22:Gt||wr(h,l),Gt=(m=Gt)||h.memoizedState!==null,gi(s,l,h),Gt=m;break;default:gi(s,l,h)}}function TE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{cf(s)}catch(h){Dt(l,l.return,h)}}function MI(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new _E),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new _E),l;default:throw Error(r(435,s.tag))}}function Mg(s,l){var h=MI(s);l.forEach(function(m){var b=QI.bind(null,s,m);h.has(m)||(h.add(m),m.then(b,b))})}function Ur(s,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],E=s,A=l,M=A;e:for(;M!==null;){switch(M.tag){case 27:case 5:rn=M.stateNode,_r=!1;break e;case 3:rn=M.stateNode.containerInfo,_r=!0;break e;case 4:rn=M.stateNode.containerInfo,_r=!0;break e}M=M.return}if(rn===null)throw Error(r(160));RE(E,A,b),rn=null,_r=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)OE(l,s),l=l.sibling}var aa=null;function OE(s,l){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ur(l,s),Vr(s),m&4&&(ao(3,s,s.return),Hc(3,s),ao(5,s,s.return));break;case 1:Ur(l,s),Vr(s),m&512&&(Gt||h===null||wr(h,h.return)),m&64&&mi&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=aa;if(Ur(l,s),Vr(s),m&512&&(Gt||h===null||wr(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){e:{m=s.type,h=s.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":E=b.getElementsByTagName("title")[0],(!E||E[gc]||E[Un]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(m),b.head.insertBefore(E,b.querySelector("head > title"))),Fn(E,m,h),E[Un]=s,bn(E),m=E;break e;case"link":var A=bS("link","href",b).get(m+(h.href||""));if(A){for(var M=0;M<A.length;M++)if(E=A[M],E.getAttribute("href")===(h.href==null?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){A.splice(M,1);break t}}E=b.createElement(m),Fn(E,m,h),b.head.appendChild(E);break;case"meta":if(A=bS("meta","content",b).get(m+(h.content||""))){for(M=0;M<A.length;M++)if(E=A[M],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){A.splice(M,1);break t}}E=b.createElement(m),Fn(E,m,h),b.head.appendChild(E);break;default:throw Error(r(468,m))}E[Un]=s,bn(E),m=E}s.stateNode=m}else xS(b,s.type,s.stateNode);else s.stateNode=yS(b,m,s.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?xS(b,s.type,s.stateNode):yS(b,m,s.memoizedProps)):m===null&&s.stateNode!==null&&xE(s,s.memoizedProps,h.memoizedProps)}break;case 27:if(m&4&&s.alternate===null){b=s.stateNode,E=s.memoizedProps;try{for(var z=b.firstChild;z;){var Q=z.nextSibling,ce=z.nodeName;z[gc]||ce==="HEAD"||ce==="BODY"||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&z.rel.toLowerCase()==="stylesheet"||b.removeChild(z),z=Q}for(var me=s.type,ae=b.attributes;ae.length;)b.removeAttributeNode(ae[0]);Fn(b,me,E),b[Un]=s,b[sr]=E}catch(ze){Dt(s,s.return,ze)}}case 5:if(Ur(l,s),Vr(s),m&512&&(Gt||h===null||wr(h,h.return)),s.flags&32){b=s.stateNode;try{mu(b,"")}catch(ze){Dt(s,s.return,ze)}}m&4&&s.stateNode!=null&&(b=s.memoizedProps,xE(s,b,h!==null?h.memoizedProps:b)),m&1024&&(Ig=!0);break;case 6:if(Ur(l,s),Vr(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(ze){Dt(s,s.return,ze)}}break;case 3:if(Ud=null,b=aa,aa=Bd(l.containerInfo),Ur(l,s),aa=b,Vr(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{cf(l.containerInfo)}catch(ze){Dt(s,s.return,ze)}Ig&&(Ig=!1,AE(s));break;case 4:m=aa,aa=Bd(s.stateNode.containerInfo),Ur(l,s),Vr(s),aa=m;break;case 12:Ur(l,s),Vr(s);break;case 13:Ur(l,s),Vr(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(qg=Dn()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Mg(s,m)));break;case 22:if(m&512&&(Gt||h===null||wr(h,h.return)),z=s.memoizedState!==null,Q=h!==null&&h.memoizedState!==null,ce=mi,me=Gt,mi=ce||z,Gt=me||Q,Ur(l,s),Gt=me,mi=ce,Vr(s),l=s.stateNode,l._current=s,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,m&8192&&(l._visibility=z?l._visibility&-2:l._visibility|1,z&&(l=mi||Gt,h===null||Q||l||Iu(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(h=null,l=s;;){if(l.tag===5||l.tag===26||l.tag===27){if(h===null){Q=h=l;try{if(b=Q.stateNode,z)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=Q.stateNode,M=Q.memoizedProps.style;var le=M!=null&&M.hasOwnProperty("display")?M.display:null;A.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ze){Dt(Q,Q.return,ze)}}}else if(l.tag===6){if(h===null){Q=l;try{Q.stateNode.nodeValue=z?"":Q.memoizedProps}catch(ze){Dt(Q,Q.return,ze)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Mg(s,h))));break;case 19:Ur(l,s),Vr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Mg(s,m)));break;case 21:break;default:Ur(l,s),Vr(s)}}function Vr(s){var l=s.flags;if(l&2){try{if(s.tag!==27){e:{for(var h=s.return;h!==null;){if(wE(h)){var m=h;break e}h=h.return}throw Error(r(160))}switch(m.tag){case 27:var b=m.stateNode,E=Dg(s);Ed(s,E,b);break;case 5:var A=m.stateNode;m.flags&32&&(mu(A,""),m.flags&=-33);var M=Dg(s);Ed(s,M,A);break;case 3:case 4:var z=m.stateNode.containerInfo,Q=Dg(s);Ng(s,Q,z);break;default:throw Error(r(161))}}}catch(ce){Dt(s,s.return,ce)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function AE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;AE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function yi(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)SE(s,l.alternate,l),l=l.sibling}function Iu(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ao(4,l,l.return),Iu(l);break;case 1:wr(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&yE(l,l.return,h),Iu(l);break;case 26:case 27:case 5:wr(l,l.return),Iu(l);break;case 22:wr(l,l.return),l.memoizedState===null&&Iu(l);break;default:Iu(l)}s=s.sibling}}function io(s,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,b=s,E=l,A=E.flags;switch(E.tag){case 0:case 11:case 15:io(b,E,h),Hc(4,E);break;case 1:if(io(b,E,h),m=E,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Q){Dt(m,m.return,Q)}if(m=E,b=m.updateQueue,b!==null){var M=m.stateNode;try{var z=b.shared.hiddenCallbacks;if(z!==null)for(b.shared.hiddenCallbacks=null,b=0;b<z.length;b++)vE(z[b],M)}catch(Q){Dt(m,m.return,Q)}}h&&A&64&&gE(E),bs(E,E.return);break;case 26:case 27:case 5:io(b,E,h),h&&m===null&&A&4&&bE(E),bs(E,E.return);break;case 12:io(b,E,h);break;case 13:io(b,E,h),h&&A&4&&TE(b,E);break;case 22:E.memoizedState===null&&io(b,E,h),bs(E,E.return);break;default:io(b,E,h)}l=l.sibling}}function Fg(s,l){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Fc(h))}function Pg(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Fc(s))}function oo(s,l,h,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)kE(s,l,h,m),l=l.sibling}function kE(s,l,h,m){var b=l.flags;switch(l.tag){case 0:case 11:case 15:oo(s,l,h,m),b&2048&&Hc(9,l);break;case 3:oo(s,l,h,m),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Fc(s)));break;case 12:if(b&2048){oo(s,l,h,m),s=l.stateNode;try{var E=l.memoizedProps,A=E.id,M=E.onPostCommit;typeof M=="function"&&M(A,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){Dt(l,l.return,z)}}else oo(s,l,h,m);break;case 23:break;case 22:E=l.stateNode,l.memoizedState!==null?E._visibility&4?oo(s,l,h,m):Gc(s,l):E._visibility&4?oo(s,l,h,m):(E._visibility|=4,Mu(s,l,h,m,(l.subtreeFlags&10256)!==0)),b&2048&&Fg(l.alternate,l);break;case 24:oo(s,l,h,m),b&2048&&Pg(l.alternate,l);break;default:oo(s,l,h,m)}}function Mu(s,l,h,m,b){for(b=b&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var E=s,A=l,M=h,z=m,Q=A.flags;switch(A.tag){case 0:case 11:case 15:Mu(E,A,M,z,b),Hc(8,A);break;case 23:break;case 22:var ce=A.stateNode;A.memoizedState!==null?ce._visibility&4?Mu(E,A,M,z,b):Gc(E,A):(ce._visibility|=4,Mu(E,A,M,z,b)),b&&Q&2048&&Fg(A.alternate,A);break;case 24:Mu(E,A,M,z,b),b&&Q&2048&&Pg(A.alternate,A);break;default:Mu(E,A,M,z,b)}l=l.sibling}}function Gc(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=s,m=l,b=m.flags;switch(m.tag){case 22:Gc(h,m),b&2048&&Fg(m.alternate,m);break;case 24:Gc(h,m),b&2048&&Pg(m.alternate,m);break;default:Gc(h,m)}l=l.sibling}}var Qc=8192;function Fu(s){if(s.subtreeFlags&Qc)for(s=s.child;s!==null;)DE(s),s=s.sibling}function DE(s){switch(s.tag){case 26:Fu(s),s.flags&Qc&&s.memoizedState!==null&&_M(aa,s.memoizedState,s.memoizedProps);break;case 5:Fu(s);break;case 3:case 4:var l=aa;aa=Bd(s.stateNode.containerInfo),Fu(s),aa=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Qc,Qc=16777216,Fu(s),Qc=l):Fu(s));break;default:Fu(s)}}function NE(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function $c(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];wn=m,ME(m,s)}NE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)IE(s),s=s.sibling}function IE(s){switch(s.tag){case 0:case 11:case 15:$c(s),s.flags&2048&&ao(9,s,s.return);break;case 3:$c(s);break;case 12:$c(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&4&&(s.return===null||s.return.tag!==13)?(l._visibility&=-5,Sd(s)):$c(s);break;default:$c(s)}}function Sd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];wn=m,ME(m,s)}NE(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ao(8,l,l.return),Sd(l);break;case 22:h=l.stateNode,h._visibility&4&&(h._visibility&=-5,Sd(l));break;default:Sd(l)}s=s.sibling}}function ME(s,l){for(;wn!==null;){var h=wn;switch(h.tag){case 0:case 11:case 15:ao(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Fc(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,wn=m;else e:for(h=s;wn!==null;){m=wn;var b=m.sibling,E=m.return;if(CE(m),m===h){wn=null;break e}if(b!==null){b.return=E,wn=b;break e}wn=E}}}function FI(s,l,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(s,l,h,m){return new FI(s,l,h,m)}function Lg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function so(s,l){var h=s.alternate;return h===null?(h=jr(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&31457280,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function FE(s,l){s.flags&=31457282;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,l=h.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Cd(s,l,h,m,b,E){var A=0;if(m=s,typeof s=="function")Lg(s)&&(A=1);else if(typeof s=="string")A=xM(s,h,Ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case c:return xs(h.children,b,E,l);case f:A=8,b|=24;break;case d:return s=jr(12,h,l,b|2),s.elementType=d,s.lanes=E,s;case x:return s=jr(13,h,l,b),s.elementType=x,s.lanes=E,s;case w:return s=jr(19,h,l,b),s.elementType=w,s.lanes=E,s;case C:return PE(h,b,E,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case p:case g:A=10;break e;case v:A=9;break e;case y:A=11;break e;case _:A=14;break e;case S:A=16,m=null;break e}A=29,h=Error(r(130,s===null?"null":typeof s,"")),m=null}return l=jr(A,h,l,b),l.elementType=s,l.type=m,l.lanes=E,l}function xs(s,l,h,m){return s=jr(7,s,m,l),s.lanes=h,s}function PE(s,l,h,m){s=jr(22,s,m,l),s.elementType=C,s.lanes=h;var b={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var E=b._current;if(E===null)throw Error(r(456));if((b._pendingVisibility&2)===0){var A=Ki(E,2);A!==null&&(b._pendingVisibility|=2,er(A,E,2))}},attach:function(){var E=b._current;if(E===null)throw Error(r(456));if((b._pendingVisibility&2)!==0){var A=Ki(E,2);A!==null&&(b._pendingVisibility&=-3,er(A,E,2))}}};return s.stateNode=b,s}function Bg(s,l,h){return s=jr(6,s,null,l),s.lanes=h,s}function zg(s,l,h){return l=jr(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function bi(s){s.flags|=4}function LE(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!wS(l)){if(l=zr.current,l!==null&&((vt&4194176)===vt?Ra!==null:(vt&62914560)!==vt&&(vt&536870912)===0||l!==Ra))throw Nc=Wm,e_;s.flags|=8192}}function Rd(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?tw():536870912,s.lanes|=l,Lu|=l)}function Kc(s,l){if(!xt)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function zt(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(l)for(var b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&31457280,m|=b.flags&31457280,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=m,s.childLanes=h,l}function PI(s,l,h){var m=l.pendingProps;switch(jm(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(l),null;case 1:return zt(l),null;case 3:return h=l.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),vi(ln),yt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Oc(l)?bi(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ra!==null&&(Qg(ra),ra=null))),zt(l),null;case 26:return h=l.memoizedState,s===null?(bi(l),h!==null?(zt(l),LE(l,h)):(zt(l),l.flags&=-16777217)):h?h!==s.memoizedState?(bi(l),zt(l),LE(l,h)):(zt(l),l.flags&=-16777217):(s.memoizedProps!==m&&bi(l),zt(l),l.flags&=-16777217),null;case 27:Yn(l),h=Ye.current;var b=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==m&&bi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return zt(l),null}s=Ve.current,Oc(l)?Zw(l):(s=dS(b,m,h),l.stateNode=s,bi(l))}return zt(l),null;case 5:if(Yn(l),h=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&bi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return zt(l),null}if(s=Ve.current,Oc(l))Zw(l);else{switch(b=Ld(Ye.current),s){case 1:s=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:s=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":s=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":s=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?b.createElement(h,{is:m.is}):b.createElement(h)}}s[Un]=l,s[sr]=m;e:for(b=l.child;b!==null;){if(b.tag===5||b.tag===6)s.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===l)break e;for(;b.sibling===null;){if(b.return===null||b.return===l)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}l.stateNode=s;e:switch(Fn(s,h,m),h){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&bi(l)}}return zt(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==m&&bi(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(s=Ye.current,Oc(l)){if(s=l.stateNode,h=l.memoizedProps,m=null,b=Jn,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}s[Un]=l,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||sS(s.nodeValue,h)),s||cs(l)}else s=Ld(s).createTextNode(m),s[Un]=l,l.stateNode=s}return zt(l),null;case 13:if(m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Oc(l),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Un]=l}else Ac(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;zt(l),b=!1}else ra!==null&&(Qg(ra),ra=null),b=!0;if(!b)return l.flags&256?(fi(l),l):(fi(l),null)}if(fi(l),(l.flags&128)!==0)return l.lanes=h,l;if(h=m!==null,s=s!==null&&s.memoizedState!==null,h){m=l.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==b&&(m.flags|=2048)}return h!==s&&h&&(l.child.flags|=8192),Rd(l,l.updateQueue),zt(l),null;case 4:return yt(),s===null&&ay(l.stateNode.containerInfo),zt(l),null;case 10:return vi(l.type),zt(l),null;case 19:if(Oe(un),b=l.memoizedState,b===null)return zt(l),null;if(m=(l.flags&128)!==0,E=b.rendering,E===null)if(m)Kc(b,!1);else{if(Qt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(E=ld(s),E!==null){for(l.flags|=128,Kc(b,!1),s=E.updateQueue,l.updateQueue=s,Rd(l,s),l.subtreeFlags=0,s=h,h=l.child;h!==null;)FE(h,s),h=h.sibling;return je(un,un.current&1|2),l.child}s=s.sibling}b.tail!==null&&Dn()>Td&&(l.flags|=128,m=!0,Kc(b,!1),l.lanes=4194304)}else{if(!m)if(s=ld(E),s!==null){if(l.flags|=128,m=!0,s=s.updateQueue,l.updateQueue=s,Rd(l,s),Kc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!E.alternate&&!xt)return zt(l),null}else 2*Dn()-b.renderingStartTime>Td&&h!==536870912&&(l.flags|=128,m=!0,Kc(b,!1),l.lanes=4194304);b.isBackwards?(E.sibling=l.child,l.child=E):(s=b.last,s!==null?s.sibling=E:l.child=E,b.last=E)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Dn(),l.sibling=null,s=un.current,je(un,m?s&1|2:s&1),l):(zt(l),null);case 22:case 23:return fi(l),Gm(),m=l.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(h&536870912)!==0&&(l.flags&128)===0&&(zt(l),l.subtreeFlags&6&&(l.flags|=8192)):zt(l),h=l.updateQueue,h!==null&&Rd(l,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048),s!==null&&Oe(hs),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),vi(ln),zt(l),null;case 25:return null}throw Error(r(156,l.tag))}function LI(s,l){switch(jm(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return vi(ln),yt(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Yn(l),null;case 13:if(fi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Ac()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Oe(un),null;case 4:return yt(),null;case 10:return vi(l.type),null;case 22:case 23:return fi(l),Gm(),s!==null&&Oe(hs),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return vi(ln),null;case 25:return null;default:return null}}function BE(s,l){switch(jm(l),l.tag){case 3:vi(ln),yt();break;case 26:case 27:case 5:Yn(l);break;case 4:yt();break;case 13:fi(l);break;case 19:Oe(un);break;case 10:vi(l.type);break;case 22:case 23:fi(l),Gm(),s!==null&&Oe(hs);break;case 24:vi(ln)}}var BI={getCacheForType:function(s){var l=Vn(ln),h=l.data.get(s);return h===void 0&&(h=s(),l.data.set(s,h)),h}},zI=typeof WeakMap=="function"?WeakMap:Map,Ut=0,It=null,lt=null,vt=0,Mt=0,Er=null,xi=!1,Pu=!1,Ug=!1,wi=0,Qt=0,uo=0,ws=0,Vg=0,qr=0,Lu=0,Xc=null,Oa=null,jg=!1,qg=0,Td=1/0,Od=null,lo=null,Ad=!1,_s=null,Yc=0,Wg=0,Hg=null,Zc=0,Gg=null;function Sr(){if((Ut&2)!==0&&vt!==0)return vt&-vt;if(k.T!==null){var s=Ou;return s!==0?s:ey()}return iw()}function zE(){qr===0&&(qr=(vt&536870912)===0||xt?ew():536870912);var s=zr.current;return s!==null&&(s.flags|=32),qr}function er(s,l,h){(s===It&&Mt===2||s.cancelPendingCommit!==null)&&(Bu(s,0),_i(s,vt,qr,!1)),mc(s,h),((Ut&2)===0||s!==It)&&(s===It&&((Ut&2)===0&&(ws|=h),Qt===4&&_i(s,vt,qr,!1)),Aa(s))}function UE(s,l,h){if((Ut&6)!==0)throw Error(r(327));var m=!h&&(l&60)===0&&(l&s.expiredLanes)===0||vc(s,l),b=m?jI(s,l):Xg(s,l,!0),E=m;do{if(b===0){Pu&&!m&&_i(s,l,0,!1);break}else if(b===6)_i(s,l,0,!xi);else{if(h=s.current.alternate,E&&!UI(h)){b=Xg(s,l,!1),E=!1;continue}if(b===2){if(E=l,s.errorRecoveryDisabledLanes&E)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var M=s;b=Xc;var z=M.current.memoizedState.isDehydrated;if(z&&(Bu(M,A).flags|=256),A=Xg(M,A,!1),A!==2){if(Ug&&!z){M.errorRecoveryDisabledLanes|=E,ws|=E,b=4;break e}E=Oa,Oa=b,E!==null&&Qg(E)}b=A}if(E=!1,b!==2)continue}}if(b===1){Bu(s,0),_i(s,l,0,!0);break}e:{switch(m=s,b){case 0:case 1:throw Error(r(345));case 4:if((l&4194176)===l){_i(m,l,qr,!xi);break e}break;case 2:Oa=null;break;case 3:case 5:break;default:throw Error(r(329))}if(m.finishedWork=h,m.finishedLanes=l,(l&62914560)===l&&(E=qg+300-Dn(),10<E)){if(_i(m,l,qr,!xi),jh(m,0)!==0)break e;m.timeoutHandle=cS(VE.bind(null,m,h,Oa,Od,jg,l,qr,ws,Lu,xi,2,-0,0),E);break e}VE(m,h,Oa,Od,jg,l,qr,ws,Lu,xi,0,-0,0)}}break}while(!0);Aa(s)}function Qg(s){Oa===null?Oa=s:Oa.push.apply(Oa,s)}function VE(s,l,h,m,b,E,A,M,z,Q,ce,me,ae){var le=l.subtreeFlags;if((le&8192||(le&16785408)===16785408)&&(af={stylesheets:null,count:0,unsuspend:wM},DE(l),l=EM(),l!==null)){s.cancelPendingCommit=l($E.bind(null,s,h,m,b,A,M,z,1,me,ae)),_i(s,E,A,!Q);return}$E(s,h,m,b,A,M,z,ce,me,ae)}function UI(s){for(var l=s;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],E=b.getSnapshot;b=b.value;try{if(!xr(E(),b))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function _i(s,l,h,m){l&=~Vg,l&=~ws,s.suspendedLanes|=l,s.pingedLanes&=~l,m&&(s.warmLanes|=l),m=s.expirationTimes;for(var b=l;0<b;){var E=31-br(b),A=1<<E;m[E]=-1,b&=~A}h!==0&&nw(s,h,l)}function kd(){return(Ut&6)===0?(Jc(0),!1):!0}function $g(){if(lt!==null){if(Mt===0)var s=lt.return;else s=lt,pi=gs=null,eg(s),Ru=null,Ic=0,s=lt;for(;s!==null;)BE(s.alternate,s),s=s.return;lt=null}}function Bu(s,l){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,iM(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),$g(),It=s,lt=h=so(s.current,null),vt=l,Mt=0,Er=null,xi=!1,Pu=vc(s,l),Ug=!1,Lu=qr=Vg=ws=uo=Qt=0,Oa=Xc=null,jg=!1,(l&8)!==0&&(l|=l&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=l;0<m;){var b=31-br(m),E=1<<b;l|=s[b],m&=~E}return wi=l,ed(),h}function jE(s,l){ot=null,k.H=Ta,l===Dc?(l=r_(),Mt=3):l===e_?(l=r_(),Mt=4):Mt=l===tE?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Er=l,lt===null&&(Qt=1,xd(s,Pr(l,s.current)))}function qE(){var s=k.H;return k.H=Ta,s===null?Ta:s}function WE(){var s=k.A;return k.A=BI,s}function Kg(){Qt=4,xi||(vt&4194176)!==vt&&zr.current!==null||(Pu=!0),(uo&134217727)===0&&(ws&134217727)===0||It===null||_i(It,vt,qr,!1)}function Xg(s,l,h){var m=Ut;Ut|=2;var b=qE(),E=WE();(It!==s||vt!==l)&&(Od=null,Bu(s,l)),l=!1;var A=Qt;e:do try{if(Mt!==0&&lt!==null){var M=lt,z=Er;switch(Mt){case 8:$g(),A=6;break e;case 3:case 2:case 6:zr.current===null&&(l=!0);var Q=Mt;if(Mt=0,Er=null,zu(s,M,z,Q),h&&Pu){A=0;break e}break;default:Q=Mt,Mt=0,Er=null,zu(s,M,z,Q)}}VI(),A=Qt;break}catch(ce){jE(s,ce)}while(!0);return l&&s.shellSuspendCounter++,pi=gs=null,Ut=m,k.H=b,k.A=E,lt===null&&(It=null,vt=0,ed()),A}function VI(){for(;lt!==null;)HE(lt)}function jI(s,l){var h=Ut;Ut|=2;var m=qE(),b=WE();It!==s||vt!==l?(Od=null,Td=Dn()+500,Bu(s,l)):Pu=vc(s,l);e:do try{if(Mt!==0&&lt!==null){l=lt;var E=Er;t:switch(Mt){case 1:Mt=0,Er=null,zu(s,l,E,1);break;case 2:if(t_(E)){Mt=0,Er=null,GE(l);break}l=function(){Mt===2&&It===s&&(Mt=7),Aa(s)},E.then(l,l);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:t_(E)?(Mt=0,Er=null,GE(l)):(Mt=0,Er=null,zu(s,l,E,7));break;case 5:var A=null;switch(lt.tag){case 26:A=lt.memoizedState;case 5:case 27:var M=lt;if(!A||wS(A)){Mt=0,Er=null;var z=M.sibling;if(z!==null)lt=z;else{var Q=M.return;Q!==null?(lt=Q,Dd(Q)):lt=null}break t}}Mt=0,Er=null,zu(s,l,E,5);break;case 6:Mt=0,Er=null,zu(s,l,E,6);break;case 8:$g(),Qt=6;break e;default:throw Error(r(462))}}qI();break}catch(ce){jE(s,ce)}while(!0);return pi=gs=null,k.H=m,k.A=b,Ut=h,lt!==null?0:(It=null,vt=0,ed(),Qt)}function qI(){for(;lt!==null&&!Sa();)HE(lt)}function HE(s){var l=dE(s.alternate,s,wi);s.memoizedProps=s.pendingProps,l===null?Dd(s):lt=l}function GE(s){var l=s,h=l.alternate;switch(l.tag){case 15:case 0:l=sE(h,l,l.pendingProps,l.type,void 0,vt);break;case 11:l=sE(h,l,l.pendingProps,l.type.render,l.ref,vt);break;case 5:eg(l);default:BE(h,l),l=lt=FE(l,wi),l=dE(h,l,wi)}s.memoizedProps=s.pendingProps,l===null?Dd(s):lt=l}function zu(s,l,h,m){pi=gs=null,eg(l),Ru=null,Ic=0;var b=l.return;try{if(DI(s,b,l,h,vt)){Qt=1,xd(s,Pr(h,s.current)),lt=null;return}}catch(E){if(b!==null)throw lt=b,E;Qt=1,xd(s,Pr(h,s.current)),lt=null;return}l.flags&32768?(xt||m===1?s=!0:Pu||(vt&536870912)!==0?s=!1:(xi=s=!0,(m===2||m===3||m===6)&&(m=zr.current,m!==null&&m.tag===13&&(m.flags|=16384))),QE(l,s)):Dd(l)}function Dd(s){var l=s;do{if((l.flags&32768)!==0){QE(l,xi);return}s=l.return;var h=PI(l.alternate,l,wi);if(h!==null){lt=h;return}if(l=l.sibling,l!==null){lt=l;return}lt=l=s}while(l!==null);Qt===0&&(Qt=5)}function QE(s,l){do{var h=LI(s.alternate,s);if(h!==null){h.flags&=32767,lt=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(s=s.sibling,s!==null)){lt=s;return}lt=s=h}while(s!==null);Qt=6,lt=null}function $E(s,l,h,m,b,E,A,M,z,Q){var ce=k.T,me=he.p;try{he.p=2,k.T=null,WI(s,l,h,m,me,b,E,A,M,z,Q)}finally{k.T=ce,he.p=me}}function WI(s,l,h,m,b,E,A,M){do Uu();while(_s!==null);if((Ut&6)!==0)throw Error(r(327));var z=s.finishedWork;if(m=s.finishedLanes,z===null)return null;if(s.finishedWork=null,s.finishedLanes=0,z===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var Q=z.lanes|z.childLanes;if(Q|=zm,_N(s,m,Q,E,A,M),s===It&&(lt=It=null,vt=0),(z.subtreeFlags&10256)===0&&(z.flags&10256)===0||Ad||(Ad=!0,Wg=Q,Hg=h,$I(Zn,function(){return Uu(),null})),h=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||h?(h=k.T,k.T=null,E=he.p,he.p=2,A=Ut,Ut|=4,II(s,z),OE(z,s),pI(uy,s.containerInfo),qd=!!sy,uy=sy=null,s.current=z,SE(s,z.alternate,z),ea(),Ut=A,he.p=E,k.T=h):s.current=z,Ad?(Ad=!1,_s=s,Yc=m):KE(s,Q),Q=s.pendingLanes,Q===0&&(lo=null),pc(z.stateNode),Aa(s),l!==null)for(b=s.onRecoverableError,z=0;z<l.length;z++)Q=l[z],b(Q.value,{componentStack:Q.stack});return(Yc&3)!==0&&Uu(),Q=s.pendingLanes,(m&4194218)!==0&&(Q&42)!==0?s===Gg?Zc++:(Zc=0,Gg=s):Zc=0,Jc(0),null}function KE(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Fc(l)))}function Uu(){if(_s!==null){var s=_s,l=Wg;Wg=0;var h=aw(Yc),m=k.T,b=he.p;try{if(he.p=32>h?32:h,k.T=null,_s===null)var E=!1;else{h=Hg,Hg=null;var A=_s,M=Yc;if(_s=null,Yc=0,(Ut&6)!==0)throw Error(r(331));var z=Ut;if(Ut|=4,IE(A.current),kE(A,A.current,M,h),Ut=z,Jc(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(oi,A)}catch{}E=!0}return E}finally{he.p=b,k.T=m,KE(s,l)}}return!1}function XE(s,l,h){l=Pr(h,l),l=pg(s.stateNode,l,2),s=ro(s,l,2),s!==null&&(mc(s,2),Aa(s))}function Dt(s,l,h){if(s.tag===3)XE(s,s,h);else for(;l!==null;){if(l.tag===3){XE(l,s,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(lo===null||!lo.has(m))){s=Pr(h,s),h=J_(2),m=ro(l,h,2),m!==null&&(eE(h,m,l,s),mc(m,2),Aa(m));break}}l=l.return}}function Yg(s,l,h){var m=s.pingCache;if(m===null){m=s.pingCache=new zI;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(h)||(Ug=!0,b.add(h),s=HI.bind(null,s,l,h),l.then(s,s))}function HI(s,l,h){var m=s.pingCache;m!==null&&m.delete(l),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,It===s&&(vt&h)===h&&(Qt===4||Qt===3&&(vt&62914560)===vt&&300>Dn()-qg?(Ut&2)===0&&Bu(s,0):Vg|=h,Lu===vt&&(Lu=0)),Aa(s)}function YE(s,l){l===0&&(l=tw()),s=Ki(s,l),s!==null&&(mc(s,l),Aa(s))}function GI(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),YE(s,h)}function QI(s,l){var h=0;switch(s.tag){case 13:var m=s.stateNode,b=s.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),YE(s,h)}function $I(s,l){return Ea(s,l)}var Nd=null,Vu=null,Zg=!1,Id=!1,Jg=!1,Es=0;function Aa(s){s!==Vu&&s.next===null&&(Vu===null?Nd=Vu=s:Vu=Vu.next=s),Id=!0,Zg||(Zg=!0,XI(KI))}function Jc(s,l){if(!Jg&&Id){Jg=!0;do for(var h=!1,m=Nd;m!==null;){if(s!==0){var b=m.pendingLanes;if(b===0)var E=0;else{var A=m.suspendedLanes,M=m.pingedLanes;E=(1<<31-br(42|s)+1)-1,E&=b&~(A&~M),E=E&201326677?E&201326677|1:E?E|2:0}E!==0&&(h=!0,eS(m,E))}else E=vt,E=jh(m,m===It?E:0),(E&3)===0||vc(m,E)||(h=!0,eS(m,E));m=m.next}while(h);Jg=!1}}function KI(){Id=Zg=!1;var s=0;Es!==0&&(aM()&&(s=Es),Es=0);for(var l=Dn(),h=null,m=Nd;m!==null;){var b=m.next,E=ZE(m,l);E===0?(m.next=null,h===null?Nd=b:h.next=b,b===null&&(Vu=h)):(h=m,(s!==0||(E&3)!==0)&&(Id=!0)),m=b}Jc(s)}function ZE(s,l){for(var h=s.suspendedLanes,m=s.pingedLanes,b=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var A=31-br(E),M=1<<A,z=b[A];z===-1?((M&h)===0||(M&m)!==0)&&(b[A]=wN(M,l)):z<=l&&(s.expiredLanes|=M),E&=~M}if(l=It,h=vt,h=jh(s,s===l?h:0),m=s.callbackNode,h===0||s===l&&Mt===2||s.cancelPendingCommit!==null)return m!==null&&m!==null&&yr(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||vc(s,h)){if(l=h&-h,l===s.callbackPriority)return l;switch(m!==null&&yr(m),aw(h)){case 2:case 8:h=ii;break;case 32:h=Zn;break;case 268435456:h=zh;break;default:h=Zn}return m=JE.bind(null,s),h=Ea(h,m),s.callbackPriority=l,s.callbackNode=h,l}return m!==null&&m!==null&&yr(m),s.callbackPriority=2,s.callbackNode=null,2}function JE(s,l){var h=s.callbackNode;if(Uu()&&s.callbackNode!==h)return null;var m=vt;return m=jh(s,s===It?m:0),m===0?null:(UE(s,m,l),ZE(s,Dn()),s.callbackNode!=null&&s.callbackNode===h?JE.bind(null,s):null)}function eS(s,l){if(Uu())return null;UE(s,l,!0)}function XI(s){oM(function(){(Ut&6)!==0?Ea(cu,s):s()})}function ey(){return Es===0&&(Es=ew()),Es}function tS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Qh(""+s)}function nS(s,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,s.id&&h.setAttribute("form",s.id),l.parentNode.insertBefore(h,l),s=new FormData(s),h.parentNode.removeChild(h),s}function YI(s,l,h,m,b){if(l==="submit"&&h&&h.stateNode===b){var E=tS((b[sr]||null).action),A=m.submitter;A&&(l=(l=A[sr]||null)?tS(l.formAction):A.getAttribute("formAction"),l!==null&&(E=l,A=null));var M=new Yh("action","action",null,m,b);s.push({event:M,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Es!==0){var z=A?nS(b,A):new FormData(b);lg(h,{pending:!0,data:z,method:b.method,action:E},null,z)}}else typeof E=="function"&&(M.preventDefault(),z=A?nS(b,A):new FormData(b),lg(h,{pending:!0,data:z,method:b.method,action:E},E,z))},currentTarget:b}]})}}for(var ty=0;ty<$w.length;ty++){var ny=$w[ty],ZI=ny.toLowerCase(),JI=ny[0].toUpperCase()+ny.slice(1);na(ZI,"on"+JI)}na(qw,"onAnimationEnd"),na(Ww,"onAnimationIteration"),na(Hw,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(mI,"onTransitionRun"),na(gI,"onTransitionStart"),na(yI,"onTransitionCancel"),na(Gw,"onTransitionEnd"),pu("onMouseEnter",["mouseout","mouseover"]),pu("onMouseLeave",["mouseout","mouseover"]),pu("onPointerEnter",["pointerout","pointerover"]),pu("onPointerLeave",["pointerout","pointerover"]),as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),as("onBeforeInput",["compositionend","keypress","textInput","paste"]),as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ef="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ef));function rS(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],b=m.event;m=m.listeners;e:{var E=void 0;if(l)for(var A=m.length-1;0<=A;A--){var M=m[A],z=M.instance,Q=M.currentTarget;if(M=M.listener,z!==E&&b.isPropagationStopped())break e;E=M,b.currentTarget=Q;try{E(b)}catch(ce){bd(ce)}b.currentTarget=null,E=z}else for(A=0;A<m.length;A++){if(M=m[A],z=M.instance,Q=M.currentTarget,M=M.listener,z!==E&&b.isPropagationStopped())break e;E=M,b.currentTarget=Q;try{E(b)}catch(ce){bd(ce)}b.currentTarget=null,E=z}}}}function ht(s,l){var h=l[ym];h===void 0&&(h=l[ym]=new Set);var m=s+"__bubble";h.has(m)||(aS(l,s,2,!1),h.add(m))}function ry(s,l,h){var m=0;l&&(m|=4),aS(h,s,m,l)}var Md="_reactListening"+Math.random().toString(36).slice(2);function ay(s){if(!s[Md]){s[Md]=!0,sw.forEach(function(h){h!=="selectionchange"&&(eM.has(h)||ry(h,!1,s),ry(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Md]||(l[Md]=!0,ry("selectionchange",!1,l))}}function aS(s,l,h,m){switch(TS(l)){case 2:var b=RM;break;case 8:b=TM;break;default:b=gy}h=b.bind(null,l,h,s),b=void 0,!Rm||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?s.addEventListener(l,h,{capture:!0,passive:b}):s.addEventListener(l,h,!0):b!==void 0?s.addEventListener(l,h,{passive:b}):s.addEventListener(l,h,!1)}function iy(s,l,h,m,b){var E=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var M=m.stateNode.containerInfo;if(M===b||M.nodeType===8&&M.parentNode===b)break;if(A===4)for(A=m.return;A!==null;){var z=A.tag;if((z===3||z===4)&&(z=A.stateNode.containerInfo,z===b||z.nodeType===8&&z.parentNode===b))return;A=A.return}for(;M!==null;){if(A=rs(M),A===null)return;if(z=A.tag,z===5||z===6||z===26||z===27){m=E=A;continue e}M=M.parentNode}}m=m.return}bw(function(){var Q=E,ce=Sm(h),me=[];e:{var ae=Qw.get(s);if(ae!==void 0){var le=Yh,ze=s;switch(s){case"keypress":if(Kh(h)===0)break e;case"keydown":case"keyup":le=QN;break;case"focusin":ze="focus",le=km;break;case"focusout":ze="blur",le=km;break;case"beforeblur":case"afterblur":le=km;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=FN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=XN;break;case qw:case Ww:case Hw:le=BN;break;case Gw:le=ZN;break;case"scroll":case"scrollend":le=IN;break;case"wheel":le=eI;break;case"copy":case"cut":case"paste":le=UN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Sw;break;case"toggle":case"beforetoggle":le=nI}var Ze=(l&4)!==0,$t=!Ze&&(s==="scroll"||s==="scrollend"),X=Ze?ae!==null?ae+"Capture":null:ae;Ze=[];for(var H=Q,ne;H!==null;){var de=H;if(ne=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ne===null||X===null||(de=bc(H,X),de!=null&&Ze.push(tf(H,de,ne))),$t)break;H=H.return}0<Ze.length&&(ae=new le(ae,ze,null,h,ce),me.push({event:ae,listeners:Ze}))}}if((l&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",ae&&h!==Em&&(ze=h.relatedTarget||h.fromElement)&&(rs(ze)||ze[fu]))break e;if((le||ae)&&(ae=ce.window===ce?ce:(ae=ce.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(ze=h.relatedTarget||h.toElement,le=Q,ze=ze?rs(ze):null,ze!==null&&($t=G(ze),Ze=ze.tag,ze!==$t||Ze!==5&&Ze!==27&&Ze!==6)&&(ze=null)):(le=null,ze=Q),le!==ze)){if(Ze=_w,de="onMouseLeave",X="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Ze=Sw,de="onPointerLeave",X="onPointerEnter",H="pointer"),$t=le==null?ae:yc(le),ne=ze==null?ae:yc(ze),ae=new Ze(de,H+"leave",le,h,ce),ae.target=$t,ae.relatedTarget=ne,de=null,rs(ce)===Q&&(Ze=new Ze(X,H+"enter",ze,h,ce),Ze.target=ne,Ze.relatedTarget=$t,de=Ze),$t=de,le&&ze)t:{for(Ze=le,X=ze,H=0,ne=Ze;ne;ne=ju(ne))H++;for(ne=0,de=X;de;de=ju(de))ne++;for(;0<H-ne;)Ze=ju(Ze),H--;for(;0<ne-H;)X=ju(X),ne--;for(;H--;){if(Ze===X||X!==null&&Ze===X.alternate)break t;Ze=ju(Ze),X=ju(X)}Ze=null}else Ze=null;le!==null&&iS(me,ae,le,Ze,!1),ze!==null&&$t!==null&&iS(me,$t,ze,Ze,!0)}}e:{if(ae=Q?yc(Q):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var Ae=Nw;else if(kw(ae))if(Iw)Ae=hI;else{Ae=cI;var st=lI}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?Q&&_m(Q.elementType)&&(Ae=Nw):Ae=fI;if(Ae&&(Ae=Ae(s,Q))){Dw(me,Ae,h,ce);break e}st&&st(s,ae,Q),s==="focusout"&&Q&&ae.type==="number"&&Q.memoizedProps.value!=null&&wm(ae,"number",ae.value)}switch(st=Q?yc(Q):window,s){case"focusin":(kw(st)||st.contentEditable==="true")&&(xu=st,Pm=Q,Tc=null);break;case"focusout":Tc=Pm=xu=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,Vw(me,h,ce);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":Vw(me,h,ce)}var Ue;if(Nm)e:{switch(s){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else bu?Ow(s,h)&&(We="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(We="onCompositionStart");We&&(Cw&&h.locale!=="ko"&&(bu||We!=="onCompositionStart"?We==="onCompositionEnd"&&bu&&(Ue=xw()):($i=ce,Tm="value"in $i?$i.value:$i.textContent,bu=!0)),st=Fd(Q,We),0<st.length&&(We=new Ew(We,s,null,h,ce),me.push({event:We,listeners:st}),Ue?We.data=Ue:(Ue=Aw(h),Ue!==null&&(We.data=Ue)))),(Ue=aI?iI(s,h):oI(s,h))&&(We=Fd(Q,"onBeforeInput"),0<We.length&&(st=new Ew("onBeforeInput","beforeinput",null,h,ce),me.push({event:st,listeners:We}),st.data=Ue)),YI(me,s,Q,h,ce)}rS(me,l)})}function tf(s,l,h){return{instance:s,listener:l,currentTarget:h}}function Fd(s,l){for(var h=l+"Capture",m=[];s!==null;){var b=s,E=b.stateNode;b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=bc(s,h),b!=null&&m.unshift(tf(s,b,E)),b=bc(s,l),b!=null&&m.push(tf(s,b,E))),s=s.return}return m}function ju(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function iS(s,l,h,m,b){for(var E=l._reactName,A=[];h!==null&&h!==m;){var M=h,z=M.alternate,Q=M.stateNode;if(M=M.tag,z!==null&&z===m)break;M!==5&&M!==26&&M!==27||Q===null||(z=Q,b?(Q=bc(h,E),Q!=null&&A.unshift(tf(h,Q,z))):b||(Q=bc(h,E),Q!=null&&A.push(tf(h,Q,z)))),h=h.return}A.length!==0&&s.push({event:l,listeners:A})}var tM=/\r\n?/g,nM=/\u0000|\uFFFD/g;function oS(s){return(typeof s=="string"?s:""+s).replace(tM,`
`).replace(nM,"")}function sS(s,l){return l=oS(l),oS(s)===l}function Pd(){}function kt(s,l,h,m,b,E){switch(h){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||mu(s,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&mu(s,""+m);break;case"className":Wh(s,"class",m);break;case"tabIndex":Wh(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Wh(s,h,m);break;case"style":gw(s,m,E);break;case"data":if(l!=="object"){Wh(s,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Qh(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(l!=="input"&&kt(s,l,"name",b.name,b,null),kt(s,l,"formEncType",b.formEncType,b,null),kt(s,l,"formMethod",b.formMethod,b,null),kt(s,l,"formTarget",b.formTarget,b,null)):(kt(s,l,"encType",b.encType,b,null),kt(s,l,"method",b.method,b,null),kt(s,l,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Qh(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=Pd);break;case"onScroll":m!=null&&ht("scroll",s);break;case"onScrollEnd":m!=null&&ht("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=Qh(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":ht("beforetoggle",s),ht("toggle",s),qh(s,"popover",m);break;case"xlinkActuate":ui(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ui(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ui(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ui(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ui(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ui(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ui(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ui(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ui(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":qh(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=DN.get(h)||h,qh(s,h,m))}}function oy(s,l,h,m,b,E){switch(h){case"style":gw(s,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"children":typeof m=="string"?mu(s,m):(typeof m=="number"||typeof m=="bigint")&&mu(s,""+m);break;case"onScroll":m!=null&&ht("scroll",s);break;case"onScrollEnd":m!=null&&ht("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Pd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uw.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),l=h.slice(2,b?h.length-7:void 0),E=s[sr]||null,E=E!=null?E[h]:null,typeof E=="function"&&s.removeEventListener(l,E,b),typeof m=="function")){typeof E!="function"&&E!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(l,m,b);break e}h in s?s[h]=m:m===!0?s.setAttribute(h,""):qh(s,h,m)}}}function Fn(s,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",s),ht("load",s);var m=!1,b=!1,E;for(E in h)if(h.hasOwnProperty(E)){var A=h[E];if(A!=null)switch(E){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:kt(s,l,E,A,h,null)}}b&&kt(s,l,"srcSet",h.srcSet,h,null),m&&kt(s,l,"src",h.src,h,null);return;case"input":ht("invalid",s);var M=E=A=b=null,z=null,Q=null;for(m in h)if(h.hasOwnProperty(m)){var ce=h[m];if(ce!=null)switch(m){case"name":b=ce;break;case"type":A=ce;break;case"checked":z=ce;break;case"defaultChecked":Q=ce;break;case"value":E=ce;break;case"defaultValue":M=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:kt(s,l,m,ce,h,null)}}dw(s,E,M,z,Q,A,b,!1),Hh(s);return;case"select":ht("invalid",s),m=A=E=null;for(b in h)if(h.hasOwnProperty(b)&&(M=h[b],M!=null))switch(b){case"value":E=M;break;case"defaultValue":A=M;break;case"multiple":m=M;default:kt(s,l,b,M,h,null)}l=E,h=A,s.multiple=!!m,l!=null?vu(s,!!m,l,!1):h!=null&&vu(s,!!m,h,!0);return;case"textarea":ht("invalid",s),E=b=m=null;for(A in h)if(h.hasOwnProperty(A)&&(M=h[A],M!=null))switch(A){case"value":m=M;break;case"defaultValue":b=M;break;case"children":E=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:kt(s,l,A,M,h,null)}vw(s,m,b,E),Hh(s);return;case"option":for(z in h)if(h.hasOwnProperty(z)&&(m=h[z],m!=null))switch(z){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:kt(s,l,z,m,h,null)}return;case"dialog":ht("cancel",s),ht("close",s);break;case"iframe":case"object":ht("load",s);break;case"video":case"audio":for(m=0;m<ef.length;m++)ht(ef[m],s);break;case"image":ht("error",s),ht("load",s);break;case"details":ht("toggle",s);break;case"embed":case"source":case"link":ht("error",s),ht("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in h)if(h.hasOwnProperty(Q)&&(m=h[Q],m!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:kt(s,l,Q,m,h,null)}return;default:if(_m(l)){for(ce in h)h.hasOwnProperty(ce)&&(m=h[ce],m!==void 0&&oy(s,l,ce,m,h,void 0));return}}for(M in h)h.hasOwnProperty(M)&&(m=h[M],m!=null&&kt(s,l,M,m,h,null))}function rM(s,l,h,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,A=null,M=null,z=null,Q=null,ce=null;for(le in h){var me=h[le];if(h.hasOwnProperty(le)&&me!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":z=me;default:m.hasOwnProperty(le)||kt(s,l,le,null,m,me)}}for(var ae in m){var le=m[ae];if(me=h[ae],m.hasOwnProperty(ae)&&(le!=null||me!=null))switch(ae){case"type":E=le;break;case"name":b=le;break;case"checked":Q=le;break;case"defaultChecked":ce=le;break;case"value":A=le;break;case"defaultValue":M=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:le!==me&&kt(s,l,ae,le,m,me)}}xm(s,A,M,z,Q,ce,E,b);return;case"select":le=A=M=ae=null;for(E in h)if(z=h[E],h.hasOwnProperty(E)&&z!=null)switch(E){case"value":break;case"multiple":le=z;default:m.hasOwnProperty(E)||kt(s,l,E,null,m,z)}for(b in m)if(E=m[b],z=h[b],m.hasOwnProperty(b)&&(E!=null||z!=null))switch(b){case"value":ae=E;break;case"defaultValue":M=E;break;case"multiple":A=E;default:E!==z&&kt(s,l,b,E,m,z)}l=M,h=A,m=le,ae!=null?vu(s,!!h,ae,!1):!!m!=!!h&&(l!=null?vu(s,!!h,l,!0):vu(s,!!h,h?[]:"",!1));return;case"textarea":le=ae=null;for(M in h)if(b=h[M],h.hasOwnProperty(M)&&b!=null&&!m.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:kt(s,l,M,null,m,b)}for(A in m)if(b=m[A],E=h[A],m.hasOwnProperty(A)&&(b!=null||E!=null))switch(A){case"value":ae=b;break;case"defaultValue":le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==E&&kt(s,l,A,b,m,E)}pw(s,ae,le);return;case"option":for(var ze in h)if(ae=h[ze],h.hasOwnProperty(ze)&&ae!=null&&!m.hasOwnProperty(ze))switch(ze){case"selected":s.selected=!1;break;default:kt(s,l,ze,null,m,ae)}for(z in m)if(ae=m[z],le=h[z],m.hasOwnProperty(z)&&ae!==le&&(ae!=null||le!=null))switch(z){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:kt(s,l,z,ae,m,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in h)ae=h[Ze],h.hasOwnProperty(Ze)&&ae!=null&&!m.hasOwnProperty(Ze)&&kt(s,l,Ze,null,m,ae);for(Q in m)if(ae=m[Q],le=h[Q],m.hasOwnProperty(Q)&&ae!==le&&(ae!=null||le!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:kt(s,l,Q,ae,m,le)}return;default:if(_m(l)){for(var $t in h)ae=h[$t],h.hasOwnProperty($t)&&ae!==void 0&&!m.hasOwnProperty($t)&&oy(s,l,$t,void 0,m,ae);for(ce in m)ae=m[ce],le=h[ce],!m.hasOwnProperty(ce)||ae===le||ae===void 0&&le===void 0||oy(s,l,ce,ae,m,le);return}}for(var X in h)ae=h[X],h.hasOwnProperty(X)&&ae!=null&&!m.hasOwnProperty(X)&&kt(s,l,X,null,m,ae);for(me in m)ae=m[me],le=h[me],!m.hasOwnProperty(me)||ae===le||ae==null&&le==null||kt(s,l,me,ae,m,le)}var sy=null,uy=null;function Ld(s){return s.nodeType===9?s:s.ownerDocument}function uS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lS(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function ly(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var cy=null;function aM(){var s=window.event;return s&&s.type==="popstate"?s===cy?!1:(cy=s,!0):(cy=null,!1)}var cS=typeof setTimeout=="function"?setTimeout:void 0,iM=typeof clearTimeout=="function"?clearTimeout:void 0,fS=typeof Promise=="function"?Promise:void 0,oM=typeof queueMicrotask=="function"?queueMicrotask:typeof fS<"u"?function(s){return fS.resolve(null).then(s).catch(sM)}:cS;function sM(s){setTimeout(function(){throw s})}function fy(s,l){var h=l,m=0;do{var b=h.nextSibling;if(s.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"){if(m===0){s.removeChild(b),cf(l);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=b}while(h);cf(l)}function hy(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":hy(h),bm(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function uM(s,l,h,m){for(;s.nodeType===1;){var b=h;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[gc])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==b.rel||s.getAttribute("href")!==(b.href==null?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=ia(s.nextSibling),s===null)break}return null}function lM(s,l,h){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=ia(s.nextSibling),s===null))return null;return s}function ia(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}function hS(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}function dS(s,l,h){switch(l=Ld(h),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var Wr=new Map,pS=new Set;function Bd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var Ei=he.d;he.d={f:cM,r:fM,D:hM,C:dM,L:pM,m:vM,X:gM,S:mM,M:yM};function cM(){var s=Ei.f(),l=kd();return s||l}function fM(s){var l=hu(s);l!==null&&l.tag===5&&l.type==="form"?V_(l):Ei.r(s)}var qu=typeof document>"u"?null:document;function vS(s,l,h){var m=qu;if(m&&typeof l=="string"&&l){var b=Mr(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),pS.has(b)||(pS.add(b),s={rel:s,crossOrigin:h,href:l},m.querySelector(b)===null&&(l=m.createElement("link"),Fn(l,"link",s),bn(l),m.head.appendChild(l)))}}function hM(s){Ei.D(s),vS("dns-prefetch",s,null)}function dM(s,l){Ei.C(s,l),vS("preconnect",s,l)}function pM(s,l,h){Ei.L(s,l,h);var m=qu;if(m&&s&&l){var b='link[rel="preload"][as="'+Mr(l)+'"]';l==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+Mr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+Mr(h.imageSizes)+'"]')):b+='[href="'+Mr(s)+'"]';var E=b;switch(l){case"style":E=Wu(s);break;case"script":E=Hu(s)}Wr.has(E)||(s=I({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:s,as:l},h),Wr.set(E,s),m.querySelector(b)!==null||l==="style"&&m.querySelector(nf(E))||l==="script"&&m.querySelector(rf(E))||(l=m.createElement("link"),Fn(l,"link",s),bn(l),m.head.appendChild(l)))}}function vM(s,l){Ei.m(s,l);var h=qu;if(h&&s){var m=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Mr(m)+'"][href="'+Mr(s)+'"]',E=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Hu(s)}if(!Wr.has(E)&&(s=I({rel:"modulepreload",href:s},l),Wr.set(E,s),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(rf(E)))return}m=h.createElement("link"),Fn(m,"link",s),bn(m),h.head.appendChild(m)}}}function mM(s,l,h){Ei.S(s,l,h);var m=qu;if(m&&s){var b=du(m).hoistableStyles,E=Wu(s);l=l||"default";var A=b.get(E);if(!A){var M={loading:0,preload:null};if(A=m.querySelector(nf(E)))M.loading=5;else{s=I({rel:"stylesheet",href:s,"data-precedence":l},h),(h=Wr.get(E))&&dy(s,h);var z=A=m.createElement("link");bn(z),Fn(z,"link",s),z._p=new Promise(function(Q,ce){z.onload=Q,z.onerror=ce}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,zd(A,l,m)}A={type:"stylesheet",instance:A,count:1,state:M},b.set(E,A)}}}function gM(s,l){Ei.X(s,l);var h=qu;if(h&&s){var m=du(h).hoistableScripts,b=Hu(s),E=m.get(b);E||(E=h.querySelector(rf(b)),E||(s=I({src:s,async:!0},l),(l=Wr.get(b))&&py(s,l),E=h.createElement("script"),bn(E),Fn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function yM(s,l){Ei.M(s,l);var h=qu;if(h&&s){var m=du(h).hoistableScripts,b=Hu(s),E=m.get(b);E||(E=h.querySelector(rf(b)),E||(s=I({src:s,async:!0,type:"module"},l),(l=Wr.get(b))&&py(s,l),E=h.createElement("script"),bn(E),Fn(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function mS(s,l,h,m){var b=(b=Ye.current)?Bd(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=Wu(h.href),h=du(b).hoistableStyles,m=h.get(l),m||(m={type:"style",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=Wu(h.href);var E=du(b).hoistableStyles,A=E.get(s);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,A),(E=b.querySelector(nf(s)))&&!E._p&&(A.instance=E,A.state.loading=5),Wr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Wr.set(s,h),E||bM(b,s,h,A.state))),l&&m===null)throw Error(r(528,""));return A}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Hu(h),h=du(b).hoistableScripts,m=h.get(l),m||(m={type:"script",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Wu(s){return'href="'+Mr(s)+'"'}function nf(s){return'link[rel="stylesheet"]['+s+"]"}function gS(s){return I({},s,{"data-precedence":s.precedence,precedence:null})}function bM(s,l,h,m){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=s.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Fn(l,"link",h),bn(l),s.head.appendChild(l))}function Hu(s){return'[src="'+Mr(s)+'"]'}function rf(s){return"script[async]"+s}function yS(s,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var m=s.querySelector('style[data-href~="'+Mr(h.href)+'"]');if(m)return l.instance=m,bn(m),m;var b=I({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),bn(m),Fn(m,"style",b),zd(m,h.precedence,s),l.instance=m;case"stylesheet":b=Wu(h.href);var E=s.querySelector(nf(b));if(E)return l.state.loading|=4,l.instance=E,bn(E),E;m=gS(h),(b=Wr.get(b))&&dy(m,b),E=(s.ownerDocument||s).createElement("link"),bn(E);var A=E;return A._p=new Promise(function(M,z){A.onload=M,A.onerror=z}),Fn(E,"link",m),l.state.loading|=4,zd(E,h.precedence,s),l.instance=E;case"script":return E=Hu(h.src),(b=s.querySelector(rf(E)))?(l.instance=b,bn(b),b):(m=h,(b=Wr.get(E))&&(m=I({},h),py(m,b)),s=s.ownerDocument||s,b=s.createElement("script"),bn(b),Fn(b,"link",m),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,zd(m,h.precedence,s));return l.instance}function zd(s,l,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,E=b,A=0;A<m.length;A++){var M=m[A];if(M.dataset.precedence===l)E=M;else if(E!==b)break}E?E.parentNode.insertBefore(s,E.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(s,l.firstChild))}function dy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function py(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Ud=null;function bS(s,l,h){if(Ud===null){var m=new Map,b=Ud=new Map;b.set(h,m)}else b=Ud,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),b=0;b<h.length;b++){var E=h[b];if(!(E[gc]||E[Un]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var A=E.getAttribute(l)||"";A=s+A;var M=m.get(A);M?M.push(E):m.set(A,[E])}}return m}function xS(s,l,h){s=s.ownerDocument||s,s.head.insertBefore(h,l==="title"?s.querySelector("head > title"):null)}function xM(s,l,h){if(h===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function wS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var af=null;function wM(){}function _M(s,l,h){if(af===null)throw Error(r(475));var m=af;if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=Wu(h.href),E=s.querySelector(nf(b));if(E){s=E._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Vd.bind(m),s.then(m,m)),l.state.loading|=4,l.instance=E,bn(E);return}E=s.ownerDocument||s,h=gS(h),(b=Wr.get(b))&&dy(h,b),E=E.createElement("link"),bn(E);var A=E;A._p=new Promise(function(M,z){A.onload=M,A.onerror=z}),Fn(E,"link",h),l.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Vd.bind(m),s.addEventListener("load",l),s.addEventListener("error",l))}}function EM(){if(af===null)throw Error(r(475));var s=af;return s.stylesheets&&s.count===0&&vy(s,s.stylesheets),0<s.count?function(l){var h=setTimeout(function(){if(s.stylesheets&&vy(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(h)}}:null}function Vd(){if(this.count--,this.count===0){if(this.stylesheets)vy(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var jd=null;function vy(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,jd=new Map,l.forEach(SM,s),jd=null,Vd.call(s))}function SM(s,l){if(!(l.state.loading&4)){var h=jd.get(s);if(h)var m=h.get(null);else{h=new Map,jd.set(s,h);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var A=b[E];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(h.set(A.dataset.precedence,A),m=A)}m&&h.set(null,m)}b=l.instance,A=b.getAttribute("data-precedence"),E=h.get(A)||m,E===m&&h.set(null,b),h.set(A,b),this.count++,m=Vd.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),E?E.parentNode.insertBefore(b,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var of={$$typeof:g,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function CM(s,l,h,m,b,E,A,M){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gm(0),this.hiddenUpdates=gm(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function _S(s,l,h,m,b,E,A,M,z,Q,ce,me){return s=new CM(s,l,h,A,M,z,Q,me),l=1,E===!0&&(l|=24),E=jr(3,null,null,l),s.current=E,E.stateNode=s,l=Qm(),l.refCount++,s.pooledCache=l,l.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:l},Tg(E),s}function ES(s){return s?(s=Eu,s):Eu}function SS(s,l,h,m,b,E){b=ES(b),m.context===null?m.context=b:m.pendingContext=b,m=no(l),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=ro(s,m,l),h!==null&&(er(h,s,l),jc(h,s,l))}function CS(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function my(s,l){CS(s,l),(s=s.alternate)&&CS(s,l)}function RS(s){if(s.tag===13){var l=Ki(s,67108864);l!==null&&er(l,s,67108864),my(s,67108864)}}var qd=!0;function RM(s,l,h,m){var b=k.T;k.T=null;var E=he.p;try{he.p=2,gy(s,l,h,m)}finally{he.p=E,k.T=b}}function TM(s,l,h,m){var b=k.T;k.T=null;var E=he.p;try{he.p=8,gy(s,l,h,m)}finally{he.p=E,k.T=b}}function gy(s,l,h,m){if(qd){var b=yy(m);if(b===null)iy(s,l,m,Wd,h),OS(s,m);else if(AM(b,s,l,h,m))m.stopPropagation();else if(OS(s,m),l&4&&-1<OM.indexOf(s)){for(;b!==null;){var E=hu(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var A=ns(E.pendingLanes);if(A!==0){var M=E;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var z=1<<31-br(A);M.entanglements[1]|=z,A&=~z}Aa(E),(Ut&6)===0&&(Td=Dn()+500,Jc(0))}}break;case 13:M=Ki(E,2),M!==null&&er(M,E,2),kd(),my(E,2)}if(E=yy(m),E===null&&iy(s,l,m,Wd,h),E===b)break;b=E}b!==null&&m.stopPropagation()}else iy(s,l,m,null,h)}}function yy(s){return s=Sm(s),by(s)}var Wd=null;function by(s){if(Wd=null,s=rs(s),s!==null){var l=G(s);if(l===null)s=null;else{var h=l.tag;if(h===13){if(s=Y(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Wd=s,null}function TS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ta()){case cu:return 2;case ii:return 8;case Zn:case dc:return 32;case zh:return 268435456;default:return 32}default:return 32}}var xy=!1,co=null,fo=null,ho=null,sf=new Map,uf=new Map,po=[],OM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OS(s,l){switch(s){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":sf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":uf.delete(l.pointerId)}}function lf(s,l,h,m,b,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[b]},l!==null&&(l=hu(l),l!==null&&RS(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function AM(s,l,h,m,b){switch(l){case"focusin":return co=lf(co,s,l,h,m,b),!0;case"dragenter":return fo=lf(fo,s,l,h,m,b),!0;case"mouseover":return ho=lf(ho,s,l,h,m,b),!0;case"pointerover":var E=b.pointerId;return sf.set(E,lf(sf.get(E)||null,s,l,h,m,b)),!0;case"gotpointercapture":return E=b.pointerId,uf.set(E,lf(uf.get(E)||null,s,l,h,m,b)),!0}return!1}function AS(s){var l=rs(s.target);if(l!==null){var h=G(l);if(h!==null){if(l=h.tag,l===13){if(l=Y(h),l!==null){s.blockedOn=l,EN(s.priority,function(){if(h.tag===13){var m=Sr(),b=Ki(h,m);b!==null&&er(b,h,m),my(h,m)}});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Hd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=yy(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);Em=m,h.target.dispatchEvent(m),Em=null}else return l=hu(h),l!==null&&RS(l),s.blockedOn=h,!1;l.shift()}return!0}function kS(s,l,h){Hd(s)&&h.delete(l)}function kM(){xy=!1,co!==null&&Hd(co)&&(co=null),fo!==null&&Hd(fo)&&(fo=null),ho!==null&&Hd(ho)&&(ho=null),sf.forEach(kS),uf.forEach(kS)}function Gd(s,l){s.blockedOn===l&&(s.blockedOn=null,xy||(xy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kM)))}var Qd=null;function DS(s){Qd!==s&&(Qd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qd===s&&(Qd=null);for(var l=0;l<s.length;l+=3){var h=s[l],m=s[l+1],b=s[l+2];if(typeof m!="function"){if(by(m||h)===null)continue;break}var E=hu(h);E!==null&&(s.splice(l,3),l-=3,lg(E,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function cf(s){function l(z){return Gd(z,s)}co!==null&&Gd(co,s),fo!==null&&Gd(fo,s),ho!==null&&Gd(ho,s),sf.forEach(l),uf.forEach(l);for(var h=0;h<po.length;h++){var m=po[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<po.length&&(h=po[0],h.blockedOn===null);)AS(h),h.blockedOn===null&&po.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],E=h[m+1],A=b[sr]||null;if(typeof E=="function")A||DS(h);else if(A){var M=null;if(E&&E.hasAttribute("formAction")){if(b=E,A=E[sr]||null)M=A.formAction;else if(by(b)!==null)continue}else M=A.action;typeof M=="function"?h[m+1]=M:(h.splice(m,3),m-=3),DS(h)}}}function wy(s){this._internalRoot=s}$d.prototype.render=wy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,m=Sr();SS(h,m,s,l,null,null)},$d.prototype.unmount=wy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;s.tag===0&&Uu(),SS(s.current,2,null,s,null,null),kd(),l[fu]=null}};function $d(s){this._internalRoot=s}$d.prototype.unstable_scheduleHydration=function(s){if(s){var l=iw();s={blockedOn:null,target:s,priority:l};for(var h=0;h<po.length&&l!==0&&l<po[h].priority;h++);po.splice(h,0,s),h===0&&AS(s)}};var NS=e.version;if(NS!=="19.0.0")throw Error(r(527,NS,"19.0.0"));he.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=K(l),s=s!==null?se(s):null,s=s===null?null:s.stateNode,s};var DM={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:k,findFiberByHostInstance:rs,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{oi=Kd.inject(DM),Nn=Kd}catch{}}return hf.createRoot=function(s,l){if(!a(s))throw Error(r(299));var h=!1,m="",b=K_,E=X_,A=Y_,M=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks)),l=_S(s,1,!1,null,null,h,m,b,E,A,M,null),s[fu]=l.current,ay(s.nodeType===8?s.parentNode:s),new wy(l)},hf.hydrateRoot=function(s,l,h){if(!a(s))throw Error(r(299));var m=!1,b="",E=K_,A=X_,M=Y_,z=null,Q=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(A=h.onCaughtError),h.onRecoverableError!==void 0&&(M=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(z=h.unstable_transitionCallbacks),h.formState!==void 0&&(Q=h.formState)),l=_S(s,1,!0,l,h??null,m,b,E,A,M,z,Q),l.context=ES(null),h=l.current,m=Sr(),b=no(m),b.callback=null,ro(h,b,m),l.current.lanes=m,mc(l,m),Aa(l),s[fu]=l.current,ay(s),new $d(l)},hf.version="19.0.0",hf}var qS;function qM(){if(qS)return Sy.exports;qS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sy.exports=jM(),Sy.exports}var WM=qM();const v9=sx(WM);var J=Nv();const pr=sx(J);var Tn=function(){return Tn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Tn.apply(this,arguments)};function Ul(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Lt="-ms-",Nf="-moz-",Ct="-webkit-",lT="comm",Iv="rule",ux="decl",HM="@import",cT="@keyframes",GM="@layer",fT=Math.abs,lx=String.fromCharCode,D0=Object.assign;function QM(n,e){return Cn(n,0)^45?(((e<<2^Cn(n,0))<<2^Cn(n,1))<<2^Cn(n,2))<<2^Cn(n,3):0}function hT(n){return n.trim()}function Oi(n,e){return(n=e.exec(n))?n[0]:n}function at(n,e,t){return n.replace(e,t)}function _p(n,e,t){return n.indexOf(e,t)}function Cn(n,e){return n.charCodeAt(e)|0}function Vl(n,e,t){return n.slice(e,t)}function La(n){return n.length}function dT(n){return n.length}function Cf(n,e){return e.push(n),n}function $M(n,e){return n.map(e).join("")}function WS(n,e){return n.filter(function(t){return!Oi(t,e)})}var Mv=1,jl=1,pT=0,Yr=0,on=0,rc="";function Fv(n,e,t,r,a,i,o,u){return{value:n,root:e,parent:t,type:r,props:a,children:i,line:Mv,column:jl,length:o,return:"",siblings:u}}function yo(n,e){return D0(Fv("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function Gu(n){for(;n.root;)n=yo(n.root,{children:[n]});Cf(n,n.siblings)}function KM(){return on}function XM(){return on=Yr>0?Cn(rc,--Yr):0,jl--,on===10&&(jl=1,Mv--),on}function pa(){return on=Yr<pT?Cn(rc,Yr++):0,jl++,on===10&&(jl=1,Mv++),on}function qs(){return Cn(rc,Yr)}function Ep(){return Yr}function Pv(n,e){return Vl(rc,n,e)}function N0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YM(n){return Mv=jl=1,pT=La(rc=n),Yr=0,[]}function ZM(n){return rc="",n}function Ay(n){return hT(Pv(Yr-1,I0(n===91?n+2:n===40?n+1:n)))}function JM(n){for(;(on=qs())&&on<33;)pa();return N0(n)>2||N0(on)>3?"":" "}function e3(n,e){for(;--e&&pa()&&!(on<48||on>102||on>57&&on<65||on>70&&on<97););return Pv(n,Ep()+(e<6&&qs()==32&&pa()==32))}function I0(n){for(;pa();)switch(on){case n:return Yr;case 34:case 39:n!==34&&n!==39&&I0(on);break;case 40:n===41&&I0(n);break;case 92:pa();break}return Yr}function t3(n,e){for(;pa()&&n+on!==57;)if(n+on===84&&qs()===47)break;return"/*"+Pv(e,Yr-1)+"*"+lx(n===47?n:pa())}function n3(n){for(;!N0(qs());)pa();return Pv(n,Yr)}function r3(n){return ZM(Sp("",null,null,null,[""],n=YM(n),0,[0],n))}function Sp(n,e,t,r,a,i,o,u,c){for(var f=0,d=0,p=o,v=0,g=0,y=0,x=1,w=1,_=1,S=0,C="",R=a,T=i,O=r,D=C;w;)switch(y=S,S=pa()){case 40:if(y!=108&&Cn(D,p-1)==58){_p(D+=at(Ay(S),"&","&\f"),"&\f",fT(f?u[f-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:D+=Ay(S);break;case 9:case 10:case 13:case 32:D+=JM(y);break;case 92:D+=e3(Ep()-1,7);continue;case 47:switch(qs()){case 42:case 47:Cf(a3(t3(pa(),Ep()),e,t,c),c);break;default:D+="/"}break;case 123*x:u[f++]=La(D)*_;case 125*x:case 59:case 0:switch(S){case 0:case 125:w=0;case 59+d:_==-1&&(D=at(D,/\f/g,"")),g>0&&La(D)-p&&Cf(g>32?GS(D+";",r,t,p-1,c):GS(at(D," ","")+";",r,t,p-2,c),c);break;case 59:D+=";";default:if(Cf(O=HS(D,e,t,f,d,a,u,C,R=[],T=[],p,i),i),S===123)if(d===0)Sp(D,e,O,O,R,i,p,u,T);else switch(v===99&&Cn(D,3)===110?100:v){case 100:case 108:case 109:case 115:Sp(n,O,O,r&&Cf(HS(n,O,O,0,0,a,u,C,a,R=[],p,T),T),a,T,p,u,r?R:T);break;default:Sp(D,O,O,O,[""],T,0,u,T)}}f=d=g=0,x=_=1,C=D="",p=o;break;case 58:p=1+La(D),g=y;default:if(x<1){if(S==123)--x;else if(S==125&&x++==0&&XM()==125)continue}switch(D+=lx(S),S*x){case 38:_=d>0?1:(D+="\f",-1);break;case 44:u[f++]=(La(D)-1)*_,_=1;break;case 64:qs()===45&&(D+=Ay(pa())),v=qs(),d=p=La(C=D+=n3(Ep())),S++;break;case 45:y===45&&La(D)==2&&(x=0)}}return i}function HS(n,e,t,r,a,i,o,u,c,f,d,p){for(var v=a-1,g=a===0?i:[""],y=dT(g),x=0,w=0,_=0;x<r;++x)for(var S=0,C=Vl(n,v+1,v=fT(w=o[x])),R=n;S<y;++S)(R=hT(w>0?g[S]+" "+C:at(C,/&\f/g,g[S])))&&(c[_++]=R);return Fv(n,e,t,a===0?Iv:u,c,f,d,p)}function a3(n,e,t,r){return Fv(n,e,t,lT,lx(KM()),Vl(n,2,-2),0,r)}function GS(n,e,t,r,a){return Fv(n,e,t,ux,Vl(n,0,r),Vl(n,r+1,-1),r,a)}function vT(n,e,t){switch(QM(n,e)){case 5103:return Ct+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+n+n;case 4789:return Nf+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+n+Nf+n+Lt+n+n;case 5936:switch(Cn(n,e+11)){case 114:return Ct+n+Lt+at(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ct+n+Lt+at(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ct+n+Lt+at(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return Ct+n+Lt+n+n;case 6165:return Ct+n+Lt+"flex-"+n+n;case 5187:return Ct+n+at(n,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+Lt+"flex-$1$2")+n;case 5443:return Ct+n+Lt+"flex-item-"+at(n,/flex-|-self/g,"")+(Oi(n,/flex-|baseline/)?"":Lt+"grid-row-"+at(n,/flex-|-self/g,""))+n;case 4675:return Ct+n+Lt+"flex-line-pack"+at(n,/align-content|flex-|-self/g,"")+n;case 5548:return Ct+n+Lt+at(n,"shrink","negative")+n;case 5292:return Ct+n+Lt+at(n,"basis","preferred-size")+n;case 6060:return Ct+"box-"+at(n,"-grow","")+Ct+n+Lt+at(n,"grow","positive")+n;case 4554:return Ct+at(n,/([^-])(transform)/g,"$1"+Ct+"$2")+n;case 6187:return at(at(at(n,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),n,"")+n;case 5495:case 3959:return at(n,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return at(at(n,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+Lt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+n+n;case 4200:if(!Oi(n,/flex-|baseline/))return Lt+"grid-column-align"+Vl(n,e)+n;break;case 2592:case 3360:return Lt+at(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,a){return e=a,Oi(r.props,/grid-\w+-end/)})?~_p(n+(t=t[e].value),"span",0)?n:Lt+at(n,"-start","")+n+Lt+"grid-row-span:"+(~_p(t,"span",0)?Oi(t,/\d+/):+Oi(t,/\d+/)-+Oi(n,/\d+/))+";":Lt+at(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return Oi(r.props,/grid-\w+-start/)})?n:Lt+at(at(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return at(n,/(.+)-inline(.+)/,Ct+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(La(n)-1-e>6)switch(Cn(n,e+1)){case 109:if(Cn(n,e+4)!==45)break;case 102:return at(n,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+Nf+(Cn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~_p(n,"stretch",0)?vT(at(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return at(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,i,o,u,c,f){return Lt+a+":"+i+f+(o?Lt+a+"-span:"+(u?c:+c-+i)+f:"")+n});case 4949:if(Cn(n,e+6)===121)return at(n,":",":"+Ct)+n;break;case 6444:switch(Cn(n,Cn(n,14)===45?18:11)){case 120:return at(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ct+(Cn(n,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+Lt+"$2box$3")+n;case 100:return at(n,":",":"+Lt)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return at(n,"scroll-","scroll-snap-")+n}return n}function zp(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function i3(n,e,t,r){switch(n.type){case GM:if(n.children.length)break;case HM:case ux:return n.return=n.return||n.value;case lT:return"";case cT:return n.return=n.value+"{"+zp(n.children,r)+"}";case Iv:if(!La(n.value=n.props.join(",")))return""}return La(t=zp(n.children,r))?n.return=n.value+"{"+t+"}":""}function o3(n){var e=dT(n);return function(t,r,a,i){for(var o="",u=0;u<e;u++)o+=n[u](t,r,a,i)||"";return o}}function s3(n){return function(e){e.root||(e=e.return)&&n(e)}}function u3(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case ux:n.return=vT(n.value,n.length,t);return;case cT:return zp([yo(n,{value:at(n.value,"@","@"+Ct)})],r);case Iv:if(n.length)return $M(t=n.props,function(a){switch(Oi(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Gu(yo(n,{props:[at(a,/:(read-\w+)/,":"+Nf+"$1")]})),Gu(yo(n,{props:[a]})),D0(n,{props:WS(t,r)});break;case"::placeholder":Gu(yo(n,{props:[at(a,/:(plac\w+)/,":"+Ct+"input-$1")]})),Gu(yo(n,{props:[at(a,/:(plac\w+)/,":"+Nf+"$1")]})),Gu(yo(n,{props:[at(a,/:(plac\w+)/,Lt+"input-$1")]})),Gu(yo(n,{props:[a]})),D0(n,{props:WS(t,r)});break}return""})}}var l3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Cr={},ql=typeof process<"u"&&Cr!==void 0&&(Cr.REACT_APP_SC_ATTR||Cr.SC_ATTR)||"data-styled",mT="active",gT="data-styled-version",Lv="6.1.16",cx=`/*!sc*/
`,Up=typeof window<"u"&&"HTMLElement"in window,c3=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Cr!==void 0&&Cr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Cr.REACT_APP_SC_DISABLE_SPEEDY!==""?Cr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Cr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Cr!==void 0&&Cr.SC_DISABLE_SPEEDY!==void 0&&Cr.SC_DISABLE_SPEEDY!==""&&Cr.SC_DISABLE_SPEEDY!=="false"&&Cr.SC_DISABLE_SPEEDY),f3={},Bv=Object.freeze([]),Wl=Object.freeze({});function yT(n,e,t){return t===void 0&&(t=Wl),n.theme!==t.theme&&n.theme||e||t.theme}var bT=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),h3=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,d3=/(^-|-$)/g;function QS(n){return n.replace(h3,"-").replace(d3,"")}var p3=/(a)(d)/gi,Yd=52,$S=function(n){return String.fromCharCode(n+(n>25?39:97))};function M0(n){var e,t="";for(e=Math.abs(n);e>Yd;e=e/Yd|0)t=$S(e%Yd)+t;return($S(e%Yd)+t).replace(p3,"$1-$2")}var ky,xT=5381,sl=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},wT=function(n){return sl(xT,n)};function fx(n){return M0(wT(n)>>>0)}function v3(n){return n.displayName||n.name||"Component"}function Dy(n){return typeof n=="string"&&!0}var _T=typeof Symbol=="function"&&Symbol.for,ET=_T?Symbol.for("react.memo"):60115,m3=_T?Symbol.for("react.forward_ref"):60112,g3={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},y3={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ST={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},b3=((ky={})[m3]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ky[ET]=ST,ky);function KS(n){return("type"in(e=n)&&e.type.$$typeof)===ET?ST:"$$typeof"in n?b3[n.$$typeof]:g3;var e}var x3=Object.defineProperty,w3=Object.getOwnPropertyNames,XS=Object.getOwnPropertySymbols,_3=Object.getOwnPropertyDescriptor,E3=Object.getPrototypeOf,YS=Object.prototype;function CT(n,e,t){if(typeof e!="string"){if(YS){var r=E3(e);r&&r!==YS&&CT(n,r,t)}var a=w3(e);XS&&(a=a.concat(XS(e)));for(var i=KS(n),o=KS(e),u=0;u<a.length;++u){var c=a[u];if(!(c in y3||t&&t[c]||o&&c in o||i&&c in i)){var f=_3(e,c);try{x3(n,c,f)}catch{}}}}return n}function Qs(n){return typeof n=="function"}function hx(n){return typeof n=="object"&&"styledComponentId"in n}function ks(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function Vp(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function jf(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function F0(n,e,t){if(t===void 0&&(t=!1),!t&&!jf(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=F0(n[r],e[r]);else if(jf(e))for(var r in e)n[r]=F0(n[r],e[r]);return n}function dx(n,e){Object.defineProperty(n,"toString",{value:e})}function Vo(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var S3=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,i=a;e>=i;)if((i<<=1)<0)throw Vo(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var o=a;o<i;o++)this.groupSizes[o]=0}for(var u=this.indexOfGroup(e+1),c=(o=0,t.length);o<c;o++)this.tag.insertRule(u,t[o])&&(this.groupSizes[e]++,u++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t;this.groupSizes[e]=0;for(var i=r;i<a;i++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),i=a+r,o=a;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(cx);return t},n}(),Cp=new Map,jp=new Map,Rp=1,Zd=function(n){if(Cp.has(n))return Cp.get(n);for(;jp.has(Rp);)Rp++;var e=Rp++;return Cp.set(n,e),jp.set(e,n),e},C3=function(n,e){Rp=e+1,Cp.set(n,e),jp.set(e,n)},R3="style[".concat(ql,"][").concat(gT,'="').concat(Lv,'"]'),T3=new RegExp("^".concat(ql,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),O3=function(n,e,t){for(var r,a=t.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&n.registerName(e,r)},A3=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(cx),a=[],i=0,o=r.length;i<o;i++){var u=r[i].trim();if(u){var c=u.match(T3);if(c){var f=0|parseInt(c[1],10),d=c[2];f!==0&&(C3(d,f),O3(n,d,c[3]),n.getTag().insertRules(f,a)),a.length=0}else a.push(u)}}},ZS=function(n){for(var e=document.querySelectorAll(R3),t=0,r=e.length;t<r;t++){var a=e[t];a&&a.getAttribute(ql)!==mT&&(A3(n,a),a.parentNode&&a.parentNode.removeChild(a))}};function k3(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var RT=function(n){var e=document.head,t=n||e,r=document.createElement("style"),a=function(u){var c=Array.from(u.querySelectorAll("style[".concat(ql,"]")));return c[c.length-1]}(t),i=a!==void 0?a.nextSibling:null;r.setAttribute(ql,mT),r.setAttribute(gT,Lv);var o=k3();return o&&r.setAttribute("nonce",o),t.insertBefore(r,i),r},D3=function(){function n(e){this.element=RT(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,a=0,i=r.length;a<i;a++){var o=r[a];if(o.ownerNode===t)return o}throw Vo(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),N3=function(){function n(e){this.element=RT(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),I3=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),JS=Up,M3={isServer:!Up,useCSSOMInjection:!c3},qp=function(){function n(e,t,r){e===void 0&&(e=Wl),t===void 0&&(t={});var a=this;this.options=Tn(Tn({},M3),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Up&&JS&&(JS=!1,ZS(this)),dx(this,function(){return function(i){for(var o=i.getTag(),u=o.length,c="",f=function(p){var v=function(_){return jp.get(_)}(p);if(v===void 0)return"continue";var g=i.names.get(v),y=o.getGroup(p);if(g===void 0||!g.size||y.length===0)return"continue";var x="".concat(ql,".g").concat(p,'[id="').concat(v,'"]'),w="";g!==void 0&&g.forEach(function(_){_.length>0&&(w+="".concat(_,","))}),c+="".concat(y).concat(x,'{content:"').concat(w,'"}').concat(cx)},d=0;d<u;d++)f(d);return c}(a)})}return n.registerId=function(e){return Zd(e)},n.prototype.rehydrate=function(){!this.server&&Up&&ZS(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(Tn(Tn({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var r=t.useCSSOMInjection,a=t.target;return t.isServer?new I3(a):r?new D3(a):new N3(a)}(this.options),new S3(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(Zd(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(Zd(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(Zd(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),F3=/&/g,P3=/^\s*\/\/.*$/gm;function TT(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=TT(t.children,e)),t})}function L3(n){var e,t,r,a=Wl,i=a.options,o=i===void 0?Wl:i,u=a.plugins,c=u===void 0?Bv:u,f=function(v,g,y){return y.startsWith(t)&&y.endsWith(t)&&y.replaceAll(t,"").length>0?".".concat(e):v},d=c.slice();d.push(function(v){v.type===Iv&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(F3,t).replace(r,f))}),o.prefix&&d.push(u3),d.push(i3);var p=function(v,g,y,x){g===void 0&&(g=""),y===void 0&&(y=""),x===void 0&&(x="&"),e=x,t=g,r=new RegExp("\\".concat(t,"\\b"),"g");var w=v.replace(P3,""),_=r3(y||g?"".concat(y," ").concat(g," { ").concat(w," }"):w);o.namespace&&(_=TT(_,o.namespace));var S=[];return zp(_,o3(d.concat(s3(function(C){return S.push(C)})))),S};return p.hash=c.length?c.reduce(function(v,g){return g.name||Vo(15),sl(v,g.name)},xT).toString():"",p}var B3=new qp,P0=L3(),OT=pr.createContext({shouldForwardProp:void 0,styleSheet:B3,stylis:P0});OT.Consumer;pr.createContext(void 0);function L0(){return J.useContext(OT)}var AT=function(){function n(e,t){var r=this;this.inject=function(a,i){i===void 0&&(i=P0);var o=r.name+i.hash;a.hasNameForId(r.id,o)||a.insertRules(r.id,o,i(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,dx(this,function(){throw Vo(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=P0),this.name+e.hash},n}(),z3=function(n){return n>="A"&&n<="Z"};function e2(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;z3(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var kT=function(n){return n==null||n===!1||n===""},DT=function(n){var e,t,r=[];for(var a in n){var i=n[a];n.hasOwnProperty(a)&&!kT(i)&&(Array.isArray(i)&&i.isCss||Qs(i)?r.push("".concat(e2(a),":"),i,";"):jf(i)?r.push.apply(r,Ul(Ul(["".concat(a," {")],DT(i),!1),["}"],!1)):r.push("".concat(e2(a),": ").concat((e=a,(t=i)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in l3||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function Po(n,e,t,r){if(kT(n))return[];if(hx(n))return[".".concat(n.styledComponentId)];if(Qs(n)){if(!Qs(i=n)||i.prototype&&i.prototype.isReactComponent||!e)return[n];var a=n(e);return Po(a,e,t,r)}var i;return n instanceof AT?t?(n.inject(t,r),[n.getName(r)]):[n]:jf(n)?DT(n):Array.isArray(n)?Array.prototype.concat.apply(Bv,n.map(function(o){return Po(o,e,t,r)})):[n.toString()]}function NT(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(Qs(t)&&!hx(t))return!1}return!0}var U3=wT(Lv),V3=function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&NT(e),this.componentId=t,this.baseHash=sl(U3,t),this.baseStyle=r,qp.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))a=ks(a,this.staticRulesId);else{var i=Vp(Po(this.rules,e,t,r)),o=M0(sl(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var u=r(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,u)}a=ks(a,o),this.staticRulesId=o}else{for(var c=sl(this.baseHash,r.hash),f="",d=0;d<this.rules.length;d++){var p=this.rules[d];if(typeof p=="string")f+=p;else if(p){var v=Vp(Po(p,e,t,r));c=sl(c,v+d),f+=v}}if(f){var g=M0(c>>>0);t.hasNameForId(this.componentId,g)||t.insertRules(this.componentId,g,r(f,".".concat(g),void 0,this.componentId)),a=ks(a,g)}}return a},n}(),Hl=pr.createContext(void 0);Hl.Consumer;function m9(){var n=J.useContext(Hl);if(!n)throw Vo(18);return n}function g9(n){var e=pr.useContext(Hl),t=J.useMemo(function(){return function(r,a){if(!r)throw Vo(14);if(Qs(r)){var i=r(a);return i}if(Array.isArray(r)||typeof r!="object")throw Vo(8);return a?Tn(Tn({},a),r):r}(n.theme,e)},[n.theme,e]);return n.children?pr.createElement(Hl.Provider,{value:t},n.children):null}var Ny={};function j3(n,e,t){var r=hx(n),a=n,i=!Dy(n),o=e.attrs,u=o===void 0?Bv:o,c=e.componentId,f=c===void 0?function(R,T){var O=typeof R!="string"?"sc":QS(R);Ny[O]=(Ny[O]||0)+1;var D="".concat(O,"-").concat(fx(Lv+O+Ny[O]));return T?"".concat(T,"-").concat(D):D}(e.displayName,e.parentComponentId):c,d=e.displayName,p=d===void 0?function(R){return Dy(R)?"styled.".concat(R):"Styled(".concat(v3(R),")")}(n):d,v=e.displayName&&e.componentId?"".concat(QS(e.displayName),"-").concat(e.componentId):e.componentId||f,g=r&&a.attrs?a.attrs.concat(u).filter(Boolean):u,y=e.shouldForwardProp;if(r&&a.shouldForwardProp){var x=a.shouldForwardProp;if(e.shouldForwardProp){var w=e.shouldForwardProp;y=function(R,T){return x(R,T)&&w(R,T)}}else y=x}var _=new V3(t,v,r?a.componentStyle:void 0);function S(R,T){return function(O,D,N){var k=O.attrs,I=O.componentStyle,B=O.defaultProps,U=O.foldedComponentIds,ee=O.styledComponentId,te=O.target,re=pr.useContext(Hl),q=L0(),Z=O.shouldForwardProp||q.shouldForwardProp,G=yT(D,re,B)||Wl,Y=function(be,ye,Be){for(var xe,Oe=Tn(Tn({},ye),{className:void 0,theme:Be}),je=0;je<be.length;je+=1){var Ve=Qs(xe=be[je])?xe(Oe):xe;for(var $e in Ve)Oe[$e]=$e==="className"?ks(Oe[$e],Ve[$e]):$e==="style"?Tn(Tn({},Oe[$e]),Ve[$e]):Ve[$e]}return ye.className&&(Oe.className=ks(Oe.className,ye.className)),Oe}(k,D,G),F=Y.as||te,K={};for(var se in Y)Y[se]===void 0||se[0]==="$"||se==="as"||se==="theme"&&Y.theme===G||(se==="forwardedAs"?K.as=Y.forwardedAs:Z&&!Z(se,F)||(K[se]=Y[se]));var fe=function(be,ye){var Be=L0(),xe=be.generateAndInjectStyles(ye,Be.styleSheet,Be.stylis);return xe}(I,Y),he=ks(U,ee);return fe&&(he+=" "+fe),Y.className&&(he+=" "+Y.className),K[Dy(F)&&!bT.has(F)?"class":"className"]=he,N&&(K.ref=N),J.createElement(F,K)}(C,R,T)}S.displayName=p;var C=pr.forwardRef(S);return C.attrs=g,C.componentStyle=_,C.displayName=p,C.shouldForwardProp=y,C.foldedComponentIds=r?ks(a.foldedComponentIds,a.styledComponentId):"",C.styledComponentId=v,C.target=r?a.target:n,Object.defineProperty(C,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(R){this._foldedDefaultProps=r?function(T){for(var O=[],D=1;D<arguments.length;D++)O[D-1]=arguments[D];for(var N=0,k=O;N<k.length;N++)F0(T,k[N],!0);return T}({},a.defaultProps,R):R}}),dx(C,function(){return".".concat(C.styledComponentId)}),i&&CT(C,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),C}function t2(n,e){for(var t=[n[0]],r=0,a=e.length;r<a;r+=1)t.push(e[r],n[r+1]);return t}var n2=function(n){return Object.assign(n,{isCss:!0})};function px(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Qs(n)||jf(n))return n2(Po(t2(Bv,Ul([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?Po(r):n2(Po(t2(r,e)))}function B0(n,e,t){if(t===void 0&&(t=Wl),!e)throw Vo(1,e);var r=function(a){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return n(e,t,px.apply(void 0,Ul([a],i,!1)))};return r.attrs=function(a){return B0(n,e,Tn(Tn({},t),{attrs:Array.prototype.concat(t.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return B0(n,e,Tn(Tn({},t),a))},r}var IT=function(n){return B0(j3,n)},q3=IT;bT.forEach(function(n){q3[n]=IT(n)});var W3=function(){function n(e,t){this.rules=e,this.componentId=t,this.isStatic=NT(e),qp.registerId(this.componentId+1)}return n.prototype.createStyles=function(e,t,r,a){var i=a(Vp(Po(this.rules,t,r,a)),""),o=this.componentId+e;r.insertRules(o,o,i)},n.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},n.prototype.renderStyles=function(e,t,r,a){e>2&&qp.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,a)},n}();function y9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=px.apply(void 0,Ul([n],e,!1)),a="sc-global-".concat(fx(JSON.stringify(r))),i=new W3(r,a),o=function(c){var f=L0(),d=pr.useContext(Hl),p=pr.useRef(f.styleSheet.allocateGSInstance(a)).current;return f.styleSheet.server&&u(p,c,f.styleSheet,d,f.stylis),pr.useLayoutEffect(function(){if(!f.styleSheet.server)return u(p,c,f.styleSheet,d,f.stylis),function(){return i.removeStyles(p,f.styleSheet)}},[p,c,f.styleSheet,d,f.stylis]),null};function u(c,f,d,p,v){if(i.isStatic)i.renderStyles(c,f3,d,v);else{var g=Tn(Tn({},f),{theme:yT(f,p,o.defaultProps)});i.renderStyles(c,g,d,v)}}return pr.memo(o)}function b9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=Vp(px.apply(void 0,Ul([n],e,!1))),a=fx(r);return new AT(a,r)}var df={},r2;function H3(){if(r2)return df;r2=1,Object.defineProperty(df,"__esModule",{value:!0}),df.parse=o,df.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function o(v,g){const y=new i,x=v.length;if(x<2)return y;const w=(g==null?void 0:g.decode)||d;let _=0;do{const S=v.indexOf("=",_);if(S===-1)break;const C=v.indexOf(";",_),R=C===-1?x:C;if(S>R){_=v.lastIndexOf(";",S-1)+1;continue}const T=u(v,_,S),O=c(v,S,T),D=v.slice(T,O);if(y[D]===void 0){let N=u(v,S+1,R),k=c(v,R,N);const I=w(v.slice(N,k));y[D]=I}_=R+1}while(_<x);return y}function u(v,g,y){do{const x=v.charCodeAt(g);if(x!==32&&x!==9)return g}while(++g<y);return y}function c(v,g,y){for(;g>y;){const x=v.charCodeAt(--g);if(x!==32&&x!==9)return g+1}return y}function f(v,g,y){const x=(y==null?void 0:y.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const w=x(g);if(!e.test(w))throw new TypeError(`argument val is invalid: ${g}`);let _=v+"="+w;if(!y)return _;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);_+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);_+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);_+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);_+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(_+="; HttpOnly"),y.secure&&(_+="; Secure"),y.partitioned&&(_+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return _}function d(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function p(v){return a.call(v)==="[object Date]"}return df}H3();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var a2="popstate";function G3(n={}){function e(r,a){let{pathname:i,search:o,hash:u}=r.location;return z0("",{pathname:i,search:o,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:qf(a)}return $3(e,t,null,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ya(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q3(){return Math.random().toString(36).substring(2,10)}function i2(n,e){return{usr:n.state,key:n.key,idx:e}}function z0(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ac(e):e,state:t,key:e&&e.key||r||Q3()}}function qf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ac(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function $3(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,u="POP",c=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function p(){u="POP";let w=d(),_=w==null?null:w-f;f=w,c&&c({action:u,location:x.location,delta:_})}function v(w,_){u="PUSH";let S=z0(x.location,w,_);f=d()+1;let C=i2(S,f),R=x.createHref(S);try{o.pushState(C,"",R)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(R)}i&&c&&c({action:u,location:x.location,delta:1})}function g(w,_){u="REPLACE";let S=z0(x.location,w,_);f=d();let C=i2(S,f),R=x.createHref(S);o.replaceState(C,"",R),i&&c&&c({action:u,location:x.location,delta:0})}function y(w){let _=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof w=="string"?w:qf(w);return S=S.replace(/ $/,"%20"),Wt(_,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,_)}let x={get action(){return u},get location(){return n(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(a2,p),c=w,()=>{a.removeEventListener(a2,p),c=null}},createHref(w){return e(a,w)},createURL:y,encodeLocation(w){let _=y(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:g,go(w){return o.go(w)}};return x}function MT(n,e,t="/"){return K3(n,e,t,!1)}function K3(n,e,t,r){let a=typeof e=="string"?ac(e):e,i=Fi(a.pathname||"/",t);if(i==null)return null;let o=FT(n);X3(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let f=sF(i);u=iF(o[c],f,r)}return u}function FT(n,e=[],t=[],r=""){let a=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Wt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Ii([r,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(Wt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),FT(i.children,e,d,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:rF(f,i.index),routesMeta:d})};return n.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,o);else for(let c of PT(i.path))a(i,o,c)}),e}function PT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=PT(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&u.push(...o),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function X3(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:aF(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Y3=/^:[\w-]+$/,Z3=3,J3=2,eF=1,tF=10,nF=-2,o2=n=>n==="*";function rF(n,e){let t=n.split("/"),r=t.length;return t.some(o2)&&(r+=nF),e&&(r+=J3),t.filter(a=>!o2(a)).reduce((a,i)=>a+(Y3.test(i)?Z3:i===""?eF:tF),r)}function aF(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function iF(n,e,t=!1){let{routesMeta:r}=n,a={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=Wp({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),v=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=Wp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Ii([i,p.pathname]),pathnameBase:fF(Ii([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Ii([i,p.pathnameBase]))}return o}function Wp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=oF(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},v)=>{if(d==="*"){let y=u[v]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=u[v];return p&&!g?f[d]=void 0:f[d]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:n}}function oF(n,e=!1,t=!0){ya(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function sF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ya(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Fi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function uF(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?ac(n):n;return{pathname:t?t.startsWith("/")?t:lF(t,e):e,search:hF(r),hash:dF(a)}}function lF(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Iy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function LT(n){let e=cF(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function BT(n,e,t,r=!1){let a;typeof n=="string"?a=ac(n):(a={...n},Wt(!a.pathname||!a.pathname.includes("?"),Iy("?","pathname","search",a)),Wt(!a.pathname||!a.pathname.includes("#"),Iy("#","pathname","hash",a)),Wt(!a.search||!a.search.includes("#"),Iy("#","search","hash",a)));let i=n===""||a.pathname==="",o=i?"/":a.pathname,u;if(o==null)u=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}u=p>=0?e[p]:"/"}let c=uF(a,u),f=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}var Ii=n=>n.join("/").replace(/\/\/+/g,"/"),fF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function pF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var zT=["POST","PUT","PATCH","DELETE"];new Set(zT);var vF=["GET",...zT];new Set(vF);var ic=J.createContext(null);ic.displayName="DataRouter";var zv=J.createContext(null);zv.displayName="DataRouterState";var UT=J.createContext({isTransitioning:!1});UT.displayName="ViewTransition";var mF=J.createContext(new Map);mF.displayName="Fetchers";var gF=J.createContext(null);gF.displayName="Await";var Ja=J.createContext(null);Ja.displayName="Navigation";var _h=J.createContext(null);_h.displayName="Location";var Bi=J.createContext({outlet:null,matches:[],isDataRoute:!1});Bi.displayName="Route";var vx=J.createContext(null);vx.displayName="RouteError";function yF(n,{relative:e}={}){Wt(Eh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=J.useContext(Ja),{hash:a,pathname:i,search:o}=Sh(n,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:Ii([t,i])),r.createHref({pathname:u,search:o,hash:a})}function Eh(){return J.useContext(_h)!=null}function Zo(){return Wt(Eh(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(_h).location}var VT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jT(n){J.useContext(Ja).static||J.useLayoutEffect(n)}function qT(){let{isDataRoute:n}=J.useContext(Bi);return n?DF():bF()}function bF(){Wt(Eh(),"useNavigate() may be used only in the context of a <Router> component.");let n=J.useContext(ic),{basename:e,navigator:t}=J.useContext(Ja),{matches:r}=J.useContext(Bi),{pathname:a}=Zo(),i=JSON.stringify(LT(r)),o=J.useRef(!1);return jT(()=>{o.current=!0}),J.useCallback((c,f={})=>{if(ya(o.current,VT),!o.current)return;if(typeof c=="number"){t.go(c);return}let d=BT(c,JSON.parse(i),a,f.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ii([e,d.pathname])),(f.replace?t.replace:t.push)(d,f.state,f)},[e,t,i,a,n])}J.createContext(null);function Sh(n,{relative:e}={}){let{matches:t}=J.useContext(Bi),{pathname:r}=Zo(),a=JSON.stringify(LT(t));return J.useMemo(()=>BT(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function xF(n,e){return WT(n,e)}function WT(n,e,t,r){var S;Wt(Eh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:i}=J.useContext(Ja),{matches:o}=J.useContext(Bi),u=o[o.length-1],c=u?u.params:{},f=u?u.pathname:"/",d=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";HT(f,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=Zo(),g;if(e){let C=typeof e=="string"?ac(e):e;Wt(d==="/"||((S=C.pathname)==null?void 0:S.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${C.pathname}" was given in the \`location\` prop.`),g=C}else g=v;let y=g.pathname||"/",x=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=!i&&t&&t.matches&&t.matches.length>0?t.matches:MT(n,{pathname:x});ya(p||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ya(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=CF(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Ii([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Ii([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,t,r);return e&&_?J.createElement(_h.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},_):_}function wF(){let n=kF(),e=pF(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=J.createElement(J.Fragment,null,J.createElement("p",null,"💿 Hey developer 👋"),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:i},"ErrorBoundary")," or"," ",J.createElement("code",{style:i},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:a},t):null,o)}var _F=J.createElement(wF,null),EF=class extends J.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?J.createElement(Bi.Provider,{value:this.props.routeContext},J.createElement(vx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function SF({routeContext:n,match:e,children:t}){let r=J.useContext(ic);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),J.createElement(Bi.Provider,{value:n},t)}function CF(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,i=t==null?void 0:t.errors;if(i!=null){let c=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);Wt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,u=-1;if(t)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:p}=t,v=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){o=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,f,d)=>{let p,v=!1,g=null,y=null;t&&(p=i&&f.route.id?i[f.route.id]:void 0,g=f.route.errorElement||_F,o&&(u<0&&d===0?(HT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):u===d&&(v=!0,y=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,d+1)),w=()=>{let _;return p?_=g:v?_=y:f.route.Component?_=J.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,J.createElement(SF,{match:f,routeContext:{outlet:c,matches:x,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?J.createElement(EF,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}function mx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RF(n){let e=J.useContext(ic);return Wt(e,mx(n)),e}function TF(n){let e=J.useContext(zv);return Wt(e,mx(n)),e}function OF(n){let e=J.useContext(Bi);return Wt(e,mx(n)),e}function gx(n){let e=OF(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function AF(){return gx("useRouteId")}function kF(){var r;let n=J.useContext(vx),e=TF("useRouteError"),t=gx("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function DF(){let{router:n}=RF("useNavigate"),e=gx("useNavigate"),t=J.useRef(!1);return jT(()=>{t.current=!0}),J.useCallback(async(a,i={})=>{ya(t.current,VT),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...i}))},[n,e])}var s2={};function HT(n,e,t){!e&&!s2[n]&&(s2[n]=!0,ya(!1,t))}J.memo(NF);function NF({routes:n,future:e,state:t}){return WT(n,void 0,t,e)}function IF(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MF({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:i=!1}){Wt(!Eh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),u=J.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof t=="string"&&(t=ac(t));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:v="default"}=t,g=J.useMemo(()=>{let y=Fi(c,o);return y==null?null:{location:{pathname:y,search:f,hash:d,state:p,key:v},navigationType:r}},[o,c,f,d,p,v,r]);return ya(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:J.createElement(Ja.Provider,{value:u},J.createElement(_h.Provider,{children:e,value:g}))}function x9({children:n,location:e}){return xF(U0(n),e)}function U0(n,e=[]){let t=[];return J.Children.forEach(n,(r,a)=>{if(!J.isValidElement(r))return;let i=[...e,a];if(r.type===J.Fragment){t.push.apply(t,U0(r.props.children,i));return}Wt(r.type===IF,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=U0(r.props.children,i)),t.push(o)}),t}var Tp="get",Op="application/x-www-form-urlencoded";function Uv(n){return n!=null&&typeof n.tagName=="string"}function FF(n){return Uv(n)&&n.tagName.toLowerCase()==="button"}function PF(n){return Uv(n)&&n.tagName.toLowerCase()==="form"}function LF(n){return Uv(n)&&n.tagName.toLowerCase()==="input"}function BF(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function zF(n,e){return n.button===0&&(!e||e==="_self")&&!BF(n)}function V0(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(a=>[t,a]):[[t,r]])},[]))}function UF(n,e){let t=V0(n);return e&&e.forEach((r,a)=>{t.has(a)||e.getAll(a).forEach(i=>{t.append(a,i)})}),t}var Jd=null;function VF(){if(Jd===null)try{new FormData(document.createElement("form"),0),Jd=!1}catch{Jd=!0}return Jd}var jF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function My(n){return n!=null&&!jF.has(n)?(ya(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Op}"`),null):n}function qF(n,e){let t,r,a,i,o;if(PF(n)){let u=n.getAttribute("action");r=u?Fi(u,e):null,t=n.getAttribute("method")||Tp,a=My(n.getAttribute("enctype"))||Op,i=new FormData(n)}else if(FF(n)||LF(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?Fi(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Tp,a=My(n.getAttribute("formenctype"))||My(u.getAttribute("enctype"))||Op,i=new FormData(u,n),!VF()){let{name:f,type:d,value:p}=n;if(d==="image"){let v=f?`${f}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else f&&i.append(f,p)}}else{if(Uv(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Tp,r=null,a=Op,o=n}return i&&a==="text/plain"&&(o=i,i=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:i,body:o}}function yx(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function WF(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HF(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function GF(n,e,t){let r=await Promise.all(n.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await WF(i,t);return o.links?o.links():[]}return[]}));return XF(r.flat(1).filter(HF).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function u2(n,e,t,r,a,i){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,u=(c,f)=>{var d;return t[f].pathname!==c.pathname||((d=t[f].route.path)==null?void 0:d.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,f)=>o(c,f)||u(c,f)):i==="data"?e.filter((c,f)=>{var p;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function QF(n,e,{includeHydrateFallback:t}={}){return $F(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function $F(n){return[...new Set(n)]}function KF(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function XF(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let i=JSON.stringify(KF(a));return t.has(i)||(t.add(i),r.push({key:i,link:a})),r},[])}function YF(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Fi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function GT(){let n=J.useContext(ic);return yx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function ZF(){let n=J.useContext(zv);return yx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var bx=J.createContext(void 0);bx.displayName="FrameworkContext";function QT(){let n=J.useContext(bx);return yx(n,"You must render this element inside a <HydratedRouter> element"),n}function JF(n,e){let t=J.useContext(bx),[r,a]=J.useState(!1),[i,o]=J.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=e,v=J.useRef(null);J.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let x=_=>{_.forEach(S=>{o(S.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[n]),J.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{a(!0)},y=()=>{a(!1),o(!1)};return t?n!=="intent"?[i,v,{}]:[i,v,{onFocus:pf(u,g),onBlur:pf(c,y),onMouseEnter:pf(f,g),onMouseLeave:pf(d,y),onTouchStart:pf(p,g)}]:[!1,v,{}]}function pf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function e4({page:n,...e}){let{router:t}=GT(),r=J.useMemo(()=>MT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?J.createElement(n4,{page:n,matches:r,...e}):null}function t4(n){let{manifest:e,routeModules:t}=QT(),[r,a]=J.useState([]);return J.useEffect(()=>{let i=!1;return GF(n,e,t).then(o=>{i||a(o)}),()=>{i=!0}},[n,e,t]),r}function n4({page:n,matches:e,...t}){let r=Zo(),{manifest:a,routeModules:i}=QT(),{basename:o}=GT(),{loaderData:u,matches:c}=ZF(),f=J.useMemo(()=>u2(n,e,c,a,r,"data"),[n,e,c,a,r]),d=J.useMemo(()=>u2(n,e,c,a,r,"assets"),[n,e,c,a,r]),p=J.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let y=new Set,x=!1;if(e.forEach(_=>{var C;let S=a.routes[_.route.id];!S||!S.hasLoader||(!f.some(R=>R.route.id===_.route.id)&&_.route.id in u&&((C=i[_.route.id])!=null&&C.shouldRevalidate)||S.hasClientLoader?x=!0:y.add(_.route.id))}),y.size===0)return[];let w=YF(n,o);return x&&y.size>0&&w.searchParams.set("_routes",e.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,u,r,a,f,e,n,i]),v=J.useMemo(()=>QF(d,a),[d,a]),g=t4(d);return J.createElement(J.Fragment,null,p.map(y=>J.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),v.map(y=>J.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:x})=>J.createElement("link",{key:y,...x})))}function r4(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $T=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$T&&(window.__reactRouterVersion="7.4.0")}catch{}function w9({basename:n,children:e,window:t}){let r=J.useRef();r.current==null&&(r.current=G3({window:t,v5Compat:!0}));let a=r.current,[i,o]=J.useState({action:a.action,location:a.location}),u=J.useCallback(c=>{J.startTransition(()=>o(c))},[o]);return J.useLayoutEffect(()=>a.listen(u),[a,u]),J.createElement(MF,{basename:n,children:e,location:i.location,navigationType:i.action,navigator:a})}var KT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XT=J.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:i,replace:o,state:u,target:c,to:f,preventScrollReset:d,viewTransition:p,...v},g){let{basename:y}=J.useContext(Ja),x=typeof f=="string"&&KT.test(f),w,_=!1;if(typeof f=="string"&&x&&(w=f,$T))try{let k=new URL(window.location.href),I=f.startsWith("//")?new URL(k.protocol+f):new URL(f),B=Fi(I.pathname,y);I.origin===k.origin&&B!=null?f=B+I.search+I.hash:_=!0}catch{ya(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=yF(f,{relative:a}),[C,R,T]=JF(r,v),O=s4(f,{replace:o,state:u,target:c,preventScrollReset:d,relative:a,viewTransition:p});function D(k){e&&e(k),k.defaultPrevented||O(k)}let N=J.createElement("a",{...v,...T,href:w||S,onClick:_||i?e:D,ref:r4(g,R),target:c,"data-discover":!x&&t==="render"?"true":void 0});return C&&!x?J.createElement(J.Fragment,null,N,J.createElement(e4,{page:S})):N});XT.displayName="Link";var a4=J.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:i,to:o,viewTransition:u,children:c,...f},d){let p=Sh(o,{relative:f.relative}),v=Zo(),g=J.useContext(zv),{navigator:y,basename:x}=J.useContext(Ja),w=g!=null&&h4(p)&&u===!0,_=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,S=v.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&x&&(C=Fi(C,x)||C);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=S===_||!a&&S.startsWith(_)&&S.charAt(R)==="/",O=C!=null&&(C===_||!a&&C.startsWith(_)&&C.charAt(_.length)==="/"),D={isActive:T,isPending:O,isTransitioning:w},N=T?e:void 0,k;typeof r=="function"?k=r(D):k=[r,T?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(D):i;return J.createElement(XT,{...f,"aria-current":N,className:k,ref:d,style:I,to:o,viewTransition:u},typeof c=="function"?c(D):c)});a4.displayName="NavLink";var i4=J.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:i,method:o=Tp,action:u,onSubmit:c,relative:f,preventScrollReset:d,viewTransition:p,...v},g)=>{let y=c4(),x=f4(u,{relative:f}),w=o.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&KT.test(u),S=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let R=C.nativeEvent.submitter,T=(R==null?void 0:R.getAttribute("formmethod"))||o;y(R||C.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:a,state:i,relative:f,preventScrollReset:d,viewTransition:p})};return J.createElement("form",{ref:g,method:w,action:x,onSubmit:r?c:S,...v,"data-discover":!_&&n==="render"?"true":void 0})});i4.displayName="Form";function o4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YT(n){let e=J.useContext(ic);return Wt(e,o4(n)),e}function s4(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:o}={}){let u=qT(),c=Zo(),f=Sh(n,{relative:i});return J.useCallback(d=>{if(zF(d,e)){d.preventDefault();let p=t!==void 0?t:qf(c)===qf(f);u(n,{replace:p,state:r,preventScrollReset:a,relative:i,viewTransition:o})}},[c,u,f,t,r,e,n,a,i,o])}function _9(n){ya(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=J.useRef(V0(n)),t=J.useRef(!1),r=Zo(),a=J.useMemo(()=>UF(r.search,t.current?null:e.current),[r.search]),i=qT(),o=J.useCallback((u,c)=>{const f=V0(typeof u=="function"?u(a):u);t.current=!0,i("?"+f,c)},[i,a]);return[a,o]}var u4=0,l4=()=>`__${String(++u4)}__`;function c4(){let{router:n}=YT("useSubmit"),{basename:e}=J.useContext(Ja),t=AF();return J.useCallback(async(r,a={})=>{let{action:i,method:o,encType:u,formData:c,body:f}=qF(r,e);if(a.navigate===!1){let d=a.fetcherKey||l4();await n.fetch(d,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,flushSync:a.flushSync})}else await n.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function f4(n,{relative:e}={}){let{basename:t}=J.useContext(Ja),r=J.useContext(Bi);Wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...Sh(n||".",{relative:e})},o=Zo();if(n==null){i.search=o.search;let u=new URLSearchParams(i.search),c=u.getAll("index");if(c.some(d=>d==="")){u.delete("index"),c.filter(p=>p).forEach(p=>u.append("index",p));let d=u.toString();i.search=d?`?${d}`:""}}return(!n||n===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Ii([t,i.pathname])),qf(i)}function h4(n,e={}){let t=J.useContext(UT);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=YT("useViewTransitionState"),a=Sh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Fi(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Fi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Wp(a.pathname,o)!=null||Wp(a.pathname,i)!=null}new TextEncoder;function d4(n={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}=n,[a,i]=J.useState(!1),o=J.useRef(t);o.current=t;const u=J.useRef(r);return u.current=r,J.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var f;i(!0),(f=o.current)===null||f===void 0||f.call(o)},c.onerror=()=>{var f;i(!1),(f=u.current)===null||f===void 0||f.call(u)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),a}const ZT=J.createContext(null);function E9({clientId:n,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r,children:a}){const i=d4({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}),o=J.useMemo(()=>({clientId:n,scriptLoadedSuccessfully:i}),[n,i]);return pr.createElement(ZT.Provider,{value:o},a)}function p4(){const n=J.useContext(ZT);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function S9({flow:n="implicit",scope:e="",onSuccess:t,onError:r,onNonOAuthError:a,overrideScope:i,state:o,...u}){const{clientId:c,scriptLoadedSuccessfully:f}=p4(),d=J.useRef(),p=J.useRef(t);p.current=t;const v=J.useRef(r);v.current=r;const g=J.useRef(a);g.current=a,J.useEffect(()=>{var w,_;if(!f)return;const S=n==="implicit"?"initTokenClient":"initCodeClient",C=(_=(w=window==null?void 0:window.google)===null||w===void 0?void 0:w.accounts)===null||_===void 0?void 0:_.oauth2[S]({client_id:c,scope:i?e:`openid profile email ${e}`,callback:R=>{var T,O;if(R.error)return(T=v.current)===null||T===void 0?void 0:T.call(v,R);(O=p.current)===null||O===void 0||O.call(p,R)},error_callback:R=>{var T;(T=g.current)===null||T===void 0||T.call(g,R)},state:o,...u});d.current=C},[c,f,n,e,o]);const y=J.useCallback(w=>{var _;return(_=d.current)===null||_===void 0?void 0:_.requestAccessToken(w)},[]),x=J.useCallback(()=>{var w;return(w=d.current)===null||w===void 0?void 0:w.requestCode()},[]);return n==="implicit"?y:x}var oc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$s=typeof window>"u"||"Deno"in globalThis;function Gr(){}function v4(n,e){return typeof n=="function"?n(e):n}function j0(n){return typeof n=="number"&&n>=0&&n!==1/0}function JT(n,e){return Math.max(n+(e||0)-Date.now(),0)}function dl(n,e){return typeof n=="function"?n(e):n}function la(n,e){return typeof n=="function"?n(e):n}function l2(n,e){const{type:t="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:u}=n;if(o){if(r){if(e.queryHash!==xx(o,e.options))return!1}else if(!Wf(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||a&&a!==e.state.fetchStatus||i&&!i(e))}function c2(n,e){const{exact:t,status:r,predicate:a,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Ks(e.options.mutationKey)!==Ks(i))return!1}else if(!Wf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function xx(n,e){return((e==null?void 0:e.queryKeyHashFn)||Ks)(n)}function Ks(n){return JSON.stringify(n,(e,t)=>q0(t)?Object.keys(t).sort().reduce((r,a)=>(r[a]=t[a],r),{}):t)}function Wf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Wf(n[t],e[t])):!1}function eO(n,e){if(n===e)return n;const t=f2(n)&&f2(e);if(t||q0(n)&&q0(e)){const r=t?n:Object.keys(n),a=r.length,i=t?e:Object.keys(e),o=i.length,u=t?[]:{};let c=0;for(let f=0;f<o;f++){const d=t?f:i[f];(!t&&r.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(u[d]=void 0,c++):(u[d]=eO(n[d],e[d]),u[d]===n[d]&&n[d]!==void 0&&c++)}return a===o&&c===a?n:u}return e}function Hp(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function f2(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function q0(n){if(!h2(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!h2(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function h2(n){return Object.prototype.toString.call(n)==="[object Object]"}function m4(n){return new Promise(e=>{setTimeout(e,n)})}function W0(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?eO(n,e):e}function g4(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function y4(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var wx=Symbol();function tO(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===wx?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Fs,Co,Tl,JR,b4=(JR=class extends oc{constructor(){super();qe(this,Fs);qe(this,Co);qe(this,Tl);Se(this,Tl,e=>{if(!$s&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){V(this,Co)||this.setEventListener(V(this,Tl))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,Co))==null||e.call(this),Se(this,Co,void 0))}setEventListener(e){var t;Se(this,Tl,e),(t=V(this,Co))==null||t.call(this),Se(this,Co,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){V(this,Fs)!==e&&(Se(this,Fs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof V(this,Fs)=="boolean"?V(this,Fs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Fs=new WeakMap,Co=new WeakMap,Tl=new WeakMap,JR),_x=new b4,Ol,Ro,Al,eT,x4=(eT=class extends oc{constructor(){super();qe(this,Ol,!0);qe(this,Ro);qe(this,Al);Se(this,Al,e=>{if(!$s&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){V(this,Ro)||this.setEventListener(V(this,Al))}onUnsubscribe(){var e;this.hasListeners()||((e=V(this,Ro))==null||e.call(this),Se(this,Ro,void 0))}setEventListener(e){var t;Se(this,Al,e),(t=V(this,Ro))==null||t.call(this),Se(this,Ro,e(this.setOnline.bind(this)))}setOnline(e){V(this,Ol)!==e&&(Se(this,Ol,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return V(this,Ol)}},Ol=new WeakMap,Ro=new WeakMap,Al=new WeakMap,eT),Gp=new x4;function H0(){let n,e;const t=new Promise((a,i)=>{n=a,e=i});t.status="pending",t.catch(()=>{});function r(a){Object.assign(t,a),delete t.resolve,delete t.reject}return t.resolve=a=>{r({status:"fulfilled",value:a}),n(a)},t.reject=a=>{r({status:"rejected",reason:a}),e(a)},t}function w4(n){return Math.min(1e3*2**n,3e4)}function nO(n){return(n??"online")==="online"?Gp.isOnline():!0}var rO=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Fy(n){return n instanceof rO}function aO(n){let e=!1,t=0,r=!1,a;const i=H0(),o=x=>{var w;r||(v(new rO(x)),(w=n.abort)==null||w.call(n))},u=()=>{e=!0},c=()=>{e=!1},f=()=>_x.isFocused()&&(n.networkMode==="always"||Gp.isOnline())&&n.canRun(),d=()=>nO(n.networkMode)&&n.canRun(),p=x=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,x),a==null||a(),i.resolve(x))},v=x=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,x),a==null||a(),i.reject(x))},g=()=>new Promise(x=>{var w;a=_=>{(r||f())&&x(_)},(w=n.onPause)==null||w.call(n)}).then(()=>{var x;a=void 0,r||(x=n.onContinue)==null||x.call(n)}),y=()=>{if(r)return;let x;const w=t===0?n.initialPromise:void 0;try{x=w??n.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(p).catch(_=>{var O;if(r)return;const S=n.retry??($s?0:3),C=n.retryDelay??w4,R=typeof C=="function"?C(t,_):C,T=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,_);if(e||!T){v(_);return}t++,(O=n.onFail)==null||O.call(n,t,_),m4(R).then(()=>f()?void 0:g()).then(()=>{e?v(_):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?y():g().then(y),i)}}function _4(){let n=[],e=0,t=u=>{u()},r=u=>{u()},a=u=>setTimeout(u,0);const i=u=>{e?n.push(u):a(()=>{t(u)})},o=()=>{const u=n;n=[],u.length&&a(()=>{r(()=>{u.forEach(c=>{t(c)})})})};return{batch:u=>{let c;e++;try{c=u()}finally{e--,e||o()}return c},batchCalls:u=>(...c)=>{i(()=>{u(...c)})},schedule:i,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{a=u}}}var hn=_4(),Ps,tT,iO=(tT=class{constructor(){qe(this,Ps)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),j0(this.gcTime)&&Se(this,Ps,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??($s?1/0:5*60*1e3))}clearGcTimeout(){V(this,Ps)&&(clearTimeout(V(this,Ps)),Se(this,Ps,void 0))}},Ps=new WeakMap,tT),kl,Dl,Hr,Ls,qn,yh,Bs,sa,Ci,nT,E4=(nT=class extends iO{constructor(e){super();qe(this,sa);qe(this,kl);qe(this,Dl);qe(this,Hr);qe(this,Ls);qe(this,qn);qe(this,yh);qe(this,Bs);Se(this,Bs,!1),Se(this,yh,e.defaultOptions),this.setOptions(e.options),this.observers=[],Se(this,Ls,e.client),Se(this,Hr,V(this,Ls).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Se(this,kl,S4(this.options)),this.state=e.state??V(this,kl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=V(this,qn))==null?void 0:e.promise}setOptions(e){this.options={...V(this,yh),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&V(this,Hr).remove(this)}setData(e,t){const r=W0(this.state.data,e,this.options);return rt(this,sa,Ci).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){rt(this,sa,Ci).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,a;const t=(r=V(this,qn))==null?void 0:r.promise;return(a=V(this,qn))==null||a.cancel(e),t?t.then(Gr).catch(Gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(V(this,kl))}isActive(){return this.observers.some(e=>la(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!JT(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=V(this,qn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=V(this,qn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),V(this,Hr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(V(this,qn)&&(V(this,Bs)?V(this,qn).cancel({revert:!0}):V(this,qn).cancelRetry()),this.scheduleGc()),V(this,Hr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||rt(this,sa,Ci).call(this,{type:"invalidate"})}fetch(e,t){var c,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(V(this,qn))return V(this,qn).continueRetry(),V(this,qn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(v=>v.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Se(this,Bs,!0),r.signal)})},i=()=>{const p=tO(this.options,t),v={client:V(this,Ls),queryKey:this.queryKey,meta:this.meta};return a(v),Se(this,Bs,!1),this.options.persister?this.options.persister(p,v,this):p(v)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:V(this,Ls),state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),Se(this,Dl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=o.fetchOptions)==null?void 0:f.meta))&&rt(this,sa,Ci).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const u=p=>{var v,g,y,x;Fy(p)&&p.silent||rt(this,sa,Ci).call(this,{type:"error",error:p}),Fy(p)||((g=(v=V(this,Hr).config).onError)==null||g.call(v,p,this),(x=(y=V(this,Hr).config).onSettled)==null||x.call(y,this.state.data,p,this)),this.scheduleGc()};return Se(this,qn,aO({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var v,g,y,x;if(p===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(w){u(w);return}(g=(v=V(this,Hr).config).onSuccess)==null||g.call(v,p,this),(x=(y=V(this,Hr).config).onSettled)==null||x.call(y,p,this.state.error,this),this.scheduleGc()},onError:u,onFail:(p,v)=>{rt(this,sa,Ci).call(this,{type:"failed",failureCount:p,error:v})},onPause:()=>{rt(this,sa,Ci).call(this,{type:"pause"})},onContinue:()=>{rt(this,sa,Ci).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),V(this,qn).start()}},kl=new WeakMap,Dl=new WeakMap,Hr=new WeakMap,Ls=new WeakMap,qn=new WeakMap,yh=new WeakMap,Bs=new WeakMap,sa=new WeakSet,Ci=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...oO(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return Fy(a)&&a.revert&&V(this,Dl)?{...V(this,Dl),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),hn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),V(this,Hr).notify({query:this,type:"updated",action:e})})},nT);function oO(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nO(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function S4(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ia,rT,C4=(rT=class extends oc{constructor(e={}){super();qe(this,Ia);this.config=e,Se(this,Ia,new Map)}build(e,t,r){const a=t.queryKey,i=t.queryHash??xx(a,t);let o=this.get(i);return o||(o=new E4({client:e,queryKey:a,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){V(this,Ia).has(e.queryHash)||(V(this,Ia).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=V(this,Ia).get(e.queryHash);t&&(e.destroy(),t===e&&V(this,Ia).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){hn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return V(this,Ia).get(e)}getAll(){return[...V(this,Ia).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>l2(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>l2(e,r)):t}notify(e){hn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){hn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){hn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ia=new WeakMap,rT),Ma,tr,zs,Fa,bo,aT,R4=(aT=class extends iO{constructor(e){super();qe(this,Fa);qe(this,Ma);qe(this,tr);qe(this,zs);this.mutationId=e.mutationId,Se(this,tr,e.mutationCache),Se(this,Ma,[]),this.state=e.state||sO(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){V(this,Ma).includes(e)||(V(this,Ma).push(e),this.clearGcTimeout(),V(this,tr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Se(this,Ma,V(this,Ma).filter(t=>t!==e)),this.scheduleGc(),V(this,tr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){V(this,Ma).length||(this.state.status==="pending"?this.scheduleGc():V(this,tr).remove(this))}continue(){var e;return((e=V(this,zs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D;Se(this,zs,aO({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,k)=>{rt(this,Fa,bo).call(this,{type:"failed",failureCount:N,error:k})},onPause:()=>{rt(this,Fa,bo).call(this,{type:"pause"})},onContinue:()=>{rt(this,Fa,bo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>V(this,tr).canRun(this)}));const t=this.state.status==="pending",r=!V(this,zs).canStart();try{if(!t){rt(this,Fa,bo).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(a=V(this,tr).config).onMutate)==null?void 0:i.call(a,e,this));const k=await((u=(o=this.options).onMutate)==null?void 0:u.call(o,e));k!==this.state.context&&rt(this,Fa,bo).call(this,{type:"pending",context:k,variables:e,isPaused:r})}const N=await V(this,zs).start();return await((f=(c=V(this,tr).config).onSuccess)==null?void 0:f.call(c,N,e,this.state.context,this)),await((p=(d=this.options).onSuccess)==null?void 0:p.call(d,N,e,this.state.context)),await((g=(v=V(this,tr).config).onSettled)==null?void 0:g.call(v,N,null,this.state.variables,this.state.context,this)),await((x=(y=this.options).onSettled)==null?void 0:x.call(y,N,null,e,this.state.context)),rt(this,Fa,bo).call(this,{type:"success",data:N}),N}catch(N){try{throw await((_=(w=V(this,tr).config).onError)==null?void 0:_.call(w,N,e,this.state.context,this)),await((C=(S=this.options).onError)==null?void 0:C.call(S,N,e,this.state.context)),await((T=(R=V(this,tr).config).onSettled)==null?void 0:T.call(R,void 0,N,this.state.variables,this.state.context,this)),await((D=(O=this.options).onSettled)==null?void 0:D.call(O,void 0,N,e,this.state.context)),N}finally{rt(this,Fa,bo).call(this,{type:"error",error:N})}}finally{V(this,tr).runNext(this)}}},Ma=new WeakMap,tr=new WeakMap,zs=new WeakMap,Fa=new WeakSet,bo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),hn.batch(()=>{V(this,Ma).forEach(r=>{r.onMutationUpdate(e)}),V(this,tr).notify({mutation:this,type:"updated",action:e})})},aT);function sO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ki,ua,bh,iT,T4=(iT=class extends oc{constructor(e={}){super();qe(this,ki);qe(this,ua);qe(this,bh);this.config=e,Se(this,ki,new Set),Se(this,ua,new Map),Se(this,bh,0)}build(e,t,r){const a=new R4({mutationCache:this,mutationId:++Xd(this,bh)._,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){V(this,ki).add(e);const t=ep(e);if(typeof t=="string"){const r=V(this,ua).get(t);r?r.push(e):V(this,ua).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(V(this,ki).delete(e)){const t=ep(e);if(typeof t=="string"){const r=V(this,ua).get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&V(this,ua).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ep(e);if(typeof t=="string"){const r=V(this,ua).get(t),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const t=ep(e);if(typeof t=="string"){const a=(r=V(this,ua).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){hn.batch(()=>{V(this,ki).forEach(e=>{this.notify({type:"removed",mutation:e})}),V(this,ki).clear(),V(this,ua).clear()})}getAll(){return Array.from(V(this,ki))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>c2(t,r))}findAll(e={}){return this.getAll().filter(t=>c2(e,t))}notify(e){hn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return hn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Gr))))}},ki=new WeakMap,ua=new WeakMap,bh=new WeakMap,iT);function ep(n){var e;return(e=n.options.scope)==null?void 0:e.id}function d2(n){return{onFetch:(e,t)=>{var d,p,v,g,y;const r=e.options,a=(v=(p=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:p.fetchMore)==null?void 0:v.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let u={pages:[],pageParams:[]},c=0;const f=async()=>{let x=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},_=tO(e.options,e.fetchOptions),S=async(C,R,T)=>{if(x)return Promise.reject();if(R==null&&C.pages.length)return Promise.resolve(C);const O={client:e.client,queryKey:e.queryKey,pageParam:R,direction:T?"backward":"forward",meta:e.options.meta};w(O);const D=await _(O),{maxPages:N}=e.options,k=T?y4:g4;return{pages:k(C.pages,D,N),pageParams:k(C.pageParams,R,N)}};if(a&&i.length){const C=a==="backward",R=C?O4:p2,T={pages:i,pageParams:o},O=R(r,T);u=await S(T,O,C)}else{const C=n??i.length;do{const R=c===0?o[0]??r.initialPageParam:p2(r,u);if(c>0&&R==null)break;u=await S(u,R),c++}while(c<C)}return u};e.options.persister?e.fetchFn=()=>{var x,w;return(w=(x=e.options).persister)==null?void 0:w.call(x,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=f}}}function p2(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function O4(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Xt,To,Oo,Nl,Il,Ao,Ml,Fl,oT,C9=(oT=class{constructor(n={}){qe(this,Xt);qe(this,To);qe(this,Oo);qe(this,Nl);qe(this,Il);qe(this,Ao);qe(this,Ml);qe(this,Fl);Se(this,Xt,n.queryCache||new C4),Se(this,To,n.mutationCache||new T4),Se(this,Oo,n.defaultOptions||{}),Se(this,Nl,new Map),Se(this,Il,new Map),Se(this,Ao,0)}mount(){Xd(this,Ao)._++,V(this,Ao)===1&&(Se(this,Ml,_x.subscribe(async n=>{n&&(await this.resumePausedMutations(),V(this,Xt).onFocus())})),Se(this,Fl,Gp.subscribe(async n=>{n&&(await this.resumePausedMutations(),V(this,Xt).onOnline())})))}unmount(){var n,e;Xd(this,Ao)._--,V(this,Ao)===0&&((n=V(this,Ml))==null||n.call(this),Se(this,Ml,void 0),(e=V(this,Fl))==null||e.call(this),Se(this,Fl,void 0))}isFetching(n){return V(this,Xt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return V(this,To).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=V(this,Xt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=V(this,Xt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(dl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return V(this,Xt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),a=V(this,Xt).get(r.queryHash),i=a==null?void 0:a.state.data,o=v4(e,i);if(o!==void 0)return V(this,Xt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return hn.batch(()=>V(this,Xt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=V(this,Xt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=V(this,Xt);hn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=V(this,Xt);return hn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=hn.batch(()=>V(this,Xt).findAll(n).map(a=>a.cancel(t)));return Promise.all(r).then(Gr).catch(Gr)}invalidateQueries(n,e={}){return hn.batch(()=>(V(this,Xt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=hn.batch(()=>V(this,Xt).findAll(n).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,t);return t.throwOnError||(i=i.catch(Gr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Gr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=V(this,Xt).build(this,e);return t.isStaleByTime(dl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Gr).catch(Gr)}fetchInfiniteQuery(n){return n.behavior=d2(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Gr).catch(Gr)}ensureInfiniteQueryData(n){return n.behavior=d2(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Gp.isOnline()?V(this,To).resumePausedMutations():Promise.resolve()}getQueryCache(){return V(this,Xt)}getMutationCache(){return V(this,To)}getDefaultOptions(){return V(this,Oo)}setDefaultOptions(n){Se(this,Oo,n)}setQueryDefaults(n,e){V(this,Nl).set(Ks(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...V(this,Nl).values()],t={};return e.forEach(r=>{Wf(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){V(this,Il).set(Ks(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...V(this,Il).values()],t={};return e.forEach(r=>{Wf(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...V(this,Oo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=xx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wx&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...V(this,Oo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){V(this,Xt).clear(),V(this,To).clear()}},Xt=new WeakMap,To=new WeakMap,Oo=new WeakMap,Nl=new WeakMap,Il=new WeakMap,Ao=new WeakMap,Ml=new WeakMap,Fl=new WeakMap,oT),cr,dt,xh,nr,Us,Pl,ko,Pa,wh,Ll,Bl,Vs,js,Do,zl,Tt,Rf,G0,Q0,$0,K0,X0,Y0,Z0,uO,sT,A4=(sT=class extends oc{constructor(e,t){super();qe(this,Tt);qe(this,cr);qe(this,dt);qe(this,xh);qe(this,nr);qe(this,Us);qe(this,Pl);qe(this,ko);qe(this,Pa);qe(this,wh);qe(this,Ll);qe(this,Bl);qe(this,Vs);qe(this,js);qe(this,Do);qe(this,zl,new Set);this.options=t,Se(this,cr,e),Se(this,Pa,null),Se(this,ko,H0()),this.options.experimental_prefetchInRender||V(this,ko).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(V(this,dt).addObserver(this),v2(V(this,dt),this.options)?rt(this,Tt,Rf).call(this):this.updateResult(),rt(this,Tt,K0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return J0(V(this,dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return J0(V(this,dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,rt(this,Tt,X0).call(this),rt(this,Tt,Y0).call(this),V(this,dt).removeObserver(this)}setOptions(e,t){const r=this.options,a=V(this,dt);if(this.options=V(this,cr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof la(this.options.enabled,V(this,dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");rt(this,Tt,Z0).call(this),V(this,dt).setOptions(this.options),r._defaulted&&!Hp(this.options,r)&&V(this,cr).getQueryCache().notify({type:"observerOptionsUpdated",query:V(this,dt),observer:this});const i=this.hasListeners();i&&m2(V(this,dt),a,this.options,r)&&rt(this,Tt,Rf).call(this),this.updateResult(t),i&&(V(this,dt)!==a||la(this.options.enabled,V(this,dt))!==la(r.enabled,V(this,dt))||dl(this.options.staleTime,V(this,dt))!==dl(r.staleTime,V(this,dt)))&&rt(this,Tt,G0).call(this);const o=rt(this,Tt,Q0).call(this);i&&(V(this,dt)!==a||la(this.options.enabled,V(this,dt))!==la(r.enabled,V(this,dt))||o!==V(this,Do))&&rt(this,Tt,$0).call(this,o)}getOptimisticResult(e){const t=V(this,cr).getQueryCache().build(V(this,cr),e),r=this.createResult(t,e);return D4(this,r)&&(Se(this,nr,r),Se(this,Pl,this.options),Se(this,Us,V(this,dt).state)),r}getCurrentResult(){return V(this,nr)}trackResult(e,t){const r={};return Object.keys(e).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t==null||t(a),e[a])})}),r}trackProp(e){V(this,zl).add(e)}getCurrentQuery(){return V(this,dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=V(this,cr).defaultQueryOptions(e),r=V(this,cr).getQueryCache().build(V(this,cr),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return rt(this,Tt,Rf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),V(this,nr)))}createResult(e,t){var N;const r=V(this,dt),a=this.options,i=V(this,nr),o=V(this,Us),u=V(this,Pl),f=e!==r?e.state:V(this,xh),{state:d}=e;let p={...d},v=!1,g;if(t._optimisticResults){const k=this.hasListeners(),I=!k&&v2(e,t),B=k&&m2(e,r,t,a);(I||B)&&(p={...p,...oO(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:w}=p;if(t.select&&p.data!==void 0)if(i&&p.data===(o==null?void 0:o.data)&&t.select===V(this,wh))g=V(this,Ll);else try{Se(this,wh,t.select),g=t.select(p.data),g=W0(i==null?void 0:i.data,g,t),Se(this,Ll,g),Se(this,Pa,null)}catch(k){Se(this,Pa,k)}else g=p.data;if(t.placeholderData!==void 0&&g===void 0&&w==="pending"){let k;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData))k=i.data;else if(k=typeof t.placeholderData=="function"?t.placeholderData((N=V(this,Bl))==null?void 0:N.state.data,V(this,Bl)):t.placeholderData,t.select&&k!==void 0)try{k=t.select(k),Se(this,Pa,null)}catch(I){Se(this,Pa,I)}k!==void 0&&(w="success",g=W0(i==null?void 0:i.data,k,t),v=!0)}V(this,Pa)&&(y=V(this,Pa),g=V(this,Ll),x=Date.now(),w="error");const _=p.fetchStatus==="fetching",S=w==="pending",C=w==="error",R=S&&_,T=g!==void 0,D={status:w,fetchStatus:p.fetchStatus,isPending:S,isSuccess:w==="success",isError:C,isInitialLoading:R,isLoading:R,data:g,dataUpdatedAt:p.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:_,isRefetching:_&&!S,isLoadingError:C&&!T,isPaused:p.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:C&&T,isStale:Ex(e,t),refetch:this.refetch,promise:V(this,ko)};if(this.options.experimental_prefetchInRender){const k=U=>{D.status==="error"?U.reject(D.error):D.data!==void 0&&U.resolve(D.data)},I=()=>{const U=Se(this,ko,D.promise=H0());k(U)},B=V(this,ko);switch(B.status){case"pending":e.queryHash===r.queryHash&&k(B);break;case"fulfilled":(D.status==="error"||D.data!==B.value)&&I();break;case"rejected":(D.status!=="error"||D.error!==B.reason)&&I();break}}return D}updateResult(e){const t=V(this,nr),r=this.createResult(V(this,dt),this.options);if(Se(this,Us,V(this,dt).state),Se(this,Pl,this.options),V(this,Us).data!==void 0&&Se(this,Bl,V(this,dt)),Hp(r,t))return;Se(this,nr,r);const a={},i=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,u=typeof o=="function"?o():o;if(u==="all"||!u&&!V(this,zl).size)return!0;const c=new Set(u??V(this,zl));return this.options.throwOnError&&c.add("error"),Object.keys(V(this,nr)).some(f=>{const d=f;return V(this,nr)[d]!==t[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&i()&&(a.listeners=!0),rt(this,Tt,uO).call(this,{...a,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&rt(this,Tt,K0).call(this)}},cr=new WeakMap,dt=new WeakMap,xh=new WeakMap,nr=new WeakMap,Us=new WeakMap,Pl=new WeakMap,ko=new WeakMap,Pa=new WeakMap,wh=new WeakMap,Ll=new WeakMap,Bl=new WeakMap,Vs=new WeakMap,js=new WeakMap,Do=new WeakMap,zl=new WeakMap,Tt=new WeakSet,Rf=function(e){rt(this,Tt,Z0).call(this);let t=V(this,dt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Gr)),t},G0=function(){rt(this,Tt,X0).call(this);const e=dl(this.options.staleTime,V(this,dt));if($s||V(this,nr).isStale||!j0(e))return;const r=JT(V(this,nr).dataUpdatedAt,e)+1;Se(this,Vs,setTimeout(()=>{V(this,nr).isStale||this.updateResult()},r))},Q0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(V(this,dt)):this.options.refetchInterval)??!1},$0=function(e){rt(this,Tt,Y0).call(this),Se(this,Do,e),!($s||la(this.options.enabled,V(this,dt))===!1||!j0(V(this,Do))||V(this,Do)===0)&&Se(this,js,setInterval(()=>{(this.options.refetchIntervalInBackground||_x.isFocused())&&rt(this,Tt,Rf).call(this)},V(this,Do)))},K0=function(){rt(this,Tt,G0).call(this),rt(this,Tt,$0).call(this,rt(this,Tt,Q0).call(this))},X0=function(){V(this,Vs)&&(clearTimeout(V(this,Vs)),Se(this,Vs,void 0))},Y0=function(){V(this,js)&&(clearInterval(V(this,js)),Se(this,js,void 0))},Z0=function(){const e=V(this,cr).getQueryCache().build(V(this,cr),this.options);if(e===V(this,dt))return;const t=V(this,dt);Se(this,dt,e),Se(this,xh,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},uO=function(e){hn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(V(this,nr))}),V(this,cr).getQueryCache().notify({query:V(this,dt),type:"observerResultsUpdated"})})},sT);function k4(n,e){return la(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function v2(n,e){return k4(n,e)||n.state.data!==void 0&&J0(n,e,e.refetchOnMount)}function J0(n,e,t){if(la(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Ex(n,e)}return!1}function m2(n,e,t,r){return(n!==e||la(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Ex(n,t)}function Ex(n,e){return la(e.enabled,n)!==!1&&n.isStaleByTime(dl(e.staleTime,n))}function D4(n,e){return!Hp(n.getCurrentResult(),e)}var No,Io,fr,Di,Mi,Ap,eb,uT,N4=(uT=class extends oc{constructor(t,r){super();qe(this,Mi);qe(this,No);qe(this,Io);qe(this,fr);qe(this,Di);Se(this,No,t),this.setOptions(r),this.bindMethods(),rt(this,Mi,Ap).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const r=this.options;this.options=V(this,No).defaultMutationOptions(t),Hp(this.options,r)||V(this,No).getMutationCache().notify({type:"observerOptionsUpdated",mutation:V(this,fr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ks(r.mutationKey)!==Ks(this.options.mutationKey)?this.reset():((a=V(this,fr))==null?void 0:a.state.status)==="pending"&&V(this,fr).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=V(this,fr))==null||t.removeObserver(this)}onMutationUpdate(t){rt(this,Mi,Ap).call(this),rt(this,Mi,eb).call(this,t)}getCurrentResult(){return V(this,Io)}reset(){var t;(t=V(this,fr))==null||t.removeObserver(this),Se(this,fr,void 0),rt(this,Mi,Ap).call(this),rt(this,Mi,eb).call(this)}mutate(t,r){var a;return Se(this,Di,r),(a=V(this,fr))==null||a.removeObserver(this),Se(this,fr,V(this,No).getMutationCache().build(V(this,No),this.options)),V(this,fr).addObserver(this),V(this,fr).execute(t)}},No=new WeakMap,Io=new WeakMap,fr=new WeakMap,Di=new WeakMap,Mi=new WeakSet,Ap=function(){var r;const t=((r=V(this,fr))==null?void 0:r.state)??sO();Se(this,Io,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},eb=function(t){hn.batch(()=>{var r,a,i,o,u,c,f,d;if(V(this,Di)&&this.hasListeners()){const p=V(this,Io).variables,v=V(this,Io).context;(t==null?void 0:t.type)==="success"?((a=(r=V(this,Di)).onSuccess)==null||a.call(r,t.data,p,v),(o=(i=V(this,Di)).onSettled)==null||o.call(i,t.data,null,p,v)):(t==null?void 0:t.type)==="error"&&((c=(u=V(this,Di)).onError)==null||c.call(u,t.error,p,v),(d=(f=V(this,Di)).onSettled)==null||d.call(f,void 0,t.error,p,v))}this.listeners.forEach(p=>{p(V(this,Io))})})},uT),lO=J.createContext(void 0),cO=n=>{const e=J.useContext(lO);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},T9=({client:n,children:e})=>(J.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),PM.jsx(lO.Provider,{value:n,children:e})),fO=J.createContext(!1),I4=()=>J.useContext(fO);fO.Provider;function M4(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var F4=J.createContext(M4()),P4=()=>J.useContext(F4);function hO(n,e){return typeof n=="function"?n(...e):!!n}function tb(){}var L4=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},B4=n=>{J.useEffect(()=>{n.clearReset()},[n])},z4=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:a})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(a&&n.data===void 0||hO(t,[n.error,r])),U4=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},V4=(n,e)=>n.isLoading&&n.isFetching&&!e,j4=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,g2=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function q4(n,e,t){var p,v,g,y,x;const r=cO(),a=I4(),i=P4(),o=r.defaultQueryOptions(n);(v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||v.call(p,o),o._optimisticResults=a?"isRestoring":"optimistic",U4(o),L4(o,i),B4(i);const u=!r.getQueryCache().get(o.queryHash),[c]=J.useState(()=>new e(r,o)),f=c.getOptimisticResult(o),d=!a&&n.subscribed!==!1;if(J.useSyncExternalStore(J.useCallback(w=>{const _=d?c.subscribe(hn.batchCalls(w)):tb;return c.updateResult(),_},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),J.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),j4(o,f))throw g2(o,c,i);if(z4({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;if((y=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||y.call(g,o,f),o.experimental_prefetchInRender&&!$s&&V4(f,a)){const w=u?g2(o,c,i):(x=r.getQueryCache().get(o.queryHash))==null?void 0:x.promise;w==null||w.catch(tb).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?f:c.trackResult(f)}function O9(n,e){return q4(n,A4)}function A9(n,e){const t=cO(),[r]=J.useState(()=>new N4(t,n));J.useEffect(()=>{r.setOptions(n)},[r,n]);const a=J.useSyncExternalStore(J.useCallback(o=>r.subscribe(hn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=J.useCallback((o,u)=>{r.mutate(o,u).catch(tb)},[r]);if(a.error&&hO(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var k9=function(){return null};const W4=(n,e,t,r)=>{var i,o,u,c;const a=[t,{code:e,...r||{}}];if((o=(i=n==null?void 0:n.services)==null?void 0:i.logger)!=null&&o.forward)return n.services.logger.forward(a,"warn","react-i18next::",!0);Ws(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(c=(u=n==null?void 0:n.services)==null?void 0:u.logger)!=null&&c.warn?n.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},y2={},nb=(n,e,t,r)=>{Ws(t)&&y2[t]||(Ws(t)&&(y2[t]=new Date),W4(n,e,t,r))},dO=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},rb=(n,e,t)=>{n.loadNamespaces(e,dO(n,t))},b2=(n,e,t,r)=>{if(Ws(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return rb(n,t,r);t.forEach(a=>{n.options.ns.indexOf(a)<0&&n.options.ns.push(a)}),n.loadLanguages(e,dO(n,r))},H4=(n,e,t={})=>!e.languages||!e.languages.length?(nb(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,a)=>{var i;if(((i=t.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,n))return!1}}),Ws=n=>typeof n=="string",G4=n=>typeof n=="object"&&n!==null,Q4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,$4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},K4=n=>$4[n],X4=n=>n.replace(Q4,K4);let ab={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:X4};const Y4=(n={})=>{ab={...ab,...n}},Z4=()=>ab;let pO;const J4=n=>{pO=n},eP=()=>pO,D9={type:"3rdParty",init(n){Y4(n.options.react),J4(n)}},vO=J.createContext();class tP{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const nP=(n,e)=>{const t=J.useRef();return J.useEffect(()=>{t.current=n},[n,e]),t.current},mO=(n,e,t,r)=>n.getFixedT(e,t,r),rP=(n,e,t,r)=>J.useCallback(mO(n,e,t,r),[n,e,t,r]),N9=(n,e={})=>{var R,T,O,D;const{i18n:t}=e,{i18n:r,defaultNS:a}=J.useContext(vO)||{},i=t||r||eP();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new tP),!i){nb(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const N=(I,B)=>Ws(B)?B:G4(B)&&Ws(B.defaultValue)?B.defaultValue:Array.isArray(I)?I[I.length-1]:I,k=[N,{},!1];return k.t=N,k.i18n={},k.ready=!1,k}(R=i.options.react)!=null&&R.wait&&nb(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Z4(),...i.options.react,...e},{useSuspense:u,keyPrefix:c}=o;let f=a||((T=i.options)==null?void 0:T.defaultNS);f=Ws(f)?[f]:f||["translation"],(D=(O=i.reportNamespaces).addUsedNamespaces)==null||D.call(O,f);const d=(i.isInitialized||i.initializedStoreOnce)&&f.every(N=>H4(N,i,o)),p=rP(i,e.lng||null,o.nsMode==="fallback"?f:f[0],c),v=()=>p,g=()=>mO(i,e.lng||null,o.nsMode==="fallback"?f:f[0],c),[y,x]=J.useState(v);let w=f.join();e.lng&&(w=`${e.lng}${w}`);const _=nP(w),S=J.useRef(!0);J.useEffect(()=>{const{bindI18n:N,bindI18nStore:k}=o;S.current=!0,!d&&!u&&(e.lng?b2(i,e.lng,f,()=>{S.current&&x(g)}):rb(i,f,()=>{S.current&&x(g)})),d&&_&&_!==w&&S.current&&x(g);const I=()=>{S.current&&x(g)};return N&&(i==null||i.on(N,I)),k&&(i==null||i.store.on(k,I)),()=>{S.current=!1,i&&(N==null||N.split(" ").forEach(B=>i.off(B,I))),k&&i&&k.split(" ").forEach(B=>i.store.off(B,I))}},[i,w]),J.useEffect(()=>{S.current&&d&&x(v)},[i,c,d]);const C=[y,i,d];if(C.t=y,C.i18n=i,C.ready=d,d||!d&&!u)return C;throw new Promise(N=>{e.lng?b2(i,e.lng,f,()=>N()):rb(i,f,()=>N())})};function I9({i18n:n,defaultNS:e,children:t}){const r=J.useMemo(()=>({i18n:n,defaultNS:e}),[n,e]);return J.createElement(vO.Provider,{value:r},t)}function aP(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Qp(){return Qp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qp.apply(null,arguments)}function ib(n,e){return ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},ib(n,e)}function iP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,ib(n,e)}var ob=function(n,e){return ob=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},ob(n,e)};function ei(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ob(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $=function(){return $=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$.apply(this,arguments)};function va(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function wo(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?i(d.value):a(d.value).then(u,c)}f((r=r.apply(n,e||[])).next())})}function _o(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=u(0),o.throw=u(1),o.return=u(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function dn(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var tp={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var x2;function oP(){if(x2)return tp;x2=1;var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;tp.format=o,tp.parse=u;function o(p){if(!p||typeof p!="object")throw new TypeError("argument obj is required");var v=p.parameters,g=p.type;if(!g||!i.test(g))throw new TypeError("invalid type");var y=g;if(v&&typeof v=="object")for(var x,w=Object.keys(v).sort(),_=0;_<w.length;_++){if(x=w[_],!t.test(x))throw new TypeError("invalid parameter name");y+="; "+x+"="+f(v[x])}return y}function u(p){if(!p)throw new TypeError("argument string is required");var v=typeof p=="object"?c(p):p;if(typeof v!="string")throw new TypeError("argument string is required to be a string");var g=v.indexOf(";"),y=g!==-1?v.slice(0,g).trim():v.trim();if(!i.test(y))throw new TypeError("invalid media type");var x=new d(y.toLowerCase());if(g!==-1){var w,_,S;for(n.lastIndex=g;_=n.exec(v);){if(_.index!==g)throw new TypeError("invalid parameter format");g+=_[0].length,w=_[1].toLowerCase(),S=_[2],S.charCodeAt(0)===34&&(S=S.slice(1,-1),S.indexOf("\\")!==-1&&(S=S.replace(r,"$1"))),x.parameters[w]=S}if(g!==v.length)throw new TypeError("invalid parameter format")}return x}function c(p){var v;if(typeof p.getHeader=="function"?v=p.getHeader("content-type"):typeof p.headers=="object"&&(v=p.headers&&p.headers["content-type"]),typeof v!="string")throw new TypeError("content-type header is missing from object");return v}function f(p){var v=String(p);if(t.test(v))return v;if(v.length>0&&!e.test(v))throw new TypeError("invalid parameter value");return'"'+v.replace(a,"\\$1")+'"'}function d(p){this.parameters=Object.create(null),this.type=p}return tp}var sP=oP(),Ju=new Map,gO=function(e){return e.cloneNode(!0)},w2=function(){return window.location.protocol==="file:"},yO=function(e,t,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&a.readyState===2){var i=a.getResponseHeader("Content-Type");if(!i)throw new Error("Content type not found");var o=sP.parse(i).type;if(!(o==="image/svg+xml"||o==="text/plain"))throw new Error("Invalid content type: ".concat(o))}if(a.readyState===4){if(a.status===404||a.responseXML===null)throw new Error(w2()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(a.status===200||w2()&&a.status===0)r(null,a);else throw new Error("There was a problem injecting the SVG: "+a.status+" "+a.statusText)}}catch(u){if(a.abort(),u instanceof Error)r(u,a);else throw u}},a.open("GET",e),a.withCredentials=t,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.send()},So={},_2=function(e,t){So[e]=So[e]||[],So[e].push(t)},uP=function(e){for(var t=function(o,u){setTimeout(function(){if(Array.isArray(So[e])){var c=Ju.get(e),f=So[e][o];c instanceof SVGSVGElement&&f(null,gO(c)),c instanceof Error&&f(c),o===So[e].length-1&&delete So[e]}},0)},r=0,a=So[e].length;r<a;r++)t(r)},lP=function(e,t,r){if(Ju.has(e)){var a=Ju.get(e);if(a===void 0){_2(e,r);return}if(a instanceof SVGSVGElement){r(null,gO(a));return}}Ju.set(e,void 0),_2(e,r),yO(e,t,function(i,o){var u;i?Ju.set(e,i):((u=o.responseXML)===null||u===void 0?void 0:u.documentElement)instanceof SVGSVGElement&&Ju.set(e,o.responseXML.documentElement),uP(e)})},cP=function(e,t,r){yO(e,t,function(a,i){var o;a?r(a):((o=i.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&r(null,i.responseXML.documentElement)})},fP=0,hP=function(){return++fP},ka=[],E2={},dP="http://www.w3.org/2000/svg",Py="http://www.w3.org/1999/xlink",S2=function(e,t,r,a,i,o,u){var c=e.getAttribute("data-src")||e.getAttribute("src");if(!c){u(new Error("Invalid data-src or src attribute"));return}if(ka.indexOf(e)!==-1){ka.splice(ka.indexOf(e),1),e=null;return}ka.push(e),e.setAttribute("src","");var f=a?lP:cP;f(c,i,function(d,p){if(!p){ka.splice(ka.indexOf(e),1),e=null,u(d);return}var v=e.getAttribute("id");v&&p.setAttribute("id",v);var g=e.getAttribute("title");g&&p.setAttribute("title",g);var y=e.getAttribute("width");y&&p.setAttribute("width",y);var x=e.getAttribute("height");x&&p.setAttribute("height",x);var w=Array.from(new Set(dn(dn(dn([],(p.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();p.setAttribute("class",w);var _=e.getAttribute("style");_&&p.setAttribute("style",_),p.setAttribute("data-src",c);var S=[].filter.call(e.attributes,function(G){return/^data-\w[\w-]*$/.test(G.name)});if(Array.prototype.forEach.call(S,function(G){G.name&&G.value&&p.setAttribute(G.name,G.value)}),r){var C={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},R,T,O,D,N;Object.keys(C).forEach(function(G){R=G,O=C[G],T=p.querySelectorAll(R+"[id]");for(var Y=function(fe,he){D=T[fe].id,N=D+"-"+hP();var be;Array.prototype.forEach.call(O,function(Ye){be=p.querySelectorAll("["+Ye+'*="'+D+'"]');for(var bt=0,St=be.length;bt<St;bt++){var yt=be[bt].getAttribute(Ye);yt&&!yt.match(new RegExp('url\\("?#'+D+'"?\\)'))||be[bt].setAttribute(Ye,"url(#"+N+")")}});for(var ye=p.querySelectorAll("[*|href]"),Be=[],xe=0,Oe=ye.length;xe<Oe;xe++){var je=ye[xe].getAttributeNS(Py,"href");je&&je.toString()==="#"+T[fe].id&&Be.push(ye[xe])}for(var Ve=0,$e=Be.length;Ve<$e;Ve++)Be[Ve].setAttributeNS(Py,"href","#"+N);T[fe].id=N},F=0,K=T.length;F<K;F++)Y(F)})}p.removeAttribute("xmlns:a");for(var k=p.querySelectorAll("script"),I=[],B,U,ee=0,te=k.length;ee<te;ee++)U=k[ee].getAttribute("type"),(!U||U==="application/ecmascript"||U==="application/javascript"||U==="text/javascript")&&(B=k[ee].innerText||k[ee].textContent,B&&I.push(B),p.removeChild(k[ee]));if(I.length>0&&(t==="always"||t==="once"&&!E2[c])){for(var re=0,q=I.length;re<q;re++)new Function(I[re])(window);E2[c]=!0}var Z=p.querySelectorAll("style");if(Array.prototype.forEach.call(Z,function(G){G.textContent+=""}),p.setAttribute("xmlns",dP),p.setAttribute("xmlns:xlink",Py),o(p),!e.parentNode){ka.splice(ka.indexOf(e),1),e=null,u(new Error("Parent node is null"));return}e.parentNode.replaceChild(p,e),ka.splice(ka.indexOf(e),1),e=null,u(null,p)})},pP=function(e,t){var r=t===void 0?{}:t,a=r.afterAll,i=a===void 0?function(){}:a,o=r.afterEach,u=o===void 0?function(){}:o,c=r.beforeEach,f=c===void 0?function(){}:c,d=r.cacheRequests,p=d===void 0?!0:d,v=r.evalScripts,g=v===void 0?"never":v,y=r.httpRequestWithCredentials,x=y===void 0?!1:y,w=r.renumerateIRIElements,_=w===void 0?!0:w;if(e&&"length"in e)for(var S=0,C=0,R=e.length;C<R;C++)S2(e[C],g,_,p,x,f,function(T,O){u(T,O),e&&"length"in e&&e.length===++S&&i(S)});else e?S2(e,g,_,p,x,f,function(T,O){u(T,O),i(1),e=null}):i(0)},Ly={exports:{}},By,C2;function vP(){if(C2)return By;C2=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return By=n,By}var zy,R2;function mP(){if(R2)return zy;R2=1;var n=vP();function e(){}function t(){}return t.resetWarningCache=e,zy=function(){function r(o,u,c,f,d,p){if(p!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},zy}var T2;function gP(){return T2||(T2=1,Ly.exports=mP()()),Ly.exports}var cn=gP(),yP=function(e){var t=(e==null?void 0:e.ownerDocument)||document;return t.defaultView||window},bP=function(e,t){for(var r in e)if(!(r in t))return!0;for(var a in t)if(e[a]!==t[a])return!0;return!1},xP=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],np="http://www.w3.org/2000/svg",O2="http://www.w3.org/1999/xlink",bO=function(n){function e(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=n.call.apply(n,[this].concat(i))||this,r.initialState={hasError:!1,isLoading:!0},r.state=r.initialState,r._isMounted=!1,r.reactWrapper=void 0,r.nonReactWrapper=void 0,r.refCallback=function(u){r.reactWrapper=u},r}iP(e,n);var t=e.prototype;return t.renderSVG=function(){var a=this;if(this.reactWrapper instanceof yP(this.reactWrapper).Node){var i=this.props,o=i.desc,u=i.evalScripts,c=i.httpRequestWithCredentials,f=i.renumerateIRIElements,d=i.src,p=i.title,v=i.useRequestCache,g=this.props.onError,y=this.props.beforeInjection,x=this.props.afterInjection,w=this.props.wrapper,_,S;w==="svg"?(_=document.createElementNS(np,w),_.setAttribute("xmlns",np),_.setAttribute("xmlns:xlink",O2),S=document.createElementNS(np,w)):(_=document.createElement(w),S=document.createElement(w)),_.appendChild(S),S.dataset.src=d,this.nonReactWrapper=this.reactWrapper.appendChild(_);var C=function(D){if(a.removeSVG(),!a._isMounted){g(D);return}a.setState(function(){return{hasError:!0,isLoading:!1}},function(){g(D)})},R=function(D,N){if(D){C(D);return}a._isMounted&&a.setState(function(){return{isLoading:!1}},function(){try{x(N)}catch(k){C(k)}})},T=function(D){if(D.setAttribute("role","img"),o){var N=D.querySelector(":scope > desc");N&&D.removeChild(N);var k=document.createElement("desc");k.innerHTML=o,D.prepend(k)}if(p){var I=D.querySelector(":scope > title");I&&D.removeChild(I);var B=document.createElement("title");B.innerHTML=p,D.prepend(B)}try{y(D)}catch(U){C(U)}};pP(S,{afterEach:R,beforeEach:T,cacheRequests:v,evalScripts:u,httpRequestWithCredentials:c,renumerateIRIElements:f})}},t.removeSVG=function(){var a;(a=this.nonReactWrapper)!=null&&a.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},t.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},t.componentDidUpdate=function(a){var i=this;bP(Qp({},a),this.props)&&this.setState(function(){return i.initialState},function(){i.removeSVG(),i.renderSVG()})},t.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},t.render=function(){var a=this.props;a.afterInjection,a.beforeInjection,a.desc,a.evalScripts;var i=a.fallback;a.httpRequestWithCredentials;var o=a.loading;a.renumerateIRIElements,a.src,a.title,a.useRequestCache;var u=a.wrapper,c=aP(a,xP),f=u;return J.createElement(f,Qp({},c,{ref:this.refCallback},u==="svg"?{xmlns:np,xmlnsXlink:O2}:{}),this.state.isLoading&&o&&J.createElement(o,null),this.state.hasError&&i&&J.createElement(i,null))},e}(J.Component);bO.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};bO.propTypes={afterInjection:cn.func,beforeInjection:cn.func,desc:cn.string,evalScripts:cn.oneOf(["always","once","never"]),fallback:cn.oneOfType([cn.func,cn.object,cn.string]),httpRequestWithCredentials:cn.bool,loading:cn.oneOfType([cn.func,cn.object,cn.string]),onError:cn.func,renumerateIRIElements:cn.bool,src:cn.string.isRequired,title:cn.string,useRequestCache:cn.bool,wrapper:cn.oneOf(["div","span","svg"])};const Ke=n=>typeof n=="string",vf=()=>{let n,e;const t=new Promise((r,a)=>{n=r,e=a});return t.resolve=n,t.reject=e,t},A2=n=>n==null?"":""+n,wP=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},_P=/###/g,k2=n=>n&&n.indexOf("###")>-1?n.replace(_P,"."):n,D2=n=>!n||Ke(n),If=(n,e,t)=>{const r=Ke(e)?e.split("."):e;let a=0;for(;a<r.length-1;){if(D2(n))return{};const i=k2(r[a]);!n[i]&&t&&(n[i]=new t),Object.prototype.hasOwnProperty.call(n,i)?n=n[i]:n={},++a}return D2(n)?{}:{obj:n,k:k2(r[a])}},N2=(n,e,t)=>{const{obj:r,k:a}=If(n,e,Object);if(r!==void 0||e.length===1){r[a]=t;return}let i=e[e.length-1],o=e.slice(0,e.length-1),u=If(n,o,Object);for(;u.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),u=If(n,o,Object),u!=null&&u.obj&&typeof u.obj[`${u.k}.${i}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${i}`]=t},EP=(n,e,t,r)=>{const{obj:a,k:i}=If(n,e,Object);a[i]=a[i]||[],a[i].push(t)},$p=(n,e)=>{const{obj:t,k:r}=If(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},SP=(n,e,t)=>{const r=$p(n,t);return r!==void 0?r:$p(e,t)},xO=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Ke(n[r])||n[r]instanceof String||Ke(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):xO(n[r],e[r],t):n[r]=e[r]);return n},Qu=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var CP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const RP=n=>Ke(n)?n.replace(/[&<>"'\/]/g,e=>CP[e]):n;class TP{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const OP=[" ",",","?","!",";"],AP=new TP(20),kP=(n,e,t)=>{e=e||"",t=t||"";const r=OP.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(r.length===0)return!0;const a=AP.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(n);if(!i){const o=n.indexOf(t);o>0&&!a.test(n.substring(0,o))&&(i=!0)}return i},sb=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let a=n;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,u="";for(let c=i;c<r.length;++c)if(c!==i&&(u+=t),u+=r[c],o=a[u],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;i+=c-i+1;break}a=o}return a},Kp=n=>n==null?void 0:n.replace("_","-"),DP={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class Xp{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||DP,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,a){return a&&!this.debug?null:(Ke(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Xp(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Xp(this.logger,e)}}var ja=new Xp;class Vv{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(t)||0;this.observers[r].set(t,a+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[u,c]=o;for(let f=0;f<c;f++)u(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[u,c]=o;for(let f=0;f<c;f++)u.apply(u,[e,...r])})}}class I2 extends Vv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var f,d;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],r&&(Array.isArray(r)?u.push(...r):Ke(r)&&i?u.push(...r.split(i)):u.push(r)));const c=$p(this.data,u);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=u[0],t=u[1],r=u.slice(2).join(".")),c||!o||!Ke(r)?c:sb((d=(f=this.data)==null?void 0:f[e])==null?void 0:d[t],r,i)}addResource(e,t,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let u=[e,t];r&&(u=u.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(u=e.split("."),a=t,t=u[1]),this.addNamespaces(t),N2(this.data,u,a),i.silent||this.emit("added",e,t,r,a)}addResources(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(Ke(r[i])||Array.isArray(r[i]))&&this.addResource(e,t,i,r[i],{silent:!0});a.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),a=r,r=t,t=u[1]),this.addNamespaces(t);let c=$p(this.data,u)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?xO(c,r,i):c={...c,...r},N2(this.data,u,c),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(a=>t[a]&&Object.keys(t[a]).length>0)}toJSON(){return this.data}}var wO={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,a){return n.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,t,r,a))??e}),e}};const M2={},F2=n=>!Ke(n)&&typeof n!="boolean"&&typeof n!="number";class Yp extends Vv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),wP(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ja.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!kP(e,r,a);if(o&&!u){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Ke(i)?[i]:i};const f=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(f[0])>-1)&&(i=f.shift()),e=f.join(a)}return{key:e,namespaces:Ke(i)?[i]:i}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:u}=this.extractFromKey(e[e.length-1],t),c=u[u.length-1],f=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode"){if(d){const B=t.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${B}${o}`,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${B}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:o}const p=this.resolve(e,t);let v=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||o,y=(p==null?void 0:p.exactUsedKey)||o,x=["[object Number]","[object Function]","[object RegExp]"],w=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,S=t.count!==void 0&&!Ke(t.count),C=Yp.hasDefaultValue(t),R=S?this.pluralResolver.getSuffix(f,t.count,t):"",T=t.ordinal&&S?this.pluralResolver.getSuffix(f,t.count,{ordinal:!1}):"",O=S&&!t.ordinal&&t.count===0,D=O&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${R}`]||t[`defaultValue${T}`]||t.defaultValue;let N=v;_&&!v&&C&&(N=D);const k=F2(N),I=Object.prototype.toString.apply(N);if(_&&N&&k&&x.indexOf(I)<0&&!(Ke(w)&&Array.isArray(N))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,N,{...t,ns:u}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(p.res=B,p.usedParams=this.getUsedParamsDetails(t),p):B}if(i){const B=Array.isArray(N),U=B?[]:{},ee=B?y:g;for(const te in N)if(Object.prototype.hasOwnProperty.call(N,te)){const re=`${ee}${i}${te}`;C&&!v?U[te]=this.translate(re,{...t,defaultValue:F2(D)?D[te]:void 0,joinArrays:!1,ns:u}):U[te]=this.translate(re,{...t,joinArrays:!1,ns:u}),U[te]===re&&(U[te]=N[te])}v=U}}else if(_&&Ke(w)&&Array.isArray(v))v=v.join(w),v&&(v=this.extendTranslation(v,e,t,r));else{let B=!1,U=!1;!this.isValidLookup(v)&&C&&(B=!0,v=D),this.isValidLookup(v)||(U=!0,v=o);const te=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:v,re=C&&D!==v&&this.options.updateMissing;if(U||B||re){if(this.logger.log(re?"updateKey":"missingKey",f,c,o,re?D:v),i){const Y=this.resolve(o,{...t,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const Z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Z&&Z[0])for(let Y=0;Y<Z.length;Y++)q.push(Z[Y]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(t.lng||this.language):q.push(t.lng||this.language);const G=(Y,F,K)=>{var fe;const se=C&&K!==v?K:te;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,c,F,se,re,t):(fe=this.backendConnector)!=null&&fe.saveMissing&&this.backendConnector.saveMissing(Y,c,F,se,re,t),this.emit("missingKey",Y,c,F,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?q.forEach(Y=>{const F=this.pluralResolver.getSuffixes(Y,t);O&&t[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(K=>{G([Y],o+K,t[`defaultValue${K}`]||D)})}):G(q,o,D))}v=this.extendTranslation(v,e,t,p,r),U&&v===o&&this.options.appendNamespaceToMissingKey&&(v=`${c}:${o}`),(U||B)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,B?v:void 0))}return a?(p.res=v,p.usedParams=this.getUsedParamsDetails(t),p):v}extendTranslation(e,t,r,a,i){var f,d;var o=this;if((f=this.i18nFormat)!=null&&f.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=Ke(e)&&(((d=r==null?void 0:r.interpolation)==null?void 0:d.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(p){const y=e.match(this.interpolator.nestingRegexp);v=y&&y.length}let g=r.replace&&!Ke(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||a.usedLng,r),p){const y=e.match(this.interpolator.nestingRegexp),x=y&&y.length;v<x&&(r.nest=!1)}!r.lng&&a&&a.res&&(r.lng=this.language||a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,x=new Array(y),w=0;w<y;w++)x[w]=arguments[w];return(i==null?void 0:i[0])===x[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${t[0]}`),null):o.translate(...x,t)},r)),r.interpolation&&this.interpolator.reset()}const u=r.postProcess||this.options.postProcess,c=Ke(u)?[u]:u;return e!=null&&(c!=null&&c.length)&&r.applyPostProcessor!==!1&&(e=wO.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,u;return Ke(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(c,t),d=f.key;a=d;let p=f.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const v=t.count!==void 0&&!Ke(t.count),g=v&&!t.ordinal&&t.count===0,y=t.context!==void 0&&(Ke(t.context)||typeof t.context=="number")&&t.context!=="",x=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);p.forEach(w=>{var _,S;this.isValidLookup(r)||(u=w,!M2[`${x[0]}-${w}`]&&((_=this.utils)!=null&&_.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(u))&&(M2[`${x[0]}-${w}`]=!0,this.logger.warn(`key "${a}" for languages "${x.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(C=>{var O;if(this.isValidLookup(r))return;o=C;const R=[d];if((O=this.i18nFormat)!=null&&O.addLookupKeys)this.i18nFormat.addLookupKeys(R,d,C,w,t);else{let D;v&&(D=this.pluralResolver.getSuffix(C,t.count,t));const N=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(R.push(d+D),t.ordinal&&D.indexOf(k)===0&&R.push(d+D.replace(k,this.options.pluralSeparator)),g&&R.push(d+N)),y){const I=`${d}${this.options.contextSeparator}${t.context}`;R.push(I),v&&(R.push(I+D),t.ordinal&&D.indexOf(k)===0&&R.push(I+D.replace(k,this.options.pluralSeparator)),g&&R.push(I+N))}}let T;for(;T=R.pop();)this.isValidLookup(r)||(i=T,r=this.getResource(C,w,T,t))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var i;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,t,r,a):this.resourceStore.getResource(e,t,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ke(e.replace);let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of t)delete a[i]}return a}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class P2{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ja.create("languageUtils")}getScriptPartFromCode(e){if(e=Kp(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Kp(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ke(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(t=a)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(i=>{if(i===a)return i;if(!(i.indexOf("-")<0&&a.indexOf("-")<0)&&(i.indexOf("-")>0&&a.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===a||i.indexOf(a)===0&&a.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ke(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ke(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):Ke(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}const L2={zero:0,one:1,two:2,few:3,many:4,other:5},B2={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class NP{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=ja.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Kp(e==="dev"?"en":e),a=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),B2;if(!e.match(/-|_/))return B2;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[i]=o,o}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${t}${a}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((a,i)=>L2[a]-L2[i]).map(a=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const z2=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=SP(n,e,t);return!i&&a&&Ke(t)&&(i=sb(n,t,r),i===void 0&&(i=sb(e,t,r))),i},Uy=n=>n.replace(/\$/g,"$$$$");class IP{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ja.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:a,prefix:i,prefixEscaped:o,suffix:u,suffixEscaped:c,formatSeparator:f,unescapeSuffix:d,unescapePrefix:p,nestingPrefix:v,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:x,nestingOptionsSeparator:w,maxReplaces:_,alwaysFormat:S}=e.interpolation;this.escape=t!==void 0?t:RP,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Qu(i):o||"{{",this.suffix=u?Qu(u):c||"}}",this.formatSeparator=f||",",this.unescapePrefix=d?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=v?Qu(v):g||Qu("$t("),this.nestingSuffix=y?Qu(y):x||Qu(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=_||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,a){var g;let i,o,u;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=y=>{if(y.indexOf(this.formatSeparator)<0){const S=z2(t,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...a,...t,interpolationkey:y}):S}const x=y.split(this.formatSeparator),w=x.shift().trim(),_=x.join(this.formatSeparator).trim();return this.format(z2(t,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...a,...t,interpolationkey:w})};this.resetRegExp();const d=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((g=a==null?void 0:a.interpolation)==null?void 0:g.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>Uy(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?Uy(this.escape(y)):Uy(y)}].forEach(y=>{for(u=0;i=y.regex.exec(e);){const x=i[1].trim();if(o=f(x),o===void 0)if(typeof d=="function"){const _=d(e,i,a);o=Ke(_)?_:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!Ke(o)&&!this.useRawValueToEscape&&(o=A2(o));const w=y.safeValue(o);if(e=e.replace(i[0],w),p?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=i[0].length):y.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;const u=(c,f)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const p=c.split(new RegExp(`${d}[ ]*{`));let v=`{${p[1]}`;c=p[0],v=this.interpolate(v,o);const g=v.match(/'/g),y=v.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!y||y.length%2!==0)&&(v=v.replace(/'/g,'"'));try{o=JSON.parse(v),f&&(o={...f,...o})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${d}${v}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;a=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!Ke(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let f=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const d=a[1].split(this.formatSeparator).map(p=>p.trim());a[1]=d.shift(),c=d,f=!0}if(i=t(u.call(this,a[1].trim(),o),o),i&&a[0]===e&&!Ke(i))return i;Ke(i)||(i=A2(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),f&&(i=c.reduce((d,p)=>this.format(d,p,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const MP=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?t.currency||(t.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?t.range||(t.range=a.trim()):a.split(";").forEach(o=>{if(o){const[u,...c]=o.split(":"),f=c.join(":").trim().replace(/^'+|'+$/g,""),d=u.trim();t[d]||(t[d]=f),f==="false"&&(t[d]=!1),f==="true"&&(t[d]=!0),isNaN(f)||(t[d]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},$u=n=>{const e={};return(t,r,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const o=r+JSON.stringify(i);let u=e[o];return u||(u=n(Kp(r),a),e[o]=u),u(t)}};class FP{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ja.create("formatter"),this.options=e,this.formats={number:$u((t,r)=>{const a=new Intl.NumberFormat(t,{...r});return i=>a.format(i)}),currency:$u((t,r)=>{const a=new Intl.NumberFormat(t,{...r,style:"currency"});return i=>a.format(i)}),datetime:$u((t,r)=>{const a=new Intl.DateTimeFormat(t,{...r});return i=>a.format(i)}),relativetime:$u((t,r)=>{const a=new Intl.RelativeTimeFormat(t,{...r});return i=>a.format(i,r.range||"day")}),list:$u((t,r)=>{const a=new Intl.ListFormat(t,{...r});return i=>a.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=$u(t)}format(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(u=>u.indexOf(")")>-1)){const u=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,u)].join(this.formatSeparator)}return i.reduce((u,c)=>{var p;const{formatName:f,formatOptions:d}=MP(c);if(this.formats[f]){let v=u;try{const g=((p=a==null?void 0:a.formatParams)==null?void 0:p[a.interpolationkey])||{},y=g.locale||g.lng||a.locale||a.lng||r;v=this.formats[f](u,y,{...d,...a,...g})}catch(g){this.logger.warn(g)}return v}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const PP=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class LP extends Vv{constructor(e,t,r){var i,o;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=ja.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,a.backend,a)}queueLoad(e,t,r,a){const i={},o={},u={},c={};return e.forEach(f=>{let d=!0;t.forEach(p=>{const v=`${f}|${p}`;!r.reload&&this.store.hasResourceBundle(f,p)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?o[v]===void 0&&(o[v]=!0):(this.state[v]=1,d=!1,o[v]===void 0&&(o[v]=!0),i[v]===void 0&&(i[v]=!0),c[p]===void 0&&(c[p]=!0)))}),d||(u[f]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const a=e.split("|"),i=a[0],o=a[1];t&&this.emit("failedLoading",i,o,t),!t&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const u={};this.queue.forEach(c=>{EP(c.loaded,[i],o),PP(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(f=>{u[f]||(u[f]={});const d=c.loaded[f];d.length&&d.forEach(p=>{u[f][p]===void 0&&(u[f][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const u=(f,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(f&&d&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,a+1,i*2,o)},i);return}o(f,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const f=c(e,t);f&&typeof f.then=="function"?f.then(d=>u(null,d)).catch(u):u(null,f)}catch(f){u(f)}return}return c(e,t,u)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Ke(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ke(t)&&(t=[t]);const i=this.queueLoad(e,t,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,u)=>{o&&this.logger.warn(`${t}loading namespace ${i} for language ${a} failed`,o),!o&&u&&this.logger.log(`${t}loaded namespace ${i} for language ${a}`,u),this.loaded(e,o,u)})}saveMissing(e,t,r,a,i){var c,f,d,p,v;let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((f=(c=this.services)==null?void 0:c.utils)!=null&&f.hasLoadedNamespace&&!((p=(d=this.services)==null?void 0:d.utils)!=null&&p.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const g={...o,isUpdate:i},y=this.backend.create.bind(this.backend);if(y.length<6)try{let x;y.length===5?x=y(e,t,r,a,g):x=y(e,t,r,a),x&&typeof x.then=="function"?x.then(w=>u(null,w)).catch(u):u(null,x)}catch(x){u(x)}else y(e,t,r,a,u,g)}!e||!e[0]||this.store.addResource(e[0],t,r,a)}}}const U2=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Ke(n[1])&&(e.defaultValue=n[1]),Ke(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),V2=n=>{var e,t;return Ke(n.ns)&&(n.ns=[n.ns]),Ke(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Ke(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},rp=()=>{},BP=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Hf extends Vv{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=V2(e),this.services={},this.logger=ja,this.modules={external:[]},BP(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Ke(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=U2();this.options={...a,...this.options,...V2(t)},this.options.interpolation={...a.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?ja.init(i(this.modules.logger),this.options):ja.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=FP;const p=new P2(this.options);this.store=new I2(this.options.resources,this.options);const v=this.services;v.logger=ja,v.resourceStore=this.store,v.languageUtils=p,v.pluralResolver=new NP(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(v.formatter=i(d),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new IP(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new LP(i(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(g){for(var y=arguments.length,x=new Array(y>1?y-1:0),w=1;w<y;w++)x[w-1]=arguments[w];e.emit(g,...x)}),this.modules.languageDetector&&(v.languageDetector=i(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=i(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Yp(this.services,this.options),this.translator.on("*",function(g){for(var y=arguments.length,x=new Array(y>1?y-1:0),w=1;w<y;w++)x[w-1]=arguments[w];e.emit(g,...x)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=rp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=vf(),f=()=>{const d=(p,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(v),r(p,v)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),c}loadResources(e){var i,o;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rp;const a=Ke(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const u=[],c=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(p=>{p!=="cimode"&&u.indexOf(p)<0&&u.push(p)})};a?c(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,f=>c(f)),this.services.backendConnector.load(u,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(f)})}else r(null)}reloadResources(e,t,r){const a=vf();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=rp),this.services.backendConnector.reload(e,t,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&wO.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const a=vf();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,f)=>{f?(i(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),t&&t(c,function(){return r.t(...arguments)})},u=c=>{var d,p;!e&&!c&&this.services.languageDetector&&(c=[]);const f=Ke(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);f&&(this.language||i(f),this.translator.language||this.translator.changeLanguage(f),(p=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||p.call(d,f)),this.loadResources(f,v=>{o(v,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(e),a}getFixedT(e,t,r){var a=this;const i=function(o,u){let c;if(typeof u!="object"){for(var f=arguments.length,d=new Array(f>2?f-2:0),p=2;p<f;p++)d[p-2]=arguments[p];c=a.options.overloadTranslationOptionHandler([o,u].concat(d))}else c={...u};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const v=a.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(o)?g=o.map(y=>`${c.keyPrefix}${v}${y}`):g=c.keyPrefix?`${c.keyPrefix}${v}${o}`:o,a.t(g,c)};return Ke(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(){var a;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(a=this.translator)==null?void 0:a.translate(...t)}exists(){var a;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(a=this.translator)==null?void 0:a.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(u,c)=>{const f=this.services.backendConnector.state[`${u}|${c}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,o);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,t){const r=vf();return this.options.ns?(Ke(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=vf();Ke(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),t&&t(o)}),r):(t&&t(),Promise.resolve())}dir(e){var a,i;if(e||(e=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new P2(U2());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Hf(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rp;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new Hf(a);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(u=>{i[u]=this[u]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const u=Object.keys(this.store.data).reduce((c,f)=>(c[f]={...this.store.data[f]},Object.keys(c[f]).reduce((d,p)=>(d[p]={...c[f][p]},d),{})),{});i.store=new I2(u,a),i.services.resourceStore=i.store}return i.translator=new Yp(i.services,a),i.translator.on("*",function(u){for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];i.emit(u,...f)}),i.init(a,t),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ir=Hf.createInstance();ir.createInstance=Hf.createInstance;ir.createInstance;ir.dir;ir.init;ir.loadResources;ir.reloadResources;ir.use;ir.changeLanguage;ir.getFixedT;ir.t;ir.exists;ir.setDefaultNamespace;ir.hasLoadedNamespace;ir.loadNamespaces;ir.loadLanguages;const j2=n=>{let e;const t=new Set,r=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const v=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(g=>g(e,v))}},a=()=>e,u={setState:r,getState:a,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(r,a,u);return u},zP=n=>n?j2(n):j2,UP=n=>n;function VP(n,e=UP){const t=pr.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return pr.useDebugValue(t),t}const jP=n=>{const e=zP(n),t=r=>VP(e,r);return Object.assign(t,e),t},M9=n=>jP;function qP(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),u=(i=t.getItem(a))!=null?i:null;return u instanceof Promise?u.then(o):o(u)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>t.removeItem(a)}}const ub=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return ub(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return ub(r)(t)}}}},WP=(n,e)=>(t,r,a)=>{let i={storage:qP(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},o=!1;const u=new Set,c=new Set;let f=i.storage;if(!f)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...x)},r,a);const d=()=>{const x=i.partialize({...r()});return f.setItem(i.name,{state:x,version:i.version})},p=a.setState;a.setState=(x,w)=>{p(x,w),d()};const v=n((...x)=>{t(...x),d()},r,a);a.getInitialState=()=>v;let g;const y=()=>{var x,w;if(!f)return;o=!1,u.forEach(S=>{var C;return S((C=r())!=null?C:v)});const _=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(x=r())!=null?x:v))||void 0;return ub(f.getItem.bind(f))(i.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==i.version){if(i.migrate){const C=i.migrate(S.state,S.version);return C instanceof Promise?C.then(R=>[!0,R]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var C;const[R,T]=S;if(g=i.merge(T,(C=r())!=null?C:v),t(g,!0),R)return d()}).then(()=>{_==null||_(g,void 0),g=r(),o=!0,c.forEach(S=>S(g))}).catch(S=>{_==null||_(void 0,S)})};return a.persist={setOptions:x=>{i={...i,...x},x.storage&&(f=x.storage)},clearStorage:()=>{f==null||f.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:x=>(u.add(x),()=>{u.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||y(),g||v},F9=WP;var mt;(function(n){n.assertEqual=a=>a;function e(a){}n.assertIs=e;function t(a){throw new Error}n.assertNever=t,n.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},n.getValidEnumValues=a=>{const i=n.objectKeys(a).filter(u=>typeof a[a[u]]!="number"),o={};for(const u of i)o[u]=a[u];return n.objectValues(o)},n.objectValues=a=>n.objectKeys(a).map(function(i){return a[i]}),n.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},n.find=(a,i)=>{for(const o of a)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(mt||(mt={}));var lb;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(lb||(lb={}));const Re=mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ai=n=>{switch(typeof n){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return isNaN(n)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(n)?Re.array:n===null?Re.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Re.promise:typeof Map<"u"&&n instanceof Map?Re.map:typeof Set<"u"&&n instanceof Set?Re.set:typeof Date<"u"&&n instanceof Date?Re.date:Re.object;default:return Re.unknown}},ge=mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),HP=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Dr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let u=r,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(t(o))):u[f]=u[f]||{_errors:[]},u=u[f],c++}}};return a(this),r}static assert(e){if(!(e instanceof Dr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Dr.create=n=>new Dr(n);const Gl=(n,e)=>{let t;switch(n.code){case ge.invalid_type:n.received===Re.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ge.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,mt.jsonStringifyReplacer)}`;break;case ge.unrecognized_keys:t=`Unrecognized key(s) in object: ${mt.joinValues(n.keys,", ")}`;break;case ge.invalid_union:t="Invalid input";break;case ge.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${mt.joinValues(n.options)}`;break;case ge.invalid_enum_value:t=`Invalid enum value. Expected ${mt.joinValues(n.options)}, received '${n.received}'`;break;case ge.invalid_arguments:t="Invalid function arguments";break;case ge.invalid_return_type:t="Invalid function return type";break;case ge.invalid_date:t="Invalid date";break;case ge.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:mt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ge.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ge.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ge.custom:t="Invalid input";break;case ge.invalid_intersection_types:t="Intersection results could not be merged";break;case ge.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ge.not_finite:t="Number must be finite";break;default:t=e.defaultError,mt.assertNever(n)}return{message:t}};let _O=Gl;function GP(n){_O=n}function Zp(){return _O}const Jp=n=>{const{data:e,path:t,errorMaps:r,issueData:a}=n,i=[...t,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let u="";const c=r.filter(f=>!!f).slice().reverse();for(const f of c)u=f(o,{data:e,defaultError:u}).message;return{...a,path:i,message:u}},QP=[];function _e(n,e){const t=Zp(),r=Jp({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Gl?void 0:Gl].filter(a=>!!a)});n.common.issues.push(r)}class Kn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const a of t){if(a.status==="aborted")return Ge;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const a of t){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Kn.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const a of t){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Ge;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ge=Object.freeze({status:"aborted"}),ul=n=>({status:"dirty",value:n}),rr=n=>({status:"valid",value:n}),cb=n=>n.status==="aborted",fb=n=>n.status==="dirty",Xs=n=>n.status==="valid",Gf=n=>typeof Promise<"u"&&n instanceof Promise;function ev(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function EO(n,e,t,r,a){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var Me;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));var Tf,Of;class Ka{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const q2=(n,e)=>{if(Xs(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Dr(n.common.issues);return this._error=t,this._error}}};function et(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:a}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,u)=>{var c,f;const{message:d}=n;return o.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:u.defaultError}:o.code!=="invalid_type"?{message:u.defaultError}:{message:(f=d??t)!==null&&f!==void 0?f:u.defaultError}},description:a}}class it{get description(){return this._def.description}_getType(e){return Ai(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kn,ctx:{common:e.parent.common,data:e.data,parsedType:Ai(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Gf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const a={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)},i=this._parseSync({data:e,path:a.path,parent:a});return q2(a,i)}"~validate"(e){var t,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:a});return Xs(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(t=i==null?void 0:i.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(i=>Xs(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ai(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Gf(a)?a:Promise.resolve(a));return q2(r,i)}refine(e,t){const r=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const o=e(a),u=()=>i.addIssue({code:ge.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(e,t){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof t=="function"?t(r,a):t),!1))}_refinement(e){return new ba({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Wa.create(this,this._def)}nullable(){return Ho.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ma.create(this)}promise(){return $l.create(this,this._def)}or(e){return Xf.create([this,e],this._def)}and(e){return Yf.create(this,e,this._def)}transform(e){return new ba({...et(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new nh({...et(this._def),innerType:this,defaultValue:t,typeName:He.ZodDefault})}brand(){return new Sx({typeName:He.ZodBranded,type:this,...et(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new rh({...et(this._def),innerType:this,catchValue:t,typeName:He.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ch.create(this,e)}readonly(){return ah.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $P=/^c[^\s-]{8,}$/i,KP=/^[0-9a-z]+$/,XP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ZP=/^[a-z0-9_-]{21}$/i,JP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Vy;const rL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,iL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,oL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,uL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,SO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",lL=new RegExp(`^${SO}$`);function CO(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function cL(n){return new RegExp(`^${CO(n)}$`)}function RO(n){let e=`${SO}T${CO(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function fL(n,e){return!!((e==="v4"||!e)&&rL.test(n)||(e==="v6"||!e)&&iL.test(n))}function hL(n,e){if(!JP.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function dL(n,e){return!!((e==="v4"||!e)&&aL.test(n)||(e==="v6"||!e)&&oL.test(n))}class ha extends it{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_type,expected:Re.string,received:i.parsedType}),Ge}const r=new Kn;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,u=e.data.length<i.value;(o||u)&&(a=this._getOrReturnCtx(e,a),o?_e(a,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&_e(a,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")tL.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"email",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Vy||(Vy=new RegExp(nL,"u")),Vy.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"emoji",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")YP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"uuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")ZP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"nanoid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")$P.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"cuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")KP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"cuid2",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")XP.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"ulid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),_e(a,{validation:"url",code:ge.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"regex",code:ge.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?RO(i).test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?lL.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?cL(i).test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?eL.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"duration",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?fL(e.data,i.version)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"ip",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?hL(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"jwt",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?dL(e.data,i.version)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"cidr",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?sL.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"base64",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?uL.test(e.data)||(a=this._getOrReturnCtx(e,a),_e(a,{validation:"base64url",code:ge.invalid_string,message:i.message}),r.dirty()):mt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(a=>e.test(a),{validation:t,code:ge.invalid_string,...Me.errToObj(r)})}_addCheck(e){return new ha({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Me.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Me.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Me.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Me.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Me.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Me.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Me.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Me.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Me.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Me.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Me.errToObj(t)})}nonempty(e){return this.min(1,Me.errToObj(e))}trim(){return new ha({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ha({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ha({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ha.create=n=>{var e;return new ha({checks:[],typeName:He.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...et(n)})};function pL(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=t>r?t:r,i=parseInt(n.toFixed(a).replace(".","")),o=parseInt(e.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class jo extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_type,expected:Re.number,received:i.parsedType}),Ge}let r;const a=new Kn;for(const i of this._def.checks)i.kind==="int"?mt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?pL(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.not_finite,message:i.message}),a.dirty()):mt.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Me.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Me.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Me.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Me.toString(t))}setLimit(e,t,r,a){return new jo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Me.toString(a)}]})}_addCheck(e){return new jo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Me.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&mt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}jo.create=n=>new jo({checks:[],typeName:He.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...et(n)});class qo extends it{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Re.bigint)return this._getInvalidInput(e);let r;const a=new Kn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),_e(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):mt.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return _e(t,{code:ge.invalid_type,expected:Re.bigint,received:t.parsedType}),Ge}gte(e,t){return this.setLimit("min",e,!0,Me.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Me.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Me.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Me.toString(t))}setLimit(e,t,r,a){return new qo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Me.toString(a)}]})}_addCheck(e){return new qo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}qo.create=n=>{var e;return new qo({checks:[],typeName:He.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...et(n)})};class Qf extends it{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.boolean,received:r.parsedType}),Ge}return rr(e.data)}}Qf.create=n=>new Qf({typeName:He.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...et(n)});class Ys extends it{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_type,expected:Re.date,received:i.parsedType}),Ge}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return _e(i,{code:ge.invalid_date}),Ge}const r=new Kn;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),_e(a,{code:ge.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):mt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ys({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ys.create=n=>new Ys({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:He.ZodDate,...et(n)});class tv extends it{_parse(e){if(this._getType(e)!==Re.symbol){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.symbol,received:r.parsedType}),Ge}return rr(e.data)}}tv.create=n=>new tv({typeName:He.ZodSymbol,...et(n)});class $f extends it{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.undefined,received:r.parsedType}),Ge}return rr(e.data)}}$f.create=n=>new $f({typeName:He.ZodUndefined,...et(n)});class Kf extends it{_parse(e){if(this._getType(e)!==Re.null){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.null,received:r.parsedType}),Ge}return rr(e.data)}}Kf.create=n=>new Kf({typeName:He.ZodNull,...et(n)});class Ql extends it{constructor(){super(...arguments),this._any=!0}_parse(e){return rr(e.data)}}Ql.create=n=>new Ql({typeName:He.ZodAny,...et(n)});class Hs extends it{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rr(e.data)}}Hs.create=n=>new Hs({typeName:He.ZodUnknown,...et(n)});class Pi extends it{_parse(e){const t=this._getOrReturnCtx(e);return _e(t,{code:ge.invalid_type,expected:Re.never,received:t.parsedType}),Ge}}Pi.create=n=>new Pi({typeName:He.ZodNever,...et(n)});class nv extends it{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.void,received:r.parsedType}),Ge}return rr(e.data)}}nv.create=n=>new nv({typeName:He.ZodVoid,...et(n)});class ma extends it{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==Re.array)return _e(t,{code:ge.invalid_type,expected:Re.array,received:t.parsedType}),Ge;if(a.exactLength!==null){const o=t.data.length>a.exactLength.value,u=t.data.length<a.exactLength.value;(o||u)&&(_e(t,{code:o?ge.too_big:ge.too_small,minimum:u?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(_e(t,{code:ge.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(_e(t,{code:ge.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,u)=>a.type._parseAsync(new Ka(t,o,t.path,u)))).then(o=>Kn.mergeArray(r,o));const i=[...t.data].map((o,u)=>a.type._parseSync(new Ka(t,o,t.path,u)));return Kn.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new ma({...this._def,minLength:{value:e,message:Me.toString(t)}})}max(e,t){return new ma({...this._def,maxLength:{value:e,message:Me.toString(t)}})}length(e,t){return new ma({...this._def,exactLength:{value:e,message:Me.toString(t)}})}nonempty(e){return this.min(1,e)}}ma.create=(n,e)=>new ma({type:n,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...et(e)});function el(n){if(n instanceof Vt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Wa.create(el(r))}return new Vt({...n._def,shape:()=>e})}else return n instanceof ma?new ma({...n._def,type:el(n.element)}):n instanceof Wa?Wa.create(el(n.unwrap())):n instanceof Ho?Ho.create(el(n.unwrap())):n instanceof Xa?Xa.create(n.items.map(e=>el(e))):n}class Vt extends it{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=mt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Re.object){const f=this._getOrReturnCtx(e);return _e(f,{code:ge.invalid_type,expected:Re.object,received:f.parsedType}),Ge}const{status:r,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof Pi&&this._def.unknownKeys==="strip"))for(const f in a.data)o.includes(f)||u.push(f);const c=[];for(const f of o){const d=i[f],p=a.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Ka(a,p,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof Pi){const f=this._def.unknownKeys;if(f==="passthrough")for(const d of u)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(f==="strict")u.length>0&&(_e(a,{code:ge.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const d of u){const p=a.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Ka(a,p,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const f=[];for(const d of c){const p=await d.key,v=await d.value;f.push({key:p,value:v,alwaysSet:d.alwaysSet})}return f}).then(f=>Kn.mergeObjectSync(r,f)):Kn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new Vt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,i,o,u;const c=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(u=Me.errToObj(e).message)!==null&&u!==void 0?u:c}:{message:c}}}:{}})}strip(){return new Vt({...this._def,unknownKeys:"strip"})}passthrough(){return new Vt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Vt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Vt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Vt({...this._def,catchall:e})}pick(e){const t={};return mt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new Vt({...this._def,shape:()=>t})}omit(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new Vt({...this._def,shape:()=>t})}deepPartial(){return el(this)}partial(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}),new Vt({...this._def,shape:()=>t})}required(e){const t={};return mt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Wa;)i=i._def.innerType;t[r]=i}}),new Vt({...this._def,shape:()=>t})}keyof(){return TO(mt.objectKeys(this.shape))}}Vt.create=(n,e)=>new Vt({shape:()=>n,unknownKeys:"strip",catchall:Pi.create(),typeName:He.ZodObject,...et(e)});Vt.strictCreate=(n,e)=>new Vt({shape:()=>n,unknownKeys:"strict",catchall:Pi.create(),typeName:He.ZodObject,...et(e)});Vt.lazycreate=(n,e)=>new Vt({shape:n,unknownKeys:"strip",catchall:Pi.create(),typeName:He.ZodObject,...et(e)});class Xf extends it{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function a(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const o=i.map(u=>new Dr(u.ctx.common.issues));return _e(t,{code:ge.invalid_union,unionErrors:o}),Ge}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of r){const f={...t,common:{...t.common,issues:[]},parent:null},d=c._parseSync({data:t.data,path:t.path,parent:f});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const u=o.map(c=>new Dr(c));return _e(t,{code:ge.invalid_union,unionErrors:u}),Ge}}get options(){return this._def.options}}Xf.create=(n,e)=>new Xf({options:n,typeName:He.ZodUnion,...et(e)});const Ri=n=>n instanceof Jf?Ri(n.schema):n instanceof ba?Ri(n.innerType()):n instanceof eh?[n.value]:n instanceof Wo?n.options:n instanceof th?mt.objectValues(n.enum):n instanceof nh?Ri(n._def.innerType):n instanceof $f?[void 0]:n instanceof Kf?[null]:n instanceof Wa?[void 0,...Ri(n.unwrap())]:n instanceof Ho?[null,...Ri(n.unwrap())]:n instanceof Sx||n instanceof ah?Ri(n.unwrap()):n instanceof rh?Ri(n._def.innerType):[];class jv extends it{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.object)return _e(t,{code:ge.invalid_type,expected:Re.object,received:t.parsedType}),Ge;const r=this.discriminator,a=t.data[r],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(_e(t,{code:ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const a=new Map;for(const i of t){const o=Ri(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of o){if(a.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);a.set(u,i)}}return new jv({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...et(r)})}}function hb(n,e){const t=Ai(n),r=Ai(e);if(n===e)return{valid:!0,data:n};if(t===Re.object&&r===Re.object){const a=mt.objectKeys(e),i=mt.objectKeys(n).filter(u=>a.indexOf(u)!==-1),o={...n,...e};for(const u of i){const c=hb(n[u],e[u]);if(!c.valid)return{valid:!1};o[u]=c.data}return{valid:!0,data:o}}else if(t===Re.array&&r===Re.array){if(n.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<n.length;i++){const o=n[i],u=e[i],c=hb(o,u);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return t===Re.date&&r===Re.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Yf extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(i,o)=>{if(cb(i)||cb(o))return Ge;const u=hb(i.value,o.value);return u.valid?((fb(i)||fb(o))&&t.dirty(),{status:t.value,value:u.data}):(_e(r,{code:ge.invalid_intersection_types}),Ge)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Yf.create=(n,e,t)=>new Yf({left:n,right:e,typeName:He.ZodIntersection,...et(t)});class Xa extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.array)return _e(r,{code:ge.invalid_type,expected:Re.array,received:r.parsedType}),Ge;if(r.data.length<this._def.items.length)return _e(r,{code:ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ge;!this._def.rest&&r.data.length>this._def.items.length&&(_e(r,{code:ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,u)=>{const c=this._def.items[u]||this._def.rest;return c?c._parse(new Ka(r,o,r.path,u)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Kn.mergeArray(t,o)):Kn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Xa({...this._def,rest:e})}}Xa.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xa({items:n,typeName:He.ZodTuple,rest:null,...et(e)})};class Zf extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.object)return _e(r,{code:ge.invalid_type,expected:Re.object,received:r.parsedType}),Ge;const a=[],i=this._def.keyType,o=this._def.valueType;for(const u in r.data)a.push({key:i._parse(new Ka(r,u,r.path,u)),value:o._parse(new Ka(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Kn.mergeObjectAsync(t,a):Kn.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof it?new Zf({keyType:e,valueType:t,typeName:He.ZodRecord,...et(r)}):new Zf({keyType:ha.create(),valueType:e,typeName:He.ZodRecord,...et(t)})}}class rv extends it{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.map)return _e(r,{code:ge.invalid_type,expected:Re.map,received:r.parsedType}),Ge;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([u,c],f)=>({key:a._parse(new Ka(r,u,r.path,[f,"key"])),value:i._parse(new Ka(r,c,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const c of o){const f=await c.key,d=await c.value;if(f.status==="aborted"||d.status==="aborted")return Ge;(f.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(f.value,d.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const c of o){const f=c.key,d=c.value;if(f.status==="aborted"||d.status==="aborted")return Ge;(f.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(f.value,d.value)}return{status:t.value,value:u}}}}rv.create=(n,e,t)=>new rv({valueType:e,keyType:n,typeName:He.ZodMap,...et(t)});class Zs extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.set)return _e(r,{code:ge.invalid_type,expected:Re.set,received:r.parsedType}),Ge;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(_e(r,{code:ge.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(_e(r,{code:ge.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const f=new Set;for(const d of c){if(d.status==="aborted")return Ge;d.status==="dirty"&&t.dirty(),f.add(d.value)}return{status:t.value,value:f}}const u=[...r.data.values()].map((c,f)=>i._parse(new Ka(r,c,r.path,f)));return r.common.async?Promise.all(u).then(c=>o(c)):o(u)}min(e,t){return new Zs({...this._def,minSize:{value:e,message:Me.toString(t)}})}max(e,t){return new Zs({...this._def,maxSize:{value:e,message:Me.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Zs.create=(n,e)=>new Zs({valueType:n,minSize:null,maxSize:null,typeName:He.ZodSet,...et(e)});class pl extends it{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.function)return _e(t,{code:ge.invalid_type,expected:Re.function,received:t.parsedType}),Ge;function r(u,c){return Jp({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zp(),Gl].filter(f=>!!f),issueData:{code:ge.invalid_arguments,argumentsError:c}})}function a(u,c){return Jp({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zp(),Gl].filter(f=>!!f),issueData:{code:ge.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof $l){const u=this;return rr(async function(...c){const f=new Dr([]),d=await u._def.args.parseAsync(c,i).catch(g=>{throw f.addIssue(r(c,g)),f}),p=await Reflect.apply(o,this,d);return await u._def.returns._def.type.parseAsync(p,i).catch(g=>{throw f.addIssue(a(p,g)),f})})}else{const u=this;return rr(function(...c){const f=u._def.args.safeParse(c,i);if(!f.success)throw new Dr([r(c,f.error)]);const d=Reflect.apply(o,this,f.data),p=u._def.returns.safeParse(d,i);if(!p.success)throw new Dr([a(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new pl({...this._def,args:Xa.create(e).rest(Hs.create())})}returns(e){return new pl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new pl({args:e||Xa.create([]).rest(Hs.create()),returns:t||Hs.create(),typeName:He.ZodFunction,...et(r)})}}class Jf extends it{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Jf.create=(n,e)=>new Jf({getter:n,typeName:He.ZodLazy,...et(e)});class eh extends it{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return _e(t,{received:t.data,code:ge.invalid_literal,expected:this._def.value}),Ge}return{status:"valid",value:e.data}}get value(){return this._def.value}}eh.create=(n,e)=>new eh({value:n,typeName:He.ZodLiteral,...et(e)});function TO(n,e){return new Wo({values:n,typeName:He.ZodEnum,...et(e)})}class Wo extends it{constructor(){super(...arguments),Tf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return _e(t,{expected:mt.joinValues(r),received:t.parsedType,code:ge.invalid_type}),Ge}if(ev(this,Tf)||EO(this,Tf,new Set(this._def.values)),!ev(this,Tf).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return _e(t,{received:t.data,code:ge.invalid_enum_value,options:r}),Ge}return rr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Wo.create(e,{...this._def,...t})}exclude(e,t=this._def){return Wo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Tf=new WeakMap;Wo.create=TO;class th extends it{constructor(){super(...arguments),Of.set(this,void 0)}_parse(e){const t=mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Re.string&&r.parsedType!==Re.number){const a=mt.objectValues(t);return _e(r,{expected:mt.joinValues(a),received:r.parsedType,code:ge.invalid_type}),Ge}if(ev(this,Of)||EO(this,Of,new Set(mt.getValidEnumValues(this._def.values))),!ev(this,Of).has(e.data)){const a=mt.objectValues(t);return _e(r,{received:r.data,code:ge.invalid_enum_value,options:a}),Ge}return rr(e.data)}get enum(){return this._def.values}}Of=new WeakMap;th.create=(n,e)=>new th({values:n,typeName:He.ZodNativeEnum,...et(e)});class $l extends it{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.promise&&t.common.async===!1)return _e(t,{code:ge.invalid_type,expected:Re.promise,received:t.parsedType}),Ge;const r=t.parsedType===Re.promise?t.data:Promise.resolve(t.data);return rr(r.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}$l.create=(n,e)=>new $l({type:n,typeName:He.ZodPromise,...et(e)});class ba extends it{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{_e(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async u=>{if(t.value==="aborted")return Ge;const c=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return c.status==="aborted"?Ge:c.status==="dirty"||t.value==="dirty"?ul(c.value):c});{if(t.value==="aborted")return Ge;const u=this._def.schema._parseSync({data:o,path:r.path,parent:r});return u.status==="aborted"?Ge:u.status==="dirty"||t.value==="dirty"?ul(u.value):u}}if(a.type==="refinement"){const o=u=>{const c=a.refinement(u,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?Ge:(u.status==="dirty"&&t.dirty(),o(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?Ge:(u.status==="dirty"&&t.dirty(),o(u.value).then(()=>({status:t.value,value:u.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xs(o))return o;const u=a.transform(o.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Xs(o)?Promise.resolve(a.transform(o.value,i)).then(u=>({status:t.value,value:u})):o);mt.assertNever(a)}}ba.create=(n,e,t)=>new ba({schema:n,typeName:He.ZodEffects,effect:e,...et(t)});ba.createWithPreprocess=(n,e,t)=>new ba({schema:e,effect:{type:"preprocess",transform:n},typeName:He.ZodEffects,...et(t)});class Wa extends it{_parse(e){return this._getType(e)===Re.undefined?rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wa.create=(n,e)=>new Wa({innerType:n,typeName:He.ZodOptional,...et(e)});class Ho extends it{_parse(e){return this._getType(e)===Re.null?rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ho.create=(n,e)=>new Ho({innerType:n,typeName:He.ZodNullable,...et(e)});class nh extends it{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}nh.create=(n,e)=>new nh({innerType:n,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...et(e)});class rh extends it{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gf(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dr(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Dr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rh.create=(n,e)=>new rh({innerType:n,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...et(e)});class av extends it{_parse(e){if(this._getType(e)!==Re.nan){const r=this._getOrReturnCtx(e);return _e(r,{code:ge.invalid_type,expected:Re.nan,received:r.parsedType}),Ge}return{status:"valid",value:e.data}}}av.create=n=>new av({typeName:He.ZodNaN,...et(n)});const vL=Symbol("zod_brand");class Sx extends it{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ch extends it{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ge:i.status==="dirty"?(t.dirty(),ul(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ge:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,t){return new Ch({in:e,out:t,typeName:He.ZodPipeline})}}class ah extends it{_parse(e){const t=this._def.innerType._parse(e),r=a=>(Xs(a)&&(a.value=Object.freeze(a.value)),a);return Gf(t)?t.then(a=>r(a)):r(t)}unwrap(){return this._def.innerType}}ah.create=(n,e)=>new ah({innerType:n,typeName:He.ZodReadonly,...et(e)});function W2(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function OO(n,e={},t){return n?Ql.create().superRefine((r,a)=>{var i,o;const u=n(r);if(u instanceof Promise)return u.then(c=>{var f,d;if(!c){const p=W2(e,r),v=(d=(f=p.fatal)!==null&&f!==void 0?f:t)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...p,fatal:v})}});if(!u){const c=W2(e,r),f=(o=(i=c.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...c,fatal:f})}}):Ql.create()}const mL={object:Vt.lazycreate};var He;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(He||(He={}));const gL=(n,e={message:`Input not instance of ${n.name}`})=>OO(t=>t instanceof n,e),AO=ha.create,kO=jo.create,yL=av.create,bL=qo.create,DO=Qf.create,xL=Ys.create,wL=tv.create,_L=$f.create,EL=Kf.create,SL=Ql.create,CL=Hs.create,RL=Pi.create,TL=nv.create,OL=ma.create,AL=Vt.create,kL=Vt.strictCreate,DL=Xf.create,NL=jv.create,IL=Yf.create,ML=Xa.create,FL=Zf.create,PL=rv.create,LL=Zs.create,BL=pl.create,zL=Jf.create,UL=eh.create,VL=Wo.create,jL=th.create,qL=$l.create,H2=ba.create,WL=Wa.create,HL=Ho.create,GL=ba.createWithPreprocess,QL=Ch.create,$L=()=>AO().optional(),KL=()=>kO().optional(),XL=()=>DO().optional(),YL={string:n=>ha.create({...n,coerce:!0}),number:n=>jo.create({...n,coerce:!0}),boolean:n=>Qf.create({...n,coerce:!0}),bigint:n=>qo.create({...n,coerce:!0}),date:n=>Ys.create({...n,coerce:!0})},ZL=Ge;var P9=Object.freeze({__proto__:null,defaultErrorMap:Gl,setErrorMap:GP,getErrorMap:Zp,makeIssue:Jp,EMPTY_PATH:QP,addIssueToContext:_e,ParseStatus:Kn,INVALID:Ge,DIRTY:ul,OK:rr,isAborted:cb,isDirty:fb,isValid:Xs,isAsync:Gf,get util(){return mt},get objectUtil(){return lb},ZodParsedType:Re,getParsedType:Ai,ZodType:it,datetimeRegex:RO,ZodString:ha,ZodNumber:jo,ZodBigInt:qo,ZodBoolean:Qf,ZodDate:Ys,ZodSymbol:tv,ZodUndefined:$f,ZodNull:Kf,ZodAny:Ql,ZodUnknown:Hs,ZodNever:Pi,ZodVoid:nv,ZodArray:ma,ZodObject:Vt,ZodUnion:Xf,ZodDiscriminatedUnion:jv,ZodIntersection:Yf,ZodTuple:Xa,ZodRecord:Zf,ZodMap:rv,ZodSet:Zs,ZodFunction:pl,ZodLazy:Jf,ZodLiteral:eh,ZodEnum:Wo,ZodNativeEnum:th,ZodPromise:$l,ZodEffects:ba,ZodTransformer:ba,ZodOptional:Wa,ZodNullable:Ho,ZodDefault:nh,ZodCatch:rh,ZodNaN:av,BRAND:vL,ZodBranded:Sx,ZodPipeline:Ch,ZodReadonly:ah,custom:OO,Schema:it,ZodSchema:it,late:mL,get ZodFirstPartyTypeKind(){return He},coerce:YL,any:SL,array:OL,bigint:bL,boolean:DO,date:xL,discriminatedUnion:NL,effect:H2,enum:VL,function:BL,instanceof:gL,intersection:IL,lazy:zL,literal:UL,map:PL,nan:yL,nativeEnum:jL,never:RL,null:EL,nullable:HL,number:kO,object:AL,oboolean:XL,onumber:KL,optional:WL,ostring:$L,pipeline:QL,preprocess:GL,promise:qL,record:FL,set:LL,strictObject:kL,string:AO,symbol:wL,transformer:H2,tuple:ML,undefined:_L,union:DL,unknown:CL,void:TL,NEVER:ZL,ZodIssueCode:ge,quotelessJson:HP,ZodError:Dr});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var NO=function(n,e){return(NO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])})(n,e)};function wa(n,e){function t(){this.constructor=n}NO(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ke(n,e,t,r){return new(t||(t=Promise))(function(a,i){function o(f){try{c(r.next(f))}catch(d){i(d)}}function u(f){try{c(r.throw(f))}catch(d){i(d)}}function c(f){f.done?a(f.value):new t(function(d){d(f.value)}).then(o,u)}c((r=r.apply(n,[])).next())})}function De(n,e){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(c){return function(f){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&d[0]?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,r=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=e.call(n,o)}catch(p){d=[6,p],r=0}finally{t=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,f])}}}var JL=function(){function n(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},n.prototype.registerFlag=function(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){var a=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+a+"."),this.set(e,a)}},n.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},n.prototype.getNumber=function(e){return this.get(e)},n.prototype.getBool=function(e){return this.get(e)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},n.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},n.prototype.setFlags=function(e){this.flags=Object.assign({},e)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,a=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return eB(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),u=o[0],c=o[1];e.urlFlags[u]=function(f,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+f+".")}(u,c)})}},n}();function eB(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function ue(){return IO}var IO=null,iv=new Map,db=new Map;function MO(n,e){var t=PO(n,e);return iv.get(t)}function tB(n){return db.get(n)}function G2(n){for(var e=iv.entries(),t=[];;){var r=e.next(),a=r.done,i=r.value;if(a)break;var o=i[0],u=i[1];o.split("_")[0]===n&&t.push(u)}return t}function FO(n){var e=n.kernelName,t=n.backendName,r=PO(e,t);if(iv.has(r))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");iv.set(r,n)}function nB(n){var e=n.kernelName;db.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),db.set(e,n)}function PO(n,e){return e+"_"+n}function pb(n,e,t){return Math.max(n,Math.min(e,t))}function LO(n){return n%2==0?n:n+1}function rB(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e}function L(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Ot(n,e,t){t===void 0&&(t=""),L(On(n,e),function(){return t+" Shapes "+n+" and "+e+" must match"})}function sc(n){L(n!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Kl(n,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(n)||Ha(n)&&!t)for(var r=0;r<n.length;++r)Kl(n[r],e,t);else e.push(n);return e}function Ie(n){if(n.length===0)return 1;for(var e=n[0],t=1;t<n.length;t++)e*=n[t];return e}function On(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function en(n){return n%1==0}function aB(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var e=Math.exp(2*n);return(e-1)/(e+1)}function vb(n){var e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function vl(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function Q2(n,e,t){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,a){var i=0,o=function(){if(n())r();else{i++;var u=e(i);t!=null&&i>=t?a():setTimeout(o,u)}};o()})}function iB(n,e){for(var t=1,r=-1,a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(n[a]<0)throw Error("Shapes can not be < 0. Found "+n[a]+" at dim "+a);if(r===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+n);return n}if(t===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var i=n.slice();return i[r]=e/t,i}function yn(n,e){var t=e.length;return L((n=n==null?e.map(function(r,a){return a}):[].concat(n)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+n}),L(n.every(function(r){return en(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?t+r:r})}function Os(n,e){for(var t=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:yn(e,n).sort(),o=0,u=0;u<n.length;++u){if(i!=null){if(i[o]===u&&n[u]!==1)throw new Error("Can't squeeze axis "+u+" since its dim '"+n[u]+"' is not 1");(i[o]==null||i[o]>u)&&n[u]===1&&(t.push(n[u]),r.push(u)),i[o]<=u&&o++}n[u]!==1&&(t.push(n[u]),r.push(u))}return{newShape:t,keptDims:r}}function ih(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);t=new Uint8Array(e)}return t}function ov(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else{if(n!=="string")throw new Error("Unknown data type "+n);t=new Array(e)}return t}function oB(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function sB(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function uB(n,e){return e!=="complex64"&&(e!=="float32"||n==="complex64")&&(e!=="int32"||n==="float32"||n==="complex64")&&(e!=="bool"||n!=="bool")}function Ha(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function BO(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function lB(n){if(n==null)return 0;var e=0;return n.forEach(function(t){return e+=t.length}),e}function Cx(n){return typeof n=="string"||n instanceof String}function cB(n){return typeof n=="boolean"}function fB(n){return typeof n=="number"}function Rh(n){return Array.isArray(n)?Rh(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":fB(n)?"float32":Cx(n)?"string":cB(n)?"bool":"float32"}function mb(n){return!!(n&&n.constructor&&n.call&&n.apply)}function gb(n,e){for(var t=e;t<n;++t)if(n%t==0)return t;return n}function Ga(n){var e=n.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=n[e-1];for(var r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function zO(n,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Kl(n)),t&&oB(n,e),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){for(var r=new Uint8Array(n.length),a=0;a<r.length;++a)Math.round(n[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+e)}function $2(n,e){if(n.length===0)return e[0];var t=n.reduce(function(r,a){return r*a});if(t===0)return[];if(t!==e.length)throw new Error("["+n+"] does not match the input size.");return function r(a,i,o){var u=new Array;if(i.length===1)for(var c=i[0],f=0;f<c;f++)u[f]=o[a+f];else{c=i[0];var d=i.slice(1),p=d.reduce(function(v,g){return v*g});for(f=0;f<c;f++)u[f]=r(a+f*p,d,o)}return u}(0,n,e)}function UO(n,e){for(var t=Th(n,e),r=0;r<t.length;r++)t[r]=1;return t}function Th(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+e)}function Ba(){return ue().platform.now()}function VO(n){n.forEach(function(e){L(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function hB(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ue().platform.encode(n,e)}function sv(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ue().platform.decode(n,e)}function K2(n,e,t){if(e===0)return 0;if(e===1)return n[0];for(var r=n[n.length-1],a=0;a<n.length-1;++a)r+=t[a]*n[a];return r}function dB(n,e,t){if(e===0)return[];if(e===1)return[n];for(var r=new Array(e),a=0;a<r.length-1;++a)r[a]=Math.floor(n/t[a]),n-=r[a]*t[a];return r[r.length-1]=n,r}var pB=function(){function n(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new vB)}return n.prototype.profileKernel=function(e,t,r){var a,i=this,o=this.backendTimer.time(function(){a=r()});return a.forEach(function(u){u.data().then(function(c){(function(f,d,p){if(d!=="float32")return!1;for(var v=0;v<f.length;v++){var g=f[v];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+p+"'"),!0}})(c,u.dtype,e),o.then(function(f){var d="";f.getExtraProfileInfo!=null&&(d=f.getExtraProfileInfo()),i.logger.logKernelProfile(e,u,c,f.kernelMs,t,d)})})}),a},n}(),vB=function(){function n(){}return n.prototype.logKernelProfile=function(e,t,r,a,i,o){var u=typeof a=="number"?vl(a+"ms",9):a.error,c=vl(e,25),f=t.rank,d=t.size,p=vl(t.shape.toString(),14),v="";for(var g in i){var y=i[g].shape||t.shape,x=y.length;v+=g+": "+x+"D "+(x>0?y:"")+" "}console.log("%c"+c+"	%c"+u+"	%c"+f+"D "+p+"	%c"+d+"	%c"+v+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}(),X2=20,mf=3,jy=7;function mB(n,e,t,r){var a=Ga(e),i=function(f,d,p,v){var g=Ie(d),y=v[v.length-1],x=new Array(y).fill(0),w=d.length,_=p==="complex64"?yf(f):f;if(w>1)for(var S=0;S<g/y;S++)for(var C=S*y,R=0;R<y;R++)x[R]=Math.max(x[R],gf(_[C+R],0,p).length);return x}(n,e,t,a),o=e.length,u=function f(d,p,v,g,y,x){x===void 0&&(x=!0);var w=v==="complex64"?2:1,_=p[0],S=p.length;if(S===0)return v==="complex64"?[gf(yf(d)[0],0,v)]:v==="bool"?[jO(d[0])]:[d[0].toString()];if(S===1){if(_>X2){var C=mf*w,R=Array.from(d.slice(0,C)),T=Array.from(d.slice((_-mf)*w,_*w));return v==="complex64"&&(R=yf(R),T=yf(T)),["["+R.map(function(re,q){return gf(re,y[q],v)}).join(", ")+", ..., "+T.map(function(re,q){return gf(re,y[_-mf+q],v)}).join(", ")+"]"]}return["["+(v==="complex64"?yf(d):Array.from(d)).map(function(re,q){return gf(re,y[q],v)}).join(", ")+"]"]}var O=p.slice(1),D=g.slice(1),N=g[0]*w,k=[];if(_>X2){for(var I=0;I<mf;I++){var B=(U=I*N)+N;k.push.apply(k,f(d.slice(U,B),O,v,D,y,!1))}for(k.push("..."),I=_-mf;I<_;I++)B=(U=I*N)+N,k.push.apply(k,f(d.slice(U,B),O,v,D,y,I===_-1))}else for(I=0;I<_;I++){var U;B=(U=I*N)+N,k.push.apply(k,f(d.slice(U,B),O,v,D,y,I===_-1))}var ee=S===2?",":"";for(k[0]="["+k[0]+ee,I=1;I<k.length-1;I++)k[I]=" "+k[I]+ee;var te=`,
`;for(I=2;I<S;I++)te+=`
`;return k[k.length-1]=" "+k[k.length-1]+"]"+(x?"":te),k}(n,e,t,a,i),c=["Tensor"];return r&&(c.push("  dtype: "+t),c.push("  rank: "+o),c.push("  shape: ["+e+"]"),c.push("  values:")),c.push(u.map(function(f){return"    "+f}).join(`
`)),c.join(`
`)}function gf(n,e,t){return vl(Array.isArray(n)?parseFloat(n[0].toFixed(jy))+" + "+parseFloat(n[1].toFixed(jy))+"j":Cx(n)?"'"+n+"'":t==="bool"?jO(n):parseFloat(n.toFixed(jy)).toString(),e)}function jO(n){return n===0?"false":"true"}function yf(n){for(var e=[],t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}var oh=function(){function n(e,t,r){var a=this;if(this.dtype=t,this.shape=e.slice(),this.size=Ie(e),r!=null){var i=r.length;L(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ov(t,this.size),this.strides=Ga(e)}return n.prototype.set=function(e){for(var t=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),L(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var i=this.locToIndex(r);this.values[i]=e},n.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var r=0,a=0,i=e;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var u="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(u)}r++}for(var c=e[e.length-1],f=0;f<e.length-1;++f)c+=this.strides[f]*e[f];return this.values[c]},n.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},n.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return Ua().makeTensor(this.values,this.shape,this.dtype)},n}(),Ua=null,oe=null,qO=null,jt=function(){function n(e,t,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Ie(e),this.strides=Ga(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),L(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},n.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},n.prototype.as4D=function(e,t,r,a){return this.throwIfDisposed(),this.reshape([e,t,r,a])},n.prototype.as5D=function(e,t,r,a,i){return this.throwIfDisposed(),this.reshape([e,t,r,a,i])},n.prototype.asType=function(e){return this.throwIfDisposed(),oe.cast(this,e)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,oe.buffer(this.shape,this.dtype,e)]}})})},n.prototype.bufferSync=function(){return oe.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,$2(this.shape,e)]}})})},n.prototype.arraySync=function(){return $2(this.shape,this.dataSync())},n.prototype.data=function(){return ke(this,void 0,void 0,function(){var e,t;return De(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Ua().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=r.sent();try{return[2,t.map(function(a){return sv(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var e=Ua().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(t){return sv(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},n.prototype.bytes=function(){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Ua().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(Ua().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(e){return e===void 0&&(e=!1),oe.print(this,e)},n.prototype.reshape=function(e){return this.throwIfDisposed(),oe.reshape(this,e)},n.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},n.prototype.expandDims=function(e){return e===void 0&&(e=0),oe.expandDims(this,e)},n.prototype.cumsum=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1),oe.cumsum(this,e,t,r)},n.prototype.squeeze=function(e){return this.throwIfDisposed(),oe.squeeze(this,e)},n.prototype.clone=function(){return this.throwIfDisposed(),oe.clone(this)},n.prototype.oneHot=function(e,t,r){return this.throwIfDisposed(),oe.oneHot(this,e,t,r)},n.prototype.toString=function(e){return e===void 0&&(e=!1),mB(this.dataSync(),this.shape,this.dtype,e)},n.prototype.tile=function(e){return this.throwIfDisposed(),oe.tile(this,e)},n.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),oe.gather(this,e,t)},n.prototype.matMul=function(e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),oe.matMul(this,e,t,r)},n.prototype.dot=function(e){return this.throwIfDisposed(),oe.dot(this,e)},n.prototype.norm=function(e,t,r){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),oe.norm(this,e,t,r)},n.prototype.slice=function(e,t){return this.throwIfDisposed(),oe.slice(this,e,t)},n.prototype.reverse=function(e){return this.throwIfDisposed(),oe.reverse(this,e)},n.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof n&&(e=[e]),oe.concat([this].concat(e),t)},n.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),oe.split(this,e,t)},n.prototype.stack=function(e,t){return t===void 0&&(t=0),oe.stack([this,e],t)},n.prototype.unstack=function(e){return e===void 0&&(e=0),oe.unstack(this,e)},n.prototype.pad=function(e,t){return t===void 0&&(t=0),oe.pad(this,e,t)},n.prototype.batchNormalization=function(e,t,r,a,i){return r===void 0&&(r=.001),qO("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,a,r)},n.prototype.batchNorm=function(e,t,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),oe.batchNorm(this,e,t,r,a,i)},n.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.all(this,e,t)},n.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.any(this,e,t)},n.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.logSumExp(this,e,t)},n.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.sum(this,e,t)},n.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.prod(this,e,t)},n.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.mean(this,e,t)},n.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.min(this,e,t)},n.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),oe.max(this,e,t)},n.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),oe.argMin(this,e)},n.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),oe.argMax(this,e)},n.prototype.cast=function(e){return this.throwIfDisposed(),oe.cast(this,e)},n.prototype.add=function(e){return this.throwIfDisposed(),oe.add(this,e)},n.prototype.addStrict=function(e){return this.throwIfDisposed(),oe.addStrict(this,e)},n.prototype.atan2=function(e){return this.throwIfDisposed(),oe.atan2(this,e)},n.prototype.sub=function(e){return this.throwIfDisposed(),oe.sub(this,e)},n.prototype.subStrict=function(e){return this.throwIfDisposed(),oe.subStrict(this,e)},n.prototype.pow=function(e){return this.throwIfDisposed(),oe.pow(this,e)},n.prototype.powStrict=function(e){return this.throwIfDisposed(),oe.powStrict(this,e)},n.prototype.mul=function(e){return this.throwIfDisposed(),oe.mul(this,e)},n.prototype.mulStrict=function(e){return this.throwIfDisposed(),oe.mulStrict(this,e)},n.prototype.div=function(e){return this.throwIfDisposed(),oe.div(this,e)},n.prototype.divNoNan=function(e){return this.throwIfDisposed(),oe.divNoNan(this,e)},n.prototype.floorDiv=function(e){return this.throwIfDisposed(),oe.floorDiv(this,e)},n.prototype.divStrict=function(e){return this.throwIfDisposed(),oe.divStrict(this,e)},n.prototype.minimum=function(e){return this.throwIfDisposed(),oe.minimum(this,e)},n.prototype.minimumStrict=function(e){return this.throwIfDisposed(),oe.minimumStrict(this,e)},n.prototype.maximum=function(e){return this.throwIfDisposed(),oe.maximum(this,e)},n.prototype.maximumStrict=function(e){return this.throwIfDisposed(),oe.maximumStrict(this,e)},n.prototype.mod=function(e){return this.throwIfDisposed(),oe.mod(this,e)},n.prototype.modStrict=function(e){return this.throwIfDisposed(),oe.modStrict(this,e)},n.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),oe.squaredDifferenceStrict(this,e)},n.prototype.transpose=function(e){return this.throwIfDisposed(),oe.transpose(this,e)},n.prototype.notEqual=function(e){return this.throwIfDisposed(),oe.notEqual(this,e)},n.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),oe.notEqualStrict(this,e)},n.prototype.less=function(e){return this.throwIfDisposed(),oe.less(this,e)},n.prototype.lessStrict=function(e){return this.throwIfDisposed(),oe.lessStrict(this,e)},n.prototype.equal=function(e){return this.throwIfDisposed(),oe.equal(this,e)},n.prototype.equalStrict=function(e){return this.throwIfDisposed(),oe.equalStrict(this,e)},n.prototype.lessEqual=function(e){return this.throwIfDisposed(),oe.lessEqual(this,e)},n.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),oe.lessEqualStrict(this,e)},n.prototype.greater=function(e){return this.throwIfDisposed(),oe.greater(this,e)},n.prototype.greaterStrict=function(e){return this.throwIfDisposed(),oe.greaterStrict(this,e)},n.prototype.greaterEqual=function(e){return this.throwIfDisposed(),oe.greaterEqual(this,e)},n.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),oe.greaterEqualStrict(this,e)},n.prototype.logicalAnd=function(e){return this.throwIfDisposed(),oe.logicalAnd(this,e)},n.prototype.logicalOr=function(e){return this.throwIfDisposed(),oe.logicalOr(this,e)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),oe.logicalNot(this)},n.prototype.logicalXor=function(e){return this.throwIfDisposed(),oe.logicalXor(this,e)},n.prototype.where=function(e,t){return this.throwIfDisposed(),oe.where(e,this,t)},n.prototype.neg=function(){return this.throwIfDisposed(),oe.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),oe.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),oe.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),oe.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),oe.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),oe.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),oe.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),oe.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),oe.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),oe.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),oe.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),oe.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),oe.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),oe.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),oe.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),oe.abs(this)},n.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),oe.clipByValue(this,e,t)},n.prototype.relu=function(){return this.throwIfDisposed(),oe.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),oe.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),oe.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),oe.selu(this)},n.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),oe.leakyRelu(this,e)},n.prototype.prelu=function(e){return this.throwIfDisposed(),oe.prelu(this,e)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),oe.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),oe.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),oe.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),oe.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),oe.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),oe.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),oe.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),oe.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),oe.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),oe.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),oe.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),oe.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),oe.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),oe.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),oe.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),oe.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),oe.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),oe.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),oe.round(this)},n.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),oe.step(this,e)},n.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),oe.softmax(this,e)},n.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),oe.logSoftmax(this,e)},n.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),oe.image.resizeBilinear(this,e,t)},n.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),oe.image.resizeNearestNeighbor(this,e,t)},n.prototype.conv1d=function(e,t,r,a,i,o){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),oe.conv1d(this,e,t,r,a,i,o)},n.prototype.conv2d=function(e,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),oe.conv2d(this,e,t,r,a,i,o)},n.prototype.conv2dTranspose=function(e,t,r,a,i){return this.throwIfDisposed(),oe.conv2dTranspose(this,e,t,r,a,i)},n.prototype.depthwiseConv2D=function(e,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),oe.depthwiseConv2d(this,e,t,r,a,i,o)},n.prototype.separableConv2d=function(e,t,r,a,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),oe.separableConv2d(this,e,t,r,a,i,o)},n.prototype.avgPool=function(e,t,r,a){return this.throwIfDisposed(),oe.avgPool(this,e,t,r,a)},n.prototype.maxPool=function(e,t,r,a){return this.throwIfDisposed(),oe.maxPool(this,e,t,r,a)},n.prototype.localResponseNormalization=function(e,t,r,a){return e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5),oe.localResponseNormalization(this,e,t,r,a)},n.prototype.pool=function(e,t,r,a,i){return this.throwIfDisposed(),oe.pool(this,e,t,r,a,i)},n.prototype.variable=function(e,t,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Ua().makeVariable(this,e,t,r)},n.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),oe.unsortedSegmentSum(this,e,t)},n.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),oe.batchToSpaceND(this,e,t)},n.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),oe.spaceToBatchND(this,e,t)},n.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),oe.topk(this,e,t)},n.prototype.stridedSlice=function(e,t,r,a,i,o,u,c){return a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),this.throwIfDisposed(),oe.stridedSlice(this,e,t,r,a,i,o,u,c)},n.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),oe.depthToSpace(this,e,t)},n.prototype.fft=function(){return this.throwIfDisposed(),oe.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),oe.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),oe.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),oe.spectral.irfft(this)},n}();Object.defineProperty(jt,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var Y2,yb,bb,xb,wb,Xl=function(n){function e(t,r,a,i){var o=n.call(this,t.shape,t.dtype,t.dataId,i)||this;return o.trainable=r,o.name=a,o}return wa(e,n),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!On(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");Ua().disposeTensor(this),this.dataId=t.dataId,Ua().incRef(this,null)},e.prototype.dispose=function(){Ua().disposeVariable(this),this.isDisposedInternal=!0},e}(jt);Object.defineProperty(Xl,Symbol.hasInstance,{value:function(n){return n instanceof jt&&n.assign!=null&&n.assign instanceof Function}}),function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"}(Y2||(Y2={})),function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(yb||(yb={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(bb||(bb={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(xb||(xb={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(wb||(wb={}));var gB={float32:xb,int32:yb,bool:bb,complex64:wb};function Bn(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error("Can not upcast "+n+" with "+e)}return gB[n][e]}function qy(n){return Bn(n,"int32")}function Ht(n,e){if(n.dtype===e.dtype)return[n,e];var t=Bn(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function yB(n,e){L(n.dtype===e.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+e.dtype+") input must match"})}function WO(n){var e=[];return function t(r,a,i){if(r!=null){if(r instanceof jt)return void a.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,u=r;for(var c in u){var f=u[c];i.has(f)||(i.add(f),t(f,a,i))}}}}(n,e,new Set),e}var Wy,Z2=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},n}(),bB=function(){function n(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Z2}return n.prototype.ready=function(){return ke(this,void 0,void 0,function(){var e,t,r;return De(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,a.label=1;case 1:return t<e.length?(r=e[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},n.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},n.prototype.registerBackend=function(e,t,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:r},!0)},n.prototype.setBackend=function(e){return ke(this,void 0,void 0,function(){var t,r,a;return De(this,function(i){switch(i.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new pB(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var e=this;G2(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)})},n.prototype.disposeRegisteredKernels=function(e){var t=this;G2(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[e])})},n.prototype.initializeBackend=function(e){var t=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,o=a.then(function(u){return!(i<t.pendingBackendInitId)&&(t.registry[e]=u,t.pendingBackendInit=null,!0)}).catch(function(u){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(u.stack||u.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=a,{success:!0,asyncInit:!1}}catch(u){return console.warn("Initialization of backend "+e+" failed"),console.warn(u.stack||u.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return e.registryFactory[r].priority-e.registryFactory[t].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var r=e[t],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(e,t){var r=this.state.tensorInfo.get(t),a=r.backend,i=this.readSync(t);a.disposeData(t),r.backend=e,e.move(t,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(e,t){var r,a=this,i=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return a.startScope(i)},function(){return a.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(e,t,r){e();try{var a=r();return t(),a}catch(i){throw t(),i}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],function(a){return{x:function(){return a.toFloat()}}},[]),t},n.prototype.runKernel=function(e,t,r,a,i){return this.runKernelFunc(null,t,null,e,r,a,i)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(e,t,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=a-t-i-o;if(u>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+u+" data ids) after running '"+e+"'")},n.prototype.runKernelFunc=function(e,t,r,a,i,o,u){var c,f=this;o===void 0&&(o=[]),u===void 0&&(u=[]);var d=[],p=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var v,g=function(S){p&&(d=S.map(function(C){return f.keep(f.clone(C))}))},y=this.state.numBytes,x=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,_=MO(a,this.backendName);return v=_!=null?function(){var S=f.backend.numDataIds();w=_.kernelFunc({inputs:t,attrs:i,backend:f.backend});var C=Array.isArray(w)?w:[w];f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,S,C);var R=C.map(function(O){var D=O.dataId,N=O.shape,k=O.dtype;return f.makeTensorFromDataId(D,N,k)}),T=R.filter(function(O,D){return u[D]});return g((o||[]).slice().concat(T)),R}:function(){var S=f.backend.numDataIds();w=f.tidy(function(){return e(f.backend,g)});var C=Array.isArray(w)?w:[w];return f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,S,C),C},this.scopedRun(function(){return f.state.kernelDepth++},function(){return f.state.kernelDepth--},function(){c=f.ENV.getBool("DEBUG")?f.profiler.profileKernel(a,t,function(){return v()}):v()}),p&&this.addTapeNode(a,t,c,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-x,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(S){return t[S].shape}),outputShapes:c.map(function(S){return S.shape})}),Array.isArray(w)?c:c[0]},n.prototype.makeTensor=function(e,t,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=e;r==="string"&&Cx(e[0])&&(i=e.map(function(d){return hB(d)}));var o=a.write(i,t,r),u=new jt(t,r,o,this.nextTensorId());if(this.incRef(u,a),r==="string"){var c=this.state.tensorInfo.get(o),f=lB(i);this.state.numBytes+=f-c.bytes,c.bytes=f}return u},n.prototype.makeTensorFromDataId=function(e,t,r,a){var i=new jt(t,r=r||"float32",e,this.nextTensorId());return this.incRef(i,a),i},n.prototype.makeVariable=function(e,t,r,a){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.asType(a));var i=new Xl(e,t,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},n.prototype.incRef=function(e,t){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(a=e.size*BO(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Xl||this.track(e)},n.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},n.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},n.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},n.prototype.profile=function(e){return ke(this,void 0,void 0,function(){var t,r;return De(this,function(a){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(e,t,r,a,i){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:i},c=tB(e);c!=null&&(a=c.gradFunc),a!=null&&(u.gradient=function(f){return f=f.map(function(d,p){if(d==null){var v=r[p],g=Th(v.size,v.dtype);return o.makeTensor(g,v.shape,v.dtype)}return d}),a(f.length>1?f:f[0],i)}),this.state.activeTape.push(u)},n.prototype.keep=function(e){return e.kept=!0,e},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},n.prototype.endScope=function(e){for(var t=this,r=WO(e),a=new Set(r.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||a.has(o.id)||o.dispose()}var u=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(c){c.kept||c.scopeId!==u.id||t.track(c)})},n.prototype.gradients=function(e,t,r,a){var i=this;if(a===void 0&&(a=!1),L(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)});L(o instanceof jt,function(){return"The result y returned by f() must be a tensor."});var u=function(c,f,d){for(var p={},v={},g=0;g<f.length;g++)p[f[g].id]=!0;for(g=0;g<c.length;g++){var y=(O=c[g]).inputs;for(var x in y){for(var w=y[x],_=!1,S=0;S<f.length;S++)if(p[w.id]){O.outputs.forEach(function(I){return p[I.id]=!0}),_=!0,v[O.id]=!0;break}if(_)break}}var C={};C[d.id]=!0;var R={};for(g=c.length-1;g>=0;g--)for(y=(O=c[g]).inputs,S=0;S<O.outputs.length;S++)if(C[O.outputs[S].id]){for(var x in y)C[y[x].id]=!0,R[O.id]=!0;break}var T=[];for(g=0;g<c.length;g++){var O;if(v[(O=c[g]).id]&&R[O.id]){var D={};for(var x in O.inputs){var N=O.inputs[x];p[N.id]&&(D[x]=N)}var k=Object.assign({},O);k.inputs=D,k.outputs=O.outputs,T.push(k)}}return T}(this.state.activeTape,t,o);if(!a&&u.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,f,d={};d[o.id]=r??(c=o.shape,f=UO(Ie(c),"float32"),W.makeTensor(f,c,"float32")),function(v,g,y){for(var x=function(_){var S=g[_],C=[];if(S.outputs.forEach(function(D){var N=v[D.id];N!=null?C.push(N):C.push(null)}),S.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+S.kernelName+".");var R=S.gradient(C),T=function(D){if(!(D in R))throw new Error("Cannot backprop through input "+D+". Available gradients found: "+Object.keys(R)+".");var N=y(function(){return R[D]()});if(N.dtype!=="float32")throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input "+D+" must have 'float32' dtype, but has '"+N.dtype+"'");var k=S.inputs[D];if(!On(N.shape,k.shape))throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input '"+D+"' has shape '"+N.shape+"', which does not match the shape of the input '"+k.shape+"'");if(v[k.id]==null)v[k.id]=N;else{var I=v[k.id];v[k.id]=I.add(N),I.dispose()}};for(var O in S.inputs)T(O)},w=g.length-1;w>=0;w--)x(w)}(d,u,function(v){return i.tidy(v)});var p=t.map(function(v){return d[v.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(v){for(var g=0,y=v.saved;g<y.length;g++)y[g].dispose()}),i.state.activeTape=null),{value:o,grads:p}})},n.prototype.customGrad=function(e){var t=this;return L(mb(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];L(a.every(function(u){return u instanceof jt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return a.forEach(function(u,c){o[c]=u}),t.runKernelFunc(function(u,c){return L((r=e.apply(void 0,a.concat([c]))).value instanceof jt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),L(mb(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(u,c){var f=r.gradFunc(u,c),d=Array.isArray(f)?f:[f];L(d.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),L(d.every(function(v){return v instanceof jt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return d.forEach(function(v,g){p[g]=function(){return v}}),p})}},n.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},n.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},n.prototype.time=function(e){return ke(this,void 0,void 0,function(){var t,r;return De(this,function(a){switch(a.label){case 0:return t=Ba(),[4,this.backend.time(e)];case 1:return(r=a.sent()).wallMs=Ba()-t,[2,r]}})})},n.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Z2,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),W=function(){var n=function(){if(Wy==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}Wy=t}return Wy}();if(n._tfengine==null){var e=new JL(n);n._tfengine=new bB(e)}return function(t){IO=t}(n._tfengine.ENV),Ua=function(){return n._tfengine},n._tfengine}();function HO(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Si=ue();Si.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Si.registerFlag("IS_BROWSER",function(){return HO()}),Si.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Si.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Si.registerFlag("PROD",function(){return!1}),Si.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Si.getBool("DEBUG")}),Si.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Si.registerFlag("IS_TEST",function(){return!1});var sh,Or,Tr,Cs={},Hy={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function xB(n,e){Cs[n]=e}function ti(n){n in Cs||(Cs[n]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete Cs[t]},!1),t===1?r.getContext("webgl",Hy)||r.getContext("experimental-webgl",Hy):r.getContext("webgl2",Hy)}(n));var e=Cs[n];return e.isContextLost()?(delete Cs[n],ti(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Cs[n])}function qv(n,e){return[e,n]}function Mf(n){var e=Ie(n);return vb(Math.ceil(e/4))}function Oh(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function Rx(n,e){var t,r,a,i,o,u,c,f,d,p=n;return ue().getNumber("WEBGL_VERSION")===2?(t=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,u=4,c=1,f=p.HALF_FLOAT,d=p.FLOAT):(t=n.RGBA,r=n.RGBA,a=n.RGBA,i=p.RGBA,o=n.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=n.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}function Fe(n,e,t){var r=t();return e&&function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+SB(a,i))}(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(sh||(sh={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(Or||(Or={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Tr||(Tr={}));var wB=596e-10,_B=65504;function EB(n){return!!(ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||wB<Math.abs(n)&&Math.abs(n)<_B)}function SB(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function ap(n,e,t){return zi(n,e,function(){return n.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function CB(n,e,t){var r=zi(n,e,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Fe(n,e,function(){return n.shaderSource(r,t)}),Fe(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function RB(n,e,t){var r=zi(n,e,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Fe(n,e,function(){return n.shaderSource(r,t)}),Fe(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw function(a,i){var o=TB.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var u=+o[1],c=a.split(`
`),f=c.length.toString().length+2,d=c.map(function(w,_){return vl((_+1).toString(),f)+w}),p=0,v=0;v<d.length;v++)p=Math.max(d[v].length,p);var g=d.slice(0,u-1),y=d.slice(u-1,u),x=d.slice(u);console.log(g.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+vl(y[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(x.join(`
`))}(t,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Gy,Qy,TB=/ERROR: [0-9]+:([0-9]+):/g;function OB(n,e){return zi(n,e,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function AB(n,e,t){if(Fe(n,e,function(){return n.linkProgram(t)}),n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function $y(n,e,t){if(Fe(n,e,function(){return n.validateProgram(t)}),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function kB(n,e,t){var r=zi(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Fe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),Fe(n,e,function(){return n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function DB(n,e,t){var r=zi(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Fe(n,e,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),Fe(n,e,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function NB(n,e){return zi(n,e,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function IB(n,e){var t=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){var r="["+n+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t)throw r="["+n+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function MB(n,e){return zi(n,e,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function J2(n,e,t,r,a,i,o,u){var c=n.getAttribLocation(t,r);return c!==-1&&(Fe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,a)}),Fe(n,e,function(){return n.vertexAttribPointer(c,i,n.FLOAT,!1,o,u)}),Fe(n,e,function(){return n.enableVertexAttribArray(c)}),!0)}function FB(n,e,t,r){UB(n,r),Fe(n,e,function(){return n.activeTexture(n.TEXTURE0+r)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)})}function PB(n,e,t,r){return zi(n,e,function(){return n.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function LB(n,e,t){return n.getUniformLocation(e,t)}function BB(n,e,t,r,a,i){Fe(n,e,function(){return FB(n,e,r,i)}),Fe(n,e,function(){return n.uniform1i(a,i)})}function Ky(n,e,t,r){Fe(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),Fe(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)})}function eC(n,e,t){Fe(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,t)}),Fe(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function ip(n){var e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+zB(n,e))}function zB(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function zi(n,e,t,r){var a=Fe(n,e,function(){return t()});if(a==null)throw new Error(r);return a}function UB(n,e){var t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function uv(n,e){return e===void 0&&(e=2),Ie(n.slice(0,n.length-e))}function lv(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function Xy(n){var e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[uv(n)].concat(lv(n))),e}function VB(n,e){var t;e===void 0&&(e=!1);var r=ue().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(n=n.map(function(f,d){return d>=n.length-2?LO(n[d]):n[d]})).length===1&&(n=[2,n[0]])),n.length!==2){var a=Os(n);n=a.newShape}var i=Ie(n);if(n.length<=1&&i<=r)return[1,i];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(e){var o=uv(n),u=2,c=2;return n.length&&(u=(t=lv(n))[0],c=t[1]),vb(i=o*(u/2)*(c/2)).map(function(f){return 2*f})}return vb(i)}function op(n){return n%2==0}function sp(n,e){if(On(n=n.slice(-2),e=e.slice(-2))||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){var t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||op(t)&&op(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&op(n[0])&&op(e[0])}function jB(n){if(Gy==null){var e=ti(n);Gy=e.getParameter(e.MAX_TEXTURE_SIZE)}return Gy}function qB(n){if(Qy==null){var e=ti(n);Qy=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Qy)}function WB(n){if(n===0)return 0;var e=ti(n);return Kr(e,"EXT_disjoint_timer_query_webgl2")&&n===2?2:Kr(e,"EXT_disjoint_timer_query")?1:0}function Kr(n,e){return n.getExtension(e)!=null}function tC(n){try{if(ti(n)!=null)return!0}catch{return!1}return!1}function HB(n){if(n===0)return!1;var e=ti(n);if(n===1){if(!Kr(e,"OES_texture_float"))return!1}else if(!Kr(e,"EXT_color_buffer_float"))return!1;return _b(e)}function GB(n){if(n===0)return!1;var e=ti(n);if(n!==1){if(Kr(e,"EXT_color_buffer_float"))return _b(e);if(Kr(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return function(r,a){var i=Rx(r,a),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var u=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,u),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(u),c}(e,t)}return!1}return!!Kr(e,"OES_texture_float")&&!!Kr(e,"WEBGL_color_buffer_float")&&_b(e)}function _b(n){var e=Rx(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(r),a}function QB(n){return n===2&&ti(n).fenceSync!=null}var Qe=ue();function GO(n){ue().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Te(n,e){return W.tidy(n,e)}function vr(n){WO(n).forEach(function(e){return e.dispose()})}function $B(n){return W.keep(n)}function cv(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];ue().getBool("IS_TEST")||console.warn.apply(console,n)}function Jo(n,e){var t=n;if(Ha(n))return e==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(t)||Ha(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&ue().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(i,o,u){if(u=u||[],!Array.isArray(i)&&!Ha(i))return void L(o.length===0,function(){return"Element arr["+u.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});L(o.length>0,function(){return"Element arr["+u.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),L(i.length===o[0],function(){return"Element arr["+u.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),f=0;f<i.length;++f)a(i[f],c,u.concat(f))}(n,r,[]),r}function nC(n,e,t,r){if(n!=null&&(n!=="numeric"&&n!==e||n==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+n+" tensor, but got "+e+" tensor")}function P(n,e,t,r){if(r===void 0&&(r="numeric"),n instanceof jt)return nC(r,n.dtype,e,t),n;var a=Rh(n);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),nC(r,a,e,t),n==null||!Ha(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var i=n==null?"null":n.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=Jo(n,a);Ha(n)||Array.isArray(n)||(n=[n]);var u=a!=="string"?zO(n,a,ue().getBool("DEBUG")):Kl(n,[],!0);return W.makeTensor(u,o,a)}function fv(n,e,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(a,i){return P(a,e+"["+i+"]",t)},r)}function QO(n,e){for(var t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function KB(n,e,t){for(var r=n.length+e.length,a=[],i=0,o=0,u=0;u<r;u++)t.indexOf(u)===-1?a.push(n[i++]):a.push(e[o++]);return a}function Wn(n,e){for(var t=[],r=n.length,a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);return[t,e.map(function(i){return n[i]})]}function mr(n,e){return KB(n,e.map(function(t){return 1}),e)}function Rr(n,e,t){L(QO(e,t),function(){return n+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."})}function ni(n,e){if(QO(n,e))return null;for(var t=[],r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(function(a){return t.push(a)}),t}function Tx(n){return n.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function ri(n,e){for(var t=[],r=e-n;r<e;++r)t.push(r);return t}function XB(n,e){var t=n[0].length;n.forEach(function(a,i){L(a.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+t+")"})}),L(e>=0&&e<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=n[0];n.forEach(function(a,i){for(var o=0;o<t;o++)L(o===e||a[o]===r[o],function(){return"Error in concat"+t+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Yl(n,e){for(var t=n[0].slice(),r=1;r<n.length;r++)t[e]+=n[r][e];return t}function j(n){var e=Object.keys(n);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];W.startScope(t);try{var u=r.apply(void 0,i);return u instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),W.endScope(u),u}catch(c){throw W.endScope(null),c}};return Object.defineProperty(a,"name",{value:t,configurable:!0}),a}Qe.registerFlag("HAS_WEBGL",function(){return Qe.getNumber("WEBGL_VERSION")>0}),Qe.registerFlag("WEBGL_VERSION",function(){return tC(2)?2:tC(1)?1:0}),Qe.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Qe.get("WEBGL_VERSION")===2}),Qe.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Qe.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Qe.registerFlag("WEBGL_PACK",function(){return Qe.getBool("HAS_WEBGL")}),Qe.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_CLIP",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Qe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_REDUCE",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_CONV_IM2COL",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return jB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return qB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=Qe.getNumber("WEBGL_VERSION");return n===0?0:WB(n)}),Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Qe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),Qe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return HB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Qe.getBool("WEBGL_FORCE_F16_TEXTURES")&&Qe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Qe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return GB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return QB(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Qe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),qO=GO;var Ln=j({complex_:function(n,e){var t=P(n,"real","complex"),r=P(e,"imag","complex");return Ot(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),W.runKernelFunc(function(a){return a.complex(t,r)},{$real:t,$imag:r})}}),$r=j({real_:function(n){var e=P(n,"input","real");return W.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),Va=j({imag_:function(n){var e=P(n,"input","imag");return W.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function zn(n,e,t){return es(n,e,Jo(n,t),t)}function es(n,e,t,r){if(r==null&&(r=Rh(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ha(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){VO(e);var a=Ie(e),i=Ie(t);L(a===i,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+a+" values but has "+i});for(var o=0;o<t.length;++o){var u=t[o],c=o!==t.length-1||u!==Ie(e.slice(o));L(t[o]===e[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "})}}return Ha(n)||Array.isArray(n)||(n=[n]),e=e||t,n=r!=="string"?zO(n,r,ue().getBool("DEBUG")):Kl(n,[],!0),W.makeTensor(n,e,r)}function we(n,e){if((Ha(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ha(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return es(n,[],[],e)}function sn(n,e){sc(n);var t=Jo(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return es(n,null,t,e)}function Lo(n,e,t){if(sc(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Jo(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return es(n,e,r,t)}function Ox(n,e,t){if(sc(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Jo(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return es(n,e,r,t)}function hr(n,e,t){if(sc(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Jo(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return es(n,e,r,t)}function YB(n,e,t){if(sc(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Jo(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return es(n,e,r,t)}function ZB(n,e,t){if(sc(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Jo(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return es(n,e=e||r,r,t)}function JB(n,e,t,r){return e===void 0&&(e=!0),W.makeVariable(n,e,t,r)}function uc(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=uc(n,"float32"),r=Bt(n,"float32");return Ln(t,r)}var a=UO(Ie(n),e);return W.makeTensor(a,n,e)}function Bt(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Bt(n,"float32"),r=Bt(n,"float32");return Ln(t,r)}var a=Th(Ie(n),e);return W.makeTensor(a,n,e)}function Qa(n,e,t){return W.runKernelFunc(function(r){return r.fill(n,e,t)},{})}function ez(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");return W.runKernelFunc(function(r){return r.linspace(n,e,t)},{})}function hv(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(n===e||n<e&&t<0||e<n&&t>1)return Bt([0],r);var a=Th(Math.abs(Math.ceil((e-n)/t)),r);e<n&&t===1&&(t=-1),a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+t;return sn(a,r)}var $O=j({onesLike_:function(n){var e=P(n,"x","onesLike");if(e.dtype==="complex64"){var t=$O($r(e)),r=gt(Va(e));return Ln(t,r)}return W.runKernelFunc(function(a){return a.onesLike(e)},{$x:e},function(a,i){return{$x:function(){return gt(a)}}})}}),gt=j({zerosLike_:function(n){var e=P(n,"x","zerosLike");return W.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,r){return{$x:function(){return gt(t)}}})}}),pn=j({concat_:function(n,e){e===void 0&&(e=0),L(n.length>=1,function(){return"Pass at least one tensor to concat"});var t=fv(n,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(u){if(u.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+u.dtype+". ")}),e=yn(e,t[0].shape)[0];var r=Yl(t.map(function(u){return u.shape}),e);if(Ie(r)===0)return zn([],r);if((t=t.filter(function(u){return u.size>0})).length===1)return t[0];var a=t.map(function(u){return u.shape});XB(a,e);var i=t,o={axis:e};return W.runKernelFunc(function(u){return u.concat(t,e)},i,function(u){var c=a.map(function(f){return f[e]});return Ax(u,c,e).map(function(f){return function(){return f}})},"Concat",o)}}),tz=j({concat1d_:function(n){return pn(n,0)}}),nz=j({concat2d_:function(n,e){return pn(n,e)}}),rz=j({concat3d_:function(n,e){return pn(n,e)}}),az=j({concat4d_:function(n,e){return pn(n,e)}}),Ax=j({split_:function(n,e,t){t===void 0&&(t=0);var r,a=P(n,"x","split");return t=yn(t,a.shape)[0],typeof e=="number"?(L(a.shape[t]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(a.shape[t]/e)):(L(a.shape[t]===e.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),W.runKernelFunc(function(i){return i.split(a,r,t)},{$x:a},function(i){return{$x:function(){return pn(i,t)}}})}});function au(n,e){return n(e={exports:{}},e.exports),e.exports}var iz=au(function(n){(function(e,t,r){function a(u){var c,f=this,d=(c=4022871197,function(p){p=p.toString();for(var v=0;v<p.length;v++){var g=.02519603282416938*(c+=p.charCodeAt(v));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});f.next=function(){var p=2091639*f.s0+23283064365386963e-26*f.c;return f.s0=f.s1,f.s1=f.s2,f.s2=p-(f.c=0|p)},f.c=1,f.s0=d(" "),f.s1=d(" "),f.s2=d(" "),f.s0-=d(u),f.s0<0&&(f.s0+=1),f.s1-=d(u),f.s1<0&&(f.s1+=1),f.s2-=d(u),f.s2<0&&(f.s2+=1),d=null}function i(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var f=new a(u),d=c&&c.state,p=f.next;return p.int32=function(){return 4294967296*f.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.alea=o})(0,n)}),oz=au(function(n){(function(e,t,r){function a(u){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var p=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^p^p>>>8},u===(0|u)?c.x=u:f+=u;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor128=o})(0,n)}),sz=au(function(n){(function(e,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^p^p<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,u===(0|u)?c.x=u:f+=u;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),d==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c.v=u.v,c.d=u.d,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorwow=o})(0,n)}),uz=au(function(n){(function(e,t,r){function a(u){var c=this;c.next=function(){var f,d,p=c.x,v=c.i;return f=p[v],d=(f^=f>>>7)^f<<24,d^=(f=p[v+1&7])^f>>>10,d^=(f=p[v+3&7])^f>>>3,d^=(f=p[v+4&7])^f<<7,f=p[v+7&7],d^=(f^=f<<13)^f<<9,p[v]=d,c.i=v+1&7,d},function(f,d){var p,v=[];if(d===(0|d))v[0]=d;else for(d=""+d,p=0;p<d.length;++p)v[7&p]=v[7&p]<<15^d.charCodeAt(p)+v[p+1&7]<<13;for(;v.length<8;)v.push(0);for(p=0;p<8&&v[p]===0;++p);for(p==8?v[7]=-1:v[p],f.x=v,f.i=0,p=256;p>0;--p)f.next()}(c,u)}function i(u,c){return c.x=u.x.slice(),c.i=u.i,c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.x&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorshift7=o})(0,n)}),lz=au(function(n){(function(e,t,r){function a(u){var c=this;c.next=function(){var f,d,p=c.w,v=c.X,g=c.i;return c.w=p=p+1640531527|0,d=v[g+34&127],f=v[g=g+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,d=v[g]=d^f,c.i=g,d+(p^p>>>16)|0},function(f,d){var p,v,g,y,x,w=[],_=128;for(d===(0|d)?(v=d,d=null):(d+="\0",v=0,_=Math.max(_,d.length)),g=0,y=-32;y<_;++y)d&&(v^=d.charCodeAt((y+32)%d.length)),y===0&&(x=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,y>=0&&(x=x+1640531527|0,g=(p=w[127&y]^=v+x)==0?g+1:0);for(g>=128&&(w[127&(d&&d.length||0)]=-1),g=127,y=512;y>0;--y)v=w[g+34&127],p=w[g=g+1&127],v^=v<<13,p^=p<<17,v^=v>>>15,p^=p>>>12,w[g]=v^p;f.w=x,f.X=w,f.i=g}(c,u)}function i(u,c){return c.i=u.i,c.w=u.w,c.X=u.X.slice(),c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.X&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor4096=o})(0,n)}),cz=au(function(n){(function(e,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.b,v=c.c,g=c.d,y=c.a;return p=p<<25^p>>>7^v,v=v-g|0,g=g<<24^g>>>8^y,y=y-p|0,c.b=p=p<<20^p>>>12^v,c.c=v=v-g|0,c.d=g<<16^v>>>16^y,c.a=y-p|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,u===Math.floor(u)?(c.a=u/4294967296|0,c.b=0|u):f+=u;for(var d=0;d<f.length+20;d++)c.b^=0|f.charCodeAt(d),c.next()}function i(u,c){return c.a=u.a,c.b=u.b,c.c=u.c,c.d=u.d,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.tychei=o})(0,n)}),Rs=au(function(n){(function(e,t){var r,a=this,i=256,o=6,u="random",c=t.pow(i,o),f=t.pow(2,52),d=2*f,p=i-1;function v(_,S,C){var R=[],T=x(function N(k,I){var B,U=[],ee=typeof k;if(I&&ee=="object")for(B in k)try{U.push(N(k[B],I-1))}catch{}return U.length?U:ee=="string"?k:k+"\0"}((S=S==1?{entropy:!0}:S||{}).entropy?[_,w(e)]:_??function(){try{var N;return r&&(N=r.randomBytes)?N=N(i):(N=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(N)),w(N)}catch{var k=a.navigator,I=k&&k.plugins;return[+new Date,a,I,a.screen,w(e)]}}(),3),R),O=new g(R),D=function(){for(var N=O.g(o),k=c,I=0;N<f;)N=(N+I)*i,k*=i,I=O.g(1);for(;N>=d;)N/=2,k/=2,I>>>=1;return(N+I)/k};return D.int32=function(){return 0|O.g(4)},D.quick=function(){return O.g(4)/4294967296},D.double=D,x(w(O.S),e),(S.pass||C||function(N,k,I,B){return B&&(B.S&&y(B,O),N.state=function(){return y(O,{})}),I?(t[u]=N,k):N})(D,T,"global"in S?S.global:this==t,S.state)}function g(_){var S,C=_.length,R=this,T=0,O=R.i=R.j=0,D=R.S=[];for(C||(_=[C++]);T<i;)D[T]=T++;for(T=0;T<i;T++)D[T]=D[O=p&O+_[T%C]+(S=D[T])],D[O]=S;(R.g=function(N){for(var k,I=0,B=R.i,U=R.j,ee=R.S;N--;)k=ee[B=p&B+1],I=I*i+ee[p&(ee[B]=ee[U=p&U+k])+(ee[U]=k)];return R.i=B,R.j=U,I})(i)}function y(_,S){return S.i=_.i,S.j=_.j,S.S=_.S.slice(),S}function x(_,S){for(var C,R=_+"",T=0;T<R.length;)S[p&T]=p&(C^=19*S[p&T])+R.charCodeAt(T++);return w(S)}function w(_){return String.fromCharCode.apply(0,_)}if(t["seed"+u]=v,x(t.random(),e),n.exports){n.exports=v;try{r=require("crypto")}catch{}}})([],Math)});Rs.alea=iz,Rs.xor128=oz,Rs.xorwow=sz,Rs.xorshift7=uz,Rs.xor4096=lz,Rs.tychei=cz;var Wv=Rs.alea,kx=function(){function n(e,t,r,a,i){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Wv(o.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,r,a=!1;!a;){var i=void 0,o=void 0,u=void 0;do u=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(u>=1||u===0);var c=Math.sqrt(-2*Math.log(u)/u);t=this.mean+this.stdDev*i*c,r=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(t)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},n.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},n.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},n}(),fz=function(){function n(e,t,r,a){this.alpha=e,this.beta=1/t,this.dtype=r;var i=a||Math.random();this.randu=Wv(i.toString()),this.randn=new kx(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var e,t,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,t=1-.331*(e=a*a)*e,r=.5*e+this.d*(1-o+Math.log(o)),(i=this.randu())<t||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},n.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},n}(),hz=function(){function n(e,t,r,a){var i=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Wv(a)}return n.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}();function Je(n,e,t){return e===void 0&&(e="float32"),e=e||"float32",VO(n),new oh(n,e,t)}function dz(n,e){e===void 0&&(e=!1),console.log(n.toString(e))}var KO=j({batchToSpaceND_:function(n,e,t){var r=P(n,"x","batchToSpaceND"),a=e.reduce(function(i,o){return i*o});return L(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),L(t.length===e.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length}),L(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+a}),W.runKernelFunc(function(i){return i.batchToSpaceND(r,e,t)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(e,t)}}})}}),pz=j({broadcastTo_:function(n,e){var t=P(n,"broadcastTo","x"),r=t.shape;if(e.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var a=t.shape.slice();a.length<e.length;)a.unshift(1);t=t.reshape(a)}for(var i=Array.from(e),o=e.length-1;o>=0;o--)if(t.shape[o]===e[o])i[o]=1;else if(t.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var u=i.map(function(c,f){return c>1?f:-1}).filter(function(c){return c>=0});return u.length===0?t.clone():W.runKernelFunc(function(c){return c.tile(t,i)},{input:t},function(c){return{input:function(){return c.sum(u,!0)}}})}}),vz=j({cast_:function(n,e){var t=P(n,"x","cast");if(!sB(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return W.runKernelFunc(function(a){return a.cast(t,e)},{x:t},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),mz=j({clone_:function(n){var e=P(n,"x","clone",null);return W.runKernelFunc(function(){return W.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),gz=j({cumsum_:function(n,e,t,r){e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var a=P(n,"x","cumsum"),i=ni([e|=0],a.rank),o=a;i!=null&&(o=a.transpose(i));var u=ri(1,a.rank)[0],c=W.runKernelFunc(function(f){return f.cumsum(o,u,t,r)},{permutedX:o},function(f){return{permutedX:function(){return f.cumsum(e,t,!r)}}});return i!=null&&(c=c.transpose(i)),c}}),yz=j({depthToSpace_:function(n,e,t){t===void 0&&(t="NHWC");var r=P(n,"x","depthToSpace"),a=t==="NHWC"?r.shape[1]:r.shape[2],i=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];return L(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),L(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+` for depthToSpace with input shape
          `+r.shape}),L(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),W.runKernelFunc(function(u){return u.depthToSpace(r,e,t)},{$x:r})}}),Qr=j({expandDims_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","expandDims",null);L(e<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return e<0&&(L(-(t.rank+1)<=e,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),e=t.rank+e+1),r.splice(e,0,1),da(t,r)}}),XO=j({eye_:function(n,e,t,r){r===void 0&&(r="float32"),e==null&&(e=n);for(var a=Je([n,e],r),i=n<=e?n:e,o=0;o<i;++o)a.set(1,o,o);var u=a.toTensor().as2D(n,e);if(t==null)return u;if(t.length===1)return ml(Qr(u,0),[t[0],1,1]);if(t.length===2)return ml(Qr(Qr(u,0),0),[t[0],t[1],1,1]);if(t.length===3)return ml(Qr(Qr(Qr(u,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),bz=j({multinomial_:function(n,e,t,r){r===void 0&&(r=!1);var a=P(n,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);t=t||Math.random();var u=o===1?a.as2D(1,-1):a,c=W.runKernelFunc(function(f){return f.multinomial(u,r,e,t)},{logits2D:u});return o===1?c.as1D():c}}),Eb=j({oneHot_:function(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var a=P(n,"indices","oneHot","int32"),i=a.shape.concat([e]);return a=a.flatten(),W.runKernelFunc(function(o){return o.oneHot(a,e,t,r)},{$indices:a},function(o){return{$indices:function(){return Bt(a.shape,"float32")}}}).reshape(i)}}),iu=j({pad_:function(n,e,t){t===void 0&&(t=0);var r=P(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:e,constantValue:t};return W.runKernelFunc(function(i){return i.pad(r,e,t)},{x:r},function(i){var o=e.map(function(u){return u[0]});return{x:function(){return i.slice(o,r.shape)}}},"PadV2",a)}}),xz=j({pad1d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),iu(n,[e],t)}}),wz=j({pad2d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),iu(n,e,t)}}),_z=j({pad3d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),iu(n,e,t)}}),Ez=j({pad4d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),iu(n,e,t)}}),Sz=j({rand_:function(n,e,t){var r=Ie(n),a=null;if(t==null||t==="float32")a=new Float32Array(r);else if(t==="int32")a=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=e();return W.makeTensor(a,n,t)}}),Cz=j({randomNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new kx(e,t,r,!1,a),o=Je(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),Rz=j({randomGamma_:function(n,e,t,r,a){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new fz(e,t,r,a),o=Je(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),YO=j({randomUniform_:function(n,e,t,r,a){e===void 0&&(e=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var i=Je(n,r),o=new hz(e,t,null,a),u=0;u<i.values.length;u++)i.values[u]=o.nextValue();return i.toTensor()}}),da=j({reshape_:function(n,e){var t=P(n,"x","reshape",null);e=iB(e,t.size),L(t.size===Ie(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return W.runKernelFunc(function(a){return a.reshape(t,e)},{x:t},function(a){return{x:function(){return a.reshape(t.shape)}}},"Reshape",r)}}),ZO=j({spaceToBatchND_:function(n,e,t){var r=P(n,"x","spaceToBatchND");return L(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),L(t.length===e.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length}),L(r.shape.reduce(function(a,i,o){return o>0&&o<=e.length?a&&(i+t[o-1][0]+t[o-1][1])%e[o-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()}),W.runKernelFunc(function(a){return a.spaceToBatchND(r,e,t)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(e,t)}}})}}),JO=j({squeeze_:function(n,e){var t=P(n,"x","squeeze");return da(t,Os(t.shape,e).newShape)}}),Nr=j({stack_:function(n,e){e===void 0&&(e=0);var t=fv(n,"tensors","stack");if(L(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(e);var r=t[0].rank,a=t[0].shape,i=t[0].dtype;L(e<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(u){Ot(a,u.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(u){L(i===u.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=t.map(function(u){return u.expandDims(e)});return pn(o,e)}}),ml=j({tile_:function(n,e){var t=P(n,"x","tile",null);L(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."});var r=[t],a={reps:e};return W.runKernelFunc(function(i,o){var u=i.tile(t,e);return o([t]),u},{x:t},function(i,o){var u=o[0];return{x:function(){var c=gt(u);if(u.rank===1)for(var f=0;f<e[0];++f)c=c.add(i.slice([f*u.shape[0]],[u.shape[0]]));else if(u.rank===2)for(f=0;f<e[0];++f)for(var d=0;d<e[1];++d)c=c.add(i.slice([f*u.shape[0],d*u.shape[1]],[u.shape[0],u.shape[1]]));else if(u.rank===3)for(f=0;f<e[0];++f)for(d=0;d<e[1];++d)for(var p=0;p<e[2];++p)c=c.add(i.slice([f*u.shape[0],d*u.shape[1],p*u.shape[2]],[u.shape[0],u.shape[1],u.shape[2]]));else{if(u.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+u.rank+" tensors yet.");for(f=0;f<e[0];++f)for(d=0;d<e[1];++d)for(p=0;p<e[2];++p)for(var v=0;v<e[3];++v)c=c.add(i.slice([f*u.shape[0],d*u.shape[1],p*u.shape[2],v*u.shape[3]],[u.shape[0],u.shape[1],u.shape[2],u.shape[3]]))}return c}}},"Tile",a,r)}}),Tz=j({truncatedNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new kx(e,t,r,!0,a),o=Je(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),vn=j({unstack_:function(n,e){e===void 0&&(e=0),e=e||0;var t=P(n,"x","unstack");L(e>=-t.shape.length&&e<t.shape.length,function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),e<0&&(e+=t.shape.length);var r={axis:e};return W.runKernelFunc(function(a){return a.unstack(t,e)},{x:t},function(a){return{x:function(){return Nr(a,e)}}},"Unpack",r)}}),Oz=function(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p;return De(this,function(v){switch(v.label){case 0:return t=P(n,"x","setdiff1d"),r=P(e,"y","setdiff1d"),L(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),L(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),L(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return a=v.sent(),[4,r.data()];case 2:for(i=v.sent(),o=new Set(i),u=0,d=0;d<a.length;d++)o.has(a[d])||u++;for(c=new oh([u],t.dtype),f=new oh([u],"int32"),d=0,p=0;d<a.length;d++)o.has(a[d])||(c.values[p]=a[d],f.values[p]=d,p++);return[2,[c.toTensor(),f.toTensor()]]}})})};function dv(n,e,t,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(e.slice(0))).push(n[0]/t),a=a.concat(n.slice(1));else{a=a.concat(n[0]);for(var i=e.length,o=0;o<i;++o)a=a.concat([n[o+1]/e[o],e[o]]);a=a.concat(n.slice(i+1))}return a}function pv(n,e,t){t===void 0&&(t=!0);var r=[];if(t){r.push(e);for(var a=e+1;a<n;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<n;++a)a>=2*e+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function vv(n,e,t,r){r===void 0&&(r=!0);var a=[];r?a.push(n[0]/t):a.push(n[0]*t);for(var i=1;i<n.length;++i)i<=e.length?r?a.push(e[i-1]*n[i]):a.push(n[i]/e[i-1]):a.push(n[i]);return a}function eA(n,e){for(var t=[0],r=0;r<e;++r)t.push(n[r][0]);return t}function tA(n,e,t){for(var r=n.slice(0,1),a=0;a<t;++a)r.push(n[a+1]-e[a][0]-e[a][1]);return r}function nA(n,e){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var t=e.shape,r=t[t.length-1],a=1,i=0;i<t.length-1;++i)a*=t[i];var o=n.shape,u=t.slice();u.pop();var c=1;for(i=r;i<n.rank;++i)c*=o[i],u.push(o[i]);var f=Ga(n.shape).map(function(d){return d/c}).concat([1]).slice(0,r);return[u,a,c,f]}var rA=30;function Yy(n){return n<=rA?n:gb(n,Math.floor(Math.sqrt(n)))}function Az(n,e,t){var r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+a+".";if(t.rank<a)throw new Error(i+" update.rank < "+a+". ");if(n.length<r+(t.rank-a))throw new Error(i+" Output shape length < "+(r+(t.rank-a)));if(t.rank!==a+n.length-r)throw new Error(i+" update.rank != "+(a+n.length-r));for(var o=0;o<a;++o)if(t.shape[o]!==e.shape[o])throw new Error(i+" updates.shape["+o+"] ("+t.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<t.rank-a;++o)if(t.shape[o+a]!==n[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+t.shape[o+a]+") != shape["+(o+a)+"] ("+n[o+a]+")")}function kz(n,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}Az(t,e,n)}function mv(n,e,t){for(var r=e.shape.length,a=r>1?e.shape[r-1]:1,i=t.length,o=1,u=a;u<i;++u)o*=t[u];var c=a<1?1:a;return{sliceRank:a,numUpdates:Ie(e.shape)/c,sliceSize:o,strides:Ga(t.slice(0,a)).concat([1]),outputSize:Ie(t)}}function Dz(n,e,t){L(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+e+" must match the rank of the array ("+n.rank+")."}),L(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of size "+t+" must match the rank of the array ("+n.rank+")."});for(var r=function(i){L(e[i]+t[i]<=n.shape[i],function(){return"Error in slice"+n.rank+"D: begin["+i+"] + size["+i+"] ("+(e[i]+t[i])+") would overflow input.shape["+i+"] ("+n.shape[i]+")"})},a=0;a<n.rank;++a)r(a)}function rC(n){for(var e=[],t=0;n>0;)1&n&&e.push(t),n/=2,t++;return e}function Dx(n,e,t){for(var r=[],a=0;a<n.length;a++)r[a]=Math.ceil((e[a]-n[a])/t[a]);return r}function Nz(n,e,t,r,a){var i=e[a],o=t[a]||1;(n&1<<a||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=pb(0,i,u-1)}function Iz(n,e,t,r,a){var i=e[a],o=t[a]||1;(n&1<<a||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=o>0?pb(0,i,u):pb(-1,i,u-1)}function aA(n,e,t){for(var r=t.length,a=0;a<t.length;a++)if(t[a]>1){r=a;break}for(a=r+1;a<t.length;a++)if(e[a]>0||t[a]!==n[a])return!1;return!0}function iA(n,e){for(var t=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function Mz(n,e){L(mb(n),function(){return"The f passed in variableGrads(f) must be a function"}),L(e==null||Array.isArray(e)&&e.every(function(d){return d instanceof Xl}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=e!=null;if(!t)for(var r in e=[],W.registeredVariables)e.push(W.registeredVariables[r]);var a=t?e.filter(function(d){return!d.trainable}):null,i=e.length;L((e=e.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=W.gradients(n,e,null,!0),u=o.value,c=o.grads;L(c.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),L(u.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+u.rank+" tensor"});var f={};return e.forEach(function(d,p){c[p]!=null&&(f[d.name]=c[p])}),a!=null&&a.forEach(function(d){return f[d.name]=null}),{value:u,grads:f}}function Hv(n){return W.customGrad(n)}var Ui=j({softmax_:function(n,e){e===void 0&&(e=-1);var t=P(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return W.runKernelFunc(function(r,a){var i=r.softmax(t,e);return a([i]),i},{logits:t},function(r,a){var i=a[0],o=r.mul(i);return{logits:function(){return o.sub(o.sum([e],!0).mul(i))}}},"Softmax",{dim:e},[],[!0])}}),Fz=j({logSoftmax_:function(n,e){e===void 0&&(e=-1);var t=P(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return Hv(function(r,a){var i=r.max(e,!0),o=r.sub(i),u=o.toFloat().sub(o.exp().sum(e,!0).log());return a([u]),{value:u,gradFunc:function(c,f){var d=f[0].exp();return c.sub(c.sum(e,!0).mul(d))}}})(t)}}),oA=function(){function n(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},n.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},n.prototype.has=function(e){return this.data.has(e)},n.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),sA=function(){function n(){}return n.prototype.time=function(e){return ie("time")},n.prototype.read=function(e){return ie("read")},n.prototype.readSync=function(e){return ie("readSync")},n.prototype.numDataIds=function(){return ie("numDataIds")},n.prototype.disposeData=function(e){return ie("disposeData")},n.prototype.write=function(e,t,r){return ie("write")},n.prototype.move=function(e,t,r,a){return ie("move")},n.prototype.memory=function(){return ie("memory")},n.prototype.floatPrecision=function(){return ie("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(e,t,r,a){return ie("batchMatMul")},n.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,ie("fusedBatchMatMul")},n.prototype.slice=function(e,t,r){return ie("slice")},n.prototype.stridedSlice=function(e,t,r,a){return ie("stridedSlice")},n.prototype.unstack=function(e,t){return ie("unstack")},n.prototype.reverse=function(e,t){return ie("reverse")},n.prototype.concat=function(e,t){return ie("concat")},n.prototype.neg=function(e){return ie("neg")},n.prototype.add=function(e,t){return ie("add")},n.prototype.addN=function(e){return ie("addN")},n.prototype.subtract=function(e,t){return ie("subtract")},n.prototype.multiply=function(e,t){return ie("multiply")},n.prototype.realDivide=function(e,t){return ie("realDivide")},n.prototype.floorDiv=function(e,t){return ie("floorDiv")},n.prototype.sum=function(e,t){return ie("sum")},n.prototype.prod=function(e,t){return ie("prod")},n.prototype.unsortedSegmentSum=function(e,t,r){return ie("unsortedSegmentSum")},n.prototype.argMin=function(e,t){return ie("argMin")},n.prototype.argMax=function(e,t){return ie("argMax")},n.prototype.equal=function(e,t){return ie("equal")},n.prototype.notEqual=function(e,t){return ie("notEqual")},n.prototype.less=function(e,t){return ie("less")},n.prototype.lessEqual=function(e,t){return ie("lessEqual")},n.prototype.greater=function(e,t){return ie("greater")},n.prototype.greaterEqual=function(e,t){return ie("greaterEqual")},n.prototype.logicalNot=function(e){return ie("logicalNot")},n.prototype.logicalAnd=function(e,t){return ie("logicalAnd")},n.prototype.logicalOr=function(e,t){return ie("logicalOr")},n.prototype.where=function(e){return ie("where")},n.prototype.select=function(e,t,r){return ie("select")},n.prototype.topk=function(e,t,r){return ie("topk")},n.prototype.min=function(e,t){return ie("min")},n.prototype.minimum=function(e,t){return ie("minimum")},n.prototype.mod=function(e,t){return ie("mod")},n.prototype.max=function(e,t){return ie("max")},n.prototype.maximum=function(e,t){return ie("maximum")},n.prototype.all=function(e,t){return ie("all")},n.prototype.any=function(e,t){return ie("any")},n.prototype.squaredDifference=function(e,t){return ie("squaredDifference")},n.prototype.ceil=function(e){return ie("ceil")},n.prototype.floor=function(e){return ie("floor")},n.prototype.round=function(e){return ie("round")},n.prototype.sign=function(e){return ie("sign")},n.prototype.isNaN=function(e){return ie("isNaN")},n.prototype.isInf=function(e){return ie("isInf")},n.prototype.isFinite=function(e){return ie("isFinite")},n.prototype.pow=function(e,t){return ie("pow")},n.prototype.exp=function(e){return ie("exp")},n.prototype.expm1=function(e){return ie("expm1")},n.prototype.softmax=function(e,t){return ie("softmax")},n.prototype.log=function(e){return ie("log")},n.prototype.log1p=function(e){return ie("log1p")},n.prototype.sqrt=function(e){return ie("sqrt")},n.prototype.rsqrt=function(e){return ie("rsqrt")},n.prototype.square=function(e){return ie("square")},n.prototype.reciprocal=function(e){return ie("reciprocal")},n.prototype.relu=function(e){return ie("relu")},n.prototype.relu6=function(e){return ie("relu6")},n.prototype.prelu=function(e,t){return ie("prelu")},n.prototype.elu=function(e){return ie("elu")},n.prototype.eluDer=function(e,t){return ie("eluDer")},n.prototype.selu=function(e){return ie("selu")},n.prototype.int=function(e){return ie("int")},n.prototype.clip=function(e,t,r){return ie("clip")},n.prototype.abs=function(e){return ie("abs")},n.prototype.complexAbs=function(e){return ie("complexAbs")},n.prototype.sigmoid=function(e){return ie("sigmoid")},n.prototype.softplus=function(e){return ie("softplus")},n.prototype.sin=function(e){return ie("sin")},n.prototype.cos=function(e){return ie("cos")},n.prototype.tan=function(e){return ie("tan")},n.prototype.asin=function(e){return ie("asin")},n.prototype.acos=function(e){return ie("acos")},n.prototype.atan=function(e){return ie("atan")},n.prototype.atan2=function(e,t){return ie("atan2")},n.prototype.sinh=function(e){return ie("sinh")},n.prototype.cosh=function(e){return ie("cosh")},n.prototype.tanh=function(e){return ie("tanh")},n.prototype.asinh=function(e){return ie("asinh")},n.prototype.acosh=function(e){return ie("acosh")},n.prototype.atanh=function(e){return ie("atanh")},n.prototype.erf=function(e){return ie("erf")},n.prototype.step=function(e,t){return ie("step")},n.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ie("fusedConv2d")},n.prototype.conv2d=function(e,t,r){return ie("conv2d")},n.prototype.conv2dDerInput=function(e,t,r){return ie("conv2dDerInput")},n.prototype.conv2dDerFilter=function(e,t,r){return ie("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,ie("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(e,t,r){return ie("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(e,t,r){return ie("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(e,t,r){return ie("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(e,t,r){return ie("conv3d")},n.prototype.conv3dDerInput=function(e,t,r){return ie("conv3dDerInput")},n.prototype.conv3dDerFilter=function(e,t,r){return ie("conv3dDerFilter")},n.prototype.maxPool=function(e,t){return ie("maxPool")},n.prototype.maxPoolBackprop=function(e,t,r,a){return ie("maxPoolBackprop")},n.prototype.avgPool=function(e,t){return ie("avgPool")},n.prototype.avgPoolBackprop=function(e,t,r){return ie("avgPoolBackprop")},n.prototype.avgPool3d=function(e,t){return ie("avgPool3d")},n.prototype.avgPool3dBackprop=function(e,t,r){return ie("avgPool3dBackprop")},n.prototype.maxPool3d=function(e,t){return ie("maxPool3d")},n.prototype.maxPool3dBackprop=function(e,t,r,a){return ie("maxPool3dBackprop")},n.prototype.reshape=function(e,t){return ie("reshape")},n.prototype.cast=function(e,t){return ie("cast")},n.prototype.tile=function(e,t){return ie("tile")},n.prototype.pad=function(e,t,r){return ie("pad")},n.prototype.transpose=function(e,t){return ie("transpose")},n.prototype.gather=function(e,t,r){return ie("gather")},n.prototype.gatherND=function(e,t){return ie("gatherND")},n.prototype.scatterND=function(e,t,r){return ie("scatterND")},n.prototype.batchToSpaceND=function(e,t,r){return ie("batchToSpaceND")},n.prototype.spaceToBatchND=function(e,t,r){return ie("spaceToBatchND")},n.prototype.resizeBilinear=function(e,t,r,a){return ie("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(e,t,r){return ie("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(e,t,r,a){return ie("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(e,t,r){return ie("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(e,t,r,a,i,o){return ie("batchNormalization")},n.prototype.localResponseNormalization4D=function(e,t,r,a,i){return ie("localResponseNormalization4D")},n.prototype.LRNGrad=function(e,t,r,a,i,o,u){return ie("LRNGrad")},n.prototype.multinomial=function(e,t,r,a){return ie("multinomial")},n.prototype.oneHot=function(e,t,r,a){return ie("oneHot")},n.prototype.cumsum=function(e,t,r,a){return ie("cumsum")},n.prototype.nonMaxSuppression=function(e,t,r,a,i){return ie("nonMaxSuppression")},n.prototype.fft=function(e){return ie("fft")},n.prototype.ifft=function(e){return ie("ifft")},n.prototype.complex=function(e,t){return ie("complex")},n.prototype.real=function(e){return ie("real")},n.prototype.imag=function(e){return ie("imag")},n.prototype.cropAndResize=function(e,t,r,a,i,o){return ie("cropAndResize")},n.prototype.depthToSpace=function(e,t,r){return ie("depthToSpace")},n.prototype.split=function(e,t,r){return ie("split")},n.prototype.sparseToDense=function(e,t,r,a){return ie("sparseToDense")},n.prototype.diag=function(e){return ie("diag")},n.prototype.fill=function(e,t,r){return ie("fill")},n.prototype.onesLike=function(e){return ie("onesLike")},n.prototype.zerosLike=function(e){return ie("zerosLike")},n.prototype.linspace=function(e,t,r){return ie("linspace")},n.prototype.dispose=function(){return ie("dispose")},n}();function ie(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Mo(n,e){for(var t=n.length,r=[],a=0;a<t;a++){var i=t-1-a,o=n[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function mn(n,e){for(var t=[],r=0;r<e.length;r++){var a=n[n.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&t.unshift(i)}return t}function ct(n,e){for(var t=[],r=Math.max(n.length,e.length),a=0;a<r;a++){var i=n[n.length-a-1];i==null&&(i=1);var o=e[e.length-a-1];if(o==null&&(o=1),i===1)t.unshift(o);else if(o===1)t.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+n+" and "+e+".");t.unshift(i)}}return t}function uh(n,e,t,r,a,i,o){o===void 0&&(o="channelsLast");var u,c=bv(e),f=c[0],d=c[1];if(o==="channelsLast")u=[f,d,n[3],n[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);u=[f,d,n[1],n[1]]}return ou(n,u,t,r,a,i,!1,o)}function gv(n,e,t,r,a,i,o){o===void 0&&(o="NDHWC");var u,c,f=Sb(e),d=f[0],p=f[1],v=f[2];if(o==="NDHWC")c="channelsLast",u=[d,p,v,n[4],n[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",u=[d,p,v,n[1],n[1]]}return yv(n,u,t,r,a,!1,c,i)}function ou(n,e,t,r,a,i,o,u){o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var c=[-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3];if(u==="channelsLast")f=n[0],d=n[1],p=n[2],v=n[3];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);f=n[0],v=n[1],d=n[2],p=n[3]}var g,y=e[0],x=e[1],w=e[3],_=bv(t),S=_[0],C=_[1],R=bv(r),T=R[0],O=R[1],D=gl(y,T),N=gl(x,O),k=function(te,re,q,Z,G,Y,F,K){var se,fe,he;if(typeof te=="number"){se={top:te,bottom:te,left:te,right:te,type:te===0?"VALID":"NUMBER"};var be=function(Ve,$e,Ye,bt,St){bt==null&&(bt=uA(Ve,$e,Ye));var yt=Ve[0],or=Ve[1],Yn=Ff((yt-$e+2*bt)/Ye+1,St);L(en(Yn),function(){return"The output # of rows ("+Yn+") must be an integer. Change the stride and/or zero pad parameters"});var kn=Ff((or-$e+2*bt)/Ye+1,St);return L(en(kn),function(){return"The output # of columns ("+kn+") must be an integer. Change the stride and/or zero pad parameters"}),[Yn,kn]}([re,q],Y,Z,te,K);fe=be[0],he=be[1]}else if(te==="same"){fe=Math.ceil(re/Z),he=Math.ceil(q/G);var ye=Math.max(0,(fe-1)*Z+Y-re),Be=Math.max(0,(he-1)*G+F-q),xe=Math.floor(ye/2),Oe=ye-xe,je=Math.floor(Be/2);se={top:xe,bottom:Oe,left:je,right:Be-je,type:"SAME"}}else{if(te!=="valid")throw Error("Unknown padding parameter: "+te);se={top:0,bottom:0,left:0,right:0,type:"VALID"},fe=Math.ceil((re-Y+1)/Z),he=Math.ceil((q-F+1)/G)}return{padInfo:se,outHeight:fe,outWidth:he}}(a,d,p,S,C,D,N,i),I=k.padInfo,B=k.outHeight,U=k.outWidth,ee=o?w*v:w;return u==="channelsFirst"?g=[f,ee,B,U]:u==="channelsLast"&&(g=[f,B,U,ee]),{batchSize:f,dataFormat:u,inHeight:d,inWidth:p,inChannels:v,outHeight:B,outWidth:U,outChannels:ee,padInfo:I,strideHeight:S,strideWidth:C,filterHeight:y,filterWidth:x,effectiveFilterHeight:D,effectiveFilterWidth:N,dilationHeight:T,dilationWidth:O,inShape:n,outShape:g,filterShape:e}}function yv(n,e,t,r,a,i,o,u){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3],g=c[4];if(o==="channelsLast")f=n[0],d=n[1],p=n[2],v=n[3],g=n[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);f=n[0],g=n[1],d=n[2],p=n[3],v=n[4]}var y,x=e[0],w=e[1],_=e[2],S=e[4],C=Sb(t),R=C[0],T=C[1],O=C[2],D=Sb(r),N=D[0],k=D[1],I=D[2],B=gl(x,N),U=gl(w,k),ee=gl(_,I),te=function(F,K,se,fe,he,be,ye,Be,xe,Oe,je){var Ve,$e,Ye,bt;if(typeof F=="number"){Ve={top:F,bottom:F,left:F,right:F,front:F,back:F,type:F===0?"VALID":"NUMBER"};var St=function(Dn,ta,cu,ii,Zn,dc){Zn==null&&(Zn=uA(Dn,ta,ii));var zh=Dn[0],vm=Dn[1],mm=Dn[2],oi=Ff((zh-ta+2*Zn)/ii+1,dc);L(en(oi),function(){return"The output # of depths ("+oi+") must be an integer. Change the stride and/or zero pad parameters"});var Nn=Ff((vm-ta+2*Zn)/ii+1,dc);L(en(Nn),function(){return"The output # of rows ("+Nn+") must be an integer. Change the stride and/or zero pad parameters"});var pc=Ff((mm-ta+2*Zn)/ii+1,dc);return L(en(pc),function(){return"The output # of columns ("+pc+") must be an integer. Change the stride and/or zero pad parameters"}),[oi,Nn,pc,cu]}([K,se,fe,1],Be,1,he,F,je);$e=St[0],Ye=St[1],bt=St[2]}else if(F==="same"){$e=Math.ceil(K/he),Ye=Math.ceil(se/be),bt=Math.ceil(fe/ye);var yt=($e-1)*he+Be-K,or=(Ye-1)*be+xe-se,Yn=(bt-1)*ye+Oe-fe,kn=Math.floor(yt/2),Ea=yt-kn,yr=Math.floor(or/2),Sa=or-yr,ea=Math.floor(Yn/2);Ve={top:yr,bottom:Sa,left:ea,right:Yn-ea,front:kn,back:Ea,type:"SAME"}}else{if(F!=="valid")throw Error("Unknown padding parameter: "+F);Ve={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},$e=Math.ceil((K-Be+1)/he),Ye=Math.ceil((se-xe+1)/be),bt=Math.ceil((fe-Oe+1)/ye)}return{padInfo:Ve,outDepth:$e,outHeight:Ye,outWidth:bt}}(a,d,p,v,R,T,O,B,U,ee,u),re=te.padInfo,q=te.outDepth,Z=te.outHeight,G=te.outWidth,Y=i?S*g:S;return o==="channelsFirst"?y=[f,Y,q,Z,G]:o==="channelsLast"&&(y=[f,q,Z,G,Y]),{batchSize:f,dataFormat:o,inDepth:d,inHeight:p,inWidth:v,inChannels:g,outDepth:q,outHeight:Z,outWidth:G,outChannels:Y,padInfo:re,strideDepth:R,strideHeight:T,strideWidth:O,filterDepth:x,filterHeight:w,filterWidth:_,effectiveFilterDepth:B,effectiveFilterHeight:U,effectiveFilterWidth:ee,dilationDepth:N,dilationHeight:k,dilationWidth:I,inShape:n,outShape:y,filterShape:e}}function uA(n,e,t,r){r===void 0&&(r=1);var a=gl(e,r);return Math.floor((n[0]*(t-1)-t+a)/2)}function bv(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function Sb(n){return typeof n=="number"?[n,n,n]:n}function gl(n,e){return e<=1?n:n+(n-1)*(e-1)}function Ff(n,e){if(!e)return n;switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+e)}}function Zl(n){var e=bv(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function gr(n,e){return Zl(n)||Zl(e)}function Nx(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function lA(n,e,t){if(e==="complex64"){if(n.dtype==="complex64")return n.clone();var r=Bt(n.shape),a=n.toFloat(),i=t.complex(a,r);return r.dispose(),a.dispose(),i}if(!uB(n.dtype,e))return W.makeTensorFromDataId(n.dataId,n.shape,e);if(n.dtype==="complex64"){var o=t.real(n);return i=o.cast(e),o.dispose(),i}if(e==="int32")return t.int(n);if(e==="bool"){var u=we(0,n.dtype);return i=t.notEqual(n,u),u.dispose(),i}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+e)}function Cb(n,e){return W.makeTensorFromDataId(n.dataId,e,n.dtype)}function cA(n,e,t){var r=(e-n)/(t-1),a=Th(t,"float32");a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return sn(a,"float32")}function Rb(n,e){if(n.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+e.length+".");for(var t=new Float32Array(2*n.length),r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function aC(n,e){return{real:n[2*e],imag:n[2*e+1]}}function Pz(n,e,t,r){n[2*r]=e,n[2*r+1]=t}function Lz(n,e,t){var r=(t?2:-2)*Math.PI*(n/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Bz(n,e,t){var r=function(i,o,u){return function(c,f,d){for(var p=0,v=c.length,g=0,y=!1;p<v;){var x=d(f,c[g=p+(v-p>>>1)]);x>0?p=g+1:(v=g,y=!x)}return y?p:-p-1}(i,o,u||zz)}(n,e,t),a=r<0?-(r+1):r;n.splice(a,0,e)}function zz(n,e){return n>e?1:n<e?-1:0}function Ix(n,e,t,r,a){return fA(n,e,t,r,a,0).selectedIndices}function Mx(n,e,t,r,a,i){var o=fA(n,e,t,r,a,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function fA(n,e,t,r,a,i,o,u){u===void 0&&(u=!1);for(var c=Array.from(e).map(function(R,T){return{score:R,boxIndex:T,suppressBeginIndex:0}}).filter(function(R){return R.score>a}).sort(iC),f=i>0?-.5/i:0,d=[],p=[];d.length<t&&c.length>0;){var v=c.pop(),g=v.score,y=v.boxIndex,x=v.suppressBeginIndex;if(g<a)break;for(var w=!1,_=d.length-1;_>=x;--_){var S=Uz(n,y,d[_]);if(S>=r){w=!0;break}if(v.score=v.score*Vz(r,f,S),v.score<=a)break}v.suppressBeginIndex=d.length,w||(v.score===g?(d.push(y),p.push(v.score)):v.score>a&&Bz(c,v,iC))}var C=d.length;return u&&(d.fill(0,C),p.fill(0,C)),{selectedIndices:sn(d,"int32"),selectedScores:sn(p,"float32"),numValidOutputs:we(C,"int32")}}function Uz(n,e,t){var r=n.subarray(4*e,4*e+4),a=n.subarray(4*t,4*t+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),f=Math.min(a[0],a[2]),d=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),v=Math.max(a[1],a[3]),g=(u-i)*(c-o),y=(p-f)*(v-d);if(g<=0||y<=0)return 0;var x=Math.max(i,f),w=Math.max(o,d),_=Math.min(u,p),S=Math.min(c,v),C=Math.max(_-x,0)*Math.max(S-w,0);return C/(g+y-C)}function Vz(n,e,t){var r=Math.exp(e*t*t);return t<=n?r:0}function iC(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}function hA(n,e,t){var r=new Array(n.rank).fill(0),a=n.shape.slice();return e.map(function(i){a[t]=i;var o=n.slice(r,a);return r[t]+=i,o})}function dA(n,e){for(var t=new Array(n.rank),r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];var a=Je(t,n.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(n.rank),u=0;u<o.length;u++)o[u]=i[u]%n.shape[u];var c=n.locToIndex(o);a.values[r]=n.values[c]}return a.toTensor()}function pA(n,e,t,r,a){for(var i=e[e.length-1],o=[n.length/i,i],u=o[0],c=o[1],f=ih(t,u*r),d=ih("int32",u*r),p=0;p<u;p++){for(var v=p*c,g=n.subarray(v,v+c),y=[],x=0;x<g.length;x++)y.push({value:g[x],index:x});y.sort(function(R,T){return T.value-R.value});var w=p*r,_=f.subarray(w,w+r),S=d.subarray(w,w+r);for(x=0;x<r;x++)_[x]=y[x].value,S[x]=y[x].index}var C=e.slice();return C[C.length-1]=r,[zn(f,C,t),zn(d,C,"int32")]}function Fx(n,e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(r);var a=Je(n,"int32"),i=Je([t.length,n.length],"int32");for(r=0;r<t.length;r++){var o=a.indexToLoc(t[r]),u=r*n.length;i.values.set(o,u)}return i.toTensor()}var jz=function(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},qz=function(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},Wz=function(n,e,t){this.variableNames=["A"];var r=n.windowSize,a=n.batchSize,i=n.inSize,o=Math.ceil(i/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var u=e==="max"?">":"<",c=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+u+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function vA(n,e){return["x","y","z","w","u","v"].slice(0,e).map(function(t){return n+"."+t})}function dr(n,e){return e===1?[n]:vA(n,e)}function Gn(){var n,e,t,r,a,i,o,u,c,f;return ue().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",u=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",a="texture2D",i="gl_FragColor",o="",u=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:u,defineSpecialInf:c,defineRound:f}}function Ds(n,e,t){t===void 0&&(t="index");var r=Ga(e);return r.map(function(a,i){return"int "+n[i]+" = "+t+" / "+a+"; "+(i===r.length-1?"int "+n[i+1]+" = "+t+" - "+n[i]+" * "+a:"index -= "+n[i]+" * "+a)+";"}).join("")}function Px(n){var e=Ga(n).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var mA=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Hz(n,e,t,r){var a=[];n.forEach(function(g){var y=Ie(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(y>1?"["+y+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))});var i,o,u=a.join(`
`),c=n.map(function(g){return function(y,x,w){w===void 0&&(w=!1);var _="";_+=w?gA(y):tl(y);var S=y.shapeInfo.logicalShape,C=x.logicalShape;return S.length<=C.length&&(_+=w?function(R,T){var O,D=R.name,N=D.charAt(0).toUpperCase()+D.slice(1),k="get"+N+"AtOutCoords",I=R.shapeInfo.logicalShape.length,B=T.logicalShape.length,U=Mo(R.shapeInfo.logicalShape,T.logicalShape),ee=Pt(B),te=B-I,re=["x","y","z","w","u","v"];O=I===0?"":B<2&&U.length>=1?"coords = 0;":U.map(function(se){return"coords."+re[se+te]+" = 0;"}).join(`
`);var q="";q=B<2&&I>0?"coords":R.shapeInfo.logicalShape.map(function(se,fe){return"coords."+re[fe+te]}).join(", ");var Z="return outputValue;",G=Ie(R.shapeInfo.logicalShape)===1,Y=Ie(T.logicalShape)===1;if(I!==1||G||Y){if(G&&!Y)Z=B===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(U.length){var F=I-2,K=I-1;U.indexOf(F)>-1&&U.indexOf(K)>-1?Z="return vec4(outputValue.x);":U.indexOf(F)>-1?Z="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":U.indexOf(K)>-1&&(Z="return vec4(outputValue.xx, outputValue.zz);")}}else Z=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+k+`() {
      `+ee+` coords = getOutputCoords();
      `+O+`
      vec4 outputValue = get`+N+"("+q+`);
      `+Z+`
    }
  `}(y,x):function(R,T){var O=R.name,D=O.charAt(0).toUpperCase()+O.slice(1),N="get"+D+"AtOutCoords",k=T.texShape,I=R.shapeInfo.texShape,B=R.shapeInfo.logicalShape.length,U=T.logicalShape.length;if(!R.shapeInfo.isUniform&&B===U&&R.shapeInfo.flatOffset==null&&On(I,k))return`
      float `+N+`() {
        return sampleTexture(`+O+`, resultUV);
      }
    `;var ee,te=Pt(U),re=Mo(R.shapeInfo.logicalShape,T.logicalShape),q=U-B,Z=["x","y","z","w","u","v"];ee=B===0?"":U<2&&re.length>=1?"coords = 0;":re.map(function(Y){return"coords."+Z[Y+q]+" = 0;"}).join(`
`);var G="";return G=U<2&&B>0?"coords":R.shapeInfo.logicalShape.map(function(Y,F){return"coords."+Z[F+q]}).join(", "),`
    float `+N+`() {
      `+te+` coords = getOutputCoords();
      `+ee+`
      return get`+D+"("+G+`);
    }
  `}(y,x)),_}(g,e,r)}).join(`
`),f=e.texShape,d=Gn(),p=function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `}(d),v=function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Gz+`
    `+Qz+`
    `+$z+`
  `}(d);return e.isPacked?(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(R,T){var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];return O[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+O[1]+`.0);
      }
    `:O[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+O[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      return 2 * (resTexRC.x * `+O[1]+` + resTexRC.y);
    }
  `}(0,y);case 2:return function(R,T){var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];if(On(R,T))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+O[0]+", "+O[1]+`));
      }
    `;var D=Math.ceil(R[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));

      int index = resTexRC.x * `+O[1]+` + resTexRC.y;
      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=g,w=y,_=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],S=Math.ceil(x[2]/2),C=S*Math.ceil(x[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(R,T){for(var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)],D=Math.ceil(R[R.length-1]/2),N=D*Math.ceil(R[R.length-2]/2),k=N,I="",B="b, r, c",U=2;U<R.length-1;U++)k*=R[R.length-U-1],I=`
      int b`+U+" = index / "+k+`;
      index -= b`+U+" * "+k+`;
    `+I,B="b"+U+", "+B;return`
    ivec`+R.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      int index = resTexRC.x * `+O[1]+` + resTexRC.y;

      `+I+`

      int b = index / `+N+`;
      index -= b * `+N+`;

      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec`+R.length+"("+B+`);
    }
  `}(g,y)}var x,w,_,S,C}(e.logicalShape,f),o=function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `}(d)):(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,S){return S[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return resTexRC.x * `+S[1]+` + resTexRC.y;
    }
  `}(0,y);case 2:return function(_,S){return On(_,S)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `:_[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = index / `+_[1]+`;
      int c = index - r * `+_[1]+`;
      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=y,w=Ds(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+w+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(_,S){var C=Ds(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      `+C+`
      return ivec4(r, c, d, d2);
    }
  `}(g,y);case 5:return function(_,S){var C=Ds(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+S[0]+`,
                             `+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+C+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(g,y);case 6:return function(_,S){var C=Ds(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+C+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(g,y);default:throw new Error(g.length+"-D output sampling is not yet supported")}var x,w}(e.logicalShape,f),o=function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),r&&(v+=Kz),[v,p,o,u,i,c,t].join(`
`)}function tl(n){var e=n.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(o===1&&u===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=t.shapeInfo.texShape,f=c[0],d=c[1],p=Ss(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+f+", "+d+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 1:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Ku(t)+`
      }
    `;var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(u===1&&o===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=Ss(r);return u===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+u+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+u+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 2:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=t.shapeInfo.texShape;if(o!=null&&On(r,o)){var u=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+u+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var f=Os(r),d=f.newShape,p=f.keptDims,v=d;if(v.length<r.length){var g=nl(t,v);return`
      `+tl(g)+`
      float `+i+`(int row, int col) {
        return `+i+"("+rl(["row","col"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Ku(t)+`
      }
    `;var y=o[0],x=o[1],w=Ss(a);return x===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:y===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+x+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+w+`;
    vec2 uv = uvFromFlat(`+y+", "+x+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(n);case 3:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[1]*r[2],u=r[2],c=Os(r),f=c.newShape,d=c.keptDims,p=f;if(p.length<r.length){var v=nl(t,p);return`
        `+tl(v)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+rl(["row","col","depth"],d)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+u+`, 1)));
        `+Ku(t)+`
      }
    `;var g=t.shapeInfo.texShape,y=g[0],x=g[1],w=t.shapeInfo.flatOffset;if(x===o&&w==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+u+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+x+".0, "+y+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(x===u&&w==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+x+".0, "+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var _=Ss(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+u+" + depth + "+_+`;
        vec2 uv = uvFromFlat(`+y+", "+x+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(n);case 4:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[3],u=r[2]*o,c=r[1]*u,f=Os(r),d=f.newShape,p=f.keptDims;if(d.length<r.length){var v=nl(t,d);return`
      `+tl(v)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+rl(["row","col","depth","depth2"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+u+", "+o+`, 1)));
        `+Ku(t)+`
      }
    `;var g=t.shapeInfo.flatOffset,y=t.shapeInfo.texShape,x=y[0],w=y[1];if(w===c&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(w===o&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=Ss(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+x+", "+w+", index + "+_+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 5:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[4],u=r[3]*o,c=r[2]*u,f=r[1]*c,d=Os(r),p=d.newShape,v=d.keptDims;if(p.length<r.length){var g=nl(t,p);return`
      `+tl(g)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+rl(["row","col","depth","depth2","depth3"],v)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+c+", "+u+", "+o+`)) +
          depth3;
        `+Ku(t)+`
      }
    `;var y=t.shapeInfo.flatOffset,x=t.shapeInfo.texShape,w=x[0],_=x[1];if(_===f&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===o&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var S=Ss(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+c+" + depth * "+u+` +
          depth2 * `+o+" + depth3 + "+S+`;
      vec2 uv = uvFromFlat(`+w+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 6:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=Os(r),u=o.newShape,c=o.keptDims;if(u.length<r.length){var f=nl(t,u);return`
      `+tl(f)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+rl(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=r[5],p=r[4]*d,v=r[3]*p,g=r[2]*v,y=r[1]*g;if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+g+", "+v+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Ku(t)+`
      }
    `;var x=t.shapeInfo.flatOffset,w=t.shapeInfo.texShape,_=w[0],S=w[1];if(S===y&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+v+", "+p+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===d&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var C=Ss(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+g+" + depth * "+v+` +
          depth2 * `+p+" + depth3 * "+d+" + depth4 + "+C+`;
      vec2 uv = uvFromFlat(`+_+", "+S+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function gA(n){var e,t,r;switch(n.shapeInfo.logicalShape.length){case 0:return e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Gn(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(a){var i=a.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),u=a.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],f=Gn();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+f.texture2D+"("+i+`, uv);
    }
  `}(n);case 2:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=c[0],d=c[1],p=Gn();if(c!=null&&On(i,c))return`
      vec4 `+u+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+f+`.0);

        return `+p.texture2D+"("+o+`, uv);
      }
    `;var v=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(i[1]/2);return`
    vec4 `+u+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+v[0]+", "+v[1]+`, row, col);
      return `+p.texture2D+"("+o+`, uv);
    }
  `}(n);case 3:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var d=i.slice(1),p=nl(a,d);return`
        `+gA(p)+`
        vec4 `+u+`(int b, int row, int col) {
          return `+u+"("+rl(["b","row","col"],[1,2])+`);
        }
      `}var v=f[0],g=f[1],y=Math.ceil(i[2]/2),x=y*Math.ceil(i[1]/2),w=Gn();return`
    vec4 `+u+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+v+", "+g+", "+x+", "+y+`, b, row, col);
      return `+w.texture2D+"("+o+`, uv);
    }
  `}(n);default:return function(a){for(var i=a.shapeInfo.logicalShape,o=i.length,u=a.name,c="get"+u.charAt(0).toUpperCase()+u.slice(1),f=a.shapeInfo.texShape,d=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],p=d[0],v=d[1],g=Math.ceil(i[o-1]/2),y=g*Math.ceil(i[o-2]/2),x="int b, int row, int col",w="b * "+y+" + (row / 2) * "+g+" + (col / 2)",_=2;_<o-1;_++)x="int b"+_+", "+x,y*=i[o-_-1],w="b"+_+" * "+y+" + "+w;var S=Gn();return`
    vec4 `+c+"("+x+`) {
      int index = `+w+`;
      int texR = index / `+v+`;
      int texC = index - texR * `+v+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+", "+p+`);
      return `+S.texture2D+"("+u+`, uv);
    }
  `}(n)}}var Gz=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Qz=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$z=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Kz=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ss(n){return"offset"+n}function Ku(n){var e=n.name,t=Ie(n.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Pt(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function nl(n,e){var t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function rl(n,e){return e.map(function(t){return n[t]}).join(", ")}var Xz=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,L(n.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var a=n[n.length-1],i=Math.ceil(a/e);this.outputShape=n.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,u,c=this.outputShape,f=c.length,d=Pt(f),p=dr("coords",f);if(i===1){var v=Pt(u=f+1);o=`
        `+v+" sourceLocR = "+v+"("+p.join()+`, 0);
        ++`+p[f-1]+`;
        `+v+" sourceLocG = "+v+"("+p.join()+`, 0);
        ++`+p[f-2]+`;
        `+v+" sourceLocA = "+v+"("+p.join()+`, 0);
        --`+p[f-1]+`;
        `+v+" sourceLocB = "+v+"("+p.join()+`, 0);
        --`+p[f-2]+";"}else u=f,o=`
        `+d+` sourceLocR = coords;
        ++`+p[f-1]+`;
        `+d+` sourceLocG = coords;
        ++`+p[f-2]+`;
        `+d+` sourceLocA = coords;
        --`+p[f-1]+`;
        `+d+` sourceLocB = coords;
        --`+p[f-2]+";";var g=["x","y","z","w","u","v"].slice(0,u),y="."+g[u-1],x=g.map(function(N){return"int "+N}),w=dr("sourceLocR",u-1).concat("inIdx.r"),_=dr("sourceLocG",u-1).concat("inIdx.g"),S=dr("sourceLocB",u-1).concat("inIdx.b"),C=dr("sourceLocA",u-1).concat("inIdx.a"),R=t==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+C.join()+")));",O=`vec4(
            getAChannel(`+w.join()+`),
            hasNextCol ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+C.join()+") : 0.)",D=r?"":`
      float getBestIndicesAChannel(`+x.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+x.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+D+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+p[f-1]+" < "+(c[f-1]-1)+`;
        bool hasNextRow = `+p[f-2]+" < "+(c[f-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+O+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+O+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+R+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Yz=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,o=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,f=u-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+f+", "+d+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},Zz=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,v=n.effectiveFilterWidth,g=d-1-n.padInfo.front,y=p-1-n.padInfo.top,x=v-1-n.padInfo.left,w=1/(e*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float avgMultiplier = float(`+w+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+u+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+v+`;
                wC += `+f+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Jz=function(n,e,t,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],ct(n,e),ct(n,t);var o="0.0";r!=null&&(ct(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="1.0";a!=null&&(ct(n,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+u+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},eU=function(n,e,t,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ct(n,e),ct(n,t);var o="vec4(0.0)";r!=null&&(ct(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="vec4(1.0)";a!=null&&(ct(n,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+u+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},tU="return areal * breal - aimag * bimag;",nU="return areal * bimag + aimag * breal;",oC=function(n,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ct(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Zy="return a + b;",Jy="return a - b;",sC="return a * b;",yA="return (a < 0.) ? b * a : a;",Kt=function(n,e,t){this.variableNames=["A","B"],this.outputShape=ct(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},bA=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ti=function(n,e,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ct(e,t);var a=this.outputShape.length,i="";if(r)if(a===0||Ie(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Pt(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=dr("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+o[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+o[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},rU=function(){function n(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),aU=function(){function n(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),iU=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},oU=function(n){this.outputShape=[],this.outputShape=Yl(n,1),this.variableNames=n.map(function(u,c){return"T"+c});var e=new Array(n.length-1);e[0]=n[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+n[t][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var a=e[t-1];r.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+a+"));")}var i=e.length,o=e[e.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},sU=function(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Yl(n,e);var t=this.outputShape,r=t.length,a=Pt(r),i=dr("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(w,_){return"T"+_});var u=new Array(n.length-1);u[0]=n[0][e];for(var c=1;c<u.length;c++)u[c]=u[c-1]+n[c][e];var f=o[e],d=o.slice(-2),p=o.join(),v="if ("+f+" < "+u[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+d.join()+`));
        }`;for(c=1;c<u.length;c++){var g=u[c-1];v+=`
        if (`+f+" < "+u[c]+"  && "+f+" >= "+u[c-1]+`) {
          return getChannel(
            getT`+c+"("+up(o,f,g)+`),
            vec2(`+up(d,f,g)+`));
        }`}var y=u.length,x=u[u.length-1];v+=`
        return getChannel(
          getT`+y+"("+up(o,f,x)+`),
          vec2(`+up(d,f,x)+"));",this.userCode=`
      float getValue(`+o.map(function(w){return"int "+w})+`) {
        `+v+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+t[r-2]+` &&
            `+i[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function up(n,e,t){var r=n.indexOf(e);return n.map(function(a,i){return i===r?a+" - "+t:a}).join()}var uU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},lU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dataFormat==="channelsLast",o=e-1-n.padInfo.top,u=t-1-n.padInfo.left,c=i?1:2,f=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+f+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},cU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.padInfo.front,i=n.padInfo.top,o=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+a+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+i+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},fU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=e-1-n.padInfo.front,c=t-1-n.padInfo.top,f=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},hU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},dU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=e-1-n.padInfo.top,o=t-1-n.padInfo.left,u=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+u+`; dm++) {
              int d2 = d1 * `+u+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},uC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.padInfo.top,i=n.padInfo.left,o=n.strideHeight,u=n.strideWidth,c=n.dilationHeight,f=n.dilationWidth,d=n.filterHeight,p=n.filterWidth,v=4*Math.floor(n.inChannels/4),g=n.inChannels%4,y=n.dataFormat==="channelsLast",x=y?1:2,w=y?2:3,_=y?3:1,S="",C="";t&&(S=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,C="result = activation(result);");var R=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+o+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+_+`];

        ivec2 xRCCorner =
            ivec2(coords[`+x+"], coords["+w+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+v+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+v+`) *
                    getW(wR, wC, `+v+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+v+`, xR, xC) *
                    getW(wR, wC, `+v+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2),
                getW(wR, wC, `+v+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1),
                  getX(batch, xR, xC, `+v+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC),
                  getX(batch, `+v+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+R+`
        `+C+`
        setOutput(result);
      }
    `},pU=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var e=n.padInfo.front,t=n.padInfo.top,r=n.padInfo.left,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,v=n.filterWidth,g=4*Math.floor(n.inChannels/4),y=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+u+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+v+`; wC++) {
              int xC = xCCorner + wC * `+f+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},lC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.inHeight,i=n.inWidth,o=n.padInfo.top,u=n.padInfo.left,c=n.strideHeight,f=n.strideWidth,d=n.dilationHeight,p=n.dilationWidth,v=n.filterHeight,g=n.filterWidth,y=n.outChannels/n.inChannels,x="",w="";t&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,w="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+v+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+_+`
        `+w+`
        setOutput(result);
      }
    `},cC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var a=n.inHeight,i=n.inWidth,o=n.padInfo.top,u=n.padInfo.left,c=n.strideHeight,f=n.strideWidth,d=n.dilationHeight,p=n.dilationWidth,v=n.filterHeight,g=n.filterWidth,y=g,x="int xR; int xC; int xCOffset;",w=0;w<v;w++)for(var _=0;_<g;_++)x+=`
          vec4 xTexelR`+w+"C"+2*_+` = vec4(0.);
          vec4 wR`+w+"C"+_+` = vec4(0.);
          vec4 xR`+w+"C"+_+" = vec4(0.);";for(w=0;w<v;w++)for(var S=0;S<y;S++){if(x+=`
          xR = xRCorner + `+w*d+`;
          xC = xCCorner + `+(_=2*S)*p+`;
        `,f===1){if(_<g&&(x+=u%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+w+"C"+_+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+w+"C"+_+" = vec4(previous.zw, xTexelR"+w+"C"+_+`.xy);
                } else {
                  xR`+w+"C"+_+" = vec4(0, 0, xTexelR"+w+"C"+_+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xR`+w+"C"+_+" = xTexelR"+w+"C"+_+`;
              `,_+1<g)){var C=u%2==0?LO(p):p;p%2==0&&u%2==1||p%2!=0&&u%2!=1?(x+=`
                  xCOffset = xC + `+u%2+" + "+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(x+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+w+"C"+_+` = vec4(0.);
                    }
                  `),x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.xy);
                `):x+=`
                  xCOffset = xC + `+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+w+"C"+(_+1)+" = xTexelR"+w+"C"+(_+2)+`;
                `}}else _<g&&(x+=`
              if(xR >= 0 && xR < `+a+`) {
            `,u%2==1?(x+=`
                xCOffset = xC + 1 - `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
              `,_+1<g&&(x+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+f+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+w+"C"+(_+1)+" = vec4(xTexelR"+w+"C"+(_+2)+`.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".xy, xTexelR"+w+"C"+(_+2)+`.xy);
              `,_+1<g&&(x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
                `)),x+="}");_<g&&(x+=`
            vec4 wTexelR`+w+"C"+_+" = getW("+w+", "+_+`, d1, q);
            wR`+w+"C"+_+" = vec4(wTexelR"+w+"C"+_+".xz, wTexelR"+w+"C"+_+`.xz);
          `,_+1<g&&(x+=`
              vec4 wTexelR`+w+"C"+(_+1)+" = getW("+w+", "+(_+1)+`, d1, q);
              wR`+w+"C"+(_+1)+` =
                vec4(wTexelR`+w+"C"+(_+1)+".xz, wTexelR"+w+"C"+(_+1)+".xz);"))}for(w=0;w<v;w++)for(_=0;_<g;_++)x+="dotProd += xR"+w+"C"+_+" * wR"+w+"C"+_+";";var R="",T="";t&&(R=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,T="result = activation(result);");var O=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+R+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+x+`

        vec4 result = dotProd;
        `+O+`
        `+T+`
        setOutput(result);
      }
    `},vU=function(n,e,t,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=n[0],o=n[1],u=n[2],c=n[3],f=e[0],d=t[0],p=t[1];this.outputShape=[f,d,p,c];var v=r==="bilinear"?1:0,g=[o-1+".0",u-1+".0"],y=g[0],x=g[1],w=d>1?[""+(o-1)/(d-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],_=w[0],S=w[1],C=w[2],R=p>1?[""+(u-1)/(p-1),"(x2-x1) * width_ratio","x1*"+x+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+x],T=R[0],O=R[1],D=R[2];this.userCode=`
      const float height_ratio = float(`+_+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+O+`;

        float in_y = `+C+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+D+`;
        if( in_x < 0.0 || in_x > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+v+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},mU=function(n,e,t){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=n[n.length-1],i=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Pt(r)+` coords = getOutputCoords();
        int end = `+fC(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+fC(r,"coords")+` = idx;
          val += getX(`+function(o,u){if(o===1)return""+u;if(o===2)return u+".x, "+u+".y";if(o===3)return u+".x, "+u+".y, "+u+".z";if(o===4)return u+".x, "+u+".y, "+u+".z, "+u+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function fC(n,e){if(n===1)return""+e;if(n===2)return e+".y";if(n===3)return e+".z";if(n===4)return e+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var gU=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sh.DENSE;var e=Mf(n),t=Gn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ds(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},yU=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sh.DENSE;var e=Mf(n),t=Gn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ds(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},bU=function(){function n(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),xU=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},wU=function(n){this.variableNames=["A"],this.outTexUsage=Or.DOWNLOAD;var e=Gn();this.outputShape=n,this.userCode=`
      `+mA+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},_U=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Or.DOWNLOAD;var e=Gn();this.outputShape=n,this.userCode=`
      `+mA+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},EU=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=Gn(),a=e[0],i=e[1];this.outputShape=n;var o="result";t&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+Px(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},SU=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Gn(),a=e[0],i=e[1];this.outputShape=n;var o="",u="result";t&&(u="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var f=0;f<=1;f++){var d=2*c+f;o+=`
          localCoords = coords;
          if(localCoords[2] + `+f+" < "+n[2]+`) {
            localCoords[2] += `+f+`;
            if(localCoords[1] + `+c+" < "+n[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Px(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+u+`;
      }
    `},CU="return real * expR - imag * expI;",RU="return real * expI + imag * expR;",hC=function(n,e,t){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var a=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},TU=function(){function n(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(t.valueLoc,e)}},n}(),OU=function(n,e,t){this.variableNames=["A","indices"];var r=n.slice();r[t]=e,this.outputShape=r,this.rank=r.length;var a=Pt(this.rank),i=function(o,u){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var f=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],p=0;p<o.length;p++)p===u?d.push("int(getIndices("+f[p]+"))"):d.push(""+f[p]);return d.join()}(n,t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},AU=function(n,e,t){this.sliceDim=n,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var r=Pt(e.length),a=Pt(t.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function kU(n,e){var t=Gn();return CB(n,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function DU(n,e){return kB(n,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function NU(n,e){return DB(n,e,new Uint16Array([0,1,2,2,1,3]))}function Ah(n,e,t,r,a,i,o){IB(t,r);var u=NB(n,e),c=n.TEXTURE_2D;return Fe(n,e,function(){return n.bindTexture(c,u)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_MIN_FILTER,n.NEAREST)}),Fe(n,e,function(){return n.texParameteri(c,n.TEXTURE_MAG_FILTER,n.NEAREST)}),Fe(n,e,function(){return n.texImage2D(c,0,a,t,r,0,i,o,null)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)}),u}function IU(n,e,t,r,a){var i=qv(t,r);return Ah(n,e,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,n.FLOAT)}function MU(n,e,t,r,a){var i=qv(t,r);return Ah(n,e,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function FU(n,e,t,r,a){var i=qv(t,r);return Ah(n,e,i[0],i[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function PU(n,e,t,r,a){var i=Oh(t,r);return Ah(n,e,i[0],i[1],a.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function LU(n,e,t,r,a){var i=Oh(t,r);return Ah(n,e,i[0],i[1],a.internalFormatPackedHalfFloat,n.RGBA,a.textureTypeHalfFloat)}function BU(n,e,t,r){return Fe(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),J2(n,e,t,"clipSpacePos",r,3,20,0)&&J2(n,e,t,"uv",r,2,20,12)}function zU(n,e,t,r,a,i,o){var u,c,f;Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),i instanceof Uint8Array?(u=new Uint8Array(r*a*4),c=n.UNSIGNED_BYTE,f=n.RGBA):(u=new Float32Array(r*a*4),c=n.FLOAT,f=o.internalFormatPackedFloat),u.set(i),Fe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,f,r,a,0,n.RGBA,c,u)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function UU(n,e,t,r){Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),r.data instanceof Uint8Array?Fe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):Fe(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),Fe(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function VU(n,e,t,r,a){var i=n.createBuffer();Fe(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,i)});var o=16*t*r;return Fe(n,e,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)}),Fe(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,0)}),Fe(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),i}function jU(n,e,t){var r=n,a=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function qU(n,e,t,r,a){var i=qv(t,r),o=i[0],u=i[1],c=new Uint8Array(t*r*4);return Fe(n,e,function(){return n.readPixels(0,0,o,u,a.downloadTextureFormat,n.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function WU(n,e,t,r,a,i,o,u){var c=n,f=new Float32Array(function(d,p){var v=Oh(d,p);return v[0]*v[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,f),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),f}function HU(n,e,t,r){var a=new Float32Array(t*r*4);return Fe(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,a)}),a}var GU=function(){function n(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=ue().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,xB(t,e)):this.gl=ti(t);var r="WEBGL_color_buffer_float";if(ue().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=ap(this.gl,this.debug,"OES_texture_float"),Kr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=ap(this.gl,this.debug,"OES_texture_half_float");else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Kr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=ap(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ue().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Kr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Kr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=DU(this.gl,this.debug),this.indexBuffer=NU(this.gl,this.debug),this.framebuffer=MB(this.gl,this.debug),this.textureConfig=Rx(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return ue().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Fe(t,this.debug,function(){return t.finish()}),Fe(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Fe(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Fe(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Fe(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Fe(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),IU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),MU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),FU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),UU(this.gl,this.debug,e,t)},n.prototype.uploadDenseMatrixToTexture=function(e,t,r,a){this.throwIfDisposed(),zU(this.gl,this.debug,e,t,r,a,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),LU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),PU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(eC(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Fe(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return qU(a.gl,a.debug,t,r,a.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(e,t,r,a,i,o){return WU(this.gl,e,0,0,0,i,o,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return jU(this.gl,e,t)},n.prototype.createBufferFromTexture=function(e,t,r){this.bindTextureToFrameBuffer(e);var a=VU(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},n.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},n.prototype.createFence=function(e){var t,r,a=this;if(ue().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var u=i.clientWaitSync(o,0,0);return u===i.ALREADY_SIGNALED||u===i.CONDITION_SATISFIED},t=o}else ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(t,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return HU(a.gl,a.debug,t,r)})},n.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,r=RB(t,this.debug,e),a=kU(t,this.debug),i=OB(t,this.debug);return Fe(t,this.debug,function(){return t.attachShader(i,a)}),Fe(t,this.debug,function(){return t.attachShader(i,r)}),AB(t,this.debug,i),this.debug&&$y(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=BU(t,this.debug,this.program,this.vertexBuffer)),i},n.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Fe(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},n.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&$y(this.gl,this.debug,this.program),Fe(this.gl,this.debug,function(){return t.gl.useProgram(e)})},n.prototype.getUniformLocation=function(e,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?PB(this.gl,this.debug,e,t):LB(this.gl,e,t)},n.prototype.getAttributeLocation=function(e,t){var r=this;return this.throwIfDisposed(),Fe(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,t)})},n.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},n.prototype.setInputMatrixTexture=function(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),BB(this.gl,this.debug,this.program,e,t,r)},n.prototype.setOutputMatrixTexture=function(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)},n.prototype.setOutputPackedMatrixTexture=function(e,t,r){this.throwIfDisposed();var a=Oh(t,r),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)},n.prototype.setOutputMatrixWriteRegion=function(e,t,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,t)},n.prototype.setOutputPackedMatrixWriteRegion=function(e,t,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&$y(this.gl,this.debug,this.program),ip(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Fe(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Fe(this.gl,this.debug,function(){return e.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=ap(this.gl,this.debug,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},n.prototype.endQuery=function(){if(ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(e){return ke(this,void 0,void 0,function(){var t=this;return De(this,function(r){switch(r.label){case 0:return[4,Q2(function(){return t.disposed||t.isQueryAvailable(e,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},n.prototype.pollFence=function(e){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var e=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},n.prototype.addItemToPoll=function(e,t){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Q2(function(){return r.pollItems(),r.itemsToPoll.length===0})},n.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Ky(this.gl,this.debug,e,this.framebuffer),this.debug&&ip(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Ky(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&ip(this.gl)):eC(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var r=t();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(e,t,r){this.throwIfDisposed();var a=this.gl;Ky(a,this.debug,e,this.framebuffer),this.debug&&ip(a),this.outputTexture=e,Fe(a,this.debug,function(){return a.viewport(0,0,t,r)}),Fe(a,this.debug,function(){return a.scissor(0,0,t,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(e,t,r,a){var i=this;this.throwIfDisposed(),Fe(this.gl,this.debug,function(){return i.gl.scissor(e,t,r,a)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n}();function dC(n,e){if(n.length!==e.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+e.length+" inputs");n.forEach(function(t,r){var a=t.logicalShape,i=e[r],o=i.shape;if(!On(a,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+o+" must match");if(!t.isUniform||!i.isUniform){var u=t.texShape,c=i.isUniform?null:i.texData.texShape;if(!On(u,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+u+" and "+c+" must match")}})}var QU=function(n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=t.filterWidth,a=t.inChannels,i=t.strideWidth,o=t.strideHeight,u=t.padInfo,c=t.outWidth,f=t.dilationWidth,d=t.dilationHeight,p=t.dataFormat,v=u.left,g=u.top,y=a*r,x=Gn(),w=p==="channelsLast",_=w?0:1,S=w?1:2,C="",R=0;R<=1;R++)for(var T=0;T<=1;T++)C+=`
          blockIndex = rc.y + `+T+`;
          pos = rc.x + `+R+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+g+`;
            d0 = offsetY + `+d+" * (pos / "+y+`);

            if(d0 < `+e[_]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+v+`.);
              d1 = offsetX + `+f+" * (int(mod(float(pos), "+y+".) / "+a+`.));

              if(d1 < `+e[S]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+w+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*R+T)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*R+T)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+C+`

        `+x.output+` = result;
      }
    `},$U=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=e,u=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+u+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},KU=function(n,e,t,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=t,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},XU=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=e,u=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+u+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},YU=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideHeight,t=n.strideWidth,r=n.dilationHeight,a=n.effectiveFilterHeight,i=n.effectiveFilterWidth,o=a-1-n.padInfo.top,u=i-1-n.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},ZU=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.dilationDepth,i=n.dilationHeight,o=n.dilationWidth,u=n.effectiveFilterDepth,c=n.effectiveFilterHeight,f=n.effectiveFilterWidth,d=u-1-n.padInfo.front,p=c-1-n.padInfo.top,v=f-1-n.padInfo.left,g=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+p+", "+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+f+` +
                  wR * `+f+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},e0=function(n,e,t,r,a,i,o){t===void 0&&(t=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var u=t?n[1]:n[2],c=Math.ceil(u/2),f=t?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",p=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";i&&(g=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,y="result = activation(result);");var x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+f+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+v[0]+`);
          result += (`+p[1]+" * "+v[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+x+`

        `+y+`

        setOutput(result);
      }
    `},JU=function(){function n(e,t,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(t.seedLoc,e)}},n}(),eV=function(n,e,t,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},tV=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var e=n.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=dr("rc",e),r=Pt(e),a=function(u,c,f){if(u===1)return"rc > "+c[0];for(var d="",p=u-2;p<u;p++)d+=f[p]+" >= "+c[p],p<u-1&&(d+="||");return d}(e,n,t),i=function(u,c,f,d){if(u===1)return"";var p=d.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+f+`;
  `}(e,n[n.length-1],n[n.length-2],t),o=function(u,c){var f=u.length,d=function(p,v){for(var g=[],y=0;y<=1;y++)for(var x=0;x<=1;x++){for(var w=(y===0?"r":"rp1")+", "+(x===0?"c":"cp1"),_=2;_<p;_++)w=v[v.length-1-_]+","+w;g.push(w)}return g}(f,c);return f===1?`getA(rc),
            rc + 1 >= `+u[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(n,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},nV=function(n,e,t){this.variableNames=["x"],this.outputShape=e.map(function(c,f){return c[0]+n[f]+c[1]});var r=n.length,a=Pt(r),i=e.map(function(c){return c[0]}).join(","),o=e.map(function(c,f){return c[0]+n[f]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+u+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},rV=function(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(w,_){return w[0]+n[_]+w[1]});for(var r=n.length,a=Pt(r),i=e.map(function(w){return w[0]}).join(","),o=e.map(function(w,_){return w[0]+n[_]}).join(","),u=dr("rc",r),c=dr("source",r),f=u[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+c.slice(-2).join()+")",p=[a+" rc = outputLoc;",u[r-1]+` += 1;
       if(`+f+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+u[r-2]+` += 1;
       if(`+u[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+u[r-1]+` += 1;
         if(`+f+") {"],v=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",y=0,x=r===1?2:4;y<x;y++)g+=`
        `+p[y]+`
        if (`+v+`) {
          result[`+y+"] = float("+t+`);
        } else {
          `+a+` source = rc - start;
          result[`+y+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},t0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideHeight,i=n.strideWidth,o=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,f=n.effectiveFilterWidth,d=n.padInfo.top,p=n.padInfo.left;this.outputShape=n.outShape;var v=e==="avg",g="0.0";if(v||(g="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+d+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+u+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+f+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),w=r%4,_=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+d+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+x+`; wC += 4) {
            int xC = xCCorner + wC * `+u+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              getValue(batch, xR, xC + 3 * `+u+`, d)
            );

            `+_+`
          }

          int xC = xCCorner + `+x+`;
          if (`+(w===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              initializationValue
            );

            `+_+`
          }
        }
        setOutput(`+y+`);
      }
    `}},n0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,v=n.effectiveFilterWidth,g=n.padInfo.front,y=n.padInfo.top,x=n.padInfo.left;this.outputShape=n.outShape;var w=e==="avg",_="0.0";if(w||(_="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+u+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+v+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+v+` +
                      wR * `+v+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var S=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(S="avgValue / count");var C=4*Math.floor(r/4),R=r%4,T=`
      if (`+w+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float initializationValue = `+_+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+_+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+u+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+C+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+T+`
            }

            int xC = xCCorner + `+C+`;
            if (`+(R===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(R===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(R===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+T+`
            }
          }
          setOutput(`+S+`);
        }
      }
    `}},aV=function(n,e){this.variableNames=["x"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=Math.ceil(a/t);this.outputShape=[r,i];var o="0.0",u="";e==="prod"?o="1.0":e==="min"?(o="1.0 / 1e-20",u="min"):e==="max"&&(o="-1.0 / 1e-20",u="max");var c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");var f=4*Math.floor(t/4),d=t%4,p=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+u+`(values, minMaxValue);
      }
    `,v="vec4";e==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,v="bvec4"):e==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,v="bvec4");var g="";a%t>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+f+`; i += 4) {
          int inIdx = inOffset + i;
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+f+`;
        if (`+(d===1)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===2)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===3)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+c+`);
      }
    `},iV=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var t="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),t+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Ds(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+Px(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+t+`

        setOutput(result);
      }
    `},oV=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],o=n.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],d=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},sV=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},uV=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`,
          `+c[1]/f[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(u-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},lV=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],o=n.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],d=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+f[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+f[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},cV=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},fV=function(n,e){this.variableNames=["x"];var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=n,t!==1){var r=n.map(function(i,o){return function(u){return e.indexOf(u)!==-1&&n[u]!==1?n[u]+" - coords["+u+"] - 1":"coords["+u+"]"}(o)}).join(","),a=Pt(t);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},hV=function(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=n;var r=dr("rc",t),a=r[t-1]+" + 1 < "+this.outputShape[t-1],i=r[t-2]+" + 1 < "+this.outputShape[t-2],o=Pt(t);function u(c){var f=n.map(function(d,p){return function(v,g){return e.indexOf(v)!==-1&&n[v]!==1?n[v]+" - "+g[v]+" - 1":""+g[v]}(p,c)});return"getChannel(getX("+f.join(",")+"), vec2("+f.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return u(c)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",u(c)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},pC=function(n,e,t,r,a,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var u=Pt(a.length),c=Pt(i.length),f="";t===1?f="i":t===2&&(f="i, j");var d="getIndices("+f+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var v="getUpdates("+p+")",g=e>1?"strides[j]":"strides";this.userCode=`
        `+u+" strides = "+u+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+v+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},dV=function(n,e){this.variableNames=["x","segmentIds"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=n.numSegments,o=i*Math.ceil(a/t);this.outputShape=[r,o];var u=4*Math.floor(t/4),c=t%4,f=`
        sumValue += dot(values, segFilter);
    `,d="";a%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var p="";a%t>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+f+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+f+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+f+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+f+`
        }
        setOutput(sumValue);
      }
    `},pV=function(n,e,t){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],u=[],c=0;c<e.length;c++)u.push(""+i[c]),c<n&&o.push(""+i[c]);r=o.join(),a=u.join()}var f=Pt(t);this.userCode=`
      void main() {
        `+f+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},vV=function(){function n(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,r=Pt(this.rank),a="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return r0.slice(0,o).map(function(u){return"sourceLoc."+u}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(o,u){return"sourceLoc."+r0[u]+" = start["+u+"] + coords."+r0[u]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+t+`
        setOutput(getSource(`+i+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),r0=["x","y","z","w","u","v"],mV=function(){function n(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Pt(this.rank),r=dr("coords",this.rank),a=dr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",o="getChannel(getSource("+a.join()+"), "+i+")",u=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+o+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map(function(d,p){return"start["+p+"]"}).join()+");":e.map(function(d,p){return a[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+f+`
        vec4 result = vec4(0.);
        `+u+`
        `+c+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),gV=function(n,e,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=Pt(t.length),i=Pt(t.length),o="";if(r===1)o="coords * strides + begin";else{var u=0;o=t.map(function(c,f){return u++,t.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(u-1)+"] * strides["+f+"] + begin["+f+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+n+`);
      `+a+" strides = "+a+"("+e+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},yV=function(){function n(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(e,t,r){var a,i=vC(t,r),o=mC(e,i,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var u=this.freeTextures[o].shift();return this.usedTextures[o].push(u),u}return this.numUsedTextures++,this.log(),i===Tr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Tr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Tr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Tr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Tr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),a},n.prototype.releaseTexture=function(e,t,r,a){if(this.freeTextures!=null){var i=mC(t,vC(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],u=o.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(u,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(a){e.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function vC(n,e){if(n===Or.UPLOAD)return Tr.PACKED_2X2_FLOAT32;if(n===Or.RENDER||n==null)return function(t){return ue().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Tr.PACKED_2X2_FLOAT32:Tr.UNPACKED_FLOAT32:t?Tr.PACKED_2X2_FLOAT16:Tr.UNPACKED_FLOAT16}(e);if(n===Or.DOWNLOAD||n===Or.PIXELS)return Tr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function mC(n,e,t){return n[0]+"_"+n[1]+"_"+e+"_"+t}var bV=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[r]*e[r];this.outputShape=t,this.rank=t.length;var a=Pt(this.rank),i=function(o){var u=o.length;if(u>5)throw Error("Tile for rank "+u+" is not yet supported");if(u===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],f=[],d=0;d<o.length;d++)f.push("imod("+c[d]+", "+o[d]+")");return f.join()}(n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},xV=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];this.outputShape=t,this.rank=t.length;var a=Pt(this.rank),i=function(o){var u=o.length;if(u>6)throw Error("Transpose for rank "+u+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],f=new Array(u),d=0;d<o.length;d++)f[o[d]]=c[d];return f.join()}(e);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},wV=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Pt(this.rank),i=vA("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=i[r];var u="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+t[this.rank-1],f="getChannel(getA("+o.join()+"), "+u+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+f+`;
      if(`+c+`) {
        result[1] = `+f+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+f+`;
        if(`+c+`) {
          result[3] = `+f+`;
        }
      }
      setOutput(result);
    }
    `},Lx=1.7580993408473768,Bx=1.0507009873554805,nt=function(n,e){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},_a="if (isnan(x)) return x;",_V="return x;",gC="return abs(x);",xA=_a+`
  return (x < 0.0) ? 0.0 : x;
`,wA=_a+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,_A="return (x >= 0.0) ? x : (exp(x) - 1.0);",EV=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Lx+`;
  float scale = `+Bx+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,yC="return -x;",bC="return ceil(x);",xC="return floor(x);",wC="return exp(x);",_C="return exp(x) - 1.0;",SV=_a+`
  return sin(x);
`,CV=_a+`
  return cos(x);
`,RV=_a+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,TV=_a+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,OV=_a+`
  return atan(x);
`,AV=_a+"return log(x + sqrt(x * x + 1.0));",kV=_a+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,DV=_a+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,lp="return x;",NV="return x;",EA=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SA=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,CA=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,bf=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},IV=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var e=n.length,t=dr("rc",e),r=Pt(e),a=function(u,c){if(u===1)return"rc";for(var f="",d=0;d<u;d++)f+=c[d],d<u-1&&(f+=",");return f}(e,t),i=t.slice(-2),o=e<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},cp={};function fp(n,e){if(e===void 0&&(e=!1),n==="linear")return e?NV:_V;if(n==="relu")return e?EA:xA;if(n==="elu")return e?CA:_A;if(n==="relu6")return e?SA:wA;if(n==="prelu")return e?bA:yA;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var MV=600,FV=function(n){function e(t){var r,a=n.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!ue().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var i=ti(ue().getNumber("WEBGL_VERSION"));a.binaryCache=((r=ue().getNumber("WEBGL_VERSION"))in cp||(cp[r]={}),cp[r]),a.gpgpu=new GU(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=t,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=t.gl.canvas;return a.textureManager=new yV(a.gpgpu),a.numMBBeforeWarning=ue().global.screen==null?1024:ue().global.screen.height*ue().global.screen.width*window.devicePixelRatio*MV/1024/1024,a.texData=new oA(a,W),a}return wa(e,n),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,r,a){if(ue().getBool("DEBUG")&&this.checkNumericalProblems(t),a==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:t,usage:Or.UPLOAD}),i},e.prototype.move=function(t,r,a,i){if(ue().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:a,dtype:i,values:r,usage:Or.UPLOAD})},e.prototype.readSync=function(t){var r=this.texData.get(t),a=r.values,i=r.dtype,o=r.complexTensors,u=r.slice,c=r.shape,f=r.isPacked;if(u!=null){var d=void 0;d=f?new bf(c,lp):new nt(c,lp);var p=this.runWebGLProgram(d,[{dataId:t,shape:c,dtype:i}],i),v=this.readSync(p.dataId);return this.disposeData(p.dataId),v}if(a!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return a;var g,y,x=this.activeTimers!=null;return x&&(g=Ba()),i==="complex64"?y=Rb(o.real.dataSync(),o.imag.dataSync()):y=this.getValuesFromTexture(t),x&&(this.downloadWaitMs+=Ba()-g),this.convertAndCacheOnCPU(t,y)},e.prototype.read=function(t){return ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return De(this,function(k){switch(k.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(I){return r.push(I)})];if(a=this.texData.get(t),i=a.values,o=a.shape,u=a.slice,c=a.dtype,f=a.complexTensors,d=a.isPacked,u!=null)return p=void 0,p=d?new bf(o,lp):new nt(o,lp),v=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:c}],c),g=this.read(v.dataId),this.disposeData(v.dataId),[2,g];if(i!=null)return[2,this.convertAndCacheOnCPU(t)];if(!ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ue().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,c!=="complex64"&&ue().get("WEBGL_BUFFER_SUPPORTED")&&(x=this.decode(t),w=this.texData.get(x.dataId),y=(N=this.gpgpu).createBufferFromTexture.apply(N,[w.texture].concat(Mf(o)))),this.pendingRead.set(t,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([f.real.data(),f.imag.data()])];case 3:return S=k.sent(),C=S[0],R=S[1],_=Rb(C,R),[3,5];case 4:y==null?_=this.getValuesFromTexture(t):(T=Ie(o),_=this.gpgpu.downloadFloat32MatrixFromBuffer(y,T)),k.label=5;case 5:return x!=null&&this.disposeData(x.dataId),O=this.convertAndCacheOnCPU(t,_),D=this.pendingRead.get(t),this.pendingRead.delete(t),D.forEach(function(I){return I(O)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,O]}})})},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var a=t[r];if(!EB(a))throw ue().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.isPacked,c=Ie(i);if(ue().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var f=this.decode(t),d=this.texData.get(f.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(Mf(i))).subarray(0,c);return this.disposeData(f.dataId),p}var v=ue().getBool("WEBGL_PACK")&&u===!0,g=v?Xy(i):i,y=v?new _U(g):new wU(g),x=this.runWebGLProgram(y,[{shape:g,dtype:o,dataId:t}],"float32"),w=this.texData.get(x.dataId),_=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,c);return this.disposeData(x.dataId),_},e.prototype.time=function(t){return ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f;return De(this,function(d){switch(d.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,t(),o=Kl(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),u=Kl(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return f=d.sent(),c.kernelMs=rB(f),c.getExtraProfileInfo=function(){return f.map(function(p,v){return{name:u[v],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ba(),endMs:null}},e.prototype.endTimer=function(t){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Ba(),t)},e.prototype.getQueryTime=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){return ue().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var r=this.texData.get(t),a=r.texture,i=r.dtype,o=r.texShape,u=r.usage,c=r.isPacked,f=r.slice,d=f&&f.origDataId||t,p=this.dataRefCount.get(d);p>1?this.dataRefCount.set(d,p-1):(this.dataRefCount.delete(d),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,u,c)));var v=this.texData.get(t);v.texture=null,v.texShape=null,v.isPacked=!1,v.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return ue().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=W.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(i){return a.texData.get(i.dataId).texture==null&&i.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,r){var a=this.makeOutput(t.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,a);if(Ie(a)===0)return zn([],a,t.dtype);var i=this.texData.get(t.dataId).isPacked,o=aA(t.shape,r,a);if(i||!o){var u=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mV(a):new vV(a),c=u.getCustomSetupFunc(r);return this.compileAndRun(u,[t],null,c)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,a)},e.prototype.shallowSlice=function(t,r,a){var i=this.texData.get(t.dataId),o=this.makeOutput(a,t.dtype),u=this.texData.get(o.dataId);Object.assign(u,i),u.shape=a,u.dtype=t.dtype;var c=iA(r,t.strides);i.slice&&(c+=i.slice.flatOffset),u.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||t.dataId};var f=this.dataRefCount.get(u.slice.origDataId)||1;return this.dataRefCount.set(u.slice.origDataId,f+1),o},e.prototype.stridedSlice=function(t,r,a,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,a,i);var o=Dx(r,a,i);if(o.some(function(c){return c===0}))return zn([],o);var u=new gV(r,i,o);return this.compileAndRun(u,[t])},e.prototype.reverse=function(t,r){var a=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hV(t.shape,r):new fV(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var a=t.map(function(g){return $r(g)}),i=t.map(function(g){return Va(g)});return Ln(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>ue().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),u=this.concat(t.slice(0,o),r),c=this.concat(t.slice(o),r);return this.concat([u,c],r)}if(ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var f=new sU(t.map(function(g){return g.shape}),r);return this.compileAndRun(f,t)}var d=Yl(t.map(function(g){return g.shape}),r),p=t.map(function(g){return g.as2D(-1,Ie(g.shape.slice(r)))}),v=new oU(p.map(function(g){return g.shape}));return this.compileAndRun(v,p).reshape(d)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,yC,t.dtype);var r=new nt(t.shape,yC);return this.compileAndRun(r,[t])},e.prototype.batchMatMul=function(t,r,a,i){var o=a?t.shape[2]:t.shape[1],u=i?r.shape[1]:r.shape[2],c=a?t.shape[1]:t.shape[2],f=t.shape[0];if((o===1||u===1)&&c>1e3){a&&(t=t.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var d=u===1?t:t.as3D(f,c,1),p=u===1?2:1,v=u===1?r.as3D(f,1,c):r;return this.multiply(d,v).sum(p,!0)}var g=Bn(t.dtype,r.dtype),y=new e0(t.shape,[f,o,u],a,i);return this.compileAndRun(y,[t,r],g)},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=i?r.shape[2]:r.shape[1],p=o?a.shape[1]:a.shape[2],v=r.shape[0],g=Bn(r.dtype,a.dtype),y=u!=null,x=f!=null,w=c?fp(c,!0):null,_=new e0(r.shape,[v,d,p],i,o,y,w,x),S=[r,a];return u&&S.push(u),f&&S.push(f),this.compileAndRun(_,S,g)},e.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var a=this.texData.get(t.dataId),i=this.texData.get(r.dataId),o=new oC(tU,t.shape,r.shape),u=new oC(nU,t.shape,r.shape),c=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],f=this.compileAndRun(o,c),d=this.compileAndRun(u,c),p=this.complex(f,d);return f.dispose(),d.dispose(),p}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,sC,t.dtype);var v=new Kt(sC,t.shape,r.shape);return this.compileAndRun(v,[t,r],t.dtype)},e.prototype.batchNormalization=function(t,r,a,i,o,u){var c=[t,r,a],f=null;u!=null&&(f=u.shape,c.push(u));var d=null;if(o!=null&&(d=o.shape,c.push(o)),ue().getBool("WEBGL_PACK_NORMALIZATION")){var p=new eU(t.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(p,c)}var v=new Jz(t.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(v,c)},e.prototype.localResponseNormalization4D=function(t,r,a,i,o){var u=ue().getBool("WEBGL_PACK_NORMALIZATION")?new XU(t.shape,r,a,i,o):new $U(t.shape,r,a,i,o);return this.compileAndRun(u,[t])},e.prototype.LRNGrad=function(t,r,a,i,o,u,c){var f=new KU(r.shape,i,o,u,c);return this.compileAndRun(f,[r,a,t])},e.prototype.tile=function(t,r){if(t.dtype==="string"){var a=this.readSync(t.dataId).map(function(o){return sv(o)});return dA(Je(t.shape,t.dtype,a),r)}var i=new bV(t.shape,r);return this.compileAndRun(i,[t])},e.prototype.pad=function(t,r,a){var i=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rV(t.shape,r,a):new nV(t.shape,r,a);return this.compileAndRun(i,[t])},e.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var a=ue().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wV(t.shape,r):new xV(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.gather=function(t,r,a){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,a);var i=new OU(t.shape,r.size,a);return this.compileAndRun(i,[t,r])},e.prototype.batchToSpaceND=function(t,r,a){L(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(p,v){return p*v}),o=dv(t.shape,r,i),u=pv(o.length,r.length),c=vv(t.shape,r,i),f=eA(a,r.length),d=tA(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,d)},e.prototype.spaceToBatchND=function(t,r,a){L(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(v,g){return v*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=dv(c.shape,r,i,!1),d=pv(f.length,r.length,!1),p=vv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},e.prototype.reduce=function(t,r,a){var i=t.shape[0],o=t.shape[1],u=Yy(o),c=new aV({windowSize:u,inSize:o,batchSize:i},r),f=this.compileAndRun(c,[t],a);return f.shape[1]===1?f:this.reduce(f,r,a)},e.prototype.argReduce=function(t,r,a){a===void 0&&(a=null);var i=t.shape[0],o=t.shape[1];a!=null&&(i=a.shape[0],o=a.shape[1]);var u=Yy(o),c=new Wz({windowSize:u,inSize:o,batchSize:i},r,a==null),f=[t];a!=null&&f.push(a);var d=this.compileAndRun(c,f,"int32");return d.shape[1]===1?d:this.argReduce(t,r,d)},e.prototype.argReducePacked=function(t,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:t.shape,o=Yy(i[i.length-1]),u=new Xz(i,o,r,a==null),c=a==null?[t]:[t,a],f=this.compileAndRun(u,c,"int32");return f.rank===t.rank?this.argReducePacked(t,r,f):f},e.prototype.sum=function(t,r){Rr("sum",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o),c=qy(t.dtype);return this.reduce(u,"sum",c).reshape(i)},e.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o),c=qy(t.dtype);return this.reduce(u,"prod",c).reshape(i)},e.prototype.unsortedSegmentSum=function(t,r,a){var i=0,o=ni([i],t.rank),u=t;o!=null&&(u=t.transpose(o),i=ri(1,t.rank)[0]);var c=function(g,y,x){for(var w=[],_=g.length,S=0;S<_;S++)S!==y?w.push(g[S]):w.push(x);return w}(u.shape,i,a),f=Ie([u.shape[i]]),d=u.as2D(-1,f),p=qy(t.dtype),v=this.segOpCompute(d,"unsortedSegmentSum",r,p,a).reshape(c);return o!=null&&(v=v.transpose(Tx(o))),v},e.prototype.segOpCompute=function(t,r,a,i,o){var u=t.shape[0],c=t.shape[1],f=function(v,g){var y,x=!1;for(v<=rA?(y=v,x=!0):y=gb(v,Math.floor(Math.sqrt(v)));!x;)y>g||y===v?x=!0:y=gb(v,y+1);return y}(c,o),d=new dV({windowSize:f,inSize:c,batchSize:u,numSegments:o}),p=this.compileAndRun(d,[t,a],i);return p.shape[1]===o?p:(a=hv(0,o).tile([c/f]),this.segOpCompute(p,r,a,i,o))},e.prototype.argMinMaxReduce=function(t,r,a){var i=[r];if(Rr("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,t.rank),!ue().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=Wn(t.shape,i),u=o[0],c=Ie(o[1]),f=t.as2D(-1,c);return this.argReduce(f,a).reshape(u)}return this.argReducePacked(t,a)},e.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},e.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},e.prototype.cumsum=function(t,r,a,i){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var o=new mU(t.shape,a,i);return this.compileAndRun(o,[t])},e.prototype.equal=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Kt("return float(a == b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.notEqual=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Kt("return float(a != b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Kt("return float(a < b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.lessEqual=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Kt("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Kt("return float(a > b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greaterEqual=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Kt("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalNot=function(t){var r=new nt(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},e.prototype.logicalAnd=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Kt("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalOr=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Kt("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.select=function(t,r,a){var i=new pV(t.rank,r.shape,r.rank);return this.compileAndRun(i,[t,r,a],Bn(r.dtype,a.dtype))},e.prototype.where=function(t){cv("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return Fx(t.shape,r)},e.prototype.topk=function(t,r,a){return pA(t.dataSync(),t.shape,t.dtype,r)},e.prototype.min=function(t,r){Rr("min",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"min",u.dtype).reshape(i)},e.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.mod=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);Rr("max",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"max",u.dtype).reshape(i)},e.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.all=function(t,r){Rr("all",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"all",u.dtype).reshape(i)},e.prototype.any=function(t,r){Rr("any",r,t.rank);var a=Wn(t.shape,r),i=a[0],o=Ie(a[1]),u=t.as2D(-1,o);return this.reduce(u,"any",u.dtype).reshape(i)},e.prototype.realDivide=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Kt(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"float32")},e.prototype.floorDiv=function(t,r){if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Kt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"int32")},e.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,Zy);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var a=Bn(t.dtype,r.dtype);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Zy,a);var i=new Kt(Zy,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.packedUnaryOp=function(t,r,a){var i=new bf(t.shape,r);return this.compileAndRun(i,[t],a)},e.prototype.packedBinaryOp=function(t,r,a,i,o){o===void 0&&(o=!1);var u=new Ti(a,t.shape,r.shape,o);return this.compileAndRun(u,[t,r],i)},e.prototype.complexSeparableBinaryOp=function(t,r,a){var i=this,o=this.texData.get(t.dataId),u=this.texData.get(r.dataId),c=[[o.complexTensors.real,u.complexTensors.real],[o.complexTensors.imag,u.complexTensors.imag]].map(function(v){var g=v[0],y=v[1],x=i.makeComplexComponentTensorInfo(t,g),w=i.makeComplexComponentTensorInfo(r,y),_=new Kt(a,t.shape,r.shape);return i.compileAndRun(_,[x,w],Bn(g.dtype,y.dtype))}),f=c[0],d=c[1],p=this.complex(f,d);return f.dispose(),d.dispose(),p},e.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>ue().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),a=this.addN(t.slice(0,r)),i=this.addN(t.slice(r));return this.addN([a,i])}var o=t.map(function(f){return f.dtype}).reduce(function(f,d){return Bn(f,d)}),u=t.map(function(f){return f.shape}),c=ue().getBool("WEBGL_PACK")?new qz(t[0].shape,u):new jz(t[0].shape,u);return this.compileAndRun(c,t,o)},e.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,Jy);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var a=Bn(t.dtype,r.dtype);if(ue().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Jy,t.dtype);var i=new Kt(Jy,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.pow=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),i=Bn(t.dtype,r.dtype);return this.compileAndRun(a,[t,r],i)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,bC,t.dtype);var r=new nt(t.shape,bC);return this.compileAndRun(r,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,xC,t.dtype);var r=new nt(t.shape,xC);return this.compileAndRun(r,[t])},e.prototype.sign=function(t){var r=new nt(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},e.prototype.isNaN=function(t){var r=new nt(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isInf=function(t){var r=new nt(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isFinite=function(t){var r=new nt(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.round=function(t){var r=new nt(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,wC,t.dtype);var r=new nt(t.shape,wC);return this.compileAndRun(r,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,_C,t.dtype);var r=new nt(t.shape,_C);return this.compileAndRun(r,[t])},e.prototype.softmax=function(t,r){var a=yn([r],t.shape),i=this.max(t,a),o=mr(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new nt(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},e.prototype.log1p=function(t){var r=new nt(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},e.prototype.sqrt=function(t){var r=new nt(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new nt(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},e.prototype.reciprocal=function(t){var r=new nt(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},e.prototype.relu=function(t){var r;return r=ue().getBool("WEBGL_PACK")?new bf(t.shape,EA):new nt(t.shape,xA),this.compileAndRun(r,[t])},e.prototype.relu6=function(t){var r;return r=ue().getBool("WEBGL_PACK")?new bf(t.shape,SA):new nt(t.shape,wA),this.compileAndRun(r,[t])},e.prototype.prelu=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(bA,t.shape,r.shape):new Kt(yA,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.elu=function(t){if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,CA,t.dtype);var r=new nt(t.shape,_A);return this.compileAndRun(r,[t])},e.prototype.eluDer=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new Kt("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.selu=function(t){var r=new nt(t.shape,EV);return this.compileAndRun(r,[t])},e.prototype.int=function(t){var r=new nt(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},e.prototype.clip=function(t,r,a){var i,o=(i=ue().getBool("WEBGL_PACK_CLIP")?new aU(t.shape):new rU(t.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[t],null,o)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(ue().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,gC,t.dtype);var r=new nt(t.shape,gC);return this.compileAndRun(r,[t])},e.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),a=new iU(t.shape),i=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(a,i)},e.prototype.sigmoid=function(t){var r=new nt(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},e.prototype.softplus=function(t){var r=new nt(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},e.prototype.sin=function(t){var r=new nt(t.shape,SV);return this.compileAndRun(r,[t])},e.prototype.cos=function(t){var r=new nt(t.shape,CV);return this.compileAndRun(r,[t])},e.prototype.tan=function(t){var r=new nt(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},e.prototype.asin=function(t){var r=new nt(t.shape,RV);return this.compileAndRun(r,[t])},e.prototype.acos=function(t){var r=new nt(t.shape,TV);return this.compileAndRun(r,[t])},e.prototype.atan=function(t){var r=new nt(t.shape,OV);return this.compileAndRun(r,[t])},e.prototype.atan2=function(t,r){var a=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.sinh=function(t){var r=new nt(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.cosh=function(t){var r=new nt(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.tanh=function(t){var r=new nt(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},e.prototype.asinh=function(t){var r=new nt(t.shape,AV);return this.compileAndRun(r,[t])},e.prototype.acosh=function(t){var r=new nt(t.shape,kV);return this.compileAndRun(r,[t])},e.prototype.atanh=function(t){var r=new nt(t.shape,DV);return this.compileAndRun(r,[t])},e.prototype.erf=function(t){var r=new nt(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},e.prototype.step=function(t,r){var a=new nt(t.shape,function(i){return i===void 0&&(i=0),_a+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(a,[t])},e.prototype.conv2dByMatMul=function(t,r,a,i,o,u){var c=t.shape,f=this.texData.get(t.dataId),d=a.inChannels,p=c[0]*c[1]*c[2],v=a.outChannels,g=a.dataFormat==="channelsLast",y=(p===1||v===1)&&d>1e3,x=c[2]%2!=0&&!!f.isPacked;if(y||!ue().getBool("WEBGL_LAZILY_UNPACK")||!ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!x){var w=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],_=this.reshape(t,[1,w,a.inChannels]),S=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:_,b:S,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),a.outShape)}var C=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),R={dataId:t.dataId,shape:[1,C,a.inChannels],dtype:t.dtype},T=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,L(sp(f.shape,R.shape),function(){return"packed reshape "+f.shape+" to "+R.shape+" isn't free"});var O=this.reshape(r,[1,a.inChannels,a.outChannels]),D=this.fusedBatchMatMul({a:R,b:O,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),N=this.texData.get(D.dataId);return L(N.isPacked,function(){return"batchMatMul result is expected to be packed"}),f.shape=T,N.shape=a.outShape,W.makeTensorFromDataId(D.dataId,a.outShape,D.dtype)},e.prototype.conv2dWithIm2Row=function(t,r,a,i,o,u){var c=a.filterWidth,f=a.filterHeight,d=a.inChannels,p=a.outWidth,v=a.outHeight,g=a.dataFormat==="channelsLast",y=c*f*d,x=v*p,w=[y,x],_=t.squeeze([0]),S=r.reshape([1,y,-1]),C=new QU(w,_.shape,a),R=this.compileAndRun(C,[_]).reshape([1,w[0],w[1]]),T=i!=null,O=u!=null,D=o?fp(o,!0):null,N=new e0(R.shape,[1,x,a.outChannels],!0,!1,T,D,O),k=[R,S];i&&k.push(i),O&&k.push(u);var I=this.compileAndRun(N,k);return g?I.reshape([1,v,p,a.outChannels]):I.reshape([1,a.outChannels,v,p])},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,o,u,c);if(ue().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,o,u,c);var f=o!=null,d=c!=null,p=u?fp(u,!1):null,v=new uC(i,f,p,d),g=[r,a];return o&&g.push(o),c&&g.push(c),this.compileAndRun(v,g)},e.prototype.conv2d=function(t,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,a);if(ue().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,a);var i=new uC(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerInput=function(t,r,a){var i=new lU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerFilter=function(t,r,a){var i=new uU(a);return this.compileAndRun(i,[t,r])},e.prototype.fusedDepthwiseConv2D=function(t){var r,a=t.input,i=t.filter,o=t.convInfo,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,p=c?fp(c,d):null,v=[a,i],g=u!=null,y=f!=null;return g&&v.push(u),y&&v.push(f),d?(r=new cC(o,g,p,y),this.compileAndRun(r,v)):(r=new lC(o,g,p,y),this.compileAndRun(r,v))},e.prototype.depthwiseConv2D=function(t,r,a){var i;return ue().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new cC(a),this.compileAndRun(i,[t,r])):(i=new lC(a),this.compileAndRun(i,[t,r]))},e.prototype.depthwiseConv2DDerInput=function(t,r,a){var i=new dU(a);return this.compileAndRun(i,[t,r])},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){var i=new hU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3d=function(t,r,a){var i=new pU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerInput=function(t,r,a){var i=new fU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerFilter=function(t,r,a){var i=new cU(a);return this.compileAndRun(i,[t,r])},e.prototype.maxPool=function(t,r){var a=new t0(r,"max",!1);return this.compileAndRun(a,[t])},e.prototype.avgPool=function(t,r){var a=new t0(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPoolBackprop=function(t,r,a,i){var o=new t0(i,"max",!0),u=this.compileAndRun(o,[r]),c=new YU(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},e.prototype.avgPoolBackprop=function(t,r,a){var i=new Yz(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.cast=function(t,r){return lA(t,r,this)},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var d=new Array(a);for(u=0;u<d.length;u++)c[r]=u,d[u]=this.slice(t,c,f).reshape(i);return d},e.prototype.avgPool3d=function(t,r){var a=new n0(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,r,a){var i=new Zz(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.maxPool3d=function(t,r){var a=new n0(r,"max",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,r,a,i){var o=new n0(i,"max",!0),u=this.compileAndRun(o,[r]),c=new ZU(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},e.prototype.reshape=function(t,r){var a=this.texData.get(t.dataId);if(a.isPacked&&!sp(t.shape,r)&&(a.texture===null||!sp(a.shape,r))){var i=this.packedReshape(t,r);return W.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return Cb(t,r)},e.prototype.resizeBilinear=function(t,r,a,i){var o=ue().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new uV(t.shape,r,a,i):new sV(t.shape,r,a,i);return this.compileAndRun(o,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,r,a){var i=new oV(t,r,a);return this.compileAndRun(i,[t])},e.prototype.resizeNearestNeighbor=function(t,r,a,i){var o=new cV(t.shape,r,a,i);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){var i=new lV(t,r,a);return this.compileAndRun(i,[t])},e.prototype.multinomial=function(t,r,a,i){var o=r?t:Ui(t),u=o.shape[0],c=o.shape[1],f=new JU(u,c,a),d=f.getCustomSetupFunc(i);return this.compileAndRun(f,[o],"int32",d)},e.prototype.oneHot=function(t,r,a,i){var o=new eV(t.size,r,a,i);return this.compileAndRun(o,[t])},e.prototype.diag=function(t){var r=new xU(t.size);return this.compileAndRun(r,[t])},e.prototype.nonMaxSuppression=function(t,r,a,i,o){return cv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Ix(t.dataSync(),r.dataSync(),a,i,o)},e.prototype.cropAndResize=function(t,r,a,i,o,u){var c=new vU(t.shape,r.shape,i,o,u);return this.compileAndRun(c,[t,r,a],"float32")},e.prototype.depthToSpace=function(t,r,a){L(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=t.shape[0],o=a==="NHWC"?t.shape[1]:t.shape[2],u=a==="NHWC"?t.shape[2]:t.shape[3],c=a==="NHWC"?t.shape[3]:t.shape[1],f=o*r,d=u*r,p=c/(r*r),v=new bU(a==="NHWC"?[i,f,d,p]:[i,p,f,d],r,a);return this.compileAndRun(v,[t])},e.prototype.split=function(t,r,a){return hA(t,r,a)},e.prototype.scatterND=function(t,r,a){var i=mv(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=[d/c,c],v=t.reshape([u,o]),g=r.reshape([u,c]);if(d===0)return Cb(zn([]),a);var y=we(0),x=new pC(u,o,v.rank,g.rank,f,p);return this.compileAndRun(x,[g,v,y]).reshape(a)},e.prototype.sparseToDense=function(t,r,a,i){var o=mv(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.strides,d=o.outputSize,p=new pC(c,u,t.rank,r.rank,f,[d,1]);return this.compileAndRun(p,[r,t,i]).reshape(a)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,r){var a=this.texData.get(t.dataId),i=new hC(CU,t.shape,r),o=new hC(RU,t.shape,r),u=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag)],c=this.compileAndRun(i,u),f=this.compileAndRun(o,u),d=this.complex(c,f).as2D(t.shape[0],t.shape[1]);return c.dispose(),f.dispose(),d},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=nA(t,r),u=o[0],c=o[1],f=o[2],d=o[3],p=r.reshape([c,i]),v=t.reshape([t.size/f,f]),g=new AU(i,d,[c,f]);return this.compileAndRun(g,[v,p]).reshape(u)},e.prototype.fill=function(t,r,a){if((a=a||Rh(r))==="string"){var i=ov(a,Ie(t));return i.fill(r),W.makeTensor(i,t,a,this)}var o=new TU(t,r),u=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],a,u)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,r,a){return cA(t,r,a)},e.prototype.makeTensorInfo=function(t,r){var a=this.write(null,t,r);return this.texData.get(a).usage=null,{dataId:a,shape:t,dtype:r}},e.prototype.makeOutput=function(t,r){var a=this.makeTensorInfo(t,r).dataId;return W.makeTensorFromDataId(a,t,r,this)},e.prototype.unpackTensor=function(t){var r=new IV(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},e.prototype.packTensor=function(t){var r=new tV(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,r){var a=[uv(t.shape)].concat(lv(t.shape)),i={dtype:t.dtype,shape:a,dataId:t.dataId},o=[uv(r)].concat(lv(r)),u=new iV(o,a),c=this.runWebGLProgram(u,[i],t.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},e.prototype.decode=function(t){var r,a=this.texData.get(t),i=a.isPacked,o=a.shape,u=a.dtype,c=Xy(o);return r=i?new yU(c):new gU(c),{dtype:u,shape:o,dataId:this.runWebGLProgram(r,[{shape:c,dtype:u,dataId:t}],u,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,r,a,i,o){var u=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(t.outputShape,a),f=this.texData.get(c.dataId);if(t.packedOutput&&(f.isPacked=!0),t.outPackingScheme===sh.DENSE){var d=Mf(t.outputShape);f.texShape=d.map(function(C){return 2*C})}if(t.outTexUsage!=null&&(f.usage=t.outTexUsage),Ie(c.shape)===0)return f.values=ih(c.dtype,0),c;var p=[],v=r.map(function(C){if(C.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var R=u.texData.get(C.dataId);if(R.texture==null){if(!t.packedInputs&&Ie(C.shape)<=ue().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:C.shape,texData:null,isUniform:!0,uniformValues:R.values};t.packedInputs&&(R.isPacked=!0,R.shape=C.shape)}else if(!!R.isPacked!=!!t.packedInputs)C=R.isPacked?u.unpackTensor(C):u.packTensor(C),p.push(C),R=u.texData.get(C.dataId);else if(R.isPacked&&!sp(R.shape,C.shape)){var T=C,O=C.shape;C.shape=R.shape,C=u.packedReshape(C,O),p.push(C),R=u.texData.get(C.dataId),T.shape=O}return u.uploadToGPU(C.dataId),{shape:C.shape,texData:R,isUniform:!1}});this.uploadToGPU(c.dataId);var g,y={shape:c.shape,texData:f,isUniform:!1},x=function(C,R,T){var O="";R.concat(T).forEach(function(k){var I=k.texData!=null&&k.texData.slice!=null&&k.texData.slice.flatOffset>0,B=k.isUniform?"uniform":k.texData.texShape;O+=k.shape+"_"+B+"_"+I});var D=C.userCode,N=C.constructor.name;return N+="_"+O+"_"+D}(t,v,y),w=this.getAndSaveBinary(x,function(){return function(C,R,T,O){var D=R.userCode,N=T.map(function(G,Y){var F={logicalShape:G.shape,texShape:G.isUniform?null:G.texData.texShape,isUniform:G.isUniform,isPacked:!G.isUniform&&G.texData.isPacked,flatOffset:null};return G.texData!=null&&G.texData.slice!=null&&G.texData.slice.flatOffset>0&&(F.flatOffset=G.texData.slice.flatOffset),{name:R.variableNames[Y],shapeInfo:F}}),k=N.map(function(G){return G.shapeInfo}),I={logicalShape:O.shape,texShape:O.texData.texShape,isUniform:!1,isPacked:O.texData.isPacked,flatOffset:null},B=Hz(N,I,D,R.packedInputs),U=C.createProgram(B),ee=null,te=C.getUniformLocation(U,"NAN",!1);ue().getNumber("WEBGL_VERSION")===1&&(ee=C.getUniformLocation(U,"INFINITY",!1));for(var re={},q=0;q<R.variableNames.length;q++){var Z=R.variableNames[q];re[Z]=C.getUniformLocation(U,Z,!1),re["offset"+Z]=C.getUniformLocation(U,"offset"+Z,!1)}return{program:R,source:B,webGLProgram:U,uniformLocations:re,inShapeInfos:k,outShapeInfo:I,infLoc:ee,nanLoc:te}}(u.gpgpu,t,v,y)}),_=this.activeTimers!=null;if(_&&(g=this.startTimer()),function(C,R,T,O,D){dC(R.inShapeInfos,T),dC([R.outShapeInfo],[O]);var N=O.texData.texture,k=O.texData.texShape;O.texData.isPacked?C.setOutputPackedMatrixTexture(N,k[0],k[1]):C.setOutputMatrixTexture(N,k[0],k[1]),C.setProgram(R.webGLProgram),ue().getNumber("WEBGL_VERSION")===1&&R.infLoc!==null&&C.gl.uniform1f(R.infLoc,1/0),R.nanLoc!==null&&C.gl.uniform1f(R.nanLoc,NaN),T.forEach(function(I,B){var U=R.program.variableNames[B],ee=R.uniformLocations[U],te=R.uniformLocations["offset"+U];if(ee!=null)if(I.isUniform)if(Ie(I.shape)<2)C.gl.uniform1f(ee,I.uniformValues[0]);else{var re=I.uniformValues;re instanceof Float32Array||(re=new Float32Array(re)),C.gl.uniform1fv(ee,re)}else I.texData.slice!=null&&te!=null&&C.gl.uniform1i(te,I.texData.slice.flatOffset),C.setInputMatrixTexture(I.texData.texture,ee,B)}),D!=null&&D(C,R.webGLProgram),C.executeProgram()}(this.gpgpu,w,v,y,i),p.forEach(function(C){return u.disposeData(C.dataId)}),_&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)})),!ue().getBool("WEBGL_LAZILY_UNPACK")&&f.isPacked&&o===!1){var S=this.unpackTensor(c);return this.disposeData(c.dataId),S}return c},e.prototype.compileAndRun=function(t,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var u=this.runWebGLProgram(t,r,a,i,o);return W.makeTensorFromDataId(u.dataId,u.shape,u.dtype)},e.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(ue().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Te(function(){if(!ue().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ue().getBool("DEBUG");ue().set("DEBUG",!1);var a=t.abs(we(1e-8)).dataSync()[0];if(ue().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.values,c=a.texture,f=a.usage,d=a.isPacked;if(c==null){var p,v=this.activeTimers!=null;v&&(p=Ba());var g=a.texShape;if(g==null&&(g=VB(i,d),a.texShape=g),u!=null){var y=Xy(i),x=void 0,w=g[1],_=g[0],S=u instanceof Uint8Array;d?(w=(r=Oh(g[0],g[1]))[0],_=r[1],x=new SU(y,[_,w],S)):x=new EU(y,[_,w],S);var C=this.makeTensorInfo([_,w],o);this.texData.get(C.dataId).usage=S?Or.PIXELS:Or.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),w,_,u);var R=this.runWebGLProgram(x,[C],o,null,!0),T=this.texData.get(R.dataId);a.texture=T.texture,a.texShape=T.texShape,a.isPacked=T.isPacked,a.usage=T.usage,this.disposeData(C.dataId),this.texData.delete(R.dataId),a.values=null,v&&(this.uploadWaitMs+=Ba()-p)}else{var O=this.acquireTexture(g,f,o,d);a.texture=O}}},e.prototype.convertAndCacheOnCPU=function(t,r){var a=this.texData.get(t),i=a.dtype;return this.releaseGPUData(t),r!=null&&(a.values=function(o,u){if(u==="float32"||u==="complex64")return o;if(u==="int32"||u==="bool"){for(var c=u==="int32"?new Int32Array(o.length):new Uint8Array(o.length),f=0;f<c.length;++f)c[f]=Math.round(o[f]);return c}throw new Error("Unknown dtype "+u)}(r,i)),a.values},e.prototype.acquireTexture=function(t,r,a,i){if(this.numBytesInGPU+=this.computeBytes(t,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,i)},e.prototype.computeBytes=function(t,r){return t[0]*t[1]*BO(r)},e}(sA);HO()&&W.registerBackend("webgl",function(){return new FV},2);var PV=j({square_:function(n){var e=P(n,"x","square"),t=[e];return W.runKernelFunc(function(r,a){return a([e]),r.square(e)},{x:e},null,"Square",{},t,[])}}),lh="SquaredDifference",RA=j({squaredDifference_:function(n,e){var t,r=P(n,"a","squaredDifference"),a=P(e,"b","squaredDifference");t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return W.runKernelFunc(function(u,c){var f=u.squaredDifference(r,a);return c([r,a]),f},i,function(u,c){var f=c[0],d=c[1],p=we(2);return{a:function(){return u.mul(f.sub(d).mul(p))},b:function(){return u.mul(d.sub(f).mul(p))}}},lh,{},o,[])}}),LV=j({abs_:function(n){var e=P(n,"x","abs");return e.dtype==="complex64"?W.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):W.runKernelFunc(function(t,r){var a=t.abs(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.toFloat().step(-1))}}},"Abs")}}),BV=j({acos_:function(n){var e=P(n,"x","acos");return W.runKernelFunc(function(t,r){var a=t.acos(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(we(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),zV=j({acosh_:function(n){var e=P(n,"x","acosh");return W.runKernelFunc(function(t,r){var a=t.acosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),UV=j({asin_:function(n){var e=P(n,"x","asin");return W.runKernelFunc(function(t,r){var a=t.asin(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(we(1).sub(a.toFloat().square()).sqrt())}}})}}),VV=j({asinh_:function(n){var e=P(n,"x","asinh");return W.runKernelFunc(function(t,r){var a=t.asinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(we(1).add(a.toFloat().square()).sqrt())}}})}}),jV=j({atan_:function(n){var e=P(n,"x","atan");return W.runKernelFunc(function(t,r){var a=t.atan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().square().add(1))}}})}}),qV=j({atanh_:function(n){var e=P(n,"x","atanh");return W.runKernelFunc(function(t,r){var a=t.atanh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(we(1).sub(a.toFloat().square()))}}})}}),WV=j({ceil_:function(n){var e=P(n,"x","ceil");return W.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),zx=j({clipByValue_:function(n,e,t){var r=P(n,"x","clipByValue");L(e<=t,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."});var a=[r],i={min:e,max:t};return W.runKernelFunc(function(o,u){var c=o.clip(r,e,t);return u([r]),c},{x:r},function(o,u){var c=u[0];return{x:function(){return o.where(c.greaterEqual(e).logicalAnd(c.lessEqual(t)),gt(o))}}},"ClipByValue",i,a)}}),HV=j({cos_:function(n){var e=P(n,"x","cos"),t=[e];return W.runKernelFunc(function(r,a){var i=r.cos(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),GV=j({cosh_:function(n){var e=P(n,"x","cosh");return W.runKernelFunc(function(t,r){var a=t.cosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(t)}}})}}),QV=j({erf_:function(n){var e=P(n,"x","erf");return L(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),W.runKernelFunc(function(t,r){var a=t.erf(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Tb=j({exp_:function(n){var e=P(n,"x","exp");return W.runKernelFunc(function(t,r){var a=t.exp(e);return r([a]),a},{x:e},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),$V=j({expm1_:function(n){var e=P(n,"x","expm1");return W.runKernelFunc(function(t,r){var a=t.expm1(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.exp())}}})}}),KV=j({floor_:function(n){var e=P(n,"x","floor");return W.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),XV=j({log_:function(n){var e=P(n,"x","log"),t=[e];return W.runKernelFunc(function(r,a){var i=r.log(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},t)}}),YV=j({log1p_:function(n){var e=P(n,"x","log1p");return W.runKernelFunc(function(t,r){var a=t.log1p(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.add(1))}}})}}),ZV=j({logSigmoid_:function(n){var e=P(n,"x","logSigmoid");return W.runKernelFunc(function(t,r){var a=t.softplus(e.neg()).neg();return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.neg().sigmoid())}}})}}),xv=j({neg_:function(n){var e=P(n,"x","neg"),t=[e];return W.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),JV=j({reciprocal_:function(n){var e=P(n,"x","reciprocal");return W.runKernelFunc(function(t,r){var a=t.reciprocal(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.square().neg())}}})}}),ej=j({round_:function(n){var e=P(n,"x","round");return W.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),TA=j({rsqrt_:function(n){var e=P(n,"x","rsqrt"),t=[e];return W.runKernelFunc(function(r,a){var i=r.rsqrt(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),OA=j({sigmoid_:function(n){var e=P(n,"x","sigmoid");return W.runKernelFunc(function(t,r){var a=t.sigmoid(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.mul(we(1).sub(a)))}}},"Sigmoid")}}),tj=j({sign_:function(n){var e=P(n,"x","sign");return W.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),nj=j({isNaN_:function(n){var e=P(n,"x","isNaN");return W.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),rj=j({isInf_:function(n){var e=P(n,"x","isInf");return W.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),aj=j({isFinite_:function(n){var e=P(n,"x","isFinite");return W.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return gt(t)}}})}}),ij=j({sin_:function(n){var e=P(n,"x","sin"),t=[e];return W.runKernelFunc(function(r,a){var i=r.sin(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},t)}}),oj=j({sinh_:function(n){var e=P(n,"x","sinh");return W.runKernelFunc(function(t,r){var a=t.sinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(t)}}})}}),sj=j({softplus_:function(n){var e=P(n,"x","softplus");return W.runKernelFunc(function(t,r){var a=t.softplus(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.sigmoid())}}})}}),uj=j({sqrt_:function(n){var e=P(n,"x","sqrt");return W.runKernelFunc(function(t,r){var a=t.sqrt(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().sqrt().mul(2))}}})}}),lj=j({step_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","step");return W.runKernelFunc(function(r){return r.step(t,e)},{$x:t},function(r){return{$x:function(){return gt(r)}}})}}),cj=j({tan_:function(n){var e=P(n,"x","tan");return W.runKernelFunc(function(t,r){var a=t.tan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.cos().square())}}})}}),fj=j({tanh_:function(n){var e=P(n,"x","tanh");return W.runKernelFunc(function(t,r){var a=t.tanh(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return we(1).sub(a.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function AA(n,e,t,r,a,i){var o,u,c=P(n,"x","batchNorm"),f=P(e,"mean","batchNorm"),d=P(t,"variance","batchNorm");return a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),L(f.rank===2||f.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+f.rank+"."}),L(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),o!=null&&L(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),u!=null&&L(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."}),kh(c,f,d,u,o,i)}function kA(n,e,t,r,a,i){var o,u,c=P(n,"x","batchNorm"),f=P(e,"mean","batchNorm"),d=P(t,"variance","batchNorm");return a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),L(f.rank===3||f.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+f.rank+"."}),L(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),o!=null&&L(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),u!=null&&L(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."}),kh(c,f,d,u,o,i)}function DA(n,e,t,r,a,i){var o,u,c=P(n,"x","batchNorm"),f=P(e,"mean","batchNorm"),d=P(t,"variance","batchNorm");return a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),L(f.rank===4||f.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+f.rank+"."}),L(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),o!=null&&L(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),u!=null&&L(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."}),kh(c,f,d,u,o,i)}function kh(n,e,t,r,a,i){i==null&&(i=.001);var o,u,c,f=P(n,"x","batchNorm"),d=P(e,"mean","batchNorm"),p=P(t,"variance","batchNorm");a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(d.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),L(u==null||d.rank===u.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),L(o==null||d.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=f.rank===0||f.rank===1?f.as4D(1,1,1,f.size):f.rank===2?f.as4D(1,1,f.shape[0],f.shape[1]):f.rank===3?f.as4D(1,f.shape[0],f.shape[1],f.shape[2]):f;var v=[f,d,p,o];return W.runKernelFunc(function(g,y){var x=g.batchNormalization(c,hp(d),hp(p),i,hp(o),hp(u));return y([f,d,p,o]),x},{x:f,mean:d,variance:p,scale:o,offset:u},function(g,y){var x=y,w=x[0],_=x[1],S=x[2],C=x[3],R=C??we(1),T=mn(_.shape,c.shape),O=[];if(_.rank===1){for(var D=0;D<c.shape.length-1;++D)O.push(c.shape[D]);O.push(1)}var N=w.sub(_),k=g.mul(R),I=TA(S.add(we(i))),B=I.mul(I).mul(I).mul(we(-.5));return{x:function(){return _.rank===1?g.mul(ml(I.as4D(1,1,1,_.shape[0]),O)).mul(R).reshape(w.shape):g.mul(I).mul(R).reshape(w.shape)},mean:function(){var U=I.mul(we(-1)).mul(k);return _.rank===1&&(U=U.sum(T)),U.reshape(_.shape)},variance:function(){var U=B.mul(N).mul(k);return _.rank===1&&(U=U.sum(T)),U.reshape(_.shape)},scale:function(){var U=N.mul(I),ee=g.mul(U);return _.rank===1&&(ee=ee.sum(T)),ee.reshape(_.shape)},offset:function(){var U=g;return _.rank===1&&(U=U.sum(T)),U.reshape(_.shape)}}},"BatchNormalization",{varianceEpsilon:i},v).reshape(f.shape)}function hp(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function Gv(){GO("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var hj=j({batchNormalization2d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Gv(),AA(n,e,t,i,a,r)}}),dj=j({batchNormalization3d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Gv(),kA(n,e,t,i,a,r)}}),pj=j({batchNormalization4d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Gv(),DA(n,e,t,i,a,r)}}),vj=j({batchNormalization_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Gv(),kh(n,e,t,i,a,r)}}),NA=j({batchNorm_:kh}),mj=j({batchNorm2d_:AA}),gj=j({batchNorm3d_:kA}),yj=j({batchNorm4d_:DA}),Qv=j({logicalAnd_:function(n,e){var t=P(n,"a","logicalAnd","bool"),r=P(e,"b","logicalAnd","bool");return ct(t.shape,r.shape),W.runKernelFunc(function(a){return a.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),bj=j({logicalNot_:function(n){var e=P(n,"x","logicalNot","bool");return W.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),IA=j({logicalOr_:function(n,e){var t=P(n,"a","logicalOr","bool"),r=P(e,"b","logicalOr","bool");return ct(t.shape,r.shape),W.runKernelFunc(function(a){return a.logicalOr(t,r)},{$a:t,$b:r})}}),xj=j({logicalXor_:function(n,e){var t=P(n,"a","logicalXor","bool"),r=P(e,"b","logicalXor","bool");return ct(t.shape,r.shape),IA(n,e).logicalAnd(Qv(n,e).logicalNot())}}),Js=j({where_:function(n,e,t){var r=P(e,"a","where"),a=P(t,"b","where"),i=P(n,"condition","where","bool");return Ot(r.shape,a.shape,"Error in where: "),i.rank===1?L(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Ot(i.shape,a.shape,"Error in where: "),W.runKernelFunc(function(o,u){var c=o.select(i,r,a);return u([i]),c},{$condition:i,$a:r,$b:a},function(o,u){var c=u[0];return{$condition:function(){return gt(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),MA=function(n){return ke(this,void 0,void 0,function(){var e,t,r;return De(this,function(a){switch(a.label){case 0:return[4,(e=P(n,"condition","whereAsync","bool")).data()];case 1:return t=a.sent(),r=Fx(e.shape,t),n!==e&&e.dispose(),[2,r]}})})},ut=j({add_:function(n,e){var t,r=P(n,"a","add"),a=P(e,"b","add");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o){return o.add(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=mn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=mn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(a.shape)}}},"Add")}}),wj=j({addN_:function(n){L(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),L(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var e=n.map(function(a,i){return P(a,"tensors"+i,"addN")}),t=e[0];e.forEach(function(a){if(a.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(a){if(!On(a.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return W.runKernelFunc(function(a){return a.addN(e)},r,function(a){var i={};return e.forEach(function(o,u){i[u]=function(){return a.clone()}}),i},"AddN")}}),_j=j({addStrict_:function(n,e){var t=P(n,"a","addStrict"),r=P(e,"b","addStrict");return Ot(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),Ej=j({atan2_:function(n,e){var t,r=P(n,"a","atan2"),a=P(e,"b","atan2");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.atan2(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var d=ut(c.square(),f.square()),p=o.mul(f.div(d)),v=mn(c.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)},$b:function(){var d=ut(c.square(),f.square()),p=xv(o.mul(c.div(d))),v=mn(f.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(f.shape)}}})}}),ca=j({div_:function(n,e){var t,r=P(n,"a","div"),a=P(e,"b","div");if(t=Ht(r,a),r=t[0],a=t[1],r.dtype==="int32"&&a.dtype==="int32")return FA(r,a);var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.realDivide(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.div(f.toFloat()),p=mn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=mn(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}},"Div")}}),Sj=j({divNoNan_:function(n,e){var t,r=P(n,"a","div"),a=P(e,"b","div");r=(t=Ht(r,a))[0],a=t[1];var i=ca(r,a),o=gt(i),u=a.equal(o);return Js(u,o,i)}}),Cj=j({divStrict_:function(n,e){var t=P(n,"a","div"),r=P(e,"b","div");return Ot(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),FA=j({floorDiv_:function(n,e){var t,r=P(n,"a","floorDiv"),a=P(e,"b","floorDiv");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.floorDiv(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.div(f.toFloat()),p=mn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=mn(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}},"FloorDiv")}}),Ux=j({maximum_:function(n,e){var t,r=P(n,"a","maximum"),a=P(e,"b","maximum");return t=Ht(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.maximum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.greaterEqual(c).toFloat())},b:function(){return i.mul(u.less(c).toFloat())}}},"Maximum")}}),Rj=j({maximumStrict_:function(n,e){var t=P(n,"a","maximumStrict"),r=P(e,"b","maximumStrict");return Ot(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),PA=j({minimum_:function(n,e){var t,r=P(n,"a","minimum"),a=P(e,"b","minimum");return t=Ht(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.minimum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.lessEqual(c).toFloat())},b:function(){return i.mul(u.greater(c).toFloat())}}},"Minimum")}}),Tj=j({minimumStrict_:function(n,e){var t=P(n,"a","minimumStrict"),r=P(e,"b","minimumStrict");return Ot(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),Oj=j({mod_:function(n,e){var t,r=P(n,"a","mod"),a=P(e,"b","mod");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.mod(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var d=mn(c.shape,i);return d.length>0?o.sum(d).reshape(c.shape):o},$b:function(){var d=o.mul(c.div(f).floor().neg()),p=mn(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}})}}),Aj=j({modStrict_:function(n,e){var t=P(n,"a","modStrict"),r=P(e,"b","modStrict");return Ot(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),$n=j({mul_:function(n,e){var t,r=P(n,"a","mul"),a=P(e,"b","mul");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.multiply(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.mul(f.toFloat()),p=mn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=mn(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}},"Mul")}}),kj=j({mulStrict_:function(n,e){var t=P(n,"a","mul"),r=P(e,"b","mul");return Ot(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),wv=j({pow_:function(n,e){var t,r=P(n,"base","pow"),a=P(e,"exp","pow");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape),o=[r,a];return W.runKernelFunc(function(u,c){var f=u.pow(r,a);return c([r,a,f]),f},{a:r,b:a},function(u,c){var f=c[0],d=c[1],p=c[2];return{a:function(){var v=d.toFloat(),g=u.mul(v.mul(f.pow(v.sub(we(1))))),y=mn(f.shape,i);return y.length>0&&(g=g.sum(y)),g.reshape(f.shape)},b:function(){var v=f.greater(0),g=f.log().where(v,gt(f)),y=u.mul(p.mul(g)),x=mn(d.shape,i);return x.length>0&&(y=y.sum(x)),y.reshape(d.shape)}}},"Pow",{},o,[!0])}}),Dj=j({powStrict_:function(n,e){return Ot(n.shape,e.shape,"Error in powStrict: "),n.pow(e)}}),Nj=j({squaredDifferenceStrict_:function(n,e){var t=P(n,"a","squaredDifferenceStrict"),r=P(e,"b","squaredDifferenceStrict");return Ot(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),gn=j({sub_:function(n,e){var t,r=P(n,"a","sub"),a=P(e,"b","sub");t=Ht(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return W.runKernelFunc(function(o){return o.subtract(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=mn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=mn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.neg().reshape(a.shape)}}},"Sub")}}),Ij=j({subStrict_:function(n,e){var t=P(n,"a","subStrict"),r=P(e,"b","subStrict");return Ot(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),LA=j({equal_:function(n,e){var t,r=P(n,"a","equal"),a=P(e,"b","equal");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.equal(r,a)},{$a:r,$b:a})}}),Mj=j({equalStrict_:function(n,e){var t=P(n,"a","equalStrict"),r=P(e,"b","equalStrict");return Ot(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),Fj=j({greater_:function(n,e){var t,r=P(n,"a","greater"),a=P(e,"b","greater");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.greater(r,a)},{a:r,b:a},null,"Greater")}}),BA=j({greaterEqual_:function(n,e){var t,r=P(n,"a","greaterEqual"),a=P(e,"b","greaterEqual");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.greaterEqual(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return gt(u)},b:function(){return gt(c)}}},"GreaterEqual")}}),Pj=j({greaterEqualStrict_:function(n,e){var t=P(n,"a","greaterEqualStrict"),r=P(e,"b","greaterEqualStrict");return Ot(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),Lj=j({greaterStrict_:function(n,e){var t=P(n,"a","greaterStrict"),r=P(e,"b","greaterStrict");return Ot(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),Bj=j({less_:function(n,e){var t,r=P(n,"a","less"),a=P(e,"b","less");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.less(r,a)},{a:r,b:a},null,"Less")}}),zj=j({lessEqual_:function(n,e){var t,r=P(n,"a","lessEqual"),a=P(e,"b","lessEqual");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.lessEqual(r,a);return o([r,a]),u},{a:r,b:a},null,"LessEqual")}}),Uj=j({lessEqualStrict_:function(n,e){var t=P(n,"a","lessEqualStrict"),r=P(e,"b","lessEqualStrict");return Ot(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),Vj=j({lessStrict_:function(n,e){var t=P(n,"a","lessStrict"),r=P(e,"b","lessStrict");return Ot(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),jj=j({notEqual_:function(n,e){var t,r=P(n,"a","notEqual"),a=P(e,"b","notEqual");return t=Ht(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),W.runKernelFunc(function(i){return i.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),qj=j({notEqualStrict_:function(n,e){var t=P(n,"a","notEqualStrict"),r=P(e,"b","notEqualStrict");return Ot(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function EC(n,e){for(var t=[],r=n;r<e;++r)t.push(r);return t}function SC(n){for(var e=[],t=0;t<n.length;++t)for(var r=0;r<n[t].length;++r)e.push(n[t][r]);return e}var Vx=j({gather_:function(n,e,t){t===void 0&&(t=0);var r=P(n,"x","gather"),a=P(e,"indices","gather","int32");t=yn(t,r.shape)[0];var i=function(o,u,c){for(var f=o.shape[c],d=[],p=1,v=1,g=0;g<c;g++)d.push(o.shape[g]),p*=o.shape[g];for(g=0;g<u.rank;g++)d.push(u.shape[g]);for(g=c+1;g<o.rank;g++)d.push(o.shape[g]),v*=o.shape[g];return{batchSize:p,sliceSize:v,dimSize:f,outputShape:d}}(r,a,t);return W.runKernelFunc(function(o,u){var c=o.gather(r,a.flatten(),t);return u([a]),c},{x:r,indices:a},function(o,u){var c=u[0];return{x:function(){var f=r.shape,d=c.size,p=f.slice(0,t),v=p.length,g=f.slice(t,f.length).slice(1),y=g.length,x=EC(0,v),w=EC(v+1,v+1+y),_=SC([p,[d],g]),S=o.reshape(_),C=c.reshape([d]),R=SC([[v],x,w]),T=S.transpose(R),O=zA(T,C,r.shape[t]),D=Tx(R);return O=O.transpose(D)},indices:function(){return c}}},"Gather",{axis:t}).reshape(i.outputShape)}}),zA=j({unsortedSegmentSum_:function(n,e,t){var r=P(n,"x","unsortedSegmentSum"),a=P(e,"segmentIds","unsortedSegmentSum","int32");return L(en(t),function(){return"numSegments must be of dtype int"}),W.runKernelFunc(function(i,o){var u=i.unsortedSegmentSum(r,a,t);return o([a]),u},{$x:r},function(i,o){var u=o[0];return{$x:function(){return function(c,f){for(var d=Ux(f,gt(f)),p=Vx(c,d),v=BA(f,we(0,"int32")),g=p.rank-v.rank,y=0;y<g;++y)v=Qr(v,y+1);v=Qv(v,uc(p.shape,"bool"));var x=gt(p);return Js(v,p,x)}(i,u)}}})}}),Wj=function(n,e,t){return ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x;return De(this,function(w){switch(w.label){case 0:for(r=P(n,"tensor","boolMask"),a=P(e,"mask","boolMask","bool"),i=t??0,o=a.rank,u=r.shape,L(o>0,function(){return"mask cannot be scalar"}),Ot(u.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,f=i;f<i+o;f++)c*=u[f];return d=u.slice(0,i).concat([c],u.slice(i+o)),p=r.reshape(d),v=a.reshape([-1]),[4,MA(v)];case 1:return g=w.sent(),y=g.squeeze([1]),x=Vx(p,y,i),n!==r&&r.dispose(),e!==a&&a.dispose(),y.dispose(),p.dispose(),v.dispose(),g.dispose(),[2,x]}})})};function UA(n,e,t,r,a,i,o){i===void 0&&(i="NHWC"),L(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var u=n,c=e,f=!1;e.rank===3&&(f=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),u=[1,n[0],n[1],n[2]]),L(u.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+u.length+"."}),L(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),L(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var d=i==="NHWC"?u[3]:u[1],p=i==="NHWC"?c.shape[3]:c.shape[1];L(d===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+t.shape[2]+"."}),L(p===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+t.shape[3]+"."}),o!=null&&L(en(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var v=Nx(i),g=ou(u,t.shape,r,1,a,o,!1,v),y=W.runKernelFunc(function(x,w){var _=x.conv2dDerInput(c,t,g);return w([t,c]),_},{dy4D:c,filter:t},function(x,w){var _=w[0],S=w[1];return{dy4D:function(){return Jr(x,_,r,a,i,1,o)},filter:function(){return jx(x,S,_.shape,r,a,i,o)}}});return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function a0(n){var e=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function VA(n,e,t,r,a){L(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var i=n,o=e,u=!1;e.rank===4&&(u=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,n[0],n[1],n[2],n[3]]);var c=i[4],f=o.shape[4];L(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),L(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),L(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),L(c===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+t.shape[3]+"."}),L(f===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+f+") must match output depth for filter "+t.shape[4]+"."});var d=yv(i,t.shape,r,1,a),p=W.runKernelFunc(function(v){return v.conv3dDerInput(o,t,d)},{dy5D:o});return u?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var Hj=j({conv1d_:function(n,e,t,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var u=P(n,"x","conv1d"),c=P(e,"filter","conv1d"),f=u,d=!1;u.rank===2&&(d=!0,f=u.as3D(1,u.shape[0],u.shape[1])),L(f.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+f.rank+"."}),L(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&L(en(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),L(f.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+f.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),L(gr(t,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+i+"'"}),L(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var p=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),v=f.as4D(f.shape[0],1,f.shape[1],f.shape[2]),g=Jr(v,p,[1,t],r,"NHWC",[1,i],o);return d?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),Jr=j({conv2d_:function(n,e,t,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var u=P(n,"x","conv2d"),c=P(e,"filter","conv2d"),f=u,d=!1;u.rank===3&&(d=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),L(f.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+f.rank+"."}),L(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&L(en(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=a==="NHWC"?f.shape[3]:f.shape[1];L(p===c.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+c.shape[2]+"."}),L(gr(t,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"});var v=Nx(a),g=ou(f.shape,c.shape,t,i,r,o,!1,v),y=[c,f],x=W.runKernelFunc(function(w,_){var S=w.conv2d(f,c,g);return _([c,f]),S},{x:f,filter:c},function(w,_){var S=_,C=S[0],R=S[1];return L(Zl(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return jA(R.shape,w,C,t,r,a)},filter:function(){return jx(R,w,C.shape,t,r,a)}}},"Conv2D",g,y);return d?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Gj=j({conv3d_:function(n,e,t,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=P(n,"x","conv3d"),u=P(e,"filter","conv3d"),c=o,f=!1;o.rank===4&&(f=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),L(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),L(u.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+u.rank+"."}),L(c.shape[4]===u.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+u.shape[3]+"."}),L(function(v,g){return a0(v)||a0(g)}(t,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),L(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var d=yv(c.shape,u.shape,t,i,r),p=W.runKernelFunc(function(v,g){var y=v.conv3d(c,u,d);return g([c,u]),y},{x:c,$filter:u},function(v,g){L(a0(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var y=g[0],x=g[1];return{x:function(){return VA(y.shape,v,x,t,r)},$filter:function(){return function(w,_,S,C,R){var T=w;w.rank===4&&(T=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var O=_;O.rank===4&&(O=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),L(T.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+T.shape+"."}),L(O.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+O.shape+"."}),L(S.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+S+"."}),L(T.shape[4]===S[3],function(){return"Error in conv3dDerFilter: depth of input "+T.shape[4]+") must match input depth in filter ("+S[3]+"."}),L(O.shape[4]===S[4],function(){return"Error in conv3dDerFilter: depth of dy ("+O.shape[4]+") must match output depth for filter ("+S[4]+")."});var D=yv(T.shape,S,C,1,R);return W.runKernelFunc(function(N){return N.conv3dDerFilter(T,O,D)},{x5D:T,dy5D:O})}(y,v,x.shape,t,r)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),jx=j({conv2dDerFilter_:function(n,e,t,r,a,i,o){i===void 0&&(i="NHWC");var u=n;n.rank===3&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var c=e;c.rank===3&&(c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),L(u.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+u.shape+"."}),L(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),L(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var f=i==="NHWC"?u.shape[3]:u.shape[1],d=i==="NHWC"?c.shape[3]:c.shape[1];L(f===t[2],function(){return"Error in conv2dDerFilter: depth of input "+f+") must match input depth in filter ("+t[2]+"."}),L(d===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+t[3]+")."}),o!=null&&L(en(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var p=Nx(i),v=ou(u.shape,t,r,1,a,o,!1,p);return W.runKernelFunc(function(g){return g.conv2dDerFilter(u,c,v)},{x4D:u,dy4D:c})}}),jA=j({conv2dDerInput_:UA}),$v=j({depthwiseConv2d_:function(n,e,t,r,a,i,o){i===void 0&&(i=[1,1]);var u=P(n,"x","depthwiseConv2d"),c=P(e,"filter","depthwiseConv2d"),f=u,d=!1;u.rank===3&&(d=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),L(f.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."}),L(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),L(f.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),L(gr(t,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),o!=null&&L(en(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=ou(f.shape,c.shape,t,i,r,o,!0),v=[f,c],g=W.runKernelFunc(function(y,x){var w=y.depthwiseConv2D(f,c,p);return x([f,c]),w},{x:f,filter:c},function(y,x){L(Zl(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var w=x[0],_=x[1];return{x:function(){return qA(w.shape,y,_,p)},filter:function(){return WA(w,y,_.shape,p)}}},"DepthwiseConv2dNative",p,v);return d?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),qA=j({depthwiseConv2dDerInput_:function(n,e,t,r){var a=e,i=!1;e.rank===3&&(i=!0,a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=W.runKernelFunc(function(u){return u.depthwiseConv2DDerInput(a,t,r)},{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),WA=j({depthwiseConv2dDerFilter_:function(n,e,t,r){var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var i=e;return i.rank===3&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),W.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(a,i,r)},{x4D:a,dy4D:i})}}),qx=j({separableConv2d_:function(n,e,t,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var u=P(n,"x","separableConv2d"),c=P(e,"depthwiseFilter","separableConv2d"),f=P(t,"pointwiseFilter","separableConv2d"),d=u,p=!1;if(u.rank===3&&(p=!0,d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");L(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),L(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),L(f.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),L(f.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+f.shape[0]+"."}),L(f.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+f.shape[1]+"."});var v=c.shape[2],g=c.shape[3];L(f.shape[2]===v*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+v*g+", but got "+f.shape[2]+"."});var y=$v(d,c,r,a,o,i),x=Jr(y,f,1,"valid",o);return p?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Qj=j({conv2dTranspose_:function(n,e,t,r,a,i){return UA(t,P(n,"x","conv2dTranspose"),P(e,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),$j=j({conv3dTranspose_:function(n,e,t,r,a){return VA(t,P(n,"x","conv3dTranspose"),P(e,"filter","conv3dTranspose"),r,a)}}),Kv=j({matMul_:function(n,e,t,r){var a;t===void 0&&(t=!1),r===void 0&&(r=!1);var i=P(n,"a","matMul"),o=P(e,"b","matMul");a=Ht(i,o),i=a[0],o=a[1];var u=t?i.shape[i.rank-2]:i.shape[i.rank-1],c=r?o.shape[o.rank-1]:o.shape[o.rank-2],f=t?i.shape[i.rank-1]:i.shape[i.rank-2],d=r?o.shape[o.rank-2]:o.shape[o.rank-1],p=i.shape.slice(0,-2),v=o.shape.slice(0,-2),g=Ie(p),y=Ie(v);L(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),L(On(p,v),function(){return"Error in matMul: outer dimensions ("+p+") and ("+v+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),L(u===c,function(){return"Error in matMul: inner shapes ("+u+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var x=i.shape.slice(0,-2).concat([f,d]),w=t?i.as3D(g,u,f):i.as3D(g,f,u),_=r?o.as3D(y,d,c):o.as3D(y,c,d),S={transposeA:t,transposeB:r};return W.runKernelFunc(function(C,R){var T=C.batchMatMul(w,_,t,r);return R([w,_]),T},{a:w,b:_},function(C,R){var T=R,O=T[0],D=T[1];return t||r?!t&&r?{a:function(){return C.matMul(D,!1,!1)},b:function(){return C.matMul(O,!0,!1)}}:t&&!r?{a:function(){return D.matMul(C,!1,!0)},b:function(){return O.matMul(C,!1,!1)}}:{a:function(){return D.matMul(C,!0,!0)},b:function(){return C.matMul(O,!0,!0)}}:{a:function(){return C.matMul(D,!1,!0)},b:function(){return O.matMul(C,!0,!1)}}},"BatchMatMul",S).reshape(x)}}),Kj=j({dot_:function(n,e){var t=P(n,"t1","dot"),r=P(e,"t2","dot");L(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var a=t.rank===1?t.size:t.shape[1],i=r.rank===1?r.size:r.shape[0];return L(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Xj=j({outerProduct_:function(n,e){var t=P(n,"v1","outerProduct"),r=P(e,"v2","outerProduct");return L(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),Dh=j({reverse_:function(n,e){var t=P(n,"x","reverse");if(t.rank===0)return t.clone();var r=yn(e,t.shape);return W.runKernelFunc(function(a){return a.reverse(t,r)},{$x:t},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(t)}}),Yj=j({reverse1d_:function(n){var e=P(n,"x","reverse");return L(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Dh(e,0)}}),Zj=j({reverse2d_:function(n,e){var t=P(n,"x","reverse");return L(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),Dh(t,e)}}),Jj=j({reverse3d_:function(n,e){var t=P(n,"x","reverse");return L(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),Dh(t,e)}}),e5=j({reverse4d_:function(n,e){var t=P(n,"x","reverse");return L(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),Dh(t,e)}});function HA(n,e,t,r,a,i){var o=P(n,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),L(u.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."}),L(gr(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),i!=null&&L(en(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=uh(u.shape,e,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&On(f.inShape,f.outShape))return o.clone();var d=[u],p=W.runKernelFunc(function(v,g){var y=v.maxPool(u,f);return g([u,y]),y},{x:u},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(w,_,S,C,R,T,O,D){var N=P(w,"dy","maxPoolBackprop"),k=P(_,"input","maxPoolBackprop"),I=P(S,"output","maxPoolBackprop");L(k.rank===N.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+N.rank+")"}),L(gr(R,T),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+T+"'"}),L(N.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+N.rank+"."}),L(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var B=uh(k.shape,C,R,T,O,D);return W.runKernelFunc(function(U){return U.maxPoolBackprop(N,k,I,B)},{$dy:N,$input:k})}(v,y,x,e,t,r,a)}}},"MaxPool",f,d);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function GA(n,e,t,r,a,i){var o=P(n,"x","avgPool","float32");L(gr(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),L(u.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."}),i!=null&&L(en(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=uh(u.shape,e,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&On(f.inShape,f.outShape))return o.clone();var d=W.runKernelFunc(function(p){return p.avgPool(u,f)},{x:u},function(p){return{x:function(){return function(v,g,y,x,w,_){var S=P(v,"dy","avgPoolBackprop"),C=P(g,"input","avgPoolBackprop");L(C.rank===S.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+S.rank+")"}),L(gr(x,w),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+w+"'"});var R=C,T=S,O=!1;C.rank===3&&(O=!0,R=C.as4D(1,C.shape[0],C.shape[1],C.shape[2]),T=S.as4D(1,S.shape[0],S.shape[1],S.shape[2])),L(T.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),L(R.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+R.rank+"."});var D=uh(R.shape,y,x,w,_),N=W.runKernelFunc(function(k){return k.avgPoolBackprop(T,R,D)},{dy4D:T,input4D:R});return O?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}(p,u,e,t,r,a)}}},"AvgPool",f);return d=d.cast(o.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var En=j({maxPool_:function(n,e,t,r,a){return HA(n,e,t,1,r,a)}}),Nh=j({avgPool_:function(n,e,t,r,a){return GA(n,e,t,1,r,a)}}),t5=j({pool_:function(n,e,t,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var o=P(n,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),L(gr(i,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"});var f,d=uh(u.shape,e,i,a,r),p=[d.dilationHeight,d.dilationWidth];f=r==="same"?function(R,T){var O=R.map(function(k,I){return k+(k-1)*(T[I]-1)}).map(function(k){return k-1}),D=O.map(function(k){return Math.floor(k/2)}),N=O.map(function(k,I){return k-D[I]});return O.map(function(k,I){return[D[I],N[I]]})}([d.filterHeight,d.filterWidth],p):[[0,0],[0,0]];var v=p[0]===1&&p[1]===1,g=function(R,T,O){var D=O.map(function(te){return te[0]}),N=O.map(function(te){return te[1]}),k=R.concat(D,N),I=T.map(function(te,re){return(te-k[re]%te)%te}),B=N.map(function(te,re){return te+I[re]}),U=T.map(function(te,re){return[D[re],B[re]]}),ee=T.map(function(te,re){return[0,I[re]]});return[U,ee]}([d.inHeight,d.inWidth],p,f),y=g[0],x=g[1],w=v?r:"valid",_=v?u:ZO(u,p,y),S=(t==="avg"?function(){return GA(_,e,i,1,w)}:function(){return HA(_,e,i,1,w)})(),C=v?S:KO(S,p,x);return c?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),n5=j({maxPool3d_:function(n,e,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=P(n,"x","maxPool3d"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),L(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),L(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),L(gr(t,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&L(en(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=gv(c.shape,e,t,o,r,a,i),p=W.runKernelFunc(function(v,g){var y=v.maxPool3d(c,d);return g([c,y]),y},{x:c},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(w,_,S,C,R,T,O,D){var N=P(w,"dy","maxPool3dBackprop"),k=P(_,"input","maxPool3dBackprop"),I=P(S,"output","maxPool3dBackprop"),B=N,U=k,ee=I,te=!1;k.rank===4&&(te=!0,B=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),U=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),ee=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3])),L(B.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+B.rank+"."}),L(U.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+U.rank+"."}),L(ee.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+ee.rank+"."}),T==null&&(T=[1,1,1]),L(gr(R,T),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+T+"'"}),D!=null&&L(en(O),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+D+" but got pad "+O+"."});var re=gv(U.shape,C,R,T,O,D),q=W.runKernelFunc(function(Z){return Z.maxPool3dBackprop(B,U,ee,re)},{dy5D:B,input5D:U});return te?q.as4D(q.shape[1],q.shape[2],q.shape[3],q.shape[4]):q}(v,y,x,e,t,o,r,a)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),r5=j({avgPool3d_:function(n,e,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=P(n,"x","avgPool3d","float32"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),L(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),L(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),L(gr(t,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&L(en(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=gv(c.shape,e,t,o,r,a,i),p=W.runKernelFunc(function(v){return v.avgPool3d(c,d)},{x:c},function(v){return{x:function(){return function(g,y,x,w,_,S,C){var R=P(g,"dy","avgPool3dBackprop"),T=P(y,"input","avgPool3dBackprop"),O=R,D=T,N=!1;T.rank===4&&(N=!0,O=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),D=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),L(O.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+O.rank+"."}),L(D.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),_==null&&(_=[1,1,1]),L(gr(w,_),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),C!=null&&L(en(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+S+"."});var k=gv(D.shape,x,w,_,S,C),I=W.runKernelFunc(function(B){return B.avgPool3dBackprop(O,D,k)},{dy5D:O,input5D:D});return N?I.as4D(I.shape[1],I.shape[2],I.shape[3],I.shape[4]):I}(v,c,e,t,o,r,a)}}});return p=p.cast(c.dtype),f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Ya=j({slice_:function(n,e,t){var r,a,i=P(n,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice()).forEach(function(c){L(c!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=t==null?new Array(i.rank).fill(-1):typeof t=="number"?[t].concat(new Array(i.rank-1).fill(-1)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(-1)):t).map(function(c,f){return c>=0?c:(L(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+f+"."}),i.shape[f]-r[f])}),Dz(i,r,a);var o=i.shape,u={begin:r,size:a};return W.runKernelFunc(function(c){return c.slice(i,r,a)},{x:i},function(c){for(var f=[],d=0;d<c.rank;d++)f.push([r[d],o[d]-r[d]-a[d]]);return{x:function(){return c.pad(f)}}},"Slice",u)}}),a5=j({slice1d_:function(n,e,t){var r=P(n,"x","slice1d");return L(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,[e],[t])}}),i5=j({slice2d_:function(n,e,t){var r=P(n,"x","slice2d");return L(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,e,t)}}),QA=j({slice3d_:function(n,e,t){var r=P(n,"x","slice3d");return L(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,e,t)}}),o5=j({slice4d_:function(n,e,t){var r=P(n,"x","slice4d");return L(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,e,t)}});function $A(n,e,t,r,a){return e.rank<t.rank&&(e=e.reshape(mr(e.shape,r))),n.rank<t.rank&&(n=n.reshape(mr(n.shape,r))),{x:function(){var i=n.mul(t.equal(e).cast(n.dtype));return a==null?i:i.transpose(a)}}}var s5=j({all_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","all","bool"),a=yn(e,r.shape),i=a,o=ni(i,r.rank);o!=null&&(r=r.transpose(o),i=ri(i.length,r.rank));var u=W.runKernelFunc(function(f){return f.all(r,i)},{$x:r});if(t){var c=mr(u.shape,a);return u.reshape(c)}return u}}),u5=j({any_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","any","bool"),a=yn(e,r.shape),i=a,o=ni(i,r.rank);o!=null&&(r=r.transpose(o),i=ri(i.length,r.rank));var u=W.runKernelFunc(function(f){return f.any(r,i)},{$x:r});if(t){var c=mr(u.shape,a);return u.reshape(c)}return u}}),l5=j({argMax_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","argMax");e==null&&(e=0);var r=yn(e,t.shape),a=ni(r,t.rank);a!=null&&(t=t.transpose(a),r=ri(r.length,t.rank));var i={axis:r[0]},o=[t];return W.runKernelFunc(function(u,c){var f=u.argMax(t,r[0]);return c([t]),f},{x:t},function(u,c){var f=c[0];return{x:function(){return gt(f)}}},"ArgMax",i,o)}}),c5=j({argMin_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","argMin");e==null&&(e=0);var r=yn(e,t.shape),a=ni(r,t.rank);return a!=null&&(t=t.transpose(a),r=ri(r.length,t.rank)),W.runKernelFunc(function(i,o){var u=i.argMin(t,r[0]);return o([t]),u},{$x:t},function(i,o){var u=o[0];return{$x:function(){return gt(u)}}})}}),f5=j({logSumExp_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","logSumExp"),a=yn(e,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),u=i.reshape(o.shape).add(o);if(t){var c=mr(u.shape,a);return u.reshape(c)}return u}}),Xv=j({max_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","max"),a=r,i=yn(e,r.shape),o=i,u=ni(o,r.rank);u!=null&&(r=r.transpose(u),o=ri(o.length,r.rank));var c=[r],f=W.runKernelFunc(function(p,v){var g=p.max(r,o);return v([a,g]),g},{x:r},function(p,v){return $A(p,v[1],v[0],i,u)},"Max",{axes:o},c,[!0]);if(t){var d=mr(f.shape,i);f=f.reshape(d)}return f}}),h5=j({mean_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","mean"),a=yn(e,r.shape),i=Ie(Wn(r.shape,a)[1]);return Hv(function(o){var u=we(i);return{value:(u.dtype===o.dtype?o:o.cast(u.dtype)).div(u).sum(e,t),gradFunc:function(c){var f=o.shape.slice();return a.forEach(function(d){f[d]=1}),c.reshape(f).mul(uc(o.shape,"float32")).div(i)}}})(r)}}),d5=j({min_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","min"),a=r,i=yn(e,r.shape),o=i,u=ni(o,r.rank);u!=null&&(r=r.transpose(u),o=ri(o.length,r.rank));var c=[r],f=W.runKernelFunc(function(p,v){var g=p.min(r,o);return v([a,g]),g},{x:r},function(p,v){return $A(p,v[1],v[0],i,u)},"Min",{axes:o},c,[!0]);if(t){var d=mr(f.shape,i);f=f.reshape(d)}return f}}),p5=j({moments_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=yn(e,(n=P(n,"x","moments")).shape),a=n.mean(r,t),i=a.shape;t||(i=mr(a.shape,r));var o=n.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,t)}}}),KA=j({sum_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=yn(e,r.shape);return Hv(function(i){var o=ni(a,i.rank),u=a,c=i;o!=null&&(c=i.transpose(o),u=ri(u.length,i.rank));var f=function(g){var y=i.shape.slice();return a.forEach(function(x){y[x]=1}),g.reshape(y).mul(uc(i.shape,"float32"))},d={axes:u},p=W.runKernelFunc(function(g){return g.sum(c,u)},{x:c},function(g){return{x:function(){return f(g)}}},"Sum",d);if(t){var v=mr(p.shape,a);p=p.reshape(v)}return{value:p,gradFunc:f}})(r)}}),v5=j({prod_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=yn(e,r.shape),i=ni(a,r.rank),o=a,u=r;i!=null&&(u=r.transpose(i),o=ri(o.length,r.rank));var c=W.runKernelFunc(function(d){return d.prod(u,o)},{permutedX:u});if(t){var f=mr(c.shape,a);c=c.reshape(f)}return c}}),XA=j({elu_:function(n){var e=P(n,"x","elu");return W.runKernelFunc(function(t,r){var a=t.elu(e);return r([a]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return W.runKernelFunc(function(i){return i.eluDer(t,a)},{dy:t,y:a})}}})}}),m5=j({leakyRelu_:function(n,e){e===void 0&&(e=.2);var t=P(n,"x","leakyRelu");return Ux(we(e).mul(t),t)}}),YA=j({prelu_:function(n,e){var t=P(n,"x","prelu"),r=P(e,"alpha","prelu");return W.runKernelFunc(function(a,i){var o=a.prelu(t,r);return i([t,r]),o},{x:t,alpha:r},function(a,i){var o=i[0],u=i[1],c=o.greater(0);return{x:function(){return Js(c,a,a.mul(u))},alpha:function(){var f=Js(c,gt(a),a.mul(o)),d=mn(u.shape,a.shape);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)}}},"Prelu")}}),qt=j({relu_:function(n){var e=P(n,"x","relu");return e.dtype==="bool"?e.toInt():W.runKernelFunc(function(t,r){var a=t.relu(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mulStrict(a.step().toFloat())}}},"Relu")}}),ZA=j({relu6_:function(n){var e=P(n,"x","relu6");return e.dtype==="bool"?e.toInt():W.runKernelFunc(function(t,r){var a=t.relu6(e);return r([e]),a},{x:e},function(t,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return t.mulStrict(i.toFloat())}}},"Relu6")}}),g5=j({selu_:function(n){var e=P(n,"x","selu");return W.runKernelFunc(function(t,r){var a=t.selu(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){var i=a.greater(we(0)),o=we(Lx),u=we(Bx),c=t.mul(u),f=t.mul(o).mul(a.toFloat().exp());return Js(i,c,f)}}})}}),Go=j({transpose_:function(n,e){var t=P(n,"x","transpose");if(e==null&&(e=t.shape.map(function(a,i){return i}).reverse()),L(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."}),e.forEach(function(a){L(a>=0&&a<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e})}),t.rank<=1)return t.clone();var r={perm:e};return W.runKernelFunc(function(a){return a.transpose(t,e)},{x:t},function(a){var i=Tx(e);return{x:function(){return a.transpose(i)}}},"Transpose",r)}}),y5=j({localResponseNormalization_:function(n,e,t,r,a){e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=P(n,"x","localResponseNormalization");L(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),L(en(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=i,u=!1;i.rank===3&&(u=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=W.runKernelFunc(function(f,d){var p=f.localResponseNormalization4D(o,e,t,r,a);return d([o,p]),p},{x4D:o},function(f,d){var p=d[0],v=d[1];return{x4D:function(){return W.runKernelFunc(function(g){return g.LRNGrad(f,p,v,e,t,r,a)},{})}}});return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),JA=j({norm_:function(n,e,t,r){e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var a=function u(c,f,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return u(c.reshape([-1]),f,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(f===1)return c.abs().sum(d);if(f===1/0)return c.abs().max(d);if(f===-1/0)return c.abs().min(d);if(f==="euclidean"||f===2)return c.abs().pow(we(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}if(Array.isArray(d)&&d.length===2){if(f===1)return c.abs().sum(d[0]).max(d[1]-1);if(f===1/0)return c.abs().sum(d[1]).max(d[0]);if(f===-1/0)return c.abs().sum(d[1]).min(d[0]);if(f==="fro"||f==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}throw new Error("Error in norm: invalid axis: "+d)}(n=P(n,"x","norm"),e,t),i=a.shape;if(r){var o=yn(t,n.shape);i=mr(a.shape,o)}return a.reshape(i)}}),b5=j({basicLSTMCell_:function(n,e,t,r,a,i){var o=P(n,"forgetBias","basicLSTMCell"),u=P(e,"lstmKernel","basicLSTMCell"),c=P(t,"lstmBias","basicLSTMCell"),f=P(r,"data","basicLSTMCell"),d=P(a,"c","basicLSTMCell"),p=P(i,"h","basicLSTMCell"),v=f.concat(p,1).matMul(u).add(c),g=v.shape[0],y=v.shape[1]/4,x=[g,y],w=v.slice([0,0],x),_=v.slice([0,y],x),S=v.slice([0,2*y],x),C=v.slice([0,3*y],x),R=w.sigmoid().mulStrict(_.tanh()).addStrict(d.mulStrict(o.add(S).sigmoid())),T=R.tanh().mulStrict(C.sigmoid());return[R,T]}}),x5=j({multiRNNCell_:function(n,e,t,r){for(var a=P(e,"data","multiRNNCell"),i=fv(t,"c","multiRNNCell"),o=fv(r,"h","multiRNNCell"),u=a,c=[],f=0;f<n.length;f++){var d=n[f](u,i[f],o[f]);c.push(d[0]),c.push(d[1]),u=d[1]}var p=[],v=[];for(f=0;f<c.length;f+=2)p.push(c[f]),v.push(c[f+1]);return[p,v]}}),w5=j({movingAverage_:function(n,e,t,r,a){a===void 0&&(a=!0);var i=P(n,"v","movingAverage"),o=P(e,"x","movingAverage"),u=P(t,"decay","movingAverage");yB(i,o),L(On(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=we(1),f=c.sub(u),d=o.sub(i).mul(f);if(a){L(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=P(r,"step","movingAverage");d=d.div(c.sub(wv(u,p)))}return i.add(d)}}),_5=j({stridedSlice_:function(n,e,t,r,a,i,o,u,c){if(a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),r==null&&(r=new Array(e.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var f=P(n,"x","stridedSlice"),d=rC(u),p=f.shape.slice();d.forEach(function(w){e[w]=0,t[w]=1,p.splice(w,0,1)}),f=f.reshape(p);for(var v=0;v<f.rank;v++)e[v]=Nz(a,e,r,f.shape,v),t[v]=Iz(i,t,r,f.shape,v),r[v]=r[v]||1;var g=rC(c);g.forEach(function(w){t[w]=e[w]+1,r[w]=1});var y=Dx(e,t,r),x=y.filter(function(w,_){return g.indexOf(_)===-1});return r.every(function(w){return w===1})?Ya(f,e,y).reshape(x):W.runKernelFunc(function(w){return w.stridedSlice(f,e,t,r)},{$x:f}).reshape(x)}}),E5=j({topk_:function(n,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var r=P(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(e>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+e);var i=W.runKernelFunc(function(o){return o.topk(r,e,t)},{$x:r});return{values:i[0],indices:i[1]}}}),S5=j({scatterND_:function(n,e,t){var r=P(n,"indices","scatterND","int32"),a=P(e,"updates","scatterND");return kz(a,r,t),W.runKernelFunc(function(i){return i.scatterND(r,a,t)},{indices:r,updates:a},null,"ScatterNd",{shape:t})}}),Wx=j({fft_:function(n){L(n.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return W.runKernelFunc(function(a){return a.fft(r)},{input:n}).reshape(n.shape)}}),_v=j({ifft_:function(n){L(n.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return W.runKernelFunc(function(a){return a.ifft(r)},{input:n}).reshape(n.shape)}}),Hx=j({rfft_:function(n,e){L(n.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+n.dtype});var t,r=n.shape[n.shape.length-1],a=n.size/r;if(e!=null&&e<r){var i=n.shape.map(function(_){return 0}),o=n.shape.map(function(_){return _});o[n.shape.length-1]=e,t=n.slice(i,o),r=e}else if(e!=null&&e>r){var u=n.shape.map(function(_){return _});u[n.shape.length-1]=e-r,t=n.concat(Bt(u),n.shape.length-1),r=e}else t=n;var c=t.zerosLike(),f=Ln(t,c).as2D(a,r),d=Wx(f),p=Math.floor(r/2)+1,v=$r(d),g=Va(d),y=v.split([p,r-p],v.shape.length-1),x=g.split([p,r-p],g.shape.length-1),w=t.shape.slice();return w[t.shape.length-1]=p,Ln(y[0],x[0]).reshape(w)}}),ek=j({irfft_:function(n){var e=n.shape[n.shape.length-1],t=n.size/e;if(e<=2){var r=n.as2D(t,e),a=_v(r);return $r(a)}var i=[t,2*(e-1)],o=$r(n).as2D(t,e),u=Va(n).as2D(t,e),c=o.slice([0,1],[t,e-2]).reverse(1),f=u.slice([0,1],[t,e-2]).reverse(1).mul(we(-1)),d=o.concat(c,1),p=u.concat(f,1);return r=Ln(d,p).as2D(i[0],i[1]),a=_v(r),$r(a)}}),C5=Object.freeze({fft:Wx,ifft:_v,rfft:Hx,irfft:ek}),R5=j({sparseToDense_:function(n,e,t,r){r===void 0&&(r=0);var a=P(n,"sparseIndices","sparseToDense","int32"),i=P(e,"sparseValues","sparseToDense"),o=P(r,"defaultValue","sparseToDense",i.dtype);return function(u,c,f,d){if(u.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+u.dtype+".");if(u.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+u.shape+".");var p=u.rank>0?u.shape[0]:1,v=u.rank>1?u.shape[1]:1;if(f.length!==v)throw new Error("outputShape has incorrect number of elements:, "+f.length+", should be: "+v+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==p))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+p+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,t,o),W.runKernelFunc(function(u){return u.sparseToDense(a,i,t,o)},{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),T5=j({gatherND_:function(n,e){var t=P(e,"indices","gatherND","int32"),r=P(n,"x","gatherND");return W.runKernelFunc(function(a){return a.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),O5=j({diag_:function(n){var e=P(n,"x","diag").flatten(),t=n.shape.concat(n.shape);return W.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(t)}}),A5=j({dropout_:function(n,e,t,r){var a=P(n,"x","dropout");if(L(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),L(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return n instanceof jt?a.clone():a;var i=function(c,f){if(f==null)return c.shape.slice();if(On(c.shape,f))return f;if(c.shape.length===f.length){for(var d=[],p=0;p<c.shape.length;p++)f[p]==null&&c.shape[p]!=null?d.push(c.shape[p]):d.push(f[p]);return d}return f}(a,t),o=1-e,u=YO(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(u)}});function tk(n,e,t){for(var r=1-n%2,a=new Float32Array(n),i=0;i<n;++i){var o=2*Math.PI*i/(n+r-1);a[i]=e-t*Math.cos(o)}return sn(a,"float32")}var Gx=j({hannWindow_:function(n){return tk(n,.5,.5)}}),nk=j({hammingWindow_:function(n){return tk(n,.54,.46)}}),Qx=j({frame_:function(n,e,t,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+e<=n.size;)o.push(Ya(n,i,e)),i+=t;if(r)for(;i<n.size;){var u=i+e-n.size,c=pn([Ya(n,i,e-u),Qa([u],a)]);o.push(c),i+=t}return o.length===0?Lo([],[0,e]):pn(o).as2D(o.length,e)}}),rk=j({stft_:function(n,e,t,r,a){var i;a===void 0&&(a=Gx),r==null&&(i=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=Qx(n,e,t),u=$n(o,a(e)),c=[],f=0;f<o.shape[0];f++)c.push(Hx(u.slice([f,0],[1,e]),r));return pn(c)}}),k5=Object.freeze({hannWindow:Gx,hammingWindow:nk,frame:Qx,stft:rk}),Qn,D5=function(n,e,t){return t===void 0&&(t=1),ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x,w;return De(this,function(_){switch(_.label){case 0:return r=P(n,"predictions","inTopK"),a=P(e,"targets","inTopK"),L(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),L(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),Ot(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],L(t>0&&t<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+t}),[4,r.data()];case 1:return o=_.sent(),[4,a.data()];case 2:for(u=_.sent(),c=[o.length/i,i],d=c[1],p=ih("bool",f=c[0]),v=0;v<f;v++){for(g=v*d,y=o.subarray(g,g+d),x=[],w=0;w<y.length;w++)x.push({value:y[w],index:w});for(x.sort(function(S,C){return C.value-S.value}),p[v]=0,w=0;w<t;w++)if(x[w].index===u[v]){p[v]=1;break}}return n!==r&&r.dispose(),e!==a&&a.dispose(),[2,zn(p,a.shape,"bool")]}})})};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Qn||(Qn={}));var N5=j({absoluteDifference_:function(n,e,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=P(n,"labels","absoluteDifference"),i=P(e,"predictions","absoluteDifference"),o=null;t!=null&&(o=P(t,"weights","absoluteDifference")),Ot(a.shape,i.shape,"Error in absoluteDifference: ");var u=a.sub(i).abs();return Vi(u,o,r)}}),Vi=j({computeWeightedLoss_:function(n,e,t){t===void 0&&(t=Qn.SUM_BY_NONZERO_WEIGHTS);var r=P(n,"losses","computeWeightedLoss"),a=null;e!=null&&(a=P(e,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(t===Qn.NONE)return i;if(t===Qn.SUM)return i.sum();if(t===Qn.MEAN){if(a==null)return i.mean();var o=r.size/a.size,u=i.sum().div(a.sum());return o>1?u.div(we(o)):u}if(t===Qn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(we(r.size));var c=a.mul(uc(r.shape)).notEqual(we(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+t)}}),I5=j({cosineDistance_:function(n,e,t,r,a){a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"labels","cosineDistance"),o=P(e,"predictions","cosineDistance"),u=null;r!=null&&(u=P(r,"weights","cosineDistance")),Ot(i.shape,o.shape,"Error in cosineDistance: ");var c=we(1).sub(i.mul(o).sum(t,!0));return Vi(c,u,a)}}),M5=j({hingeLoss_:function(n,e,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=P(n,"labels","hingeLoss"),i=P(e,"predictions","hingeLoss"),o=null;t!=null&&(o=P(t,"weights","hingeLoss")),Ot(a.shape,i.shape,"Error in hingeLoss: ");var u=we(1);a=we(2).mul(a).sub(u);var c=u.sub(a.mul(i)).relu();return Vi(c,o,r)}}),F5=j({huberLoss_:function(n,e,t,r,a){r===void 0&&(r=1),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"labels","huberLoss"),o=P(e,"predictions","huberLoss"),u=null;t!=null&&(u=P(t,"weights","huberLoss")),Ot(i.shape,o.shape,"Error in huberLoss: ");var c=we(r),f=o.sub(i).abs(),d=PA(f,c),p=f.sub(d),v=we(.5).mul(d.square()).add(c.mul(p));return Vi(v,u,a)}}),P5=j({logLoss_:function(n,e,t,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"labels","logLoss"),o=P(e,"predictions","logLoss"),u=null;t!=null&&(u=P(t,"weights","logLoss")),Ot(i.shape,o.shape,"Error in logLoss: ");var c=we(1),f=we(r),d=i.mul(o.add(f).log()).neg().sub(c.sub(i).mul(c.sub(o).add(f).log()));return Vi(d,u,a)}}),L5=j({meanSquaredError_:function(n,e,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=P(n,"labels","meanSquaredError"),i=P(e,"predictions","meanSquaredError"),o=null;t!=null&&(o=P(t,"weights","meanSquaredError")),Ot(a.shape,i.shape,"Error in meanSquaredError: ");var u=a.squaredDifference(i);return Vi(u,o,r)}}),B5=j({sigmoidCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"multiClassLabels","sigmoidCrossEntropy"),o=P(e,"logits","sigmoidCrossEntropy"),u=null;if(t!=null&&(u=P(t,"weights","sigmoidCrossEntropy")),Ot(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=we(r),f=we(1),d=we(.5);i=i.mul(f.sub(c)).add(d.mul(c))}var p=function(v,g){var y=P(v,"labels","sigmoidCrossEntropyWithLogits"),x=P(g,"logits","sigmoidCrossEntropyWithLogits");Ot(y.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=x.relu(),_=x.mul(y),S=x.abs().neg().exp().log1p();return w.sub(_).add(S)}(i,o);return Vi(p,u,a)}}),z5=j({softmaxCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"onehotLabels","softmaxCrossEntropy"),o=P(e,"logits","softmaxCrossEntropy"),u=null;if(t!=null&&(u=P(t,"weights","softmaxCrossEntropy")),Ot(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=we(r),f=we(1),d=we(i.shape[1]);i=i.mul(f.sub(c)).add(c.div(d))}var p=function(v,g,y){if(y===void 0&&(y=-1),y===-1&&(y=g.rank-1),y!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+y);return Hv(function(x,w,_){var S=w.logSumExp([y],!0),C=w.toFloat().sub(S);return _([x,C]),{value:C.mul(x).neg().sum([y]),gradFunc:function(R,T){var O=T[0],D=T[1],N=mr(R.shape,[y]);return[R.reshape(N).mul(O.toFloat().sub(D.exp())),R.reshape(N).mul(D.exp().sub(O.toFloat()))]}}})(v,g)}(i,o);return Vi(p,u,a)}}),U5=Object.freeze({get Reduction(){return Qn},absoluteDifference:N5,computeWeightedLoss:Vi,cosineDistance:I5,hingeLoss:M5,huberLoss:F5,logLoss:P5,meanSquaredError:L5,sigmoidCrossEntropy:B5,softmaxCrossEntropy:z5});function CC(n,e){return e===void 0&&(e=!1),W.tidy(function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var t=n.shape[0],r=n.shape[1],a=XO(t),i=n.clone(),o=Lo([[1]],[1,1]),u=o.clone(),c=t>=r?r:t,f=function(p){var v,g=i,y=u,x=a;v=W.tidy(function(){var w=i.slice([p,p],[t-p,1]),_=w.norm(),S=i.slice([p,p],[1,1]),C=Lo([[-1]]).where(S.greater(0),Lo([[1]])),R=S.sub(C.mul(_)),T=w.div(R);u=T.shape[0]===1?o.clone():o.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var O=C.matMul(R).div(_).neg(),D=i.slice([p,0],[t-p,r]),N=O.mul(u);if(p===0)i=D.sub(N.matMul(u.transpose().matMul(D)));else{var k=D.sub(N.matMul(u.transpose().matMul(D)));i=i.slice([0,0],[p,r]).concat(k,0)}var I=a.slice([0,p],[t,a.shape[1]-p]);if(p===0)a=I.sub(I.matMul(u).matMul(N.transpose()));else{var B=I.sub(I.matMul(u).matMul(N.transpose()));a=a.slice([0,0],[t,p]).concat(B,1)}return[u,i,a]}),u=v[0],i=v[1],a=v[2],vr([g,y,x])},d=0;d<c;++d)f(d);return!e&&t>r&&(a=a.slice([0,0],[t,r]),i=i.slice([0,0],[r,r])),[a,i]})}var V5=j({bandPart_:function(n,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=P(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],u=i[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(t<=u))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+u+").");e<0&&(e=o),t<0&&(t=u);var c=hv(0,o,1,"int32").reshape([-1,1]),f=hv(0,u,1,"int32"),d=gn(c,f),p=Qv(d.lessEqual(we(+e,"int32")),d.greaterEqual(we(-t,"int32"))),v=Bt([o,u],r.dtype);return Nr(vn(r.reshape([-1,o,u])).map(function(g){return Js(p,g,v)})).reshape(a)}}),j5=j({gramSchmidt_:function(n){var e;if(Array.isArray(n)){e=!1,L(n!=null&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=n[0].shape[0],r=function(c){L(n[c].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[c].shape[0]+" vs. "+t+")"})},a=1;a<n.length;++a)r(a)}else e=!0,n=Ax(n,n.shape[0],0).map(function(c){return JO(c,[0])});L(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var i=[],o=n,u=function(c){i.push(W.tidy(function(){var f=o[c];if(c>0)for(var d=0;d<c;++d){var p=KA(i[d].mulStrict(f)).mul(i[d]);f=f.sub(p)}return f.div(JA(f,"euclidean"))}))};for(a=0;a<n.length;++a)u(a);return e?Nr(i,0):i}}),q5=j({qr_:function(n,e){if(e===void 0&&(e=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return CC(n,e);var t=n.shape.slice(0,n.shape.length-2).reduce(function(o,u){return o*u}),r=vn(n.reshape([t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),a=[],i=[];return r.forEach(function(o){var u=CC(o,e),c=u[0],f=u[1];a.push(c),i.push(f)}),[Nr(a,0).reshape(n.shape),Nr(i,0).reshape(n.shape)]}}),W5=Object.freeze({bandPart:V5,gramSchmidt:j5,qr:q5});function Yv(n,e,t,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=n.shape[0];return t=Math.min(t,o),L(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),L(n.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),L(n.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),L(e.rank===1,function(){return"scores must be a 1D tensor"}),L(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),L(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var H5=j({resizeBilinear_:function(n,e,t){t===void 0&&(t=!1);var r=P(n,"images","resizeBilinear");L(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),L(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],u=e[1],c=W.runKernelFunc(function(f,d){return d([a]),f.resizeBilinear(a,o,u,t)},{x:a},function(f,d){return{x:function(){return W.runKernelFunc(function(p){return p.resizeBilinearBackprop(f,d[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:o,newWidth:u});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),G5=j({resizeNearestNeighbor_:function(n,e,t){t===void 0&&(t=!1);var r=P(n,"images","resizeNearestNeighbor");L(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),L(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),L(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],u=e[1],c=W.runKernelFunc(function(f,d){return d([a]),f.resizeNearestNeighbor(a,o,u,t)},{batchImages:a},function(f,d){return{batchImages:function(){return W.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(f,d[0],t)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Q5=j({nonMaxSuppression_:function(n,e,t,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=P(n,"boxes","nonMaxSuppression"),o=P(e,"scores","nonMaxSuppression"),u=Yv(i,o,t,r,a);t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold;var c={maxOutputSize:t,iouThreshold:r,scoreThreshold:a};return W.runKernelFunc(function(f){return f.nonMaxSuppression(i,o,t,r,a)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),$5=function(n,e,t,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),ke(this,void 0,void 0,function(){var i,o,u,c,f,d,p;return De(this,function(v){switch(v.label){case 0:return i=P(n,"boxes","nonMaxSuppressionAsync"),o=P(e,"scores","nonMaxSuppressionAsync"),u=Yv(i,o,t,r,a),t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=v.sent(),f=c[0],d=c[1],p=Ix(f,d,t,r,a),i!==n&&i.dispose(),o!==e&&o.dispose(),[2,p]}})})},K5=j({nonMaxSuppressionWithScore_:function(n,e,t,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=P(n,"boxes","nonMaxSuppression"),u=P(e,"scores","nonMaxSuppression"),c=Yv(o,u,t,r,a,i),f={maxOutputSize:t=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},d=W.runKernel("NonMaxSuppressionV5",{boxes:o,scores:u},f);return{selectedIndices:d[0],selectedScores:d[1]}}}),X5=function(n,e,t,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),ke(this,void 0,void 0,function(){var o,u,c,f,d,p,v;return De(this,function(g){switch(g.label){case 0:return o=P(n,"boxes","nonMaxSuppressionAsync"),u=P(e,"scores","nonMaxSuppressionAsync"),c=Yv(o,u,t,r,a,i),t=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),u.data()])];case 1:return f=g.sent(),d=f[0],p=f[1],v=Mx(d,p,t,r,a,i),o!==n&&o.dispose(),u!==e&&u.dispose(),[2,v]}})})},Y5=j({cropAndResize_:function(n,e,t,r,a,i){var o=P(n,"image","cropAndResize"),u=P(e,"boxes","cropAndResize","float32"),c=P(t,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var f=u.shape[0];return L(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),L(u.rank===2&&u.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+f+",4] but had shape "+u.shape+"."}),L(c.rank===1&&c.shape[0]===f,function(){return"Error in cropAndResize: boxInd must be have size ["+f+"] but had shape "+u.shape+"."}),L(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),L(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),L(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),W.runKernelFunc(function(d,p){return d.cropAndResize(o,u,c,r,a,i)},{images:o,boxes:u,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),$x=Object.freeze({resizeBilinear:H5,resizeNearestNeighbor:G5,nonMaxSuppression:Q5,nonMaxSuppressionAsync:$5,nonMaxSuppressionWithScore:K5,nonMaxSuppressionWithScoreAsync:X5,cropAndResize:Y5}),Kx=function(n,e){return!(n>0)||e==="linear"},Xx=function(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return n.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},Yx=function(n,e){var t=e,r=mn(n.shape,e.shape);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},Zx=function(n,e,t){if(e==="linear")return n;if(e==="relu")return qt(n);if(e==="elu")return XA(n);if(e==="relu6")return ZA(n);if(e==="prelu")return YA(n,t);throw new Error("Unknown fused activation "+e+".")},Z5=j({fusedMatMul_:function(n){var e,t=n.a,r=n.b,a=n.transposeA,i=a!==void 0&&a,o=n.transposeB,u=o!==void 0&&o,c=n.bias,f=n.activation,d=f===void 0?"linear":f,p=n.preluActivationWeights;if(Kx(W.state.gradientDepth,d)===!1){var v=Kv(t,r,i,u);return c!=null&&(v=ut(v,c)),Zx(v,d,p)}var g=P(t,"a","fused matMul"),y=P(r,"b","fused matMul");e=Ht(g,y),g=e[0],y=e[1];var x=i?g.shape[g.rank-2]:g.shape[g.rank-1],w=u?y.shape[y.rank-1]:y.shape[y.rank-2],_=i?g.shape[g.rank-1]:g.shape[g.rank-2],S=u?y.shape[y.rank-2]:y.shape[y.rank-1],C=g.shape.slice(0,-2),R=y.shape.slice(0,-2),T=Ie(C),O=Ie(R);L(g.rank>=2&&y.rank>=2&&g.rank===y.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+y.rank+"."}),L(On(C,R),function(){return"Error in fused matMul: outer dimensions ("+C+") and ("+R+") of Tensors with shapes "+g.shape+" and "+y.shape+" must match."}),L(x===w,function(){return"Error in fused matMul: inner shapes ("+x+") and ("+w+") of Tensors with shapes "+g.shape+" and "+y.shape+" and transposeA="+i+" and transposeB="+u+" must match."});var D,N,k=g.shape.slice(0,-2).concat([_,S]),I=i?g.as3D(T,x,_):g.as3D(T,_,x),B=u?y.as3D(O,S,w):y.as3D(O,w,S);c!=null&&ct(k,(D=Ht(D=P(c,"bias","fused matMul"),g)[0]).shape),p!=null&&(N=P(p,"prelu weights","fused matMul"));var U={a:I,b:B};c!=null&&(U.bias=D),p!=null&&(U.preluActivationWeights=N);var ee=[I,B];return W.runKernelFunc(function(te,re){var q=te.fusedBatchMatMul({a:I,b:B,transposeA:i,transposeB:u,bias:D,activation:d,preluActivationWeights:N});return re([I,B,q]),q},U,function(te,re){var q=re[0],Z=re[1],G=re[2],Y=Xx(te,G,d),F={};return c!=null&&(F={bias:function(){return Yx(D,Y)}}),Object.assign(i||u?!i&&u?{a:function(){return Y.matMul(Z,!1,!1)},b:function(){return Y.matMul(q,!0,!1)}}:i&&!u?{a:function(){return Z.matMul(Y,!1,!0)},b:function(){return q.matMul(Y,!1,!1)}}:{a:function(){return Z.matMul(Y,!0,!0)},b:function(){return Y.matMul(q,!0,!0)}}:{a:function(){return Y.matMul(Z,!1,!0)},b:function(){return q.matMul(Y,!0,!1)}},F)},"_FusedMatMul",{transposeA:i,transposeB:u,activation:d},ee,[!0]).reshape(k)}}),J5=j({fusedConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,o=i===void 0?"NHWC":i,u=n.dilations,c=u===void 0?[1,1]:u,f=n.dimRoundingMode,d=n.bias,p=n.activation,v=p===void 0?"linear":p,g=n.preluActivationWeights;if(v=v||"linear",Kx(W.state.gradientDepth,v)===!1){var y=Jr(e,t,r,a,o,c,f);return d!=null&&(y=ut(y,d)),Zx(y,v,g)}var x=P(e,"x","conv2d"),w=P(t,"filter","conv2d"),_=x,S=!1;x.rank===3&&(S=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),L(_.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+_.rank+"."}),L(w.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."}),f!=null&&L(en(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+f+" but got pad "+a+"."}),L(_.shape[3]===w.shape[2],function(){return"Error in conv2d: depth of input ("+_.shape[3]+") must match input depth for filter "+w.shape[2]+"."}),L(gr(r,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),L(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var C,R,T=ou(_.shape,w.shape,r,c,a,f);d!=null&&(C=Ht(C=P(d,"bias","fused conv2d"),x)[0],ct(T.outShape,C.shape)),g!=null&&(R=P(g,"prelu weights","fused conv2d"));var O={x:_,filter:w};d!=null&&(O.bias=C),g!=null&&(O.preluActivationWeights=R);var D=[w,_],N=W.runKernelFunc(function(k,I){var B=k.fusedConv2d({input:_,filter:w,convInfo:T,bias:C,activation:v,preluActivationWeights:R});return I([w,_,B]),B},O,function(k,I){var B=I,U=B[0],ee=B[1],te=B[2],re=Xx(k,te,v);L(Zl(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var q={};return d!=null&&(q={bias:function(){return Yx(C,re)}}),Object.assign({x:function(){return jA(ee.shape,re,U,r,a)},filter:function(){return jx(ee,re,U.shape,r,a)}},q)},"FusedConv2D",{convInfo:T,activation:v},D,[!0]);return S?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),e6=j({fusedDepthwiseConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,o=i===void 0?"NHWC":i,u=n.dilations,c=u===void 0?[1,1]:u,f=n.dimRoundingMode,d=n.bias,p=n.activation,v=p===void 0?"linear":p,g=n.preluActivationWeights;if(Kx(W.state.gradientDepth,v)===!1){var y=$v(e,t,r,a,o,c,f);return d!=null&&(y=ut(y,d)),Zx(y,v,g)}var x=P(e,"x","depthwiseConv2d"),w=P(t,"filter","depthwiseConv2d"),_=x,S=!1;x.rank===3&&(S=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),L(_.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+_.rank+"."}),L(w.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."}),L(_.shape[3]===w.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+_.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."}),c==null&&(c=[1,1]),L(gr(r,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),f!=null&&L(en(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+f+" but got pad "+a+"."});var C,R,T=ou(_.shape,w.shape,r,c,a,f,!0);d!=null&&(C=Ht(C=P(d,"bias","fused conv2d"),x)[0],ct(T.outShape,C.shape)),g!=null&&(R=P(g,"prelu weights","fused depthwiseConv2d"));var O={x:_,filter:w};d!=null&&(O.bias=C),g!=null&&(O.preluActivationWeights=R);var D=[w,_],N=W.runKernelFunc(function(k,I){var B=k.fusedDepthwiseConv2D({input:_,filter:w,convInfo:T,bias:C,activation:v,preluActivationWeights:R});return I([w,_,B]),B},O,function(k,I){L(Zl(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var B=I[0],U=I[1],ee=I[2],te=Xx(k,ee,v),re={};return d!=null&&(re={bias:function(){return Yx(C,te)}}),Object.assign({x:function(){return qA(U.shape,te,B,T)},filter:function(){return WA(U,te,B.shape,T)}},re)},"FusedDepthwiseConv2D",{convInfo:T,activation:v},D,[!0]);return S?N.as3D(N.shape[1],N.shape[2],N.shape[3]):N}}),t6=Object.freeze({matMul:Z5,conv2d:J5,depthwiseConv2d:e6}),n6=Object.freeze({image:$x,linalg:W5,losses:U5,spectral:C5,fused:t6,signal:k5,square:PV,squaredDifference:RA,conv1d:Hj,conv2d:Jr,conv3d:Gj,depthwiseConv2d:$v,separableConv2d:qx,conv2dTranspose:Qj,conv3dTranspose:$j,op:j,batchNormalization2d:hj,batchNormalization3d:dj,batchNormalization4d:pj,batchNormalization:vj,batchNorm:NA,batchNorm2d:mj,batchNorm3d:gj,batchNorm4d:yj,booleanMaskAsync:Wj,complex:Ln,real:$r,imag:Va,concat:pn,concat1d:tz,concat2d:nz,concat3d:rz,concat4d:az,split:Ax,matMul:Kv,dot:Kj,outerProduct:Xj,reverse:Dh,reverse1d:Yj,reverse2d:Zj,reverse3d:Jj,reverse4d:e5,maxPool:En,avgPool:Nh,pool:t5,maxPool3d:n5,avgPool3d:r5,slice:Ya,slice1d:a5,slice2d:i5,slice3d:QA,slice4d:o5,abs:LV,acos:BV,acosh:zV,asin:UV,asinh:VV,atan:jV,atanh:qV,ceil:WV,clipByValue:zx,cos:HV,cosh:GV,erf:QV,exp:Tb,expm1:$V,floor:KV,log:XV,log1p:YV,logSigmoid:ZV,neg:xv,reciprocal:JV,round:ej,rsqrt:TA,sigmoid:OA,sign:tj,isNaN:nj,isInf:rj,isFinite:aj,sin:ij,sinh:oj,softplus:sj,sqrt:uj,step:lj,tan:cj,tanh:fj,all:s5,any:u5,argMax:l5,argMin:c5,logSumExp:f5,max:Xv,mean:h5,min:d5,moments:p5,sum:KA,prod:v5,equal:LA,equalStrict:Mj,greater:Fj,greaterEqual:BA,greaterEqualStrict:Pj,greaterStrict:Lj,less:Bj,lessEqual:zj,lessEqualStrict:Uj,lessStrict:Vj,notEqual:jj,notEqualStrict:qj,add:ut,addN:wj,addStrict:_j,atan2:Ej,div:ca,divNoNan:Sj,divStrict:Cj,floorDiv:FA,maximum:Ux,maximumStrict:Rj,minimum:PA,minimumStrict:Tj,mod:Oj,modStrict:Aj,mul:$n,mulStrict:kj,pow:wv,powStrict:Dj,squaredDifferenceStrict:Nj,sub:gn,subStrict:Ij,elu:XA,leakyRelu:m5,prelu:YA,relu:qt,relu6:ZA,selu:g5,logicalAnd:Qv,logicalNot:bj,logicalOr:IA,logicalXor:xj,where:Js,whereAsync:MA,buffer:Je,print:dz,batchToSpaceND:KO,broadcastTo:pz,cast:vz,clone:mz,cumsum:gz,depthToSpace:yz,expandDims:Qr,eye:XO,multinomial:bz,oneHot:Eb,pad:iu,pad1d:xz,pad2d:wz,pad3d:_z,pad4d:Ez,rand:Sz,randomNormal:Cz,randomGamma:Rz,randomUniform:YO,reshape:da,spaceToBatchND:ZO,squeeze:JO,stack:Nr,tile:ml,truncatedNormal:Tz,unstack:vn,setdiff1dAsync:Oz,fill:Qa,linspace:ez,ones:uc,range:hv,scalar:we,tensor:zn,tensor1d:sn,tensor2d:Lo,tensor3d:Ox,tensor4d:hr,tensor5d:YB,tensor6d:ZB,variable:JB,zeros:Bt,onesLike:$O,zerosLike:gt,transpose:Go,softmax:Ui,logSoftmax:Fz,localResponseNormalization:y5,norm:JA,gather:Vx,unsortedSegmentSum:zA,basicLSTMCell:b5,multiRNNCell:x5,movingAverage:w5,stridedSlice:_5,topk:E5,scatterND:S5,fft:Wx,ifft:_v,rfft:Hx,irfft:ek,sparseToDense:R5,gatherND:T5,diag:O5,dropout:A5,hannWindow:Gx,hammingWindow:nk,frame:Qx,stft:rk,inTopKAsync:D5});function ve(n,e){Array.isArray(n)||(n=[n]),n.forEach(function(t){t!=null&&L(t.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function i0(n,e,t,r){if(t==="linear")return n.linear(e);if(t==="relu")return n.relu(e);if(t==="elu")return n.elu(e);if(t==="relu6")return n.relu6(e);if(t==="prelu")return n.prelu(e,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var r6=function(n){function e(){var t=n.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new oA(t,W),t}return wa(e,n),e.prototype.write=function(t,r,a){this.firstUse&&(this.firstUse=!1,ue().get("IS_NODE")&&cv(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:t,dtype:a}),i},e.prototype.move=function(t,r,a,i){this.data.set(t,{values:r,dtype:i})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var r=this.data.get(t),a=r.dtype,i=r.complexTensors;return a==="complex64"?Rb(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),a=r;if(t.dtype==="string")try{a=r.map(function(i){return sv(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Je(t.shape,t.dtype,a)},e.prototype.makeOutput=function(t,r,a){var i=this.write(t,r,a);return W.makeTensorFromDataId(i,r,a,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){return r=Ba(),t(),[2,{kernelMs:Ba()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,r){var a=this.makeOutput(null,t.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(ve(t,"slice"),aA(t.shape,r,a)){var i=iA(r,t.strides),o=Ie(a);return zn(this.readSync(t.dataId).subarray(i,i+o),a,t.dtype)}for(var u=Je(a,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var d=u.indexToLoc(f).map(function(p,v){return p+r[v]});u.values[f]=c.get.apply(c,d)}return u.toTensor()},e.prototype.stridedSlice=function(t,r,a,i){ve(t,"stridedSlice");var o=Dx(r,a,i);if(o.some(function(g){return g===0}))return zn([],o);for(var u=Je(o,t.dtype),c=this.bufferSync(t),f=0;f<u.size;f++){for(var d=u.indexToLoc(f),p=new Array(d.length),v=0;v<p.length;v++)p[v]=d[v]*i[v]+r[v];u.set.apply(u,[c.get.apply(c,p)].concat(d))}return u.toTensor()},e.prototype.diag=function(t){for(var r=this.readSync(t.dataId),a=Je([t.size,t.size],t.dtype),i=a.values,o=0;o<r.length;o++)i[o*t.size+o]=r[o];return a.toTensor()},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var d=new Array(a);for(u=0;u<d.length;u++)c[r]=u,d[u]=this.slice(t,c,f).reshape(i);return d},e.prototype.reverse=function(t,r){ve(t,"reverse");for(var a=Je(t.shape,t.dtype),i=this.bufferSync(t),o=function(c){var f=a.indexToLoc(c),d=f.slice();r.forEach(function(p){return d[p]=t.shape[p]-1-d[p]}),a.set.apply(a,[i.get.apply(i,d)].concat(f))},u=0;u<a.size;u++)o(u);return a.toTensor()},e.prototype.concat=function(t,r){var a=this;if(t[0].dtype==="complex64"){var i=t.map(function(g){return $r(g)}),o=t.map(function(g){return Va(g)});return Ln(this.concat(i,r),this.concat(o,r))}var u=t.map(function(g){var y=Ie(g.shape.slice(r));return g.as2D(-1,y)}),c=Yl(u.map(function(g){return g.shape}),1),f=Je(c,t[0].dtype).values;if(u[0].shape[0]===1){var d=0;u.forEach(function(g){f.set(a.readSync(g.dataId),d),d+=g.size})}else{var p=0;u.forEach(function(g){for(var y=a.readSync(g.dataId),x=0,w=0;w<g.shape[0];++w)for(var _=w*c[1]+p,S=0;S<g.shape[1];++S)f[_+S]=y[x++];p+=g.shape[1]})}var v=Yl(t.map(function(g){return g.shape}),r);return zn(f,v,t[0].dtype)},e.prototype.neg=function(t){return ve(t,"neg"),this.multiply(we(-1),t)},e.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a+o,imag:i+u}}):this.broadcastedBinaryOp(t,r,Bn(t.dtype,r.dtype),function(a,i){return a+i})},e.prototype.addN=function(t){var r=this;ve(t,"addN");for(var a=t.map(function(d){return r.readSync(d.dataId)}),i=Je(t[0].shape,t[0].dtype),o=i.values,u=0;u<t.length;u++)for(var c=a[u],f=0;f<o.length;f++)o[f]+=c[f];return i.toTensor()},e.prototype.softmax=function(t,r){var a=yn([r],t.shape),i=this.max(t,a),o=mr(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},e.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a-o,imag:i-u}}):this.broadcastedBinaryOp(t,r,Bn(t.dtype,r.dtype),function(a,i){return a-i})},e.prototype.pow=function(t,r){return ve([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.pow(a,i)})},e.prototype.batchMatMul=function(t,r,a,i){ve([t,r],"matMul");for(var o=a?t.shape[1]:t.shape[2],u=a?t.shape[2]:t.shape[1],c=i?r.shape[1]:r.shape[2],f=t.shape[0],d=this.readSync(t.dataId),p=this.readSync(r.dataId),v=a?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],g=v[0],y=v[1],x=v[2],w=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],_=w[0],S=w[1],C=w[2],R=u*c,T=Je([f,u,c],t.dtype),O=T.values,D=this.blockSize,N=0;N<f;N++)for(var k=0;k<u;k+=D)for(var I=0;I<c;I+=D)for(var B=0;B<o;B+=D)for(var U=Math.min(k+D,u),ee=Math.min(I+D,c),te=Math.min(B+D,o),re=k;re<U;re++)for(var q=I;q<ee;q++){for(var Z=0,G=B;G<te;G++)Z+=d[N*g+re*y+G*x]*p[G*_+q*S+N*C];O[N*R+(re*c+q)]+=Z}return T.toTensor()},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=this.batchMatMul(r,a,i,o);return u&&(d=this.add(d,u)),c&&(d=i0(this,d,c,f)),d},e.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a*o-i*u,imag:a*u+i*o}}):this.broadcastedBinaryOp(t,r,Bn(t.dtype,r.dtype),function(a,i){return a*i})},e.prototype.realDivide=function(t,r){return ve([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(a,i){return a/i})},e.prototype.floorDiv=function(t,r){return ve([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(a,i){return Math.floor(a/i)})},e.prototype.sum=function(t,r){ve(t,"sum"),Rr("sum",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,Bn(t.dtype,"int32")),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=0,y=0;y<c;++y)g+=d[v+y];f[p]=g}return u},e.prototype.prod=function(t,r){ve(t,"sum");for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,Bn(t.dtype,"int32")),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=1,y=0;y<c;++y)g*=d[v+y];f[p]=g}return u},e.prototype.unsortedSegmentSum=function(t,r,a){ve(t,"unsortedSegmentSum");for(var i=[],o=t.rank-r.rank,u=0;u<o;++u)r=r.expandDims(u+1);for(u=0;u<a;++u){var c=we(u,"int32"),f=LA(c,r).asType("float32").mul(t).sum(0);i.push(f)}return Nr(i)},e.prototype.argMin=function(t,r){ve(t,"argMin");var a=[r];Rr("argMin",a,t.rank);for(var i=Wn(t.shape,a),o=i[0],u=i[1],c=Bt(o,"int32"),f=Ie(u),d=this.readSync(c.dataId),p=this.readSync(t.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],x=0,w=0;w<f;++w){var _=p[g+w];_<y&&(y=_,x=w)}d[v]=x}return c},e.prototype.argMax=function(t,r){ve(t,"argMax");var a=[r];Rr("argMax",a,t.rank);for(var i=Wn(t.shape,a),o=i[0],u=i[1],c=Bt(o,"int32"),f=Ie(u),d=this.readSync(c.dataId),p=this.readSync(t.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],x=0,w=0;w<f;++w){var _=p[g+w];_>y&&(y=_,x=w)}d[v]=x}return c},e.prototype.cumsum=function(t,r,a,i){if(ve(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var o=Bn(t.dtype,"int32"),u=Bt(t.shape,o),c=this.readSync(u.dataId),f=this.readSync(t.dataId),d=t.shape[t.rank-1],p=i?function(w,_){return w+d-_-1}:function(w,_){return w+_},v=0;v<f.length;v+=d)for(var g=0;g<d;g++){var y=p(v,g);if(g===0)c[y]=a?0:f[y];else{var x=p(v,g-1);c[y]=a?f[x]+c[x]:f[y]+c[x]}}return u},e.prototype.equal=function(t,r){return ve([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a===i?1:0})},e.prototype.notEqual=function(t,r){return ve([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a!==i?1:0})},e.prototype.less=function(t,r){return ve([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<i?1:0})},e.prototype.lessEqual=function(t,r){return ve([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<=i?1:0})},e.prototype.greater=function(t,r){return ve([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>i?1:0})},e.prototype.greaterEqual=function(t,r){return ve([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>=i?1:0})},e.prototype.logicalNot=function(t){ve(t,"logicalNot");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,t.shape,"bool")},e.prototype.logicalAnd=function(t,r){return ve([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a&&i})},e.prototype.logicalOr=function(t,r){return ve([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a||i})},e.prototype.select=function(t,r,a){ve([t,r,a],"select");for(var i=this.readSync(t.dataId),o=this.readSync(r.dataId),u=this.readSync(a.dataId),c=Bt(r.shape,Bn(r.dtype,a.dtype)),f=this.readSync(c.dataId),d=0,p=t.rank===0||t.rank>1||r.rank===1?1:Ie(r.shape.slice(1)),v=0;v<i.length;v++)for(var g=0;g<p;g++)i[v]===1?f[d++]=o[v]:f[d++]=u[v];return c},e.prototype.where=function(t){ve([t],"where");var r=this.readSync(t.dataId);return Fx(t.shape,r)},e.prototype.topk=function(t,r,a){return ve(t,"topk"),pA(this.readSync(t.dataId),t.shape,t.dtype,r)},e.prototype.min=function(t,r){ve(t,"min"),Rr("min",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];x<g&&(g=x)}f[p]=g}return u},e.prototype.minimum=function(t,r){return ve([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.min(a,i)})},e.prototype.mod=function(t,r){return ve([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a%i;return a<0&&i<0||a>=0&&i>=0?o:(o+i)%i})},e.prototype.max=function(t,r){ve(t,"max"),Rr("max",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];x>g&&(g=x)}f[p]=g}return u},e.prototype.maximum=function(t,r){return ve([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.max(a,i)})},e.prototype.all=function(t,r){ve(t,"all"),Rr("all",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];g=g&&x}f[p]=g}return u},e.prototype.any=function(t,r){ve(t,"any"),Rr("any",r,t.rank);for(var a=Wn(t.shape,r),i=a[0],o=a[1],u=Bt(i,t.dtype),c=Ie(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];g=g||x}f[p]=g}return u},e.prototype.squaredDifference=function(t,r){return ve([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a-i;return o*o})},e.prototype.ceil=function(t){ve(t,"ceil");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.floor=function(t){ve(t,"floor");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.sign=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,t.shape,"float32")},e.prototype.isNaN=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isInf=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isFinite=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.round=function(t){ve(t,"round");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=Math.floor(r[i]);r[i]-o<.5?a[i]=Math.floor(r[i]):r[i]-o>.5?a[i]=Math.ceil(r[i]):a[i]=o%2==0?o:o+1}return this.makeOutput(a,t.shape,"float32")},e.prototype.exp=function(t){ve(t,"exp");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.expm1=function(t){ve(t,"expm1");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.log=function(t){ve(t,"log");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.log1p=function(t){ve(t,"log1p");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log1p(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.sqrt=function(t){ve(t,"sqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.rsqrt=function(t){ve(t,"rsqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=1/Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.reciprocal=function(t){ve(t,"reciprocal");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){ve(t,"relu");for(var r=Bt(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.max(0,i[o]);return r},e.prototype.relu6=function(t){ve(t,"relu");for(var r=Bt(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.min(Math.max(0,i[o]),6);return r},e.prototype.prelu=function(t,r){return ve([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return a<0?i*a:a})},e.prototype.elu=function(t){ve(t,"elu");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,t.shape,"float32")},e.prototype.eluDer=function(t,r){ve([t,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),o=this.readSync(t.dataId),u=0;u<i.length;++u){var c=i[u];a[u]=c>=1?o[u]:o[u]*(c+1)}return this.makeOutput(a,r.shape,"float32")},e.prototype.selu=function(t){ve(t,"selu");for(var r=Lx,a=Bx,i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(i,t.shape,"float32")},e.prototype.clip=function(t,r,a){ve(t,"clip");for(var i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>a?a:c<r?r:c}return this.makeOutput(i,t.shape,"float32")},e.prototype.abs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<t.size;++i){var o=a[2*i],u=a[2*i+1];r[i]=Math.hypot(o,u)}return this.makeOutput(r,t.shape,"float32")},e.prototype.int=function(t){ve(t,"int");for(var r=new Int32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,t.shape,"int32")},e.prototype.sigmoid=function(t){ve(t,"sigmoid");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,t.shape,"float32")},e.prototype.softplus=function(t){ve(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o]>-r,c=i[o]<r,f=Math.exp(i[o]),d=void 0;d=c?f:u?i[o]:Math.log(1+f),a[o]=d}return this.makeOutput(a,t.shape,"float32")},e.prototype.sin=function(t){ve(t,"sin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cos=function(t){ve(t,"cos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tan=function(t){ve(t,"tan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asin=function(t){ve(t,"asin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acos=function(t){ve(t,"acos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan=function(t){ve(t,"atan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan2=function(t,r){return ve([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.atan2(a,i)})},e.prototype.sinh=function(t){ve(t,"sinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cosh=function(t){ve(t,"cosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tanh=function(t){ve(t,"tanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=aB(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asinh=function(t){ve(t,"asinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acosh=function(t){ve(t,"acosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atanh=function(t){ve(t,"atanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.erf=function(t){ve(t,"erf");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=Math.sign(a[i]),u=Math.abs(a[i]),c=1/(1+.3275911*u);r[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-u*u))}return this.makeOutput(r,t.shape,"float32")},e.prototype.step=function(t,r){r===void 0&&(r=0),ve(t,"step");for(var a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o];isNaN(u)?a[o]=NaN:a[o]=u>0?1:r}return this.makeOutput(a,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.conv2d(r,a,i);return o&&(f=this.add(f,o)),u&&(f=i0(this,f,u,c)),f},e.prototype.conv2d=function(t,r,a){ve([t,r],"conv2d");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.dataFormat==="channelsLast",v=Je(a.outShape,t.dtype),g=t.strides[0],y=p?t.strides[1]:t.strides[2],x=p?t.strides[2]:1,w=p?1:t.strides[1],_=v.strides[0],S=p?v.strides[1]:v.strides[2],C=p?v.strides[2]:1,R=p?1:v.strides[1],T=this.readSync(t.dataId),O=this.readSync(r.dataId),D=v.values,N=0;N<a.batchSize;++N)for(var k=N*g,I=N*_,B=0;B<a.outHeight;++B)for(var U=I+B*S,ee=B*a.strideHeight-d,te=0;te<i;te++){var re=ee+te*u;if(!(re<0||re>=a.inHeight))for(var q=te*r.strides[0],Z=k+re*y,G=0;G<a.outWidth;++G)for(var Y=U+G*C,F=G*a.strideWidth-f,K=0;K<o;K++){var se=F+K*c;if(!(se<0||se>=a.inWidth))for(var fe=Z+se*x,he=q+K*r.strides[1],be=0;be<a.inChannels;++be){for(var ye=T[fe+be*w],Be=0;Be<a.outChannels;++Be)D[Y+Be*R]+=ye*O[he+Be];he+=a.outChannels}}}return v.toTensor()},e.prototype.conv3d=function(t,r,a){for(var i=a.filterDepth,o=a.filterHeight,u=a.filterWidth,c=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,p=a.padInfo.front,v=a.padInfo.left,g=a.padInfo.top,y=Je(a.outShape,t.dtype),x=this.readSync(t.dataId),w=this.readSync(r.dataId),_=y.values,S=0;S<a.batchSize;++S)for(var C=S*t.strides[0],R=S*y.strides[0],T=0;T<a.outDepth;++T)for(var O=R+T*y.strides[1],D=T*a.strideDepth-p,N=0;N<i;N++){var k=D+N*c;if(!(k<0||k>=a.inDepth))for(var I=N*r.strides[0],B=C+k*t.strides[1],U=0;U<a.outHeight;++U)for(var ee=O+U*y.strides[2],te=U*a.strideHeight-g,re=0;re<o;re++){var q=te+re*f;if(!(q<0||q>=a.inHeight))for(var Z=I+re*r.strides[1],G=B+q*t.strides[2],Y=0;Y<a.outWidth;++Y)for(var F=ee+Y*a.outChannels,K=Y*a.strideWidth-v,se=0;se<u;se++){var fe=K+se*d;if(!(fe<0||fe>=a.inWidth))for(var he=Z+se*r.strides[2],be=G+fe*a.inChannels,ye=he,Be=0;Be<a.inChannels;++Be){for(var xe=x[be+Be],Oe=0;Oe<a.outChannels;++Oe)_[F+Oe]+=xe*w[ye+Oe];ye+=a.outChannels}}}}return y.toTensor()},e.prototype.conv2dDerInput=function(t,r,a){ve([t,r],"conv2dDerInput");for(var i=Je(a.inShape,"float32"),o=i.values,u=this.readSync(t.dataId),c=this.readSync(r.dataId),f=r.strides,d=f[0],p=f[1],v=f[2],g=a.batchSize,y=a.filterHeight,x=a.filterWidth,w=a.inChannels,_=a.inHeight,S=a.inWidth,C=a.outChannels,R=a.outHeight,T=a.outWidth,O=a.strideHeight,D=a.strideWidth,N=a.dataFormat,k=y-1-a.padInfo.top,I=x-1-a.padInfo.left,B=N==="channelsLast",U=i.strides[0],ee=B?i.strides[1]:i.strides[2],te=B?i.strides[2]:1,re=B?1:i.strides[1],q=t.strides[0],Z=B?t.strides[1]:t.strides[2],G=B?t.strides[2]:1,Y=B?1:t.strides[1],F=0;F<g;++F)for(var K=0;K<w;++K)for(var se=0;se<_;++se)for(var fe=se-k,he=Math.max(0,Math.ceil(fe/O)),be=Math.min(R,(y+fe)/O),ye=0;ye<S;++ye){for(var Be=ye-I,xe=Math.max(0,Math.ceil(Be/D)),Oe=Math.min(T,(x+Be)/D),je=0,Ve=he;Ve<be;++Ve)for(var $e=Ve*O-fe,Ye=xe;Ye<Oe;++Ye)for(var bt=q*F+Z*Ve+G*Ye,St=d*(y-1-$e)+p*(x-1-(Ye*D-Be))+v*K,yt=0;yt<C;++yt)je+=u[bt+Y*yt]*c[St+yt];o[U*F+ee*se+te*ye+re*K]=je}return i.toTensor()},e.prototype.conv3dDerInput=function(t,r,a){for(var i=Je(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],d=u[2],p=u[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],x=g[1],w=g[2],_=g[3],S=this.readSync(r.dataId),C=r.strides,R=C[0],T=C[1],O=C[2],D=C[3],N=a.batchSize,k=a.filterDepth,I=a.filterHeight,B=a.filterWidth,U=a.inChannels,ee=a.inDepth,te=a.inHeight,re=a.inWidth,q=a.outChannels,Z=a.outDepth,G=a.outHeight,Y=a.outWidth,F=a.strideDepth,K=a.strideHeight,se=a.strideWidth,fe=k-1-a.padInfo.front,he=I-1-a.padInfo.top,be=B-1-a.padInfo.left,ye=0;ye<N;++ye)for(var Be=0;Be<U;++Be)for(var xe=0;xe<ee;++xe)for(var Oe=xe-fe,je=Math.max(0,Math.ceil(Oe/F)),Ve=Math.min(Z,(k+Oe)/F),$e=0;$e<te;++$e)for(var Ye=$e-he,bt=Math.max(0,Math.ceil(Ye/K)),St=Math.min(G,(I+Ye)/K),yt=0;yt<re;++yt){for(var or=yt-be,Yn=Math.max(0,Math.ceil(or/se)),kn=Math.min(Y,(B+or)/se),Ea=0,yr=je;yr<Ve;++yr)for(var Sa=yr*F-Oe,ea=bt;ea<St;++ea)for(var Dn=ea*K-Ye,ta=Yn;ta<kn;++ta)for(var cu=y*ye+x*yr+w*ea+_*ta,ii=R*(k-1-Sa)+T*(I-1-Dn)+O*(B-1-(ta*se-or))+D*Be,Zn=0;Zn<q;++Zn)Ea+=v[cu+Zn]*S[ii+Zn];o[c*ye+f*xe+d*$e+p*yt+Be]=Ea}return i.toTensor()},e.prototype.conv2dDerFilter=function(t,r,a){ve([t,r],"conv2dDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dataFormat==="channelsLast",d=Je(a.filterShape,"float32"),p=a.padInfo.left,v=a.padInfo.top,g=this.bufferSync(t),y=this.bufferSync(r),x=0;x<u;++x)for(var w=Math.max(0,Math.ceil((v-x)/i)),_=Math.min(a.outHeight,(a.inHeight+v-x)/i),S=0;S<c;++S)for(var C=Math.max(0,Math.ceil((p-S)/o)),R=Math.min(a.outWidth,(a.inWidth+p-S)/o),T=0;T<a.inChannels;++T)for(var O=0;O<a.outChannels;++O){for(var D=0,N=0;N<a.batchSize;++N)for(var k=w;k<_;++k)for(var I=x+k*i-v,B=C;B<R;++B){var U=S+B*o-p;D+=f?g.get(N,I,U,T)*y.get(N,k,B,O):g.get(N,T,I,U)*y.get(N,O,k,B)}d.set(D,x,S,T,O)}return d.toTensor()},e.prototype.conv3dDerFilter=function(t,r,a){for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=Je(a.filterShape,"float32"),v=p.values,g=p.strides,y=g[0],x=g[1],w=g[2],_=g[3],S=this.readSync(r.dataId),C=r.strides,R=C[0],T=C[1],O=C[2],D=C[3],N=this.readSync(t.dataId),k=t.strides,I=k[0],B=k[1],U=k[2],ee=k[3],te=a.padInfo.front,re=a.padInfo.left,q=a.padInfo.top,Z=0;Z<c;++Z)for(var G=Math.max(0,Math.ceil((te-Z)/i)),Y=Math.min(a.outDepth,(a.inDepth+te-Z)/i),F=Z*y,K=0;K<f;++K)for(var se=Math.max(0,Math.ceil((q-K)/o)),fe=Math.min(a.outHeight,(a.inHeight+q-K)/o),he=K*x+F,be=0;be<d;++be)for(var ye=Math.max(0,Math.ceil((re-be)/u)),Be=Math.min(a.outWidth,(a.inWidth+re-be)/u),xe=be*w+he,Oe=0;Oe<a.inChannels;++Oe)for(var je=Oe*_+xe,Ve=0;Ve<a.outChannels;++Ve){for(var $e=0,Ye=0;Ye<a.batchSize;++Ye)for(var bt=Ye*I,St=Ye*R,yt=G;yt<Y;++yt)for(var or=(Z+yt*i-te)*B+bt,Yn=yt*T+St,kn=se;kn<fe;++kn)for(var Ea=(K+kn*o-q)*U+or,yr=kn*O+Yn,Sa=ye;Sa<Be;++Sa){var ea=Sa*D+yr;$e+=N[(be+Sa*u-re)*ee+Ea+Oe]*S[ea+Ve]}v[je+Ve]=$e}return p.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.depthwiseConv2D(r,a,i);return o&&(f=this.add(f,o)),u&&(f=i0(this,f,u,c)),f},e.prototype.depthwiseConv2D=function(t,r,a){ve([t,r],"depthwiseConv2D");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.outChannels/a.inChannels,v=Je(a.outShape,t.dtype),g=this.readSync(t.dataId),y=this.readSync(r.dataId),x=v.values,w=0;w<a.batchSize;++w)for(var _=w*t.strides[0],S=w*v.strides[0],C=0;C<a.outHeight;++C)for(var R=S+C*v.strides[1],T=C*a.strideHeight-f,O=0;O<i;++O){var D=T+O*u;if(!(D<0||D>=a.inHeight))for(var N=O*r.strides[0],k=_+D*t.strides[1],I=0;I<a.outWidth;++I)for(var B=R+I*v.strides[2],U=I*a.strideWidth-d,ee=0;ee<o;++ee){var te=U+ee*c;if(!(te<0||te>=a.inWidth))for(var re=N+ee*r.strides[1],q=k+te*a.inChannels,Z=B,G=re,Y=0;Y<a.inChannels;++Y){for(var F=g[q+Y],K=0;K<p;++K)x[Z+K]+=F*y[G+K];Z+=p,G+=p}}}return v.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,r,a){ve([t,r],"depthwiseConv2DDerInput");for(var i=Je(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],d=u[2],p=this.readSync(t.dataId),v=t.strides,g=v[0],y=v[1],x=v[2],w=this.readSync(r.dataId),_=r.strides,S=_[0],C=_[1],R=_[2],T=a.batchSize,O=a.filterHeight,D=a.filterWidth,N=a.inChannels,k=a.inHeight,I=a.inWidth,B=a.outChannels,U=a.outHeight,ee=a.outWidth,te=a.strideHeight,re=a.strideWidth,q=O-1-a.padInfo.top,Z=D-1-a.padInfo.left,G=B/N,Y=0;Y<T;++Y)for(var F=0;F<N;++F)for(var K=0;K<k;++K)for(var se=K-q,fe=Math.max(0,Math.ceil(se/te)),he=Math.min(U,(O+se)/te),be=0;be<I;++be){for(var ye=be-Z,Be=Math.max(0,Math.ceil(ye/re)),xe=Math.min(ee,(D+ye)/re),Oe=0,je=fe;je<he;++je)for(var Ve=je*te-se,$e=Be;$e<xe;++$e)for(var Ye=g*Y+y*je+x*$e,bt=S*(O-1-Ve)+C*(D-1-($e*re-ye))+R*F,St=0;St<G;++St)Oe+=p[Ye+(F*G+St)]*w[bt+St];o[c*Y+f*K+d*be+F]=Oe}return i.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){ve([t,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=Je(a.filterShape,"float32"),d=a.padInfo.left,p=a.padInfo.top,v=a.outChannels/a.inChannels,g=this.bufferSync(t),y=this.bufferSync(r),x=0;x<u;++x)for(var w=Math.max(0,Math.ceil((p-x)/i)),_=Math.min(a.outHeight,(a.inHeight+p-x)/i),S=0;S<c;++S)for(var C=Math.max(0,Math.ceil((d-S)/o)),R=Math.min(a.outWidth,(a.inWidth+d-S)/o),T=0;T<a.outChannels;++T){for(var O=Math.trunc(T/v),D=T%v,N=0,k=0;k<a.batchSize;++k)for(var I=w;I<_;++I)for(var B=x+I*i-p,U=C;U<R;++U){var ee=S+U*o-d;N+=g.get(k,B,ee,O)*y.get(k,I,U,T)}f.set(N,x,S,O,D)}return f.toTensor()},e.prototype.tile=function(t,r){return ve(t,"tile"),dA(this.bufferSync(t),r)},e.prototype.pad=function(t,r,a){ve(t,"pad");var i=r.map(function(v,g){return v[0]+t.shape[g]+v[1]}),o=r.map(function(v){return v[0]}),u=this.bufferSync(t),c=Je(i,t.dtype);a!==0&&c.values.fill(a);for(var f=0;f<t.size;f++){var d=u.indexToLoc(f),p=d.map(function(v,g){return v+o[g]});c.set.apply(c,[u.get.apply(u,d)].concat(p))}return c.toTensor()},e.prototype.transpose=function(t,r){ve(t,"transpose");for(var a=new Array(t.rank),i=0;i<a.length;i++)a[i]=t.shape[r[i]];var o=this.readSync(t.dataId),u=Je(a,t.dtype),c=this.bufferSync(t);for(i=0;i<t.size;++i){for(var f=c.indexToLoc(i),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[r[p]];var v=u.locToIndex(d);u.values[v]=o[i]}return u.toTensor()},e.prototype.gather=function(t,r,a){ve([t,r],"gather");var i=t.shape.slice(),o=this.readSync(r.dataId);i[a]=o.length;for(var u=Je(i,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var d=u.indexToLoc(f),p=d.slice();p[a]=o[d[a]];var v=c.locToIndex(p);u.values[f]=c.values[v]}return u.toTensor()},e.prototype.batchToSpaceND=function(t,r,a){ve([t],"batchToSpaceND");var i=r.reduce(function(p,v){return p*v}),o=dv(t.shape,r,i),u=pv(o.length,r.length),c=vv(t.shape,r,i),f=eA(a,r.length),d=tA(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,d)},e.prototype.spaceToBatchND=function(t,r,a){ve([t],"spaceToBatchND");var i=r.reduce(function(v,g){return v*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=dv(c.shape,r,i,!1),d=pv(f.length,r.length,!1),p=vv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},e.prototype.pool=function(t,r,a){ve(t,"pool");for(var i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(t.dataId),x=Je(r.outShape,t.dtype),w=x.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3],S=r.outShape[2]*r.outShape[3],C=r.outShape[3],R=0;R<r.batchSize;++R)for(var T=R*_,O=R*t.strides[0],D=0;D<r.inChannels;++D)for(var N=0;N<r.outHeight;++N)for(var k=N*i-p,I=Math.max(0,k),B=Math.min(r.inHeight,f+k),U=T+N*S,ee=0;ee<r.outWidth;++ee){for(var te=ee*o-v,re=Math.max(0,te),q=Math.min(r.inWidth,d+te),Z=g,G=0,Y=0,F=I;F<B;F+=u){for(var K=O+F*t.strides[1],se=re;se<q;se+=c){var fe=y[K+se*t.strides[2]+D];a==="max"&&fe>Z?Z=fe:a==="avg"&&(G+=fe,Y++)}if(isNaN(Z))break}w[U+ee*C+D]=a==="avg"?G/Y:Z}return x.toTensor()},e.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},e.prototype.maxPoolPositions=function(t,r){for(var a=Je(r.outShape,"int32"),i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=this.bufferSync(t),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var w=0;w<r.outHeight;++w){for(var _=w*i-p,S=_;S<0;)S+=u;for(var C=Math.min(r.inHeight,f+_),R=0;R<r.outWidth;++R){for(var T=R*o-v,O=T;O<0;)O+=c;for(var D=Math.min(r.inWidth,d+T),N=Number.NEGATIVE_INFINITY,k=-1,I=S;I<C;I+=u)for(var B=I-_,U=O;U<D;U+=c){var ee=U-T,te=g.get(y,I,U,x);te>N&&(N=te,k=B*d+ee)}a.set(k,y,w,R,x)}}return a.toTensor()},e.prototype.maxPoolBackprop=function(t,r,a,i){ve([r,a],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,i),u=i.strideHeight,c=i.strideWidth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,g=v-1-i.padInfo.left,y=p-1-i.padInfo.top,x=Je(r.shape,"float32"),w=this.bufferSync(o),_=this.bufferSync(t),S=0;S<i.batchSize;++S)for(var C=0;C<i.inChannels;++C)for(var R=0;R<i.inHeight;++R)for(var T=0;T<i.inWidth;++T){for(var O=R-y,D=T-g,N=0,k=0;k<p;k+=f){var I=(O+k)/u;if(!(I<0||I>=i.outHeight||Math.floor(I)!==I))for(var B=0;B<v;B+=d){var U=(D+B)/c;if(!(U<0||U>=i.outWidth||Math.floor(U)!==U)){var ee=p*v-1-w.get(S,I,U,C)===k*v+B?1:0;ee!==0&&(N+=_.get(S,I,U,C)*ee)}}}x.set(N,S,R,T,C)}return x.toTensor()},e.prototype.avgPoolBackprop=function(t,r,a){ve([t,r],"avgPoolBackprop");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterHeight,v=a.effectiveFilterWidth,g=v-1-a.padInfo.left,y=p-1-a.padInfo.top,x=Je(r.shape,"float32"),w=1/(u*c),_=this.bufferSync(t),S=0;S<a.batchSize;++S)for(var C=0;C<a.inChannels;++C)for(var R=0;R<a.inHeight;++R)for(var T=0;T<a.inWidth;++T){for(var O=R-y,D=T-g,N=0,k=0;k<p;k+=f){var I=(O+k)/i;if(!(I<0||I>=a.outHeight||Math.floor(I)!==I))for(var B=0;B<v;B+=d){var U=(D+B)/o;U<0||U>=a.outWidth||Math.floor(U)!==U||(N+=_.get(S,I,U,C))}}x.set(N*w,S,R,T,C)}return x.toTensor()},e.prototype.pool3d=function(t,r,a){ve(t,"pool3d");for(var i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(t.dataId),C=Je(r.outShape,t.dtype),R=C.values,T=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],O=r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[3]*r.outShape[4],N=r.outShape[4],k=0;k<r.batchSize;++k)for(var I=k*T,B=k*t.strides[0],U=0;U<r.inChannels;++U)for(var ee=0;ee<r.outDepth;++ee){for(var te=ee*i-y,re=te;re<0;)re+=c;for(var q=Math.min(r.inDepth,p+te),Z=I+ee*O,G=0;G<r.outHeight;++G){for(var Y=G*o-x,F=Y;F<0;)F+=f;for(var K=Math.min(r.inHeight,v+Y),se=Z+G*D,fe=0;fe<r.outWidth;++fe){for(var he=fe*u-w,be=he;be<0;)be+=d;for(var ye=Math.min(r.inWidth,g+he),Be=se+fe*N,xe=_,Oe=0,je=0,Ve=re;Ve<q;Ve+=c){for(var $e=B+Ve*t.strides[1],Ye=F;Ye<K;Ye+=f){for(var bt=$e+Ye*t.strides[2],St=be;St<ye;St+=d){var yt=S[bt+St*t.strides[3]+U];if(a==="max"&&yt>xe?xe=yt:a==="avg"&&(Oe+=yt,je++),isNaN(xe))break}if(isNaN(xe))break}if(isNaN(xe))break}R[Be+U]=a==="avg"?Oe/je:xe}}}return C.toTensor()},e.prototype.avgPool3d=function(t,r){return ve(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,r,a){ve([t,r],"avgPool3dBackprop");for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=a.dilationDepth,v=a.dilationHeight,g=a.dilationWidth,y=a.effectiveFilterDepth,x=a.effectiveFilterHeight,w=a.effectiveFilterWidth,_=y-1-a.padInfo.front,S=w-1-a.padInfo.left,C=x-1-a.padInfo.top,R=Je(r.shape,"float32"),T=1/(c*f*d),O=this.bufferSync(t),D=0;D<a.batchSize;++D)for(var N=0;N<a.inChannels;++N)for(var k=0;k<a.inDepth;++k)for(var I=0;I<a.inHeight;++I)for(var B=0;B<a.inWidth;++B){for(var U=k-_,ee=I-C,te=B-S,re=0,q=0;q<y;q+=p){var Z=(U+q)/i;if(!(Z<0||Z>=a.outDepth||Math.floor(Z)!==Z))for(var G=0;G<x;G+=v){var Y=(ee+G)/o;if(!(Y<0||Y>=a.outHeight||Math.floor(Y)!==Y))for(var F=0;F<w;F+=g){var K=(te+F)/u;K<0||K>=a.outWidth||Math.floor(K)!==K||(re+=O.get(D,Z,Y,K,N))}}}R.set(re*T,D,k,I,B,N)}return R.toTensor()},e.prototype.maxPool3d=function(t,r){return ve(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,r){for(var a=Je(r.outShape,"int32"),i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=this.bufferSync(t),S=0;S<r.batchSize;++S)for(var C=0;C<r.inChannels;++C)for(var R=0;R<r.outDepth;++R){for(var T=R*i-y,O=T;O<0;)O+=c;for(var D=Math.min(r.inDepth,p+T),N=0;N<r.outHeight;++N){for(var k=N*o-x,I=k;I<0;)I+=f;for(var B=Math.min(r.inHeight,v+k),U=0;U<r.outWidth;++U){for(var ee=U*u-w,te=ee;te<0;)te+=d;for(var re=Math.min(r.inWidth,g+ee),q=Number.NEGATIVE_INFINITY,Z=-1,G=O;G<D;G+=c)for(var Y=G-T,F=I;F<B;F+=f)for(var K=F-k,se=te;se<re;se+=d){var fe=se-ee,he=_.get(S,G,F,se,C);he>=q&&(q=he,Z=Y*v*g+K*v+fe)}a.set(Z,S,R,N,U,C)}}}return a.toTensor()},e.prototype.maxPool3dBackprop=function(t,r,a,i){ve([r,a],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,i),u=i.strideDepth,c=i.strideHeight,f=i.strideWidth,d=i.dilationDepth,p=i.dilationHeight,v=i.dilationWidth,g=i.effectiveFilterDepth,y=i.effectiveFilterHeight,x=i.effectiveFilterWidth,w=g-1-i.padInfo.front,_=x-1-i.padInfo.left,S=y-1-i.padInfo.top,C=Je(r.shape,"float32"),R=this.bufferSync(o),T=this.bufferSync(t),O=0;O<i.batchSize;++O)for(var D=0;D<i.inChannels;++D)for(var N=0;N<i.inDepth;++N)for(var k=0;k<i.inHeight;++k)for(var I=0;I<i.inWidth;++I){for(var B=N-w,U=k-S,ee=I-_,te=0,re=0;re<g;re+=d){var q=(B+re)/u;if(!(q<0||q>=i.outDepth||Math.floor(q)!==q))for(var Z=0;Z<y;Z+=p){var G=(U+Z)/c;if(!(G<0||G>=i.outHeight||Math.floor(G)!==G))for(var Y=0;Y<x;Y+=v){var F=(ee+Y)/f;if(!(F<0||F>=i.outWidth||Math.floor(F)!==F)){var K=g*y*x-1-R.get(O,q,G,F,D)===re*y*x+Z*x+Y?1:0;K!==0&&(te+=T.get(O,q,G,F,D)*K)}}}}C.set(te,O,N,k,I,D)}return C.toTensor()},e.prototype.cast=function(t,r){return lA(t,r,this)},e.prototype.reshape=function(t,r){return Cb(t,r)},e.prototype.avgPool=function(t,r){return ve(t,"avgPool"),this.pool(t,r,"avg").toFloat()},e.prototype.resizeBilinear=function(t,r,a,i){ve(t,"resizeBilinear");for(var o=t.shape,u=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(t.dataId),v=new Float32Array(Ie([u,r,a,d])),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],x=0,w=g[0]/y[0],_=g[1]/y[1],S=0;S<u;S++)for(var C=0;C<r;C++)for(var R=w*C,T=Math.floor(R),O=R-T,D=Math.min(c-1,Math.ceil(R)),N=S*t.strides[0]+T*t.strides[1],k=S*t.strides[0]+D*t.strides[1],I=0;I<a;I++)for(var B=_*I,U=Math.floor(B),ee=B-U,te=Math.min(f-1,Math.ceil(B)),re=N+U*t.strides[2],q=k+U*t.strides[2],Z=N+te*t.strides[2],G=k+te*t.strides[2],Y=0;Y<d;Y++){var F=p[re+Y],K=p[q+Y],se=F+(p[Z+Y]-F)*ee,fe=se+(K+(p[G+Y]-K)*ee-se)*O;v[x++]=fe}return zn(v,[u,r,a,d])},e.prototype.resizeBilinearBackprop=function(t,r,a){ve([t,r],"resizeBilinearBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],d=t.shape,p=d[1],v=d[2],g=new Float32Array(o*u*c*f),y=[a&&p>1?u-1:u,a&&v>1?c-1:c],x=[a&&p>1?p-1:p,a&&v>1?v-1:v],w=y[0]/x[0],_=y[1]/x[1],S=this.readSync(t.dataId),C=0,R=0;R<o;R++)for(var T=R*r.strides[0],O=0;O<p;O++)for(var D=O*w,N=Math.floor(D),k=Math.min(Math.ceil(D),u-1),I=T+N*r.strides[1],B=T+k*r.strides[1],U=D-N,ee=1-U,te=0;te<v;te++)for(var re=te*_,q=Math.floor(re),Z=Math.min(Math.ceil(re),c-1),G=re-q,Y=1-G,F=I+q*r.strides[2],K=I+Z*r.strides[2],se=B+q*r.strides[2],fe=B+Z*r.strides[2],he=ee*Y,be=ee*G,ye=U*Y,Be=U*G,xe=0;xe<f;xe++){var Oe=S[C++];g[F+xe]+=Oe*he,g[K+xe]+=Oe*be,g[se+xe]+=Oe*ye,g[fe+xe]+=Oe*Be}return hr(g,[o,c,u,f],r.dtype)},e.prototype.resizeNearestNeighbor=function(t,r,a,i){ve(t,"resizeNearestNeighbor");for(var o=t.shape,u=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(t.dataId),v=new Float32Array(u*r*a*d),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],x=g[0]/y[0],w=g[1]/y[1],_=0,S=0;S<u;S++)for(var C=S*t.strides[0],R=0;R<r;R++)for(var T=x*R,O=C+Math.min(c-1,i?Math.round(T):Math.floor(T))*t.strides[1],D=0;D<a;D++)for(var N=w*D,k=O+Math.min(f-1,i?Math.round(N):Math.floor(N))*t.strides[2],I=0;I<d;I++){var B=p[k+I];v[_++]=B}return zn(v,[u,r,a,d],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){ve([t,r],"resizeNearestNeighborBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],d=t.shape,p=d[1],v=d[2],g=new Float32Array(o*u*c*f),y=this.readSync(t.dataId),x=[a&&p>1?u-1:u,a&&v>1?c-1:c],w=[a&&p>1?p-1:p,a&&v>1?v-1:v],_=x[0]/w[0],S=x[1]/w[1],C=1/_,R=1/S,T=2*Math.ceil(C)+2,O=2*Math.ceil(R)+2,D=0;D<o;D++)for(var N=D*r.strides[0],k=0;k<u;k++)for(var I=N+k*r.strides[1],B=Math.floor(k*C),U=Math.floor(B-T/2),ee=0;ee<c;ee++)for(var te=I+ee*r.strides[2],re=Math.floor(ee*R),q=Math.floor(re-O/2),Z=0;Z<f;Z++){for(var G=0,Y=0;Y<T;Y++){var F=Y+U;if(!(F<0||F>=p)){var K=N+F*t.strides[1],se=F*_;if(k===Math.min(u-1,a?Math.round(se):Math.floor(se)))for(var fe=0;fe<O;fe++){var he=fe+q;if(!(he<0||he>=v)){var be=K+he*t.strides[2],ye=he*S;ee===Math.min(c-1,a?Math.round(ye):Math.floor(ye))&&(G+=y[be+Z])}}}}g[te+Z]=G}return hr(g,r.shape,r.dtype)},e.prototype.batchNormalization=function(t,r,a,i,o,u){ve([t,r,a,o,u],"batchNorm");for(var c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=this.readSync(a.dataId),p=o?this.readSync(o.dataId):new Float32Array([1]),v=u?this.readSync(u.dataId):new Float32Array([0]),g=new Float32Array(c.length),y=v.length,x=p.length,w=d.length,_=f.length,S=0,C=0,R=0,T=0,O=0;O<c.length;++O)g[O]=v[S++]+(c[O]-f[C++])*p[R++]/Math.sqrt(d[T++]+i),S>=y&&(S=0),C>=_&&(C=0),R>=x&&(R=0),T>=w&&(T=0);return hr(g,t.shape)},e.prototype.localResponseNormalization4D=function(t,r,a,i,o){ve(t,"localResponseNormalization4D");var u=t.shape[3],c=u-1,f=this.readSync(t.dataId),d=t.size,p=new Float32Array(d);function v(w){for(var _=w%u,S=w-_+Math.max(0,_-r),C=w-_+Math.min(_+r,c),R=0;S<=C;S++){var T=f[S];R+=T*T}return R}for(var g=0;g<d;g++){var y=v(g),x=f[g]*Math.pow(a+i*y,-o);p[g]=x}return hr(p,t.shape)},e.prototype.LRNGrad=function(t,r,a,i,o,u,c){ve(t,"LRNGrad");for(var f=t.shape[3],d=this.readSync(t.dataId),p=this.readSync(r.dataId),v=this.readSync(a.dataId),g=new Float32Array(t.size),y=t.size,x=0;x<y;x++){for(var w=x%f,_=x-w+Math.max(0,w-i),S=x-w+Math.min(f,w+i+1),C=0,R=_;R<S;R++)C+=Math.pow(p[R],2);for(C=u*C+o,R=_;R<S;R++){var T=-2*u*c*p[R]*v[x]/C;x===R&&(T+=Math.pow(C,-c)),T*=d[x],g[R]+=T}}return hr(g,t.shape)},e.prototype.multinomial=function(t,r,a,i){ve(t,"multinomial");for(var o=r?t:Ui(t),u=o.shape[0],c=o.shape[1],f=Bt([u,a],"int32"),d=this.readSync(f.dataId),p=this.readSync(o.dataId),v=0;v<u;++v){var g=v*c,y=new Float32Array(c-1);y[0]=p[g];for(var x=1;x<y.length;++x)y[x]=y[x-1]+p[g+x];for(var w=Wv(i.toString()),_=v*a,S=0;S<a;++S){var C=w();d[_+S]=y.length;for(var R=0;R<y.length;R++)if(C<y[R]){d[_+S]=R;break}}}return f},e.prototype.oneHot=function(t,r,a,i){ve(t,"oneHot");var o=new Float32Array(t.size*r);o.fill(i);for(var u=this.readSync(t.dataId),c=0;c<t.size;++c)u[c]>=0&&u[c]<r&&(o[c*r+u[c]]=a);return Lo(o,[t.size,r],"int32")},e.prototype.nonMaxSuppression=function(t,r,a,i,o){return ve(t,"nonMaxSuppression"),Ix(this.readSync(t.dataId),this.readSync(r.dataId),a,i,o)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,r){for(var a=t.shape[0],i=t.shape[1],o=Je(t.shape,"float32"),u=Je(t.shape,"float32"),c=$r(t).as2D(a,i),f=Va(t).as2D(a,i),d=0;d<a;d++)for(var p=c.slice([d,0],[1,i]),v=f.slice([d,0],[1,i]),g=Ln(p,v),y=this.readSync(this.fftImpl(g,r).dataId),x=0;x<i;x++){var w=aC(y,x);o.values[d*i+x]=w.real,u.values[d*i+x]=w.imag}return Ln(o.toTensor(),u.toTensor()).as2D(a,i)},e.prototype.fftImpl=function(t,r){var a=t.as1D(),i=a.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(a,i,r).as2D(t.shape[0],t.shape[1]);return r&&(o=Ln($r(o).div(we(i)),Va(o).div(we(i)))),o}var u=this.readSync(t.dataId),c=function(f){for(var d=new Float32Array(f.length/2),p=new Float32Array(f.length/2),v=0;v<f.length;v+=2)d[v/2]=f[v],p[v/2]=f[v+1];return{real:d,imag:p}}(this.fourierTransformByMatmul(u,i,r));return Ln(c.real,c.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,r,a){if(r===1)return t;var i=this.readSync(t.dataId),o=r/2,u=function(_){for(var S=Math.ceil(_.length/4),C=new Float32Array(S),R=new Float32Array(S),T=0;T<_.length;T+=4)C[Math.floor(T/4)]=_[T],R[Math.floor(T/4)]=_[T+1];return{real:C,imag:R}}(i),c=Ln(u.real,u.imag).as1D(),f=function(_){for(var S=Math.floor(_.length/4),C=new Float32Array(S),R=new Float32Array(S),T=2;T<_.length;T+=4)C[Math.floor(T/4)]=_[T],R[Math.floor(T/4)]=_[T+1];return{real:C,imag:R}}(i),d=Ln(f.real,f.imag).as1D();c=this.fftRadix2(c,o,a),d=this.fftRadix2(d,o,a);var p=function(_,S){for(var C=new Float32Array(_/2),R=new Float32Array(_/2),T=0;T<Math.ceil(_/2);T++){var O=(S?2:-2)*Math.PI*(T/_);C[T]=Math.cos(O),R[T]=Math.sin(O)}return{real:C,imag:R}}(r,a),v=Ln(p.real,p.imag).mul(d),g=c.add(v),y=c.sub(v),x=$r(g).concat($r(y)),w=Va(g).concat(Va(y));return Ln(x,w).as1D()},e.prototype.fourierTransformByMatmul=function(t,r,a){for(var i=new Float32Array(2*r),o=0;o<r;o++){for(var u=0,c=0,f=0;f<r;f++){var d=Lz(o*f,r,a),p=aC(t,f);u+=p.real*d.real-p.imag*d.imag,c+=p.real*d.imag+p.imag*d.real}a&&(u/=r,c/=r),Pz(i,u,c,o)}return i},e.prototype.depthToSpace=function(t,r,a){L(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),L(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=t.shape[0],o=t.shape[1],u=t.shape[2],c=t.shape[3],f=o*r,d=u*r,p=c/(r*r),v=this.readSync(t.dataId),g=new Float32Array(i*f*d*p),y=0,x=0;x<i;++x)for(var w=0;w<f;++w)for(var _=Math.floor(w/r),S=w%r,C=0;C<d;++C)for(var R=Math.floor(C/r),T=(S*r+C%r)*p,O=0;O<p;++O){var D=O+T+c*(R+u*(_+o*x));g[y++]=v[D]}return hr(g,[i,f,d,p])},e.prototype.broadcastedBinaryOp=function(t,r,a,i){var o=ct(t.shape,r.shape),u=Je(o,a),c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=Mo(t.shape,o),p=Mo(r.shape,o),v=u.values;if(d.length+p.length===0)for(var g=0;g<v.length;++g)v[g]=i(c[g%c.length],f[g%f.length]);else{var y=this.bufferSync(t),x=this.bufferSync(r),w=function(_){var S=u.indexToLoc(_),C=S.slice(-t.rank);d.forEach(function(D){return C[D]=0});var R=y.locToIndex(C),T=S.slice(-r.rank);p.forEach(function(D){return T[D]=0});var O=x.locToIndex(T);v[_]=i(c[R],f[O])};for(g=0;g<v.length;++g)w(g)}return u.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,r,a){var i=ct(t.shape,r.shape),o=Je(i,"float32"),u=Je(i,"float32"),c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=Mo(t.shape,i),p=Mo(r.shape,i),v=o.values,g=u.values;if(d.length+p.length===0)for(var y=0;y<v.length;y++){var x=y%c.length,w=y%f.length,_=a(c[2*x],c[2*x+1],f[2*w],f[2*w+1]);v[y]=_.real,g[y]=_.imag}else{var S=this.bufferSync(this.data.get(t.dataId).complexTensors.real),C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),R=function(T){var O=o.indexToLoc(T),D=O.slice(-t.rank);d.forEach(function(U){return D[U]=0});var N=S.locToIndex(D),k=O.slice(-r.rank);p.forEach(function(U){return k[U]=0});var I=C.locToIndex(k),B=a(c[2*N],c[2*N+1],f[2*I],f[2*I+1]);v[T]=B.real,g[T]=B.imag};for(y=0;y<v.length;y++)R(y)}return this.complex(o.toTensor(),u.toTensor())},e.prototype.split=function(t,r,a){return hA(t,r,a)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,r,a,i,o,u){for(var c=t.shape,f=c[0],d=c[1],p=c[2],v=c[3],g=r.shape[0],y=i[0],x=i[1],w=Je([g,y,x,v],"float32"),_=this.readSync(r.dataId),S=this.readSync(a.dataId),C=this.readSync(t.dataId),R=t.strides,T=w.strides,O=0;O<g;O++){var D=4*O,N=_[D],k=_[D+1],I=_[D+2],B=_[D+3],U=S[O];if(!(U>=f))for(var ee=y>1?(I-N)*(d-1)/(y-1):0,te=x>1?(B-k)*(p-1)/(x-1):0,re=0;re<y;re++){var q=y>1?N*(d-1)+re*ee:.5*(N+I)*(d-1);if(q<0||q>d-1)for(var Z=0;Z<x;Z++)for(var G=0;G<v;G++){var Y=G+Z*T[2]+re*T[1]+O*T[0];w.values[Y]=u}else if(o==="bilinear"){var F=Math.floor(q),K=Math.ceil(q),se=q-F;for(Z=0;Z<x;Z++)if((Ve=x>1?k*(p-1)+Z*te:.5*(k+B)*(p-1))<0||Ve>p-1)for(G=0;G<v;G++)Y=G+Z*T[2]+re*T[1]+O*T[0],w.values[Y]=u;else{var fe=Math.floor(Ve),he=Math.ceil(Ve),be=Ve-fe;for(G=0;G<v;G++){var ye=C[Y=G+fe*R[2]+F*R[1]+U*R[0]],Be=C[Y=G+he*R[2]+F*R[1]+U*R[0]],xe=C[Y=G+fe*R[2]+K*R[1]+U*R[0]],Oe=ye+(Be-ye)*be,je=xe+(C[Y=G+he*R[2]+K*R[1]+U*R[0]]-xe)*be;Y=G+Z*T[2]+re*T[1]+O*T[0],w.values[Y]=Oe+(je-Oe)*se}}}else for(Z=0;Z<x;++Z){var Ve;if((Ve=x>1?k*(p-1)+Z*te:.5*(k+B)*(p-1))<0||Ve>p-1)for(G=0;G<v;G++)Y=G+Z*T[2]+re*T[1]+O*T[0],w.values[Y]=u;else{var $e=Math.round(Ve),Ye=Math.round(q);for(G=0;G<v;G++){var bt=G+$e*R[2]+Ye*R[1]+U*R[0],St=G+Z*T[2]+re*T[1]+O*T[0];w.values[St]=C[bt]}}}}}return w.toTensor()},e.prototype.sparseToDense=function(t,r,a,i){var o=mv(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.sliceSize,d=o.strides,p=o.outputSize;return this.scatter(t,r,a,p,f,c,u,d,i,!1)},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=nA(t,r),u=o[0],c=o[1],f=o[2],d=o[3];if(c===0)return zn([],u,t.dtype);for(var p=new oh([c,f],t.dtype),v=this.readSync(r.dataId),g=this.readSync(t.dataId),y=0;y<c;y++){for(var x=[],w=0,_=0;_<i;_++){var S=v[y*i+_];w+=S*d[_],x.push(S)}if(w<0||w>=t.size/f)throw new Error("Invalid indices: "+x+" does not index into "+t.shape);for(var C=0;C<f;C++)p.values[y*f+C]=g[w*f+C]}return p.toTensor().reshape(u)},e.prototype.scatterND=function(t,r,a){var i=mv(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=we(0);return this.scatter(t,r,a,d,c,u,o,f,p,!0)},e.prototype.fill=function(t,r,a){var i=ov(a=a||Rh(r),Ie(t));return i.fill(r),W.makeTensor(i,t,a,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var r=ov(t.dtype,Ie(t.shape));return this.makeOutput(r,t.shape,t.dtype)},e.prototype.linspace=function(t,r,a){return cA(t,r,a)},e.prototype.scatter=function(t,r,a,i,o,u,c,f,d,p){var v=[i/o,o],g=this.readSync(t.dataId),y=this.readSync(r.dataId);if(i===0)return zn([],a,r.dtype);var x=new oh(v,r.dtype);x.values.fill(this.readSync(d.dataId)[0]);for(var w=0;w<u;w++){for(var _=[],S=0,C=0;C<c;C++){var R=g[w*c+C];_.push(R),S+=R*f[C]}if(S<0||S>=i/o)throw new Error("Invalid indices: "+_+" does not index into "+a);for(var T=0;T<o;T++)p?x.values[S*o+T]+=y[w*o+T]:x.values[S*o+T]=r.rank===0?y[0]:y[w*o+T]}return x.toTensor().reshape(a)},e}(sA);W.registerBackend("cpu",function(){return new r6},1);for(var o0=0,RC=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p=u.softNmsSigma,v=t;ve(i,"NonMaxSuppressionWithScore");var g=Mx(v.data.get(i.dataId).values,v.data.get(o.dataId).values,c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t;ve(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),u=0;u<i.length;++u){var c=i[u];o[u]=c*c}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:lh,backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,o=t;ve([a,i],lh);var u=o.data.get(a.dataId).values,c=o.data.get(i.dataId).values,f=function(v,g,y,x,w,_){var S=ct(v,g),C=S.length,R=Ga(S),T=ih(w,Ie(S)),O=v.length,D=g.length,N=Ga(v),k=Ga(g),I=Mo(v,S),B=Mo(g,S);if(I.length+B.length===0)for(var U=0;U<T.length;++U)T[U]=_(y[U%y.length],x[U%x.length]);else{var ee=function(te){var re=dB(te,C,R),q=re.slice(-O);I.forEach(function(F){return q[F]=0});var Z=K2(q,O,N),G=re.slice(-D);B.forEach(function(F){return G[F]=0});var Y=K2(G,D,k);T[te]=_(y[Z],x[Y])};for(U=0;U<T.length;++U)ee(U)}return[T,S]}(a.shape,i.shape,u,c,a.dtype,function(v,g){var y=v-g;return y*y}),d=f[0],p=f[1];return{dataId:o.write(d,p,a.dtype),shape:p,dtype:a.dtype}}}];o0<RC.length;o0++)FO(RC[o0]);var Xu,a6=function(n){this.variableNames=["A"];var e=Gn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},i6=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Gn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var s0=0,TC=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=c[0],d=c[1],p=[d,f],v=[d,f,i];(u||o)&&(Xu==null&&(Xu=document.createElement("canvas").getContext("2d")),Xu.canvas.width=f,Xu.canvas.height=d,Xu.drawImage(a,0,0,f,d),a=Xu.canvas);var g=t.makeTensorInfo(p,"int32");t.texData.get(g.dataId).usage=Or.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(g.dataId),a);var y=ue().getBool("WEBGL_PACK")?new i6(v):new a6(v),x=t.runWebGLProgram(y,[g],"int32");return t.disposeData(g.dataId),x}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs;cv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=e,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p=u.softNmsSigma,v=t,g=Mx(v.readSync(i.dataId),v.readSync(o.dataId),c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t,i=new nt(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:lh,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,o=t,u=ue().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("return (a - b) * (a - b);",a.shape,i.shape):new Kt("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(u,[a,i])}}];s0<TC.length;s0++)FO(TC[s0]);for(var u0=0,OC=[{kernelName:"Square",gradFunc:function(n,e){var t=e[0];return{x:function(){return n.mul(t.toFloat().mul(2))}}}},{kernelName:lh,gradFunc:function(n,e){var t=e[0],r=e[1],a=we(2);return{a:function(){return $n(n,$n(a,gn(t,r)))},b:function(){return $n(n,$n(a,gn(r,t)))}}}}];u0<OC.length;u0++)nB(OC[u0]);var o6=function(){function n(){}return n.prototype.fetch=function(e,t){return fetch(e,t)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},n}();ue().get("IS_BROWSER")&&ue().setPlatform("browser",new o6);var l0,s6=function(){return require("node-fetch")},u6=function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(e,t){return ue().global.fetch!=null?ue().global.fetch(e,t):(l0==null&&(l0=s6()),l0(e,t))},n.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},n}();ue().get("IS_NODE")&&ue().setPlatform("node",new u6);var Ob={float32:4,int32:4,uint16:2,uint8:1,bool:1},Ev=4;function ak(n,e){for(var t={},r=0,a=function(u){var c=u.name,f=u.dtype,d=u.shape,p=Ie(d),v=void 0;if("quantization"in u){var g=u.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+u.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=Ob[g.dtype],x=n.slice(r,r+p*y),w=g.dtype==="uint8"?new Uint8Array(x):new Uint16Array(x);if(f==="float32")v=Float32Array.from(w,function(O){return O*g.scale+g.min});else{if(f!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=Int32Array.from(w,function(O){return Math.round(O*g.scale+g.min)})}r+=p*y}else if(f==="string"){var _=Ie(u.shape);v=[];for(var S=0;S<_;S++){var C=new Uint32Array(n.slice(r,r+Ev))[0];r+=Ev;var R=new Uint8Array(n.slice(r,r+C));v.push(R),r+=C}}else{var T=Ob[f];if(x=n.slice(r,r+p*T),f==="float32")v=new Float32Array(x);else if(f==="int32")v=new Int32Array(x);else{if(f!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=new Uint8Array(x)}r+=p*T}t[c]=zn(v,d,f)},i=0,o=e;i<o.length;i++)a(o[i]);return t}function l6(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var e=0,t=[];n.forEach(function(i){if(e+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(e),a=0;return t.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var Ab=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function AC(n){return Ab?Buffer.byteLength(n):new Blob([n]).size}function Jx(n){var e=0;n.forEach(function(a){e+=a.byteLength});var t=new Uint8Array(e),r=0;return n.forEach(function(a){t.set(new Uint8Array(a),r),r+=a.byteLength}),t.buffer}function kC(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var e=n.split("/");return e[e.length-1]}function Ih(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:AC(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:AC(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var Ar=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(e){n.getInstance().saveRouters.push(e)},n.registerLoadRouter=function(e){n.getInstance().loadRouters.push(e)},n.getSaveHandlers=function(e){return n.getHandlers(e,"save")},n.getLoadHandlers=function(e,t){return n.getHandlers(e,"load",t)},n.getHandlers=function(e,t,r){var a=[];return(t==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(i){var o=i(e,r);o!==null&&a.push(o)}),a},n}(),yl="://",Bo=function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(e,t){L(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(yl)&&(e=e.slice(0,e.indexOf(yl))),L(e.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();L(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=t},n.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function kp(n){if(n.indexOf(yl)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Bo.getSchemes().join(","));return{scheme:n.split(yl)[0],path:n.split(yl)[1]}}function DC(n,e,t){return t===void 0&&(t=!1),ke(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p;return De(this,function(v){switch(v.label){case 0:return L(n!==e,function(){return"Old path and new path are the same: '"+n+"'"}),L((r=Ar.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),L(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),a=r[0],L((i=Ar.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),L(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=i[0],u=kp(n).scheme,c=kp(n).path,f=u===kp(n).scheme,[4,a.load()];case 1:return d=v.sent(),t&&f?[4,Bo.getManager(u).removeModel(c)]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,o.save(d)];case 4:return p=v.sent(),!t||f?[3,6]:[4,Bo.getManager(u).removeModel(c)];case 5:v.sent(),v.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var Ns="models_store",Fo="model_info_store";function ik(){if(!ue().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function kb(n){var e=n.result;e.createObjectStore(Ns,{keyPath:"modelPath"}),e.createObjectStore(Fo,{keyPath:"modelPath"})}var bl=function(){function n(e){if(this.indexedDB=ik(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){return De(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},n.prototype.load=function(){return ke(this,void 0,void 0,function(){return De(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(e,t){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return kb(o)},o.onsuccess=function(){var u=o.result;if(t==null){var c=u.transaction(Ns,"readonly"),f=c.objectStore(Ns).get(r.modelPath);f.onsuccess=function(){if(f.result==null)return u.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(f.result.modelArtifacts)},f.onerror=function(x){return u.close(),i(f.error)},c.oncomplete=function(){return u.close()}}else{var d,p=Ih(t),v=u.transaction(Fo,"readwrite"),g=v.objectStore(Fo),y=g.put({modelPath:r.modelPath,modelArtifactsInfo:p});y.onsuccess=function(){var x=(d=u.transaction(Ns,"readwrite")).objectStore(Ns).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:p});x.onsuccess=function(){return a({modelArtifactsInfo:p})},x.onerror=function(w){var _=(g=v.objectStore(Fo)).delete(r.modelPath);_.onsuccess=function(){return u.close(),i(x.error)},_.onerror=function(S){return u.close(),i(x.error)}}},y.onerror=function(x){return u.close(),i(y.error)},v.oncomplete=function(){d==null?u.close():d.oncomplete=function(){return u.close()}}}},o.onerror=function(u){return i(o.error)}})},n.URL_SCHEME="indexeddb://",n}(),NC=function(n){return ue().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(bl.URL_SCHEME)?(e=n.slice(bl.URL_SCHEME.length),new bl(e)):null;var e};Ar.registerSaveRouter(NC),Ar.registerLoadRouter(NC);var c6=function(){function n(){this.indexedDB=ik()}return n.prototype.listModels=function(){return ke(this,void 0,void 0,function(){var e=this;return De(this,function(t){return[2,new Promise(function(r,a){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return kb(i)},i.onsuccess=function(){var o=i.result,u=o.transaction(Fo,"readonly"),c=u.objectStore(Fo).getAll();c.onsuccess=function(){for(var f={},d=0,p=c.result;d<p.length;d++){var v=p[d];f[v.modelPath]=v.modelArtifactsInfo}r(f)},c.onerror=function(f){return o.close(),a(c.error)},u.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}})]})})},n.prototype.removeModel=function(e){return ke(this,void 0,void 0,function(){var t=this;return De(this,function(r){var a;return e=(a=e).startsWith(bl.URL_SCHEME)?a.slice(bl.URL_SCHEME.length):a,[2,new Promise(function(i,o){var u=t.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return kb(u)},u.onsuccess=function(){var c,f=u.result,d=f.transaction(Fo,"readwrite"),p=d.objectStore(Fo),v=p.get(e);v.onsuccess=function(){if(v.result==null)return f.close(),o(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var g=p.delete(e),y=function(){var x=(c=f.transaction(Ns,"readwrite")).objectStore(Ns).delete(e);x.onsuccess=function(){return i(v.result.modelArtifactsInfo)},x.onerror=function(w){return o(v.error)}};g.onsuccess=y,g.onerror=function(x){return y(),f.close(),o(v.error)}},v.onerror=function(g){return f.close(),o(v.error)},d.oncomplete=function(){c==null?f.close():c.oncomplete=function(){return f.close()}}},u.onerror=function(c){return o(u.error)}})]})})},n}();if(ue().getBool("IS_BROWSER"))try{Bo.registerManager(bl.URL_SCHEME,new c6)}catch{}var Ni="/",al="tensorflowjs_models",ok="info",f6="model_topology",h6="weight_specs",d6="weight_data",p6="model_metadata";function sk(n){return{info:[al,n,ok].join(Ni),topology:[al,n,f6].join(Ni),weightSpecs:[al,n,h6].join(Ni),weightData:[al,n,d6].join(Ni),modelMetadata:[al,n,p6].join(Ni)}}function v6(n){var e=n.split(Ni);if(e.length<3)throw new Error("Invalid key format: "+n);return e.slice(1,e.length-1).join(Ni)}var xl=function(){function n(e){if(!ue().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=sk(this.modelPath)}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){var t,r,a;return De(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Ih(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(Ab)return Buffer.from(o).toString("base64");for(var u=new Uint8Array(o),c="",f=0,d=u.length;f<d;f++)c+=String.fromCharCode(u[f]);return btoa(c)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return ke(this,void 0,void 0,function(){var e,t,r,a,i,o,u;return De(this,function(c){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),(u=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(f){if(Ab){var d=Buffer.from(f,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var p=atob(f),v=new Uint8Array(p.length),g=0;g<p.length;++g)v.set([p.charCodeAt(g)],g);return v.buffer}(u),[2,t]})})},n.URL_SCHEME="localstorage://",n}(),IC=function(n){return ue().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(xl.URL_SCHEME)?(e=n.slice(xl.URL_SCHEME.length),new xl(e)):null;var e};Ar.registerSaveRouter(IC),Ar.registerLoadRouter(IC);var m6=function(){function n(){L(ue().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),L(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return ke(this,void 0,void 0,function(){var e,t,r,a,i,o;return De(this,function(u){for(e={},t=al+Ni,r=Ni+ok,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(t)&&i.endsWith(r)&&(o=v6(i),e[o]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},n.prototype.removeModel=function(e){return ke(this,void 0,void 0,function(){var t,r;return De(this,function(a){var i;if(e=(i=e).startsWith(xl.URL_SCHEME)?i.slice(xl.URL_SCHEME.length):i,t=sk(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},n}();if(ue().getBool("IS_BROWSER"))try{Bo.registerManager(xl.URL_SCHEME,new m6)}catch{}var g6="model",y6=".json",b6=".weights.bin";function MC(n){return new Promise(function(e){return setTimeout(e)}).then(n)}var c0=function(){function n(e){if(!ue().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),e!=null&&e.length!==0||(e=g6),this.modelTopologyFileName=e+y6,this.weightDataFileName=e+b6}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u;return De(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,MC(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),e.weightData==null?[3,4]:((u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,u.href=t,[4,MC(function(){return u.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Ih(e)}]}})})},n.URL_SCHEME="downloads://",n}(),x6=function(){function n(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return n.prototype.load=function(){return ke(this,void 0,void 0,function(){var e,t,r=this;return De(this,function(a){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(i,o){var u=new FileReader;u.onload=function(c){var f=JSON.parse(c.target.result),d=f.modelTopology;if(d!=null){t.length===0&&i({modelTopology:d});var p=f.weightsManifest;if(p!=null){var v;try{v=r.checkManifestAndWeightFiles(p,t)}catch(w){return void o(w)}var g=[],y=[],x=[];p.forEach(function(w){w.paths.forEach(function(_){y.push(_),x.push(null)}),g.push.apply(g,w.weights)}),p.forEach(function(w){w.paths.forEach(function(_){var S=new FileReader;S.onload=function(C){var R=C.target.result,T=y.indexOf(_);x[T]=R,x.indexOf(null)===-1&&i({modelTopology:d,weightSpecs:g,weightData:Jx(x),format:f.format,generatedBy:f.generatedBy,convertedBy:f.convertedBy,userDefinedMetadata:f.userDefinedMetadata})},S.onerror=function(C){return o("Failed to weights data from file of path '"+_+"'.")},S.readAsArrayBuffer(v[_])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},u.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},u.readAsText(e)})]})})},n.prototype.checkManifestAndWeightFiles=function(e,t){for(var r=[],a=t.map(function(c){return kC(c.name)}),i={},o=0,u=e;o<u.length;o++)u[o].paths.forEach(function(c){var f=kC(c);if(r.indexOf(f)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+f+"'");if(r.push(f),a.indexOf(f)===-1)throw new Error("Weight file with basename '"+f+"' is not provided.");i[c]=t[a.indexOf(f)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return i},n}();function FC(n,e,t,r){(function(i){L(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(n),function(i,o){L(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),L(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),L(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(t=t??0,r=r??1);var a=0;return Promise.all(n.map(function(i){return i.then(function(o){var u=t+ ++a/n.length*(r-t);return e(u),o}),i}))}function uk(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d;return De(this,function(p){switch(p.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?ue().platform.fetch:e.fetchFunc,r=n.map(function(v){return t(v,e.requestInit,{isBinary:!0})}),a=0,i=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=p.sent(),[3,4];case 2:return[4,FC(r,e.onProgress,a,i)];case 3:o=p.sent(),p.label=4;case 4:return u=o.map(function(v){return v.arrayBuffer()}),c=.5,f=1,e.onProgress!=null?[3,6]:[4,Promise.all(u)];case 5:return d=p.sent(),[3,8];case 6:return[4,FC(u,e.onProgress,c,f)];case 7:d=p.sent(),p.label=8;case 8:return[2,d]}})})}function PC(n){var e=this;return function(t,r,a){return r===void 0&&(r=""),ke(e,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y;return De(this,function(x){switch(x.label){case 0:if(i=t.map(function(){return!1}),o={},u=a!=null?a.map(function(){return!1}):[],c=[],t.forEach(function(w,_){var S=0;w.weights.forEach(function(C){var R="quantization"in C?C.quantization.dtype:C.dtype,T=Ob[R]*Ie(C.shape),O=function(){i[_]=!0,o[_]==null&&(o[_]=[]),o[_].push({manifestEntry:C,groupOffset:S,sizeBytes:T})};a!=null?a.forEach(function(D,N){D===C.name&&(O(),u[N]=!0)}):O(),c.push(C.name),S+=T})}),!u.every(function(w){return w}))throw f=a.filter(function(w,_){return!u[_]}),new Error("Could not find weights in manifest with names: "+f.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=i.reduce(function(w,_,S){return _&&w.push(S),w},[]),p=[],d.forEach(function(w){t[w].paths.forEach(function(_){var S=r+(r.endsWith("/")?"":"/")+_;p.push(S)})}),[4,n(p)];case 1:return v=x.sent(),g={},y=0,d.forEach(function(w){for(var _=t[w].paths.length,S=0,C=0;C<_;C++)S+=v[y+C].byteLength;for(var R=new ArrayBuffer(S),T=new Uint8Array(R),O=0,D=0;D<_;D++){var N=new Uint8Array(v[y+D]);T.set(N,O),O+=N.byteLength}o[w].forEach(function(k){var I=ak(R.slice(k.groupOffset,k.groupOffset+k.sizeBytes),[k.manifestEntry]);for(var B in I)g[B]=I[B]}),y+=_}),[2,g]}})})}}Ar.registerSaveRouter(function(n){return ue().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(c0.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new c0(e)}(n.slice(c0.URL_SCHEME.length)):null});var lk=function(){function n(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(L(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=ue().platform.fetch,L(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&L(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){var t,r,a,i;return De(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Ih(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},n.prototype.load=function(){return ke(this,void 0,void 0,function(){var e,t,r,a,i,o,u,c,f,d,p,v;return De(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,e.json()];case 3:return t=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=t.modelTopology,i=t.weightsManifest,o=t.generatedBy,u=t.convertedBy,c=t.format,f=t.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:v=g.sent(),d=v[0],p=v[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:d,weightData:p,userDefinedMetadata:f,generatedBy:o,convertedBy:u,format:c}]}})})},n.prototype.loadWeights=function(e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v;return De(this,function(g){switch(g.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(y){var x=y.lastIndexOf("/"),w=y.lastIndexOf("?"),_=y.substring(0,x),S=w>x?y.substring(w):"";return[_+"/",S]}(t),a=r[0],i=r[1],o=this.weightPathPrefix||a,u=[],c=0,f=e;c<f.length;c++)d=f[c],u.push.apply(u,d.weights);return p=[],e.forEach(function(y){y.paths.forEach(function(x){p.push(o+x+i)})}),[4,uk(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return v=g.sent(),[2,[u,Jx(v)]]}})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function Db(n){return n.match(lk.URL_SCHEME_REGEX)!=null}var LC=function(n,e){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(t){return Db(t)}):Db(n))?Nb(n,{onProgress:e}):null};function Nb(n,e){return new lk(n,e)}Ar.registerSaveRouter(LC),Ar.registerLoadRouter(LC);var f0=function(){function n(e){this.modelArtifacts=e}return n.prototype.load=function(){return ke(this,void 0,void 0,function(){return De(this,function(e){return[2,this.modelArtifacts]})})},n}(),w6=function(){function n(e){this.saveHandler=e}return n.prototype.save=function(e){return ke(this,void 0,void 0,function(){return De(this,function(t){return[2,this.saveHandler(e)]})})},n}(),ck=Object.freeze({browserFiles:function(n){return new x6(n)},browserHTTPRequest:function(n,e){return Nb(n,e)},concatenateArrayBuffers:Jx,decodeWeights:ak,encodeWeights:function(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return De(this,function(c){switch(c.label){case 0:for(t=[],r=[],a=Array.isArray(n)?n.map(function(f){return f.name}):Object.keys(n),i=function(f){var d=a[f],p=Array.isArray(n)?n[f].tensor:n[d];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+p.dtype);var v={name:d,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var g=new Promise(function(y){return ke(u,void 0,void 0,function(){var x,w,_,S,C,R,T;return De(this,function(O){switch(O.label){case 0:return[4,p.bytes()];case 1:for(x=O.sent(),w=x.reduce(function(D,N){return D+N.length},0)+Ev*x.length,_=new Uint8Array(w),S=0,C=0;C<x.length;C++)R=x[C],T=new Uint8Array(new Uint32Array([R.length]).buffer),_.set(T,S),S+=Ev,_.set(R,S),S+=R.length;return y(_),[2]}})})});r.push(g)}else r.push(p.data());e!=null&&(v.group=e),t.push(v)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:l6(c.sent()),specs:t}]}})})},fromMemory:function(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new f0(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new f0({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new f0({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))},getLoadHandlers:function(n,e){return Ar.getLoadHandlers(n,e)},getModelArtifactsInfoForJSON:Ih,getSaveHandlers:function(n){return Ar.getSaveHandlers(n)},http:Nb,isHTTPScheme:Db,loadWeights:function(n,e,t,r){return e===void 0&&(e=""),ke(this,void 0,void 0,function(){return De(this,function(a){return[2,PC(function(i){return uk(i,{requestInit:r})})(n,e,t)]})})},registerLoadRouter:function(n){return Ar.registerLoadRouter(n)},registerSaveRouter:function(n){return Ar.registerSaveRouter(n)},weightsLoaderFactory:PC,withSaveHandler:function(n){return new w6(n)},copyModel:function(n,e){return ke(this,void 0,void 0,function(){return De(this,function(t){return[2,DC(n,e,!1)]})})},listModels:function(){return ke(this,void 0,void 0,function(){var n,e,t,r,a,i,o;return De(this,function(u){switch(u.label){case 0:n=Bo.getSchemes(),e={},t=0,r=n,u.label=1;case 1:return t<r.length?(a=r[t],[4,Bo.getManager(a).listModels()]):[3,4];case 2:for(o in i=u.sent())e[a+yl+o]=i[o];u.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},moveModel:function(n,e){return ke(this,void 0,void 0,function(){return De(this,function(t){return[2,DC(n,e,!0)]})})},removeModel:function(n){return ke(this,void 0,void 0,function(){var e;return De(this,function(t){return e=kp(n),[2,Bo.getManager(e.scheme).removeModel(e.path)]})})}}),Yu;j({confusionMatrix_:function(n,e,t){var r=P(n,"labels","confusionMatrix"),a=P(e,"predictions","confusionMatrix");L(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),L(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),L(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),L(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),L(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var i=Eb(r.asType("int32"),t),o=Eb(a.asType("int32"),t);return i.transpose().matMul(o).asType("int32")}});var _6=j({fromPixels_:function(n,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,a=!1,i=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)i=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);o=!0}if(a&&a&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(MO("FromPixels",W.backendName)!=null)return W.runKernel("FromPixels",{pixels:n},{numChannels:e});var u,c,f=a?[n.videoWidth,n.videoHeight]:[n.width,n.height],d=f[0],p=f[1];if(o?u=n.getContext("2d").getImageData(0,0,d,p).data:r||t?u=n.data:(i||a)&&(Yu==null&&(Yu=document.createElement("canvas").getContext("2d")),Yu.canvas.width=d,Yu.canvas.height=p,Yu.drawImage(n,0,0,d,p),u=Yu.getImageData(0,0,d,p).data),e===4)c=new Int32Array(u);else{var v=d*p;c=new Int32Array(v*e);for(var g=0;g<v;g++)for(var y=0;y<e;++y)c[g*e+y]=u[4*g+y]}return Ox(c,[p,d,e],"int32")}}),e1=Object.freeze({toPixels:function(n,e){return ke(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return De(this,function(k){switch(k.label){case 0:if(t=P(n,"img","toPixels"),n instanceof jt||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),a=r[0],i=r[1],(o=t.rank===2?1:t.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,t.data()];case 1:return u=k.sent(),c=t.min(),f=t.max(),[4,Promise.all([c.data(),f.data()])];case 2:if(d=k.sent(),p=d[0],v=d[1],g=p[0],y=v[0],c.dispose(),f.dispose(),t.dtype==="float32"){if(g<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+y+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(g<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+y+"].")}for(x=t.dtype==="float32"?255:1,w=new Uint8ClampedArray(i*a*4),_=0;_<a*i;++_)S=void 0,C=void 0,R=void 0,T=void 0,o===1?(S=u[_]*x,C=u[_]*x,R=u[_]*x,T=255):o===3?(S=u[3*_]*x,C=u[3*_+1]*x,R=u[3*_+2]*x,T=255):o===4&&(S=u[4*_]*x,C=u[4*_+1]*x,R=u[4*_+2]*x,T=u[4*_+3]*x),w[(O=4*_)+0]=Math.round(S),w[O+1]=Math.round(C),w[O+2]=Math.round(R),w[O+3]=Math.round(T);return e!=null&&(e.width=i,e.height=a,D=e.getContext("2d"),N=new ImageData(w,i,a),D.putImageData(N,0,0)),t!==n&&t.dispose(),[2,w]}})})},fromPixels:_6}),E6=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(e,t){return new e(t)},n}(),S6=function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(e){n.getMap().classNameMap[e.className]=[e,e.fromConfig]},n}();function su(n){L(n.className!=null,function(){return"Class being registered does not have the static className property defined."}),L(typeof n.className=="string",function(){return"className is required to be a string, but got type "+typeof n.className}),L(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),S6.register(n)}var uu=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return wa(e,n),e.prototype.minimize=function(t,r,a){r===void 0&&(r=!1);var i=this.computeGradients(t,a),o=i.value,u=i.grads;if(a!=null){var c=a.map(function(f){return{name:f.name,tensor:u[f.name]}});this.applyGradients(c)}else this.applyGradients(u);return vr(u),r?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,r){return Mz(t,r)},e.prototype.dispose=function(){this.iterations_!=null&&vr(this.iterations_)},e.prototype.saveIterations=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:we(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){switch(a.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,t.slice(1)]}})})},e}(E6);Object.defineProperty(uu,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var C6=function(n){function e(t,r,a){a===void 0&&(a=null);var i=n.call(this)||this;return i.learningRate=t,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=W.backend.epsilon()),i}return wa(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:Te(function(){return gt(o).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:Te(function(){return gt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable,f=r.accumulatedUpdates[i].variable;Te(function(){var d=c.mul(r.rho).add(u.square().mul(1-r.rho)),p=f.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(u),v=f.mul(r.rho).add(p.square().mul(1-r.rho));c.assign(d),f.assign(v);var g=p.mul(-r.learningRate).add(o);o.assign(g)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(vr(this.accumulatedGrads.map(function(t){return t.variable})),vr(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var t;return De(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(uu);su(C6);var R6=function(n){function e(t,r){r===void 0&&(r=.1);var a=n.call(this)||this;return a.learningRate=t,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return wa(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:Te(function(){return Qa(o.shape,r.initialAccumulatorValue).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable;Te(function(){var f=c.add(u.square());c.assign(f);var d=u.div(f.add(W.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&vr(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(uu);su(R6);var T6=function(n){function e(t,r,a,i){i===void 0&&(i=null);var o=n.call(this)||this;return o.learningRate=t,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Te(function(){o.accBeta1=we(r).variable(),o.accBeta2=we(a).variable()}),i==null&&(o.epsilon=W.backend.epsilon()),o}return wa(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Te(function(){var i=gn(1,r.accBeta1),o=gn(1,r.accBeta2);a.forEach(function(u,c){var f=W.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:Te(function(){return gt(f).variable(!1)})}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:u+"/v",variable:Te(function(){return gt(f).variable(!1)})});var d=Array.isArray(t)?t[c].tensor:t[u];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedSecondMoment[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2).add(d.square().mul(1-r.beta2)),x=g.div(i),w=y.div(o);p.assign(g),v.assign(y);var _=x.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(f);f.assign(_)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&vr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&vr(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var t;return De(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){var r,a=this;return De(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),Te(function(){a.accBeta1.assign(wv(a.beta1,a.iterations_+1)),a.accBeta2.assign(wv(a.beta2,a.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(uu);su(T6);var O6=function(n){function e(t,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var u=n.call(this)||this;return u.learningRate=t,u.beta1=r,u.beta2=a,u.epsilon=i,u.decay=o,u.accumulatedFirstMoment=[],u.accumulatedWeightedInfNorm=[],Te(function(){u.iteration=we(0).variable(),u.accBeta1=we(r).variable()}),i==null&&(u.epsilon=W.backend.epsilon()),u}return wa(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Te(function(){var i=gn(1,r.accBeta1),o=ca(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(u,c){var f=W.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:gt(f).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:u+"/v",variable:gt(f).variable(!1)});var d=Array.isArray(t)?t[c].tensor:t[u];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedWeightedInfNorm[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2),x=d.abs(),w=y.maximum(x);p.assign(g),v.assign(w);var _=o.div(i).mul(g.div(w.add(r.epsilon))).add(f);f.assign(_)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&vr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&vr(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(uu);su(O6);var fk=function(n){function e(t){var r=n.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return wa(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=Array.isArray(t)?t[i].tensor:t[a];if(o!=null){var u=W.registeredVariables[a];Te(function(){var c=r.c.mul(o).add(u);u.assign(c)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=$B(we(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,r){return new t(r.learningRate)},e.className="SGD",e}(uu);su(fk);var A6=function(n){function e(t,r,a){a===void 0&&(a=!1);var i=n.call(this,t)||this;return i.learningRate=t,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=we(i.momentum),i}return wa(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:Te(function(){return gt(o).variable(!1)})});var u=r.accumulations[i].variable,c=Array.isArray(t)?t[i].tensor:t[a];c!=null&&Te(function(){var f,d=r.m.mul(u).add(c);f=r.useNesterov?r.c.mul(c.add(d.mul(r.m))).add(o):r.c.mul(d).add(o),u.assign(d),o.assign(f)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&vr(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){return De(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(fk);su(A6);var k6=function(n){function e(t,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var u=n.call(this)||this;if(u.learningRate=t,u.decay=r,u.momentum=a,u.epsilon=i,u.accumulatedMeanSquares=[],u.accumulatedMoments=[],u.accumulatedMeanGrads=[],u.centered=o,i==null&&(u.epsilon=W.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return u}return wa(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:Te(function(){return gt(o).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:Te(function(){return gt(o).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:Te(function(){return gt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedMeanSquares[i].variable,f=r.accumulatedMoments[i].variable;Te(function(){var d=c.mul(r.decay).add(u.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[i].variable,v=p.mul(r.decay).add(u.mul(1-r.decay)),g=f.mul(r.momentum).add(u.mul(r.learningRate).div(d.sub(v.square().add(r.epsilon)).sqrt()));c.assign(d),p.assign(v),f.assign(g);var y=o.sub(g);o.assign(y)}else{var x=c.mul(r.decay).add(u.square().mul(1-r.decay));g=f.mul(r.momentum).add(u.mul(r.learningRate).div(x.add(r.epsilon).sqrt())),c.assign(x),f.assign(g),y=o.sub(g),o.assign(y)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&vr(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&vr(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&vr(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return ke(this,void 0,void 0,function(){var t;return De(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return ke(this,void 0,void 0,function(){var r;return De(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(uu);su(k6);jt.prototype.squaredDifference=function(n){return RA(this,n)},oe=n6;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ib=function(n,e){return Ib=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])},Ib(n,e)};function Xe(n,e){Ib(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hn=function(){return Hn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hn.apply(this,arguments)};function Pe(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?i(d.value):a(d.value).then(u,c)}f((r=r.apply(n,[])).next())})}function Le(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Pf(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<t;e++)for(var i=arguments[e],o=0,u=i.length;o<u;o++,a++)r[a]=i[o];return r}var wl=function(){function n(e,t){if(!Gs(e)||!Gs(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n}();function Zv(n,e){return n instanceof jt&&n.shape.length===e}function D6(n){return Zv(n,2)}function Jv(n){return Zv(n,3)}function zo(n){return Zv(n,4)}function N6(n){return n%1!==0}function BC(n){return n%2===0}function I6(n,e){e===void 0&&(e=2);var t=Math.pow(10,e);return Math.floor(n*t)/t}function zC(n){return n&&n.width&&n.height}function M6(n,e){var t=n.width,r=n.height,a=e/Math.max(r,t);return new wl(Math.round(t*a),Math.round(r*a))}function t1(n){return n.reduce(function(e,t){return e.add(t)},new Et(0,0)).div(new Et(n.length,n.length))}function ch(n,e,t){return Array(n).fill(0).map(function(r,a){return e+a*t})}function Gs(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function UC(n){return Gs(n)&&0<=n&&n<=1}var Et=function(){function n(e,t){this._x=e,this._y=t}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(e){return new n(this.x+e.x,this.y+e.y)},n.prototype.sub=function(e){return new n(this.x-e.x,this.y-e.y)},n.prototype.mul=function(e){return new n(this.x*e.x,this.y*e.y)},n.prototype.div=function(e){return new n(this.x/e.x,this.y/e.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n}(),Qo=function(){function n(e,t){t===void 0&&(t=!0);var r=e||{},a=[r.left,r.top,r.right,r.bottom].every(Gs),i=[r.x,r.y,r.width,r.height].every(Gs);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],u=o[0],c=o[1],f=o[2],d=o[3];n.assertIsValidBox({x:u,y:c,width:f,height:d},"Box.constructor",t),this._x=u,this._y=c,this._width=f,this._height=d}return n.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Gs)},n.assertIsValidBox=function(e,t,r){if(r===void 0&&(r=!1),!n.isRect(e))throw new Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new Et(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new Et(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new Et(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new Et(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.toSquare=function(){var e=this,t=e.x,r=e.y,a=e.width,i=e.height,o=Math.abs(a-i);return a<i&&(t-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new n({x:t,y:r,width:a,height:i})},n.prototype.rescale=function(e){var t=zC(e)?e.width:e,r=zC(e)?e.height:e;return new n({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},n.prototype.pad=function(e,t){var r=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],a=r[0],i=r[1],o=r[2],u=r[3];return new n({x:a,y:i,width:o,height:u})},n.prototype.clipAtImageBorders=function(e,t){var r=this,a=r.x,i=r.y,o=r.right,u=r.bottom,c=Math.max(a,0),f=Math.max(i,0),d=o-c,p=u-f,v=Math.min(d,e-c),g=Math.min(p,t-f);return new n({x:c,y:f,width:v,height:g}).floor()},n.prototype.shift=function(e,t){var r=this,a=r.width,i=r.height,o=this.x+e,u=this.y+t;return new n({x:o,y:u,width:a,height:i})},n.prototype.padAtBorders=function(e,t){var r=this.width+1,a=this.height+1,i=1,o=1,u=r,c=a,f=this.left,d=this.top,p=this.right,v=this.bottom;return p>t&&(u=-p+t+r,p=t),v>e&&(c=-v+e+a,v=e),f<1&&(c=2-f,f=1),d<1&&(c=2-d,d=1),{dy:o,edy:c,dx:i,edx:u,y:d,ey:v,x:f,ex:p,w:r,h:a}},n.prototype.calibrate=function(e){return new n({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},n}(),em=function(n){Xe(e,n);function e(t,r,a,i,o){return o===void 0&&(o=!1),n.call(this,{left:t,top:r,right:a,bottom:i},o)||this}return e}(Qo),hk=function(){function n(e,t,r,a,i){this._imageDims=new wl(i.width,i.height),this._score=e,this._classScore=t,this._className=r,this._box=new Qo(a).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new Qo(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},n}(),ai=function(n){Xe(e,n);function e(t,r,a){return n.call(this,t,t,"",r,a)||this}return e.prototype.forSize=function(t,r){var a=n.prototype.forSize.call(this,t,r),i=a.score,o=a.relativeBox,u=a.imageDims;return new e(i,o,u)},e}(hk);function F6(n,e,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),a=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),i=r*a;return t?i/(n.area+e.area-i):i/Math.min(n.area,e.area)}function P6(n){var e=n.map(function(u){return u.x}),t=n.map(function(u){return u.y}),r=e.reduce(function(u,c){return c<u?c:u},1/0),a=t.reduce(function(u,c){return c<u?c:u},1/0),i=e.reduce(function(u,c){return u<c?c:u},0),o=t.reduce(function(u,c){return u<c?c:u},0);return new em(r,a,i,o)}function fh(n,e,t,r){r===void 0&&(r=!0);for(var a=e.map(function(u,c){return{score:u,boxIndex:c}}).sort(function(u,c){return u.score-c.score}).map(function(u){return u.boxIndex}),i=[],o=function(){var u=a.pop();i.push(u);for(var c=a,f=[],d=0;d<c.length;d++){var p=c[d],v=n[u],g=n[p];f.push(F6(v,g,r))}a=a.filter(function(y,x){return f[x]<=t})};a.length>0;)o();return i}function Mh(n,e){return Te(function(){var t=e[0],r=e[1],a=e[2],i=Qa(Pf(n.shape.slice(0,3),[1]),t),o=Qa(Pf(n.shape.slice(0,3),[1]),r),u=Qa(Pf(n.shape.slice(0,3),[1]),a),c=pn([i,o,u],3);return gn(n,c)})}function L6(n,e){return e===void 0&&(e=!1),Te(function(){var t=n.shape.slice(1),r=t[0],a=t[1];if(r===a)return n;var i=Math.abs(r-a),o=Math.round(i*(e?.5:1)),u=r>a?2:1,c=function(g){var y=n.shape.slice();return y[u]=g,Qa(y,0)},f=c(o),d=i-f.shape[u],p=e&&d?c(d):null,v=[p,n,f].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return pn(v,u)})}function h0(n){return 1/(1+Math.exp(-n))}var n1=function(n){Xe(e,n);function e(t,r,a,i,o){return o===void 0&&(o=!1),n.call(this,{x:t,y:r,width:a,height:i},o)||this}return e}(Qo),B6=.5,z6=.43,U6=.45,Sv=function(){function n(e,t,r){r===void 0&&(r=new Et(0,0));var a=t.width,i=t.height;this._imgDims=new wl(a,i),this._shift=r,this._positions=e.map(function(o){return o.mul(new Et(a,i)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new Et(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new Et(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},n.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new Et(e,t))},n.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},n.prototype.align=function(e,t){if(t===void 0&&(t={}),e){var r=e instanceof ai?e.box.floor():new Qo(e);return this.shiftBy(r.x,r.y).align(null,t)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=a.useDlibAlignment,o=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},n.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],r=e[1],a=e[2],i=function(p){return a.sub(p).magnitude()},o=(i(t)+i(r))/2,u=Math.floor(o/U6),c=t1(e),f=Math.floor(Math.max(0,c.x-B6*u)),d=Math.floor(Math.max(0,c.y-z6*u));return new n1(f,d,Math.min(u,this.imageWidth+f),Math.min(u,this.imageHeight+d))},n.prototype.alignMinBbox=function(e){var t=P6(this.positions);return t.pad(t.width*e,t.height*e)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n}(),V6=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],t1([t[3],t[4]])]},e}(Sv),j6=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(t1)},e}(Sv),VC=function(){function n(e,t){this._label=e,this._distance=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+I6(this.distance)+")":"")},n}(),jC=function(n){Xe(e,n);function e(t,r){var a=n.call(this,t)||this;return a._label=r,a}return e.assertIsValidLabeledBox=function(t,r){if(Qo.assertIsValidBox(t,r),!Gs(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Qo),dp=function(){function n(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},n.fromJSON=function(e){var t=e.descriptors.map(function(r){return new Float32Array(r)});return new n(e.label,t)},n}();(function(n){Xe(e,n);function e(t,r,a,i){var o=n.call(this,t,r)||this;return o._score=a,o._classScore=i,o}return e.assertIsValidPredictedBox=function(t,r){if(jC.assertIsValidLabeledBox(t,r),!UC(t.score)||!UC(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(jC);function q6(n){return n.detection instanceof ai}function r1(n,e){var t={detection:e};return Object.assign({},n,t)}function dk(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:e}}function pk(n){var e="";if(!n)try{n=require("fs")}catch(r){e=r.toString()}var t=n?function(r){return new Promise(function(a,i){n.readFile(r,function(o,u){return o?i(o):a(u)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:t}}function vk(){var n=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,t=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=pk();return Hn({Canvas:n||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:e||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:t,createImageElement:r,fetch:a},i)}function mk(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function gk(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var fn;function W6(){if(!fn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return fn}function Mb(n){fn=n}function a1(){mk()&&Mb(dk()),gk()&&Mb(vk())}function H6(n){if(fn||a1(),!fn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=n.Canvas,t=e===void 0?fn.Canvas:e,r=n.Image,a=r===void 0?fn.Image:r;fn.Canvas=t,fn.Image=a,fn.createCanvasElement=n.createCanvasElement||function(){return new t},fn.createImageElement=n.createImageElement||function(){return new a},fn.ImageData=n.ImageData||fn.ImageData,fn.Video=n.Video||fn.Video,fn.fetch=n.fetch||fn.fetch,fn.readFile=n.readFile||fn.readFile}var Xn={getEnv:W6,setEnv:Mb,initialize:a1,createBrowserEnv:dk,createFileSystem:pk,createNodejsEnv:vk,monkeyPatch:H6,isBrowser:mk,isNodejs:gk};a1();function yk(n){return!Xn.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function eu(n){var e=Xn.getEnv(),t=e.Canvas,r=e.CanvasRenderingContext2D;if(n instanceof r)return n;var a=yk(n);if(!(a instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var qC;(function(n){n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT"})(qC||(qC={}));function bk(n){var e=Xn.getEnv(),t=e.Image,r=e.Video;return n instanceof t&&n.complete||n instanceof r&&n.readyState>=3}function G6(n){return new Promise(function(e,t){if(n instanceof Xn.getEnv().Canvas||bk(n))return e();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),e(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}n.addEventListener("load",r),n.addEventListener("error",a)})}function xk(n){var e=Xn.getEnv(),t=e.Image,r=e.Video;return n instanceof t?new wl(n.naturalWidth,n.naturalHeight):n instanceof r?new wl(n.videoWidth,n.videoHeight):new wl(n.width,n.height)}function tm(n){var e=n.width,t=n.height,r=Xn.getEnv().createCanvasElement,a=r();return a.width=e,a.height=t,a}function i1(n,e){var t=Xn.getEnv().ImageData;if(!(n instanceof t)&&!bk(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=xk(n),a=r.width,i=r.height,o=tm({width:a,height:i});return n instanceof t?eu(o).putImageData(n,0,0):eu(o).drawImage(n,0,0,a,i),o}function Q6(n,e){return Pe(this,void 0,void 0,function(){var t,r,a,i,o,u;return Le(this,function(c){switch(c.label){case 0:return t=Xn.getEnv().createCanvasElement(),r=n.shape.slice(zo(n)?1:0),a=r[0],i=r[1],o=r[2],u=Te(function(){return n.as3D(a,i,o).toInt()}),[4,e1.toPixels(u,t)];case 1:return c.sent(),u.dispose(),[2,t]}})})}function WC(n){var e=Xn.getEnv(),t=e.Image,r=e.Canvas,a=e.Video;return n instanceof t||n instanceof r||n instanceof a}function $6(n,e,t){t===void 0&&(t=!1);var r=Xn.getEnv(),a=r.Image,i=r.Canvas;if(!(n instanceof a||n instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=xk(n),u=e/Math.max(o.height,o.width),c=u*o.width,f=u*o.height,d=tm({width:e,height:e}),p=n instanceof i?n:i1(n),v=Math.abs(c-f)/2,g=t&&c<f?v:0,y=t&&f<c?v:0;return eu(d).drawImage(p,g,y,c,f),d}var Cv=function(){function n(e,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(a,i){if(Jv(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(zo(a)){var o=a.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var u=a instanceof Xn.getEnv().Canvas?a:i1(a);r._canvases[i]=u,r._inputDimensions[i]=[u.height,u.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var e=this;return ch(this.batchSize,0,1).map(function(t,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},n.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},n.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},n.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},n.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),r=this.getInputHeight(e);return M6({width:t,height:r},this.inputSize)},n.prototype.toBatchTensor=function(e,t){var r=this;return t===void 0&&(t=!0),this._inputSize=e,Te(function(){var a=ch(r.batchSize,0,1).map(function(o){var u=r.getInput(o);if(u instanceof jt){var c=zo(u)?u:u.expandDims();return c=L6(c,t),(c.shape[1]!==e||c.shape[2]!==e)&&(c=$x.resizeBilinear(c,[e,e])),c.as3D(e,e,3)}if(u instanceof Xn.getEnv().Canvas)return e1.fromPixels($6(u,e,t));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+u)}),i=Nr(a.map(function(o){return o.toFloat()})).as4D(r.batchSize,e,e,3);return i})},n}();function An(n){return Pe(this,void 0,void 0,function(){var e,t,r;return Le(this,function(a){switch(a.label){case 0:if(n instanceof Cv)return[2,n];if(e=Array.isArray(n)?n:[n],!e.length)throw new Error("toNetInput - empty array passed as input");return t=function(i){return Array.isArray(n)?" at input index "+i+":":""},r=e.map(yk),r.forEach(function(i,o){if(!WC(i)&&!Jv(i)&&!zo(i))throw typeof e[o]=="string"?new Error("toNetInput -"+t(o)+" string passed, but could not resolve HTMLElement for element id "+e[o]):new Error("toNetInput -"+t(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(zo(i)){var u=i.shape[0];if(u!==1)throw new Error("toNetInput -"+t(o)+" tf.Tensor4D with batchSize "+u+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return WC(i)&&G6(i)}))];case 1:return a.sent(),[2,new Cv(r,Array.isArray(n))]}})})}function o1(n,e){return Pe(this,void 0,void 0,function(){var t,r,a,i,o,u,c;return Le(this,function(f){switch(f.label){case 0:return t=Xn.getEnv().Canvas,r=n,n instanceof t?[3,5]:[4,An(n)];case 1:if(a=f.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof t?(o=i,[3,4]):[3,2];case 2:return[4,Q6(i)];case 3:o=f.sent(),f.label=4;case 4:r=o,f.label=5;case 5:return u=eu(r),c=e.map(function(d){return d instanceof ai?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(d){var p=d.x,v=d.y,g=d.width,y=d.height,x=tm({width:g,height:y});return eu(x).putImageData(u.getImageData(p,v,g,y),0,0),x})]}})})}function s1(n,e){return Pe(this,void 0,void 0,function(){return Le(this,function(t){if(!Jv(n)&&!zo(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(zo(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Te(function(){var r=n.shape.slice(zo(n)?1:0),a=r[0],i=r[1],o=r[2],u=e.map(function(f){return f instanceof ai?f.forSize(i,a).box:f}).map(function(f){return f.clipAtImageBorders(i,a)}),c=u.map(function(f){var d=f.x,p=f.y,v=f.width,g=f.height;return QA(n.as3D(a,i,o),[p,d,0],[g,v,o])});return c})]})})}function K6(n,e){return Pe(this,void 0,void 0,function(){var t,r;return Le(this,function(a){switch(a.label){case 0:return t=Xn.getEnv().fetch,[4,t(n,e)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function X6(n){return Pe(this,void 0,void 0,function(){return Le(this,function(e){switch(e.label){case 0:return[4,K6(n)];case 1:return[2,e.sent().json()]}})})}function wk(n,e){var t=e+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:t};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var a=n.split("/").filter(function(u){return u}),i=n.endsWith(".json")?a[a.length-1]:t,o=r+(n.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return o=n.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function Y6(n,e){return Pe(this,void 0,void 0,function(){var t,r,a,i;return Le(this,function(o){switch(o.label){case 0:return t=wk(n,e),r=t.manifestUri,a=t.modelBaseUri,[4,X6(r)];case 1:return i=o.sent(),[2,ck.loadWeights(i,a)]}})})}var ji=function(){function n(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),r=t.obj,a=t.objProp;return r[a]},n.prototype.reassignParamFromPath=function(e,t){var r=this.traversePropertyPath(e),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=t},n.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Xl})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Xl)})},n.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var r=t.path,a=t.tensor;e.reassignParamFromPath(r,a.variable())})},n.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var r=t.path,a=t.tensor,i=zn(a.dataSync());a.dispose(),e.reassignParamFromPath(r,i)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},n.prototype.load=function(e){return Pe(this,void 0,void 0,function(){return Le(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},n.prototype.loadFromUri=function(e){return Pe(this,void 0,void 0,function(){var t;return Le(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Y6(e,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},n.prototype.loadFromDisk=function(e){return Pe(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p;return Le(this,function(v){switch(v.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=Xn.getEnv().readFile,r=wk(e,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,o=function(g){return Promise.all(g.map(function(y){return t(y).then(function(x){return x.buffer})}))},u=ck.weightsLoaderFactory(o),d=(f=JSON).parse,[4,t(a)];case 1:return c=d.apply(f,[v.sent().toString()]),[4,u(c,i)];case 2:return p=v.sent(),this.loadFromWeightMap(p),[2]}})})},n.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.extractWeights=function(e){var t=this.extractParams(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+e);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),r=t.obj,a=t.objProp;if(!r||!a||!(r[a]instanceof jt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:a}},n}();function kr(n,e,t){return Te(function(){var r=qx(n,e.depthwise_filter,e.pointwise_filter,t,"same");return r=ut(r,e.bias),r})}function d0(n,e,t){return t===void 0&&(t=!1),Te(function(){var r=qt(t?ut(Jr(n,e.conv0.filters,[2,2],"same"),e.conv0.bias):kr(n,e.conv0,[2,2])),a=kr(r,e.conv1,[1,1]),i=qt(ut(r,a)),o=kr(i,e.conv2,[1,1]);return qt(ut(r,ut(a,o)))})}function pp(n,e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),Te(function(){var a=qt(t?ut(Jr(n,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):kr(n,e.conv0,r?[2,2]:[1,1])),i=kr(a,e.conv1,[1,1]),o=qt(ut(a,i)),u=kr(o,e.conv2,[1,1]),c=qt(ut(a,ut(i,u))),f=kr(c,e.conv3,[1,1]);return qt(ut(a,ut(i,ut(u,f))))})}function ga(n,e,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),Te(function(){var a=ut(Jr(n,e.filters,[1,1],t),e.bias);return r?qt(a):a})}function qi(n,e){Object.keys(n).forEach(function(t){e.some(function(r){return r.originalPath===t})||n[t].dispose()})}function nm(n,e){return function(t,r,a,i){var o=hr(n(t*r*a*a),[a,a,t,r]),u=sn(n(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:u}}}function u1(n,e){return function(t,r,a){var i=Lo(n(t*r),[t,r]),o=sn(n(r));return e.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var _k=function(){function n(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}return n}();function l1(n,e){return function(t,r,a){var i=hr(n(9*t),[3,3,t,1]),o=hr(n(t*r),[1,1,t,r]),u=sn(n(r));return e.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new _k(i,o,u)}}function c1(n){return function(e){var t=n(e+"/depthwise_filter",4),r=n(e+"/pointwise_filter",4),a=n(e+"/bias",1);return new _k(t,r,a)}}function ts(n,e){return function(t,r,a){var i=n[t];if(!Zv(i,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+i);return e.push({originalPath:t,paramPath:a||t}),i}}function Wi(n){var e=n;function t(a){var i=e.slice(0,a);return e=e.slice(a),i}function r(){return e}return{extractWeights:t,getRemainingWeights:r}}function Ek(n,e){var t=nm(n,e),r=l1(n,e);function a(o,u,c,f){f===void 0&&(f=!1);var d=f?t(o,u,3,c+"/conv0"):r(o,u,c+"/conv0"),p=r(u,u,c+"/conv1"),v=r(u,u,c+"/conv2");return{conv0:d,conv1:p,conv2:v}}function i(o,u,c,f){f===void 0&&(f=!1);var d=a(o,u,c,f),p=d.conv0,v=d.conv1,g=d.conv2,y=r(u,u,c+"/conv3");return{conv0:p,conv1:v,conv2:g,conv3:y}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function Z6(n){var e=[],t=Wi(n),r=t.extractWeights,a=t.getRemainingWeights,i=Ek(r,e).extractDenseBlock4Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2"),f=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:o,dense1:u,dense2:c,dense3:f}}}function Sk(n){return function(e){var t=n(e+"/filters",4),r=n(e+"/bias",1);return{filters:t,bias:r}}}function Ck(n,e){var t=ts(n,e),r=Sk(t),a=c1(t);function i(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),d=a(u+"/conv1"),p=a(u+"/conv2");return{conv0:f,conv1:d,conv2:p}}function o(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),d=a(u+"/conv1"),p=a(u+"/conv2"),v=a(u+"/conv3");return{conv0:f,conv1:d,conv2:p,conv3:v}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function J6(n){var e=[],t=Ck(n,e).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return qi(n,e),{params:r,paramMappings:e}}var Rk=function(n){Xe(e,n);function e(){return n.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Te(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Mh(a,i).div(we(255)),u=pp(o,r.dense0,!0);return u=pp(u,r.dense1),u=pp(u,r.dense2),u=pp(u,r.dense3),u=Nh(u,[7,7],[2,2],"valid"),u})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return J6(t)},e.prototype.extractParams=function(t){return Z6(t)},e}(ji);function qa(n,e){return Te(function(){return ut(Kv(n,e.weights),e.bias)})}function eq(n,e,t){var r=[],a=Wi(n),i=a.extractWeights,o=a.getRemainingWeights,u=u1(i,r),c=u(e,t,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:c}}}function tq(n){var e=[],t=ts(n,e);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:r("fc")};return qi(n,e),{params:a,paramMappings:e}}function Tk(n){var e={},t={};return Object.keys(n).forEach(function(r){var a=r.startsWith("fc")?t:e;a[r]=n[r]}),{featureExtractorMap:e,classifierMap:t}}var Ok=function(n){Xe(e,n);function e(t,r){var a=n.call(this,t)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Te(function(){var i=t instanceof Cv?r.faceFeatureExtractor.forwardInput(t):t;return qa(i.as2D(i.shape[0],-1),a.fc)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return eq(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var r=Tk(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),tq(i)},e.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,o=t.slice(0,t.length-i),u=t.slice(t.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(u)},e}(ji),HC=["neutral","happy","sad","angry","fearful","disgusted","surprised"],nq=function(){function n(e){var t=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);HC.forEach(function(r,a){t[r]=e[a]})}return n.prototype.asSortedArray=function(){var e=this;return HC.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,r){return r.probability-t.probability})},n}(),rq=function(n){Xe(e,n);function e(t){return t===void 0&&(t=new Rk),n.call(this,"FaceExpressionNet",t)||this}return e.prototype.forwardInput=function(t){var r=this;return Te(function(){return Ui(r.runNet(t))})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictExpressions=function(t){return Pe(this,void 0,void 0,function(){var r,a,i,o,u=this;return Le(this,function(c){switch(c.label){case 0:return[4,An(t)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(vn(a).map(function(f){return Pe(u,void 0,void 0,function(){var d;return Le(this,function(p){switch(p.label){case 0:return[4,f.data()];case 1:return d=p.sent(),f.dispose(),[2,d]}})})}))];case 3:return i=c.sent(),a.dispose(),o=i.map(function(f){return new nq(f)}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(Ok);function Ak(n,e){var t={expressions:e};return Object.assign({},n,t)}function aq(n){return q6(n)&&n.landmarks instanceof Sv&&n.unshiftedLandmarks instanceof Sv&&n.alignedRect instanceof ai}function f1(n,e){var t=n.detection.box,r=e.shiftBy(t.x,t.y),a=r.align(),i=n.detection.imageDims,o=new ai(n.detection.score,a.rescale(i.reverse()),i),u={landmarks:r,unshiftedLandmarks:e,alignedRect:o};return Object.assign({},n,u)}function iq(n,e){var t=nm(n,e),r=l1(n,e);function a(o,u,c){var f=r(o,u,c+"/separable_conv0"),d=r(u,u,c+"/separable_conv1"),p=t(o,u,1,c+"/expansion_conv");return{separable_conv0:f,separable_conv1:d,expansion_conv:p}}function i(o,u){var c=r(o,o,u+"/separable_conv0"),f=r(o,o,u+"/separable_conv1"),d=r(o,o,u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function oq(n,e){var t=[],r=Wi(n),a=r.extractWeights,i=r.getRemainingWeights,o=iq(a,t),u=o.extractConvParams,c=o.extractSeparableConvParams,f=o.extractReductionBlockParams,d=o.extractMainBlockParams,p=u(3,32,3,"entry_flow/conv_in"),v=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),y={conv_in:p,reduction_block_0:v,reduction_block_1:g},x={};ch(e,0,1).forEach(function(C){x["main_block_"+C]=d(128,"middle_flow/main_block_"+C)});var w=f(128,256,"exit_flow/reduction_block"),_=c(256,512,"exit_flow/separable_conv"),S={reduction_block:w,separable_conv:_};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{entry_flow:y,middle_flow:x,exit_flow:S}}}function sq(n,e){var t=ts(n,e),r=Sk(t),a=c1(t);function i(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),d=r(u+"/expansion_conv");return{separable_conv0:c,separable_conv1:f,expansion_conv:d}}function o(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),d=a(u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:o}}function uq(n,e){var t=[],r=sq(n,t),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,u=r.extractMainBlockParams,c=a("entry_flow/conv_in"),f=o("entry_flow/reduction_block_0"),d=o("entry_flow/reduction_block_1"),p={conv_in:c,reduction_block_0:f,reduction_block_1:d},v={};ch(e,0,1).forEach(function(w){v["main_block_"+w]=u("middle_flow/main_block_"+w)});var g=o("exit_flow/reduction_block"),y=i("exit_flow/separable_conv"),x={reduction_block:g,separable_conv:y};return qi(n,t),{params:{entry_flow:p,middle_flow:v,exit_flow:x},paramMappings:t}}function kk(n,e,t){return ut(Jr(n,e.filters,t,"same"),e.bias)}function p0(n,e,t){t===void 0&&(t=!0);var r=t?qt(n):n;return r=kr(r,e.separable_conv0,[1,1]),r=kr(qt(r),e.separable_conv1,[1,1]),r=En(r,[3,3],[2,2],"same"),r=ut(r,kk(n,e.expansion_conv,[2,2])),r}function lq(n,e){var t=kr(qt(n),e.separable_conv0,[1,1]);return t=kr(qt(t),e.separable_conv1,[1,1]),t=kr(qt(t),e.separable_conv2,[1,1]),t=ut(t,n),t}var cq=function(n){Xe(e,n);function e(t){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return e.prototype.forwardInput=function(t){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return Te(function(){var i=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=Mh(i,o).div(we(256)),c=qt(kk(u,a.entry_flow.conv_in,[2,2]));return c=p0(c,a.entry_flow.reduction_block_0,!1),c=p0(c,a.entry_flow.reduction_block_1),ch(r._numMainBlocks,0,1).forEach(function(f){c=lq(c,a.middle_flow["main_block_"+f])}),c=p0(c,a.exit_flow.reduction_block),c=qt(kr(c,a.exit_flow.separable_conv,[1,1])),c})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return uq(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return oq(t,this._numMainBlocks)},e}(ji);function fq(n){var e=[],t=Wi(n),r=t.extractWeights,a=t.getRemainingWeights,i=u1(r,e),o=i(512,1,"fc/age"),u=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{fc:{age:o,gender:u}}}}function hq(n){var e=[],t=ts(n,e);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return qi(n,e),{params:a,paramMappings:e}}var Rv;(function(n){n.FEMALE="female",n.MALE="male"})(Rv||(Rv={}));var dq=function(n){Xe(e,n);function e(t){t===void 0&&(t=new cq(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Te(function(){var i=t instanceof Cv?r.faceFeatureExtractor.forwardInput(t):t,o=Nh(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),u=qa(o,a.fc.age).as1D(),c=qa(o,a.fc.gender);return{age:u,gender:c}})},e.prototype.forwardInput=function(t){var r=this;return Te(function(){var a=r.runNet(t),i=a.age,o=a.gender;return{age:i,gender:Ui(o)}})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return Pe(this,void 0,void 0,function(){var r,a,i,o,u,c,f=this;return Le(this,function(d){switch(d.label){case 0:return[4,An(t)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return a=d.sent(),i=vn(a.age),o=vn(a.gender),u=i.map(function(p,v){return{ageTensor:p,genderTensor:o[v]}}),[4,Promise.all(u.map(function(p){var v=p.ageTensor,g=p.genderTensor;return Pe(f,void 0,void 0,function(){var y,x,w,_,S;return Le(this,function(C){switch(C.label){case 0:return[4,v.data()];case 1:return y=C.sent()[0],[4,g.data()];case 2:return x=C.sent()[0],w=x>.5,_=w?Rv.MALE:Rv.FEMALE,S=w?x:1-x,v.dispose(),g.dispose(),[2,{age:y,gender:_,genderProbability:S}]}})})}))];case 3:return c=d.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return fq(t)},e.prototype.extractParamsFromWeigthMap=function(t){var r=Tk(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),hq(i)},e.prototype.extractParams=function(t){var r=1539,a=t.slice(0,t.length-r),i=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},e}(ji),Dk=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.postProcess=function(t,r,a){var i=a.map(function(u){var c=u.width,f=u.height,d=r/Math.max(f,c);return{width:c*d,height:f*d}}),o=i.length;return Te(function(){var u=function(v,g){return Nr([Qa([68],v),Qa([68],g)],1).as2D(1,136).as1D()},c=function(v,g){var y=i[v],x=y.width,w=y.height;return g(x,w)?Math.abs(x-w)/2:0},f=function(v){return c(v,function(g,y){return g<y})},d=function(v){return c(v,function(g,y){return y<g})},p=t.mul(Qa([o,136],r)).sub(Nr(Array.from(Array(o),function(v,g){return u(f(g),d(g))}))).div(Nr(Array.from(Array(o),function(v,g){return u(i[g].width,i[g].height)})));return p})},e.prototype.forwardInput=function(t){var r=this;return Te(function(){var a=r.runNet(t);return r.postProcess(a,t.inputSize,t.inputDimensions.map(function(i){var o=i[0],u=i[1];return{height:o,width:u}}))})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.detectLandmarks=function(t){return Pe(this,void 0,void 0,function(){var r,a,i,o=this;return Le(this,function(u){switch(u.label){case 0:return[4,An(t)];case 1:return r=u.sent(),a=Te(function(){return vn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c,f){return Pe(o,void 0,void 0,function(){var d,p,v,g,y;return Le(this,function(x){switch(x.label){case 0:return v=(p=Array).from,[4,c.data()];case 1:return d=v.apply(p,[x.sent()]),g=d.filter(function(w,_){return BC(_)}),y=d.filter(function(w,_){return!BC(_)}),[2,new j6(Array(68).fill(0).map(function(w,_){return new Et(g[_],y[_])}),{height:r.getInputHeight(f),width:r.getInputWidth(f)})]}})})}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(Ok),Nk=function(n){Xe(e,n);function e(t){return t===void 0&&(t=new Rk),n.call(this,"FaceLandmark68Net",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(Dk);function pq(n){var e=[],t=Ck(n,e).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return qi(n,e),{params:r,paramMappings:e}}function vq(n){var e=[],t=Wi(n),r=t.extractWeights,a=t.getRemainingWeights,i=Ek(r,e).extractDenseBlock3Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:o,dense1:u,dense2:c}}}var mq=function(n){Xe(e,n);function e(){return n.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Te(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Mh(a,i).div(we(255)),u=d0(o,r.dense0,!0);return u=d0(u,r.dense1),u=d0(u,r.dense2),u=Nh(u,[14,14],[2,2],"valid"),u})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return pq(t)},e.prototype.extractParams=function(t){return vq(t)},e}(ji),gq=function(n){Xe(e,n);function e(t){return t===void 0&&(t=new mq),n.call(this,"FaceLandmark68TinyNet",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(Dk);(function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Nk);function yq(n,e){return ut($n(n,e.weights),e.biases)}function h1(n,e,t,r,a){a===void 0&&(a="same");var i=e.conv,o=i.filters,u=i.bias,c=Jr(n,o,t,a);return c=ut(c,u),c=yq(c,e.scale),r?qt(c):c}function bq(n,e){return h1(n,e,[1,1],!0)}function Ik(n,e){return h1(n,e,[1,1],!1)}function Mk(n,e){return h1(n,e,[2,2],!0,"valid")}function xq(n,e){function t(u,c,f){var d=n(u),p=d.length/(c*f*f);if(N6(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+f);return Te(function(){return Go(hr(d,[c,p,f,f]),[2,3,1,0])})}function r(u,c,f,d){var p=t(u,c,f),v=sn(n(c));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:p,bias:v}}function a(u,c){var f=sn(n(u)),d=sn(n(u));return e.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:f,biases:d}}function i(u,c,f,d){var p=r(u,c,f,d+"/conv"),v=a(c,d+"/scale");return{conv:p,scale:v}}function o(u,c,f,d,p){p===void 0&&(p=!1);var v=i((p?.5:1)*u,c,f,d+"/conv1"),g=i(u,c,f,d+"/conv2");return{conv1:v,conv2:g}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function wq(n){var e=Wi(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=xq(t,a),o=i.extractConvLayerParams,u=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),f=u(9216,32,3,"conv32_1"),d=u(9216,32,3,"conv32_2"),p=u(9216,32,3,"conv32_3"),v=u(36864,64,3,"conv64_down",!0),g=u(36864,64,3,"conv64_1"),y=u(36864,64,3,"conv64_2"),x=u(36864,64,3,"conv64_3"),w=u(147456,128,3,"conv128_down",!0),_=u(147456,128,3,"conv128_1"),S=u(147456,128,3,"conv128_2"),C=u(589824,256,3,"conv256_down",!0),R=u(589824,256,3,"conv256_1"),T=u(589824,256,3,"conv256_2"),O=u(589824,256,3,"conv256_down_out"),D=Te(function(){return Go(Lo(t(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var N={conv32_down:c,conv32_1:f,conv32_2:d,conv32_3:p,conv64_down:v,conv64_1:g,conv64_2:y,conv64_3:x,conv128_down:w,conv128_1:_,conv128_2:S,conv256_down:C,conv256_1:R,conv256_2:T,conv256_down_out:O,fc:D};return{params:N,paramMappings:a}}function _q(n,e){var t=ts(n,e);function r(o){var u=t(o+"/scale/weights",1),c=t(o+"/scale/biases",1);return{weights:u,biases:c}}function a(o){var u=t(o+"/conv/filters",4),c=t(o+"/conv/bias",1),f=r(o);return{conv:{filters:u,bias:c},scale:f}}function i(o){return{conv1:a(o+"/conv1"),conv2:a(o+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function Eq(n){var e=[],t=_q(n,e),r=t.extractConvLayerParams,a=t.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),u=a("conv32_2"),c=a("conv32_3"),f=a("conv64_down"),d=a("conv64_1"),p=a("conv64_2"),v=a("conv64_3"),g=a("conv128_down"),y=a("conv128_1"),x=a("conv128_2"),w=a("conv256_down"),_=a("conv256_1"),S=a("conv256_2"),C=a("conv256_down_out"),R=n.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!D6(R))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+R);var T={conv32_down:i,conv32_1:o,conv32_2:u,conv32_3:c,conv64_down:f,conv64_1:d,conv64_2:p,conv64_3:v,conv128_down:g,conv128_1:y,conv128_2:x,conv256_down:w,conv256_1:_,conv256_2:S,conv256_down_out:C,fc:R};return qi(n,e),{params:T,paramMappings:e}}function Da(n,e){var t=bq(n,e.conv1);return t=Ik(t,e.conv2),t=ut(t,n),t=qt(t),t}function vp(n,e){var t=Mk(n,e.conv1);t=Ik(t,e.conv2);var r=Nh(n,2,2,"valid"),a=Bt(r.shape),i=r.shape[3]!==t.shape[3],o=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(o){var u=Pf(t.shape);u[1]=1;var c=Bt(u);t=pn([t,c],1);var f=Pf(t.shape);f[2]=1;var d=Bt(f);t=pn([t,d],2)}return r=i?pn([r,a],3):r,t=ut(r,t),t=qt(t),t}var Sq=function(n){Xe(e,n);function e(){return n.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Te(function(){var a=t.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=Mh(a,i).div(we(256)),u=Mk(o,r.conv32_down);u=En(u,3,2,"valid"),u=Da(u,r.conv32_1),u=Da(u,r.conv32_2),u=Da(u,r.conv32_3),u=vp(u,r.conv64_down),u=Da(u,r.conv64_1),u=Da(u,r.conv64_2),u=Da(u,r.conv64_3),u=vp(u,r.conv128_down),u=Da(u,r.conv128_1),u=Da(u,r.conv128_2),u=vp(u,r.conv256_down),u=Da(u,r.conv256_1),u=Da(u,r.conv256_2),u=vp(u,r.conv256_down_out);var c=u.mean([1,2]),f=Kv(c,r.fc);return f})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return Pe(this,void 0,void 0,function(){var r,a,i,o=this;return Le(this,function(u){switch(u.label){case 0:return[4,An(t)];case 1:return r=u.sent(),a=Te(function(){return vn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Eq(t)},e.prototype.extractParams=function(t){return wq(t)},e}(ji);function Fk(n,e){var t={descriptor:e};return Object.assign({},n,t)}function Pk(n,e){var t={age:e};return Object.assign({},n,t)}function Lk(n,e,t){var r={gender:e,genderProbability:t};return Object.assign({},n,r)}var Bk=function(){function n(e){var t=e===void 0?{}:e,r=t.minFaceSize,a=t.scaleFactor,i=t.maxNumScales,o=t.scoreThresholds,u=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=u,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n}();function Cq(n,e){function t(c,f){var d=hr(n(9*c),[3,3,c,1]),p=sn(n(c)),v=sn(n(c)),g=sn(n(c)),y=sn(n(c));return e.push({paramPath:f+"/filters"},{paramPath:f+"/batch_norm_scale"},{paramPath:f+"/batch_norm_offset"},{paramPath:f+"/batch_norm_mean"},{paramPath:f+"/batch_norm_variance"}),{filters:d,batch_norm_scale:p,batch_norm_offset:v,batch_norm_mean:g,batch_norm_variance:y}}function r(c,f,d,p,v){var g=hr(n(c*f*d*d),[d,d,c,f]),y=sn(n(f));return e.push({paramPath:p+"/filters"},{paramPath:p+"/"+(v?"batch_norm_offset":"bias")}),{filters:g,bias:y}}function a(c,f,d,p){var v=r(c,f,d,p,!0),g=v.filters,y=v.bias;return{filters:g,batch_norm_offset:y}}function i(c,f,d){var p=t(c,d+"/depthwise_conv"),v=a(c,f,1,d+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:v}}function o(){var c=a(3,32,3,"mobilenetv1/conv_0"),f=i(32,64,"mobilenetv1/conv_1"),d=i(64,128,"mobilenetv1/conv_2"),p=i(128,128,"mobilenetv1/conv_3"),v=i(128,256,"mobilenetv1/conv_4"),g=i(256,256,"mobilenetv1/conv_5"),y=i(256,512,"mobilenetv1/conv_6"),x=i(512,512,"mobilenetv1/conv_7"),w=i(512,512,"mobilenetv1/conv_8"),_=i(512,512,"mobilenetv1/conv_9"),S=i(512,512,"mobilenetv1/conv_10"),C=i(512,512,"mobilenetv1/conv_11"),R=i(512,1024,"mobilenetv1/conv_12"),T=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,conv_8:w,conv_9:_,conv_10:S,conv_11:C,conv_12:R,conv_13:T}}function u(){var c=a(1024,256,1,"prediction_layer/conv_0"),f=a(256,512,3,"prediction_layer/conv_1"),d=a(512,128,1,"prediction_layer/conv_2"),p=a(128,256,3,"prediction_layer/conv_3"),v=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),y=a(256,64,1,"prediction_layer/conv_6"),x=a(64,128,3,"prediction_layer/conv_7"),w=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),_=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),S=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),C=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),R=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),T=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),O=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),N=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),I=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),B=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),U={box_encoding_predictor:w,class_predictor:_},ee={box_encoding_predictor:S,class_predictor:C},te={box_encoding_predictor:R,class_predictor:T},re={box_encoding_predictor:O,class_predictor:D},q={box_encoding_predictor:N,class_predictor:k},Z={box_encoding_predictor:I,class_predictor:B};return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,box_predictor_0:U,box_predictor_1:ee,box_predictor_2:te,box_predictor_3:re,box_predictor_4:q,box_predictor_5:Z}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function Rq(n){var e=[],t=Wi(n),r=t.extractWeights,a=t.getRemainingWeights,i=Cq(r,e),o=i.extractMobilenetV1Params,u=i.extractPredictionLayerParams,c=o(),f=u(),d=Ox(r(5118*4),[1,5118,4]),p={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:f,output_layer:p},paramMappings:e}}function Tq(n,e){var t=ts(n,e);function r(f,d,p){var v=t(f+"/Conv2d_"+d+"_pointwise/weights",4,p+"/filters"),g=t(f+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:v,batch_norm_offset:g}}function a(f){var d="mobilenetv1/conv_"+f,p="MobilenetV1/Conv2d_"+f+"_depthwise",v=d+"/depthwise_conv",g=d+"/pointwise_conv",y=t(p+"/depthwise_weights",4,v+"/filters"),x=t(p+"/BatchNorm/gamma",1,v+"/batch_norm_scale"),w=t(p+"/BatchNorm/beta",1,v+"/batch_norm_offset"),_=t(p+"/BatchNorm/moving_mean",1,v+"/batch_norm_mean"),S=t(p+"/BatchNorm/moving_variance",1,v+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:x,batch_norm_offset:w,batch_norm_mean:_,batch_norm_variance:S},pointwise_conv:r("MobilenetV1",f,g)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function o(f,d){var p=t(f+"/weights",4,d+"/filters"),v=t(f+"/biases",1,d+"/bias");return{filters:p,bias:v}}function u(f){var d=o("Prediction/BoxPredictor_"+f+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+f+"/box_encoding_predictor"),p=o("Prediction/BoxPredictor_"+f+"/ClassPredictor","prediction_layer/box_predictor_"+f+"/class_predictor");return{box_encoding_predictor:d,class_predictor:p}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:u(0),box_predictor_1:u(1),box_predictor_2:u(2),box_predictor_3:u(3),box_predictor_4:u(4),box_predictor_5:u(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function Oq(n){var e=[],t=Tq(n,e),r=t.extractMobilenetV1Params,a=t.extractPredictionLayerParams,i=n["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Jv(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return qi(n,e),{params:o,paramMappings:e}}function Na(n,e,t){return Te(function(){var r=Jr(n,e.filters,t,"same");return r=ut(r,e.batch_norm_offset),zx(r,0,6)})}var Aq=.0010000000474974513;function kq(n,e,t){return Te(function(){var r=$v(n,e.filters,t,"same");return r=NA(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,Aq),zx(r,0,6)})}function Dq(n){return[2,4,6,12].some(function(e){return e===n})?[2,2]:[1,1]}function Nq(n,e){return Te(function(){var t=null,r=Na(n,e.conv_0,[2,2]),a=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(a.forEach(function(i,o){var u=o+1,c=Dq(u);r=kq(r,i.depthwise_conv,c),r=Na(r,i.pointwise_conv,[1,1]),u===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function Iq(n,e,t,r,a){var i=n.shape[0],o=Math.min(t,i),u=e.map(function(d,p){return{score:d,boxIndex:p}}).filter(function(d){return d.score>a}).sort(function(d,p){return p.score-d.score}),c=function(d){return d<=r?1:0},f=[];return u.forEach(function(d){if(!(f.length>=o)){for(var p=d.score,v=f.length-1;v>=0;--v){var g=Mq(n,d.boxIndex,f[v]);if(g!==0&&(d.score*=c(g),d.score<=a))break}p===d.score&&f.push(d.boxIndex)}}),f}function Mq(n,e,t){var r=n.arraySync(),a=Math.min(r[e][0],r[e][2]),i=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),u=Math.max(r[e][1],r[e][3]),c=Math.min(r[t][0],r[t][2]),f=Math.min(r[t][1],r[t][3]),d=Math.max(r[t][0],r[t][2]),p=Math.max(r[t][1],r[t][3]),v=(o-a)*(u-i),g=(d-c)*(p-f);if(v<=0||g<=0)return 0;var y=Math.max(a,c),x=Math.max(i,f),w=Math.min(o,d),_=Math.min(u,p),S=Math.max(w-y,0)*Math.max(_-x,0);return S/(v+g-S)}function Fq(n){var e=vn(Go(n,[1,0])),t=[gn(e[2],e[0]),gn(e[3],e[1])],r=[ut(e[0],ca(t[0],we(2))),ut(e[1],ca(t[1],we(2)))];return{sizes:t,centers:r}}function Pq(n,e){var t=Fq(n),r=t.sizes,a=t.centers,i=vn(Go(e,[1,0])),o=ca($n(Tb(ca(i[2],we(5))),r[0]),we(2)),u=ut($n(ca(i[0],we(10)),r[0]),a[0]),c=ca($n(Tb(ca(i[3],we(5))),r[1]),we(2)),f=ut($n(ca(i[1],we(10)),r[1]),a[1]);return Go(Nr([gn(u,o),gn(f,c),ut(u,o),ut(f,c)]),[1,0])}function Lq(n,e,t){return Te(function(){var r=n.shape[0],a=Pq(da(ml(t.extra_dim,[r,1,1]),[-1,4]),da(n,[-1,4]));a=da(a,[r,a.shape[0]/r,4]);var i=OA(Ya(e,[0,0,1],[-1,-1,-1])),o=Ya(i,[0,0,0],[-1,-1,1]);o=da(o,[r,o.shape[1]]);var u=vn(a),c=vn(o);return{boxes:u,scores:c}})}function Zu(n,e){return Te(function(){var t=n.shape[0],r=da(ga(n,e.box_encoding_predictor),[t,-1,1,4]),a=da(ga(n,e.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function Bq(n,e,t){return Te(function(){var r=Na(n,t.conv_0,[1,1]),a=Na(r,t.conv_1,[2,2]),i=Na(a,t.conv_2,[1,1]),o=Na(i,t.conv_3,[2,2]),u=Na(o,t.conv_4,[1,1]),c=Na(u,t.conv_5,[2,2]),f=Na(c,t.conv_6,[1,1]),d=Na(f,t.conv_7,[2,2]),p=Zu(e,t.box_predictor_0),v=Zu(n,t.box_predictor_1),g=Zu(a,t.box_predictor_2),y=Zu(o,t.box_predictor_3),x=Zu(c,t.box_predictor_4),w=Zu(d,t.box_predictor_5),_=pn([p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,x.boxPredictionEncoding,w.boxPredictionEncoding],1),S=pn([p.classPrediction,v.classPrediction,g.classPrediction,y.classPrediction,x.classPrediction,w.classPrediction],1);return{boxPredictions:_,classPredictions:S}})}var rm=function(){function n(e){var t=e===void 0?{}:e,r=t.minConfidence,a=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n}(),zk=function(n){Xe(e,n);function e(){return n.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Te(function(){var a=t.toBatchTensor(512,!1).toFloat(),i=gn($n(a,we(.007843137718737125)),we(1)),o=Nq(i,r.mobilenetv1),u=Bq(o.out,o.conv11,r.prediction_layer),c=u.boxPredictions,f=u.classPredictions;return Lq(c,f,r.output_layer)})},e.prototype.forward=function(t){return Pe(this,void 0,void 0,function(){var r;return Le(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,An(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return Le(this,function(k){switch(k.label){case 0:return a=new rm(r),i=a.maxResults,o=a.minConfidence,[4,An(t)];case 1:for(u=k.sent(),c=this.forwardInput(u),f=c.boxes,d=c.scores,p=f[0],v=d[0],g=1;g<f.length;g++)f[g].dispose(),d[g].dispose();return w=(x=Array).from,[4,v.data()];case 2:return y=w.apply(x,[k.sent()]),_=.5,S=Iq(p,y,i,_,o),C=u.getReshapedInputDimensions(0),R=u.inputSize,T=R/C.width,O=R/C.height,D=p.arraySync(),N=S.map(function(I){var B=[Math.max(0,D[I][0]),Math.min(1,D[I][2])].map(function(Z){return Z*O}),U=B[0],ee=B[1],te=[Math.max(0,D[I][1]),Math.min(1,D[I][3])].map(function(Z){return Z*T}),re=te[0],q=te[1];return new ai(y[I],new n1(re,U,q-re,ee-U),{height:u.getInputHeight(0),width:u.getInputWidth(0)})}),p.dispose(),v.dispose(),[2,N]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Oq(t)},e.prototype.extractParams=function(t){return Rq(t)},e}(ji);(function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(zk);var zq=.4,Uq=[new Et(.738768,.874946),new Et(2.42204,2.65704),new Et(4.30971,7.04493),new Et(10.246,4.59428),new Et(12.6868,11.8741)],Vq=[new Et(1.603231,2.094468),new Et(6.041143,7.080126),new Et(2.882459,3.518061),new Et(4.266906,5.178857),new Et(9.041765,10.66308)],jq=[117.001,114.697,97.404],qq="tiny_yolov2_model",Wq="tiny_yolov2_separable_conv_model",mp=function(n){return typeof n=="number"};function Hq(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!mp(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(e){return e||{}}).every(function(e){return mp(e.x)&&mp(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every(mp)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function d1(n){return Te(function(){var e=$n(n,we(.10000000149011612));return ut(qt(gn(n,e)),e)})}function mo(n,e){return Te(function(){var t=iu(n,[[0,0],[1,1],[1,1],[0,0]]);return t=Jr(t,e.conv.filters,[1,1],"valid"),t=gn(t,e.bn.sub),t=$n(t,e.bn.truediv),t=ut(t,e.conv.bias),d1(t)})}function go(n,e){return Te(function(){var t=iu(n,[[0,0],[1,1],[1,1],[0,0]]);return t=qx(t,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t=ut(t,e.bias),d1(t)})}function Gq(n,e){var t=nm(n,e);function r(o,u){var c=sn(n(o)),f=sn(n(o));return e.push({paramPath:u+"/sub"},{paramPath:u+"/truediv"}),{sub:c,truediv:f}}function a(o,u,c){var f=t(o,u,3,c+"/conv"),d=r(u,c+"/bn");return{conv:f,bn:d}}var i=l1(n,e);return{extractConvParams:t,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function Qq(n,e,t,r){var a=Wi(n),i=a.extractWeights,o=a.getRemainingWeights,u=[],c=Gq(i,u),f=c.extractConvParams,d=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams,v;if(e.withSeparableConvs){var g=r[0],y=r[1],x=r[2],w=r[3],_=r[4],S=r[5],C=r[6],R=r[7],T=r[8],O=e.isFirstLayerConv2d?f(g,y,3,"conv0"):p(g,y,"conv0"),D=p(y,x,"conv1"),N=p(x,w,"conv2"),k=p(w,_,"conv3"),I=p(_,S,"conv4"),B=p(S,C,"conv5"),U=R?p(C,R,"conv6"):void 0,ee=T?p(R,T,"conv7"):void 0,te=f(T||R||C,5*t,1,"conv8");v={conv0:O,conv1:D,conv2:N,conv3:k,conv4:I,conv5:B,conv6:U,conv7:ee,conv8:te}}else{var g=r[0],y=r[1],x=r[2],w=r[3],_=r[4],S=r[5],C=r[6],R=r[7],T=r[8],O=d(g,y,"conv0"),D=d(y,x,"conv1"),N=d(x,w,"conv2"),k=d(w,_,"conv3"),I=d(_,S,"conv4"),B=d(S,C,"conv5"),U=d(C,R,"conv6"),ee=d(R,T,"conv7"),te=f(T,5*t,1,"conv8");v={conv0:O,conv1:D,conv2:N,conv3:k,conv4:I,conv5:B,conv6:U,conv7:ee,conv8:te}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:v,paramMappings:u}}function $q(n,e){var t=ts(n,e);function r(u){var c=t(u+"/sub",1),f=t(u+"/truediv",1);return{sub:c,truediv:f}}function a(u){var c=t(u+"/filters",4),f=t(u+"/bias",1);return{filters:c,bias:f}}function i(u){var c=a(u+"/conv"),f=r(u+"/bn");return{conv:c,bn:f}}var o=c1(t);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function Kq(n,e){var t=[],r=$q(n,t),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,u;if(e.withSeparableConvs){var c=e.filterSizes&&e.filterSizes.length||9;u={conv0:e.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:a("conv8")}}else u={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return qi(n,t),{params:u,paramMappings:t}}var GC;(function(n){n[n.XS=224]="XS",n[n.SM=320]="SM",n[n.MD=416]="MD",n[n.LG=608]="LG"})(GC||(GC={}));var p1=function(){function n(e){var t=e===void 0?{}:e,r=t.inputSize,a=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n}(),Uk=function(n){Xe(e,n);function e(t){var r=n.call(this,"TinyYolov2")||this;return Hq(t),r._config=t,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,r){var a=mo(t,r.conv0);return a=En(a,[2,2],[2,2],"same"),a=mo(a,r.conv1),a=En(a,[2,2],[2,2],"same"),a=mo(a,r.conv2),a=En(a,[2,2],[2,2],"same"),a=mo(a,r.conv3),a=En(a,[2,2],[2,2],"same"),a=mo(a,r.conv4),a=En(a,[2,2],[2,2],"same"),a=mo(a,r.conv5),a=En(a,[2,2],[1,1],"same"),a=mo(a,r.conv6),a=mo(a,r.conv7),ga(a,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,r){var a=this.config.isFirstLayerConv2d?d1(ga(t,r.conv0,"valid",!1)):go(t,r.conv0);return a=En(a,[2,2],[2,2],"same"),a=go(a,r.conv1),a=En(a,[2,2],[2,2],"same"),a=go(a,r.conv2),a=En(a,[2,2],[2,2],"same"),a=go(a,r.conv3),a=En(a,[2,2],[2,2],"same"),a=go(a,r.conv4),a=En(a,[2,2],[2,2],"same"),a=go(a,r.conv5),a=En(a,[2,2],[1,1],"same"),a=r.conv6?go(a,r.conv6):a,a=r.conv7?go(a,r.conv7):a,ga(a,r.conv8,"valid",!1)},e.prototype.forwardInput=function(t,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Te(function(){var o=t.toBatchTensor(r,!1).toFloat();return o=a.config.meanRgb?Mh(o,a.config.meanRgb):o,o=o.div(we(256)),a.config.withSeparableConvs?a.runMobilenet(o,i):a.runTinyYolov2(o,i)})},e.prototype.forward=function(t,r){return Pe(this,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,An(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},e.prototype.detect=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S=this;return Le(this,function(C){switch(C.label){case 0:return a=new p1(r),i=a.inputSize,o=a.scoreThreshold,[4,An(t)];case 1:return u=C.sent(),[4,this.forwardInput(u,i)];case 2:return c=C.sent(),f=Te(function(){return vn(c)[0].expandDims()}),d={width:u.getInputWidth(0),height:u.getInputHeight(0)},[4,this.extractBoxes(f,u.getReshapedInputDimensions(0),o)];case 3:return p=C.sent(),c.dispose(),f.dispose(),v=p.map(function(R){return R.box}),g=p.map(function(R){return R.score}),y=p.map(function(R){return R.classScore}),x=p.map(function(R){return S.config.classes[R.label]}),w=fh(v.map(function(R){return R.rescale(i)}),g,this.config.iouThreshold,!0),_=w.map(function(R){return new hk(g[R],y[R],x[R],v[R],d)}),[2,_]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return Kq(t,this.config)},e.prototype.extractParams=function(t){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return Qq(t,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(t,r,a){return Pe(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N,k,I,B,U,ee,te,re,q,Z,G=this;return Le(this,function(Y){switch(Y.label){case 0:return i=r.width,o=r.height,u=Math.max(i,o),c=u/i,f=u/o,d=t.shape[1],p=this.config.anchors.length,v=Te(function(){var F=t.reshape([d,d,p,G.boxEncodingSize]),K=F.slice([0,0,0,0],[d,d,p,4]),se=F.slice([0,0,0,4],[d,d,p,1]),fe=G.withClassScores?Ui(F.slice([0,0,0,5],[d,d,p,G.config.classes.length]),3):we(0);return[K,se,fe]}),g=v[0],y=v[1],x=v[2],w=[],[4,y.array()];case 1:return _=Y.sent(),[4,g.array()];case 2:S=Y.sent(),C=0,Y.label=3;case 3:if(!(C<d))return[3,12];R=0,Y.label=4;case 4:if(!(R<d))return[3,11];T=0,Y.label=5;case 5:return T<p?(O=h0(_[C][R][T][0]),!a||O>a?(D=(R+h0(S[C][R][T][0]))/d*c,N=(C+h0(S[C][R][T][1]))/d*f,k=Math.exp(S[C][R][T][2])*this.config.anchors[T].x/d*c,I=Math.exp(S[C][R][T][3])*this.config.anchors[T].y/d*f,B=D-k/2,U=N-I/2,ee={row:C,col:R,anchor:T},this.withClassScores?[4,this.extractPredictedClass(x,ee)]:[3,7]):[3,9]):[3,10];case 6:return Z=Y.sent(),[3,8];case 7:Z={classScore:1,label:0},Y.label=8;case 8:te=Z,re=te.classScore,q=te.label,w.push(Hn({box:new em(B,U,B+k,U+I),score:O,classScore:O*re,label:q},ee)),Y.label=9;case 9:return T++,[3,5];case 10:return R++,[3,4];case 11:return C++,[3,3];case 12:return g.dispose(),y.dispose(),x.dispose(),[2,w]}})})},e.prototype.extractPredictedClass=function(t,r){return Pe(this,void 0,void 0,function(){var a,i,o,u;return Le(this,function(c){switch(c.label){case 0:return a=r.row,i=r.col,o=r.anchor,[4,t.array()];case 1:return u=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(f,d){return u[a][i][o][d]}).map(function(f,d){return{classScore:f,label:d}}).reduce(function(f,d){return f.classScore>d.classScore?f:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(ji),Xq=function(n){Xe(e,n);function e(t){t===void 0&&(t=!0);var r=this,a=Object.assign({},{withSeparableConvs:t,iouThreshold:zq,classes:["face"]},t?{anchors:Vq,meanRgb:jq}:{anchors:Uq,withClassScores:!0});return r=n.call(this,a)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Pe(this,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new ai(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Wq:qq},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(Uk),Yq=function(n){Xe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return e}(p1),Fh=function(){function n(){}return n.prototype.then=function(e){return Pe(this,void 0,void 0,function(){var t;return Le(this,function(r){switch(r.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Pe(this,void 0,void 0,function(){return Le(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},n}();function am(n,e,t,r,a){return a===void 0&&(a=function(i){var o=i.alignedRect;return o}),Pe(this,void 0,void 0,function(){var i,o,u,c,f;return Le(this,function(d){switch(d.label){case 0:return i=n.map(function(p){return aq(p)?a(p):p.detection}),u=r,u?[3,5]:e instanceof jt?[4,s1(e,i)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,o1(e,i)];case 3:c=d.sent(),d.label=4;case 4:u=c,d.label=5;case 5:return o=u,[4,t(o)];case 6:return f=d.sent(),o.forEach(function(p){return p instanceof jt&&p.dispose()}),[2,f]}})})}function v1(n,e,t,r,a){return Pe(this,void 0,void 0,function(){var i=this;return Le(this,function(o){return[2,am([n],e,function(u){return Pe(i,void 0,void 0,function(){return Le(this,function(c){return[2,t(u[0])]})})},r,a)]})})}function Zq(n){return Te(function(){return Nr(vn(n,3).reverse(),3)})}var gp=2,Tv=12;function Jq(n,e){var t=nm(n,e),r=u1(n,e);function a(f,d){var p=sn(n(f));return e.push({paramPath:d}),p}function i(f,d,p){p===void 0&&(p=!1);var v=t(f[0],f[1],3,d+"/conv1"),g=a(f[1],d+"/prelu1_alpha"),y=t(f[1],f[2],3,d+"/conv2"),x=a(f[2],d+"/prelu2_alpha"),w=t(f[2],f[3],p?2:3,d+"/conv3"),_=a(f[3],d+"/prelu3_alpha");return{conv1:v,prelu1_alpha:g,conv2:y,prelu2_alpha:x,conv3:w,prelu3_alpha:_}}function o(){var f=i([3,10,16,32],"pnet"),d=t(32,2,1,"pnet/conv4_1"),p=t(32,4,1,"pnet/conv4_2");return Hn(Hn({},f),{conv4_1:d,conv4_2:p})}function u(){var f=i([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),p=a(128,"rnet/prelu4_alpha"),v=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return Hn(Hn({},f),{fc1:d,prelu4_alpha:p,fc2_1:v,fc2_2:g})}function c(){var f=i([3,32,64,64],"onet"),d=t(64,128,2,"onet/conv4"),p=a(128,"onet/prelu4_alpha"),v=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),x=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return Hn(Hn({},f),{conv4:d,prelu4_alpha:p,fc1:v,prelu5_alpha:g,fc2_1:y,fc2_2:x,fc2_3:w})}return{extractPNetParams:o,extractRNetParams:u,extractONetParams:c}}function eW(n){var e=Wi(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=Jq(t,a),o=i.extractPNetParams,u=i.extractRNetParams,c=i.extractONetParams,f=o(),d=u(),p=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:f,rnet:d,onet:p},paramMappings:a}}function tW(n,e){var t=ts(n,e);function r(d){var p=t(d+"/weights",4,d+"/filters"),v=t(d+"/bias",1);return{filters:p,bias:v}}function a(d){var p=t(d+"/weights",2),v=t(d+"/bias",1);return{weights:p,bias:v}}function i(d){return t(d,1)}function o(d){var p=r(d+"/conv1"),v=i(d+"/prelu1_alpha"),g=r(d+"/conv2"),y=i(d+"/prelu2_alpha"),x=r(d+"/conv3"),w=i(d+"/prelu3_alpha");return{conv1:p,prelu1_alpha:v,conv2:g,prelu2_alpha:y,conv3:x,prelu3_alpha:w}}function u(){var d=o("pnet"),p=r("pnet/conv4_1"),v=r("pnet/conv4_2");return Hn(Hn({},d),{conv4_1:p,conv4_2:v})}function c(){var d=o("rnet"),p=a("rnet/fc1"),v=i("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),y=a("rnet/fc2_2");return Hn(Hn({},d),{fc1:p,prelu4_alpha:v,fc2_1:g,fc2_2:y})}function f(){var d=o("onet"),p=r("onet/conv4"),v=i("onet/prelu4_alpha"),g=a("onet/fc1"),y=i("onet/prelu5_alpha"),x=a("onet/fc2_1"),w=a("onet/fc2_2"),_=a("onet/fc2_3");return Hn(Hn({},d),{conv4:p,prelu4_alpha:v,fc1:g,prelu5_alpha:y,fc2_1:x,fc2_2:w,fc2_3:_})}return{extractPNetParams:u,extractRNetParams:c,extractONetParams:f}}function nW(n){var e=[],t=tW(n,e),r=t.extractPNetParams,a=t.extractRNetParams,i=t.extractONetParams,o=r(),u=a(),c=i();return qi(n,e),{params:{pnet:o,rnet:u,onet:c},paramMappings:e}}function Fb(n,e){var t=e[0],r=e[1];return{height:Math.floor(t*n),width:Math.floor(r*n)}}function rW(n,e,t){for(var r=t[0],a=t[1],i=Tv/n,o=[],u=Math.min(r,a)*i,c=0;u>=12;)o.push(i*Math.pow(e,c)),u=u*e,c+=1;return o}var m1=function(n){Xe(e,n);function e(t,r,a,i){return n.call(this,{left:t,top:r,right:a,bottom:i},!0)||this}return e}(Qo);function Vk(n){return Te(function(){return $n(gn(n,we(127.5)),we(.0078125))})}function _l(n,e){return Te(function(){return ut(qt(n),$n(e,xv(qt(xv(n)))))})}function g1(n,e,t){return t===void 0&&(t=!1),Te(function(){var r=ga(n,e.conv1,"valid");return r=_l(r,e.prelu1_alpha),r=En(r,t?[2,2]:[3,3],[2,2],"same"),r=ga(r,e.conv2,"valid"),r=_l(r,e.prelu2_alpha),r=t?r:En(r,[3,3],[2,2],"valid"),r=ga(r,e.conv3,"valid"),r=_l(r,e.prelu3_alpha),r})}function aW(n,e){return Te(function(){var t=g1(n,e,!0),r=ga(t,e.conv4_1,"valid"),a=Qr(Xv(r,3),3),i=Ui(gn(r,a),3),o=ga(t,e.conv4_2,"valid");return{prob:i,regions:o}})}function iW(n,e){return Te(function(){var t=Fb(e,n.shape.slice(1)),r=t.height,a=t.width,i=$x.resizeBilinear(n,[r,a]),o=Vk(i);return Go(o,[0,2,1,3])})}function oW(n,e,t,r){for(var a=[],i=n.arraySync(),o=0;o<n.shape[0];o++)for(var u=0;u<n.shape[1];u++)i[o][u]>=r&&a.push(new Et(u,o));var c=a.map(function(f){var d=new em(Math.round((f.y*gp+1)/t),Math.round((f.x*gp+1)/t),Math.round((f.y*gp+Tv)/t),Math.round((f.x*gp+Tv)/t)),p=i[f.y][f.x],v=e.arraySync(),g=new m1(v[f.y][f.x][0],v[f.y][f.x][1],v[f.y][f.x][2],v[f.y][f.x][3]);return{cell:d,score:p,region:g}});return c}function sW(n,e,t,r,a){a.stage1=[];var i=e.map(function(v){return Te(function(){var g={scale:v},y=iW(n,v),x=Date.now(),w=aW(y,r),_=w.prob,S=w.regions;g.pnet=Date.now()-x;var C=vn(vn(_,3)[1])[0],R=vn(S)[0];return{scoresTensor:C,regionsTensor:R,scale:v,statsForScale:g}})}),o=i.map(function(v){var g=v.scoresTensor,y=v.regionsTensor,x=v.scale,w=v.statsForScale,_=oW(g,y,x,t);if(g.dispose(),y.dispose(),!_.length)return a.stage1.push(w),[];var S=Date.now(),C=fh(_.map(function(R){return R.cell}),_.map(function(R){return R.score}),.5);return w.nms=Date.now()-S,w.numBoxes=C.length,a.stage1.push(w),C.map(function(R){return _[R]})}),u=o.reduce(function(v,g){return v.concat(g)},[]),c=[],f=[];if(u.length>0){var d=Date.now(),p=fh(u.map(function(v){return v.cell}),u.map(function(v){return v.score}),.7);a.stage1_nms=Date.now()-d,f=p.map(function(v){return u[v].score}),c=p.map(function(v){return u[v]}).map(function(v){var g=v.cell,y=v.region;return new em(g.left+y.left*g.width,g.top+y.top*g.height,g.right+y.right*g.width,g.bottom+y.bottom*g.height).toSquare().round()})}return{boxes:c,scores:f}}function jk(n,e,t){var r=t.width,a=t.height;return Pe(this,void 0,void 0,function(){var i,o,u,c=this;return Le(this,function(f){switch(f.label){case 0:return i=eu(n),[4,Promise.all(e.map(function(d){return Pe(c,void 0,void 0,function(){var p,v,g,y,x,w,_,S;return Le(this,function(C){return p=d.padAtBorders(n.height,n.width),v=p.y,g=p.ey,y=p.x,x=p.ex,w=y-1,_=v-1,S=i.getImageData(w,_,x-w,g-_),[2,Xn.isNodejs()?i1(S):createImageBitmap(S)]})})}))];case 1:return o=f.sent(),u=[],o.forEach(function(d){var p=tm({width:r,height:a}),v=eu(p);v.drawImage(d,0,0,r,a);for(var g=v.getImageData(0,0,r,a).data,y=[],x=0;x<g.length;x+=4)y.push(g[x+2]),y.push(g[x+1]),y.push(g[x]);u.push(y)}),[2,u.map(function(d){var p=Te(function(){var v=Go(hr(d,[1,r,a,3]),[0,2,1,3]).toFloat();return Vk(v)});return p})]}})})}function uW(n,e){return Te(function(){var t=g1(n,e),r=da(t,[t.shape[0],e.fc1.weights.shape[0]]),a=qa(r,e.fc1),i=_l(a,e.prelu4_alpha),o=qa(i,e.fc2_1),u=Qr(Xv(o,1),1),c=Ui(gn(o,u),1),f=qa(i,e.fc2_2),d=vn(c,1)[1];return{scores:d,regions:f}})}function lW(n,e,t,r,a){return Pe(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S;return Le(this,function(C){switch(C.label){case 0:return i=Date.now(),[4,jk(n,e,{width:24,height:24})];case 1:return o=C.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(R){var T=uW(R,r);return R.dispose(),T}),a.stage2_rnet=Date.now()-i,c=u.length>1?pn(u.map(function(R){return R.scores})):u[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[C.sent()]),c.dispose(),v=f.map(function(R,T){return{score:R,idx:T}}).filter(function(R){return R.score>t}).map(function(R){var T=R.idx;return T}),g=v.map(function(R){return e[R]}),y=v.map(function(R){return f[R]}),x=[],w=[],g.length>0&&(i=Date.now(),_=fh(g,y,.7),a.stage2_nms=Date.now()-i,S=_.map(function(R){var T=u[v[R]].regions.arraySync();return new m1(T[0][0],T[0][1],T[0][2],T[0][3])}),w=_.map(function(R){return y[R]}),x=_.map(function(R,T){return g[R].calibrate(S[T])})),u.forEach(function(R){R.regions.dispose(),R.scores.dispose()}),[2,{boxes:x,scores:w}]}})})}function cW(n,e){return Te(function(){var t=g1(n,e);t=En(t,[2,2],[2,2],"same"),t=ga(t,e.conv4,"valid"),t=_l(t,e.prelu4_alpha);var r=da(t,[t.shape[0],e.fc1.weights.shape[0]]),a=qa(r,e.fc1),i=_l(a,e.prelu5_alpha),o=qa(i,e.fc2_1),u=Qr(Xv(o,1),1),c=Ui(gn(o,u),1),f=qa(i,e.fc2_2),d=qa(i,e.fc2_3),p=vn(c,1)[1];return{scores:p,regions:f,points:d}})}function fW(n,e,t,r,a){return Pe(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S,C;return Le(this,function(R){switch(R.label){case 0:return i=Date.now(),[4,jk(n,e,{width:48,height:48})];case 1:return o=R.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(T){var O=cW(T,r);return T.dispose(),O}),a.stage3_onet=Date.now()-i,c=u.length>1?pn(u.map(function(T){return T.scores})):u[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[R.sent()]),c.dispose(),v=f.map(function(T,O){return{score:T,idx:O}}).filter(function(T){return T.score>t}).map(function(T){var O=T.idx;return O}),g=v.map(function(T){var O=u[T].regions.arraySync();return new m1(O[0][0],O[0][1],O[0][2],O[0][3])}),y=v.map(function(T,O){return e[T].calibrate(g[O])}),x=v.map(function(T){return f[T]}),w=[],_=[],S=[],y.length>0&&(i=Date.now(),C=fh(y,x,.7,!1),a.stage3_nms=Date.now()-i,w=C.map(function(T){return y[T]}),_=C.map(function(T){return x[T]}),S=C.map(function(T,O){return Array(5).fill(0).map(function(D,N){var k=u[T].points.arraySync();return new Et(k[0][N]*(w[O].width+1)+w[O].left,k[0][N+5]*(w[O].height+1)+w[O].top)})})),u.forEach(function(T){T.regions.dispose(),T.scores.dispose(),T.points.dispose()}),[2,{boxes:w,scores:_,points:S}]}})})}var hW=function(n){Xe(e,n);function e(){return n.call(this,"Mtcnn")||this}return e.prototype.load=function(t){return Pe(this,void 0,void 0,function(){return Le(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,t)]})})},e.prototype.loadFromDisk=function(t){return Pe(this,void 0,void 0,function(){return Le(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,t)]})})},e.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N;return Le(this,function(k){switch(k.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=t.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},u=Date.now(),c=Te(function(){return Zq(Qr(e1.fromPixels(i)).toFloat())}),f=function(I){return c.dispose(),o.total=Date.now()-u,I},d=c.shape.slice(1),p=d[0],v=d[1],g=new Bk(r),y=g.minFaceSize,x=g.scaleFactor,w=g.maxNumScales,_=g.scoreThresholds,S=g.scaleSteps,C=(S||rW(y,x,[p,v])).filter(function(I){var B=Fb(I,[p,v]);return Math.min(B.width,B.height)>Tv}).slice(0,w),o.scales=C,o.pyramid=C.map(function(I){return Fb(I,[p,v])}),R=Date.now(),[4,sW(c,C,_[0],a.pnet,o)];case 1:return T=k.sent(),o.total_stage1=Date.now()-R,T.boxes.length?(o.stage2_numInputBoxes=T.boxes.length,R=Date.now(),[4,lW(i,T.boxes,_[1],a.rnet,o)]):[2,f({results:[],stats:o})];case 2:return O=k.sent(),o.total_stage2=Date.now()-R,O.boxes.length?(o.stage3_numInputBoxes=O.boxes.length,R=Date.now(),[4,fW(i,O.boxes,_[2],a.onet,o)]):[2,f({results:[],stats:o})];case 3:return D=k.sent(),o.total_stage3=Date.now()-R,N=D.boxes.map(function(I,B){return f1(r1({},new ai(D.scores[B],new n1(I.left/v,I.top/p,I.width/v,I.height/p),{height:p,width:v})),new V6(D.points[B].map(function(U){return U.sub(new Et(I.left,I.top)).div(new Et(I.width,I.height))}),{width:I.width,height:I.height}))}),[2,f({results:N,stats:o})]}})})},e.prototype.forward=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,An(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},e.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,An(t)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return nW(t)},e.prototype.extractParams=function(t){return eW(t)},e}(ji),dW=.4,pW=[new Et(1.603231,2.094468),new Et(6.041143,7.080126),new Et(2.882459,3.518061),new Et(4.266906,5.178857),new Et(9.041765,10.66308)],vW=[117.001,114.697,97.404],mW=function(n){Xe(e,n);function e(){var t=this,r={withSeparableConvs:!0,iouThreshold:dW,classes:["face"],anchors:pW,meanRgb:vW,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=n.call(this,r)||this,t}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Pe(this,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new ai(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(Uk),Xr={ssdMobilenetv1:new zk,tinyFaceDetector:new mW,tinyYolov2:new Xq,mtcnn:new hW,faceLandmark68Net:new Nk,faceLandmark68TinyNet:new gq,faceRecognitionNet:new Sq,faceExpressionNet:new rq,ageGenderNet:new dq},qk=function(n){Xe(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(Fh),y1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,a=this;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,am(t,this.input,function(o){return Pe(a,void 0,void 0,function(){return Le(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return Xr.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){return Ak(o,r[u])})]}})})},e.prototype.withAgeAndGender=function(){return new _1(this,this.input)},e}(qk),b1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Le(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,v1(t,this.input,function(i){return Xr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,Ak(t,r)]}})})},e.prototype.withAgeAndGender=function(){return new E1(this,this.input)},e}(qk),x1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new S1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new R1(this,this.input)},e}(y1),w1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new C1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new T1(this,this.input)},e}(b1),Wk=function(n){Xe(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(Fh),_1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,a=this;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,am(t,this.input,function(o){return Pe(a,void 0,void 0,function(){return Le(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return Xr.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){var c=r[u],f=c.age,d=c.gender,p=c.genderProbability;return Pk(Lk(o,d,p),f)})]}})})},e.prototype.withFaceExpressions=function(){return new y1(this,this.input)},e}(Wk),E1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,a,i,o;return Le(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?[4,v1(t,this.input,function(c){return Xr.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=u.sent(),a=r.age,i=r.gender,o=r.genderProbability,[2,Pk(Lk(t,i,o),a)]}})})},e.prototype.withFaceExpressions=function(){return new b1(this,this.input)},e}(Wk),S1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new x1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new R1(this,this.input)},e}(_1),C1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new w1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new T1(this,this.input)},e}(E1),Hk=function(n){Xe(e,n);function e(t,r){var a=n.call(this)||this;return a.parentTask=t,a.input=r,a}return e}(Fh),R1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Le(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,am(t,this.input,function(i){return Promise.all(i.map(function(o){return Xr.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,o){return Fk(t[o],i)})]}})})},e.prototype.withFaceExpressions=function(){return new x1(this,this.input)},e.prototype.withAgeAndGender=function(){return new S1(this,this.input)},e}(Hk),T1=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Le(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,v1(t,this.input,function(i){return Xr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,Fk(t,r)]}})})},e.prototype.withFaceExpressions=function(){return new w1(this,this.input)},e.prototype.withAgeAndGender=function(){return new C1(this,this.input)},e}(Hk),Gk=function(n){Xe(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Xr.faceLandmark68TinyNet:Xr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(Fh),gW=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return Le(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return t=c.sent(),r=t.map(function(f){return f.detection}),this.input instanceof jt?[4,s1(this.input,r)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,o1(this.input,r)];case 4:i=c.sent(),c.label=5;case 5:return a=i,[4,Promise.all(a.map(function(f){return u.landmarkNet.detectLandmarks(f)}))];case 6:return o=c.sent(),a.forEach(function(f){return f instanceof jt&&f.dispose()}),[2,t.map(function(f,d){return f1(f,o[d])})]}})})},e.prototype.withFaceExpressions=function(){return new x1(this,this.input)},e.prototype.withAgeAndGender=function(){return new S1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new R1(this,this.input)},e}(Gk),yW=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,a,i,o;return Le(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?(r=t.detection,this.input instanceof jt?[4,s1(this.input,[r])]:[3,3]):[2];case 2:return i=u.sent(),[3,5];case 3:return[4,o1(this.input,[r])];case 4:i=u.sent(),u.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=u.sent(),a.forEach(function(c){return c instanceof jt&&c.dispose()}),[2,f1(t,o)]}})})},e.prototype.withFaceExpressions=function(){return new w1(this,this.input)},e.prototype.withAgeAndGender=function(){return new C1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new T1(this,this.input)},e}(Gk),Qk=function(n){Xe(e,n);function e(t,r){r===void 0&&(r=new rm);var a=n.call(this)||this;return a.input=t,a.options=r,a}return e}(Fh),$k=function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r,a,i;return Le(this,function(o){switch(o.label){case 0:return t=this,r=t.input,a=t.options,a instanceof Bk?[4,Xr.mtcnn.forward(r,a)]:[3,2];case 1:return[2,o.sent().map(function(u){return u.detection})];case 2:if(i=a instanceof Yq?function(u){return Xr.tinyFaceDetector.locateFaces(u,a)}:a instanceof rm?function(u){return Xr.ssdMobilenetv1.locateFaces(u,a)}:a instanceof p1?function(u){return Xr.tinyYolov2.locateFaces(u,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Pe(t,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(o){return r1({},o)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new gW(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new y1(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new _1(this.runAndExtendWithFaceDetections(),this.input)},e}(Qk);(function(n){Xe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var t,r;return Le(this,function(a){switch(a.label){case 0:return[4,new $k(this.input,this.options)];case 1:return t=a.sent(),r=t[0],t.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Pe(t,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?r1({},a):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new yW(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new b1(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new E1(this.runAndExtendWithFaceDetection(),this.input)},e})(Qk);function L9(n,e){return e===void 0&&(e=new rm),new $k(n,e)}function bW(n,e){if(n.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(n),r=Array.from(e);return Math.sqrt(t.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}(function(){function n(e,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(o){if(o instanceof dp)return o;if(o instanceof Float32Array)return new dp(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new dp(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(e,t){return t.map(function(r){return bW(r,e)}).reduce(function(r,a){return r+a},0)/(t.length||1)},n.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new VC(i,t.computeMeanDistance(e,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},n.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new VC("unknown",t.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},n.fromJSON=function(e){var t=e.labeledDescriptors.map(function(r){return dp.fromJSON(r)});return new n(t,e.distanceThreshold)},n})();var v0="Invariant Violation",QC=Object.setPrototypeOf,xW=QC===void 0?function(n,e){return n.__proto__=e,n}:QC,Kk=function(n){ei(e,n);function e(t){t===void 0&&(t=v0);var r=n.call(this,typeof t=="number"?v0+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return r.framesToPop=1,r.name=v0,xW(r,e.prototype),r}return e}(Error);function As(n,e){if(!n)throw new Kk(e)}var Xk=["debug","log","warn","error","silent"],wW=Xk.indexOf("log");function yp(n){return function(){if(Xk.indexOf(n)>=wW){var e=console[n]||console.log;return e.apply(console,arguments)}}}(function(n){n.debug=yp("debug"),n.log=yp("log"),n.warn=yp("warn"),n.error=yp("error")})(As||(As={}));var O1="3.13.5";function fa(n){try{return n()}catch{}}const Pb=fa(function(){return globalThis})||fa(function(){return window})||fa(function(){return self})||fa(function(){return global})||fa(function(){return fa.constructor("return this")()});var $C=new Map;function Lb(n){var e=$C.get(n)||1;return $C.set(n,e+1),"".concat(n,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function Yk(n,e){e===void 0&&(e=0);var t=Lb("stringifyForDisplay");return JSON.stringify(n,function(r,a){return a===void 0?t:a},e).split(JSON.stringify(t)).join("<undefined>")}function bp(n){return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(typeof e=="number"){var a=e;e=A1(a),e||(e=k1(a,t),t=[])}n.apply(void 0,[e].concat(t))}}var Ce=Object.assign(function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];e||As(e,A1(t,r)||k1(t,r))},{debug:bp(As.debug),log:bp(As.log),warn:bp(As.warn),error:bp(As.error)});function ar(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Kk(A1(n,e)||k1(n,e))}var KC=Symbol.for("ApolloErrorMessageHandler_"+O1);function Zk(n){if(typeof n=="string")return n;try{return Yk(n,2).slice(0,1e3)}catch{return"<non-serializable>"}}function A1(n,e){if(e===void 0&&(e=[]),!!n)return Pb[KC]&&Pb[KC](n,e.map(Zk))}function k1(n,e){if(e===void 0&&(e=[]),!!n)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:O1,message:n,args:e.map(Zk)})))}function Dp(n,e){if(!!!n)throw new Error(e)}function _W(n){return typeof n=="object"&&n!==null}function EW(n,e){if(!!!n)throw new Error("Unexpected invariant triggered.")}const SW=/\r\n|[\n\r]/g;function Bb(n,e){let t=0,r=1;for(const a of n.body.matchAll(SW)){if(typeof a.index=="number"||EW(!1),a.index>=e)break;t=a.index+a[0].length,r+=1}return{line:r,column:e+1-t}}function CW(n){return Jk(n.source,Bb(n.source,n.start))}function Jk(n,e){const t=n.locationOffset.column-1,r="".padStart(t)+n.body,a=e.line-1,i=n.locationOffset.line-1,o=e.line+i,u=e.line===1?t:0,c=e.column+u,f=`${n.name}:${o}:${c}
`,d=r.split(/\r\n|[\n\r]/g),p=d[a];if(p.length>120){const v=Math.floor(c/80),g=c%80,y=[];for(let x=0;x<p.length;x+=80)y.push(p.slice(x,x+80));return f+XC([[`${o} |`,y[0]],...y.slice(1,v+1).map(x=>["|",x]),["|","^".padStart(g)],["|",y[v+1]]])}return f+XC([[`${o-1} |`,d[a-1]],[`${o} |`,p],["|","^".padStart(c)],[`${o+1} |`,d[a+1]]])}function XC(n){const e=n.filter(([r,a])=>a!==void 0),t=Math.max(...e.map(([r])=>r.length));return e.map(([r,a])=>r.padStart(t)+(a?" "+a:"")).join(`
`)}function RW(n){const e=n[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:e}class D1 extends Error{constructor(e,...t){var r,a,i;const{nodes:o,source:u,positions:c,path:f,originalError:d,extensions:p}=RW(t);super(e),this.name="GraphQLError",this.path=f??void 0,this.originalError=d??void 0,this.nodes=YC(Array.isArray(o)?o:o?[o]:void 0);const v=YC((r=this.nodes)===null||r===void 0?void 0:r.map(y=>y.loc).filter(y=>y!=null));this.source=u??(v==null||(a=v[0])===null||a===void 0?void 0:a.source),this.positions=c??(v==null?void 0:v.map(y=>y.start)),this.locations=c&&u?c.map(y=>Bb(u,y)):v==null?void 0:v.map(y=>Bb(y.source,y.start));const g=_W(d==null?void 0:d.extensions)?d==null?void 0:d.extensions:void 0;this.extensions=(i=p??g)!==null&&i!==void 0?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),d!=null&&d.stack?Object.defineProperty(this,"stack",{value:d.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,D1):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+CW(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Jk(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function YC(n){return n===void 0||n.length===0?void 0:n}function Rn(n,e,t){return new D1(`Syntax Error: ${t}`,{source:n,positions:[e]})}class TW{constructor(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class eD{constructor(e,t,r,a,i,o){this.kind=e,this.start=t,this.end=r,this.line=a,this.column=i,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const tD={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},OW=new Set(Object.keys(tD));function ZC(n){const e=n==null?void 0:n.kind;return typeof e=="string"&&OW.has(e)}var ll;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(ll||(ll={}));var zb;(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(zb||(zb={}));var Ee;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Ee||(Ee={}));function Ub(n){return n===9||n===32}function hh(n){return n>=48&&n<=57}function nD(n){return n>=97&&n<=122||n>=65&&n<=90}function rD(n){return nD(n)||n===95}function AW(n){return nD(n)||hh(n)||n===95}function kW(n){var e;let t=Number.MAX_SAFE_INTEGER,r=null,a=-1;for(let o=0;o<n.length;++o){var i;const u=n[o],c=DW(u);c!==u.length&&(r=(i=r)!==null&&i!==void 0?i:o,a=o,o!==0&&c<t&&(t=c))}return n.map((o,u)=>u===0?o:o.slice(t)).slice((e=r)!==null&&e!==void 0?e:0,a+1)}function DW(n){let e=0;for(;e<n.length&&Ub(n.charCodeAt(e));)++e;return e}function NW(n,e){const t=n.replace(/"""/g,'\\"""'),r=t.split(/\r\n|[\n\r]/g),a=r.length===1,i=r.length>1&&r.slice(1).every(g=>g.length===0||Ub(g.charCodeAt(0))),o=t.endsWith('\\"""'),u=n.endsWith('"')&&!o,c=n.endsWith("\\"),f=u||c,d=!a||n.length>70||f||i||o;let p="";const v=a&&Ub(n.charCodeAt(0));return(d&&!v||i)&&(p+=`
`),p+=t,(d||f)&&(p+=`
`),'"""'+p+'"""'}var pe;(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"})(pe||(pe={}));class IW{constructor(e){const t=new eD(pe.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==pe.EOF)do if(e.next)e=e.next;else{const t=FW(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===pe.COMMENT);return e}}function MW(n){return n===pe.BANG||n===pe.DOLLAR||n===pe.AMP||n===pe.PAREN_L||n===pe.PAREN_R||n===pe.SPREAD||n===pe.COLON||n===pe.EQUALS||n===pe.AT||n===pe.BRACKET_L||n===pe.BRACKET_R||n===pe.BRACE_L||n===pe.PIPE||n===pe.BRACE_R}function lc(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function im(n,e){return aD(n.charCodeAt(e))&&iD(n.charCodeAt(e+1))}function aD(n){return n>=55296&&n<=56319}function iD(n){return n>=56320&&n<=57343}function tu(n,e){const t=n.source.body.codePointAt(e);if(t===void 0)return pe.EOF;if(t>=32&&t<=126){const r=String.fromCodePoint(t);return r==='"'?`'"'`:`"${r}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function an(n,e,t,r,a){const i=n.line,o=1+t-n.lineStart;return new eD(e,t,r,i,o,a)}function FW(n,e){const t=n.source.body,r=t.length;let a=e;for(;a<r;){const i=t.charCodeAt(a);switch(i){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++n.line,n.lineStart=a;continue;case 13:t.charCodeAt(a+1)===10?a+=2:++a,++n.line,n.lineStart=a;continue;case 35:return PW(n,a);case 33:return an(n,pe.BANG,a,a+1);case 36:return an(n,pe.DOLLAR,a,a+1);case 38:return an(n,pe.AMP,a,a+1);case 40:return an(n,pe.PAREN_L,a,a+1);case 41:return an(n,pe.PAREN_R,a,a+1);case 46:if(t.charCodeAt(a+1)===46&&t.charCodeAt(a+2)===46)return an(n,pe.SPREAD,a,a+3);break;case 58:return an(n,pe.COLON,a,a+1);case 61:return an(n,pe.EQUALS,a,a+1);case 64:return an(n,pe.AT,a,a+1);case 91:return an(n,pe.BRACKET_L,a,a+1);case 93:return an(n,pe.BRACKET_R,a,a+1);case 123:return an(n,pe.BRACE_L,a,a+1);case 124:return an(n,pe.PIPE,a,a+1);case 125:return an(n,pe.BRACE_R,a,a+1);case 34:return t.charCodeAt(a+1)===34&&t.charCodeAt(a+2)===34?jW(n,a):BW(n,a)}if(hh(i)||i===45)return LW(n,a,i);if(rD(i))return qW(n,a);throw Rn(n.source,a,i===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:lc(i)||im(t,a)?`Unexpected character: ${tu(n,a)}.`:`Invalid character: ${tu(n,a)}.`)}return an(n,pe.EOF,r,r)}function PW(n,e){const t=n.source.body,r=t.length;let a=e+1;for(;a<r;){const i=t.charCodeAt(a);if(i===10||i===13)break;if(lc(i))++a;else if(im(t,a))a+=2;else break}return an(n,pe.COMMENT,e,a,t.slice(e+1,a))}function LW(n,e,t){const r=n.source.body;let a=e,i=t,o=!1;if(i===45&&(i=r.charCodeAt(++a)),i===48){if(i=r.charCodeAt(++a),hh(i))throw Rn(n.source,a,`Invalid number, unexpected digit after 0: ${tu(n,a)}.`)}else a=m0(n,a,i),i=r.charCodeAt(a);if(i===46&&(o=!0,i=r.charCodeAt(++a),a=m0(n,a,i),i=r.charCodeAt(a)),(i===69||i===101)&&(o=!0,i=r.charCodeAt(++a),(i===43||i===45)&&(i=r.charCodeAt(++a)),a=m0(n,a,i),i=r.charCodeAt(a)),i===46||rD(i))throw Rn(n.source,a,`Invalid number, expected digit but got: ${tu(n,a)}.`);return an(n,o?pe.FLOAT:pe.INT,e,a,r.slice(e,a))}function m0(n,e,t){if(!hh(t))throw Rn(n.source,e,`Invalid number, expected digit but got: ${tu(n,e)}.`);const r=n.source.body;let a=e+1;for(;hh(r.charCodeAt(a));)++a;return a}function BW(n,e){const t=n.source.body,r=t.length;let a=e+1,i=a,o="";for(;a<r;){const u=t.charCodeAt(a);if(u===34)return o+=t.slice(i,a),an(n,pe.STRING,e,a+1,o);if(u===92){o+=t.slice(i,a);const c=t.charCodeAt(a+1)===117?t.charCodeAt(a+2)===123?zW(n,a):UW(n,a):VW(n,a);o+=c.value,a+=c.size,i=a;continue}if(u===10||u===13)break;if(lc(u))++a;else if(im(t,a))a+=2;else throw Rn(n.source,a,`Invalid character within String: ${tu(n,a)}.`)}throw Rn(n.source,a,"Unterminated string.")}function zW(n,e){const t=n.source.body;let r=0,a=3;for(;a<12;){const i=t.charCodeAt(e+a++);if(i===125){if(a<5||!lc(r))break;return{value:String.fromCodePoint(r),size:a}}if(r=r<<4|Af(i),r<0)break}throw Rn(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+a)}".`)}function UW(n,e){const t=n.source.body,r=JC(t,e+2);if(lc(r))return{value:String.fromCodePoint(r),size:6};if(aD(r)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const a=JC(t,e+8);if(iD(a))return{value:String.fromCodePoint(r,a),size:12}}throw Rn(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function JC(n,e){return Af(n.charCodeAt(e))<<12|Af(n.charCodeAt(e+1))<<8|Af(n.charCodeAt(e+2))<<4|Af(n.charCodeAt(e+3))}function Af(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function VW(n,e){const t=n.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Rn(n.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function jW(n,e){const t=n.source.body,r=t.length;let a=n.lineStart,i=e+3,o=i,u="";const c=[];for(;i<r;){const f=t.charCodeAt(i);if(f===34&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34){u+=t.slice(o,i),c.push(u);const d=an(n,pe.BLOCK_STRING,e,i+3,kW(c).join(`
`));return n.line+=c.length-1,n.lineStart=a,d}if(f===92&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34&&t.charCodeAt(i+3)===34){u+=t.slice(o,i),o=i+1,i+=4;continue}if(f===10||f===13){u+=t.slice(o,i),c.push(u),f===13&&t.charCodeAt(i+1)===10?i+=2:++i,u="",o=i,a=i;continue}if(lc(f))++i;else if(im(t,i))i+=2;else throw Rn(n.source,i,`Invalid character within String: ${tu(n,i)}.`)}throw Rn(n.source,i,"Unterminated string.")}function qW(n,e){const t=n.source.body,r=t.length;let a=e+1;for(;a<r;){const i=t.charCodeAt(a);if(AW(i))++a;else break}return an(n,pe.NAME,e,a,t.slice(e,a))}const WW=10,oD=2;function N1(n){return om(n,[])}function om(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return HW(n,e);default:return String(n)}}function HW(n,e){if(n===null)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(GW(n)){const r=n.toJSON();if(r!==n)return typeof r=="string"?r:om(r,t)}else if(Array.isArray(n))return $W(n,t);return QW(n,t)}function GW(n){return typeof n.toJSON=="function"}function QW(n,e){const t=Object.entries(n);return t.length===0?"{}":e.length>oD?"["+KW(n)+"]":"{ "+t.map(([a,i])=>a+": "+om(i,e)).join(", ")+" }"}function $W(n,e){if(n.length===0)return"[]";if(e.length>oD)return"[Array]";const t=Math.min(WW,n.length),r=n.length-t,a=[];for(let i=0;i<t;++i)a.push(om(n[i],e));return r===1?a.push("... 1 more item"):r>1&&a.push(`... ${r} more items`),"["+a.join(", ")+"]"}function KW(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof n.constructor=="function"){const t=n.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const XW=globalThis.process&&!0,YW=XW?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var r;const a=t.prototype[Symbol.toStringTag],i=Symbol.toStringTag in e?e[Symbol.toStringTag]:(r=e.constructor)===null||r===void 0?void 0:r.name;if(a===i){const o=N1(e);throw new Error(`Cannot use ${a} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class sD{constructor(e,t="GraphQL request",r={line:1,column:1}){typeof e=="string"||Dp(!1,`Body must be a string. Received: ${N1(e)}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||Dp(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Dp(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function ZW(n){return YW(n,sD)}function JW(n,e){const t=new eH(n,e),r=t.parseDocument();return Object.defineProperty(r,"tokenCount",{enumerable:!1,value:t.tokenCount}),r}class eH{constructor(e,t={}){const r=ZW(e)?e:new sD(e);this._lexer=new IW(r),this._options=t,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(pe.NAME);return this.node(e,{kind:Ee.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:Ee.DOCUMENT,definitions:this.many(pe.SOF,this.parseDefinition,pe.EOF)})}parseDefinition(){if(this.peek(pe.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===pe.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Rn(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(pe.BRACE_L))return this.node(e,{kind:Ee.OPERATION_DEFINITION,operation:ll.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let r;return this.peek(pe.NAME)&&(r=this.parseName()),this.node(e,{kind:Ee.OPERATION_DEFINITION,operation:t,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(pe.NAME);switch(e.value){case"query":return ll.QUERY;case"mutation":return ll.MUTATION;case"subscription":return ll.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(pe.PAREN_L,this.parseVariableDefinition,pe.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Ee.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(pe.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(pe.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(pe.DOLLAR),this.node(e,{kind:Ee.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Ee.SELECTION_SET,selections:this.many(pe.BRACE_L,this.parseSelection,pe.BRACE_R)})}parseSelection(){return this.peek(pe.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let r,a;return this.expectOptionalToken(pe.COLON)?(r=t,a=this.parseName()):a=t,this.node(e,{kind:Ee.FIELD,alias:r,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(pe.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(pe.PAREN_L,t,pe.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,r=this.parseName();return this.expectToken(pe.COLON),this.node(t,{kind:Ee.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(pe.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(pe.NAME)?this.node(e,{kind:Ee.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:Ee.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:Ee.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:Ee.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case pe.BRACKET_L:return this.parseList(e);case pe.BRACE_L:return this.parseObject(e);case pe.INT:return this.advanceLexer(),this.node(t,{kind:Ee.INT,value:t.value});case pe.FLOAT:return this.advanceLexer(),this.node(t,{kind:Ee.FLOAT,value:t.value});case pe.STRING:case pe.BLOCK_STRING:return this.parseStringLiteral();case pe.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:Ee.BOOLEAN,value:!0});case"false":return this.node(t,{kind:Ee.BOOLEAN,value:!1});case"null":return this.node(t,{kind:Ee.NULL});default:return this.node(t,{kind:Ee.ENUM,value:t.value})}case pe.DOLLAR:if(e)if(this.expectToken(pe.DOLLAR),this._lexer.token.kind===pe.NAME){const r=this._lexer.token.value;throw Rn(this._lexer.source,t.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:Ee.STRING,value:e.value,block:e.kind===pe.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:Ee.LIST,values:this.any(pe.BRACKET_L,t,pe.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:Ee.OBJECT,fields:this.any(pe.BRACE_L,t,pe.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,r=this.parseName();return this.expectToken(pe.COLON),this.node(t,{kind:Ee.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(pe.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(pe.AT),this.node(t,{kind:Ee.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(pe.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(pe.BRACKET_R),t=this.node(e,{kind:Ee.LIST_TYPE,type:r})}else t=this.parseNamedType();return this.expectOptionalToken(pe.BANG)?this.node(e,{kind:Ee.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:Ee.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(pe.STRING)||this.peek(pe.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),a=this.many(pe.BRACE_L,this.parseOperationTypeDefinition,pe.BRACE_R);return this.node(e,{kind:Ee.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:a})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(pe.COLON);const r=this.parseNamedType();return this.node(e,{kind:Ee.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),a=this.parseConstDirectives();return this.node(e,{kind:Ee.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:a})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Ee.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:a,directives:i,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(pe.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(pe.BRACE_L,this.parseFieldDefinition,pe.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),a=this.parseArgumentDefs();this.expectToken(pe.COLON);const i=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:Ee.FIELD_DEFINITION,description:t,name:r,arguments:a,type:i,directives:o})}parseArgumentDefs(){return this.optionalMany(pe.PAREN_L,this.parseInputValueDef,pe.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName();this.expectToken(pe.COLON);const a=this.parseTypeReference();let i;this.expectOptionalToken(pe.EQUALS)&&(i=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:Ee.INPUT_VALUE_DEFINITION,description:t,name:r,type:a,defaultValue:i,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Ee.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:a,directives:i,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:Ee.UNION_TYPE_DEFINITION,description:t,name:r,directives:a,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(pe.EQUALS)?this.delimitedMany(pe.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:Ee.ENUM_TYPE_DEFINITION,description:t,name:r,directives:a,values:i})}parseEnumValuesDefinition(){return this.optionalMany(pe.BRACE_L,this.parseEnumValueDefinition,pe.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),a=this.parseConstDirectives();return this.node(e,{kind:Ee.ENUM_VALUE_DEFINITION,description:t,name:r,directives:a})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Rn(this._lexer.source,this._lexer.token.start,`${xp(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:Ee.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:a,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(pe.BRACE_L,this.parseInputValueDef,pe.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===pe.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),r=this.optionalMany(pe.BRACE_L,this.parseOperationTypeDefinition,pe.BRACE_R);if(t.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:Ee.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(e,{kind:Ee.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Ee.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:a,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Ee.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:a,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseUnionMemberTypes();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Ee.UNION_TYPE_EXTENSION,name:t,directives:r,types:a})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseEnumValuesDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Ee.ENUM_TYPE_EXTENSION,name:t,directives:r,values:a})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseInputFieldsDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Ee.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:a})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(pe.AT);const r=this.parseName(),a=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:Ee.DIRECTIVE_DEFINITION,description:t,name:r,arguments:a,repeatable:i,locations:o})}parseDirectiveLocations(){return this.delimitedMany(pe.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(zb,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new TW(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw Rn(this._lexer.source,t.start,`Expected ${uD(e)}, found ${xp(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===pe.NAME&&t.value===e)this.advanceLexer();else throw Rn(this._lexer.source,t.start,`Expected "${e}", found ${xp(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===pe.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return Rn(this._lexer.source,t.start,`Unexpected ${xp(t)}.`)}any(e,t,r){this.expectToken(e);const a=[];for(;!this.expectOptionalToken(r);)a.push(t.call(this));return a}optionalMany(e,t,r){if(this.expectOptionalToken(e)){const a=[];do a.push(t.call(this));while(!this.expectOptionalToken(r));return a}return[]}many(e,t,r){this.expectToken(e);const a=[];do a.push(t.call(this));while(!this.expectOptionalToken(r));return a}delimitedMany(e,t){this.expectOptionalToken(e);const r=[];do r.push(t.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==pe.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw Rn(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function xp(n){const e=n.value;return uD(n.kind)+(e!=null?` "${e}"`:"")}function uD(n){return MW(n)?`"${n}"`:n}function tH(n){return`"${n.replace(nH,rH)}"`}const nH=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function rH(n){return aH[n.charCodeAt(0)]}const aH=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],sm=Object.freeze({});function xa(n,e,t=tD){const r=new Map;for(const _ of Object.values(Ee))r.set(_,iH(e,_));let a,i=Array.isArray(n),o=[n],u=-1,c=[],f=n,d,p;const v=[],g=[];do{u++;const _=u===o.length,S=_&&c.length!==0;if(_){if(d=g.length===0?void 0:v[v.length-1],f=p,p=g.pop(),S)if(i){f=f.slice();let R=0;for(const[T,O]of c){const D=T-R;O===null?(f.splice(D,1),R++):f[D]=O}}else{f=Object.defineProperties({},Object.getOwnPropertyDescriptors(f));for(const[R,T]of c)f[R]=T}u=a.index,o=a.keys,c=a.edits,i=a.inArray,a=a.prev}else if(p){if(d=i?u:o[u],f=p[d],f==null)continue;v.push(d)}let C;if(!Array.isArray(f)){var y,x;ZC(f)||Dp(!1,`Invalid AST Node: ${N1(f)}.`);const R=_?(y=r.get(f.kind))===null||y===void 0?void 0:y.leave:(x=r.get(f.kind))===null||x===void 0?void 0:x.enter;if(C=R==null?void 0:R.call(e,f,d,p,v,g),C===sm)break;if(C===!1){if(!_){v.pop();continue}}else if(C!==void 0&&(c.push([d,C]),!_))if(ZC(C))f=C;else{v.pop();continue}}if(C===void 0&&S&&c.push([d,f]),_)v.pop();else{var w;a={inArray:i,index:u,keys:o,edits:c,prev:a},i=Array.isArray(f),o=i?f:(w=t[f.kind])!==null&&w!==void 0?w:[],u=-1,c=[],p&&g.push(p),p=f}}while(a!==void 0);return c.length!==0?c[c.length-1][1]:n}function iH(n,e){const t=n[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function oH(n){return xa(n,uH)}const sH=80,uH={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>Ne(n.definitions,`

`)},OperationDefinition:{leave(n){const e=ft("(",Ne(n.variableDefinitions,", "),")"),t=Ne([n.operation,Ne([n.name,e]),Ne(n.directives," ")]," ");return(t==="query"?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:r})=>n+": "+e+ft(" = ",t)+ft(" ",Ne(r," "))},SelectionSet:{leave:({selections:n})=>oa(n)},Field:{leave({alias:n,name:e,arguments:t,directives:r,selectionSet:a}){const i=ft("",n,": ")+e;let o=i+ft("(",Ne(t,", "),")");return o.length>sH&&(o=i+ft(`(
`,Np(Ne(t,`
`)),`
)`)),Ne([o,Ne(r," "),a]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+ft(" ",Ne(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>Ne(["...",ft("on ",n),Ne(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:r,selectionSet:a})=>`fragment ${n}${ft("(",Ne(t,", "),")")} on ${e} ${ft("",Ne(r," ")," ")}`+a},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?NW(n):tH(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+Ne(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+Ne(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+ft("(",Ne(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>ft("",n,`
`)+Ne(["schema",Ne(e," "),oa(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>ft("",n,`
`)+Ne(["scalar",e,Ne(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:a})=>ft("",n,`
`)+Ne(["type",e,ft("implements ",Ne(t," & ")),Ne(r," "),oa(a)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:r,directives:a})=>ft("",n,`
`)+e+(eR(t)?ft(`(
`,Np(Ne(t,`
`)),`
)`):ft("(",Ne(t,", "),")"))+": "+r+ft(" ",Ne(a," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:r,directives:a})=>ft("",n,`
`)+Ne([e+": "+t,ft("= ",r),Ne(a," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:a})=>ft("",n,`
`)+Ne(["interface",e,ft("implements ",Ne(t," & ")),Ne(r," "),oa(a)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:r})=>ft("",n,`
`)+Ne(["union",e,Ne(t," "),ft("= ",Ne(r," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:r})=>ft("",n,`
`)+Ne(["enum",e,Ne(t," "),oa(r)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>ft("",n,`
`)+Ne([e,Ne(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:r})=>ft("",n,`
`)+Ne(["input",e,Ne(t," "),oa(r)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:r,locations:a})=>ft("",n,`
`)+"directive @"+e+(eR(t)?ft(`(
`,Np(Ne(t,`
`)),`
)`):ft("(",Ne(t,", "),")"))+(r?" repeatable":"")+" on "+Ne(a," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>Ne(["extend schema",Ne(n," "),oa(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>Ne(["extend scalar",n,Ne(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>Ne(["extend type",n,ft("implements ",Ne(e," & ")),Ne(t," "),oa(r)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>Ne(["extend interface",n,ft("implements ",Ne(e," & ")),Ne(t," "),oa(r)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>Ne(["extend union",n,Ne(e," "),ft("= ",Ne(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>Ne(["extend enum",n,Ne(e," "),oa(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>Ne(["extend input",n,Ne(e," "),oa(t)]," ")}};function Ne(n,e=""){var t;return(t=n==null?void 0:n.filter(r=>r).join(e))!==null&&t!==void 0?t:""}function oa(n){return ft(`{
`,Np(Ne(n,`
`)),`
}`)}function ft(n,e,t=""){return e!=null&&e!==""?n+e+t:""}function Np(n){return ft("  ",n.replace(/\n/g,`
  `))}function eR(n){var e;return(e=n==null?void 0:n.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function tR(n){return n.kind===Ee.FIELD||n.kind===Ee.FRAGMENT_SPREAD||n.kind===Ee.INLINE_FRAGMENT}function Ph(n,e){var t=n.directives;return!t||!t.length?!0:fH(t).every(function(r){var a=r.directive,i=r.ifArgument,o=!1;return i.value.kind==="Variable"?(o=e&&e[i.value.name.value],Ce(o!==void 0,78,a.name.value)):o=i.value.value,a.name.value==="skip"?!o:o})}function dh(n,e,t){var r=new Set(n),a=r.size;return xa(e,{Directive:function(i){if(r.delete(i.name.value)&&(!t||!r.size))return sm}}),t?!r.size:r.size<a}function lH(n){return n&&dh(["client","export"],n,!0)}function cH(n){var e=n.name.value;return e==="skip"||e==="include"}function fH(n){var e=[];return n&&n.length&&n.forEach(function(t){if(cH(t)){var r=t.arguments,a=t.name.value;Ce(r&&r.length===1,79,a);var i=r[0];Ce(i.name&&i.name.value==="if",80,a);var o=i.value;Ce(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),81,a),e.push({directive:t,ifArgument:i})}}),e}function hH(n){var e,t,r=(e=n.directives)===null||e===void 0?void 0:e.find(function(i){var o=i.name;return o.value==="unmask"});if(!r)return"mask";var a=(t=r.arguments)===null||t===void 0?void 0:t.find(function(i){var o=i.name;return o.value==="mode"});return globalThis.__DEV__!==!1&&a&&(a.value.kind===Ee.VARIABLE?globalThis.__DEV__!==!1&&Ce.warn(82):a.value.kind!==Ee.STRING?globalThis.__DEV__!==!1&&Ce.warn(83):a.value.value!=="migrate"&&globalThis.__DEV__!==!1&&Ce.warn(84,a.value.value)),a&&"value"in a.value&&a.value.value==="migrate"?"migrate":"unmask"}const dH=()=>Object.create(null),{forEach:pH,slice:nR}=Array.prototype,{hasOwnProperty:vH}=Object.prototype;class Hi{constructor(e=!0,t=dH){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return pH.call(e,r=>t=t.getChildTrie(r)),vH.call(t,"data")?t.data:t.data=this.makeData(nR.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,a=e.length;t&&r<a;++r){const i=t.mapFor(e[r],!1);t=i&&i.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const r=e[0],a=this.mapFor(r,!1),i=a&&a.get(r);i&&(t=i.removeArray(nR.call(e,1)),!i.data&&!i.weak&&!(i.strong&&i.strong.size)&&a.delete(r))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let r=t.get(e);return r||t.set(e,r=new Hi(this.weakness,this.makeData)),r}mapFor(e,t){return this.weakness&&mH(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function mH(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}var lD=fa(function(){return navigator.product})=="ReactNative",lu=typeof WeakMap=="function"&&!(lD&&!global.HermesInternal),I1=typeof WeakSet=="function",M1=typeof Symbol=="function"&&typeof Symbol.for=="function",um=M1&&Symbol.asyncIterator,cD=typeof fa(function(){return window.document.createElement})=="function",gH=fa(function(){return navigator.userAgent.indexOf("jsdom")>=0})||!1,yH=(cD||lD)&&!gH;function Yt(n){return n!==null&&typeof n=="object"}function bH(n,e){var t=e,r=[];n.definitions.forEach(function(i){if(i.kind==="OperationDefinition")throw ar(85,i.operation,i.name?" named '".concat(i.name.value,"'"):"");i.kind==="FragmentDefinition"&&r.push(i)}),typeof t>"u"&&(Ce(r.length===1,86,r.length),t=r[0].name.value);var a=$($({},n),{definitions:dn([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],n.definitions,!0)});return a}function cc(n){n===void 0&&(n=[]);var e={};return n.forEach(function(t){e[t.name.value]=t}),e}function lm(n,e){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":{var t=n.name.value;if(typeof e=="function")return e(t);var r=e&&e[t];return Ce(r,87,t),r||null}default:return null}}function xH(n){var e=!0;return xa(n,{FragmentSpread:function(t){if(e=!!t.directives&&t.directives.some(function(r){return r.name.value==="unmask"}),!e)return sm}}),e}function wH(){}class Vb{constructor(e=1/0,t=wH){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:a}=t;a&&(a.older=r),r&&(r.newer=a),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=a)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1}}function jb(){}const _H=jb,EH=typeof WeakRef<"u"?WeakRef:function(n){return{deref:()=>n}},SH=typeof WeakMap<"u"?WeakMap:Map,CH=typeof FinalizationRegistry<"u"?FinalizationRegistry:function(){return{register:jb,unregister:jb}},RH=10024;class Ov{constructor(e=1/0,t=_H){this.max=e,this.dispose=t,this.map=new SH,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const r=this.unfinalizedNodes.values();for(let a=0;a<RH;a++){const i=r.next().value;if(!i)break;this.unfinalizedNodes.delete(i);const o=i.key;delete i.key,i.keyRef=new EH(o),this.registry.register(o,i,i)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new CH(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:a}=t;a&&(a.older=r),r&&(r.newer=a),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=a)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.scheduleFinalization(r),this.map.set(e,r),this.size++,r.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return t?(this.deleteNode(t),!0):!1}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}var g0=new WeakSet;function fD(n){n.size<=(n.max||-1)||g0.has(n)||(g0.add(n),setTimeout(function(){n.clean(),g0.delete(n)},100))}var F1=function(n,e){var t=new Ov(n,e);return t.set=function(r,a){var i=Ov.prototype.set.call(this,r,a);return fD(this),i},t},TH=function(n,e){var t=new Vb(n,e);return t.set=function(r,a){var i=Vb.prototype.set.call(this,r,a);return fD(this),i},t},OH=Symbol.for("apollo.cacheSize"),Za=$({},Pb[OH]),Ts={};function P1(n,e){Ts[n]=e}var AH=globalThis.__DEV__!==!1?IH:void 0,kH=globalThis.__DEV__!==!1?MH:void 0,DH=globalThis.__DEV__!==!1?hD:void 0;function NH(){var n={parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(n).map(function(e){var t=e[0],r=e[1];return[t,Za[t]||r]}))}function IH(){var n,e,t,r,a;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:NH(),sizes:$({print:(n=Ts.print)===null||n===void 0?void 0:n.call(Ts),parser:(e=Ts.parser)===null||e===void 0?void 0:e.call(Ts),canonicalStringify:(t=Ts.canonicalStringify)===null||t===void 0?void 0:t.call(Ts),links:Wb(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:pD(this.queryManager.documentTransform)}},(a=(r=this.cache).getMemoryInternals)===null||a===void 0?void 0:a.call(r))}}function hD(){return{cache:{fragmentQueryDocuments:Eo(this.getFragmentDoc)}}}function MH(){var n=this.config.fragments;return $($({},hD.apply(this)),{addTypenameDocumentTransform:pD(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:Eo(this.storeReader.executeSelectionSet),executeSubSelectedArray:Eo(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:Eo(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:Eo(n==null?void 0:n.findFragmentSpreads),lookup:Eo(n==null?void 0:n.lookup),transform:Eo(n==null?void 0:n.transform)}})}function FH(n){return!!n&&"dirtyKey"in n}function Eo(n){return FH(n)?n.size:void 0}function dD(n){return n!=null}function pD(n){return qb(n).map(function(e){return{cache:e}})}function qb(n){return n?dn(dn([Eo(n==null?void 0:n.performWork)],qb(n==null?void 0:n.left),!0),qb(n==null?void 0:n.right),!0).filter(dD):[]}function Wb(n){var e;return n?dn(dn([(e=n==null?void 0:n.getMemoryInternals)===null||e===void 0?void 0:e.call(n)],Wb(n==null?void 0:n.left),!0),Wb(n==null?void 0:n.right),!0).filter(dD):[]}var Uo=Object.assign(function(e){return JSON.stringify(e,PH)},{reset:function(){cl=new TH(Za.canonicalStringify||1e3)}});globalThis.__DEV__!==!1&&P1("canonicalStringify",function(){return cl.size});var cl;Uo.reset();function PH(n,e){if(e&&typeof e=="object"){var t=Object.getPrototypeOf(e);if(t===Object.prototype||t===null){var r=Object.keys(e);if(r.every(LH))return e;var a=JSON.stringify(r),i=cl.get(a);if(!i){r.sort();var o=JSON.stringify(r);i=cl.get(o)||r,cl.set(a,i),cl.set(o,i)}var u=Object.create(t);return i.forEach(function(c){u[c]=e[c]}),u}}return e}function LH(n,e,t){return e===0||t[e-1]<=n}function El(n){return{__ref:String(n)}}function Rt(n){return!!(n&&typeof n=="object"&&typeof n.__ref=="string")}function BH(n){return Yt(n)&&n.kind==="Document"&&Array.isArray(n.definitions)}function zH(n){return n.kind==="StringValue"}function UH(n){return n.kind==="BooleanValue"}function VH(n){return n.kind==="IntValue"}function jH(n){return n.kind==="FloatValue"}function qH(n){return n.kind==="Variable"}function WH(n){return n.kind==="ObjectValue"}function HH(n){return n.kind==="ListValue"}function GH(n){return n.kind==="EnumValue"}function QH(n){return n.kind==="NullValue"}function Jl(n,e,t,r){if(VH(t)||jH(t))n[e.value]=Number(t.value);else if(UH(t)||zH(t))n[e.value]=t.value;else if(WH(t)){var a={};t.fields.map(function(o){return Jl(a,o.name,o.value,r)}),n[e.value]=a}else if(qH(t)){var i=(r||{})[t.name.value];n[e.value]=i}else if(HH(t))n[e.value]=t.values.map(function(o){var u={};return Jl(u,e,o,r),u[e.value]});else if(GH(t))n[e.value]=t.value;else if(QH(t))n[e.value]=null;else throw ar(96,e.value,t.kind)}function $H(n,e){var t=null;n.directives&&(t={},n.directives.forEach(function(a){t[a.name.value]={},a.arguments&&a.arguments.forEach(function(i){var o=i.name,u=i.value;return Jl(t[a.name.value],o,u,e)})}));var r=null;return n.arguments&&n.arguments.length&&(r={},n.arguments.forEach(function(a){var i=a.name,o=a.value;return Jl(r,i,o,e)})),vD(n.name.value,r,t)}var KH=["connection","include","skip","client","rest","export","nonreactive"],xf=Uo,vD=Object.assign(function(n,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var r=t.connection.filter?t.connection.filter:[];r.sort();var a={};return r.forEach(function(u){a[u]=e[u]}),"".concat(t.connection.key,"(").concat(xf(a),")")}else return t.connection.key;var i=n;if(e){var o=xf(e);i+="(".concat(o,")")}return t&&Object.keys(t).forEach(function(u){KH.indexOf(u)===-1&&(t[u]&&Object.keys(t[u]).length?i+="@".concat(u,"(").concat(xf(t[u]),")"):i+="@".concat(u))}),i},{setStringify:function(n){var e=xf;return xf=n,e}});function cm(n,e){if(n.arguments&&n.arguments.length){var t={};return n.arguments.forEach(function(r){var a=r.name,i=r.value;return Jl(t,a,i,e)}),t}return null}function Li(n){return n.alias?n.alias.value:n.name.value}function Hb(n,e,t){for(var r,a=0,i=e.selections;a<i.length;a++){var o=i[a];if($o(o)){if(o.name.value==="__typename")return n[Li(o)]}else r?r.push(o):r=[o]}if(typeof n.__typename=="string")return n.__typename;if(r)for(var u=0,c=r;u<c.length;u++){var o=c[u],f=Hb(n,lm(o,t).selectionSet,t);if(typeof f=="string")return f}}function $o(n){return n.kind==="Field"}function XH(n){return n.kind==="InlineFragment"}function fc(n){Ce(n&&n.kind==="Document",88);var e=n.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw ar(89,t.kind);return t});return Ce(e.length<=1,90,e.length),n}function nu(n){return fc(n),n.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function kf(n){return n.definitions.filter(function(e){return e.kind==="OperationDefinition"&&!!e.name}).map(function(e){return e.name.value})[0]||null}function hc(n){return n.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function mD(n){var e=nu(n);return Ce(e&&e.operation==="query",91),e}function gD(n){Ce(n.kind==="Document",92),Ce(n.definitions.length<=1,93);var e=n.definitions[0];return Ce(e.kind==="FragmentDefinition",94),e}function Lh(n){fc(n);for(var e,t=0,r=n.definitions;t<r.length;t++){var a=r[t];if(a.kind==="OperationDefinition"){var i=a.operation;if(i==="query"||i==="mutation"||i==="subscription")return a}a.kind==="FragmentDefinition"&&!e&&(e=a)}if(e)return e;throw ar(95)}function L1(n){var e=Object.create(null),t=n&&n.variableDefinitions;return t&&t.length&&t.forEach(function(r){r.defaultValue&&Jl(e,r.variable.name,r.defaultValue)}),e}let Pn=null;const rR={};let YH=1;const ZH=()=>class{constructor(){this.id=["slot",YH++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=Pn;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===rR)break;return e!==Pn&&(Pn.slots[this.id]=t),!0}return Pn&&(Pn.slots[this.id]=rR),!1}getValue(){if(this.hasValue())return Pn.slots[this.id]}withValue(e,t,r,a){const i={__proto__:null,[this.id]:e},o=Pn;Pn={parent:o,slots:i};try{return t.apply(a,r)}finally{Pn=o}}static bind(e){const t=Pn;return function(){const r=Pn;try{return Pn=t,e.apply(this,arguments)}finally{Pn=r}}}static noContext(e,t,r){if(Pn){const a=Pn;try{return Pn=null,e.apply(r,t)}finally{Pn=a}}else return e.apply(r,t)}};function aR(n){try{return n()}catch{}}const y0="@wry/context:Slot",JH=aR(()=>globalThis)||aR(()=>global)||Object.create(null),iR=JH,fm=iR[y0]||Array[y0]||function(n){try{Object.defineProperty(iR,y0,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(ZH()),{bind:z9,noContext:U9}=fm,hm=new fm,{hasOwnProperty:eG}=Object.prototype,B1=Array.from||function(n){const e=[];return n.forEach(t=>e.push(t)),e};function z1(n){const{unsubscribe:e}=n;typeof e=="function"&&(n.unsubscribe=void 0,e())}const ph=[],tG=100;function ec(n,e){if(!n)throw new Error(e||"assertion failure")}function yD(n,e){const t=n.length;return t>0&&t===e.length&&n[t-1]===e[t-1]}function bD(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}function xD(n){return n.slice(0)}class dm{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++dm.count}peek(){if(this.value.length===1&&!Ko(this))return oR(this),this.value[0]}recompute(e){return ec(!this.recomputing,"already recomputing"),oR(this),Ko(this)?nG(this,e):bD(this.value)}setDirty(){this.dirty||(this.dirty=!0,wD(this),z1(this))}dispose(){this.setDirty(),RD(this),U1(this,(e,t)=>{e.setDirty(),TD(e,this)})}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=ph.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(B1(this.deps).forEach(e=>e.delete(this)),this.deps.clear(),ph.push(this.deps),this.deps=null)}}dm.count=0;function oR(n){const e=hm.getValue();if(e)return n.parents.add(e),e.childValues.has(n)||e.childValues.set(n,[]),Ko(n)?ED(e,n):SD(e,n),e}function nG(n,e){return RD(n),hm.withValue(n,rG,[n,e]),iG(n,e)&&aG(n),bD(n.value)}function rG(n,e){n.recomputing=!0;const{normalizeResult:t}=n;let r;t&&n.value.length===1&&(r=xD(n.value)),n.value.length=0;try{if(n.value[0]=n.fn.apply(null,e),t&&r&&!yD(r,n.value))try{n.value[0]=t(n.value[0],r[0])}catch{}}catch(a){n.value[1]=a}n.recomputing=!1}function Ko(n){return n.dirty||!!(n.dirtyChildren&&n.dirtyChildren.size)}function aG(n){n.dirty=!1,!Ko(n)&&_D(n)}function wD(n){U1(n,ED)}function _D(n){U1(n,SD)}function U1(n,e){const t=n.parents.size;if(t){const r=B1(n.parents);for(let a=0;a<t;++a)e(r[a],n)}}function ED(n,e){ec(n.childValues.has(e)),ec(Ko(e));const t=!Ko(n);if(!n.dirtyChildren)n.dirtyChildren=ph.pop()||new Set;else if(n.dirtyChildren.has(e))return;n.dirtyChildren.add(e),t&&wD(n)}function SD(n,e){ec(n.childValues.has(e)),ec(!Ko(e));const t=n.childValues.get(e);t.length===0?n.childValues.set(e,xD(e.value)):yD(t,e.value)||n.setDirty(),CD(n,e),!Ko(n)&&_D(n)}function CD(n,e){const t=n.dirtyChildren;t&&(t.delete(e),t.size===0&&(ph.length<tG&&ph.push(t),n.dirtyChildren=null))}function RD(n){n.childValues.size>0&&n.childValues.forEach((e,t)=>{TD(n,t)}),n.forgetDeps(),ec(n.dirtyChildren===null)}function TD(n,e){e.parents.delete(n),n.childValues.delete(e),CD(n,e)}function iG(n,e){if(typeof n.subscribe=="function")try{z1(n),n.unsubscribe=n.subscribe.apply(null,e)}catch{return n.setDirty(),!1}return!0}const oG={setDirty:!0,dispose:!0,forget:!0};function OD(n){const e=new Map;function t(r){const a=hm.getValue();if(a){let i=e.get(r);i||e.set(r,i=new Set),a.dependOn(i)}}return t.dirty=function(a,i){const o=e.get(a);if(o){const u=i&&eG.call(oG,i)?i:"setDirty";B1(o).forEach(c=>c[u]()),e.delete(a),z1(o)}},t}let sR;function sG(...n){return(sR||(sR=new Hi(typeof WeakMap=="function"))).lookupArray(n)}const b0=new Set;function vh(n,{max:e=Math.pow(2,16),keyArgs:t,makeCacheKey:r=sG,normalizeResult:a,subscribe:i,cache:o=Vb}=Object.create(null)){const u=typeof o=="function"?new o(e,v=>v.dispose()):o,c=function(){const v=r.apply(null,t?t.apply(null,arguments):arguments);if(v===void 0)return n.apply(null,arguments);let g=u.get(v);g||(u.set(v,g=new dm(n)),g.normalizeResult=a,g.subscribe=i,g.forget=()=>u.delete(v));const y=g.recompute(Array.prototype.slice.call(arguments));return u.set(v,g),b0.add(u),hm.hasValue()||(b0.forEach(x=>x.clean()),b0.clear()),y};Object.defineProperty(c,"size",{get:()=>u.size,configurable:!1,enumerable:!1}),Object.freeze(c.options={max:e,keyArgs:t,makeCacheKey:r,normalizeResult:a,subscribe:i,cache:u});function f(v){const g=v&&u.get(v);g&&g.setDirty()}c.dirtyKey=f,c.dirty=function(){f(r.apply(null,arguments))};function d(v){const g=v&&u.get(v);if(g)return g.peek()}c.peekKey=d,c.peek=function(){return d(r.apply(null,arguments))};function p(v){return v?u.delete(v):!1}return c.forgetKey=p,c.forget=function(){return p(r.apply(null,arguments))},c.makeCacheKey=r,c.getKey=t?function(){return r.apply(null,t.apply(null,arguments))}:r,Object.freeze(c)}function uG(n){return n}var AD=function(){function n(e,t){t===void 0&&(t=Object.create(null)),this.resultCache=I1?new WeakSet:new Set,this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=t.cache!==!1,this.resetCache()}return n.prototype.getCacheKey=function(e){return[e]},n.identity=function(){return new n(uG,{cache:!1})},n.split=function(e,t,r){return r===void 0&&(r=n.identity()),Object.assign(new n(function(a){var i=e(a)?t:r;return i.transformDocument(a)},{cache:!1}),{left:t,right:r})},n.prototype.resetCache=function(){var e=this;if(this.cached){var t=new Hi(lu);this.performWork=vh(n.prototype.performWork.bind(this),{makeCacheKey:function(r){var a=e.getCacheKey(r);if(a)return Ce(Array.isArray(a),77),t.lookupArray(a)},max:Za["documentTransform.cache"],cache:Ov})}},n.prototype.performWork=function(e){return fc(e),this.transform(e)},n.prototype.transformDocument=function(e){if(this.resultCache.has(e))return e;var t=this.performWork(e);return this.resultCache.add(t),t},n.prototype.concat=function(e){var t=this;return Object.assign(new n(function(r){return e.transformDocument(t.transformDocument(r))},{cache:!1}),{left:this,right:e})},n}(),Lf,Is=Object.assign(function(n){var e=Lf.get(n);return e||(e=oH(n),Lf.set(n,e)),e},{reset:function(){Lf=new F1(Za.print||2e3)}});Is.reset();globalThis.__DEV__!==!1&&P1("print",function(){return Lf?Lf.size:0});var Zt=Array.isArray;function Zr(n){return Array.isArray(n)&&n.length>0}var uR={kind:Ee.FIELD,name:{kind:Ee.NAME,value:"__typename"}};function kD(n,e){return!n||n.selectionSet.selections.every(function(t){return t.kind===Ee.FRAGMENT_SPREAD&&kD(e[t.name.value],e)})}function lG(n){return kD(nu(n)||gD(n),cc(hc(n)))?null:n}function cG(n){var e=new Map,t=new Map;return n.forEach(function(r){r&&(r.name?e.set(r.name,r):r.test&&t.set(r.test,r))}),function(r){var a=e.get(r.name.value);return!a&&t.size&&t.forEach(function(i,o){o(r)&&(a=i)}),a}}function lR(n){var e=new Map;return function(r){r===void 0&&(r=n);var a=e.get(r);return a||e.set(r,a={variables:new Set,fragmentSpreads:new Set}),a}}function DD(n,e){fc(e);for(var t=lR(""),r=lR(""),a=function(_){for(var S=0,C=void 0;S<_.length&&(C=_[S]);++S)if(!Zt(C)){if(C.kind===Ee.OPERATION_DEFINITION)return t(C.name&&C.name.value);if(C.kind===Ee.FRAGMENT_DEFINITION)return r(C.name.value)}return globalThis.__DEV__!==!1&&Ce.error(97),null},i=0,o=e.definitions.length-1;o>=0;--o)e.definitions[o].kind===Ee.OPERATION_DEFINITION&&++i;var u=cG(n),c=function(_){return Zr(_)&&_.map(u).some(function(S){return S&&S.remove})},f=new Map,d=!1,p={enter:function(_){if(c(_.directives))return d=!0,null}},v=xa(e,{Field:p,InlineFragment:p,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(_,S,C,R,T){var O=a(T);O&&O.variables.add(_.name.value)}},FragmentSpread:{enter:function(_,S,C,R,T){if(c(_.directives))return d=!0,null;var O=a(T);O&&O.fragmentSpreads.add(_.name.value)}},FragmentDefinition:{enter:function(_,S,C,R){f.set(JSON.stringify(R),_)},leave:function(_,S,C,R){var T=f.get(JSON.stringify(R));if(_===T)return _;if(i>0&&_.selectionSet.selections.every(function(O){return O.kind===Ee.FIELD&&O.name.value==="__typename"}))return r(_.name.value).removed=!0,d=!0,null}},Directive:{leave:function(_){if(u(_))return d=!0,null}}});if(!d)return e;var g=function(_){return _.transitiveVars||(_.transitiveVars=new Set(_.variables),_.removed||_.fragmentSpreads.forEach(function(S){g(r(S)).transitiveVars.forEach(function(C){_.transitiveVars.add(C)})})),_},y=new Set;v.definitions.forEach(function(_){_.kind===Ee.OPERATION_DEFINITION?g(t(_.name&&_.name.value)).fragmentSpreads.forEach(function(S){y.add(S)}):_.kind===Ee.FRAGMENT_DEFINITION&&i===0&&!r(_.name.value).removed&&y.add(_.name.value)}),y.forEach(function(_){g(r(_)).fragmentSpreads.forEach(function(S){y.add(S)})});var x=function(_){return!!(!y.has(_)||r(_).removed)},w={enter:function(_){if(x(_.name.value))return null}};return lG(xa(v,{FragmentSpread:w,FragmentDefinition:w,OperationDefinition:{leave:function(_){if(_.variableDefinitions){var S=g(t(_.name&&_.name.value)).transitiveVars;if(S.size<_.variableDefinitions.length)return $($({},_),{variableDefinitions:_.variableDefinitions.filter(function(C){return S.has(C.variable.name.value)})})}}}}))}var V1=Object.assign(function(n){return xa(n,{SelectionSet:{enter:function(e,t,r){if(!(r&&r.kind===Ee.OPERATION_DEFINITION)){var a=e.selections;if(a){var i=a.some(function(u){return $o(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!i){var o=r;if(!($o(o)&&o.directives&&o.directives.some(function(u){return u.name.value==="export"})))return $($({},e),{selections:dn(dn([],a,!0),[uR],!1)})}}}}}})},{added:function(n){return n===uR}});function fG(n){var e=Lh(n),t=e.operation;if(t==="query")return n;var r=xa(n,{OperationDefinition:{enter:function(a){return $($({},a),{operation:"query"})}}});return r}function ND(n){fc(n);var e=DD([{test:function(t){return t.name.value==="client"},remove:!0}],n);return e}function hG(n){return fc(n),xa(n,{FragmentSpread:function(e){var t;if(!(!((t=e.directives)===null||t===void 0)&&t.some(function(r){return r.name.value==="unmask"})))return $($({},e),{directives:dn(dn([],e.directives||[],!0),[{kind:Ee.DIRECTIVE,name:{kind:Ee.NAME,value:"nonreactive"}}],!1)})}})}var dG=Object.prototype.hasOwnProperty;function cR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return pm(n)}function pm(n){var e=n[0]||{},t=n.length;if(t>1)for(var r=new Xo,a=1;a<t;++a)e=r.merge(e,n[a]);return e}var pG=function(n,e,t){return this.merge(n[t],e[t])},Xo=function(){function n(e){e===void 0&&(e=pG),this.reconciler=e,this.isObject=Yt,this.pastCopies=new Set}return n.prototype.merge=function(e,t){for(var r=this,a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];return Yt(t)&&Yt(e)?(Object.keys(t).forEach(function(o){if(dG.call(e,o)){var u=e[o];if(t[o]!==u){var c=r.reconciler.apply(r,dn([e,t,o],a,!1));c!==u&&(e=r.shallowCopyForMerge(e),e[o]=c)}}else e=r.shallowCopyForMerge(e),e[o]=t[o]}),e):t},n.prototype.shallowCopyForMerge=function(e){return Yt(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=$({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},n}();function vG(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=mG(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mG(n,e){if(n){if(typeof n=="string")return fR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fR(n,e)}}function fR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function hR(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function j1(n,e,t){return e&&hR(n.prototype,e),t&&hR(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var q1=function(){return typeof Symbol=="function"},W1=function(n){return q1()&&!!Symbol[n]},H1=function(n){return W1(n)?Symbol[n]:"@@"+n};q1()&&!W1("observable")&&(Symbol.observable=Symbol("observable"));var gG=H1("iterator"),Gb=H1("observable"),ID=H1("species");function Av(n,e){var t=n[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function wf(n){var e=n.constructor;return e!==void 0&&(e=e[ID],e===null&&(e=void 0)),e!==void 0?e:Ft}function yG(n){return n instanceof Ft}function tc(n){tc.log?tc.log(n):setTimeout(function(){throw n})}function Ip(n){Promise.resolve().then(function(){try{n()}catch(e){tc(e)}})}function MD(n){var e=n._cleanup;if(e!==void 0&&(n._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=Av(e,"unsubscribe");t&&t.call(e)}}catch(r){tc(r)}}function Qb(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function bG(n){var e=n._queue;if(e){n._queue=void 0,n._state="ready";for(var t=0;t<e.length&&(FD(n,e[t].type,e[t].value),n._state!=="closed");++t);}}function FD(n,e,t){n._state="running";var r=n._observer;try{var a=Av(r,e);switch(e){case"next":a&&a.call(r,t);break;case"error":if(Qb(n),a)a.call(r,t);else throw t;break;case"complete":Qb(n),a&&a.call(r);break}}catch(i){tc(i)}n._state==="closed"?MD(n):n._state==="running"&&(n._state="ready")}function x0(n,e,t){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:e,value:t});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:e,value:t}],Ip(function(){return bG(n)});return}FD(n,e,t)}}var xG=function(){function n(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var a=new wG(this);try{this._cleanup=r.call(void 0,a)}catch(i){a.error(i)}this._state==="initializing"&&(this._state="ready")}var e=n.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(Qb(this),MD(this))},j1(n,[{key:"closed",get:function(){return this._state==="closed"}}]),n}(),wG=function(){function n(t){this._subscription=t}var e=n.prototype;return e.next=function(r){x0(this._subscription,"next",r)},e.error=function(r){x0(this._subscription,"error",r)},e.complete=function(){x0(this._subscription,"complete")},j1(n,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),Ft=function(){function n(t){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=n.prototype;return e.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new xG(r,this._subscriber)},e.forEach=function(r){var a=this;return new Promise(function(i,o){if(typeof r!="function"){o(new TypeError(r+" is not a function"));return}function u(){c.unsubscribe(),i()}var c=a.subscribe({next:function(f){try{r(f,u)}catch(d){o(d),c.unsubscribe()}},error:o,complete:i})})},e.map=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=wf(this);return new i(function(o){return a.subscribe({next:function(u){try{u=r(u)}catch(c){return o.error(c)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.filter=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=wf(this);return new i(function(o){return a.subscribe({next:function(u){try{if(!r(u))return}catch(c){return o.error(c)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.reduce=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=wf(this),o=arguments.length>1,u=!1,c=arguments[1],f=c;return new i(function(d){return a.subscribe({next:function(p){var v=!u;if(u=!0,!v||o)try{f=r(f,p)}catch(g){return d.error(g)}else f=p},error:function(p){d.error(p)},complete:function(){if(!u&&!o)return d.error(new TypeError("Cannot reduce an empty sequence"));d.next(f),d.complete()}})})},e.concat=function(){for(var r=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var u=wf(this);return new u(function(c){var f,d=0;function p(v){f=v.subscribe({next:function(g){c.next(g)},error:function(g){c.error(g)},complete:function(){d===i.length?(f=void 0,c.complete()):p(u.from(i[d++]))}})}return p(r),function(){f&&(f.unsubscribe(),f=void 0)}})},e.flatMap=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=wf(this);return new i(function(o){var u=[],c=a.subscribe({next:function(d){if(r)try{d=r(d)}catch(v){return o.error(v)}var p=i.from(d).subscribe({next:function(v){o.next(v)},error:function(v){o.error(v)},complete:function(){var v=u.indexOf(p);v>=0&&u.splice(v,1),f()}});u.push(p)},error:function(d){o.error(d)},complete:function(){f()}});function f(){c.closed&&u.length===0&&o.complete()}return function(){u.forEach(function(d){return d.unsubscribe()}),c.unsubscribe()}})},e[Gb]=function(){return this},n.from=function(r){var a=typeof this=="function"?this:n;if(r==null)throw new TypeError(r+" is not an object");var i=Av(r,Gb);if(i){var o=i.call(r);if(Object(o)!==o)throw new TypeError(o+" is not an object");return yG(o)&&o.constructor===a?o:new a(function(u){return o.subscribe(u)})}if(W1("iterator")&&(i=Av(r,gG),i))return new a(function(u){Ip(function(){if(!u.closed){for(var c=vG(i.call(r)),f;!(f=c()).done;){var d=f.value;if(u.next(d),u.closed)return}u.complete()}})});if(Array.isArray(r))return new a(function(u){Ip(function(){if(!u.closed){for(var c=0;c<r.length;++c)if(u.next(r[c]),u.closed)return;u.complete()}})});throw new TypeError(r+" is not observable")},n.of=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=typeof this=="function"?this:n;return new o(function(u){Ip(function(){if(!u.closed){for(var c=0;c<a.length;++c)if(u.next(a[c]),u.closed)return;u.complete()}})})},j1(n,null,[{key:ID,get:function(){return this}}]),n}();q1()&&Object.defineProperty(Ft,Symbol("extensions"),{value:{symbol:Gb,hostReportError:tc},configurable:!0});function _G(n){var e,t=n.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var il;typeof self<"u"?il=self:typeof window<"u"?il=window:typeof global<"u"?il=global:typeof module<"u"?il=module:il=Function("return this")();_G(il);var dR=Ft.prototype,pR="@@observable";dR[pR]||(dR[pR]=function(){return this});function EG(n){return n.catch(function(){}),n}var SG=Object.prototype.toString;function PD(n){return $b(n)}function $b(n,e){switch(SG.call(n)){case"[object Array]":{if(e=e||new Map,e.has(n))return e.get(n);var t=n.slice(0);return e.set(n,t),t.forEach(function(a,i){t[i]=$b(a,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(n))return e.get(n);var r=Object.create(Object.getPrototypeOf(n));return e.set(n,r),Object.keys(n).forEach(function(a){r[a]=$b(n[a],e)}),r}default:return n}}function CG(n){var e=new Set([n]);return e.forEach(function(t){Yt(t)&&RG(t)===t&&Object.getOwnPropertyNames(t).forEach(function(r){Yt(t[r])&&e.add(t[r])})}),n}function RG(n){if(globalThis.__DEV__!==!1&&!Object.isFrozen(n))try{Object.freeze(n)}catch(e){if(e instanceof TypeError)return null;throw e}return n}function nc(n){return globalThis.__DEV__!==!1&&CG(n),n}function Bf(n,e,t){var r=[];n.forEach(function(a){return a[e]&&r.push(a)}),r.forEach(function(a){return a[e](t)})}function w0(n,e,t){return new Ft(function(r){var a={then:function(c){return new Promise(function(f){return f(c())})}};function i(c,f){return function(d){if(c){var p=function(){return r.closed?0:c(d)};a=a.then(p,p).then(function(v){return r.next(v)},function(v){return r.error(v)})}else r[f](d)}}var o={next:i(e,"next"),error:i(t,"error"),complete:function(){a.then(function(){return r.complete()})}},u=n.subscribe(o);return function(){return u.unsubscribe()}})}function LD(n){function e(t){Object.defineProperty(n,t,{value:Ft})}return M1&&Symbol.species&&e(Symbol.species),e("@@species"),n}function vR(n){return n&&typeof n.then=="function"}var ol=function(n){ei(e,n);function e(t){var r=n.call(this,function(a){return r.addObserver(a),function(){return r.removeObserver(a)}})||this;return r.observers=new Set,r.promise=new Promise(function(a,i){r.resolve=a,r.reject=i}),r.handlers={next:function(a){r.sub!==null&&(r.latest=["next",a],r.notify("next",a),Bf(r.observers,"next",a))},error:function(a){var i=r.sub;i!==null&&(i&&setTimeout(function(){return i.unsubscribe()}),r.sub=null,r.latest=["error",a],r.reject(a),r.notify("error",a),Bf(r.observers,"error",a))},complete:function(){var a=r,i=a.sub,o=a.sources,u=o===void 0?[]:o;if(i!==null){var c=u.shift();c?vR(c)?c.then(function(f){return r.sub=f.subscribe(r.handlers)},r.handlers.error):r.sub=c.subscribe(r.handlers):(i&&setTimeout(function(){return i.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),r.notify("complete"),Bf(r.observers,"complete"))}}},r.nextResultListeners=new Set,r.cancel=function(a){r.reject(a),r.sources=[],r.handlers.error(a)},r.promise.catch(function(a){}),typeof t=="function"&&(t=[new Ft(t)]),vR(t)?t.then(function(a){return r.start(a)},r.handlers.error):r.start(t),r}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var r=this.latest[0],a=t[r];a&&a.call(t,this.latest[1]),this.sub===null&&r==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,r){var a=this.nextResultListeners;a.size&&(this.nextResultListeners=new Set,a.forEach(function(i){return i(t,r)}))},e.prototype.beforeNext=function(t){var r=!1;this.nextResultListeners.add(function(a,i){r||(r=!0,t(a,i))})},e}(Ft);LD(ol);function Sl(n){return"incremental"in n}function TG(n){return"hasNext"in n&&"data"in n}function OG(n){return Sl(n)||TG(n)}function AG(n){return Yt(n)&&"payload"in n}function BD(n,e){var t=n,r=new Xo;return Sl(e)&&Zr(e.incremental)&&e.incremental.forEach(function(a){for(var i=a.data,o=a.path,u=o.length-1;u>=0;--u){var c=o[u],f=!isNaN(+c),d=f?[]:{};d[c]=i,i=d}t=r.merge(t,i)}),t}function Mp(n){var e=Kb(n);return Zr(e)}function Kb(n){var e=Zr(n.errors)?n.errors.slice(0):[];return Sl(n)&&Zr(n.incremental)&&n.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function ru(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Object.create(null);return n.forEach(function(r){r&&Object.keys(r).forEach(function(a){var i=r[a];i!==void 0&&(t[a]=i)})}),t}function zf(n,e){return ru(n,e,e.variables&&{variables:ru($($({},n&&n.variables),e.variables))})}function _0(n){return new Ft(function(e){e.error(n)})}var zD=function(n,e,t){var r=new Error(t);throw r.name="ServerError",r.response=n,r.statusCode=n.status,r.result=e,r};function kG(n){for(var e=["query","operationName","variables","extensions","context"],t=0,r=Object.keys(n);t<r.length;t++){var a=r[t];if(e.indexOf(a)<0)throw ar(46,a)}return n}function DG(n,e){var t=$({},n),r=function(i){typeof i=="function"?t=$($({},t),i(t)):t=$($({},t),i)},a=function(){return $({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:r}),Object.defineProperty(e,"getContext",{enumerable:!1,value:a}),e}function NG(n){var e={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return e.operationName||(e.operationName=typeof e.query!="string"?kf(e.query)||void 0:""),e}function IG(n,e){var t=$({},n),r=new Set(Object.keys(n));return xa(e,{Variable:function(a,i,o){o&&o.kind!=="VariableDefinition"&&r.delete(a.name.value)}}),r.forEach(function(a){delete t[a]}),t}function mR(n,e){return e?e(n):Ft.of()}function _f(n){return typeof n=="function"?new Bh(n):n}function wp(n){return n.request.length<=1}var Bh=function(){function n(e){e&&(this.request=e)}return n.empty=function(){return new n(function(){return Ft.of()})},n.from=function(e){return e.length===0?n.empty():e.map(_f).reduce(function(t,r){return t.concat(r)})},n.split=function(e,t,r){var a=_f(t),i=_f(r||new n(mR)),o;return wp(a)&&wp(i)?o=new n(function(u){return e(u)?a.request(u)||Ft.of():i.request(u)||Ft.of()}):o=new n(function(u,c){return e(u)?a.request(u,c)||Ft.of():i.request(u,c)||Ft.of()}),Object.assign(o,{left:a,right:i})},n.execute=function(e,t){return e.request(DG(t.context,NG(kG(t))))||Ft.of()},n.concat=function(e,t){var r=_f(e);if(wp(r))return globalThis.__DEV__!==!1&&Ce.warn(38,r),r;var a=_f(t),i;return wp(a)?i=new n(function(o){return r.request(o,function(u){return a.request(u)||Ft.of()})||Ft.of()}):i=new n(function(o,u){return r.request(o,function(c){return a.request(c,u)||Ft.of()})||Ft.of()}),Object.assign(i,{left:r,right:a})},n.prototype.split=function(e,t,r){return this.concat(n.split(e,t,r||new n(mR)))},n.prototype.concat=function(e){return n.concat(this,e)},n.prototype.request=function(e,t){throw ar(39)},n.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},n.prototype.setOnError=function(e){return this.onError=e,this},n}(),Xb=Bh.execute;function MG(n){var e,t=n[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function FG(n){var e=null,t=null,r=!1,a=[],i=[];function o(p){if(!t){if(i.length){var v=i.shift();if(Array.isArray(v)&&v[0])return v[0]({value:p,done:!1})}a.push(p)}}function u(p){t=p;var v=i.slice();v.forEach(function(g){g[1](p)}),!e||e()}function c(){r=!0;var p=i.slice();p.forEach(function(v){v[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,n.removeListener("data",o),n.removeListener("error",u),n.removeListener("end",c),n.removeListener("finish",c),n.removeListener("close",c)},n.on("data",o),n.on("error",u),n.on("end",c),n.on("finish",c),n.on("close",c);function f(){return new Promise(function(p,v){if(t)return v(t);if(a.length)return p({value:a.shift(),done:!1});if(r)return p({value:void 0,done:!0});i.push([p,v])})}var d={next:function(){return f()}};return um&&(d[Symbol.asyncIterator]=function(){return this}),d}function PG(n){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(r,a){n.then(function(i){r({value:i,done:!1})}).catch(a)}))}};return um&&(t[Symbol.asyncIterator]=function(){return this}),t}function gR(n){var e={next:function(){return n.read()}};return um&&(e[Symbol.asyncIterator]=function(){return this}),e}function LG(n){return!!n.body}function BG(n){return!!n.getReader}function zG(n){return!!(um&&n[Symbol.asyncIterator])}function UG(n){return!!n.stream}function VG(n){return!!n.arrayBuffer}function jG(n){return!!n.pipe}function qG(n){var e=n;if(LG(n)&&(e=n.body),zG(e))return MG(e);if(BG(e))return gR(e.getReader());if(UG(e))return gR(e.stream().getReader());if(VG(e))return PG(e.arrayBuffer());if(jG(e))return FG(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var G1=Symbol();function WG(n){return n.extensions?Array.isArray(n.extensions[G1]):!1}function UD(n){return n.hasOwnProperty("graphQLErrors")}var HG=function(n){var e=dn(dn(dn([],n.graphQLErrors,!0),n.clientErrors,!0),n.protocolErrors,!0);return n.networkError&&e.push(n.networkError),e.map(function(t){return Yt(t)&&t.message||"Error message not found."}).join(`
`)},za=function(n){ei(e,n);function e(t){var r=t.graphQLErrors,a=t.protocolErrors,i=t.clientErrors,o=t.networkError,u=t.errorMessage,c=t.extraInfo,f=n.call(this,u)||this;return f.name="ApolloError",f.graphQLErrors=r||[],f.protocolErrors=a||[],f.clientErrors=i||[],f.networkError=o||null,f.message=u||HG(f),f.extraInfo=c,f.cause=dn(dn(dn([o],r||[],!0),a||[],!0),i||[],!0).find(function(d){return!!d})||null,f.__proto__=e.prototype,f}return e}(Error),yR=Object.prototype.hasOwnProperty;function GG(n,e){return wo(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,D,N,k;return _o(this,function(I){switch(I.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");t=new TextDecoder("utf-8"),r=(k=n.headers)===null||k===void 0?void 0:k.get("content-type"),a="boundary=",i=r!=null&&r.includes(a)?r==null?void 0:r.substring((r==null?void 0:r.indexOf(a))+a.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",o=`\r
--`.concat(i),u="",c=qG(n),f=!0,I.label=1;case 1:return f?[4,c.next()]:[3,3];case 2:for(d=I.sent(),p=d.value,v=d.done,g=typeof p=="string"?p:t.decode(p),y=u.length-o.length+1,f=!v,u+=g,x=u.indexOf(o,y);x>-1;){if(w=void 0,D=[u.slice(0,x),u.slice(x+o.length)],w=D[0],u=D[1],_=w.indexOf(`\r
\r
`),S=QG(w.slice(0,_)),C=S["content-type"],C&&C.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(R=w.slice(_),R){if(T=VD(n,R),Object.keys(T).length>1||"data"in T||"incremental"in T||"errors"in T||"payload"in T)if(AG(T)){if(O={},"payload"in T){if(Object.keys(T).length===1&&T.payload===null)return[2];O=$({},T.payload)}"errors"in T&&(O=$($({},O),{extensions:$($({},"extensions"in O?O.extensions:null),(N={},N[G1]=T.errors,N))})),e(O)}else e(T);else if(Object.keys(T).length===1&&"hasNext"in T&&!T.hasNext)return[2]}x=u.indexOf(o)}return[3,1];case 3:return[2]}})})}function QG(n){var e={};return n.split(`
`).forEach(function(t){var r=t.indexOf(":");if(r>-1){var a=t.slice(0,r).trim().toLowerCase(),i=t.slice(r+1).trim();e[a]=i}}),e}function VD(n,e){if(n.status>=300){var t=function(){try{return JSON.parse(e)}catch{return e}};zD(n,t(),"Response not successful: Received status code ".concat(n.status))}try{return JSON.parse(e)}catch(a){var r=a;throw r.name="ServerParseError",r.response=n,r.statusCode=n.status,r.bodyText=e,r}}function $G(n,e){n.result&&n.result.errors&&n.result.data&&e.next(n.result),e.error(n)}function KG(n){return function(e){return e.text().then(function(t){return VD(e,t)}).then(function(t){return!Array.isArray(t)&&!yR.call(t,"data")&&!yR.call(t,"errors")&&zD(e,t,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(r){return r.operationName}):n.operationName,"'.")),t})}}var Yb=function(n,e){var t;try{t=JSON.stringify(n)}catch(a){var r=ar(42,e,a.message);throw r.parseError=a,r}return t},XG={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},YG={accept:"*/*","content-type":"application/json"},ZG={method:"POST"},JG={http:XG,headers:YG,options:ZG},e8=function(n,e){return e(n)};function t8(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var a={},i={};t.forEach(function(p){a=$($($({},a),p.options),{headers:$($({},a.headers),p.headers)}),p.credentials&&(a.credentials=p.credentials),i=$($({},i),p.http)}),a.headers&&(a.headers=n8(a.headers,i.preserveHeaderCase));var o=n.operationName,u=n.extensions,c=n.variables,f=n.query,d={operationName:o,variables:c};return i.includeExtensions&&(d.extensions=u),i.includeQuery&&(d.query=e(f,Is)),{options:a,body:d}}function n8(n,e){if(!e){var t={};return Object.keys(Object(n)).forEach(function(i){t[i.toLowerCase()]=n[i]}),t}var r={};Object.keys(Object(n)).forEach(function(i){r[i.toLowerCase()]={originalName:i,value:n[i]}});var a={};return Object.keys(r).forEach(function(i){a[r[i].originalName]=r[i].value}),a}var r8=function(n){if(!n&&typeof fetch>"u")throw ar(40)},a8=function(n,e){var t=n.getContext(),r=t.uri;return r||(typeof e=="function"?e(n):e||"/graphql")};function i8(n,e){var t=[],r=function(p,v){t.push("".concat(p,"=").concat(encodeURIComponent(v)))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var a=void 0;try{a=Yb(e.variables,"Variables map")}catch(p){return{parseError:p}}r("variables",a)}if(e.extensions){var i=void 0;try{i=Yb(e.extensions,"Extensions map")}catch(p){return{parseError:p}}r("extensions",i)}var o="",u=n,c=n.indexOf("#");c!==-1&&(o=n.substr(c),u=n.substr(0,c));var f=u.indexOf("?")===-1?"?":"&",d=u+f+t.join("&")+o;return{newURI:d}}var bR=fa(function(){return fetch}),o8=function(n){n===void 0&&(n={});var e=n.uri,t=e===void 0?"/graphql":e,r=n.fetch,a=n.print,i=a===void 0?e8:a,o=n.includeExtensions,u=n.preserveHeaderCase,c=n.useGETForQueries,f=n.includeUnusedVariables,d=f===void 0?!1:f,p=va(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);globalThis.__DEV__!==!1&&r8(r||bR);var v={http:{includeExtensions:o,preserveHeaderCase:u},options:p.fetchOptions,credentials:p.credentials,headers:p.headers};return new Bh(function(g){var y=a8(g,t),x=g.getContext(),w={};if(x.clientAwareness){var _=x.clientAwareness,S=_.name,C=_.version;S&&(w["apollographql-client-name"]=S),C&&(w["apollographql-client-version"]=C)}var R=$($({},w),x.headers),T={http:x.http,options:x.fetchOptions,credentials:x.credentials,headers:R};if(dh(["client"],g.query)){var O=ND(g.query);if(!O)return _0(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));g.query=O}var D=t8(g,i,JG,v,T),N=D.options,k=D.body;k.variables&&!d&&(k.variables=IG(k.variables,g.query));var I;!N.signal&&typeof AbortController<"u"&&(I=new AbortController,N.signal=I.signal);var B=function(Y){return Y.kind==="OperationDefinition"&&Y.operation==="mutation"},U=function(Y){return Y.kind==="OperationDefinition"&&Y.operation==="subscription"},ee=U(Lh(g.query)),te=dh(["defer"],g.query);if(c&&!g.query.definitions.some(B)&&(N.method="GET"),te||ee){N.headers=N.headers||{};var re="multipart/mixed;";ee&&te&&globalThis.__DEV__!==!1&&Ce.warn(41),ee?re+="boundary=graphql;subscriptionSpec=1.0,application/json":te&&(re+="deferSpec=20220824,application/json"),N.headers.accept=re}if(N.method==="GET"){var q=i8(y,k),Z=q.newURI,G=q.parseError;if(G)return _0(G);y=Z}else try{N.body=Yb(k,"Payload")}catch(Y){return _0(Y)}return new Ft(function(Y){var F=r||fa(function(){return fetch})||bR,K=Y.next.bind(Y);return F(y,N).then(function(se){var fe;g.setContext({response:se});var he=(fe=se.headers)===null||fe===void 0?void 0:fe.get("content-type");return he!==null&&/^multipart\/mixed/i.test(he)?GG(se,K):KG(g)(se).then(K)}).then(function(){I=void 0,Y.complete()}).catch(function(se){I=void 0,$G(se,Y)}),function(){I&&I.abort()}})})},s8=function(n){ei(e,n);function e(t){t===void 0&&(t={});var r=n.call(this,o8(t).request)||this;return r.options=t,r}return e}(Bh);const{toString:xR,hasOwnProperty:u8}=Object.prototype,wR=Function.prototype.toString,Zb=new Map;function _t(n,e){try{return Jb(n,e)}finally{Zb.clear()}}function Jb(n,e){if(n===e)return!0;const t=xR.call(n),r=xR.call(e);if(t!==r)return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":{if(ER(n,e))return!0;const a=_R(n),i=_R(e),o=a.length;if(o!==i.length)return!1;for(let u=0;u<o;++u)if(!u8.call(e,a[u]))return!1;for(let u=0;u<o;++u){const c=a[u];if(!Jb(n[c],e[c]))return!1}return!0}case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!==n)return e!==e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n==`${e}`;case"[object Map]":case"[object Set]":{if(n.size!==e.size)return!1;if(ER(n,e))return!0;const a=n.entries(),i=t==="[object Map]";for(;;){const o=a.next();if(o.done)break;const[u,c]=o.value;if(!e.has(u)||i&&!Jb(c,e.get(u)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":{let a=n.byteLength;if(a===e.byteLength)for(;a--&&n[a]===e[a];);return a===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const a=wR.call(n);return a!==wR.call(e)?!1:!f8(a,c8)}}return!1}function _R(n){return Object.keys(n).filter(l8,n)}function l8(n){return this[n]!==void 0}const c8="{ [native code] }";function f8(n,e){const t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}function ER(n,e){let t=Zb.get(n);if(t){if(t.has(e))return!0}else Zb.set(n,t=new Set);return t.add(e),!1}function jD(n,e,t,r){var a=e.data,i=va(e,["data"]),o=t.data,u=va(t,["data"]);return _t(i,u)&&Fp(Lh(n).selectionSet,a,o,{fragmentMap:cc(hc(n)),variables:r})}function Fp(n,e,t,r){if(e===t)return!0;var a=new Set;return n.selections.every(function(i){if(a.has(i)||(a.add(i),!Ph(i,r.variables))||SR(i))return!0;if($o(i)){var o=Li(i),u=e&&e[o],c=t&&t[o],f=i.selectionSet;if(!f)return _t(u,c);var d=Array.isArray(u),p=Array.isArray(c);if(d!==p)return!1;if(d&&p){var v=u.length;if(c.length!==v)return!1;for(var g=0;g<v;++g)if(!Fp(f,u[g],c[g],r))return!1;return!0}return Fp(f,u,c,r)}else{var y=lm(i,r.fragmentMap);if(y)return SR(y)?!0:Fp(y.selectionSet,e,t,r)}})}function SR(n){return!!n.directives&&n.directives.some(h8)}function h8(n){return n.name.value==="nonreactive"}var qD=lu?WeakMap:Map,WD=I1?WeakSet:Set,Q1=new fm,CR=!1;function HD(){CR||(CR=!0,globalThis.__DEV__!==!1&&Ce.warn(52))}function GD(n,e,t){return Q1.withValue(!0,function(){var r=Df(n,e,t,!1);return Object.isFrozen(n)&&nc(r),r})}function d8(n,e){if(e.has(n))return e.get(n);var t=Array.isArray(n)?[]:Object.create(null);return e.set(n,t),t}function Df(n,e,t,r,a){var i,o=t.knownChanged,u=d8(n,t.mutableTargets);if(Array.isArray(n)){for(var c=0,f=Array.from(n.entries());c<f.length;c++){var d=f[c],p=d[0],v=d[1];if(v===null){u[p]=null;continue}var g=Df(v,e,t,r,globalThis.__DEV__!==!1?"".concat(a||"","[").concat(p,"]"):void 0);o.has(g)&&o.add(u),u[p]=g}return o.has(u)?u:n}for(var y=0,x=e.selections;y<x.length;y++){var w=x[y],_=void 0;if(r&&o.add(u),w.kind===Ee.FIELD){var S=Li(w),C=w.selectionSet;if(_=u[S]||n[S],_===void 0)continue;if(C&&_!==null){var g=Df(n[S],C,t,r,globalThis.__DEV__!==!1?"".concat(a||"",".").concat(S):void 0);o.has(g)&&(_=g)}globalThis.__DEV__===!1&&(u[S]=_),globalThis.__DEV__!==!1&&(r&&S!=="__typename"&&!(!((i=Object.getOwnPropertyDescriptor(u,S))===null||i===void 0)&&i.value)?Object.defineProperty(u,S,p8(S,_,a||"",t.operationName,t.operationType)):(delete u[S],u[S]=_))}if(w.kind===Ee.INLINE_FRAGMENT&&(!w.typeCondition||t.cache.fragmentMatches(w,n.__typename))&&(_=Df(n,w.selectionSet,t,r,a)),w.kind===Ee.FRAGMENT_SPREAD){var R=w.name.value,T=t.fragmentMap[R]||(t.fragmentMap[R]=t.cache.lookupFragment(R));Ce(T,47,R);var O=hH(w);O!=="mask"&&(_=Df(n,T.selectionSet,t,O==="migrate",a))}o.has(_)&&o.add(u)}return"__typename"in n&&!("__typename"in u)&&(u.__typename=n.__typename),Object.keys(u).length!==Object.keys(n).length&&o.add(u),o.has(u)?u:n}function p8(n,e,t,r,a){var i=function(){return Q1.getValue()||(globalThis.__DEV__!==!1&&Ce.warn(48,r?"".concat(a," '").concat(r,"'"):"anonymous ".concat(a),"".concat(t,".").concat(n).replace(/^\./,"")),i=function(){return e}),e};return{get:function(){return i()},set:function(o){i=function(){return o}},enumerable:!0,configurable:!0}}function QD(n,e,t,r){if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&HD(),n;var a=e.definitions.filter(function(o){return o.kind===Ee.FRAGMENT_DEFINITION});typeof r>"u"&&(Ce(a.length===1,49,a.length),r=a[0].name.value);var i=a.find(function(o){return o.name.value===r});return Ce(!!i,50,r),n==null||_t(n,{})?n:GD(n,i.selectionSet,{operationType:"fragment",operationName:i.name.value,fragmentMap:cc(hc(e)),cache:t,mutableTargets:new qD,knownChanged:new WD})}function v8(n,e,t){var r;if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&HD(),n;var a=nu(e);return Ce(a,51),n==null?n:GD(n,a.selectionSet,{operationType:a.operation,operationName:(r=a.name)===null||r===void 0?void 0:r.value,fragmentMap:cc(hc(e)),cache:t,mutableTargets:new qD,knownChanged:new WD})}var $D=function(){function n(){this.assumeImmutableResults=!1,this.getFragmentDoc=vh(bH,{max:Za["cache.fragmentQueryDocuments"]||1e3,cache:Ov})}return n.prototype.lookupFragment=function(e){return null},n.prototype.batch=function(e){var t=this,r=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,a;return this.performTransaction(function(){return a=e.update(t)},r),a},n.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},n.prototype.transformDocument=function(e){return e},n.prototype.transformForLink=function(e){return e},n.prototype.identify=function(e){},n.prototype.gc=function(){return[]},n.prototype.modify=function(e){return!1},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read($($({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},n.prototype.watchFragment=function(e){var t=this,r=e.fragment,a=e.fragmentName,i=e.from,o=e.optimistic,u=o===void 0?!0:o,c=va(e,["fragment","fragmentName","from","optimistic"]),f=this.getFragmentDoc(r,a),d=typeof i>"u"||typeof i=="string"?i:this.identify(i),p=!!e[Symbol.for("apollo.dataMasking")];if(globalThis.__DEV__!==!1){var v=a||gD(r).name.value;d||globalThis.__DEV__!==!1&&Ce.warn(1,v)}var g=$($({},c),{returnPartialData:!0,id:d,query:f,optimistic:u}),y;return new Ft(function(x){return t.watch($($({},g),{immediate:!0,callback:function(w){var _=p?QD(w.result,r,t,a):w.result;if(!(y&&jD(f,{data:y.result},{data:_},e.variables))){var S={data:_,complete:!!w.complete};w.missing&&(S.missing=pm(w.missing.map(function(C){return C.missing}))),y=$($({},w),{result:_}),x.next(S)}}}))})},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read($($({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},n.prototype.writeQuery=function(e){var t=e.id,r=e.data,a=va(e,["id","data"]);return this.write(Object.assign(a,{dataId:t||"ROOT_QUERY",result:r}))},n.prototype.writeFragment=function(e){var t=e.id,r=e.data,a=e.fragment,i=e.fragmentName,o=va(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(a,i),dataId:t,result:r}))},n.prototype.updateQuery=function(e,t){return this.batch({update:function(r){var a=r.readQuery(e),i=t(a);return i==null?a:(r.writeQuery($($({},e),{data:i})),i)}})},n.prototype.updateFragment=function(e,t){return this.batch({update:function(r){var a=r.readFragment(e),i=t(a);return i==null?a:(r.writeFragment($($({},e),{data:i})),i)}})},n}();globalThis.__DEV__!==!1&&($D.prototype.getMemoryInternals=DH);var KD=function(n){ei(e,n);function e(t,r,a,i){var o,u=n.call(this,t)||this;if(u.message=t,u.path=r,u.query=a,u.variables=i,Array.isArray(u.path)){u.missing=u.message;for(var c=u.path.length-1;c>=0;--c)u.missing=(o={},o[u.path[c]]=u.missing,o)}else u.missing=u.path;return u.__proto__=e.prototype,u}return e}(Error),Sn=Object.prototype.hasOwnProperty;function Ef(n){return n==null}function XD(n,e){var t=n.__typename,r=n.id,a=n._id;if(typeof t=="string"&&(e&&(e.keyObject=Ef(r)?Ef(a)?void 0:{_id:a}:{id:r}),Ef(r)&&!Ef(a)&&(r=a),!Ef(r)))return"".concat(t,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var YD={dataIdFromObject:XD,addTypename:!0,resultCaching:!0,canonizeResults:!1};function m8(n){return ru(YD,n)}function ZD(n){var e=n.canonizeResults;return e===void 0?YD.canonizeResults:e}function g8(n,e){return Rt(e)?n.get(e.__ref,"__typename"):e&&e.__typename}var JD=/^[_a-z][_0-9a-z]*/i;function Yo(n){var e=n.match(JD);return e?e[0]:n}function ex(n,e,t){return Yt(e)?Zt(e)?e.every(function(r){return ex(n,r,t)}):n.selections.every(function(r){if($o(r)&&Ph(r,t)){var a=Li(r);return Sn.call(e,a)&&(!r.selectionSet||ex(r.selectionSet,e[a],t))}return!0}):!1}function fl(n){return Yt(n)&&!Rt(n)&&!Zt(n)}function y8(){return new Xo}function eN(n,e){var t=cc(hc(n));return{fragmentMap:t,lookupFragment:function(r){var a=t[r];return!a&&e&&(a=e.lookup(r)),a||null}}}var Pp=Object.create(null),E0=function(){return Pp},RR=Object.create(null),mh=function(){function n(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(a,i){return nc(Rt(a)?r.get(a.__ref,i):a&&a[i])},this.canRead=function(a){return Rt(a)?r.has(a.__ref):typeof a=="object"},this.toReference=function(a,i){if(typeof a=="string")return El(a);if(Rt(a))return a;var o=r.policies.identify(a)[0];if(o){var u=El(o);return i&&r.merge(o,a),u}}}return n.prototype.toObject=function(){return $({},this.data)},n.prototype.has=function(e){return this.lookup(e,!0)!==void 0},n.prototype.get=function(e,t){if(this.group.depend(e,t),Sn.call(this.data,e)){var r=this.data[e];if(r&&Sn.call(r,t))return r[t]}if(t==="__typename"&&Sn.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof xo)return this.parent.get(e,t)},n.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),Sn.call(this.data,e))return this.data[e];if(this instanceof xo)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},n.prototype.merge=function(e,t){var r=this,a;Rt(e)&&(e=e.__ref),Rt(t)&&(t=t.__ref);var i=typeof e=="string"?this.lookup(a=e):e,o=typeof t=="string"?this.lookup(a=t):t;if(o){Ce(typeof a=="string",2);var u=new Xo(x8).merge(i,o);if(this.data[a]=u,u!==i&&(delete this.refs[a],this.group.caching)){var c=Object.create(null);i||(c.__exists=1),Object.keys(o).forEach(function(f){if(!i||i[f]!==u[f]){c[f]=1;var d=Yo(f);d!==f&&!r.policies.hasKeyArgs(u.__typename,d)&&(c[d]=1),u[f]===void 0&&!(r instanceof xo)&&delete u[f]}}),c.__typename&&!(i&&i.__typename)&&this.policies.rootTypenamesById[a]===u.__typename&&delete c.__typename,Object.keys(c).forEach(function(f){return r.group.dirty(a,f)})}}},n.prototype.modify=function(e,t){var r=this,a=this.lookup(e);if(a){var i=Object.create(null),o=!1,u=!0,c={DELETE:Pp,INVALIDATE:RR,isReference:Rt,toReference:this.toReference,canRead:this.canRead,readField:function(f,d){return r.policies.readField(typeof f=="string"?{fieldName:f,from:d||El(e)}:f,{store:r})}};if(Object.keys(a).forEach(function(f){var d=Yo(f),p=a[f];if(p!==void 0){var v=typeof t=="function"?t:t[f]||t[d];if(v){var g=v===E0?Pp:v(nc(p),$($({},c),{fieldName:d,storeFieldName:f,storage:r.getStorage(e,f)}));if(g===RR)r.group.dirty(e,f);else if(g===Pp&&(g=void 0),g!==p&&(i[f]=g,o=!0,p=g,globalThis.__DEV__!==!1)){var y=function(T){if(r.lookup(T.__ref)===void 0)return globalThis.__DEV__!==!1&&Ce.warn(3,T),!0};if(Rt(g))y(g);else if(Array.isArray(g))for(var x=!1,w=void 0,_=0,S=g;_<S.length;_++){var C=S[_];if(Rt(C)){if(x=!0,y(C))break}else if(typeof C=="object"&&C){var R=r.policies.identify(C)[0];R&&(w=C)}if(x&&w!==void 0){globalThis.__DEV__!==!1&&Ce.warn(4,w);break}}}}p!==void 0&&(u=!1)}}),o)return this.merge(e,i),u&&(this instanceof xo?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},n.prototype.delete=function(e,t,r){var a,i=this.lookup(e);if(i){var o=this.getFieldValue(i,"__typename"),u=t&&r?this.policies.getStoreFieldName({typename:o,fieldName:t,args:r}):t;return this.modify(e,u?(a={},a[u]=E0,a):E0)}return!1},n.prototype.evict=function(e,t){var r=!1;return e.id&&(Sn.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof xo&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach(function(a){Sn.call(e.policies.rootTypenamesById,a)||r.push(a)}),r.length&&(t.__META={extraRootIds:r.sort()}),t},n.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(i){e&&Sn.call(e,i)||t.delete(i)}),e){var r=e.__META,a=va(e,["__META"]);Object.keys(a).forEach(function(i){t.merge(i,a[i])}),r&&r.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},n.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},n.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof xo?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},n.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach(function(o){Sn.call(r,o)&&(Object.keys(e.findChildRefIds(o)).forEach(t.add,t),delete r[o])});var a=Object.keys(r);if(a.length){for(var i=this;i instanceof xo;)i=i.parent;a.forEach(function(o){return i.delete(o)})}return a},n.prototype.findChildRefIds=function(e){if(!Sn.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var a=new Set([r]);a.forEach(function(i){Rt(i)&&(t[i.__ref]=!0),Yt(i)&&Object.keys(i).forEach(function(o){var u=i[o];Yt(u)&&a.add(u)})})}return this.refs[e]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n}(),tN=function(){function n(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?OD():null,this.keyMaker=new Hi(lu)},n.prototype.depend=function(e,t){if(this.d){this.d(S0(e,t));var r=Yo(t);r!==t&&this.d(S0(e,r)),this.parent&&this.parent.depend(e,t)}},n.prototype.dirty=function(e,t){this.d&&this.d.dirty(S0(e,t),t==="__exists"?"forget":"setDirty")},n}();function S0(n,e){return e+"#"+n}function TR(n,e){Uf(n)&&n.group.depend(e,"__exists")}(function(n){var e=function(t){ei(r,t);function r(a){var i=a.policies,o=a.resultCaching,u=o===void 0?!0:o,c=a.seed,f=t.call(this,i,new tN(u))||this;return f.stump=new b8(f),f.storageTrie=new Hi(lu),c&&f.replace(c),f}return r.prototype.addLayer=function(a,i){return this.stump.addLayer(a,i)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(n);n.Root=e})(mh||(mh={}));var xo=function(n){ei(e,n);function e(t,r,a,i){var o=n.call(this,r.policies,i)||this;return o.id=t,o.parent=r,o.replay=a,o.group=i,a(o),o}return e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var r=this,a=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(i){var o=r.data[i],u=a.lookup(i);u?o?o!==u&&Object.keys(o).forEach(function(c){_t(o[c],u[c])||r.group.dirty(i,c)}):(r.group.dirty(i,"__exists"),Object.keys(u).forEach(function(c){r.group.dirty(i,c)})):r.delete(i)}),a):a===this.parent?this:a.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return $($({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return Sn.call(this.data,t)?$($({},r),n.prototype.findChildRefIds.call(this,t)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(mh),b8=function(n){ei(e,n);function e(t){return n.call(this,"EntityStore.Stump",t,function(){},new tN(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,r){return this.parent.merge(t,r)},e}(xo);function x8(n,e,t){var r=n[t],a=e[t];return _t(r,a)?r:a}function Uf(n){return!!(n instanceof mh&&n.group.caching)}function w8(n){return Yt(n)?Zt(n)?n.slice(0):$({__proto__:Object.getPrototypeOf(n)},n):n}var OR=function(){function n(){this.known=new(I1?WeakSet:Set),this.pool=new Hi(lu),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(e){return Yt(e)&&this.known.has(e)},n.prototype.pass=function(e){if(Yt(e)){var t=w8(e);return this.passes.set(t,e),t}return e},n.prototype.admit=function(e){var t=this;if(Yt(e)){var r=this.passes.get(e);if(r)return r;var a=Object.getPrototypeOf(e);switch(a){case Array.prototype:{if(this.known.has(e))return e;var i=e.map(this.admit,this),o=this.pool.lookupArray(i);return o.array||(this.known.add(o.array=i),globalThis.__DEV__!==!1&&Object.freeze(i)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var u=Object.getPrototypeOf(e),c=[u],f=this.sortedKeys(e);c.push(f.json);var d=c.length;f.sorted.forEach(function(g){c.push(t.admit(e[g]))});var o=this.pool.lookupArray(c);if(!o.object){var p=o.object=Object.create(u);this.known.add(p),f.sorted.forEach(function(g,y){p[g]=c[d+y]}),globalThis.__DEV__!==!1&&Object.freeze(p)}return o.object}}}return e},n.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var a=JSON.stringify(t);(r.keys=this.keysByJSON.get(a))||this.keysByJSON.set(a,r.keys={sorted:t,json:a})}return r.keys},n}();function AR(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var _8=function(){function n(e){var t=this;this.knownResults=new(lu?WeakMap:Map),this.config=ru(e,{addTypename:e.addTypename!==!1,canonizeResults:ZD(e)}),this.canon=e.canon||new OR,this.executeSelectionSet=vh(function(r){var a,i=r.context.canonizeResults,o=AR(r);o[3]=!i;var u=(a=t.executeSelectionSet).peek.apply(a,o);return u?i?$($({},u),{result:t.canon.admit(u.result)}):u:(TR(r.context.store,r.enclosingRef.__ref),t.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize||Za["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:AR,makeCacheKey:function(r,a,i,o){if(Uf(i.store))return i.store.makeCacheKey(r,Rt(a)?a.__ref:a,i.varString,o)}}),this.executeSubSelectedArray=vh(function(r){return TR(r.context.store,r.enclosingRef.__ref),t.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize||Za["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(r){var a=r.field,i=r.array,o=r.context;if(Uf(o.store))return o.store.makeCacheKey(a,i,o.varString)}})}return n.prototype.resetCanon=function(){this.canon=new OR},n.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,a=e.rootId,i=a===void 0?"ROOT_QUERY":a,o=e.variables,u=e.returnPartialData,c=u===void 0?!0:u,f=e.canonizeResults,d=f===void 0?this.config.canonizeResults:f,p=this.config.cache.policies;o=$($({},L1(mD(r))),o);var v=El(i),g=this.executeSelectionSet({selectionSet:Lh(r).selectionSet,objectOrReference:v,enclosingRef:v,context:$({store:t,query:r,policies:p,variables:o,varString:Uo(o),canonizeResults:d},eN(r,this.config.fragments))}),y;if(g.missing&&(y=[new KD(E8(g.missing),g.missing,r,o)],!c))throw y[0];return{result:g.result,complete:!y,missing:y}},n.prototype.isFresh=function(e,t,r,a){if(Uf(a.store)&&this.knownResults.get(e)===r){var i=this.executeSelectionSet.peek(r,t,a,this.canon.isKnown(e));if(i&&e===i.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,a=e.objectOrReference,i=e.enclosingRef,o=e.context;if(Rt(a)&&!o.policies.rootTypenamesById[a.__ref]&&!o.store.has(a.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(a.__ref," object")};var u=o.variables,c=o.policies,f=o.store,d=f.getFieldValue(a,"__typename"),p=[],v,g=new Xo;this.config.addTypename&&typeof d=="string"&&!c.rootIdsByTypename[d]&&p.push({__typename:d});function y(C,R){var T;return C.missing&&(v=g.merge(v,(T={},T[R]=C.missing,T))),C.result}var x=new Set(r.selections);x.forEach(function(C){var R,T;if(Ph(C,u))if($o(C)){var O=c.readField({fieldName:C.name.value,field:C,variables:o.variables,from:a},o),D=Li(C);O===void 0?V1.added(C)||(v=g.merge(v,(R={},R[D]="Can't find field '".concat(C.name.value,"' on ").concat(Rt(a)?a.__ref+" object":"object "+JSON.stringify(a,null,2)),R))):Zt(O)?O.length>0&&(O=y(t.executeSubSelectedArray({field:C,array:O,enclosingRef:i,context:o}),D)):C.selectionSet?O!=null&&(O=y(t.executeSelectionSet({selectionSet:C.selectionSet,objectOrReference:O,enclosingRef:Rt(O)?O:i,context:o}),D)):o.canonizeResults&&(O=t.canon.pass(O)),O!==void 0&&p.push((T={},T[D]=O,T))}else{var N=lm(C,o.lookupFragment);if(!N&&C.kind===Ee.FRAGMENT_SPREAD)throw ar(10,C.name.value);N&&c.fragmentMatches(N,d)&&N.selectionSet.selections.forEach(x.add,x)}});var w=pm(p),_={result:w,missing:v},S=o.canonizeResults?this.canon.admit(_):nc(_);return S.result&&this.knownResults.set(S.result,r),S},n.prototype.execSubSelectedArrayImpl=function(e){var t=this,r=e.field,a=e.array,i=e.enclosingRef,o=e.context,u,c=new Xo;function f(d,p){var v;return d.missing&&(u=c.merge(u,(v={},v[p]=d.missing,v))),d.result}return r.selectionSet&&(a=a.filter(o.store.canRead)),a=a.map(function(d,p){return d===null?null:Zt(d)?f(t.executeSubSelectedArray({field:r,array:d,enclosingRef:i,context:o}),p):r.selectionSet?f(t.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:d,enclosingRef:Rt(d)?d:i,context:o}),p):(globalThis.__DEV__!==!1&&S8(o.store,r,d),d)}),{result:o.canonizeResults?this.canon.admit(a):a,missing:u}},n}();function E8(n){try{JSON.stringify(n,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function S8(n,e,t){if(!e.selectionSet){var r=new Set([t]);r.forEach(function(a){Yt(a)&&(Ce(!Rt(a),11,g8(n,a),e.name.value),Object.values(a).forEach(r.add,r))})}}var $1=new fm,kR=new WeakMap;function Vf(n){var e=kR.get(n);return e||kR.set(n,e={vars:new Set,dep:OD()}),e}function DR(n){Vf(n).vars.forEach(function(e){return e.forgetCache(n)})}function C8(n){Vf(n).vars.forEach(function(e){return e.attachCache(n)})}function R8(n){var e=new Set,t=new Set,r=function(i){if(arguments.length>0){if(n!==i){n=i,e.forEach(function(c){Vf(c).dep.dirty(r),T8(c)});var o=Array.from(t);t.clear(),o.forEach(function(c){return c(n)})}}else{var u=$1.getValue();u&&(a(u),Vf(u).dep(r))}return n};r.onNextChange=function(i){return t.add(i),function(){t.delete(i)}};var a=r.attachCache=function(i){return e.add(i),Vf(i).vars.add(r),r};return r.forgetCache=function(i){return e.delete(i)},r}function T8(n){n.broadcastWatches&&n.broadcastWatches()}var NR=Object.create(null);function K1(n){var e=JSON.stringify(n);return NR[e]||(NR[e]=Object.create(null))}function IR(n){var e=K1(n);return e.keyFieldsFn||(e.keyFieldsFn=function(t,r){var a=function(o,u){return r.readField(u,o)},i=r.keyObject=X1(n,function(o){var u=Cl(r.storeObject,o,a);return u===void 0&&t!==r.storeObject&&Sn.call(t,o[0])&&(u=Cl(t,o,rN)),Ce(u!==void 0,5,o.join("."),t),u});return"".concat(r.typename,":").concat(JSON.stringify(i))})}function MR(n){var e=K1(n);return e.keyArgsFn||(e.keyArgsFn=function(t,r){var a=r.field,i=r.variables,o=r.fieldName,u=X1(n,function(f){var d=f[0],p=d.charAt(0);if(p==="@"){if(a&&Zr(a.directives)){var v=d.slice(1),g=a.directives.find(function(_){return _.name.value===v}),y=g&&cm(g,i);return y&&Cl(y,f.slice(1))}return}if(p==="$"){var x=d.slice(1);if(i&&Sn.call(i,x)){var w=f.slice(0);return w[0]=x,Cl(i,w)}return}if(t)return Cl(t,f)}),c=JSON.stringify(u);return(t||c!=="{}")&&(o+=":"+c),o})}function X1(n,e){var t=new Xo;return nN(n).reduce(function(r,a){var i,o=e(a);if(o!==void 0){for(var u=a.length-1;u>=0;--u)o=(i={},i[a[u]]=o,i);r=t.merge(r,o)}return r},Object.create(null))}function nN(n){var e=K1(n);if(!e.paths){var t=e.paths=[],r=[];n.forEach(function(a,i){Zt(a)?(nN(a).forEach(function(o){return t.push(r.concat(o))}),r.length=0):(r.push(a),Zt(n[i+1])||(t.push(r.slice(0)),r.length=0))})}return e.paths}function rN(n,e){return n[e]}function Cl(n,e,t){return t=t||rN,aN(e.reduce(function r(a,i){return Zt(a)?a.map(function(o){return r(o,i)}):a&&t(a,i)},n))}function aN(n){return Yt(n)?Zt(n)?n.map(aN):X1(Object.keys(n).sort(),function(e){return Cl(n,e)}):n}function tx(n){return n.args!==void 0?n.args:n.field?cm(n.field,n.variables):null}var O8=function(){},FR=function(n,e){return e.fieldName},PR=function(n,e,t){var r=t.mergeObjects;return r(n,e)},LR=function(n,e){return e},A8=function(){function n(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=$({dataIdFromObject:XD},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return n.prototype.identify=function(e,t){var r,a=this,i=t&&(t.typename||((r=t.storeObject)===null||r===void 0?void 0:r.__typename))||e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o=t&&t.storeObject||e,u=$($({},t),{typename:i,storeObject:o,readField:t&&t.readField||function(){var p=Y1(arguments,o);return a.readField(p,{store:a.cache.data,variables:p.variables})}}),c,f=i&&this.getTypePolicy(i),d=f&&f.keyFn||this.config.dataIdFromObject;return Q1.withValue(!0,function(){for(;d;){var p=d($($({},e),o),u);if(Zt(p))d=IR(p);else{c=p;break}}}),c=c?String(c):void 0,u.keyObject?[c,u.keyObject]:[c]},n.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(r){var a=e[r],i=a.queryType,o=a.mutationType,u=a.subscriptionType,c=va(a,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",r),o&&t.setRootTypename("Mutation",r),u&&t.setRootTypename("Subscription",r),Sn.call(t.toBeAdded,r)?t.toBeAdded[r].push(c):t.toBeAdded[r]=[c]})},n.prototype.updateTypePolicy=function(e,t){var r=this,a=this.getTypePolicy(e),i=t.keyFields,o=t.fields;function u(c,f){c.merge=typeof f=="function"?f:f===!0?PR:f===!1?LR:c.merge}u(a,t.merge),a.keyFn=i===!1?O8:Zt(i)?IR(i):typeof i=="function"?i:a.keyFn,o&&Object.keys(o).forEach(function(c){var f=r.getFieldPolicy(e,c,!0),d=o[c];if(typeof d=="function")f.read=d;else{var p=d.keyArgs,v=d.read,g=d.merge;f.keyFn=p===!1?FR:Zt(p)?MR(p):typeof p=="function"?p:f.keyFn,typeof v=="function"&&(f.read=v),u(f,g)}f.read&&f.merge&&(f.keyFn=f.keyFn||FR)})},n.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var r="ROOT_"+e.toUpperCase(),a=this.rootTypenamesById[r];t!==a&&(Ce(!a||a===e,6,e),a&&delete this.rootIdsByTypename[a],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},n.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(r){t.getSupertypeSet(r,!0),e[r].forEach(function(a){t.getSupertypeSet(a,!0).add(r);var i=a.match(JD);(!i||i[0]!==a)&&t.fuzzySubtypes.set(a,new RegExp(a))})})},n.prototype.getTypePolicy=function(e){var t=this;if(!Sn.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var a=this.supertypeMap.get(e);!a&&this.fuzzySubtypes.size&&(a=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(function(o,u){if(o.test(e)){var c=t.supertypeMap.get(u);c&&c.forEach(function(f){return a.add(f)})}})),a&&a.size&&a.forEach(function(o){var u=t.getTypePolicy(o),c=u.fields,f=va(u,["fields"]);Object.assign(r,f),Object.assign(r.fields,c)})}var i=this.toBeAdded[e];return i&&i.length&&i.splice(0).forEach(function(o){t.updateTypePolicy(e,o)}),this.typePolicies[e]},n.prototype.getFieldPolicy=function(e,t,r){if(e){var a=this.getTypePolicy(e).fields;return a[t]||r&&(a[t]=Object.create(null))}},n.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},n.prototype.fragmentMatches=function(e,t,r,a){var i=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var u=this.getSupertypeSet(t,!0),c=[u],f=function(y){var x=i.getSupertypeSet(y,!1);x&&x.size&&c.indexOf(x)<0&&c.push(x)},d=!!(r&&this.fuzzySubtypes.size),p=!1,v=0;v<c.length;++v){var g=c[v];if(g.has(o))return u.has(o)||(p&&globalThis.__DEV__!==!1&&Ce.warn(7,t,o),u.add(o)),!0;g.forEach(f),d&&v===c.length-1&&ex(e.selectionSet,r,a)&&(d=!1,p=!0,this.fuzzySubtypes.forEach(function(y,x){var w=t.match(y);w&&w[0]===t&&f(x)}))}return!1},n.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!!(r&&r.keyFn)},n.prototype.getStoreFieldName=function(e){var t=e.typename,r=e.fieldName,a=this.getFieldPolicy(t,r,!1),i,o=a&&a.keyFn;if(o&&t)for(var u={typename:t,fieldName:r,field:e.field||null,variables:e.variables},c=tx(e);o;){var f=o(c,u);if(Zt(f))o=MR(f);else{i=f||r;break}}return i===void 0&&(i=e.field?$H(e.field,e.variables):vD(r,tx(e))),i===!1?r:r===Yo(i)?i:r+":"+i},n.prototype.readField=function(e,t){var r=e.from;if(r){var a=e.field||e.fieldName;if(a){if(e.typename===void 0){var i=t.store.getFieldValue(r,"__typename");i&&(e.typename=i)}var o=this.getStoreFieldName(e),u=Yo(o),c=t.store.getFieldValue(r,o),f=this.getFieldPolicy(e.typename,u,!1),d=f&&f.read;if(d){var p=BR(this,r,e,t,t.store.getStorage(Rt(r)?r.__ref:r,o));return $1.withValue(this.cache,d,[c,p])}return c}}},n.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t,!1);return r&&r.read},n.prototype.getMergeFunction=function(e,t,r){var a=this.getFieldPolicy(e,t,!1),i=a&&a.merge;return!i&&r&&(a=this.getTypePolicy(r),i=a&&a.merge),i},n.prototype.runMergeFunction=function(e,t,r,a,i){var o=r.field,u=r.typename,c=r.merge;return c===PR?iN(a.store)(e,t):c===LR?t:(a.overwrite&&(e=void 0),c(e,t,BR(this,void 0,{typename:u,fieldName:o.name.value,field:o,variables:a.variables},a,i||Object.create(null))))},n}();function BR(n,e,t,r,a){var i=n.getStoreFieldName(t),o=Yo(i),u=t.variables||r.variables,c=r.store,f=c.toReference,d=c.canRead;return{args:tx(t),field:t.field||null,fieldName:o,storeFieldName:i,variables:u,isReference:Rt,toReference:f,storage:a,cache:n.cache,canRead:d,readField:function(){return n.readField(Y1(arguments,e,u),r)},mergeObjects:iN(r.store)}}function Y1(n,e,t){var r=n[0],a=n[1],i=n.length,o;return typeof r=="string"?o={fieldName:r,from:i>1?a:e}:(o=$({},r),Sn.call(o,"from")||(o.from=e)),globalThis.__DEV__!==!1&&o.from===void 0&&globalThis.__DEV__!==!1&&Ce.warn(8,Yk(Array.from(n))),o.variables===void 0&&(o.variables=t),o}function iN(n){return function(t,r){if(Zt(t)||Zt(r))throw ar(9);if(Yt(t)&&Yt(r)){var a=n.getFieldValue(t,"__typename"),i=n.getFieldValue(r,"__typename"),o=a&&i&&a!==i;if(o)return r;if(Rt(t)&&fl(r))return n.merge(t.__ref,r),t;if(fl(t)&&Rt(r))return n.merge(t,r.__ref),r;if(fl(t)&&fl(r))return $($({},t),r)}return r}}function C0(n,e,t){var r="".concat(e).concat(t),a=n.flavors.get(r);return a||n.flavors.set(r,a=n.clientOnly===e&&n.deferred===t?n:$($({},n),{clientOnly:e,deferred:t})),a}var k8=function(){function n(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return n.prototype.writeToStore=function(e,t){var r=this,a=t.query,i=t.result,o=t.dataId,u=t.variables,c=t.overwrite,f=nu(a),d=y8();u=$($({},L1(f)),u);var p=$($({store:e,written:Object.create(null),merge:function(g,y){return d.merge(g,y)},variables:u,varString:Uo(u)},eN(a,this.fragments)),{overwrite:!!c,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),v=this.processSelectionSet({result:i||Object.create(null),dataId:o,selectionSet:f.selectionSet,mergeTree:{map:new Map},context:p});if(!Rt(v))throw ar(12,i);return p.incomingById.forEach(function(g,y){var x=g.storeObject,w=g.mergeTree,_=g.fieldNodeSet,S=El(y);if(w&&w.map.size){var C=r.applyMerges(w,S,x,p);if(Rt(C))return;x=C}if(globalThis.__DEV__!==!1&&!p.overwrite){var R=Object.create(null);_.forEach(function(D){D.selectionSet&&(R[D.name.value]=!0)});var T=function(D){return R[Yo(D)]===!0},O=function(D){var N=w&&w.map.get(D);return!!(N&&N.info&&N.info.merge)};Object.keys(x).forEach(function(D){T(D)&&!O(D)&&D8(S,x,D,p.store)})}e.merge(y,x)}),e.retain(v.__ref),v},n.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,a=e.result,i=e.selectionSet,o=e.context,u=e.mergeTree,c=this.cache.policies,f=Object.create(null),d=r&&c.rootTypenamesById[r]||Hb(a,i,o.fragmentMap)||r&&o.store.get(r,"__typename");typeof d=="string"&&(f.__typename=d);var p=function(){var C=Y1(arguments,f,o.variables);if(Rt(C.from)){var R=o.incomingById.get(C.from.__ref);if(R){var T=c.readField($($({},C),{from:R.storeObject}),o);if(T!==void 0)return T}}return c.readField(C,o)},v=new Set;this.flattenFields(i,a,o,d).forEach(function(C,R){var T,O=Li(R),D=a[O];if(v.add(R),D!==void 0){var N=c.getStoreFieldName({typename:d,fieldName:R.name.value,field:R,variables:C.variables}),k=zR(u,N),I=t.processFieldValue(D,R,R.selectionSet?C0(C,!1,!1):C,k),B=void 0;R.selectionSet&&(Rt(I)||fl(I))&&(B=p("__typename",I));var U=c.getMergeFunction(d,R.name.value,B);U?k.info={field:R,typename:d,merge:U}:UR(u,N),f=C.merge(f,(T={},T[N]=I,T))}else globalThis.__DEV__!==!1&&!C.clientOnly&&!C.deferred&&!V1.added(R)&&!c.getReadFunction(d,R.name.value)&&globalThis.__DEV__!==!1&&Ce.error(13,Li(R),a)});try{var g=c.identify(a,{typename:d,selectionSet:i,fragmentMap:o.fragmentMap,storeObject:f,readField:p}),y=g[0],x=g[1];r=r||y,x&&(f=o.merge(f,x))}catch(C){if(!r)throw C}if(typeof r=="string"){var w=El(r),_=o.written[r]||(o.written[r]=[]);if(_.indexOf(i)>=0||(_.push(i),this.reader&&this.reader.isFresh(a,w,i,o)))return w;var S=o.incomingById.get(r);return S?(S.storeObject=o.merge(S.storeObject,f),S.mergeTree=nx(S.mergeTree,u),v.forEach(function(C){return S.fieldNodeSet.add(C)})):o.incomingById.set(r,{storeObject:f,mergeTree:kv(u)?void 0:u,fieldNodeSet:v}),w}return f},n.prototype.processFieldValue=function(e,t,r,a){var i=this;return!t.selectionSet||e===null?globalThis.__DEV__!==!1?PD(e):e:Zt(e)?e.map(function(o,u){var c=i.processFieldValue(o,t,r,zR(a,u));return UR(a,u),c}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:a})},n.prototype.flattenFields=function(e,t,r,a){a===void 0&&(a=Hb(t,e,r.fragmentMap));var i=new Map,o=this.cache.policies,u=new Hi(!1);return function c(f,d){var p=u.lookup(f,d.clientOnly,d.deferred);p.visited||(p.visited=!0,f.selections.forEach(function(v){if(Ph(v,r.variables)){var g=d.clientOnly,y=d.deferred;if(!(g&&y)&&Zr(v.directives)&&v.directives.forEach(function(_){var S=_.name.value;if(S==="client"&&(g=!0),S==="defer"){var C=cm(_,r.variables);(!C||C.if!==!1)&&(y=!0)}}),$o(v)){var x=i.get(v);x&&(g=g&&x.clientOnly,y=y&&x.deferred),i.set(v,C0(r,g,y))}else{var w=lm(v,r.lookupFragment);if(!w&&v.kind===Ee.FRAGMENT_SPREAD)throw ar(14,v.name.value);w&&o.fragmentMatches(w,a,t,r.variables)&&c(w.selectionSet,C0(r,g,y))}}}))}(e,r),i},n.prototype.applyMerges=function(e,t,r,a,i){var o,u=this;if(e.map.size&&!Rt(r)){var c=!Zt(r)&&(Rt(t)||fl(t))?t:void 0,f=r;c&&!i&&(i=[Rt(c)?c.__ref:c]);var d,p=function(v,g){return Zt(v)?typeof g=="number"?v[g]:void 0:a.store.getFieldValue(v,String(g))};e.map.forEach(function(v,g){var y=p(c,g),x=p(f,g);if(x!==void 0){i&&i.push(g);var w=u.applyMerges(v,y,x,a,i);w!==x&&(d=d||new Map,d.set(g,w)),i&&Ce(i.pop()===g)}}),d&&(r=Zt(f)?f.slice(0):$({},f),d.forEach(function(v,g){r[g]=v}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,a,i&&(o=a.store).getStorage.apply(o,i)):r},n}(),oN=[];function zR(n,e){var t=n.map;return t.has(e)||t.set(e,oN.pop()||{map:new Map}),t.get(e)}function nx(n,e){if(n===e||!e||kv(e))return n;if(!n||kv(n))return e;var t=n.info&&e.info?$($({},n.info),e.info):n.info||e.info,r=n.map.size&&e.map.size,a=r?new Map:n.map.size?n.map:e.map,i={info:t,map:a};if(r){var o=new Set(e.map.keys());n.map.forEach(function(u,c){i.map.set(c,nx(u,e.map.get(c))),o.delete(c)}),o.forEach(function(u){i.map.set(u,nx(e.map.get(u),n.map.get(u)))})}return i}function kv(n){return!n||!(n.info||n.map.size)}function UR(n,e){var t=n.map,r=t.get(e);r&&kv(r)&&(oN.push(r),t.delete(e))}var VR=new Set;function D8(n,e,t,r){var a=function(p){var v=r.getFieldValue(p,t);return typeof v=="object"&&v},i=a(n);if(i){var o=a(e);if(o&&!Rt(i)&&!_t(i,o)&&!Object.keys(i).every(function(p){return r.getFieldValue(o,p)!==void 0})){var u=r.getFieldValue(n,"__typename")||r.getFieldValue(e,"__typename"),c=Yo(t),f="".concat(u,".").concat(c);if(!VR.has(f)){VR.add(f);var d=[];!Zt(i)&&!Zt(o)&&[i,o].forEach(function(p){var v=r.getFieldValue(p,"__typename");typeof v=="string"&&!d.includes(v)&&d.push(v)}),globalThis.__DEV__!==!1&&Ce.warn(15,c,u,d.length?"either ensure all objects of type "+d.join(" and ")+" have an ID or a custom merge function, or ":"",f,$({},i),$({},o))}}}}var N8=function(n){ei(e,n);function e(t){t===void 0&&(t={});var r=n.call(this)||this;return r.watches=new Set,r.addTypenameTransform=new AD(V1),r.assumeImmutableResults=!0,r.makeVar=R8,r.txCount=0,r.config=m8(t),r.addTypename=!!r.config.addTypename,r.policies=new A8({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return e.prototype.init=function(){var t=this.data=new mh.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var r=this,a=this.storeReader,i=this.config.fragments;this.storeWriter=new k8(this,this.storeReader=new _8({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:ZD(this.config),canon:t?void 0:a&&a.canon,fragments:i}),i),this.maybeBroadcastWatch=vh(function(o,u){return r.broadcastWatch(o,u)},{max:this.config.resultCacheMaxSize||Za["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(o){var u=o.optimistic?r.optimisticData:r.data;if(Uf(u)){var c=o.optimistic,f=o.id,d=o.variables;return u.makeCacheKey(o.query,o.callback,Uo({optimistic:c,id:f,variables:d}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var r=t.returnPartialData,a=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore($($({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:a})).result||null}catch(i){if(i instanceof KD)return null;throw i}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(Sn.call(t,"id")&&!t.id)return!1;var r=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore($($({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var r=this;return this.watches.size||C8(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&DR(r),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){var r;Uo.reset(),Is.reset(),this.addTypenameTransform.resetCache(),(r=this.config.fragments)===null||r===void 0||r.resetCaches();var a=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),a},e.prototype.retain=function(t,r){return(r?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,r){return(r?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(Rt(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(r){globalThis.__DEV__!==!1&&Ce.warn(r)}},e.prototype.evict=function(t){if(!t.id){if(Sn.call(t,"id"))return!1;t=$($({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var r=this;return this.init(),Uo.reset(),t&&t.discardWatches?(this.watches.forEach(function(a){return r.maybeBroadcastWatch.forget(a)}),this.watches.clear(),DR(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var r=this.optimisticData.removeLayer(t);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},e.prototype.batch=function(t){var r=this,a=t.update,i=t.optimistic,o=i===void 0?!0:i,u=t.removeOptimistic,c=t.onWatchUpdated,f,d=function(v){var g=r,y=g.data,x=g.optimisticData;++r.txCount,v&&(r.data=r.optimisticData=v);try{return f=a(r)}finally{--r.txCount,r.data=y,r.optimisticData=x}},p=new Set;return c&&!this.txCount&&this.broadcastWatches($($({},t),{onWatchUpdated:function(v){return p.add(v),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,d):o===!1?d(this.data):d(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),c&&p.size?(this.broadcastWatches($($({},t),{onWatchUpdated:function(v,g){var y=c.call(this,v,g);return y!==!1&&p.delete(v),y}})),p.size&&p.forEach(function(v){return r.maybeBroadcastWatch.dirty(v)})):this.broadcastWatches(t),f},e.prototype.performTransaction=function(t,r){return this.batch({update:t,optimistic:r||r!==null})},e.prototype.transformDocument=function(t){return this.addTypenameToDocument(this.addFragmentsToDocument(t))},e.prototype.fragmentMatches=function(t,r){return this.policies.fragmentMatches(t,r)},e.prototype.lookupFragment=function(t){var r;return((r=this.config.fragments)===null||r===void 0?void 0:r.lookup(t))||null},e.prototype.broadcastWatches=function(t){var r=this;this.txCount||this.watches.forEach(function(a){return r.maybeBroadcastWatch(a,t)})},e.prototype.addFragmentsToDocument=function(t){var r=this.config.fragments;return r?r.transform(t):t},e.prototype.addTypenameToDocument=function(t){return this.addTypename?this.addTypenameTransform.transformDocument(t):t},e.prototype.broadcastWatch=function(t,r){var a=t.lastDiff,i=this.diff(t);r&&(t.optimistic&&typeof r.optimistic=="string"&&(i.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,t,i,a)===!1)||(!a||!_t(a.result,i.result))&&t.callback(t.lastDiff=i,a)},e}($D);globalThis.__DEV__!==!1&&(N8.prototype.getMemoryInternals=kH);var pt;(function(n){n[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error"})(pt||(pt={}));function Rl(n){return n?n<7:!1}var jR=Object.assign,I8=Object.hasOwnProperty,rx=function(n){ei(e,n);function e(t){var r=t.queryManager,a=t.queryInfo,i=t.options,o=n.call(this,function(w){try{var _=w._subscription._observer;_&&!_.error&&(_.error=M8)}catch{}var S=!o.observers.size;o.observers.add(w);var C=o.last;return C&&C.error?w.error&&w.error(C.error):C&&C.result&&w.next&&w.next(o.maskResult(C.result)),S&&o.reobserve().catch(function(){}),function(){o.observers.delete(w)&&!o.observers.size&&o.tearDownQuery()}})||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=a,o.queryManager=r,o.waitForOwnResult=R0(i.fetchPolicy),o.isTornDown=!1,o.subscribeToMore=o.subscribeToMore.bind(o),o.maskResult=o.maskResult.bind(o);var u=r.defaultOptions.watchQuery,c=u===void 0?{}:u,f=c.fetchPolicy,d=f===void 0?"cache-first":f,p=i.fetchPolicy,v=p===void 0?d:p,g=i.initialFetchPolicy,y=g===void 0?v==="standby"?d:v:g;o.options=$($({},i),{initialFetchPolicy:y,fetchPolicy:v}),o.queryId=a.queryId||r.generateQueryId();var x=nu(o.query);return o.queryName=x&&x.name&&x.name.value,o}return Object.defineProperty(e.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(r,a){var i={next:function(u){r(u),t.observers.delete(i),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){o.unsubscribe()},0)},error:a},o=t.subscribe(i)})},e.prototype.resetDiff=function(){this.queryInfo.resetDiff()},e.prototype.getCurrentFullResult=function(t){t===void 0&&(t=!0);var r=this.getLastResult(!0),a=this.queryInfo.networkStatus||r&&r.networkStatus||pt.ready,i=$($({},r),{loading:Rl(a),networkStatus:a}),o=this.options.fetchPolicy,u=o===void 0?"cache-first":o;if(!(R0(u)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers))if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var c=this.queryInfo.getDiff();(c.complete||this.options.returnPartialData)&&(i.data=c.result),_t(i.data,{})&&(i.data=void 0),c.complete?(delete i.partial,c.complete&&i.networkStatus===pt.loading&&(u==="cache-first"||u==="cache-only")&&(i.networkStatus=pt.ready,i.loading=!1)):i.partial=!0,i.networkStatus===pt.ready&&(i.error||i.errors)&&(i.networkStatus=pt.error),globalThis.__DEV__!==!1&&!c.complete&&!this.options.partialRefetch&&!i.loading&&!i.data&&!i.error&&uN(c.missing)}return t&&this.updateLastResult(i),i},e.prototype.getCurrentResult=function(t){return t===void 0&&(t=!0),this.maskResult(this.getCurrentFullResult(t))},e.prototype.isDifferentFromLastResult=function(t,r){if(!this.last)return!0;var a=this.queryManager.getDocumentInfo(this.query),i=this.queryManager.dataMasking,o=i?a.nonReactiveQuery:this.query,u=i||a.hasNonreactiveDirective?!jD(o,this.last.result,t,this.variables):!_t(this.last.result,t);return u||r&&!_t(this.last.variables,r)},e.prototype.getLast=function(t,r){var a=this.last;if(a&&a[t]&&(!r||_t(a.variables,this.variables)))return a[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var r,a={pollInterval:0},i=this.options.fetchPolicy;if(i==="no-cache"?a.fetchPolicy="no-cache":a.fetchPolicy="network-only",globalThis.__DEV__!==!1&&t&&I8.call(t,"variables")){var o=mD(this.query),u=o.variableDefinitions;(!u||!u.some(function(c){return c.variable.name.value==="variables"}))&&globalThis.__DEV__!==!1&&Ce.warn(21,t,((r=o.name)===null||r===void 0?void 0:r.value)||o)}return t&&!_t(this.options.variables,t)&&(a.variables=this.options.variables=$($({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(a,pt.refetch)},e.prototype.fetchMore=function(t){var r=this,a=$($({},t.query?t:$($($($({},this.options),{query:this.options.query}),t),{variables:$($({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"});a.query=this.transformDocument(a.query);var i=this.queryManager.generateQueryId();this.lastQuery=t.query?this.transformDocument(this.options.query):a.query;var o=this.queryInfo,u=o.networkStatus;o.networkStatus=pt.fetchMore,a.notifyOnNetworkStatusChange&&this.observe();var c=new Set,f=t==null?void 0:t.updateQuery,d=this.options.fetchPolicy!=="no-cache";return d||Ce(f,22),this.queryManager.fetchQuery(i,a,pt.fetchMore).then(function(p){if(r.queryManager.removeQuery(i),o.networkStatus===pt.fetchMore&&(o.networkStatus=u),d)r.queryManager.cache.batch({update:function(y){var x=t.updateQuery;x?y.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(w){return x(w,{fetchMoreResult:p.data,variables:a.variables})}):y.writeQuery({query:a.query,variables:a.variables,data:p.data})},onWatchUpdated:function(y){c.add(y.query)}});else{var v=r.getLast("result"),g=f(v.data,{fetchMoreResult:p.data,variables:a.variables});r.reportResult($($({},v),{networkStatus:u,loading:Rl(u),data:g}),r.variables)}return r.maskResult(p)}).finally(function(){d&&!c.has(r.query)&&sN(r)})},e.prototype.subscribeToMore=function(t){var r=this,a=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(i){var o=t.updateQuery;o&&r.updateQuery(function(u,c){return o(u,$({subscriptionData:i},c))})},error:function(i){if(t.onError){t.onError(i);return}globalThis.__DEV__!==!1&&Ce.error(23,i)}});return this.subscriptions.add(a),function(){r.subscriptions.delete(a)&&a.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.silentSetOptions=function(t){var r=ru(this.options,t||{});jR(this.options,r)},e.prototype.setVariables=function(t){return _t(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},pt.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var r=this.queryManager,a=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}),i=a.result,o=a.complete,u=t(i,{variables:this.variables,complete:!!o,previousData:i});u&&(r.cache.writeQuery({query:this.options.query,data:u,variables:this.variables}),r.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,r){if(r.nextFetchPolicy){var a=r.fetchPolicy,i=a===void 0?"cache-first":a,o=r.initialFetchPolicy,u=o===void 0?i:o;i==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(i,{reason:t,options:r,observable:this,initialFetchPolicy:u}):t==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},e.prototype.fetch=function(t,r,a){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,t,r,a)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var r=this,a=r.pollingInfo,i=r.options.pollInterval;if(!i||!this.hasObservers()){a&&(clearTimeout(a.timeout),delete this.pollingInfo);return}if(!(a&&a.interval===i)){Ce(i,24);var o=a||(this.pollingInfo={});o.interval=i;var u=function(){var f,d;t.pollingInfo&&(!Rl(t.queryInfo.networkStatus)&&!(!((d=(f=t.options).skipPollAttempt)===null||d===void 0)&&d.call(f))?t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},pt.poll).then(c,c):c())},c=function(){var f=t.pollingInfo;f&&(clearTimeout(f.timeout),f.timeout=setTimeout(u,f.interval))};c()}}},e.prototype.updateLastResult=function(t,r){r===void 0&&(r=this.variables);var a=this.getLastError();return a&&this.last&&!_t(r,this.last.variables)&&(a=void 0),this.last=$({result:this.queryManager.assumeImmutableResults?t:PD(t),variables:r},a?{error:a}:null)},e.prototype.reobserveAsConcast=function(t,r){var a=this;this.isTornDown=!1;var i=r===pt.refetch||r===pt.fetchMore||r===pt.poll,o=this.options.variables,u=this.options.fetchPolicy,c=ru(this.options,t||{}),f=i?c:jR(this.options,c),d=this.transformDocument(f.query);this.lastQuery=d,i||(this.updatePolling(),t&&t.variables&&!_t(t.variables,o)&&f.fetchPolicy!=="standby"&&(f.fetchPolicy===u||typeof f.nextFetchPolicy=="function")&&(this.applyNextFetchPolicy("variables-changed",f),r===void 0&&(r=pt.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=R0(f.fetchPolicy));var p=function(){a.concast===y&&(a.waitForOwnResult=!1)},v=f.variables&&$({},f.variables),g=this.fetch(f,r,d),y=g.concast,x=g.fromLink,w={next:function(_){_t(a.variables,v)&&(p(),a.reportResult(_,v))},error:function(_){_t(a.variables,v)&&(UD(_)||(_=new za({networkError:_})),p(),a.reportError(_,v))}};return!i&&(x||!this.concast)&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=y,this.observer=w),y.addObserver(w),y},e.prototype.reobserve=function(t,r){return EG(this.reobserveAsConcast(t,r).promise.then(this.maskResult))},e.prototype.resubscribeAfterError=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=this.last;this.resetLastResults();var i=this.subscribe.apply(this,t);return this.last=a,i},e.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},e.prototype.reportResult=function(t,r){var a=this.getLastError(),i=this.isDifferentFromLastResult(t,r);(a||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,r),(a||i)&&Bf(this.observers,"next",this.maskResult(t))},e.prototype.reportError=function(t,r){var a=$($({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:pt.error,loading:!1});this.updateLastResult(a,r),Bf(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e.prototype.transformDocument=function(t){return this.queryManager.transform(t)},e.prototype.maskResult=function(t){return t&&"data"in t?$($({},t),{data:this.queryManager.maskOperation({document:this.query,data:t.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):t},e}(Ft);LD(rx);function sN(n){var e=n.options,t=e.fetchPolicy,r=e.nextFetchPolicy;return t==="cache-and-network"||t==="network-only"?n.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(a,i){return this.nextFetchPolicy=r,typeof this.nextFetchPolicy=="function"?this.nextFetchPolicy(a,i):t}}):n.reobserve()}function M8(n){globalThis.__DEV__!==!1&&Ce.error(25,n.message,n.stack)}function uN(n){globalThis.__DEV__!==!1&&n&&globalThis.__DEV__!==!1&&Ce.debug(26,n)}function R0(n){return n==="network-only"||n==="no-cache"||n==="standby"}var hl=new(lu?WeakMap:Map);function T0(n,e){var t=n[e];typeof t=="function"&&(n[e]=function(){return hl.set(n,(hl.get(n)+1)%1e15),t.apply(this,arguments)})}function qR(n){n.notifyTimeout&&(clearTimeout(n.notifyTimeout),n.notifyTimeout=void 0)}var O0=function(){function n(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=e.cache;hl.has(r)||(hl.set(r,0),T0(r,"evict"),T0(r,"modify"),T0(r,"reset"))}return n.prototype.init=function(e){var t=e.networkStatus||pt.loading;return this.variables&&this.networkStatus!==pt.loading&&!_t(this.variables,e.variables)&&(t=pt.setVariables),_t(e.variables,this.variables)||(this.lastDiff=void 0,this.cancel()),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},n.prototype.reset=function(){qR(this),this.dirty=!1},n.prototype.resetDiff=function(){this.lastDiff=void 0},n.prototype.getDiff=function(){var e=this.getDiffOptions();if(this.lastDiff&&_t(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var t=this.observableQuery;if(t&&t.options.fetchPolicy==="no-cache")return{complete:!1};var r=this.cache.diff(e);return this.updateLastDiff(r,e),r},n.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},n.prototype.setDiff=function(e){var t=this,r,a=this.lastDiff&&this.lastDiff.diff;e&&!e.complete&&(!((r=this.observableQuery)===null||r===void 0)&&r.getLastError())||(this.updateLastDiff(e),!this.dirty&&!_t(a&&a.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0))))},n.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=t.getDiff();r.fromOptimisticTransaction?e.observe():sN(e)})):delete this.oqListener)},n.prototype.notify=function(){var e=this;qR(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},n.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(Rl(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},n.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel();var e=this.observableQuery;e&&e.stopPolling()}},n.prototype.cancel=function(){var e;(e=this.cancelWatch)===null||e===void 0||e.call(this),this.cancelWatch=void 0},n.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var a=$($({},this.getDiffOptions(e)),{watcher:this,callback:function(i){return t.setDiff(i)}});(!this.lastWatch||!_t(a,this.lastWatch))&&(this.cancel(),this.cancelWatch=this.cache.watch(this.lastWatch=a))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(e,t){var r=this.lastWrite;return!(r&&r.dmCount===hl.get(this.cache)&&_t(t,r.variables)&&_t(e.data,r.result.data))},n.prototype.markResult=function(e,t,r,a){var i=this,o=new Xo,u=Zr(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&Zr(e.incremental)){var c=BD(this.getDiff().result,e);e.data=c}else if("hasNext"in e&&e.hasNext){var f=this.getDiff();e.data=o.merge(f.result,e.data)}this.graphQLErrors=u,r.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(r.variables)):a!==0&&(ax(e,r.errorPolicy)?this.cache.performTransaction(function(d){if(i.shouldWrite(e,r.variables))d.writeQuery({query:t,data:e.data,variables:r.variables,overwrite:a===1}),i.lastWrite={result:e,variables:r.variables,dmCount:hl.get(i.cache)};else if(i.lastDiff&&i.lastDiff.diff.complete){e.data=i.lastDiff.diff.result;return}var p=i.getDiffOptions(r.variables),v=d.diff(p);!i.stopped&&_t(i.variables,r.variables)&&i.updateWatch(r.variables),i.updateLastDiff(v,p),v.complete&&(e.data=v.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=pt.ready},n.prototype.markError=function(e){return this.networkStatus=pt.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},n}();function ax(n,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",r=!Mp(n);return!r&&t&&n.data&&(r=!0),r}var F8=Object.prototype.hasOwnProperty,WR=Object.create(null),P8=function(){function n(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new F1(Za["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Hi(!1),this.noCacheWarningsByQueryId=new Set;var r=new AD(function(i){return t.cache.transformDocument(i)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking;var a=e.documentTransform;this.documentTransform=a?r.concat(a).concat(r):r,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(ar(27))},n.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(e){return wo(this,arguments,void 0,function(t){var r,a,i,o,u,c,f,d=t.mutation,p=t.variables,v=t.optimisticResponse,g=t.updateQueries,y=t.refetchQueries,x=y===void 0?[]:y,w=t.awaitRefetchQueries,_=w===void 0?!1:w,S=t.update,C=t.onQueryUpdated,R=t.fetchPolicy,T=R===void 0?((c=this.defaultOptions.mutate)===null||c===void 0?void 0:c.fetchPolicy)||"network-only":R,O=t.errorPolicy,D=O===void 0?((f=this.defaultOptions.mutate)===null||f===void 0?void 0:f.errorPolicy)||"none":O,N=t.keepRootFields,k=t.context;return _o(this,function(I){switch(I.label){case 0:return Ce(d,28),Ce(T==="network-only"||T==="no-cache",29),r=this.generateMutationId(),d=this.cache.transformForLink(this.transform(d)),a=this.getDocumentInfo(d).hasClientExports,p=this.getVariables(d,p),a?[4,this.localState.addExportedVariables(d,p,k)]:[3,2];case 1:p=I.sent(),I.label=2;case 2:return i=this.mutationStore&&(this.mutationStore[r]={mutation:d,variables:p,loading:!0,error:null}),o=v&&this.markMutationOptimistic(v,{mutationId:r,document:d,variables:p,fetchPolicy:T,errorPolicy:D,context:k,updateQueries:g,update:S,keepRootFields:N}),this.broadcastQueries(),u=this,[2,new Promise(function(B,U){return w0(u.getObservableFromLink(d,$($({},k),{optimisticResponse:o?v:void 0}),p,{},!1),function(ee){if(Mp(ee)&&D==="none")throw new za({graphQLErrors:Kb(ee)});i&&(i.loading=!1,i.error=null);var te=$({},ee);return typeof x=="function"&&(x=x(te)),D==="ignore"&&Mp(te)&&delete te.errors,u.markMutationResult({mutationId:r,result:te,document:d,variables:p,fetchPolicy:T,errorPolicy:D,context:k,update:S,updateQueries:g,awaitRefetchQueries:_,refetchQueries:x,removeOptimistic:o?r:void 0,onQueryUpdated:C,keepRootFields:N})}).subscribe({next:function(ee){u.broadcastQueries(),(!("hasNext"in ee)||ee.hasNext===!1)&&B($($({},ee),{data:u.maskOperation({document:d,data:ee.data,fetchPolicy:T,id:r})}))},error:function(ee){i&&(i.loading=!1,i.error=ee),o&&u.cache.removeOptimistic(r),u.broadcastQueries(),U(ee instanceof za?ee:new za({networkError:ee}))}})})]}})})},n.prototype.markMutationResult=function(e,t){var r=this;t===void 0&&(t=this.cache);var a=e.result,i=[],o=e.fetchPolicy==="no-cache";if(!o&&ax(a,e.errorPolicy)){if(Sl(a)||i.push({result:a.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),Sl(a)&&Zr(a.incremental)){var u=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),c=void 0;u.result&&(c=BD(u.result,a)),typeof c<"u"&&(a.data=c,i.push({result:c,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var f=e.updateQueries;f&&this.queries.forEach(function(p,v){var g=p.observableQuery,y=g&&g.queryName;if(!(!y||!F8.call(f,y))){var x=f[y],w=r.queries.get(v),_=w.document,S=w.variables,C=t.diff({query:_,variables:S,returnPartialData:!0,optimistic:!1}),R=C.result,T=C.complete;if(T&&R){var O=x(R,{mutationResult:a,queryName:_&&kf(_)||void 0,queryVariables:S});O&&i.push({result:O,dataId:"ROOT_QUERY",query:_,variables:S})}}})}if(i.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var d=[];if(this.refetchQueries({updateCache:function(p){o||i.forEach(function(x){return p.write(x)});var v=e.update,g=!OG(a)||Sl(a)&&!a.hasNext;if(v){if(!o){var y=p.diff({id:"ROOT_MUTATION",query:r.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});y.complete&&(a=$($({},a),{data:y.result}),"incremental"in a&&delete a.incremental,"hasNext"in a&&delete a.hasNext)}g&&v(p,a,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&g&&p.modify({id:"ROOT_MUTATION",fields:function(x,w){var _=w.fieldName,S=w.DELETE;return _==="__typename"?x:S}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(p){return d.push(p)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(d).then(function(){return a})}return Promise.resolve(a)},n.prototype.markMutationOptimistic=function(e,t){var r=this,a=typeof e=="function"?e(t.variables,{IGNORE:WR}):e;return a===WR?!1:(this.cache.recordOptimisticTransaction(function(i){try{r.markMutationResult($($({},t),{result:{data:a}}),i)}catch(o){globalThis.__DEV__!==!1&&Ce.error(o)}},t.mutationId),!0)},n.prototype.fetchQuery=function(e,t,r){return this.fetchConcastWithInfo(e,t,r).concast.promise},n.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},n.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},n.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},n.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var r={hasClientExports:lH(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:dh(["nonreactive"],e),nonReactiveQuery:hG(e),clientQuery:this.localState.clientQuery(e),serverQuery:DD([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),defaultVars:L1(nu(e)),asQuery:$($({},e),{definitions:e.definitions.map(function(a){return a.kind==="OperationDefinition"&&a.operation!=="query"?$($({},a),{operation:"query"}):a})})};t.set(e,r)}return t.get(e)},n.prototype.getVariables=function(e,t){return $($({},this.getDocumentInfo(e).defaultVars),t)},n.prototype.watchQuery=function(e){var t=this.transform(e.query);e=$($({},e),{variables:this.getVariables(t,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var r=new O0(this),a=new rx({queryManager:this,queryInfo:r,options:e});return a.lastQuery=t,this.queries.set(a.queryId,r),r.init({document:t,observableQuery:a,variables:a.variables}),a},n.prototype.query=function(e,t){var r=this;t===void 0&&(t=this.generateQueryId()),Ce(e.query,30),Ce(e.query.kind==="Document",31),Ce(!e.returnPartialData,32),Ce(!e.pollInterval,33);var a=this.transform(e.query);return this.fetchQuery(t,$($({},e),{query:a})).then(function(i){return i&&$($({},i),{data:r.maskOperation({document:a,data:i.data,fetchPolicy:e.fetchPolicy,id:t})})}).finally(function(){return r.stopQuery(t)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},n.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(ar(34)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=pt.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},n.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var r=new Map,a=new Map,i=new Map,o=new Set;return Array.isArray(e)&&e.forEach(function(u){if(typeof u=="string")a.set(u,u),i.set(u,!1);else if(BH(u)){var c=Is(t.transform(u));a.set(c,kf(u)),i.set(c,!1)}else Yt(u)&&u.query&&o.add(u)}),this.queries.forEach(function(u,c){var f=u.observableQuery,d=u.document;if(f){if(e==="all"){r.set(c,f);return}var p=f.queryName,v=f.options.fetchPolicy;if(v==="standby"||e==="active"&&!f.hasObservers())return;(e==="active"||p&&i.has(p)||d&&i.has(Is(d)))&&(r.set(c,f),p&&i.set(p,!0),d&&i.set(Is(d),!0))}}),o.size&&o.forEach(function(u){var c=Lb("legacyOneTimeQuery"),f=t.getQuery(c).init({document:u.query,variables:u.variables}),d=new rx({queryManager:t,queryInfo:f,options:$($({},u),{fetchPolicy:"network-only"})});Ce(d.queryId===c),f.setObservableQuery(d),r.set(c,d)}),globalThis.__DEV__!==!1&&i.size&&i.forEach(function(u,c){if(!u){var f=a.get(c);f?globalThis.__DEV__!==!1&&Ce.warn(35,f):globalThis.__DEV__!==!1&&Ce.warn(36)}}),r},n.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(a,i){var o=a.options.fetchPolicy;a.resetLastResults(),(e||o!=="standby"&&o!=="cache-only")&&r.push(a.refetch()),t.getQuery(i).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},n.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},n.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,a=e.variables,i=e.fetchPolicy,o=e.errorPolicy,u=o===void 0?"none":o,c=e.context,f=c===void 0?{}:c,d=e.extensions,p=d===void 0?{}:d;r=this.transform(r),a=this.getVariables(r,a);var v=function(y){return t.getObservableFromLink(r,f,y,p).map(function(x){i!=="no-cache"&&(ax(x,u)&&t.cache.write({query:r,result:x.data,dataId:"ROOT_SUBSCRIPTION",variables:y}),t.broadcastQueries());var w=Mp(x),_=WG(x);if(w||_){var S={};if(w&&(S.graphQLErrors=x.errors),_&&(S.protocolErrors=x.extensions[G1]),u==="none"||_)throw new za(S)}return u==="ignore"&&delete x.errors,x})};if(this.getDocumentInfo(r).hasClientExports){var g=this.localState.addExportedVariables(r,a,f).then(v);return new Ft(function(y){var x=null;return g.then(function(w){return x=w.subscribe(y)},y.error),function(){return x&&x.unsubscribe()}})}return v(a)},n.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},n.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(e,t,r,a,i){var o=this,u;i===void 0&&(i=(u=t==null?void 0:t.queryDeduplication)!==null&&u!==void 0?u:this.queryDeduplication);var c,f=this.getDocumentInfo(e),d=f.serverQuery,p=f.clientQuery;if(d){var v=this,g=v.inFlightLinkObservables,y=v.link,x={query:d,variables:r,operationName:kf(d)||void 0,context:this.prepareContext($($({},t),{forceFetch:!i})),extensions:a};if(t=x.context,i){var w=Is(d),_=Uo(r),S=g.lookup(w,_);if(c=S.observable,!c){var C=new ol([Xb(y,x)]);c=S.observable=C,C.beforeNext(function R(T,O){T==="next"&&"hasNext"in O&&O.hasNext?C.beforeNext(R):g.remove(w,_)})}}else c=new ol([Xb(y,x)])}else c=new ol([Ft.of({data:{}})]),t=this.prepareContext(t);return p&&(c=w0(c,function(R){return o.localState.runResolvers({document:p,remoteResult:R,context:t,variables:r})})),c},n.prototype.getResultsFromLink=function(e,t,r){var a=e.lastRequestId=this.generateRequestId(),i=this.cache.transformForLink(r.query);return w0(this.getObservableFromLink(i,r.context,r.variables),function(o){var u=Kb(o),c=u.length>0,f=r.errorPolicy;if(a>=e.lastRequestId){if(c&&f==="none")throw e.markError(new za({graphQLErrors:u}));e.markResult(o,i,r,t),e.markReady()}var d={data:o.data,loading:!1,networkStatus:pt.ready};return c&&f==="none"&&(d.data=void 0),c&&f!=="ignore"&&(d.errors=u,d.networkStatus=pt.error),d},function(o){var u=UD(o)?o:new za({networkError:o});throw a>=e.lastRequestId&&e.markError(u),u})},n.prototype.fetchConcastWithInfo=function(e,t,r,a){var i=this;r===void 0&&(r=pt.loading),a===void 0&&(a=t.query);var o=this.getVariables(a,t.variables),u=this.getQuery(e),c=this.defaultOptions.watchQuery,f=t.fetchPolicy,d=f===void 0?c&&c.fetchPolicy||"cache-first":f,p=t.errorPolicy,v=p===void 0?c&&c.errorPolicy||"none":p,g=t.returnPartialData,y=g===void 0?!1:g,x=t.notifyOnNetworkStatusChange,w=x===void 0?!1:x,_=t.context,S=_===void 0?{}:_,C=Object.assign({},t,{query:a,variables:o,fetchPolicy:d,errorPolicy:v,returnPartialData:y,notifyOnNetworkStatusChange:w,context:S}),R=function(k){C.variables=k;var I=i.fetchQueryByPolicy(u,C,r);return C.fetchPolicy!=="standby"&&I.sources.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",t),I},T=function(){return i.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(k){T(),setTimeout(function(){return O.cancel(k)})});var O,D;if(this.getDocumentInfo(C.query).hasClientExports)O=new ol(this.localState.addExportedVariables(C.query,C.variables,C.context).then(R).then(function(k){return k.sources})),D=!0;else{var N=R(C.variables);D=N.fromLink,O=new ol(N.sources)}return O.promise.then(T,T),{concast:O,fromLink:D}},n.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,a=e.include,i=e.optimistic,o=i===void 0?!1:i,u=e.removeOptimistic,c=u===void 0?o?Lb("refetchQueries"):void 0:u,f=e.onQueryUpdated,d=new Map;a&&this.getObservableQueries(a).forEach(function(v,g){d.set(g,{oq:v,lastDiff:t.getQuery(g).getDiff()})});var p=new Map;return r&&this.cache.batch({update:r,optimistic:o&&c||!1,removeOptimistic:c,onWatchUpdated:function(v,g,y){var x=v.watcher instanceof O0&&v.watcher.observableQuery;if(x){if(f){d.delete(x.queryId);var w=f(x,g,y);return w===!0&&(w=x.refetch()),w!==!1&&p.set(x,w),w}f!==null&&d.set(x.queryId,{oq:x,lastDiff:y,diff:g})}}}),d.size&&d.forEach(function(v,g){var y=v.oq,x=v.lastDiff,w=v.diff,_;if(f){if(!w){var S=y.queryInfo;S.reset(),w=S.getDiff()}_=f(y,w,x)}(!f||_===!0)&&(_=y.refetch()),_!==!1&&p.set(y,_),g.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(g)}),c&&this.cache.removeOptimistic(c),p},n.prototype.maskOperation=function(e){var t,r,a,i=e.document,o=e.data;if(globalThis.__DEV__!==!1){var u=e.fetchPolicy,c=e.id,f=(t=nu(i))===null||t===void 0?void 0:t.operation,d=((r=f==null?void 0:f[0])!==null&&r!==void 0?r:"o")+c;this.dataMasking&&u==="no-cache"&&!xH(i)&&!this.noCacheWarningsByQueryId.has(d)&&(this.noCacheWarningsByQueryId.add(d),globalThis.__DEV__!==!1&&Ce.warn(37,(a=kf(i))!==null&&a!==void 0?a:"Unnamed ".concat(f??"operation")))}return this.dataMasking?v8(o,i,this.cache):o},n.prototype.maskFragment=function(e){var t=e.data,r=e.fragment,a=e.fragmentName;return this.dataMasking?QD(t,r,this.cache,a):t},n.prototype.fetchQueryByPolicy=function(e,t,r){var a=this,i=t.query,o=t.variables,u=t.fetchPolicy,c=t.refetchWritePolicy,f=t.errorPolicy,d=t.returnPartialData,p=t.context,v=t.notifyOnNetworkStatusChange,g=e.networkStatus;e.init({document:i,variables:o,networkStatus:r});var y=function(){return e.getDiff()},x=function(R,T){T===void 0&&(T=e.networkStatus||pt.loading);var O=R.result;globalThis.__DEV__!==!1&&!d&&!_t(O,{})&&uN(R.missing);var D=function(N){return Ft.of($({data:N,loading:Rl(T),networkStatus:T},R.complete?null:{partial:!0}))};return O&&a.getDocumentInfo(i).hasForcedResolvers?a.localState.runResolvers({document:i,remoteResult:{data:O},context:p,variables:o,onlyRunForcedResolvers:!0}).then(function(N){return D(N.data||void 0)}):f==="none"&&T===pt.refetch&&Array.isArray(R.missing)?D(void 0):D(O)},w=u==="no-cache"?0:r===pt.refetch&&c!=="merge"?1:2,_=function(){return a.getResultsFromLink(e,w,{query:i,variables:o,context:p,fetchPolicy:u,errorPolicy:f})},S=v&&typeof g=="number"&&g!==r&&Rl(r);switch(u){default:case"cache-first":{var C=y();return C.complete?{fromLink:!1,sources:[x(C,e.markReady())]}:d||S?{fromLink:!0,sources:[x(C),_()]}:{fromLink:!0,sources:[_()]}}case"cache-and-network":{var C=y();return C.complete||d||S?{fromLink:!0,sources:[x(C),_()]}:{fromLink:!0,sources:[_()]}}case"cache-only":return{fromLink:!1,sources:[x(y(),e.markReady())]};case"network-only":return S?{fromLink:!0,sources:[x(y()),_()]}:{fromLink:!0,sources:[_()]};case"no-cache":return S?{fromLink:!0,sources:[x(e.getDiff()),_()]}:{fromLink:!0,sources:[_()]};case"standby":return{fromLink:!1,sources:[]}}},n.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new O0(this,e)),this.queries.get(e)},n.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return $($($({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},n}(),L8=function(){function n(e){var t=e.cache,r=e.client,a=e.resolvers,i=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,r&&(this.client=r),a&&this.addResolvers(a),i&&this.setFragmentMatcher(i)}return n.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){t.resolvers=cR(t.resolvers,r)}):this.resolvers=cR(this.resolvers,e)},n.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(e){return wo(this,arguments,void 0,function(t){var r=t.document,a=t.remoteResult,i=t.context,o=t.variables,u=t.onlyRunForcedResolvers,c=u===void 0?!1:u;return _o(this,function(f){return r?[2,this.resolveDocument(r,a.data,i,o,this.fragmentMatcher,c).then(function(d){return $($({},a),{data:d.result})})]:[2,a]})})},n.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(e){return dh(["client"],e)&&this.resolvers?e:null},n.prototype.serverQuery=function(e){return ND(e)},n.prototype.prepareContext=function(e){var t=this.cache;return $($({},e),{cache:t,getCacheKey:function(r){return t.identify(r)}})},n.prototype.addExportedVariables=function(e){return wo(this,arguments,void 0,function(t,r,a){return r===void 0&&(r={}),a===void 0&&(a={}),_o(this,function(i){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,r)||{},this.prepareContext(a),r).then(function(o){return $($({},r),o.exportedVariables)})]:[2,$({},r)]})})},n.prototype.shouldForceResolvers=function(e){var t=!1;return xa(e,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(t=r.arguments.some(function(a){return a.name.value==="always"&&a.value.kind==="BooleanValue"&&a.value.value===!0}),t))return sm}}}),t},n.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:fG(e),variables:t,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(e,t){return wo(this,arguments,void 0,function(r,a,i,o,u,c){var f,d,p,v,g,y,x,w,_,S,C;return i===void 0&&(i={}),o===void 0&&(o={}),u===void 0&&(u=function(){return!0}),c===void 0&&(c=!1),_o(this,function(R){return f=Lh(r),d=hc(r),p=cc(d),v=this.collectSelectionsToResolve(f,p),g=f.operation,y=g?g.charAt(0).toUpperCase()+g.slice(1):"Query",x=this,w=x.cache,_=x.client,S={fragmentMap:p,context:$($({},i),{cache:w,client:_}),variables:o,fragmentMatcher:u,defaultOperationType:y,exportedVariables:{},selectionsToResolve:v,onlyRunForcedResolvers:c},C=!1,[2,this.resolveSelectionSet(f.selectionSet,C,a,S).then(function(T){return{result:T,exportedVariables:S.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(e,t,r,a){return wo(this,void 0,void 0,function(){var i,o,u,c,f,d=this;return _o(this,function(p){return i=a.fragmentMap,o=a.context,u=a.variables,c=[r],f=function(v){return wo(d,void 0,void 0,function(){var g,y;return _o(this,function(x){return!t&&!a.selectionsToResolve.has(v)?[2]:Ph(v,u)?$o(v)?[2,this.resolveField(v,t,r,a).then(function(w){var _;typeof w<"u"&&c.push((_={},_[Li(v)]=w,_))})]:(XH(v)?g=v:(g=i[v.name.value],Ce(g,19,v.name.value)),g&&g.typeCondition&&(y=g.typeCondition.name.value,a.fragmentMatcher(r,y,o))?[2,this.resolveSelectionSet(g.selectionSet,t,r,a).then(function(w){c.push(w)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(f)).then(function(){return pm(c)})]})})},n.prototype.resolveField=function(e,t,r,a){return wo(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y=this;return _o(this,function(x){return r?(i=a.variables,o=e.name.value,u=Li(e),c=o!==u,f=r[u]||r[o],d=Promise.resolve(f),(!a.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(p=r.__typename||a.defaultOperationType,v=this.resolvers&&this.resolvers[p],v&&(g=v[c?o:u],g&&(d=Promise.resolve($1.withValue(this.cache,g,[r,cm(e,i),a.context,{field:e,fragmentMap:a.fragmentMap}]))))),[2,d.then(function(w){var _,S;if(w===void 0&&(w=f),e.directives&&e.directives.forEach(function(R){R.name.value==="export"&&R.arguments&&R.arguments.forEach(function(T){T.name.value==="as"&&T.value.kind==="StringValue"&&(a.exportedVariables[T.value.value]=w)})}),!e.selectionSet||w==null)return w;var C=(S=(_=e.directives)===null||_===void 0?void 0:_.some(function(R){return R.name.value==="client"}))!==null&&S!==void 0?S:!1;if(Array.isArray(w))return y.resolveSubSelectedArray(e,t||C,w,a);if(e.selectionSet)return y.resolveSelectionSet(e.selectionSet,t||C,w,a)})]):[2,null]})})},n.prototype.resolveSubSelectedArray=function(e,t,r,a){var i=this;return Promise.all(r.map(function(o){if(o===null)return null;if(Array.isArray(o))return i.resolveSubSelectedArray(e,t,o,a);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,t,o,a)}))},n.prototype.collectSelectionsToResolve=function(e,t){var r=function(o){return!Array.isArray(o)},a=this.selectionsToResolveCache;function i(o){if(!a.has(o)){var u=new Set;a.set(o,u),xa(o,{Directive:function(c,f,d,p,v){c.name.value==="client"&&v.forEach(function(g){r(g)&&tR(g)&&u.add(g)})},FragmentSpread:function(c,f,d,p,v){var g=t[c.name.value];Ce(g,20,c.name.value);var y=i(g);y.size>0&&(v.forEach(function(x){r(x)&&tR(x)&&u.add(x)}),u.add(c),y.forEach(function(x){u.add(x)}))}})}return a.get(o)}return i(e)},n}(),HR=!1,B8=function(){function n(e){var t=this,r;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!e.cache)throw ar(16);var a=e.uri,i=e.credentials,o=e.headers,u=e.cache,c=e.documentTransform,f=e.ssrMode,d=f===void 0?!1:f,p=e.ssrForceFetchDelay,v=p===void 0?0:p,g=e.connectToDevTools,y=e.queryDeduplication,x=y===void 0?!0:y,w=e.defaultOptions,_=e.defaultContext,S=e.assumeImmutableResults,C=S===void 0?u.assumeImmutableResults:S,R=e.resolvers,T=e.typeDefs,O=e.fragmentMatcher,D=e.name,N=e.version,k=e.devtools,I=e.dataMasking,B=e.link;B||(B=a?new s8({uri:a,credentials:i,headers:o}):Bh.empty()),this.link=B,this.cache=u,this.disableNetworkFetches=d||v>0,this.queryDeduplication=x,this.defaultOptions=w||Object.create(null),this.typeDefs=T,this.devtoolsConfig=$($({},k),{enabled:(r=k==null?void 0:k.enabled)!==null&&r!==void 0?r:g}),this.devtoolsConfig.enabled===void 0&&(this.devtoolsConfig.enabled=globalThis.__DEV__!==!1),v&&setTimeout(function(){return t.disableNetworkFetches=!1},v),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=O1,this.localState=new L8({cache:u,client:this,resolvers:R,fragmentMatcher:O}),this.queryManager=new P8({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:_,documentTransform:c,queryDeduplication:x,ssrMode:d,dataMasking:!!I,clientAwareness:{name:D,version:N},localState:this.localState,assumeImmutableResults:C,onBroadcast:this.devtoolsConfig.enabled?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return n.prototype.connectToDevTools=function(){if(!(typeof window>"u")){var e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this,!HR&&globalThis.__DEV__!==!1&&(HR=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol)&&setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var r=window.navigator,a=r&&r.userAgent,i=void 0;typeof a=="string"&&(a.indexOf("Chrome/")>-1?i="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":a.indexOf("Firefox/")>-1&&(i="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),i&&globalThis.__DEV__!==!1&&Ce.log("Download the Apollo DevTools for a better development experience: %s",i)}},1e4))}},Object.defineProperty(n.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=zf(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=$($({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},n.prototype.query=function(e){return this.defaultOptions.query&&(e=zf(this.defaultOptions.query,e)),Ce(e.fetchPolicy!=="cache-and-network",17),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=$($({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},n.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=zf(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},n.prototype.subscribe=function(e){var t=this,r=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(e).map(function(a){return $($({},a),{data:t.queryManager.maskOperation({document:e.query,data:a.data,fetchPolicy:e.fetchPolicy,id:r})})})},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},n.prototype.watchFragment=function(e){var t;return this.cache.watchFragment($($({},e),(t={},t[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,t)))},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},n.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},n.prototype.__requestRaw=function(e){return Xb(this.link,e)},n.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},n.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},n.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},n.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),r=[],a=[];t.forEach(function(o,u){r.push(u),a.push(o)});var i=Promise.all(a);return i.queries=r,i.results=a,i.catch(function(o){globalThis.__DEV__!==!1&&Ce.debug(18,o)}),i},n.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},n.prototype.extract=function(e){return this.cache.extract(e)},n.prototype.restore=function(e){return this.cache.restore(e)},n.prototype.addResolvers=function(e){this.localState.addResolvers(e)},n.prototype.setResolvers=function(e){this.localState.setResolvers(e)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},n.prototype.setLink=function(e){this.link=this.queryManager.link=e},Object.defineProperty(n.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),n}();globalThis.__DEV__!==!1&&(B8.prototype.getMemoryInternals=AH);var Lp=new Map,ix=new Map,lN=!0,Dv=!1;function cN(n){return n.replace(/[\s,]+/g," ").trim()}function z8(n){return cN(n.source.body.substring(n.start,n.end))}function U8(n){var e=new Set,t=[];return n.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var a=r.name.value,i=z8(r.loc),o=ix.get(a);o&&!o.has(i)?lN&&console.warn("Warning: fragment with name "+a+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||ix.set(a,o=new Set),o.add(i),e.has(i)||(e.add(i),t.push(r))}else t.push(r)}),$($({},n),{definitions:t})}function V8(n){var e=new Set(n.definitions);e.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(a){var i=r[a];i&&typeof i=="object"&&e.add(i)})});var t=n.loc;return t&&(delete t.startToken,delete t.endToken),n}function j8(n){var e=cN(n);if(!Lp.has(e)){var t=JW(n,{experimentalFragmentVariables:Dv,allowLegacyFragmentVariables:Dv});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Lp.set(e,V8(U8(t)))}return Lp.get(e)}function gh(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof n=="string"&&(n=[n]);var r=n[0];return e.forEach(function(a,i){a&&a.kind==="Document"?r+=a.loc.source.body:r+=a,r+=n[i+1]}),j8(r)}function q8(){Lp.clear(),ix.clear()}function W8(){lN=!1}function H8(){Dv=!0}function G8(){Dv=!1}var Sf={gql:gh,resetCaches:q8,disableFragmentWarnings:W8,enableExperimentalFragmentVariables:H8,disableExperimentalFragmentVariables:G8};(function(n){n.gql=Sf.gql,n.resetCaches=Sf.resetCaches,n.disableFragmentWarnings=Sf.disableFragmentWarnings,n.enableExperimentalFragmentVariables=Sf.enableExperimentalFragmentVariables,n.disableExperimentalFragmentVariables=Sf.disableExperimentalFragmentVariables})(gh||(gh={}));gh.default=gh;var A0={exports:{}},GR;function Q8(){return GR||(GR=1,function(n){n.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=void 0,n.exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=void 0,n.exports.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=void 0,Object.assign(n.exports,Nv())}(A0)),A0.exports}var Nt=Q8();const $8=sx(Nt),fN=IM({__proto__:null,default:$8},[Nt]);var QR=M1?Symbol.for("__APOLLO_CONTEXT__"):"__APOLLO_CONTEXT__";function Z1(){Ce("createContext"in fN,54);var n=Nt.createContext[QR];return n||(Object.defineProperty(Nt.createContext,QR,{value:n=Nt.createContext({}),enumerable:!1,writable:!1,configurable:!0}),n.displayName="ApolloContext"),n}var V9=function(n){var e=n.client,t=n.children,r=Z1(),a=Nt.useContext(r),i=Nt.useMemo(function(){return $($({},a),{client:e||a.client})},[a,e]);return Ce(i.client,55),Nt.createElement(r.Provider,{value:i},t)};function J1(n){var e=Nt.useContext(Z1()),t=n||e.client;return Ce(!!t,58),t}var $R=!1,K8="useSyncExternalStore",X8=fN[K8],Y8=X8||function(n,e,t){var r=e();globalThis.__DEV__!==!1&&!$R&&r!==e()&&($R=!0,globalThis.__DEV__!==!1&&Ce.error(68));var a=Nt.useState({inst:{value:r,getSnapshot:e}}),i=a[0].inst,o=a[1];return yH?Nt.useLayoutEffect(function(){Object.assign(i,{value:r,getSnapshot:e}),k0(i)&&o({inst:i})},[n,r,e]):Object.assign(i,{value:r,getSnapshot:e}),Nt.useEffect(function(){return k0(i)&&o({inst:i}),n(function(){k0(i)&&o({inst:i})})},[n]),r};function k0(n){var e=n.value,t=n.getSnapshot;try{return e!==t()}catch{return!0}}var $a;(function(n){n[n.Query=0]="Query",n[n.Mutation=1]="Mutation",n[n.Subscription=2]="Subscription"})($a||($a={}));var Ms;function KR(n){var e;switch(n){case $a.Query:e="Query";break;case $a.Mutation:e="Mutation";break;case $a.Subscription:e="Subscription";break}return e}function hN(n){Ms||(Ms=new F1(Za.parser||1e3));var e=Ms.get(n);if(e)return e;var t,r,a;Ce(!!n&&!!n.kind,70,n);for(var i=[],o=[],u=[],c=[],f=0,d=n.definitions;f<d.length;f++){var p=d[f];if(p.kind==="FragmentDefinition"){i.push(p);continue}if(p.kind==="OperationDefinition")switch(p.operation){case"query":o.push(p);break;case"mutation":u.push(p);break;case"subscription":c.push(p);break}}Ce(!i.length||o.length||u.length||c.length,71),Ce(o.length+u.length+c.length<=1,72,n,o.length,c.length,u.length),r=o.length?$a.Query:$a.Mutation,!o.length&&!u.length&&(r=$a.Subscription);var v=o.length?o:u.length?u:c;Ce(v.length===1,73,n,v.length);var g=v[0];t=g.variableDefinitions||[],g.name&&g.name.kind==="Name"?a=g.name.value:a="data";var y={name:a,type:r,variables:t};return Ms.set(n,y),y}hN.resetCache=function(){Ms=void 0};globalThis.__DEV__!==!1&&P1("parser",function(){return Ms?Ms.size:0});function dN(n,e){var t=hN(n),r=KR(e),a=KR(t.type);Ce(t.type===e,74,r,r,a)}var Z8=cD?Nt.useLayoutEffect:Nt.useEffect,J8=Symbol.for("apollo.hook.wrappers");function e9(n,e,t){var r=t.queryManager,a=r&&r[J8],i=a&&a[n];return i?i(e):e}var t9=Object.prototype.hasOwnProperty;function XR(){}var Bp=Symbol();function j9(n,e){return e===void 0&&(e=Object.create(null)),e9("useQuery",n9,J1(e&&e.client))(n,e)}function n9(n,e){var t=a9(n,e),r=t.result,a=t.obsQueryFields;return Nt.useMemo(function(){return $($({},r),a)},[r,a])}function r9(n,e,t,r,a){function i(p){var v;dN(e,$a.Query);var g={client:n,query:e,observable:r&&r.getSSRObservable(a())||n.watchQuery(pN(void 0,n,t,a())),resultData:{previousData:(v=p==null?void 0:p.resultData.current)===null||v===void 0?void 0:v.data}};return g}var o=Nt.useState(i),u=o[0],c=o[1];function f(p){var v,g;Object.assign(u.observable,(v={},v[Bp]=p,v));var y=u.resultData;c($($({},u),{query:p.query,resultData:Object.assign(y,{previousData:((g=y.current)===null||g===void 0?void 0:g.data)||y.previousData,current:void 0})}))}if(n!==u.client||e!==u.query){var d=i(u);return c(d),[d,f]}return[u,f]}function a9(n,e){var t=J1(e.client),r=Nt.useContext(Z1()).renderPromises,a=!!r,i=t.disableNetworkFetches,o=e.ssr!==!1&&!e.skip,u=e.partialRefetch,c=u9(t,n,e,a),f=r9(t,n,e,r,c),d=f[0],p=d.observable,v=d.resultData,g=f[1],y=c(p);s9(v,p,t,e,y);var x=Nt.useMemo(function(){return h9(p)},[p]);o9(p,r,o);var w=i9(v,p,t,e,y,i,u,a,{onCompleted:e.onCompleted||XR,onError:e.onError||XR});return{result:w,obsQueryFields:x,observable:p,resultData:v,client:t,onQueryExecuted:g}}function i9(n,e,t,r,a,i,o,u,c){var f=Nt.useRef(c);Nt.useEffect(function(){f.current=c});var d=(u||i)&&r.ssr===!1&&!r.skip?mN:r.skip||a.fetchPolicy==="standby"?gN:void 0,p=n.previousData,v=Nt.useMemo(function(){return d&&vN(d,p,e,t)},[t,e,d,p]);return Y8(Nt.useCallback(function(g){if(u)return function(){};var y=function(){var _=n.current,S=e.getCurrentResult();_&&_.loading===S.loading&&_.networkStatus===S.networkStatus&&_t(_.data,S.data)||ox(S,n,e,t,o,g,f.current)},x=function(_){if(w.current.unsubscribe(),w.current=e.resubscribeAfterError(y,x),!t9.call(_,"graphQLErrors"))throw _;var S=n.current;(!S||S&&S.loading||!_t(_,S.error))&&ox({data:S&&S.data,error:_,loading:!1,networkStatus:pt.error},n,e,t,o,g,f.current)},w={current:e.subscribe(y,x)};return function(){setTimeout(function(){return w.current.unsubscribe()})}},[i,u,e,n,o,t]),function(){return v||YR(n,e,f.current,o,t)},function(){return v||YR(n,e,f.current,o,t)})}function o9(n,e,t){e&&t&&(e.registerSSRObservable(n),n.getCurrentResult().loading&&e.addObservableQueryPromise(n))}function s9(n,e,t,r,a){var i;e[Bp]&&!_t(e[Bp],a)&&(e.reobserve(pN(e,t,r,a)),n.previousData=((i=n.current)===null||i===void 0?void 0:i.data)||n.previousData,n.current=void 0),e[Bp]=a}function u9(n,e,t,r){t===void 0&&(t={});var a=t.skip;t.ssr,t.onCompleted,t.onError;var i=t.defaultOptions,o=va(t,["skip","ssr","onCompleted","onError","defaultOptions"]);return function(u){var c=Object.assign(o,{query:e});return r&&(c.fetchPolicy==="network-only"||c.fetchPolicy==="cache-and-network")&&(c.fetchPolicy="cache-first"),c.variables||(c.variables={}),a?(c.initialFetchPolicy=c.initialFetchPolicy||c.fetchPolicy||ZR(i,n.defaultOptions),c.fetchPolicy="standby"):c.fetchPolicy||(c.fetchPolicy=(u==null?void 0:u.options.initialFetchPolicy)||ZR(i,n.defaultOptions)),c}}function pN(n,e,t,r){var a=[],i=e.defaultOptions.watchQuery;return i&&a.push(i),t.defaultOptions&&a.push(t.defaultOptions),a.push(ru(n&&n.options,r)),a.reduce(zf)}function ox(n,e,t,r,a,i,o){var u=e.current;u&&u.data&&(e.previousData=u.data),!n.error&&Zr(n.errors)&&(n.error=new za({graphQLErrors:n.errors})),e.current=vN(f9(n,t,a),e.previousData,t,r),i(),l9(n,u==null?void 0:u.networkStatus,o)}function l9(n,e,t){if(!n.loading){var r=c9(n);Promise.resolve().then(function(){r?t.onError(r):n.data&&e!==n.networkStatus&&n.networkStatus===pt.ready&&t.onCompleted(n.data)}).catch(function(a){globalThis.__DEV__!==!1&&Ce.warn(a)})}}function YR(n,e,t,r,a){return n.current||ox(e.getCurrentResult(),n,e,a,r,function(){},t),n.current}function ZR(n,e){var t;return(n==null?void 0:n.fetchPolicy)||((t=e==null?void 0:e.watchQuery)===null||t===void 0?void 0:t.fetchPolicy)||"cache-first"}function c9(n){return Zr(n.errors)?new za({graphQLErrors:n.errors}):n.error}function vN(n,e,t,r){var a=n.data;n.partial;var i=va(n,["data","partial"]),o=$($({data:a},i),{client:r,observable:t,variables:t.variables,called:n!==mN&&n!==gN,previousData:e});return o}function f9(n,e,t){return n.partial&&t&&!n.loading&&(!n.data||Object.keys(n.data).length===0)&&e.options.fetchPolicy!=="cache-only"?(e.refetch(),$($({},n),{loading:!0,networkStatus:pt.refetch})):n}var mN=nc({loading:!0,data:void 0,error:void 0,networkStatus:pt.loading}),gN=nc({loading:!1,data:void 0,error:void 0,networkStatus:pt.ready});function h9(n){return{refetch:n.refetch.bind(n),reobserve:n.reobserve.bind(n),fetchMore:n.fetchMore.bind(n),updateQuery:n.updateQuery.bind(n),startPolling:n.startPolling.bind(n),stopPolling:n.stopPolling.bind(n),subscribeToMore:n.subscribeToMore.bind(n)}}function q9(n,e){var t=J1(void 0);dN(n,$a.Mutation);var r=Nt.useState({called:!1,loading:!1,client:t}),a=r[0],i=r[1],o=Nt.useRef({result:a,mutationId:0,isMounted:!0,client:t,mutation:n,options:e});Z8(function(){Object.assign(o.current,{client:t,options:e,mutation:n})});var u=Nt.useCallback(function(f){f===void 0&&(f={});var d=o.current,p=d.options,v=d.mutation,g=$($({},p),{mutation:v}),y=f.client||o.current.client;!o.current.result.loading&&!g.ignoreResults&&o.current.isMounted&&i(o.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:y});var x=++o.current.mutationId,w=zf(g,f);return y.mutate(w).then(function(_){var S,C,R=_.data,T=_.errors,O=T&&T.length>0?new za({graphQLErrors:T}):void 0,D=f.onError||((S=o.current.options)===null||S===void 0?void 0:S.onError);if(O&&D&&D(O,w),x===o.current.mutationId&&!w.ignoreResults){var N={called:!0,loading:!1,data:R,error:O,client:y};o.current.isMounted&&!_t(o.current.result,N)&&i(o.current.result=N)}var k=f.onCompleted||((C=o.current.options)===null||C===void 0?void 0:C.onCompleted);return O||k==null||k(_.data,w),_},function(_){var S;if(x===o.current.mutationId&&o.current.isMounted){var C={loading:!1,error:_,data:void 0,called:!0,client:y};_t(o.current.result,C)||i(o.current.result=C)}var R=f.onError||((S=o.current.options)===null||S===void 0?void 0:S.onError);if(R)return R(_,w),{data:void 0,errors:_};throw _})},[]),c=Nt.useCallback(function(){if(o.current.isMounted){var f={called:!1,loading:!1,client:o.current.client};Object.assign(o.current,{mutationId:0,result:f}),i(f)}},[]);return Nt.useEffect(function(){var f=o.current;return f.isMounted=!0,function(){f.isMounted=!1}},[]),[u,$({reset:c},a)]}export{B8 as A,V9 as B,I9 as C,w9 as D,T9 as E,x9 as F,E9 as G,IF as H,N8 as I,k9 as J,v9 as K,C9 as Q,bO as R,Yq as T,N9 as a,D9 as b,M9 as c,q3 as d,qP as e,y9 as f,_9 as g,A9 as h,ir as i,PM as j,O9 as k,px as l,b9 as m,m9 as n,g9 as o,F9 as p,S9 as q,J as r,Xr as s,L9 as t,qT as u,pr as v,gh as w,j9 as x,q9 as y,P9 as z};
