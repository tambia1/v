import{g as c2}from"./index-BiiC4cDu.js";function rA(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(n,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Ap={exports:{}},Ss={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1;function aA(){if(I1)return Ss;I1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:n,type:r,key:s,ref:a!==void 0?a:null,props:i}}return Ss.Fragment=e,Ss.jsx=t,Ss.jsxs=t,Ss}var F1;function iA(){return F1||(F1=1,Ap.exports=aA()),Ap.exports}var mu=iA(),Tp={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function oA(){if(B1)return Be;B1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),m=Symbol.iterator;function g(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function E(B,X,oe){this.props=B,this.context=X,this.refs=S,this.updater=oe||x}E.prototype.isReactComponent={},E.prototype.setState=function(B,X){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,X,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=E.prototype;function R(B,X,oe){this.props=B,this.context=X,this.refs=S,this.updater=oe||x}var A=R.prototype=new _;A.constructor=R,w(A,E.prototype),A.isPureReactComponent=!0;var C=Array.isArray;function D(){}var O={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function N(B,X,oe){var de=oe.ref;return{$$typeof:n,type:B,key:X,ref:de!==void 0?de:null,props:oe}}function I(B,X){return N(B.type,X,B.props)}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function H(B){var X={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(oe){return X[oe]})}var J=/\/+/g;function ee(B,X){return typeof B=="object"&&B!==null&&B.key!=null?H(""+B.key):X.toString(36)}function ne(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(D,D):(B.status="pending",B.then(function(X){B.status==="pending"&&(B.status="fulfilled",B.value=X)},function(X){B.status==="pending"&&(B.status="rejected",B.reason=X)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function z(B,X,oe,de,ve){var me=typeof B;(me==="undefined"||me==="boolean")&&(B=null);var ye=!1;if(B===null)ye=!0;else switch(me){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(B.$$typeof){case n:case e:ye=!0;break;case d:return ye=B._init,z(ye(B._payload),X,oe,de,ve)}}if(ye)return ve=ve(B),ye=de===""?"."+ee(B,0):de,C(ve)?(oe="",ye!=null&&(oe=ye.replace(J,"$&/")+"/"),z(ve,X,oe,"",function(it){return it})):ve!=null&&(U(ve)&&(ve=I(ve,oe+(ve.key==null||B&&B.key===ve.key?"":(""+ve.key).replace(J,"$&/")+"/")+ye)),X.push(ve)),1;ye=0;var De=de===""?".":de+":";if(C(B))for(var Te=0;Te<B.length;Te++)de=B[Te],me=De+ee(de,Te),ye+=z(de,X,oe,me,ve);else if(Te=g(B),typeof Te=="function")for(B=Te.call(B),Te=0;!(de=B.next()).done;)de=de.value,me=De+ee(de,Te++),ye+=z(de,X,oe,me,ve);else if(me==="object"){if(typeof B.then=="function")return z(ne(B),X,oe,de,ve);throw X=String(B),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ye}function W(B,X,oe){if(B==null)return B;var de=[],ve=0;return z(B,de,"","",function(me){return X.call(oe,me,ve++)}),de}function q(B){if(B._status===-1){var X=B._result;X=X(),X.then(function(oe){(B._status===0||B._status===-1)&&(B._status=1,B._result=oe)},function(oe){(B._status===0||B._status===-1)&&(B._status=2,B._result=oe)}),B._status===-1&&(B._status=0,B._result=X)}if(B._status===1)return B._result.default;throw B._result}var re=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},ue={map:W,forEach:function(B,X,oe){W(B,function(){X.apply(this,arguments)},oe)},count:function(B){var X=0;return W(B,function(){X++}),X},toArray:function(B){return W(B,function(X){return X})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Be.Activity=v,Be.Children=ue,Be.Component=E,Be.Fragment=t,Be.Profiler=a,Be.PureComponent=R,Be.StrictMode=r,Be.Suspense=c,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Be.__COMPILER_RUNTIME={__proto__:null,c:function(B){return O.H.useMemoCache(B)}},Be.cache=function(B){return function(){return B.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(B,X,oe){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var de=w({},B.props),ve=B.key;if(X!=null)for(me in X.key!==void 0&&(ve=""+X.key),X)!F.call(X,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&X.ref===void 0||(de[me]=X[me]);var me=arguments.length-2;if(me===1)de.children=oe;else if(1<me){for(var ye=Array(me),De=0;De<me;De++)ye[De]=arguments[De+2];de.children=ye}return N(B.type,ve,de)},Be.createContext=function(B){return B={$$typeof:s,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:i,_context:B},B},Be.createElement=function(B,X,oe){var de,ve={},me=null;if(X!=null)for(de in X.key!==void 0&&(me=""+X.key),X)F.call(X,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ve[de]=X[de]);var ye=arguments.length-2;if(ye===1)ve.children=oe;else if(1<ye){for(var De=Array(ye),Te=0;Te<ye;Te++)De[Te]=arguments[Te+2];ve.children=De}if(B&&B.defaultProps)for(de in ye=B.defaultProps,ye)ve[de]===void 0&&(ve[de]=ye[de]);return N(B,me,ve)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(B){return{$$typeof:l,render:B}},Be.isValidElement=U,Be.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:q}},Be.memo=function(B,X){return{$$typeof:h,type:B,compare:X===void 0?null:X}},Be.startTransition=function(B){var X=O.T,oe={};O.T=oe;try{var de=B(),ve=O.S;ve!==null&&ve(oe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(D,re)}catch(me){re(me)}finally{X!==null&&oe.types!==null&&(X.types=oe.types),O.T=X}},Be.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Be.use=function(B){return O.H.use(B)},Be.useActionState=function(B,X,oe){return O.H.useActionState(B,X,oe)},Be.useCallback=function(B,X){return O.H.useCallback(B,X)},Be.useContext=function(B){return O.H.useContext(B)},Be.useDebugValue=function(){},Be.useDeferredValue=function(B,X){return O.H.useDeferredValue(B,X)},Be.useEffect=function(B,X){return O.H.useEffect(B,X)},Be.useEffectEvent=function(B){return O.H.useEffectEvent(B)},Be.useId=function(){return O.H.useId()},Be.useImperativeHandle=function(B,X,oe){return O.H.useImperativeHandle(B,X,oe)},Be.useInsertionEffect=function(B,X){return O.H.useInsertionEffect(B,X)},Be.useLayoutEffect=function(B,X){return O.H.useLayoutEffect(B,X)},Be.useMemo=function(B,X){return O.H.useMemo(B,X)},Be.useOptimistic=function(B,X){return O.H.useOptimistic(B,X)},Be.useReducer=function(B,X,oe){return O.H.useReducer(B,X,oe)},Be.useRef=function(B){return O.H.useRef(B)},Be.useState=function(B){return O.H.useState(B)},Be.useSyncExternalStore=function(B,X,oe){return O.H.useSyncExternalStore(B,X,oe)},Be.useTransition=function(){return O.H.useTransition()},Be.version="19.2.0",Be}var L1;function sm(){return L1||(L1=1,Tp.exports=oA()),Tp.exports}var K=sm();const iu=c2(K),z1=rA({__proto__:null,default:iu},[K]);function uA(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function sA(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var lA=function(){function n(t){var r=this;this._insertTag=function(a){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,i),r.tags.push(a)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(sA(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var i=uA(a);try{i.insertRule(r,i.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},n}(),pn="-ms-",cf="-moz-",rt="-webkit-",f2="comm",lm="rule",cm="decl",cA="@import",h2="@keyframes",fA="@layer",hA=Math.abs,Uf=String.fromCharCode,dA=Object.assign;function pA(n,e){return fn(n,0)^45?(((e<<2^fn(n,0))<<2^fn(n,1))<<2^fn(n,2))<<2^fn(n,3):0}function d2(n){return n.trim()}function vA(n,e){return(n=e.exec(n))?n[0]:n}function at(n,e,t){return n.replace(e,t)}function gv(n,e){return n.indexOf(e)}function fn(n,e){return n.charCodeAt(e)|0}function Bs(n,e,t){return n.slice(e,t)}function jr(n){return n.length}function fm(n){return n.length}function Mc(n,e){return e.push(n),n}function mA(n,e){return n.map(e).join("")}var Hf=1,gu=1,p2=0,Bn=0,Pt=0,_u="";function Vf(n,e,t,r,a,i,s){return{value:n,root:e,parent:t,type:r,props:a,children:i,line:Hf,column:gu,length:s,return:""}}function Es(n,e){return dA(Vf("",null,null,"",null,null,0),n,{length:-n.length},e)}function gA(){return Pt}function yA(){return Pt=Bn>0?fn(_u,--Bn):0,gu--,Pt===10&&(gu=1,Hf--),Pt}function tr(){return Pt=Bn<p2?fn(_u,Bn++):0,gu++,Pt===10&&(gu=1,Hf++),Pt}function Zr(){return fn(_u,Bn)}function rf(){return Bn}function el(n,e){return Bs(_u,n,e)}function Ls(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function v2(n){return Hf=gu=1,p2=jr(_u=n),Bn=0,[]}function m2(n){return _u="",n}function af(n){return d2(el(Bn-1,yv(n===91?n+2:n===40?n+1:n)))}function bA(n){for(;(Pt=Zr())&&Pt<33;)tr();return Ls(n)>2||Ls(Pt)>3?"":" "}function xA(n,e){for(;--e&&tr()&&!(Pt<48||Pt>102||Pt>57&&Pt<65||Pt>70&&Pt<97););return el(n,rf()+(e<6&&Zr()==32&&tr()==32))}function yv(n){for(;tr();)switch(Pt){case n:return Bn;case 34:case 39:n!==34&&n!==39&&yv(Pt);break;case 40:n===41&&yv(n);break;case 92:tr();break}return Bn}function wA(n,e){for(;tr()&&n+Pt!==57;)if(n+Pt===84&&Zr()===47)break;return"/*"+el(e,Bn-1)+"*"+Uf(n===47?n:tr())}function SA(n){for(;!Ls(Zr());)tr();return el(n,Bn)}function EA(n){return m2(of("",null,null,null,[""],n=v2(n),0,[0],n))}function of(n,e,t,r,a,i,s,l,c){for(var h=0,d=0,v=s,m=0,g=0,x=0,w=1,S=1,E=1,_=0,R="",A=a,C=i,D=r,O=R;S;)switch(x=_,_=tr()){case 40:if(x!=108&&fn(O,v-1)==58){gv(O+=at(af(_),"&","&\f"),"&\f")!=-1&&(E=-1);break}case 34:case 39:case 91:O+=af(_);break;case 9:case 10:case 13:case 32:O+=bA(x);break;case 92:O+=xA(rf()-1,7);continue;case 47:switch(Zr()){case 42:case 47:Mc(_A(wA(tr(),rf()),e,t),c);break;default:O+="/"}break;case 123*w:l[h++]=jr(O)*E;case 125*w:case 59:case 0:switch(_){case 0:case 125:S=0;case 59+d:E==-1&&(O=at(O,/\f/g,"")),g>0&&jr(O)-v&&Mc(g>32?U1(O+";",r,t,v-1):U1(at(O," ","")+";",r,t,v-2),c);break;case 59:O+=";";default:if(Mc(D=P1(O,e,t,h,d,a,l,R,A=[],C=[],v),i),_===123)if(d===0)of(O,e,D,D,A,i,v,l,C);else switch(m===99&&fn(O,3)===110?100:m){case 100:case 108:case 109:case 115:of(n,D,D,r&&Mc(P1(n,D,D,0,0,a,l,R,a,A=[],v),C),a,C,v,l,r?A:C);break;default:of(O,D,D,D,[""],C,0,l,C)}}h=d=g=0,w=E=1,R=O="",v=s;break;case 58:v=1+jr(O),g=x;default:if(w<1){if(_==123)--w;else if(_==125&&w++==0&&yA()==125)continue}switch(O+=Uf(_),_*w){case 38:E=d>0?1:(O+="\f",-1);break;case 44:l[h++]=(jr(O)-1)*E,E=1;break;case 64:Zr()===45&&(O+=af(tr())),m=Zr(),d=v=jr(R=O+=SA(rf())),_++;break;case 45:x===45&&jr(O)==2&&(w=0)}}return i}function P1(n,e,t,r,a,i,s,l,c,h,d){for(var v=a-1,m=a===0?i:[""],g=fm(m),x=0,w=0,S=0;x<r;++x)for(var E=0,_=Bs(n,v+1,v=hA(w=s[x])),R=n;E<g;++E)(R=d2(w>0?m[E]+" "+_:at(_,/&\f/g,m[E])))&&(c[S++]=R);return Vf(n,e,t,a===0?lm:l,c,h,d)}function _A(n,e,t){return Vf(n,e,t,f2,Uf(gA()),Bs(n,2,-2),0)}function U1(n,e,t,r){return Vf(n,e,t,cm,Bs(n,0,r),Bs(n,r+1,-1),r)}function uu(n,e){for(var t="",r=fm(n),a=0;a<r;a++)t+=e(n[a],a,n,e)||"";return t}function CA(n,e,t,r){switch(n.type){case fA:if(n.children.length)break;case cA:case cm:return n.return=n.return||n.value;case f2:return"";case h2:return n.return=n.value+"{"+uu(n.children,r)+"}";case lm:n.value=n.props.join(",")}return jr(t=uu(n.children,r))?n.return=n.value+"{"+t+"}":""}function RA(n){var e=fm(n);return function(t,r,a,i){for(var s="",l=0;l<e;l++)s+=n[l](t,r,a,i)||"";return s}}function AA(n){return function(e){e.root||(e=e.return)&&n(e)}}var H1=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var a=e(r);return t.set(r,a),a}},TA=function(e,t,r){for(var a=0,i=0;a=i,i=Zr(),a===38&&i===12&&(t[r]=1),!Ls(i);)tr();return el(e,Bn)},DA=function(e,t){var r=-1,a=44;do switch(Ls(a)){case 0:a===38&&Zr()===12&&(t[r]=1),e[r]+=TA(Bn-1,t,r);break;case 2:e[r]+=af(a);break;case 4:if(a===44){e[++r]=Zr()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Uf(a)}while(a=tr());return e},OA=function(e,t){return m2(DA(v2(e),t))},V1=new WeakMap,kA=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,a=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!V1.get(r))&&!a){V1.set(e,!0);for(var i=[],s=OA(t,i),l=r.props,c=0,h=0;c<s.length;c++)for(var d=0;d<l.length;d++,h++)e.props[h]=i[c]?s[c].replace(/&\f/g,l[d]):l[d]+" "+s[c]}}},NA=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function g2(n,e){switch(pA(n,e)){case 5103:return rt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rt+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return rt+n+cf+n+pn+n+n;case 6828:case 4268:return rt+n+pn+n+n;case 6165:return rt+n+pn+"flex-"+n+n;case 5187:return rt+n+at(n,/(\w+).+(:[^]+)/,rt+"box-$1$2"+pn+"flex-$1$2")+n;case 5443:return rt+n+pn+"flex-item-"+at(n,/flex-|-self/,"")+n;case 4675:return rt+n+pn+"flex-line-pack"+at(n,/align-content|flex-|-self/,"")+n;case 5548:return rt+n+pn+at(n,"shrink","negative")+n;case 5292:return rt+n+pn+at(n,"basis","preferred-size")+n;case 6060:return rt+"box-"+at(n,"-grow","")+rt+n+pn+at(n,"grow","positive")+n;case 4554:return rt+at(n,/([^-])(transform)/g,"$1"+rt+"$2")+n;case 6187:return at(at(at(n,/(zoom-|grab)/,rt+"$1"),/(image-set)/,rt+"$1"),n,"")+n;case 5495:case 3959:return at(n,/(image-set\([^]*)/,rt+"$1$`$1");case 4968:return at(at(n,/(.+:)(flex-)?(.*)/,rt+"box-pack:$3"+pn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rt+n+n;case 4095:case 3583:case 4068:case 2532:return at(n,/(.+)-inline(.+)/,rt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jr(n)-1-e>6)switch(fn(n,e+1)){case 109:if(fn(n,e+4)!==45)break;case 102:return at(n,/(.+:)(.+)-([^]+)/,"$1"+rt+"$2-$3$1"+cf+(fn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~gv(n,"stretch")?g2(at(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(fn(n,e+1)!==115)break;case 6444:switch(fn(n,jr(n)-3-(~gv(n,"!important")&&10))){case 107:return at(n,":",":"+rt)+n;case 101:return at(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rt+(fn(n,14)===45?"inline-":"")+"box$3$1"+rt+"$2$3$1"+pn+"$2box$3")+n}break;case 5936:switch(fn(n,e+11)){case 114:return rt+n+pn+at(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return rt+n+pn+at(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return rt+n+pn+at(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return rt+n+pn+n+n}return n}var MA=function(e,t,r,a){if(e.length>-1&&!e.return)switch(e.type){case cm:e.return=g2(e.value,e.length);break;case h2:return uu([Es(e,{value:at(e.value,"@","@"+rt)})],a);case lm:if(e.length)return mA(e.props,function(i){switch(vA(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return uu([Es(e,{props:[at(i,/:(read-\w+)/,":"+cf+"$1")]})],a);case"::placeholder":return uu([Es(e,{props:[at(i,/:(plac\w+)/,":"+rt+"input-$1")]}),Es(e,{props:[at(i,/:(plac\w+)/,":"+cf+"$1")]}),Es(e,{props:[at(i,/:(plac\w+)/,pn+"input-$1")]})],a)}return""})}},IA=[MA],FA=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(w){var S=w.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var a=e.stylisPlugins||IA,i={},s,l=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(w){for(var S=w.getAttribute("data-emotion").split(" "),E=1;E<S.length;E++)i[S[E]]=!0;l.push(w)});var c,h=[kA,NA];{var d,v=[CA,AA(function(w){d.insert(w)})],m=RA(h.concat(a,v)),g=function(S){return uu(EA(S),m)};c=function(S,E,_,R){d=_,g(S?S+"{"+E.styles+"}":E.styles),R&&(x.inserted[E.name]=!0)}}var x={key:t,sheet:new lA({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:c};return x.sheet.hydrate(l),x};function yu(){return yu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yu.apply(null,arguments)}var Dp={exports:{}},ut={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1;function BA(){if(j1)return ut;j1=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,v=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,x=n?Symbol.for("react.lazy"):60116,w=n?Symbol.for("react.block"):60121,S=n?Symbol.for("react.fundamental"):60117,E=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function R(C){if(typeof C=="object"&&C!==null){var D=C.$$typeof;switch(D){case e:switch(C=C.type,C){case c:case h:case r:case i:case a:case v:return C;default:switch(C=C&&C.$$typeof,C){case l:case d:case x:case g:case s:return C;default:return D}}case t:return D}}}function A(C){return R(C)===h}return ut.AsyncMode=c,ut.ConcurrentMode=h,ut.ContextConsumer=l,ut.ContextProvider=s,ut.Element=e,ut.ForwardRef=d,ut.Fragment=r,ut.Lazy=x,ut.Memo=g,ut.Portal=t,ut.Profiler=i,ut.StrictMode=a,ut.Suspense=v,ut.isAsyncMode=function(C){return A(C)||R(C)===c},ut.isConcurrentMode=A,ut.isContextConsumer=function(C){return R(C)===l},ut.isContextProvider=function(C){return R(C)===s},ut.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},ut.isForwardRef=function(C){return R(C)===d},ut.isFragment=function(C){return R(C)===r},ut.isLazy=function(C){return R(C)===x},ut.isMemo=function(C){return R(C)===g},ut.isPortal=function(C){return R(C)===t},ut.isProfiler=function(C){return R(C)===i},ut.isStrictMode=function(C){return R(C)===a},ut.isSuspense=function(C){return R(C)===v},ut.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===h||C===i||C===a||C===v||C===m||typeof C=="object"&&C!==null&&(C.$$typeof===x||C.$$typeof===g||C.$$typeof===s||C.$$typeof===l||C.$$typeof===d||C.$$typeof===S||C.$$typeof===E||C.$$typeof===_||C.$$typeof===w)},ut.typeOf=R,ut}var W1;function LA(){return W1||(W1=1,Dp.exports=BA()),Dp.exports}var Op,G1;function zA(){if(G1)return Op;G1=1;var n=LA(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[n.ForwardRef]=r,i[n.Memo]=a;function s(x){return n.isMemo(x)?a:i[x.$$typeof]||e}var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,m=Object.prototype;function g(x,w,S){if(typeof w!="string"){if(m){var E=v(w);E&&E!==m&&g(x,E,S)}var _=c(w);h&&(_=_.concat(h(w)));for(var R=s(x),A=s(w),C=0;C<_.length;++C){var D=_[C];if(!t[D]&&!(S&&S[D])&&!(A&&A[D])&&!(R&&R[D])){var O=d(w,D);try{l(x,D,O)}catch{}}}}return x}return Op=g,Op}zA();var PA=!0;function y2(n,e,t){var r="";return t.split(" ").forEach(function(a){n[a]!==void 0?e.push(n[a]+";"):a&&(r+=a+" ")}),r}var hm=function(e,t,r){var a=e.key+"-"+t.name;(r===!1||PA===!1)&&e.registered[a]===void 0&&(e.registered[a]=t.styles)},dm=function(e,t,r){hm(e,t,r);var a=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var i=t;do e.insert(t===i?"."+a:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function UA(n){for(var e=0,t,r=0,a=n.length;a>=4;++r,a-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var HA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function VA(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var jA=/[A-Z]|^ms/g,WA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,b2=function(e){return e.charCodeAt(1)===45},q1=function(e){return e!=null&&typeof e!="boolean"},kp=VA(function(n){return b2(n)?n:n.replace(jA,"-$&").toLowerCase()}),K1=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(WA,function(r,a,i){return Wr={name:a,styles:i,next:Wr},a})}return HA[e]!==1&&!b2(e)&&typeof t=="number"&&t!==0?t+"px":t};function zs(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var a=t;if(a.anim===1)return Wr={name:a.name,styles:a.styles,next:Wr},a.name;var i=t;if(i.styles!==void 0){var s=i.next;if(s!==void 0)for(;s!==void 0;)Wr={name:s.name,styles:s.styles,next:Wr},s=s.next;var l=i.styles+";";return l}return GA(n,e,t)}case"function":{if(n!==void 0){var c=Wr,h=t(n);return Wr=c,zs(n,e,h)}break}}var d=t;if(e==null)return d;var v=e[d];return v!==void 0?v:d}function GA(n,e,t){var r="";if(Array.isArray(t))for(var a=0;a<t.length;a++)r+=zs(n,e,t[a])+";";else for(var i in t){var s=t[i];if(typeof s!="object"){var l=s;e!=null&&e[l]!==void 0?r+=i+"{"+e[l]+"}":q1(l)&&(r+=kp(i)+":"+K1(i,l)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var c=0;c<s.length;c++)q1(s[c])&&(r+=kp(i)+":"+K1(i,s[c])+";");else{var h=zs(n,e,s);switch(i){case"animation":case"animationName":{r+=kp(i)+":"+h+";";break}default:r+=i+"{"+h+"}"}}}return r}var X1=/label:\s*([^\s;{]+)\s*(;|$)/g,Wr;function jf(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,a="";Wr=void 0;var i=n[0];if(i==null||i.raw===void 0)r=!1,a+=zs(t,e,i);else{var s=i;a+=s[0]}for(var l=1;l<n.length;l++)if(a+=zs(t,e,n[l]),r){var c=i;a+=c[l]}X1.lastIndex=0;for(var h="",d;(d=X1.exec(a))!==null;)h+="-"+d[1];var v=UA(a)+h;return{name:v,styles:a,next:Wr}}var qA=function(e){return e()},x2=z1.useInsertionEffect?z1.useInsertionEffect:!1,w2=x2||qA,$1=x2||K.useLayoutEffect,S2=K.createContext(typeof HTMLElement<"u"?FA({key:"css"}):null);S2.Provider;var pm=function(e){return K.forwardRef(function(t,r){var a=K.useContext(S2);return e(t,a,r)})},bu=K.createContext({}),yU=function(){return K.useContext(bu)},KA=function(e,t){if(typeof t=="function"){var r=t(e);return r}return yu({},e,t)},XA=H1(function(n){return H1(function(e){return KA(n,e)})}),bU=function(e){var t=K.useContext(bu);return e.theme!==t&&(t=XA(t)(e.theme)),K.createElement(bu.Provider,{value:t},e.children)},tl={}.hasOwnProperty,bv="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",vm=function(e,t){var r={};for(var a in t)tl.call(t,a)&&(r[a]=t[a]);return r[bv]=e,r},$A=function(e){var t=e.cache,r=e.serialized,a=e.isStringTag;return hm(t,r,a),w2(function(){return dm(t,r,a)}),null},ZA=pm(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var a=n[bv],i=[r],s="";typeof n.className=="string"?s=y2(e.registered,i,n.className):n.className!=null&&(s=n.className+" ");var l=jf(i,void 0,K.useContext(bu));s+=e.key+"-"+l.name;var c={};for(var h in n)tl.call(n,h)&&h!=="css"&&h!==bv&&(c[h]=n[h]);return c.className=s,t&&(c.ref=t),K.createElement(K.Fragment,null,K.createElement($A,{cache:e,serialized:l,isStringTag:typeof a=="string"}),K.createElement(a,c))}),mm=ZA,xU=mu.Fragment,wU=function(e,t,r){return tl.call(t,"css")?mu.jsx(mm,vm(e,t),r):mu.jsx(e,t,r)},SU=function(e,t,r){return tl.call(t,"css")?mu.jsxs(mm,vm(e,t),r):mu.jsxs(e,t,r)},Np={exports:{}},_s={},Mp={exports:{}},Ip={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function YA(){return Z1||(Z1=1,function(n){function e(z,W){var q=z.length;z.push(W);e:for(;0<q;){var re=q-1>>>1,ue=z[re];if(0<a(ue,W))z[re]=W,z[q]=ue,q=re;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var W=z[0],q=z.pop();if(q!==W){z[0]=q;e:for(var re=0,ue=z.length,B=ue>>>1;re<B;){var X=2*(re+1)-1,oe=z[X],de=X+1,ve=z[de];if(0>a(oe,q))de<ue&&0>a(ve,oe)?(z[re]=ve,z[de]=q,re=de):(z[re]=oe,z[X]=q,re=X);else if(de<ue&&0>a(ve,q))z[re]=ve,z[de]=q,re=de;else break e}}return W}function a(z,W){var q=z.sortIndex-W.sortIndex;return q!==0?q:z.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],h=[],d=1,v=null,m=3,g=!1,x=!1,w=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(z){for(var W=t(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=z)r(h),W.sortIndex=W.expirationTime,e(c,W);else break;W=t(h)}}function C(z){if(w=!1,A(z),!x)if(t(c)!==null)x=!0,D||(D=!0,H());else{var W=t(h);W!==null&&ne(C,W.startTime-z)}}var D=!1,O=-1,F=5,N=-1;function I(){return S?!0:!(n.unstable_now()-N<F)}function U(){if(S=!1,D){var z=n.unstable_now();N=z;var W=!0;try{e:{x=!1,w&&(w=!1,_(O),O=-1),g=!0;var q=m;try{t:{for(A(z),v=t(c);v!==null&&!(v.expirationTime>z&&I());){var re=v.callback;if(typeof re=="function"){v.callback=null,m=v.priorityLevel;var ue=re(v.expirationTime<=z);if(z=n.unstable_now(),typeof ue=="function"){v.callback=ue,A(z),W=!0;break t}v===t(c)&&r(c),A(z)}else r(c);v=t(c)}if(v!==null)W=!0;else{var B=t(h);B!==null&&ne(C,B.startTime-z),W=!1}}break e}finally{v=null,m=q,g=!1}W=void 0}}finally{W?H():D=!1}}}var H;if(typeof R=="function")H=function(){R(U)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=U,H=function(){ee.postMessage(null)}}else H=function(){E(U,0)};function ne(z,W){O=E(function(){z(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(z){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var q=m;m=W;try{return z()}finally{m=q}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=m;m=z;try{return W()}finally{m=q}},n.unstable_scheduleCallback=function(z,W,q){var re=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?re+q:re):q=re,z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=q+ue,z={id:d++,callback:W,priorityLevel:z,startTime:q,expirationTime:ue,sortIndex:-1},q>re?(z.sortIndex=q,e(h,z),t(c)===null&&z===t(h)&&(w?(_(O),O=-1):w=!0,ne(C,q-re))):(z.sortIndex=ue,e(c,z),x||g||(x=!0,D||(D=!0,H()))),z},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(z){var W=m;return function(){var q=m;m=W;try{return z.apply(this,arguments)}finally{m=q}}}}(Ip)),Ip}var Y1;function QA(){return Y1||(Y1=1,Mp.exports=YA()),Mp.exports}var Fp={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1;function JA(){if(Q1)return dn;Q1=1;var n=sm();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,h,d){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:c,containerInfo:h,implementation:d}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dn.createPortal=function(c,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(c,h,null,d)},dn.flushSync=function(c){var h=s.T,d=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=h,r.p=d,r.d.f()}},dn.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},dn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},dn.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var d=h.as,v=l(d,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,g=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(c,{crossOrigin:v,integrity:m,fetchPriority:g,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},dn.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=l(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},dn.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,v=l(d,h.crossOrigin);r.d.L(c,d,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},dn.preloadModule=function(c,h){if(typeof c=="string")if(h){var d=l(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},dn.requestFormReset=function(c){r.d.r(c)},dn.unstable_batchedUpdates=function(c,h){return c(h)},dn.useFormState=function(c,h,d){return s.H.useFormState(c,h,d)},dn.useFormStatus=function(){return s.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var J1;function eT(){if(J1)return Fp.exports;J1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fp.exports=JA(),Fp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex;function tT(){if(ex)return _s;ex=1;var n=QA(),e=sm(),t=eT();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var u=o,f=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(f=u.return),o=u.return;while(o)}return u.tag===3?f:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(i(o)!==o)throw Error(r(188))}function h(o){var u=o.alternate;if(!u){if(u=i(o),u===null)throw Error(r(188));return u!==o?null:o}for(var f=o,p=u;;){var y=f.return;if(y===null)break;var b=y.alternate;if(b===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===f)return c(y),o;if(b===p)return c(y),u;b=b.sibling}throw Error(r(188))}if(f.return!==p.return)f=y,p=b;else{for(var T=!1,k=y.child;k;){if(k===f){T=!0,f=y,p=b;break}if(k===p){T=!0,p=y,f=b;break}k=k.sibling}if(!T){for(k=b.child;k;){if(k===f){T=!0,f=b,p=y;break}if(k===p){T=!0,p=b,f=y;break}k=k.sibling}if(!T)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:u}function d(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=d(o),u!==null)return u;o=o.sibling}return null}var v=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var J=Symbol.for("react.client.reference");function ee(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===J?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case w:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case D:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case R:return o.displayName||"Context";case _:return(o._context.displayName||"Context")+".Consumer";case A:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return u=o.displayName||null,u!==null?u:ee(o.type)||"Memo";case F:u=o._payload,o=o._init;try{return ee(o(u))}catch{}}return null}var ne=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},re=[],ue=-1;function B(o){return{current:o}}function X(o){0>ue||(o.current=re[ue],re[ue]=null,ue--)}function oe(o,u){ue++,re[ue]=o.current,o.current=u}var de=B(null),ve=B(null),me=B(null),ye=B(null);function De(o,u){switch(oe(me,u),oe(ve,o),oe(de,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?r1(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=r1(u),o=a1(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}X(de),oe(de,o)}function Te(){X(de),X(ve),X(me)}function it(o){o.memoizedState!==null&&oe(ye,o);var u=de.current,f=a1(u,o.type);u!==f&&(oe(ve,o),oe(de,f))}function Fe(o){ve.current===o&&(X(de),X(ve)),ye.current===o&&(X(ye),ys._currentValue=q)}var Ye,Ve;function $e(o){if(Ye===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);Ye=u&&u[1]||"",Ve=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+o+Ve}var lt=!1;function ot(o,u){if(!o||lt)return"";lt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(u){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var Q=ae}Reflect.construct(o,[],fe)}else{try{fe.call()}catch(ae){Q=ae}o.call(fe.prototype)}}else{try{throw Error()}catch(ae){Q=ae}(fe=o())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&Q&&typeof ae.stack=="string")return[ae.stack,Q.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),T=b[0],k=b[1];if(T&&k){var P=T.split(`
`),Y=k.split(`
`);for(y=p=0;p<P.length&&!P[p].includes("DetermineComponentFrameRoot");)p++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(p===P.length||y===Y.length)for(p=P.length-1,y=Y.length-1;1<=p&&0<=y&&P[p]!==Y[y];)y--;for(;1<=p&&0<=y;p--,y--)if(P[p]!==Y[y]){if(p!==1||y!==1)do if(p--,y--,0>y||P[p]!==Y[y]){var se=`
`+P[p].replace(" at new "," at ");return o.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",o.displayName)),se}while(1<=p&&0<=y);break}}}finally{lt=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?$e(f):""}function ar(o,u){switch(o.tag){case 26:case 27:case 5:return $e(o.type);case 16:return $e("Lazy");case 13:return o.child!==u&&u!==null?$e("Suspense Fallback"):$e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return ot(o.type,!1);case 11:return ot(o.type.render,!1);case 1:return ot(o.type,!0);case 31:return $e("Activity");default:return""}}function Un(o){try{var u="",f=null;do u+=ar(o,f),f=o,o=o.return;while(o);return u}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var tn=Object.prototype.hasOwnProperty,Ir=n.unstable_scheduleCallback,Hn=n.unstable_cancelCallback,Fr=n.unstable_shouldYield,Er=n.unstable_requestPaint,It=n.unstable_now,_r=n.unstable_getCurrentPriorityLevel,lo=n.unstable_ImmediatePriority,ua=n.unstable_UserBlockingPriority,wn=n.unstable_NormalPriority,Ou=n.unstable_LowPriority,ml=n.unstable_IdlePriority,dh=n.log,ph=n.unstable_setDisableYieldValue,sa=null,nn=null;function ir(o){if(typeof dh=="function"&&ph(o),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(sa,o)}catch{}}var Vn=Math.clz32?Math.clz32:j_,H_=Math.log,V_=Math.LN2;function j_(o){return o>>>=0,o===0?32:31-(H_(o)/V_|0)|0}var gl=256,yl=262144,bl=4194304;function Ci(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function xl(o,u,f){var p=o.pendingLanes;if(p===0)return 0;var y=0,b=o.suspendedLanes,T=o.pingedLanes;o=o.warmLanes;var k=p&134217727;return k!==0?(p=k&~b,p!==0?y=Ci(p):(T&=k,T!==0?y=Ci(T):f||(f=k&~o,f!==0&&(y=Ci(f))))):(k=p&~b,k!==0?y=Ci(k):T!==0?y=Ci(T):f||(f=p&~o,f!==0&&(y=Ci(f)))),y===0?0:u!==0&&u!==y&&(u&b)===0&&(b=y&-y,f=u&-u,b>=f||b===32&&(f&4194048)!==0)?u:y}function ku(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function W_(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zg(){var o=bl;return bl<<=1,(bl&62914560)===0&&(bl=4194304),o}function vh(o){for(var u=[],f=0;31>f;f++)u.push(o);return u}function Nu(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function G_(o,u,f,p,y,b){var T=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var k=o.entanglements,P=o.expirationTimes,Y=o.hiddenUpdates;for(f=T&~f;0<f;){var se=31-Vn(f),fe=1<<se;k[se]=0,P[se]=-1;var Q=Y[se];if(Q!==null)for(Y[se]=null,se=0;se<Q.length;se++){var ae=Q[se];ae!==null&&(ae.lane&=-536870913)}f&=~fe}p!==0&&Pg(o,p,0),b!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=b&~(T&~u))}function Pg(o,u,f){o.pendingLanes|=u,o.suspendedLanes&=~u;var p=31-Vn(u);o.entangledLanes|=u,o.entanglements[p]=o.entanglements[p]|1073741824|f&261930}function Ug(o,u){var f=o.entangledLanes|=u;for(o=o.entanglements;f;){var p=31-Vn(f),y=1<<p;y&u|o[p]&u&&(o[p]|=u),f&=~y}}function Hg(o,u){var f=u&-u;return f=(f&42)!==0?1:mh(f),(f&(o.suspendedLanes|u))!==0?0:f}function mh(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function gh(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Vg(){var o=W.p;return o!==0?o:(o=window.event,o===void 0?32:A1(o.type))}function jg(o,u){var f=W.p;try{return W.p=o,u()}finally{W.p=f}}var Ua=Math.random().toString(36).slice(2),rn="__reactFiber$"+Ua,Rn="__reactProps$"+Ua,co="__reactContainer$"+Ua,yh="__reactEvents$"+Ua,q_="__reactListeners$"+Ua,K_="__reactHandles$"+Ua,Wg="__reactResources$"+Ua,Mu="__reactMarker$"+Ua;function bh(o){delete o[rn],delete o[Rn],delete o[yh],delete o[q_],delete o[K_]}function fo(o){var u=o[rn];if(u)return u;for(var f=o.parentNode;f;){if(u=f[co]||f[rn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(o=f1(o);o!==null;){if(f=o[rn])return f;o=f1(o)}return u}o=f,f=o.parentNode}return null}function ho(o){if(o=o[rn]||o[co]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function Iu(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function po(o){var u=o[Wg];return u||(u=o[Wg]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Zt(o){o[Mu]=!0}var Gg=new Set,qg={};function Ri(o,u){vo(o,u),vo(o+"Capture",u)}function vo(o,u){for(qg[o]=u,o=0;o<u.length;o++)Gg.add(u[o])}var X_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kg={},Xg={};function $_(o){return tn.call(Xg,o)?!0:tn.call(Kg,o)?!1:X_.test(o)?Xg[o]=!0:(Kg[o]=!0,!1)}function wl(o,u,f){if($_(u))if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var p=u.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+f)}}function Sl(o,u,f){if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+f)}}function la(o,u,f,p){if(p===null)o.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(u,f,""+p)}}function or(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function $g(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Z_(o,u,f){var p=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,b=p.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return y.call(this)},set:function(T){f=""+T,b.call(this,T)}}),Object.defineProperty(o,u,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function xh(o){if(!o._valueTracker){var u=$g(o)?"checked":"value";o._valueTracker=Z_(o,u,""+o[u])}}function Zg(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var f=u.getValue(),p="";return o&&(p=$g(o)?o.checked?"true":"false":o.value),o=p,o!==f?(u.setValue(o),!0):!1}function El(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Y_=/[\n"\\]/g;function ur(o){return o.replace(Y_,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function wh(o,u,f,p,y,b,T,k){o.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?o.type=T:o.removeAttribute("type"),u!=null?T==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+or(u)):o.value!==""+or(u)&&(o.value=""+or(u)):T!=="submit"&&T!=="reset"||o.removeAttribute("value"),u!=null?Sh(o,T,or(u)):f!=null?Sh(o,T,or(f)):p!=null&&o.removeAttribute("value"),y==null&&b!=null&&(o.defaultChecked=!!b),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?o.name=""+or(k):o.removeAttribute("name")}function Yg(o,u,f,p,y,b,T,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.type=b),u!=null||f!=null){if(!(b!=="submit"&&b!=="reset"||u!=null)){xh(o);return}f=f!=null?""+or(f):"",u=u!=null?""+or(u):f,k||u===o.value||(o.value=u),o.defaultValue=u}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=k?o.checked:!!p,o.defaultChecked=!!p,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.name=T),xh(o)}function Sh(o,u,f){u==="number"&&El(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function mo(o,u,f,p){if(o=o.options,u){u={};for(var y=0;y<f.length;y++)u["$"+f[y]]=!0;for(f=0;f<o.length;f++)y=u.hasOwnProperty("$"+o[f].value),o[f].selected!==y&&(o[f].selected=y),y&&p&&(o[f].defaultSelected=!0)}else{for(f=""+or(f),u=null,y=0;y<o.length;y++){if(o[y].value===f){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}u!==null||o[y].disabled||(u=o[y])}u!==null&&(u.selected=!0)}}function Qg(o,u,f){if(u!=null&&(u=""+or(u),u!==o.value&&(o.value=u),f==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=f!=null?""+or(f):""}function Jg(o,u,f,p){if(u==null){if(p!=null){if(f!=null)throw Error(r(92));if(ne(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),u=f}f=or(u),o.defaultValue=f,p=o.textContent,p===f&&p!==""&&p!==null&&(o.value=p),xh(o)}function go(o,u){if(u){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=u;return}}o.textContent=u}var Q_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ey(o,u,f){var p=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":p?o.setProperty(u,f):typeof f!="number"||f===0||Q_.has(u)?u==="float"?o.cssFloat=f:o[u]=(""+f).trim():o[u]=f+"px"}function ty(o,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||u!=null&&u.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var y in u)p=u[y],u.hasOwnProperty(y)&&f[y]!==p&&ey(o,y,p)}else for(var b in u)u.hasOwnProperty(b)&&ey(o,b,u[b])}function Eh(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(o){return eC.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ca(){}var _h=null;function Ch(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yo=null,bo=null;function ny(o){var u=ho(o);if(u&&(o=u.stateNode)){var f=o[Rn]||null;e:switch(o=u.stateNode,u.type){case"input":if(wh(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ur(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var p=f[u];if(p!==o&&p.form===o.form){var y=p[Rn]||null;if(!y)throw Error(r(90));wh(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(u=0;u<f.length;u++)p=f[u],p.form===o.form&&Zg(p)}break e;case"textarea":Qg(o,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&mo(o,!!f.multiple,u,!1)}}}var Rh=!1;function ry(o,u,f){if(Rh)return o(u,f);Rh=!0;try{var p=o(u);return p}finally{if(Rh=!1,(yo!==null||bo!==null)&&(fc(),yo&&(u=yo,o=bo,bo=yo=null,ny(u),o)))for(u=0;u<o.length;u++)ny(o[u])}}function Fu(o,u){var f=o.stateNode;if(f===null)return null;var p=f[Rn]||null;if(p===null)return null;f=p[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ah=!1;if(fa)try{var Bu={};Object.defineProperty(Bu,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{Ah=!1}var Ha=null,Th=null,Cl=null;function ay(){if(Cl)return Cl;var o,u=Th,f=u.length,p,y="value"in Ha?Ha.value:Ha.textContent,b=y.length;for(o=0;o<f&&u[o]===y[o];o++);var T=f-o;for(p=1;p<=T&&u[f-p]===y[b-p];p++);return Cl=y.slice(o,1<p?1-p:void 0)}function Rl(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Al(){return!0}function iy(){return!1}function An(o){function u(f,p,y,b,T){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var k in o)o.hasOwnProperty(k)&&(f=o[k],this[k]=f?f(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Al:iy,this.isPropagationStopped=iy,this}return v(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),u}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=An(Ai),Lu=v({},Ai,{view:0,detail:0}),tC=An(Lu),Dh,Oh,zu,Dl=v({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==zu&&(zu&&o.type==="mousemove"?(Dh=o.screenX-zu.screenX,Oh=o.screenY-zu.screenY):Oh=Dh=0,zu=o),Dh)},movementY:function(o){return"movementY"in o?o.movementY:Oh}}),oy=An(Dl),nC=v({},Dl,{dataTransfer:0}),rC=An(nC),aC=v({},Lu,{relatedTarget:0}),kh=An(aC),iC=v({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),oC=An(iC),uC=v({},Ai,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),sC=An(uC),lC=v({},Ai,{data:0}),uy=An(lC),cC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dC(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=hC[o])?!!u[o]:!1}function Nh(){return dC}var pC=v({},Lu,{key:function(o){if(o.key){var u=cC[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Rl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?fC[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nh,charCode:function(o){return o.type==="keypress"?Rl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Rl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),vC=An(pC),mC=v({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sy=An(mC),gC=v({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nh}),yC=An(gC),bC=v({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),xC=An(bC),wC=v({},Dl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),SC=An(wC),EC=v({},Ai,{newState:0,oldState:0}),_C=An(EC),CC=[9,13,27,32],Mh=fa&&"CompositionEvent"in window,Pu=null;fa&&"documentMode"in document&&(Pu=document.documentMode);var RC=fa&&"TextEvent"in window&&!Pu,ly=fa&&(!Mh||Pu&&8<Pu&&11>=Pu),cy=" ",fy=!1;function hy(o,u){switch(o){case"keyup":return CC.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dy(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var xo=!1;function AC(o,u){switch(o){case"compositionend":return dy(u);case"keypress":return u.which!==32?null:(fy=!0,cy);case"textInput":return o=u.data,o===cy&&fy?null:o;default:return null}}function TC(o,u){if(xo)return o==="compositionend"||!Mh&&hy(o,u)?(o=ay(),Cl=Th=Ha=null,xo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ly&&u.locale!=="ko"?null:u.data;default:return null}}var DC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function py(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!DC[o.type]:u==="textarea"}function vy(o,u,f,p){yo?bo?bo.push(p):bo=[p]:yo=p,u=yc(u,"onChange"),0<u.length&&(f=new Tl("onChange","change",null,f,p),o.push({event:f,listeners:u}))}var Uu=null,Hu=null;function OC(o){Yb(o,0)}function Ol(o){var u=Iu(o);if(Zg(u))return o}function my(o,u){if(o==="change")return u}var gy=!1;if(fa){var Ih;if(fa){var Fh="oninput"in document;if(!Fh){var yy=document.createElement("div");yy.setAttribute("oninput","return;"),Fh=typeof yy.oninput=="function"}Ih=Fh}else Ih=!1;gy=Ih&&(!document.documentMode||9<document.documentMode)}function by(){Uu&&(Uu.detachEvent("onpropertychange",xy),Hu=Uu=null)}function xy(o){if(o.propertyName==="value"&&Ol(Hu)){var u=[];vy(u,Hu,o,Ch(o)),ry(OC,u)}}function kC(o,u,f){o==="focusin"?(by(),Uu=u,Hu=f,Uu.attachEvent("onpropertychange",xy)):o==="focusout"&&by()}function NC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ol(Hu)}function MC(o,u){if(o==="click")return Ol(u)}function IC(o,u){if(o==="input"||o==="change")return Ol(u)}function FC(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var jn=typeof Object.is=="function"?Object.is:FC;function Vu(o,u){if(jn(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var f=Object.keys(o),p=Object.keys(u);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!tn.call(u,y)||!jn(o[y],u[y]))return!1}return!0}function wy(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Sy(o,u){var f=wy(o);o=0;for(var p;f;){if(f.nodeType===3){if(p=o+f.textContent.length,o<=u&&p>=u)return{node:f,offset:u-o};o=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=wy(f)}}function Ey(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Ey(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function _y(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=El(o.document);u instanceof o.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)o=u.contentWindow;else break;u=El(o.document)}return u}function Bh(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var BC=fa&&"documentMode"in document&&11>=document.documentMode,wo=null,Lh=null,ju=null,zh=!1;function Cy(o,u,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;zh||wo==null||wo!==El(p)||(p=wo,"selectionStart"in p&&Bh(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ju&&Vu(ju,p)||(ju=p,p=yc(Lh,"onSelect"),0<p.length&&(u=new Tl("onSelect","select",null,u,f),o.push({event:u,listeners:p}),u.target=wo)))}function Ti(o,u){var f={};return f[o.toLowerCase()]=u.toLowerCase(),f["Webkit"+o]="webkit"+u,f["Moz"+o]="moz"+u,f}var So={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionrun:Ti("Transition","TransitionRun"),transitionstart:Ti("Transition","TransitionStart"),transitioncancel:Ti("Transition","TransitionCancel"),transitionend:Ti("Transition","TransitionEnd")},Ph={},Ry={};fa&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Di(o){if(Ph[o])return Ph[o];if(!So[o])return o;var u=So[o],f;for(f in u)if(u.hasOwnProperty(f)&&f in Ry)return Ph[o]=u[f];return o}var Ay=Di("animationend"),Ty=Di("animationiteration"),Dy=Di("animationstart"),LC=Di("transitionrun"),zC=Di("transitionstart"),PC=Di("transitioncancel"),Oy=Di("transitionend"),ky=new Map,Uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uh.push("scrollEnd");function Cr(o,u){ky.set(o,u),Ri(u,[o])}var kl=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},sr=[],Eo=0,Hh=0;function Nl(){for(var o=Eo,u=Hh=Eo=0;u<o;){var f=sr[u];sr[u++]=null;var p=sr[u];sr[u++]=null;var y=sr[u];sr[u++]=null;var b=sr[u];if(sr[u++]=null,p!==null&&y!==null){var T=p.pending;T===null?y.next=y:(y.next=T.next,T.next=y),p.pending=y}b!==0&&Ny(f,y,b)}}function Ml(o,u,f,p){sr[Eo++]=o,sr[Eo++]=u,sr[Eo++]=f,sr[Eo++]=p,Hh|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function Vh(o,u,f,p){return Ml(o,u,f,p),Il(o)}function Oi(o,u){return Ml(o,null,null,u),Il(o)}function Ny(o,u,f){o.lanes|=f;var p=o.alternate;p!==null&&(p.lanes|=f);for(var y=!1,b=o.return;b!==null;)b.childLanes|=f,p=b.alternate,p!==null&&(p.childLanes|=f),b.tag===22&&(o=b.stateNode,o===null||o._visibility&1||(y=!0)),o=b,b=b.return;return o.tag===3?(b=o.stateNode,y&&u!==null&&(y=31-Vn(f),o=b.hiddenUpdates,p=o[y],p===null?o[y]=[u]:p.push(u),u.lane=f|536870912),b):null}function Il(o){if(50<fs)throw fs=0,Yd=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var _o={};function UC(o,u,f,p){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(o,u,f,p){return new UC(o,u,f,p)}function jh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ha(o,u){var f=o.alternate;return f===null?(f=Wn(o.tag,u,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=u,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,u=o.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function My(o,u){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,u=f.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Fl(o,u,f,p,y,b){var T=0;if(p=o,typeof o=="function")jh(o)&&(T=1);else if(typeof o=="string")T=GR(o,f,de.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=Wn(31,f,u,y),o.elementType=N,o.lanes=b,o;case w:return ki(f.children,y,b,u);case S:T=8,y|=24;break;case E:return o=Wn(12,f,u,y|2),o.elementType=E,o.lanes=b,o;case C:return o=Wn(13,f,u,y),o.elementType=C,o.lanes=b,o;case D:return o=Wn(19,f,u,y),o.elementType=D,o.lanes=b,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:T=10;break e;case _:T=9;break e;case A:T=11;break e;case O:T=14;break e;case F:T=16,p=null;break e}T=29,f=Error(r(130,o===null?"null":typeof o,"")),p=null}return u=Wn(T,f,u,y),u.elementType=o,u.type=p,u.lanes=b,u}function ki(o,u,f,p){return o=Wn(7,o,p,u),o.lanes=f,o}function Wh(o,u,f){return o=Wn(6,o,null,u),o.lanes=f,o}function Iy(o){var u=Wn(18,null,null,0);return u.stateNode=o,u}function Gh(o,u,f){return u=Wn(4,o.children!==null?o.children:[],o.key,u),u.lanes=f,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Fy=new WeakMap;function lr(o,u){if(typeof o=="object"&&o!==null){var f=Fy.get(o);return f!==void 0?f:(u={value:o,source:u,stack:Un(u)},Fy.set(o,u),u)}return{value:o,source:u,stack:Un(u)}}var Co=[],Ro=0,Bl=null,Wu=0,cr=[],fr=0,Va=null,Br=1,Lr="";function da(o,u){Co[Ro++]=Wu,Co[Ro++]=Bl,Bl=o,Wu=u}function By(o,u,f){cr[fr++]=Br,cr[fr++]=Lr,cr[fr++]=Va,Va=o;var p=Br;o=Lr;var y=32-Vn(p)-1;p&=~(1<<y),f+=1;var b=32-Vn(u)+y;if(30<b){var T=y-y%5;b=(p&(1<<T)-1).toString(32),p>>=T,y-=T,Br=1<<32-Vn(u)+y|f<<y|p,Lr=b+o}else Br=1<<b|f<<y|p,Lr=o}function qh(o){o.return!==null&&(da(o,1),By(o,1,0))}function Kh(o){for(;o===Bl;)Bl=Co[--Ro],Co[Ro]=null,Wu=Co[--Ro],Co[Ro]=null;for(;o===Va;)Va=cr[--fr],cr[fr]=null,Lr=cr[--fr],cr[fr]=null,Br=cr[--fr],cr[fr]=null}function Ly(o,u){cr[fr++]=Br,cr[fr++]=Lr,cr[fr++]=Va,Br=u.id,Lr=u.overflow,Va=o}var an=null,gt=null,Ze=!1,ja=null,hr=!1,Xh=Error(r(519));function Wa(o){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gu(lr(u,o)),Xh}function zy(o){var u=o.stateNode,f=o.type,p=o.memoizedProps;switch(u[rn]=o,u[Rn]=p,f){case"dialog":Ge("cancel",u),Ge("close",u);break;case"iframe":case"object":case"embed":Ge("load",u);break;case"video":case"audio":for(f=0;f<ds.length;f++)Ge(ds[f],u);break;case"source":Ge("error",u);break;case"img":case"image":case"link":Ge("error",u),Ge("load",u);break;case"details":Ge("toggle",u);break;case"input":Ge("invalid",u),Yg(u,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Ge("invalid",u);break;case"textarea":Ge("invalid",u),Jg(u,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||p.suppressHydrationWarning===!0||t1(u.textContent,f)?(p.popover!=null&&(Ge("beforetoggle",u),Ge("toggle",u)),p.onScroll!=null&&Ge("scroll",u),p.onScrollEnd!=null&&Ge("scrollend",u),p.onClick!=null&&(u.onclick=ca),u=!0):u=!1,u||Wa(o,!0)}function Py(o){for(an=o.return;an;)switch(an.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:an=an.return}}function Ao(o){if(o!==an)return!1;if(!Ze)return Py(o),Ze=!0,!1;var u=o.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||hp(o.type,o.memoizedProps)),f=!f),f&&gt&&Wa(o),Py(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));gt=c1(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));gt=c1(o)}else u===27?(u=gt,ai(o.type)?(o=gp,gp=null,gt=o):gt=u):gt=an?pr(o.stateNode.nextSibling):null;return!0}function Ni(){gt=an=null,Ze=!1}function $h(){var o=ja;return o!==null&&(kn===null?kn=o:kn.push.apply(kn,o),ja=null),o}function Gu(o){ja===null?ja=[o]:ja.push(o)}var Zh=B(null),Mi=null,pa=null;function Ga(o,u,f){oe(Zh,u._currentValue),u._currentValue=f}function va(o){o._currentValue=Zh.current,X(Zh)}function Yh(o,u,f){for(;o!==null;){var p=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),o===f)break;o=o.return}}function Qh(o,u,f,p){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var b=y.dependencies;if(b!==null){var T=y.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=y;for(var P=0;P<u.length;P++)if(k.context===u[P]){b.lanes|=f,k=b.alternate,k!==null&&(k.lanes|=f),Yh(b.return,f,o),p||(T=null);break e}b=k.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(r(341));T.lanes|=f,b=T.alternate,b!==null&&(b.lanes|=f),Yh(T,f,o),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===o){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function To(o,u,f,p){o=null;for(var y=u,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var k=y.type;jn(y.pendingProps.value,T.value)||(o!==null?o.push(k):o=[k])}}else if(y===ye.current){if(T=y.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(ys):o=[ys])}y=y.return}o!==null&&Qh(u,o,f,p),u.flags|=262144}function Ll(o){for(o=o.firstContext;o!==null;){if(!jn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ii(o){Mi=o,pa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function on(o){return Uy(Mi,o)}function zl(o,u){return Mi===null&&Ii(o),Uy(o,u)}function Uy(o,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},pa===null){if(o===null)throw Error(r(308));pa=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else pa=pa.next=u;return f}var HC=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(f,p){o.push(p)}};this.abort=function(){u.aborted=!0,o.forEach(function(f){return f()})}},VC=n.unstable_scheduleCallback,jC=n.unstable_NormalPriority,Ft={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new HC,data:new Map,refCount:0}}function qu(o){o.refCount--,o.refCount===0&&VC(jC,function(){o.controller.abort()})}var Ku=null,ed=0,Do=0,Oo=null;function WC(o,u){if(Ku===null){var f=Ku=[];ed=0,Do=rp(),Oo={status:"pending",value:void 0,then:function(p){f.push(p)}}}return ed++,u.then(Hy,Hy),u}function Hy(){if(--ed===0&&Ku!==null){Oo!==null&&(Oo.status="fulfilled");var o=Ku;Ku=null,Do=0,Oo=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function GC(o,u){var f=[],p={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return o.then(function(){p.status="fulfilled",p.value=u;for(var y=0;y<f.length;y++)(0,f[y])(u)},function(y){for(p.status="rejected",p.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),p}var Vy=z.S;z.S=function(o,u){Cb=It(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&WC(o,u),Vy!==null&&Vy(o,u)};var Fi=B(null);function td(){var o=Fi.current;return o!==null?o:vt.pooledCache}function Pl(o,u){u===null?oe(Fi,Fi.current):oe(Fi,u.pool)}function jy(){var o=td();return o===null?null:{parent:Ft._currentValue,pool:o}}var ko=Error(r(460)),nd=Error(r(474)),Ul=Error(r(542)),Hl={then:function(){}};function Wy(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Gy(o,u,f){switch(f=o[f],f===void 0?o.push(u):f!==u&&(u.then(ca,ca),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Ky(o),o;default:if(typeof u.status=="string")u.then(ca,ca);else{if(o=vt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(p){if(u.status==="pending"){var y=u;y.status="fulfilled",y.value=p}},function(p){if(u.status==="pending"){var y=u;y.status="rejected",y.reason=p}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Ky(o),o}throw Li=u,ko}}function Bi(o){try{var u=o._init;return u(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Li=f,ko):f}}var Li=null;function qy(){if(Li===null)throw Error(r(459));var o=Li;return Li=null,o}function Ky(o){if(o===ko||o===Ul)throw Error(r(483))}var No=null,Xu=0;function Vl(o){var u=Xu;return Xu+=1,No===null&&(No=[]),Gy(No,o,u)}function $u(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function jl(o,u){throw u.$$typeof===m?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Xy(o){function u($,j){if(o){var Z=$.deletions;Z===null?($.deletions=[j],$.flags|=16):Z.push(j)}}function f($,j){if(!o)return null;for(;j!==null;)u($,j),j=j.sibling;return null}function p($){for(var j=new Map;$!==null;)$.key!==null?j.set($.key,$):j.set($.index,$),$=$.sibling;return j}function y($,j){return $=ha($,j),$.index=0,$.sibling=null,$}function b($,j,Z){return $.index=Z,o?(Z=$.alternate,Z!==null?(Z=Z.index,Z<j?($.flags|=67108866,j):Z):($.flags|=67108866,j)):($.flags|=1048576,j)}function T($){return o&&$.alternate===null&&($.flags|=67108866),$}function k($,j,Z,ce){return j===null||j.tag!==6?(j=Wh(Z,$.mode,ce),j.return=$,j):(j=y(j,Z),j.return=$,j)}function P($,j,Z,ce){var Oe=Z.type;return Oe===w?se($,j,Z.props.children,ce,Z.key):j!==null&&(j.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===F&&Bi(Oe)===j.type)?(j=y(j,Z.props),$u(j,Z),j.return=$,j):(j=Fl(Z.type,Z.key,Z.props,null,$.mode,ce),$u(j,Z),j.return=$,j)}function Y($,j,Z,ce){return j===null||j.tag!==4||j.stateNode.containerInfo!==Z.containerInfo||j.stateNode.implementation!==Z.implementation?(j=Gh(Z,$.mode,ce),j.return=$,j):(j=y(j,Z.children||[]),j.return=$,j)}function se($,j,Z,ce,Oe){return j===null||j.tag!==7?(j=ki(Z,$.mode,ce,Oe),j.return=$,j):(j=y(j,Z),j.return=$,j)}function fe($,j,Z){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Wh(""+j,$.mode,Z),j.return=$,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case g:return Z=Fl(j.type,j.key,j.props,null,$.mode,Z),$u(Z,j),Z.return=$,Z;case x:return j=Gh(j,$.mode,Z),j.return=$,j;case F:return j=Bi(j),fe($,j,Z)}if(ne(j)||H(j))return j=ki(j,$.mode,Z,null),j.return=$,j;if(typeof j.then=="function")return fe($,Vl(j),Z);if(j.$$typeof===R)return fe($,zl($,j),Z);jl($,j)}return null}function Q($,j,Z,ce){var Oe=j!==null?j.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Oe!==null?null:k($,j,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case g:return Z.key===Oe?P($,j,Z,ce):null;case x:return Z.key===Oe?Y($,j,Z,ce):null;case F:return Z=Bi(Z),Q($,j,Z,ce)}if(ne(Z)||H(Z))return Oe!==null?null:se($,j,Z,ce,null);if(typeof Z.then=="function")return Q($,j,Vl(Z),ce);if(Z.$$typeof===R)return Q($,j,zl($,Z),ce);jl($,Z)}return null}function ae($,j,Z,ce,Oe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return $=$.get(Z)||null,k(j,$,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return $=$.get(ce.key===null?Z:ce.key)||null,P(j,$,ce,Oe);case x:return $=$.get(ce.key===null?Z:ce.key)||null,Y(j,$,ce,Oe);case F:return ce=Bi(ce),ae($,j,Z,ce,Oe)}if(ne(ce)||H(ce))return $=$.get(Z)||null,se(j,$,ce,Oe,null);if(typeof ce.then=="function")return ae($,j,Z,Vl(ce),Oe);if(ce.$$typeof===R)return ae($,j,Z,zl(j,ce),Oe);jl(j,ce)}return null}function xe($,j,Z,ce){for(var Oe=null,Je=null,Ee=j,Pe=j=0,Xe=null;Ee!==null&&Pe<Z.length;Pe++){Ee.index>Pe?(Xe=Ee,Ee=null):Xe=Ee.sibling;var et=Q($,Ee,Z[Pe],ce);if(et===null){Ee===null&&(Ee=Xe);break}o&&Ee&&et.alternate===null&&u($,Ee),j=b(et,j,Pe),Je===null?Oe=et:Je.sibling=et,Je=et,Ee=Xe}if(Pe===Z.length)return f($,Ee),Ze&&da($,Pe),Oe;if(Ee===null){for(;Pe<Z.length;Pe++)Ee=fe($,Z[Pe],ce),Ee!==null&&(j=b(Ee,j,Pe),Je===null?Oe=Ee:Je.sibling=Ee,Je=Ee);return Ze&&da($,Pe),Oe}for(Ee=p(Ee);Pe<Z.length;Pe++)Xe=ae(Ee,$,Pe,Z[Pe],ce),Xe!==null&&(o&&Xe.alternate!==null&&Ee.delete(Xe.key===null?Pe:Xe.key),j=b(Xe,j,Pe),Je===null?Oe=Xe:Je.sibling=Xe,Je=Xe);return o&&Ee.forEach(function(li){return u($,li)}),Ze&&da($,Pe),Oe}function ke($,j,Z,ce){if(Z==null)throw Error(r(151));for(var Oe=null,Je=null,Ee=j,Pe=j=0,Xe=null,et=Z.next();Ee!==null&&!et.done;Pe++,et=Z.next()){Ee.index>Pe?(Xe=Ee,Ee=null):Xe=Ee.sibling;var li=Q($,Ee,et.value,ce);if(li===null){Ee===null&&(Ee=Xe);break}o&&Ee&&li.alternate===null&&u($,Ee),j=b(li,j,Pe),Je===null?Oe=li:Je.sibling=li,Je=li,Ee=Xe}if(et.done)return f($,Ee),Ze&&da($,Pe),Oe;if(Ee===null){for(;!et.done;Pe++,et=Z.next())et=fe($,et.value,ce),et!==null&&(j=b(et,j,Pe),Je===null?Oe=et:Je.sibling=et,Je=et);return Ze&&da($,Pe),Oe}for(Ee=p(Ee);!et.done;Pe++,et=Z.next())et=ae(Ee,$,Pe,et.value,ce),et!==null&&(o&&et.alternate!==null&&Ee.delete(et.key===null?Pe:et.key),j=b(et,j,Pe),Je===null?Oe=et:Je.sibling=et,Je=et);return o&&Ee.forEach(function(nA){return u($,nA)}),Ze&&da($,Pe),Oe}function pt($,j,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case g:e:{for(var Oe=Z.key;j!==null;){if(j.key===Oe){if(Oe=Z.type,Oe===w){if(j.tag===7){f($,j.sibling),ce=y(j,Z.props.children),ce.return=$,$=ce;break e}}else if(j.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===F&&Bi(Oe)===j.type){f($,j.sibling),ce=y(j,Z.props),$u(ce,Z),ce.return=$,$=ce;break e}f($,j);break}else u($,j);j=j.sibling}Z.type===w?(ce=ki(Z.props.children,$.mode,ce,Z.key),ce.return=$,$=ce):(ce=Fl(Z.type,Z.key,Z.props,null,$.mode,ce),$u(ce,Z),ce.return=$,$=ce)}return T($);case x:e:{for(Oe=Z.key;j!==null;){if(j.key===Oe)if(j.tag===4&&j.stateNode.containerInfo===Z.containerInfo&&j.stateNode.implementation===Z.implementation){f($,j.sibling),ce=y(j,Z.children||[]),ce.return=$,$=ce;break e}else{f($,j);break}else u($,j);j=j.sibling}ce=Gh(Z,$.mode,ce),ce.return=$,$=ce}return T($);case F:return Z=Bi(Z),pt($,j,Z,ce)}if(ne(Z))return xe($,j,Z,ce);if(H(Z)){if(Oe=H(Z),typeof Oe!="function")throw Error(r(150));return Z=Oe.call(Z),ke($,j,Z,ce)}if(typeof Z.then=="function")return pt($,j,Vl(Z),ce);if(Z.$$typeof===R)return pt($,j,zl($,Z),ce);jl($,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,j!==null&&j.tag===6?(f($,j.sibling),ce=y(j,Z),ce.return=$,$=ce):(f($,j),ce=Wh(Z,$.mode,ce),ce.return=$,$=ce),T($)):f($,j)}return function($,j,Z,ce){try{Xu=0;var Oe=pt($,j,Z,ce);return No=null,Oe}catch(Ee){if(Ee===ko||Ee===Ul)throw Ee;var Je=Wn(29,Ee,null,$.mode);return Je.lanes=ce,Je.return=$,Je}finally{}}}var zi=Xy(!0),$y=Xy(!1),qa=!1;function rd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ka(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Xa(o,u,f){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(nt&2)!==0){var y=p.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),p.pending=u,u=Il(o),Ny(o,null,f),u}return Ml(o,p,u,f),Il(o)}function Zu(o,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var p=u.lanes;p&=o.pendingLanes,f|=p,u.lanes=f,Ug(o,f)}}function id(o,u){var f=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var T={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};b===null?y=b=T:b=b.next=T,f=f.next}while(f!==null);b===null?y=b=u:b=b.next=u}else y=b=u;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=u}var od=!1;function Yu(){if(od){var o=Oo;if(o!==null)throw o}}function Qu(o,u,f,p){od=!1;var y=o.updateQueue;qa=!1;var b=y.firstBaseUpdate,T=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var P=k,Y=P.next;P.next=null,T===null?b=Y:T.next=Y,T=P;var se=o.alternate;se!==null&&(se=se.updateQueue,k=se.lastBaseUpdate,k!==T&&(k===null?se.firstBaseUpdate=Y:k.next=Y,se.lastBaseUpdate=P))}if(b!==null){var fe=y.baseState;T=0,se=Y=P=null,k=b;do{var Q=k.lane&-536870913,ae=Q!==k.lane;if(ae?(Ke&Q)===Q:(p&Q)===Q){Q!==0&&Q===Do&&(od=!0),se!==null&&(se=se.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var xe=o,ke=k;Q=u;var pt=f;switch(ke.tag){case 1:if(xe=ke.payload,typeof xe=="function"){fe=xe.call(pt,fe,Q);break e}fe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ke.payload,Q=typeof xe=="function"?xe.call(pt,fe,Q):xe,Q==null)break e;fe=v({},fe,Q);break e;case 2:qa=!0}}Q=k.callback,Q!==null&&(o.flags|=64,ae&&(o.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[Q]:ae.push(Q))}else ae={lane:Q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},se===null?(Y=se=ae,P=fe):se=se.next=ae,T|=Q;if(k=k.next,k===null){if(k=y.shared.pending,k===null)break;ae=k,k=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);se===null&&(P=fe),y.baseState=P,y.firstBaseUpdate=Y,y.lastBaseUpdate=se,b===null&&(y.shared.lanes=0),Ja|=T,o.lanes=T,o.memoizedState=fe}}function Zy(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function Yy(o,u){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)Zy(f[o],u)}var Mo=B(null),Wl=B(0);function Qy(o,u){o=_a,oe(Wl,o),oe(Mo,u),_a=o|u.baseLanes}function ud(){oe(Wl,_a),oe(Mo,Mo.current)}function sd(){_a=Wl.current,X(Mo),X(Wl)}var Gn=B(null),dr=null;function $a(o){var u=o.alternate;oe(kt,kt.current&1),oe(Gn,o),dr===null&&(u===null||Mo.current!==null||u.memoizedState!==null)&&(dr=o)}function ld(o){oe(kt,kt.current),oe(Gn,o),dr===null&&(dr=o)}function Jy(o){o.tag===22?(oe(kt,kt.current),oe(Gn,o),dr===null&&(dr=o)):Za()}function Za(){oe(kt,kt.current),oe(Gn,Gn.current)}function qn(o){X(Gn),dr===o&&(dr=null),X(kt)}var kt=B(0);function Gl(o){for(var u=o;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||vp(f)||mp(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ma=0,ze=null,ht=null,Bt=null,ql=!1,Io=!1,Pi=!1,Kl=0,Ju=0,Fo=null,qC=0;function Tt(){throw Error(r(321))}function cd(o,u){if(u===null)return!1;for(var f=0;f<u.length&&f<o.length;f++)if(!jn(o[f],u[f]))return!1;return!0}function fd(o,u,f,p,y,b){return ma=b,ze=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=o===null||o.memoizedState===null?B0:Rd,Pi=!1,b=f(p,y),Pi=!1,Io&&(b=t0(u,f,p,y)),e0(o),b}function e0(o){z.H=ns;var u=ht!==null&&ht.next!==null;if(ma=0,Bt=ht=ze=null,ql=!1,Ju=0,Fo=null,u)throw Error(r(300));o===null||Lt||(o=o.dependencies,o!==null&&Ll(o)&&(Lt=!0))}function t0(o,u,f,p){ze=o;var y=0;do{if(Io&&(Fo=null),Ju=0,Io=!1,25<=y)throw Error(r(301));if(y+=1,Bt=ht=null,o.updateQueue!=null){var b=o.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}z.H=L0,b=u(f,p)}while(Io);return b}function KC(){var o=z.H,u=o.useState()[0];return u=typeof u.then=="function"?es(u):u,o=o.useState()[0],(ht!==null?ht.memoizedState:null)!==o&&(ze.flags|=1024),u}function hd(){var o=Kl!==0;return Kl=0,o}function dd(o,u,f){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~f}function pd(o){if(ql){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}ql=!1}ma=0,Bt=ht=ze=null,Io=!1,Ju=Kl=0,Fo=null}function Sn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ze.memoizedState=Bt=o:Bt=Bt.next=o,Bt}function Nt(){if(ht===null){var o=ze.alternate;o=o!==null?o.memoizedState:null}else o=ht.next;var u=Bt===null?ze.memoizedState:Bt.next;if(u!==null)Bt=u,ht=o;else{if(o===null)throw ze.alternate===null?Error(r(467)):Error(r(310));ht=o,o={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Bt===null?ze.memoizedState=Bt=o:Bt=Bt.next=o}return Bt}function Xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function es(o){var u=Ju;return Ju+=1,Fo===null&&(Fo=[]),o=Gy(Fo,o,u),u=ze,(Bt===null?u.memoizedState:Bt.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?B0:Rd),o}function $l(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return es(o);if(o.$$typeof===R)return on(o)}throw Error(r(438,String(o)))}function vd(o){var u=null,f=ze.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var p=ze.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(u={data:p.data.map(function(y){return y.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=Xl(),ze.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(o),p=0;p<o;p++)f[p]=I;return u.index++,f}function ga(o,u){return typeof u=="function"?u(o):u}function Zl(o){var u=Nt();return md(u,ht,o)}function md(o,u,f){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var y=o.baseQueue,b=p.pending;if(b!==null){if(y!==null){var T=y.next;y.next=b.next,b.next=T}u.baseQueue=y=b,p.pending=null}if(b=o.baseState,y===null)o.memoizedState=b;else{u=y.next;var k=T=null,P=null,Y=u,se=!1;do{var fe=Y.lane&-536870913;if(fe!==Y.lane?(Ke&fe)===fe:(ma&fe)===fe){var Q=Y.revertLane;if(Q===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),fe===Do&&(se=!0);else if((ma&Q)===Q){Y=Y.next,Q===Do&&(se=!0);continue}else fe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(k=P=fe,T=b):P=P.next=fe,ze.lanes|=Q,Ja|=Q;fe=Y.action,Pi&&f(b,fe),b=Y.hasEagerState?Y.eagerState:f(b,fe)}else Q={lane:fe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(k=P=Q,T=b):P=P.next=Q,ze.lanes|=fe,Ja|=fe;Y=Y.next}while(Y!==null&&Y!==u);if(P===null?T=b:P.next=k,!jn(b,o.memoizedState)&&(Lt=!0,se&&(f=Oo,f!==null)))throw f;o.memoizedState=b,o.baseState=T,o.baseQueue=P,p.lastRenderedState=b}return y===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function gd(o){var u=Nt(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var p=f.dispatch,y=f.pending,b=u.memoizedState;if(y!==null){f.pending=null;var T=y=y.next;do b=o(b,T.action),T=T.next;while(T!==y);jn(b,u.memoizedState)||(Lt=!0),u.memoizedState=b,u.baseQueue===null&&(u.baseState=b),f.lastRenderedState=b}return[b,p]}function n0(o,u,f){var p=ze,y=Nt(),b=Ze;if(b){if(f===void 0)throw Error(r(407));f=f()}else f=u();var T=!jn((ht||y).memoizedState,f);if(T&&(y.memoizedState=f,Lt=!0),y=y.queue,xd(i0.bind(null,p,y,o),[o]),y.getSnapshot!==u||T||Bt!==null&&Bt.memoizedState.tag&1){if(p.flags|=2048,Bo(9,{destroy:void 0},a0.bind(null,p,y,f,u),null),vt===null)throw Error(r(349));b||(ma&127)!==0||r0(p,u,f)}return f}function r0(o,u,f){o.flags|=16384,o={getSnapshot:u,value:f},u=ze.updateQueue,u===null?(u=Xl(),ze.updateQueue=u,u.stores=[o]):(f=u.stores,f===null?u.stores=[o]:f.push(o))}function a0(o,u,f,p){u.value=f,u.getSnapshot=p,o0(u)&&u0(o)}function i0(o,u,f){return f(function(){o0(u)&&u0(o)})}function o0(o){var u=o.getSnapshot;o=o.value;try{var f=u();return!jn(o,f)}catch{return!0}}function u0(o){var u=Oi(o,2);u!==null&&Nn(u,o,2)}function yd(o){var u=Sn();if(typeof o=="function"){var f=o;if(o=f(),Pi){ir(!0);try{f()}finally{ir(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:o},u}function s0(o,u,f,p){return o.baseState=f,md(o,ht,typeof p=="function"?p:ga)}function XC(o,u,f,p,y){if(Jl(o))throw Error(r(485));if(o=u.action,o!==null){var b={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};z.T!==null?f(!0):b.isTransition=!1,p(b),f=u.pending,f===null?(b.next=u.pending=b,l0(u,b)):(b.next=f.next,u.pending=f.next=b)}}function l0(o,u){var f=u.action,p=u.payload,y=o.state;if(u.isTransition){var b=z.T,T={};z.T=T;try{var k=f(y,p),P=z.S;P!==null&&P(T,k),c0(o,u,k)}catch(Y){bd(o,u,Y)}finally{b!==null&&T.types!==null&&(b.types=T.types),z.T=b}}else try{b=f(y,p),c0(o,u,b)}catch(Y){bd(o,u,Y)}}function c0(o,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){f0(o,u,p)},function(p){return bd(o,u,p)}):f0(o,u,f)}function f0(o,u,f){u.status="fulfilled",u.value=f,h0(u),o.state=f,u=o.pending,u!==null&&(f=u.next,f===u?o.pending=null:(f=f.next,u.next=f,l0(o,f)))}function bd(o,u,f){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do u.status="rejected",u.reason=f,h0(u),u=u.next;while(u!==p)}o.action=null}function h0(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function d0(o,u){return u}function p0(o,u){if(Ze){var f=vt.formState;if(f!==null){e:{var p=ze;if(Ze){if(gt){t:{for(var y=gt,b=hr;y.nodeType!==8;){if(!b){y=null;break t}if(y=pr(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){gt=pr(y.nextSibling),p=y.data==="F!";break e}}Wa(p)}p=!1}p&&(u=f[0])}}return f=Sn(),f.memoizedState=f.baseState=u,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d0,lastRenderedState:u},f.queue=p,f=M0.bind(null,ze,p),p.dispatch=f,p=yd(!1),b=Cd.bind(null,ze,!1,p.queue),p=Sn(),y={state:u,dispatch:null,action:o,pending:null},p.queue=y,f=XC.bind(null,ze,y,b,f),y.dispatch=f,p.memoizedState=o,[u,f,!1]}function v0(o){var u=Nt();return m0(u,ht,o)}function m0(o,u,f){if(u=md(o,u,d0)[0],o=Zl(ga)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var p=es(u)}catch(T){throw T===ko?Ul:T}else p=u;u=Nt();var y=u.queue,b=y.dispatch;return f!==u.memoizedState&&(ze.flags|=2048,Bo(9,{destroy:void 0},$C.bind(null,y,f),null)),[p,b,o]}function $C(o,u){o.action=u}function g0(o){var u=Nt(),f=ht;if(f!==null)return m0(u,f,o);Nt(),u=u.memoizedState,f=Nt();var p=f.queue.dispatch;return f.memoizedState=o,[u,p,!1]}function Bo(o,u,f,p){return o={tag:o,create:f,deps:p,inst:u,next:null},u=ze.updateQueue,u===null&&(u=Xl(),ze.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=o.next=o:(p=f.next,f.next=o,o.next=p,u.lastEffect=o),o}function y0(){return Nt().memoizedState}function Yl(o,u,f,p){var y=Sn();ze.flags|=o,y.memoizedState=Bo(1|u,{destroy:void 0},f,p===void 0?null:p)}function Ql(o,u,f,p){var y=Nt();p=p===void 0?null:p;var b=y.memoizedState.inst;ht!==null&&p!==null&&cd(p,ht.memoizedState.deps)?y.memoizedState=Bo(u,b,f,p):(ze.flags|=o,y.memoizedState=Bo(1|u,b,f,p))}function b0(o,u){Yl(8390656,8,o,u)}function xd(o,u){Ql(2048,8,o,u)}function ZC(o){ze.flags|=4;var u=ze.updateQueue;if(u===null)u=Xl(),ze.updateQueue=u,u.events=[o];else{var f=u.events;f===null?u.events=[o]:f.push(o)}}function x0(o){var u=Nt().memoizedState;return ZC({ref:u,nextImpl:o}),function(){if((nt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function w0(o,u){return Ql(4,2,o,u)}function S0(o,u){return Ql(4,4,o,u)}function E0(o,u){if(typeof u=="function"){o=o();var f=u(o);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function _0(o,u,f){f=f!=null?f.concat([o]):null,Ql(4,4,E0.bind(null,u,o),f)}function wd(){}function C0(o,u){var f=Nt();u=u===void 0?null:u;var p=f.memoizedState;return u!==null&&cd(u,p[1])?p[0]:(f.memoizedState=[o,u],o)}function R0(o,u){var f=Nt();u=u===void 0?null:u;var p=f.memoizedState;if(u!==null&&cd(u,p[1]))return p[0];if(p=o(),Pi){ir(!0);try{o()}finally{ir(!1)}}return f.memoizedState=[p,u],p}function Sd(o,u,f){return f===void 0||(ma&1073741824)!==0&&(Ke&261930)===0?o.memoizedState=u:(o.memoizedState=f,o=Ab(),ze.lanes|=o,Ja|=o,f)}function A0(o,u,f,p){return jn(f,u)?f:Mo.current!==null?(o=Sd(o,f,p),jn(o,u)||(Lt=!0),o):(ma&42)===0||(ma&1073741824)!==0&&(Ke&261930)===0?(Lt=!0,o.memoizedState=f):(o=Ab(),ze.lanes|=o,Ja|=o,u)}function T0(o,u,f,p,y){var b=W.p;W.p=b!==0&&8>b?b:8;var T=z.T,k={};z.T=k,Cd(o,!1,u,f);try{var P=y(),Y=z.S;if(Y!==null&&Y(k,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var se=GC(P,p);ts(o,u,se,$n(o))}else ts(o,u,p,$n(o))}catch(fe){ts(o,u,{then:function(){},status:"rejected",reason:fe},$n())}finally{W.p=b,T!==null&&k.types!==null&&(T.types=k.types),z.T=T}}function YC(){}function Ed(o,u,f,p){if(o.tag!==5)throw Error(r(476));var y=D0(o).queue;T0(o,y,u,q,f===null?YC:function(){return O0(o),f(p)})}function D0(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:q},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:f},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function O0(o){var u=D0(o);u.next===null&&(u=o.alternate.memoizedState),ts(o,u.next.queue,{},$n())}function _d(){return on(ys)}function k0(){return Nt().memoizedState}function N0(){return Nt().memoizedState}function QC(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var f=$n();o=Ka(f);var p=Xa(u,o,f);p!==null&&(Nn(p,u,f),Zu(p,u,f)),u={cache:Jh()},o.payload=u;return}u=u.return}}function JC(o,u,f){var p=$n();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Jl(o)?I0(u,f):(f=Vh(o,u,f,p),f!==null&&(Nn(f,o,p),F0(f,u,p)))}function M0(o,u,f){var p=$n();ts(o,u,f,p)}function ts(o,u,f,p){var y={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Jl(o))I0(u,y);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=u.lastRenderedReducer,b!==null))try{var T=u.lastRenderedState,k=b(T,f);if(y.hasEagerState=!0,y.eagerState=k,jn(k,T))return Ml(o,u,y,0),vt===null&&Nl(),!1}catch{}finally{}if(f=Vh(o,u,y,p),f!==null)return Nn(f,o,p),F0(f,u,p),!0}return!1}function Cd(o,u,f,p){if(p={lane:2,revertLane:rp(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Jl(o)){if(u)throw Error(r(479))}else u=Vh(o,f,p,2),u!==null&&Nn(u,o,2)}function Jl(o){var u=o.alternate;return o===ze||u!==null&&u===ze}function I0(o,u){Io=ql=!0;var f=o.pending;f===null?u.next=u:(u.next=f.next,f.next=u),o.pending=u}function F0(o,u,f){if((f&4194048)!==0){var p=u.lanes;p&=o.pendingLanes,f|=p,u.lanes=f,Ug(o,f)}}var ns={readContext:on,use:$l,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};ns.useEffectEvent=Tt;var B0={readContext:on,use:$l,useCallback:function(o,u){return Sn().memoizedState=[o,u===void 0?null:u],o},useContext:on,useEffect:b0,useImperativeHandle:function(o,u,f){f=f!=null?f.concat([o]):null,Yl(4194308,4,E0.bind(null,u,o),f)},useLayoutEffect:function(o,u){return Yl(4194308,4,o,u)},useInsertionEffect:function(o,u){Yl(4,2,o,u)},useMemo:function(o,u){var f=Sn();u=u===void 0?null:u;var p=o();if(Pi){ir(!0);try{o()}finally{ir(!1)}}return f.memoizedState=[p,u],p},useReducer:function(o,u,f){var p=Sn();if(f!==void 0){var y=f(u);if(Pi){ir(!0);try{f(u)}finally{ir(!1)}}}else y=u;return p.memoizedState=p.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},p.queue=o,o=o.dispatch=JC.bind(null,ze,o),[p.memoizedState,o]},useRef:function(o){var u=Sn();return o={current:o},u.memoizedState=o},useState:function(o){o=yd(o);var u=o.queue,f=M0.bind(null,ze,u);return u.dispatch=f,[o.memoizedState,f]},useDebugValue:wd,useDeferredValue:function(o,u){var f=Sn();return Sd(f,o,u)},useTransition:function(){var o=yd(!1);return o=T0.bind(null,ze,o.queue,!0,!1),Sn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,f){var p=ze,y=Sn();if(Ze){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),vt===null)throw Error(r(349));(Ke&127)!==0||r0(p,u,f)}y.memoizedState=f;var b={value:f,getSnapshot:u};return y.queue=b,b0(i0.bind(null,p,b,o),[o]),p.flags|=2048,Bo(9,{destroy:void 0},a0.bind(null,p,b,f,u),null),f},useId:function(){var o=Sn(),u=vt.identifierPrefix;if(Ze){var f=Lr,p=Br;f=(p&~(1<<32-Vn(p)-1)).toString(32)+f,u="_"+u+"R_"+f,f=Kl++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=qC++,u="_"+u+"r_"+f.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:_d,useFormState:p0,useActionState:p0,useOptimistic:function(o){var u=Sn();u.memoizedState=u.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=Cd.bind(null,ze,!0,f),f.dispatch=u,[o,u]},useMemoCache:vd,useCacheRefresh:function(){return Sn().memoizedState=QC.bind(null,ze)},useEffectEvent:function(o){var u=Sn(),f={impl:o};return u.memoizedState=f,function(){if((nt&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Rd={readContext:on,use:$l,useCallback:C0,useContext:on,useEffect:xd,useImperativeHandle:_0,useInsertionEffect:w0,useLayoutEffect:S0,useMemo:R0,useReducer:Zl,useRef:y0,useState:function(){return Zl(ga)},useDebugValue:wd,useDeferredValue:function(o,u){var f=Nt();return A0(f,ht.memoizedState,o,u)},useTransition:function(){var o=Zl(ga)[0],u=Nt().memoizedState;return[typeof o=="boolean"?o:es(o),u]},useSyncExternalStore:n0,useId:k0,useHostTransitionStatus:_d,useFormState:v0,useActionState:v0,useOptimistic:function(o,u){var f=Nt();return s0(f,ht,o,u)},useMemoCache:vd,useCacheRefresh:N0};Rd.useEffectEvent=x0;var L0={readContext:on,use:$l,useCallback:C0,useContext:on,useEffect:xd,useImperativeHandle:_0,useInsertionEffect:w0,useLayoutEffect:S0,useMemo:R0,useReducer:gd,useRef:y0,useState:function(){return gd(ga)},useDebugValue:wd,useDeferredValue:function(o,u){var f=Nt();return ht===null?Sd(f,o,u):A0(f,ht.memoizedState,o,u)},useTransition:function(){var o=gd(ga)[0],u=Nt().memoizedState;return[typeof o=="boolean"?o:es(o),u]},useSyncExternalStore:n0,useId:k0,useHostTransitionStatus:_d,useFormState:g0,useActionState:g0,useOptimistic:function(o,u){var f=Nt();return ht!==null?s0(f,ht,o,u):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:vd,useCacheRefresh:N0};L0.useEffectEvent=x0;function Ad(o,u,f,p){u=o.memoizedState,f=f(p,u),f=f==null?u:v({},u,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Td={enqueueSetState:function(o,u,f){o=o._reactInternals;var p=$n(),y=Ka(p);y.payload=u,f!=null&&(y.callback=f),u=Xa(o,y,p),u!==null&&(Nn(u,o,p),Zu(u,o,p))},enqueueReplaceState:function(o,u,f){o=o._reactInternals;var p=$n(),y=Ka(p);y.tag=1,y.payload=u,f!=null&&(y.callback=f),u=Xa(o,y,p),u!==null&&(Nn(u,o,p),Zu(u,o,p))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var f=$n(),p=Ka(f);p.tag=2,u!=null&&(p.callback=u),u=Xa(o,p,f),u!==null&&(Nn(u,o,f),Zu(u,o,f))}};function z0(o,u,f,p,y,b,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,b,T):u.prototype&&u.prototype.isPureReactComponent?!Vu(f,p)||!Vu(y,b):!0}function P0(o,u,f,p){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,p),u.state!==o&&Td.enqueueReplaceState(u,u.state,null)}function Ui(o,u){var f=u;if("ref"in u){f={};for(var p in u)p!=="ref"&&(f[p]=u[p])}if(o=o.defaultProps){f===u&&(f=v({},f));for(var y in o)f[y]===void 0&&(f[y]=o[y])}return f}function U0(o){kl(o)}function H0(o){console.error(o)}function V0(o){kl(o)}function ec(o,u){try{var f=o.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(p){setTimeout(function(){throw p})}}function j0(o,u,f){try{var p=o.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Dd(o,u,f){return f=Ka(f),f.tag=3,f.payload={element:null},f.callback=function(){ec(o,u)},f}function W0(o){return o=Ka(o),o.tag=3,o}function G0(o,u,f,p){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var b=p.value;o.payload=function(){return y(b)},o.callback=function(){j0(u,f,p)}}var T=f.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(o.callback=function(){j0(u,f,p),typeof y!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var k=p.stack;this.componentDidCatch(p.value,{componentStack:k!==null?k:""})})}function eR(o,u,f,p,y){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(u=f.alternate,u!==null&&To(u,f,y,!0),f=Gn.current,f!==null){switch(f.tag){case 31:case 13:return dr===null?hc():f.alternate===null&&Dt===0&&(Dt=3),f.flags&=-257,f.flags|=65536,f.lanes=y,p===Hl?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([p]):u.add(p),ep(o,p,y)),!1;case 22:return f.flags|=65536,p===Hl?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([p]):f.add(p)),ep(o,p,y)),!1}throw Error(r(435,f.tag))}return ep(o,p,y),hc(),!1}if(Ze)return u=Gn.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=y,p!==Xh&&(o=Error(r(422),{cause:p}),Gu(lr(o,f)))):(p!==Xh&&(u=Error(r(423),{cause:p}),Gu(lr(u,f))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,p=lr(p,f),y=Dd(o.stateNode,p,y),id(o,y),Dt!==4&&(Dt=2)),!1;var b=Error(r(520),{cause:p});if(b=lr(b,f),cs===null?cs=[b]:cs.push(b),Dt!==4&&(Dt=2),u===null)return!0;p=lr(p,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,o=y&-y,f.lanes|=o,o=Dd(f.stateNode,p,o),id(f,o),!1;case 1:if(u=f.type,b=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ei===null||!ei.has(b))))return f.flags|=65536,y&=-y,f.lanes|=y,y=W0(y),G0(y,o,f,p),id(f,y),!1}f=f.return}while(f!==null);return!1}var Od=Error(r(461)),Lt=!1;function un(o,u,f,p){u.child=o===null?$y(u,null,f,p):zi(u,o.child,f,p)}function q0(o,u,f,p,y){f=f.render;var b=u.ref;if("ref"in p){var T={};for(var k in p)k!=="ref"&&(T[k]=p[k])}else T=p;return Ii(u),p=fd(o,u,f,T,b,y),k=hd(),o!==null&&!Lt?(dd(o,u,y),ya(o,u,y)):(Ze&&k&&qh(u),u.flags|=1,un(o,u,p,y),u.child)}function K0(o,u,f,p,y){if(o===null){var b=f.type;return typeof b=="function"&&!jh(b)&&b.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=b,X0(o,u,b,p,y)):(o=Fl(f.type,null,p,u,u.mode,y),o.ref=u.ref,o.return=u,u.child=o)}if(b=o.child,!zd(o,y)){var T=b.memoizedProps;if(f=f.compare,f=f!==null?f:Vu,f(T,p)&&o.ref===u.ref)return ya(o,u,y)}return u.flags|=1,o=ha(b,p),o.ref=u.ref,o.return=u,u.child=o}function X0(o,u,f,p,y){if(o!==null){var b=o.memoizedProps;if(Vu(b,p)&&o.ref===u.ref)if(Lt=!1,u.pendingProps=p=b,zd(o,y))(o.flags&131072)!==0&&(Lt=!0);else return u.lanes=o.lanes,ya(o,u,y)}return kd(o,u,f,p,y)}function $0(o,u,f,p){var y=p.children,b=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((u.flags&128)!==0){if(b=b!==null?b.baseLanes|f:f,o!==null){for(p=u.child=o.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~b}else p=0,u.child=null;return Z0(o,u,b,f,p)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Pl(u,b!==null?b.cachePool:null),b!==null?Qy(u,b):ud(),Jy(u);else return p=u.lanes=536870912,Z0(o,u,b!==null?b.baseLanes|f:f,f,p)}else b!==null?(Pl(u,b.cachePool),Qy(u,b),Za(),u.memoizedState=null):(o!==null&&Pl(u,null),ud(),Za());return un(o,u,y,f),u.child}function rs(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Z0(o,u,f,p,y){var b=td();return b=b===null?null:{parent:Ft._currentValue,pool:b},u.memoizedState={baseLanes:f,cachePool:b},o!==null&&Pl(u,null),ud(),Jy(u),o!==null&&To(o,u,p,!0),u.childLanes=y,null}function tc(o,u){return u=rc({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Y0(o,u,f){return zi(u,o.child,null,f),o=tc(u,u.pendingProps),o.flags|=2,qn(u),u.memoizedState=null,o}function tR(o,u,f){var p=u.pendingProps,y=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Ze){if(p.mode==="hidden")return o=tc(u,p),u.lanes=536870912,rs(null,o);if(ld(u),(o=gt)?(o=l1(o,hr),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Va!==null?{id:Br,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},f=Iy(o),f.return=u,u.child=f,an=u,gt=null)):o=null,o===null)throw Wa(u);return u.lanes=536870912,null}return tc(u,p)}var b=o.memoizedState;if(b!==null){var T=b.dehydrated;if(ld(u),y)if(u.flags&256)u.flags&=-257,u=Y0(o,u,f);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(r(558));else if(Lt||To(o,u,f,!1),y=(f&o.childLanes)!==0,Lt||y){if(p=vt,p!==null&&(T=Hg(p,f),T!==0&&T!==b.retryLane))throw b.retryLane=T,Oi(o,T),Nn(p,o,T),Od;hc(),u=Y0(o,u,f)}else o=b.treeContext,gt=pr(T.nextSibling),an=u,Ze=!0,ja=null,hr=!1,o!==null&&Ly(u,o),u=tc(u,p),u.flags|=4096;return u}return o=ha(o.child,{mode:p.mode,children:p.children}),o.ref=u.ref,u.child=o,o.return=u,o}function nc(o,u){var f=u.ref;if(f===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(u.flags|=4194816)}}function kd(o,u,f,p,y){return Ii(u),f=fd(o,u,f,p,void 0,y),p=hd(),o!==null&&!Lt?(dd(o,u,y),ya(o,u,y)):(Ze&&p&&qh(u),u.flags|=1,un(o,u,f,y),u.child)}function Q0(o,u,f,p,y,b){return Ii(u),u.updateQueue=null,f=t0(u,p,f,y),e0(o),p=hd(),o!==null&&!Lt?(dd(o,u,b),ya(o,u,b)):(Ze&&p&&qh(u),u.flags|=1,un(o,u,f,b),u.child)}function J0(o,u,f,p,y){if(Ii(u),u.stateNode===null){var b=_o,T=f.contextType;typeof T=="object"&&T!==null&&(b=on(T)),b=new f(p,b),u.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Td,u.stateNode=b,b._reactInternals=u,b=u.stateNode,b.props=p,b.state=u.memoizedState,b.refs={},rd(u),T=f.contextType,b.context=typeof T=="object"&&T!==null?on(T):_o,b.state=u.memoizedState,T=f.getDerivedStateFromProps,typeof T=="function"&&(Ad(u,f,T,p),b.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Td.enqueueReplaceState(b,b.state,null),Qu(u,p,b,y),Yu(),b.state=u.memoizedState),typeof b.componentDidMount=="function"&&(u.flags|=4194308),p=!0}else if(o===null){b=u.stateNode;var k=u.memoizedProps,P=Ui(f,k);b.props=P;var Y=b.context,se=f.contextType;T=_o,typeof se=="object"&&se!==null&&(T=on(se));var fe=f.getDerivedStateFromProps;se=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=u.pendingProps!==k,se||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||Y!==T)&&P0(u,b,p,T),qa=!1;var Q=u.memoizedState;b.state=Q,Qu(u,p,b,y),Yu(),Y=u.memoizedState,k||Q!==Y||qa?(typeof fe=="function"&&(Ad(u,f,fe,p),Y=u.memoizedState),(P=qa||z0(u,f,P,p,Q,Y,T))?(se||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(u.flags|=4194308)):(typeof b.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=Y),b.props=p,b.state=Y,b.context=T,p=P):(typeof b.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{b=u.stateNode,ad(o,u),T=u.memoizedProps,se=Ui(f,T),b.props=se,fe=u.pendingProps,Q=b.context,Y=f.contextType,P=_o,typeof Y=="object"&&Y!==null&&(P=on(Y)),k=f.getDerivedStateFromProps,(Y=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==fe||Q!==P)&&P0(u,b,p,P),qa=!1,Q=u.memoizedState,b.state=Q,Qu(u,p,b,y),Yu();var ae=u.memoizedState;T!==fe||Q!==ae||qa||o!==null&&o.dependencies!==null&&Ll(o.dependencies)?(typeof k=="function"&&(Ad(u,f,k,p),ae=u.memoizedState),(se=qa||z0(u,f,se,p,Q,ae,P)||o!==null&&o.dependencies!==null&&Ll(o.dependencies))?(Y||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,ae,P),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,ae,P)),typeof b.componentDidUpdate=="function"&&(u.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===o.memoizedProps&&Q===o.memoizedState||(u.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&Q===o.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=ae),b.props=p,b.state=ae,b.context=P,p=se):(typeof b.componentDidUpdate!="function"||T===o.memoizedProps&&Q===o.memoizedState||(u.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&Q===o.memoizedState||(u.flags|=1024),p=!1)}return b=p,nc(o,u),p=(u.flags&128)!==0,b||p?(b=u.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:b.render(),u.flags|=1,o!==null&&p?(u.child=zi(u,o.child,null,y),u.child=zi(u,null,f,y)):un(o,u,f,y),u.memoizedState=b.state,o=u.child):o=ya(o,u,y),o}function eb(o,u,f,p){return Ni(),u.flags|=256,un(o,u,f,p),u.child}var Nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Md(o){return{baseLanes:o,cachePool:jy()}}function Id(o,u,f){return o=o!==null?o.childLanes&~f:0,u&&(o|=Xn),o}function tb(o,u,f){var p=u.pendingProps,y=!1,b=(u.flags&128)!==0,T;if((T=b)||(T=o!==null&&o.memoizedState===null?!1:(kt.current&2)!==0),T&&(y=!0,u.flags&=-129),T=(u.flags&32)!==0,u.flags&=-33,o===null){if(Ze){if(y?$a(u):Za(),(o=gt)?(o=l1(o,hr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Va!==null?{id:Br,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},f=Iy(o),f.return=u,u.child=f,an=u,gt=null)):o=null,o===null)throw Wa(u);return mp(o)?u.lanes=32:u.lanes=536870912,null}var k=p.children;return p=p.fallback,y?(Za(),y=u.mode,k=rc({mode:"hidden",children:k},y),p=ki(p,y,f,null),k.return=u,p.return=u,k.sibling=p,u.child=k,p=u.child,p.memoizedState=Md(f),p.childLanes=Id(o,T,f),u.memoizedState=Nd,rs(null,p)):($a(u),Fd(u,k))}var P=o.memoizedState;if(P!==null&&(k=P.dehydrated,k!==null)){if(b)u.flags&256?($a(u),u.flags&=-257,u=Bd(o,u,f)):u.memoizedState!==null?(Za(),u.child=o.child,u.flags|=128,u=null):(Za(),k=p.fallback,y=u.mode,p=rc({mode:"visible",children:p.children},y),k=ki(k,y,f,null),k.flags|=2,p.return=u,k.return=u,p.sibling=k,u.child=p,zi(u,o.child,null,f),p=u.child,p.memoizedState=Md(f),p.childLanes=Id(o,T,f),u.memoizedState=Nd,u=rs(null,p));else if($a(u),mp(k)){if(T=k.nextSibling&&k.nextSibling.dataset,T)var Y=T.dgst;T=Y,p=Error(r(419)),p.stack="",p.digest=T,Gu({value:p,source:null,stack:null}),u=Bd(o,u,f)}else if(Lt||To(o,u,f,!1),T=(f&o.childLanes)!==0,Lt||T){if(T=vt,T!==null&&(p=Hg(T,f),p!==0&&p!==P.retryLane))throw P.retryLane=p,Oi(o,p),Nn(T,o,p),Od;vp(k)||hc(),u=Bd(o,u,f)}else vp(k)?(u.flags|=192,u.child=o.child,u=null):(o=P.treeContext,gt=pr(k.nextSibling),an=u,Ze=!0,ja=null,hr=!1,o!==null&&Ly(u,o),u=Fd(u,p.children),u.flags|=4096);return u}return y?(Za(),k=p.fallback,y=u.mode,P=o.child,Y=P.sibling,p=ha(P,{mode:"hidden",children:p.children}),p.subtreeFlags=P.subtreeFlags&65011712,Y!==null?k=ha(Y,k):(k=ki(k,y,f,null),k.flags|=2),k.return=u,p.return=u,p.sibling=k,u.child=p,rs(null,p),p=u.child,k=o.child.memoizedState,k===null?k=Md(f):(y=k.cachePool,y!==null?(P=Ft._currentValue,y=y.parent!==P?{parent:P,pool:P}:y):y=jy(),k={baseLanes:k.baseLanes|f,cachePool:y}),p.memoizedState=k,p.childLanes=Id(o,T,f),u.memoizedState=Nd,rs(o.child,p)):($a(u),f=o.child,o=f.sibling,f=ha(f,{mode:"visible",children:p.children}),f.return=u,f.sibling=null,o!==null&&(T=u.deletions,T===null?(u.deletions=[o],u.flags|=16):T.push(o)),u.child=f,u.memoizedState=null,f)}function Fd(o,u){return u=rc({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function rc(o,u){return o=Wn(22,o,null,u),o.lanes=0,o}function Bd(o,u,f){return zi(u,o.child,null,f),o=Fd(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function nb(o,u,f){o.lanes|=u;var p=o.alternate;p!==null&&(p.lanes|=u),Yh(o.return,u,f)}function Ld(o,u,f,p,y,b){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y,treeForkCount:b}:(T.isBackwards=u,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=f,T.tailMode=y,T.treeForkCount=b)}function rb(o,u,f){var p=u.pendingProps,y=p.revealOrder,b=p.tail;p=p.children;var T=kt.current,k=(T&2)!==0;if(k?(T=T&1|2,u.flags|=128):T&=1,oe(kt,T),un(o,u,p,f),p=Ze?Wu:0,!k&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&nb(o,f,u);else if(o.tag===19)nb(o,f,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(f=u.child,y=null;f!==null;)o=f.alternate,o!==null&&Gl(o)===null&&(y=f),f=f.sibling;f=y,f===null?(y=u.child,u.child=null):(y=f.sibling,f.sibling=null),Ld(u,!1,y,f,b,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=u.child,u.child=null;y!==null;){if(o=y.alternate,o!==null&&Gl(o)===null){u.child=y;break}o=y.sibling,y.sibling=f,f=y,y=o}Ld(u,!0,f,null,b,p);break;case"together":Ld(u,!1,null,null,void 0,p);break;default:u.memoizedState=null}return u.child}function ya(o,u,f){if(o!==null&&(u.dependencies=o.dependencies),Ja|=u.lanes,(f&u.childLanes)===0)if(o!==null){if(To(o,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,f=ha(o,o.pendingProps),u.child=f,f.return=u;o.sibling!==null;)o=o.sibling,f=f.sibling=ha(o,o.pendingProps),f.return=u;f.sibling=null}return u.child}function zd(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Ll(o)))}function nR(o,u,f){switch(u.tag){case 3:De(u,u.stateNode.containerInfo),Ga(u,Ft,o.memoizedState.cache),Ni();break;case 27:case 5:it(u);break;case 4:De(u,u.stateNode.containerInfo);break;case 10:Ga(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,ld(u),null;break;case 13:var p=u.memoizedState;if(p!==null)return p.dehydrated!==null?($a(u),u.flags|=128,null):(f&u.child.childLanes)!==0?tb(o,u,f):($a(u),o=ya(o,u,f),o!==null?o.sibling:null);$a(u);break;case 19:var y=(o.flags&128)!==0;if(p=(f&u.childLanes)!==0,p||(To(o,u,f,!1),p=(f&u.childLanes)!==0),y){if(p)return rb(o,u,f);u.flags|=128}if(y=u.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),oe(kt,kt.current),p)break;return null;case 22:return u.lanes=0,$0(o,u,f,u.pendingProps);case 24:Ga(u,Ft,o.memoizedState.cache)}return ya(o,u,f)}function ab(o,u,f){if(o!==null)if(o.memoizedProps!==u.pendingProps)Lt=!0;else{if(!zd(o,f)&&(u.flags&128)===0)return Lt=!1,nR(o,u,f);Lt=(o.flags&131072)!==0}else Lt=!1,Ze&&(u.flags&1048576)!==0&&By(u,Wu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var p=u.pendingProps;if(o=Bi(u.elementType),u.type=o,typeof o=="function")jh(o)?(p=Ui(o,p),u.tag=1,u=J0(null,u,o,p,f)):(u.tag=0,u=kd(null,u,o,p,f));else{if(o!=null){var y=o.$$typeof;if(y===A){u.tag=11,u=q0(null,u,o,p,f);break e}else if(y===O){u.tag=14,u=K0(null,u,o,p,f);break e}}throw u=ee(o)||o,Error(r(306,u,""))}}return u;case 0:return kd(o,u,u.type,u.pendingProps,f);case 1:return p=u.type,y=Ui(p,u.pendingProps),J0(o,u,p,y,f);case 3:e:{if(De(u,u.stateNode.containerInfo),o===null)throw Error(r(387));p=u.pendingProps;var b=u.memoizedState;y=b.element,ad(o,u),Qu(u,p,null,f);var T=u.memoizedState;if(p=T.cache,Ga(u,Ft,p),p!==b.cache&&Qh(u,[Ft],f,!0),Yu(),p=T.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:T.cache},u.updateQueue.baseState=b,u.memoizedState=b,u.flags&256){u=eb(o,u,p,f);break e}else if(p!==y){y=lr(Error(r(424)),u),Gu(y),u=eb(o,u,p,f);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(gt=pr(o.firstChild),an=u,Ze=!0,ja=null,hr=!0,f=$y(u,null,p,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ni(),p===y){u=ya(o,u,f);break e}un(o,u,p,f)}u=u.child}return u;case 26:return nc(o,u),o===null?(f=v1(u.type,null,u.pendingProps,null))?u.memoizedState=f:Ze||(f=u.type,o=u.pendingProps,p=bc(me.current).createElement(f),p[rn]=u,p[Rn]=o,sn(p,f,o),Zt(p),u.stateNode=p):u.memoizedState=v1(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return it(u),o===null&&Ze&&(p=u.stateNode=h1(u.type,u.pendingProps,me.current),an=u,hr=!0,y=gt,ai(u.type)?(gp=y,gt=pr(p.firstChild)):gt=y),un(o,u,u.pendingProps.children,f),nc(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Ze&&((y=p=gt)&&(p=NR(p,u.type,u.pendingProps,hr),p!==null?(u.stateNode=p,an=u,gt=pr(p.firstChild),hr=!1,y=!0):y=!1),y||Wa(u)),it(u),y=u.type,b=u.pendingProps,T=o!==null?o.memoizedProps:null,p=b.children,hp(y,b)?p=null:T!==null&&hp(y,T)&&(u.flags|=32),u.memoizedState!==null&&(y=fd(o,u,KC,null,null,f),ys._currentValue=y),nc(o,u),un(o,u,p,f),u.child;case 6:return o===null&&Ze&&((o=f=gt)&&(f=MR(f,u.pendingProps,hr),f!==null?(u.stateNode=f,an=u,gt=null,o=!0):o=!1),o||Wa(u)),null;case 13:return tb(o,u,f);case 4:return De(u,u.stateNode.containerInfo),p=u.pendingProps,o===null?u.child=zi(u,null,p,f):un(o,u,p,f),u.child;case 11:return q0(o,u,u.type,u.pendingProps,f);case 7:return un(o,u,u.pendingProps,f),u.child;case 8:return un(o,u,u.pendingProps.children,f),u.child;case 12:return un(o,u,u.pendingProps.children,f),u.child;case 10:return p=u.pendingProps,Ga(u,u.type,p.value),un(o,u,p.children,f),u.child;case 9:return y=u.type._context,p=u.pendingProps.children,Ii(u),y=on(y),p=p(y),u.flags|=1,un(o,u,p,f),u.child;case 14:return K0(o,u,u.type,u.pendingProps,f);case 15:return X0(o,u,u.type,u.pendingProps,f);case 19:return rb(o,u,f);case 31:return tR(o,u,f);case 22:return $0(o,u,f,u.pendingProps);case 24:return Ii(u),p=on(Ft),o===null?(y=td(),y===null&&(y=vt,b=Jh(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=f),y=b),u.memoizedState={parent:p,cache:y},rd(u),Ga(u,Ft,y)):((o.lanes&f)!==0&&(ad(o,u),Qu(u,null,null,f),Yu()),y=o.memoizedState,b=u.memoizedState,y.parent!==p?(y={parent:p,cache:p},u.memoizedState=y,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=y),Ga(u,Ft,p)):(p=b.cache,Ga(u,Ft,p),p!==y.cache&&Qh(u,[Ft],f,!0))),un(o,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function ba(o){o.flags|=4}function Pd(o,u,f,p,y){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(kb())o.flags|=8192;else throw Li=Hl,nd}else o.flags&=-16777217}function ib(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!x1(u))if(kb())o.flags|=8192;else throw Li=Hl,nd}function ac(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?zg():536870912,o.lanes|=u,Uo|=u)}function as(o,u){if(!Ze)switch(o.tailMode){case"hidden":u=o.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function yt(o){var u=o.alternate!==null&&o.alternate.child===o.child,f=0,p=0;if(u)for(var y=o.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=f,u}function rR(o,u,f){var p=u.pendingProps;switch(Kh(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(u),null;case 1:return yt(u),null;case 3:return f=u.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),va(Ft),Te(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Ao(u)?ba(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,$h())),yt(u),null;case 26:var y=u.type,b=u.memoizedState;return o===null?(ba(u),b!==null?(yt(u),ib(u,b)):(yt(u),Pd(u,y,null,p,f))):b?b!==o.memoizedState?(ba(u),yt(u),ib(u,b)):(yt(u),u.flags&=-16777217):(o=o.memoizedProps,o!==p&&ba(u),yt(u),Pd(u,y,o,p,f)),null;case 27:if(Fe(u),f=me.current,y=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==p&&ba(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return yt(u),null}o=de.current,Ao(u)?zy(u):(o=h1(y,p,f),u.stateNode=o,ba(u))}return yt(u),null;case 5:if(Fe(u),y=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==p&&ba(u);else{if(!p){if(u.stateNode===null)throw Error(r(166));return yt(u),null}if(b=de.current,Ao(u))zy(u);else{var T=bc(me.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof p.is=="string"?T.createElement("select",{is:p.is}):T.createElement("select"),p.multiple?b.multiple=!0:p.size&&(b.size=p.size);break;default:b=typeof p.is=="string"?T.createElement(y,{is:p.is}):T.createElement(y)}}b[rn]=u,b[Rn]=p;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=b;e:switch(sn(b,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&ba(u)}}return yt(u),Pd(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,f),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==p&&ba(u);else{if(typeof p!="string"&&u.stateNode===null)throw Error(r(166));if(o=me.current,Ao(u)){if(o=u.stateNode,f=u.memoizedProps,p=null,y=an,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}o[rn]=u,o=!!(o.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||t1(o.nodeValue,f)),o||Wa(u,!0)}else o=bc(o).createTextNode(p),o[rn]=u,u.stateNode=o}return yt(u),null;case 31:if(f=u.memoizedState,o===null||o.memoizedState!==null){if(p=Ao(u),f!==null){if(o===null){if(!p)throw Error(r(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[rn]=u}else Ni(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yt(u),o=!1}else f=$h(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return u.flags&256?(qn(u),u):(qn(u),null);if((u.flags&128)!==0)throw Error(r(558))}return yt(u),null;case 13:if(p=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=Ao(u),p!==null&&p.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=u.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[rn]=u}else Ni(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yt(u),y=!1}else y=$h(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return u.flags&256?(qn(u),u):(qn(u),null)}return qn(u),(u.flags&128)!==0?(u.lanes=f,u):(f=p!==null,o=o!==null&&o.memoizedState!==null,f&&(p=u.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),b=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==y&&(p.flags|=2048)),f!==o&&f&&(u.child.flags|=8192),ac(u,u.updateQueue),yt(u),null);case 4:return Te(),o===null&&up(u.stateNode.containerInfo),yt(u),null;case 10:return va(u.type),yt(u),null;case 19:if(X(kt),p=u.memoizedState,p===null)return yt(u),null;if(y=(u.flags&128)!==0,b=p.rendering,b===null)if(y)as(p,!1);else{if(Dt!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(b=Gl(o),b!==null){for(u.flags|=128,as(p,!1),o=b.updateQueue,u.updateQueue=o,ac(u,o),u.subtreeFlags=0,o=f,f=u.child;f!==null;)My(f,o),f=f.sibling;return oe(kt,kt.current&1|2),Ze&&da(u,p.treeForkCount),u.child}o=o.sibling}p.tail!==null&&It()>lc&&(u.flags|=128,y=!0,as(p,!1),u.lanes=4194304)}else{if(!y)if(o=Gl(b),o!==null){if(u.flags|=128,y=!0,o=o.updateQueue,u.updateQueue=o,ac(u,o),as(p,!0),p.tail===null&&p.tailMode==="hidden"&&!b.alternate&&!Ze)return yt(u),null}else 2*It()-p.renderingStartTime>lc&&f!==536870912&&(u.flags|=128,y=!0,as(p,!1),u.lanes=4194304);p.isBackwards?(b.sibling=u.child,u.child=b):(o=p.last,o!==null?o.sibling=b:u.child=b,p.last=b)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=It(),o.sibling=null,f=kt.current,oe(kt,y?f&1|2:f&1),Ze&&da(u,p.treeForkCount),o):(yt(u),null);case 22:case 23:return qn(u),sd(),p=u.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(u.flags|=8192):p&&(u.flags|=8192),p?(f&536870912)!==0&&(u.flags&128)===0&&(yt(u),u.subtreeFlags&6&&(u.flags|=8192)):yt(u),f=u.updateQueue,f!==null&&ac(u,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048),o!==null&&X(Fi),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),va(Ft),yt(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function aR(o,u){switch(Kh(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return va(Ft),Te(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Fe(u),null;case 31:if(u.memoizedState!==null){if(qn(u),u.alternate===null)throw Error(r(340));Ni()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(qn(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ni()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return X(kt),null;case 4:return Te(),null;case 10:return va(u.type),null;case 22:case 23:return qn(u),sd(),o!==null&&X(Fi),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return va(Ft),null;case 25:return null;default:return null}}function ob(o,u){switch(Kh(u),u.tag){case 3:va(Ft),Te();break;case 26:case 27:case 5:Fe(u);break;case 4:Te();break;case 31:u.memoizedState!==null&&qn(u);break;case 13:qn(u);break;case 19:X(kt);break;case 10:va(u.type);break;case 22:case 23:qn(u),sd(),o!==null&&X(Fi);break;case 24:va(Ft)}}function is(o,u){try{var f=u.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&o)===o){p=void 0;var b=f.create,T=f.inst;p=b(),T.destroy=p}f=f.next}while(f!==y)}}catch(k){ft(u,u.return,k)}}function Ya(o,u,f){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var b=y.next;p=b;do{if((p.tag&o)===o){var T=p.inst,k=T.destroy;if(k!==void 0){T.destroy=void 0,y=u;var P=f,Y=k;try{Y()}catch(se){ft(y,P,se)}}}p=p.next}while(p!==b)}}catch(se){ft(u,u.return,se)}}function ub(o){var u=o.updateQueue;if(u!==null){var f=o.stateNode;try{Yy(u,f)}catch(p){ft(o,o.return,p)}}}function sb(o,u,f){f.props=Ui(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(p){ft(o,u,p)}}function os(o,u){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof f=="function"?o.refCleanup=f(p):f.current=p}}catch(y){ft(o,u,y)}}function zr(o,u){var f=o.ref,p=o.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(y){ft(o,u,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){ft(o,u,y)}else f.current=null}function lb(o){var u=o.type,f=o.memoizedProps,p=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break e;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(y){ft(o,o.return,y)}}function Ud(o,u,f){try{var p=o.stateNode;RR(p,o.type,f,u),p[Rn]=u}catch(y){ft(o,o.return,y)}}function cb(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&ai(o.type)||o.tag===4}function Hd(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||cb(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&ai(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vd(o,u,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(o),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=ca));else if(p!==4&&(p===27&&ai(o.type)&&(f=o.stateNode,u=null),o=o.child,o!==null))for(Vd(o,u,f),o=o.sibling;o!==null;)Vd(o,u,f),o=o.sibling}function ic(o,u,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,u?f.insertBefore(o,u):f.appendChild(o);else if(p!==4&&(p===27&&ai(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(ic(o,u,f),o=o.sibling;o!==null;)ic(o,u,f),o=o.sibling}function fb(o){var u=o.stateNode,f=o.memoizedProps;try{for(var p=o.type,y=u.attributes;y.length;)u.removeAttributeNode(y[0]);sn(u,p,f),u[rn]=o,u[Rn]=f}catch(b){ft(o,o.return,b)}}var xa=!1,zt=!1,jd=!1,hb=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function iR(o,u){if(o=o.containerInfo,cp=Rc,o=_y(o),Bh(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break e}var T=0,k=-1,P=-1,Y=0,se=0,fe=o,Q=null;t:for(;;){for(var ae;fe!==f||y!==0&&fe.nodeType!==3||(k=T+y),fe!==b||p!==0&&fe.nodeType!==3||(P=T+p),fe.nodeType===3&&(T+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)Q=fe,fe=ae;for(;;){if(fe===o)break t;if(Q===f&&++Y===y&&(k=T),Q===b&&++se===p&&(P=T),(ae=fe.nextSibling)!==null)break;fe=Q,Q=fe.parentNode}fe=ae}f=k===-1||P===-1?null:{start:k,end:P}}else f=null}f=f||{start:0,end:0}}else f=null;for(fp={focusedElem:o,selectionRange:f},Rc=!1,Yt=u;Yt!==null;)if(u=Yt,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Yt=o;else for(;Yt!==null;){switch(u=Yt,b=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)y=o[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&b!==null){o=void 0,f=u,y=b.memoizedProps,b=b.memoizedState,p=f.stateNode;try{var xe=Ui(f.type,y);o=p.getSnapshotBeforeUpdate(xe,b),p.__reactInternalSnapshotBeforeUpdate=o}catch(ke){ft(f,f.return,ke)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,f=o.nodeType,f===9)pp(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":pp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,Yt=o;break}Yt=u.return}}function db(o,u,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:Sa(o,f),p&4&&is(5,f);break;case 1:if(Sa(o,f),p&4)if(o=f.stateNode,u===null)try{o.componentDidMount()}catch(T){ft(f,f.return,T)}else{var y=Ui(f.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(y,u,o.__reactInternalSnapshotBeforeUpdate)}catch(T){ft(f,f.return,T)}}p&64&&ub(f),p&512&&os(f,f.return);break;case 3:if(Sa(o,f),p&64&&(o=f.updateQueue,o!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{Yy(o,u)}catch(T){ft(f,f.return,T)}}break;case 27:u===null&&p&4&&fb(f);case 26:case 5:Sa(o,f),u===null&&p&4&&lb(f),p&512&&os(f,f.return);break;case 12:Sa(o,f);break;case 31:Sa(o,f),p&4&&mb(o,f);break;case 13:Sa(o,f),p&4&&gb(o,f),p&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=pR.bind(null,f),IR(o,f))));break;case 22:if(p=f.memoizedState!==null||xa,!p){u=u!==null&&u.memoizedState!==null||zt,y=xa;var b=zt;xa=p,(zt=u)&&!b?Ea(o,f,(f.subtreeFlags&8772)!==0):Sa(o,f),xa=y,zt=b}break;case 30:break;default:Sa(o,f)}}function pb(o){var u=o.alternate;u!==null&&(o.alternate=null,pb(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&bh(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var xt=null,Tn=!1;function wa(o,u,f){for(f=f.child;f!==null;)vb(o,u,f),f=f.sibling}function vb(o,u,f){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(sa,f)}catch{}switch(f.tag){case 26:zt||zr(f,u),wa(o,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:zt||zr(f,u);var p=xt,y=Tn;ai(f.type)&&(xt=f.stateNode,Tn=!1),wa(o,u,f),vs(f.stateNode),xt=p,Tn=y;break;case 5:zt||zr(f,u);case 6:if(p=xt,y=Tn,xt=null,wa(o,u,f),xt=p,Tn=y,xt!==null)if(Tn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(f.stateNode)}catch(b){ft(f,u,b)}else try{xt.removeChild(f.stateNode)}catch(b){ft(f,u,b)}break;case 18:xt!==null&&(Tn?(o=xt,u1(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Xo(o)):u1(xt,f.stateNode));break;case 4:p=xt,y=Tn,xt=f.stateNode.containerInfo,Tn=!0,wa(o,u,f),xt=p,Tn=y;break;case 0:case 11:case 14:case 15:Ya(2,f,u),zt||Ya(4,f,u),wa(o,u,f);break;case 1:zt||(zr(f,u),p=f.stateNode,typeof p.componentWillUnmount=="function"&&sb(f,u,p)),wa(o,u,f);break;case 21:wa(o,u,f);break;case 22:zt=(p=zt)||f.memoizedState!==null,wa(o,u,f),zt=p;break;default:wa(o,u,f)}}function mb(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Xo(o)}catch(f){ft(u,u.return,f)}}}function gb(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Xo(o)}catch(f){ft(u,u.return,f)}}function oR(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new hb),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new hb),u;default:throw Error(r(435,o.tag))}}function oc(o,u){var f=oR(o);u.forEach(function(p){if(!f.has(p)){f.add(p);var y=vR.bind(null,o,p);p.then(y,y)}})}function Dn(o,u){var f=u.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p],b=o,T=u,k=T;e:for(;k!==null;){switch(k.tag){case 27:if(ai(k.type)){xt=k.stateNode,Tn=!1;break e}break;case 5:xt=k.stateNode,Tn=!1;break e;case 3:case 4:xt=k.stateNode.containerInfo,Tn=!0;break e}k=k.return}if(xt===null)throw Error(r(160));vb(b,T,y),xt=null,Tn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)yb(u,o),u=u.sibling}var Rr=null;function yb(o,u){var f=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Dn(u,o),On(o),p&4&&(Ya(3,o,o.return),is(3,o),Ya(5,o,o.return));break;case 1:Dn(u,o),On(o),p&512&&(zt||f===null||zr(f,f.return)),p&64&&xa&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var y=Rr;if(Dn(u,o),On(o),p&512&&(zt||f===null||zr(f,f.return)),p&4){var b=f!==null?f.memoizedState:null;if(p=o.memoizedState,f===null)if(p===null)if(o.stateNode===null){e:{p=o.type,f=o.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Mu]||b[rn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(p),y.head.insertBefore(b,y.querySelector("head > title"))),sn(b,p,f),b[rn]=o,Zt(b),p=b;break e;case"link":var T=y1("link","href",y).get(p+(f.href||""));if(T){for(var k=0;k<T.length;k++)if(b=T[k],b.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&b.getAttribute("rel")===(f.rel==null?null:f.rel)&&b.getAttribute("title")===(f.title==null?null:f.title)&&b.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){T.splice(k,1);break t}}b=y.createElement(p),sn(b,p,f),y.head.appendChild(b);break;case"meta":if(T=y1("meta","content",y).get(p+(f.content||""))){for(k=0;k<T.length;k++)if(b=T[k],b.getAttribute("content")===(f.content==null?null:""+f.content)&&b.getAttribute("name")===(f.name==null?null:f.name)&&b.getAttribute("property")===(f.property==null?null:f.property)&&b.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&b.getAttribute("charset")===(f.charSet==null?null:f.charSet)){T.splice(k,1);break t}}b=y.createElement(p),sn(b,p,f),y.head.appendChild(b);break;default:throw Error(r(468,p))}b[rn]=o,Zt(b),p=b}o.stateNode=p}else b1(y,o.type,o.stateNode);else o.stateNode=g1(y,p,o.memoizedProps);else b!==p?(b===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):b.count--,p===null?b1(y,o.type,o.stateNode):g1(y,p,o.memoizedProps)):p===null&&o.stateNode!==null&&Ud(o,o.memoizedProps,f.memoizedProps)}break;case 27:Dn(u,o),On(o),p&512&&(zt||f===null||zr(f,f.return)),f!==null&&p&4&&Ud(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Dn(u,o),On(o),p&512&&(zt||f===null||zr(f,f.return)),o.flags&32){y=o.stateNode;try{go(y,"")}catch(xe){ft(o,o.return,xe)}}p&4&&o.stateNode!=null&&(y=o.memoizedProps,Ud(o,y,f!==null?f.memoizedProps:y)),p&1024&&(jd=!0);break;case 6:if(Dn(u,o),On(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,f=o.stateNode;try{f.nodeValue=p}catch(xe){ft(o,o.return,xe)}}break;case 3:if(Sc=null,y=Rr,Rr=xc(u.containerInfo),Dn(u,o),Rr=y,On(o),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Xo(u.containerInfo)}catch(xe){ft(o,o.return,xe)}jd&&(jd=!1,bb(o));break;case 4:p=Rr,Rr=xc(o.stateNode.containerInfo),Dn(u,o),On(o),Rr=p;break;case 12:Dn(u,o),On(o);break;case 31:Dn(u,o),On(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,oc(o,p)));break;case 13:Dn(u,o),On(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(sc=It()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,oc(o,p)));break;case 22:y=o.memoizedState!==null;var P=f!==null&&f.memoizedState!==null,Y=xa,se=zt;if(xa=Y||y,zt=se||P,Dn(u,o),zt=se,xa=Y,On(o),p&8192)e:for(u=o.stateNode,u._visibility=y?u._visibility&-2:u._visibility|1,y&&(f===null||P||xa||zt||Hi(o)),f=null,u=o;;){if(u.tag===5||u.tag===26){if(f===null){P=f=u;try{if(b=P.stateNode,y)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{k=P.stateNode;var fe=P.memoizedProps.style,Q=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;k.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(xe){ft(P,P.return,xe)}}}else if(u.tag===6){if(f===null){P=u;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(xe){ft(P,P.return,xe)}}}else if(u.tag===18){if(f===null){P=u;try{var ae=P.stateNode;y?s1(ae,!0):s1(P.stateNode,!1)}catch(xe){ft(P,P.return,xe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}p&4&&(p=o.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,oc(o,f))));break;case 19:Dn(u,o),On(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,oc(o,p)));break;case 30:break;case 21:break;default:Dn(u,o),On(o)}}function On(o){var u=o.flags;if(u&2){try{for(var f,p=o.return;p!==null;){if(cb(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,b=Hd(o);ic(o,b,y);break;case 5:var T=f.stateNode;f.flags&32&&(go(T,""),f.flags&=-33);var k=Hd(o);ic(o,k,T);break;case 3:case 4:var P=f.stateNode.containerInfo,Y=Hd(o);Vd(o,Y,P);break;default:throw Error(r(161))}}catch(se){ft(o,o.return,se)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function bb(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;bb(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Sa(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)db(o,u.alternate,u),u=u.sibling}function Hi(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ya(4,u,u.return),Hi(u);break;case 1:zr(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&sb(u,u.return,f),Hi(u);break;case 27:vs(u.stateNode);case 26:case 5:zr(u,u.return),Hi(u);break;case 22:u.memoizedState===null&&Hi(u);break;case 30:Hi(u);break;default:Hi(u)}o=o.sibling}}function Ea(o,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var p=u.alternate,y=o,b=u,T=b.flags;switch(b.tag){case 0:case 11:case 15:Ea(y,b,f),is(4,b);break;case 1:if(Ea(y,b,f),p=b,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){ft(p,p.return,Y)}if(p=b,y=p.updateQueue,y!==null){var k=p.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)Zy(P[y],k)}catch(Y){ft(p,p.return,Y)}}f&&T&64&&ub(b),os(b,b.return);break;case 27:fb(b);case 26:case 5:Ea(y,b,f),f&&p===null&&T&4&&lb(b),os(b,b.return);break;case 12:Ea(y,b,f);break;case 31:Ea(y,b,f),f&&T&4&&mb(y,b);break;case 13:Ea(y,b,f),f&&T&4&&gb(y,b);break;case 22:b.memoizedState===null&&Ea(y,b,f),os(b,b.return);break;case 30:break;default:Ea(y,b,f)}u=u.sibling}}function Wd(o,u){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&qu(f))}function Gd(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&qu(o))}function Ar(o,u,f,p){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)xb(o,u,f,p),u=u.sibling}function xb(o,u,f,p){var y=u.flags;switch(u.tag){case 0:case 11:case 15:Ar(o,u,f,p),y&2048&&is(9,u);break;case 1:Ar(o,u,f,p);break;case 3:Ar(o,u,f,p),y&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&qu(o)));break;case 12:if(y&2048){Ar(o,u,f,p),o=u.stateNode;try{var b=u.memoizedProps,T=b.id,k=b.onPostCommit;typeof k=="function"&&k(T,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(P){ft(u,u.return,P)}}else Ar(o,u,f,p);break;case 31:Ar(o,u,f,p);break;case 13:Ar(o,u,f,p);break;case 23:break;case 22:b=u.stateNode,T=u.alternate,u.memoizedState!==null?b._visibility&2?Ar(o,u,f,p):us(o,u):b._visibility&2?Ar(o,u,f,p):(b._visibility|=2,Lo(o,u,f,p,(u.subtreeFlags&10256)!==0||!1)),y&2048&&Wd(T,u);break;case 24:Ar(o,u,f,p),y&2048&&Gd(u.alternate,u);break;default:Ar(o,u,f,p)}}function Lo(o,u,f,p,y){for(y=y&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var b=o,T=u,k=f,P=p,Y=T.flags;switch(T.tag){case 0:case 11:case 15:Lo(b,T,k,P,y),is(8,T);break;case 23:break;case 22:var se=T.stateNode;T.memoizedState!==null?se._visibility&2?Lo(b,T,k,P,y):us(b,T):(se._visibility|=2,Lo(b,T,k,P,y)),y&&Y&2048&&Wd(T.alternate,T);break;case 24:Lo(b,T,k,P,y),y&&Y&2048&&Gd(T.alternate,T);break;default:Lo(b,T,k,P,y)}u=u.sibling}}function us(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=o,p=u,y=p.flags;switch(p.tag){case 22:us(f,p),y&2048&&Wd(p.alternate,p);break;case 24:us(f,p),y&2048&&Gd(p.alternate,p);break;default:us(f,p)}u=u.sibling}}var ss=8192;function zo(o,u,f){if(o.subtreeFlags&ss)for(o=o.child;o!==null;)wb(o,u,f),o=o.sibling}function wb(o,u,f){switch(o.tag){case 26:zo(o,u,f),o.flags&ss&&o.memoizedState!==null&&qR(f,Rr,o.memoizedState,o.memoizedProps);break;case 5:zo(o,u,f);break;case 3:case 4:var p=Rr;Rr=xc(o.stateNode.containerInfo),zo(o,u,f),Rr=p;break;case 22:o.memoizedState===null&&(p=o.alternate,p!==null&&p.memoizedState!==null?(p=ss,ss=16777216,zo(o,u,f),ss=p):zo(o,u,f));break;default:zo(o,u,f)}}function Sb(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function ls(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];Yt=p,_b(p,o)}Sb(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Eb(o),o=o.sibling}function Eb(o){switch(o.tag){case 0:case 11:case 15:ls(o),o.flags&2048&&Ya(9,o,o.return);break;case 3:ls(o);break;case 12:ls(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,uc(o)):ls(o);break;default:ls(o)}}function uc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var p=u[f];Yt=p,_b(p,o)}Sb(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ya(8,u,u.return),uc(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,uc(u));break;default:uc(u)}o=o.sibling}}function _b(o,u){for(;Yt!==null;){var f=Yt;switch(f.tag){case 0:case 11:case 15:Ya(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:qu(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Yt=p;else e:for(f=o;Yt!==null;){p=Yt;var y=p.sibling,b=p.return;if(pb(p),p===f){Yt=null;break e}if(y!==null){y.return=b,Yt=y;break e}Yt=b}}}var uR={getCacheForType:function(o){var u=on(Ft),f=u.data.get(o);return f===void 0&&(f=o(),u.data.set(o,f)),f},cacheSignal:function(){return on(Ft).controller.signal}},sR=typeof WeakMap=="function"?WeakMap:Map,nt=0,vt=null,We=null,Ke=0,ct=0,Kn=null,Qa=!1,Po=!1,qd=!1,_a=0,Dt=0,Ja=0,Vi=0,Kd=0,Xn=0,Uo=0,cs=null,kn=null,Xd=!1,sc=0,Cb=0,lc=1/0,cc=null,ei=null,Ht=0,ti=null,Ho=null,Ca=0,$d=0,Zd=null,Rb=null,fs=0,Yd=null;function $n(){return(nt&2)!==0&&Ke!==0?Ke&-Ke:z.T!==null?rp():Vg()}function Ab(){if(Xn===0)if((Ke&536870912)===0||Ze){var o=yl;yl<<=1,(yl&3932160)===0&&(yl=262144),Xn=o}else Xn=536870912;return o=Gn.current,o!==null&&(o.flags|=32),Xn}function Nn(o,u,f){(o===vt&&(ct===2||ct===9)||o.cancelPendingCommit!==null)&&(Vo(o,0),ni(o,Ke,Xn,!1)),Nu(o,f),((nt&2)===0||o!==vt)&&(o===vt&&((nt&2)===0&&(Vi|=f),Dt===4&&ni(o,Ke,Xn,!1)),Pr(o))}function Tb(o,u,f){if((nt&6)!==0)throw Error(r(327));var p=!f&&(u&127)===0&&(u&o.expiredLanes)===0||ku(o,u),y=p?fR(o,u):Jd(o,u,!0),b=p;do{if(y===0){Po&&!p&&ni(o,u,0,!1);break}else{if(f=o.current.alternate,b&&!lR(f)){y=Jd(o,u,!1),b=!1;continue}if(y===2){if(b=u,o.errorRecoveryDisabledLanes&b)var T=0;else T=o.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){u=T;e:{var k=o;y=cs;var P=k.current.memoizedState.isDehydrated;if(P&&(Vo(k,T).flags|=256),T=Jd(k,T,!1),T!==2){if(qd&&!P){k.errorRecoveryDisabledLanes|=b,Vi|=b,y=4;break e}b=kn,kn=y,b!==null&&(kn===null?kn=b:kn.push.apply(kn,b))}y=T}if(b=!1,y!==2)continue}}if(y===1){Vo(o,0),ni(o,u,0,!0);break}e:{switch(p=o,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ni(p,u,Xn,!Qa);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(y=sc+300-It(),10<y)){if(ni(p,u,Xn,!Qa),xl(p,0,!0)!==0)break e;Ca=u,p.timeoutHandle=i1(Db.bind(null,p,f,kn,cc,Xd,u,Xn,Vi,Uo,Qa,b,"Throttled",-0,0),y);break e}Db(p,f,kn,cc,Xd,u,Xn,Vi,Uo,Qa,b,null,-0,0)}}break}while(!0);Pr(o)}function Db(o,u,f,p,y,b,T,k,P,Y,se,fe,Q,ae){if(o.timeoutHandle=-1,fe=u.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},wb(u,b,fe);var xe=(b&62914560)===b?sc-It():(b&4194048)===b?Cb-It():0;if(xe=KR(fe,xe),xe!==null){Ca=b,o.cancelPendingCommit=xe(Lb.bind(null,o,u,b,f,p,y,T,k,P,se,fe,null,Q,ae)),ni(o,b,T,!Y);return}}Lb(o,u,b,f,p,y,T,k,P)}function lR(o){for(var u=o;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var y=f[p],b=y.getSnapshot;y=y.value;try{if(!jn(b(),y))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ni(o,u,f,p){u&=~Kd,u&=~Vi,o.suspendedLanes|=u,o.pingedLanes&=~u,p&&(o.warmLanes|=u),p=o.expirationTimes;for(var y=u;0<y;){var b=31-Vn(y),T=1<<b;p[b]=-1,y&=~T}f!==0&&Pg(o,f,u)}function fc(){return(nt&6)===0?(hs(0),!1):!0}function Qd(){if(We!==null){if(ct===0)var o=We.return;else o=We,pa=Mi=null,pd(o),No=null,Xu=0,o=We;for(;o!==null;)ob(o.alternate,o),o=o.return;We=null}}function Vo(o,u){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,DR(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),Ca=0,Qd(),vt=o,We=f=ha(o.current,null),Ke=u,ct=0,Kn=null,Qa=!1,Po=ku(o,u),qd=!1,Uo=Xn=Kd=Vi=Ja=Dt=0,kn=cs=null,Xd=!1,(u&8)!==0&&(u|=u&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=u;0<p;){var y=31-Vn(p),b=1<<y;u|=o[y],p&=~b}return _a=u,Nl(),f}function Ob(o,u){ze=null,z.H=ns,u===ko||u===Ul?(u=qy(),ct=3):u===nd?(u=qy(),ct=4):ct=u===Od?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Kn=u,We===null&&(Dt=1,ec(o,lr(u,o.current)))}function kb(){var o=Gn.current;return o===null?!0:(Ke&4194048)===Ke?dr===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?o===dr:!1}function Nb(){var o=z.H;return z.H=ns,o===null?ns:o}function Mb(){var o=z.A;return z.A=uR,o}function hc(){Dt=4,Qa||(Ke&4194048)!==Ke&&Gn.current!==null||(Po=!0),(Ja&134217727)===0&&(Vi&134217727)===0||vt===null||ni(vt,Ke,Xn,!1)}function Jd(o,u,f){var p=nt;nt|=2;var y=Nb(),b=Mb();(vt!==o||Ke!==u)&&(cc=null,Vo(o,u)),u=!1;var T=Dt;e:do try{if(ct!==0&&We!==null){var k=We,P=Kn;switch(ct){case 8:Qd(),T=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(u=!0);var Y=ct;if(ct=0,Kn=null,jo(o,k,P,Y),f&&Po){T=0;break e}break;default:Y=ct,ct=0,Kn=null,jo(o,k,P,Y)}}cR(),T=Dt;break}catch(se){Ob(o,se)}while(!0);return u&&o.shellSuspendCounter++,pa=Mi=null,nt=p,z.H=y,z.A=b,We===null&&(vt=null,Ke=0,Nl()),T}function cR(){for(;We!==null;)Ib(We)}function fR(o,u){var f=nt;nt|=2;var p=Nb(),y=Mb();vt!==o||Ke!==u?(cc=null,lc=It()+500,Vo(o,u)):Po=ku(o,u);e:do try{if(ct!==0&&We!==null){u=We;var b=Kn;t:switch(ct){case 1:ct=0,Kn=null,jo(o,u,b,1);break;case 2:case 9:if(Wy(b)){ct=0,Kn=null,Fb(u);break}u=function(){ct!==2&&ct!==9||vt!==o||(ct=7),Pr(o)},b.then(u,u);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Wy(b)?(ct=0,Kn=null,Fb(u)):(ct=0,Kn=null,jo(o,u,b,7));break;case 5:var T=null;switch(We.tag){case 26:T=We.memoizedState;case 5:case 27:var k=We;if(T?x1(T):k.stateNode.complete){ct=0,Kn=null;var P=k.sibling;if(P!==null)We=P;else{var Y=k.return;Y!==null?(We=Y,dc(Y)):We=null}break t}}ct=0,Kn=null,jo(o,u,b,5);break;case 6:ct=0,Kn=null,jo(o,u,b,6);break;case 8:Qd(),Dt=6;break e;default:throw Error(r(462))}}hR();break}catch(se){Ob(o,se)}while(!0);return pa=Mi=null,z.H=p,z.A=y,nt=f,We!==null?0:(vt=null,Ke=0,Nl(),Dt)}function hR(){for(;We!==null&&!Fr();)Ib(We)}function Ib(o){var u=ab(o.alternate,o,_a);o.memoizedProps=o.pendingProps,u===null?dc(o):We=u}function Fb(o){var u=o,f=u.alternate;switch(u.tag){case 15:case 0:u=Q0(f,u,u.pendingProps,u.type,void 0,Ke);break;case 11:u=Q0(f,u,u.pendingProps,u.type.render,u.ref,Ke);break;case 5:pd(u);default:ob(f,u),u=We=My(u,_a),u=ab(f,u,_a)}o.memoizedProps=o.pendingProps,u===null?dc(o):We=u}function jo(o,u,f,p){pa=Mi=null,pd(u),No=null,Xu=0;var y=u.return;try{if(eR(o,y,u,f,Ke)){Dt=1,ec(o,lr(f,o.current)),We=null;return}}catch(b){if(y!==null)throw We=y,b;Dt=1,ec(o,lr(f,o.current)),We=null;return}u.flags&32768?(Ze||p===1?o=!0:Po||(Ke&536870912)!==0?o=!1:(Qa=o=!0,(p===2||p===9||p===3||p===6)&&(p=Gn.current,p!==null&&p.tag===13&&(p.flags|=16384))),Bb(u,o)):dc(u)}function dc(o){var u=o;do{if((u.flags&32768)!==0){Bb(u,Qa);return}o=u.return;var f=rR(u.alternate,u,_a);if(f!==null){We=f;return}if(u=u.sibling,u!==null){We=u;return}We=u=o}while(u!==null);Dt===0&&(Dt=5)}function Bb(o,u){do{var f=aR(o.alternate,o);if(f!==null){f.flags&=32767,We=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(o=o.sibling,o!==null)){We=o;return}We=o=f}while(o!==null);Dt=6,We=null}function Lb(o,u,f,p,y,b,T,k,P){o.cancelPendingCommit=null;do pc();while(Ht!==0);if((nt&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(b=u.lanes|u.childLanes,b|=Hh,G_(o,f,b,T,k,P),o===vt&&(We=vt=null,Ke=0),Ho=u,ti=o,Ca=f,$d=b,Zd=y,Rb=p,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,mR(wn,function(){return Vb(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||p){p=z.T,z.T=null,y=W.p,W.p=2,T=nt,nt|=4;try{iR(o,u,f)}finally{nt=T,W.p=y,z.T=p}}Ht=1,zb(),Pb(),Ub()}}function zb(){if(Ht===1){Ht=0;var o=ti,u=Ho,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=z.T,z.T=null;var p=W.p;W.p=2;var y=nt;nt|=4;try{yb(u,o);var b=fp,T=_y(o.containerInfo),k=b.focusedElem,P=b.selectionRange;if(T!==k&&k&&k.ownerDocument&&Ey(k.ownerDocument.documentElement,k)){if(P!==null&&Bh(k)){var Y=P.start,se=P.end;if(se===void 0&&(se=Y),"selectionStart"in k)k.selectionStart=Y,k.selectionEnd=Math.min(se,k.value.length);else{var fe=k.ownerDocument||document,Q=fe&&fe.defaultView||window;if(Q.getSelection){var ae=Q.getSelection(),xe=k.textContent.length,ke=Math.min(P.start,xe),pt=P.end===void 0?ke:Math.min(P.end,xe);!ae.extend&&ke>pt&&(T=pt,pt=ke,ke=T);var $=Sy(k,ke),j=Sy(k,pt);if($&&j&&(ae.rangeCount!==1||ae.anchorNode!==$.node||ae.anchorOffset!==$.offset||ae.focusNode!==j.node||ae.focusOffset!==j.offset)){var Z=fe.createRange();Z.setStart($.node,$.offset),ae.removeAllRanges(),ke>pt?(ae.addRange(Z),ae.extend(j.node,j.offset)):(Z.setEnd(j.node,j.offset),ae.addRange(Z))}}}}for(fe=[],ae=k;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<fe.length;k++){var ce=fe[k];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Rc=!!cp,fp=cp=null}finally{nt=y,W.p=p,z.T=f}}o.current=u,Ht=2}}function Pb(){if(Ht===2){Ht=0;var o=ti,u=Ho,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=z.T,z.T=null;var p=W.p;W.p=2;var y=nt;nt|=4;try{db(o,u.alternate,u)}finally{nt=y,W.p=p,z.T=f}}Ht=3}}function Ub(){if(Ht===4||Ht===3){Ht=0,Er();var o=ti,u=Ho,f=Ca,p=Rb;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ht=5:(Ht=0,Ho=ti=null,Hb(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(ei=null),gh(f),u=u.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(sa,u,void 0,(u.current.flags&128)===128)}catch{}if(p!==null){u=z.T,y=W.p,W.p=2,z.T=null;try{for(var b=o.onRecoverableError,T=0;T<p.length;T++){var k=p[T];b(k.value,{componentStack:k.stack})}}finally{z.T=u,W.p=y}}(Ca&3)!==0&&pc(),Pr(o),y=o.pendingLanes,(f&261930)!==0&&(y&42)!==0?o===Yd?fs++:(fs=0,Yd=o):fs=0,hs(0)}}function Hb(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,qu(u)))}function pc(){return zb(),Pb(),Ub(),Vb()}function Vb(){if(Ht!==5)return!1;var o=ti,u=$d;$d=0;var f=gh(Ca),p=z.T,y=W.p;try{W.p=32>f?32:f,z.T=null,f=Zd,Zd=null;var b=ti,T=Ca;if(Ht=0,Ho=ti=null,Ca=0,(nt&6)!==0)throw Error(r(331));var k=nt;if(nt|=4,Eb(b.current),xb(b,b.current,T,f),nt=k,hs(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(sa,b)}catch{}return!0}finally{W.p=y,z.T=p,Hb(o,u)}}function jb(o,u,f){u=lr(f,u),u=Dd(o.stateNode,u,2),o=Xa(o,u,2),o!==null&&(Nu(o,2),Pr(o))}function ft(o,u,f){if(o.tag===3)jb(o,o,f);else for(;u!==null;){if(u.tag===3){jb(u,o,f);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ei===null||!ei.has(p))){o=lr(f,o),f=W0(2),p=Xa(u,f,2),p!==null&&(G0(f,p,u,o),Nu(p,2),Pr(p));break}}u=u.return}}function ep(o,u,f){var p=o.pingCache;if(p===null){p=o.pingCache=new sR;var y=new Set;p.set(u,y)}else y=p.get(u),y===void 0&&(y=new Set,p.set(u,y));y.has(f)||(qd=!0,y.add(f),o=dR.bind(null,o,u,f),u.then(o,o))}function dR(o,u,f){var p=o.pingCache;p!==null&&p.delete(u),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,vt===o&&(Ke&f)===f&&(Dt===4||Dt===3&&(Ke&62914560)===Ke&&300>It()-sc?(nt&2)===0&&Vo(o,0):Kd|=f,Uo===Ke&&(Uo=0)),Pr(o)}function Wb(o,u){u===0&&(u=zg()),o=Oi(o,u),o!==null&&(Nu(o,u),Pr(o))}function pR(o){var u=o.memoizedState,f=0;u!==null&&(f=u.retryLane),Wb(o,f)}function vR(o,u){var f=0;switch(o.tag){case 31:case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(u),Wb(o,f)}function mR(o,u){return Ir(o,u)}var vc=null,Wo=null,tp=!1,mc=!1,np=!1,ri=0;function Pr(o){o!==Wo&&o.next===null&&(Wo===null?vc=Wo=o:Wo=Wo.next=o),mc=!0,tp||(tp=!0,yR())}function hs(o,u){if(!np&&mc){np=!0;do for(var f=!1,p=vc;p!==null;){if(o!==0){var y=p.pendingLanes;if(y===0)var b=0;else{var T=p.suspendedLanes,k=p.pingedLanes;b=(1<<31-Vn(42|o)+1)-1,b&=y&~(T&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(f=!0,Xb(p,b))}else b=Ke,b=xl(p,p===vt?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||ku(p,b)||(f=!0,Xb(p,b));p=p.next}while(f);np=!1}}function gR(){Gb()}function Gb(){mc=tp=!1;var o=0;ri!==0&&TR()&&(o=ri);for(var u=It(),f=null,p=vc;p!==null;){var y=p.next,b=qb(p,u);b===0?(p.next=null,f===null?vc=y:f.next=y,y===null&&(Wo=f)):(f=p,(o!==0||(b&3)!==0)&&(mc=!0)),p=y}Ht!==0&&Ht!==5||hs(o),ri!==0&&(ri=0)}function qb(o,u){for(var f=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,b=o.pendingLanes&-62914561;0<b;){var T=31-Vn(b),k=1<<T,P=y[T];P===-1?((k&f)===0||(k&p)!==0)&&(y[T]=W_(k,u)):P<=u&&(o.expiredLanes|=k),b&=~k}if(u=vt,f=Ke,f=xl(o,o===u?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,f===0||o===u&&(ct===2||ct===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&Hn(p),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||ku(o,f)){if(u=f&-f,u===o.callbackPriority)return u;switch(p!==null&&Hn(p),gh(f)){case 2:case 8:f=ua;break;case 32:f=wn;break;case 268435456:f=ml;break;default:f=wn}return p=Kb.bind(null,o),f=Ir(f,p),o.callbackPriority=u,o.callbackNode=f,u}return p!==null&&p!==null&&Hn(p),o.callbackPriority=2,o.callbackNode=null,2}function Kb(o,u){if(Ht!==0&&Ht!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(pc()&&o.callbackNode!==f)return null;var p=Ke;return p=xl(o,o===vt?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(Tb(o,p,u),qb(o,It()),o.callbackNode!=null&&o.callbackNode===f?Kb.bind(null,o):null)}function Xb(o,u){if(pc())return null;Tb(o,u,!0)}function yR(){OR(function(){(nt&6)!==0?Ir(lo,gR):Gb()})}function rp(){if(ri===0){var o=Do;o===0&&(o=gl,gl<<=1,(gl&261888)===0&&(gl=256)),ri=o}return ri}function $b(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:_l(""+o)}function Zb(o,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,o.id&&f.setAttribute("form",o.id),u.parentNode.insertBefore(f,u),o=new FormData(o),f.parentNode.removeChild(f),o}function bR(o,u,f,p,y){if(u==="submit"&&f&&f.stateNode===y){var b=$b((y[Rn]||null).action),T=p.submitter;T&&(u=(u=T[Rn]||null)?$b(u.formAction):T.getAttribute("formAction"),u!==null&&(b=u,T=null));var k=new Tl("action","action",null,p,y);o.push({event:k,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ri!==0){var P=T?Zb(y,T):new FormData(y);Ed(f,{pending:!0,data:P,method:y.method,action:b},null,P)}}else typeof b=="function"&&(k.preventDefault(),P=T?Zb(y,T):new FormData(y),Ed(f,{pending:!0,data:P,method:y.method,action:b},b,P))},currentTarget:y}]})}}for(var ap=0;ap<Uh.length;ap++){var ip=Uh[ap],xR=ip.toLowerCase(),wR=ip[0].toUpperCase()+ip.slice(1);Cr(xR,"on"+wR)}Cr(Ay,"onAnimationEnd"),Cr(Ty,"onAnimationIteration"),Cr(Dy,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(LC,"onTransitionRun"),Cr(zC,"onTransitionStart"),Cr(PC,"onTransitionCancel"),Cr(Oy,"onTransitionEnd"),vo("onMouseEnter",["mouseout","mouseover"]),vo("onMouseLeave",["mouseout","mouseover"]),vo("onPointerEnter",["pointerout","pointerover"]),vo("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ds));function Yb(o,u){u=(u&4)!==0;for(var f=0;f<o.length;f++){var p=o[f],y=p.event;p=p.listeners;e:{var b=void 0;if(u)for(var T=p.length-1;0<=T;T--){var k=p[T],P=k.instance,Y=k.currentTarget;if(k=k.listener,P!==b&&y.isPropagationStopped())break e;b=k,y.currentTarget=Y;try{b(y)}catch(se){kl(se)}y.currentTarget=null,b=P}else for(T=0;T<p.length;T++){if(k=p[T],P=k.instance,Y=k.currentTarget,k=k.listener,P!==b&&y.isPropagationStopped())break e;b=k,y.currentTarget=Y;try{b(y)}catch(se){kl(se)}y.currentTarget=null,b=P}}}}function Ge(o,u){var f=u[yh];f===void 0&&(f=u[yh]=new Set);var p=o+"__bubble";f.has(p)||(Qb(u,o,2,!1),f.add(p))}function op(o,u,f){var p=0;u&&(p|=4),Qb(f,o,p,u)}var gc="_reactListening"+Math.random().toString(36).slice(2);function up(o){if(!o[gc]){o[gc]=!0,Gg.forEach(function(f){f!=="selectionchange"&&(SR.has(f)||op(f,!1,o),op(f,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[gc]||(u[gc]=!0,op("selectionchange",!1,u))}}function Qb(o,u,f,p){switch(A1(u)){case 2:var y=ZR;break;case 8:y=YR;break;default:y=Sp}f=y.bind(null,u,f,o),y=void 0,!Ah||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(u,f,{capture:!0,passive:y}):o.addEventListener(u,f,!0):y!==void 0?o.addEventListener(u,f,{passive:y}):o.addEventListener(u,f,!1)}function sp(o,u,f,p,y){var b=p;if((u&1)===0&&(u&2)===0&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var k=p.stateNode.containerInfo;if(k===y)break;if(T===4)for(T=p.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;k!==null;){if(T=fo(k),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){p=b=T;continue e}k=k.parentNode}}p=p.return}ry(function(){var Y=b,se=Ch(f),fe=[];e:{var Q=ky.get(o);if(Q!==void 0){var ae=Tl,xe=o;switch(o){case"keypress":if(Rl(f)===0)break e;case"keydown":case"keyup":ae=vC;break;case"focusin":xe="focus",ae=kh;break;case"focusout":xe="blur",ae=kh;break;case"beforeblur":case"afterblur":ae=kh;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=rC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=yC;break;case Ay:case Ty:case Dy:ae=oC;break;case Oy:ae=xC;break;case"scroll":case"scrollend":ae=tC;break;case"wheel":ae=SC;break;case"copy":case"cut":case"paste":ae=sC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=sy;break;case"toggle":case"beforetoggle":ae=_C}var ke=(u&4)!==0,pt=!ke&&(o==="scroll"||o==="scrollend"),$=ke?Q!==null?Q+"Capture":null:Q;ke=[];for(var j=Y,Z;j!==null;){var ce=j;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||$===null||(ce=Fu(j,$),ce!=null&&ke.push(ps(j,ce,Z))),pt)break;j=j.return}0<ke.length&&(Q=new ae(Q,xe,null,f,se),fe.push({event:Q,listeners:ke}))}}if((u&7)===0){e:{if(Q=o==="mouseover"||o==="pointerover",ae=o==="mouseout"||o==="pointerout",Q&&f!==_h&&(xe=f.relatedTarget||f.fromElement)&&(fo(xe)||xe[co]))break e;if((ae||Q)&&(Q=se.window===se?se:(Q=se.ownerDocument)?Q.defaultView||Q.parentWindow:window,ae?(xe=f.relatedTarget||f.toElement,ae=Y,xe=xe?fo(xe):null,xe!==null&&(pt=i(xe),ke=xe.tag,xe!==pt||ke!==5&&ke!==27&&ke!==6)&&(xe=null)):(ae=null,xe=Y),ae!==xe)){if(ke=oy,ce="onMouseLeave",$="onMouseEnter",j="mouse",(o==="pointerout"||o==="pointerover")&&(ke=sy,ce="onPointerLeave",$="onPointerEnter",j="pointer"),pt=ae==null?Q:Iu(ae),Z=xe==null?Q:Iu(xe),Q=new ke(ce,j+"leave",ae,f,se),Q.target=pt,Q.relatedTarget=Z,ce=null,fo(se)===Y&&(ke=new ke($,j+"enter",xe,f,se),ke.target=Z,ke.relatedTarget=pt,ce=ke),pt=ce,ae&&xe)t:{for(ke=ER,$=ae,j=xe,Z=0,ce=$;ce;ce=ke(ce))Z++;ce=0;for(var Oe=j;Oe;Oe=ke(Oe))ce++;for(;0<Z-ce;)$=ke($),Z--;for(;0<ce-Z;)j=ke(j),ce--;for(;Z--;){if($===j||j!==null&&$===j.alternate){ke=$;break t}$=ke($),j=ke(j)}ke=null}else ke=null;ae!==null&&Jb(fe,Q,ae,ke,!1),xe!==null&&pt!==null&&Jb(fe,pt,xe,ke,!0)}}e:{if(Q=Y?Iu(Y):window,ae=Q.nodeName&&Q.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Q.type==="file")var Je=my;else if(py(Q))if(gy)Je=IC;else{Je=NC;var Ee=kC}else ae=Q.nodeName,!ae||ae.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&Eh(Y.elementType)&&(Je=my):Je=MC;if(Je&&(Je=Je(o,Y))){vy(fe,Je,f,se);break e}Ee&&Ee(o,Q,Y),o==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&Sh(Q,"number",Q.value)}switch(Ee=Y?Iu(Y):window,o){case"focusin":(py(Ee)||Ee.contentEditable==="true")&&(wo=Ee,Lh=Y,ju=null);break;case"focusout":ju=Lh=wo=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,Cy(fe,f,se);break;case"selectionchange":if(BC)break;case"keydown":case"keyup":Cy(fe,f,se)}var Pe;if(Mh)e:{switch(o){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else xo?hy(o,f)&&(Xe="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Xe="onCompositionStart");Xe&&(ly&&f.locale!=="ko"&&(xo||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&xo&&(Pe=ay()):(Ha=se,Th="value"in Ha?Ha.value:Ha.textContent,xo=!0)),Ee=yc(Y,Xe),0<Ee.length&&(Xe=new uy(Xe,o,null,f,se),fe.push({event:Xe,listeners:Ee}),Pe?Xe.data=Pe:(Pe=dy(f),Pe!==null&&(Xe.data=Pe)))),(Pe=RC?AC(o,f):TC(o,f))&&(Xe=yc(Y,"onBeforeInput"),0<Xe.length&&(Ee=new uy("onBeforeInput","beforeinput",null,f,se),fe.push({event:Ee,listeners:Xe}),Ee.data=Pe)),bR(fe,o,Y,f,se)}Yb(fe,u)})}function ps(o,u,f){return{instance:o,listener:u,currentTarget:f}}function yc(o,u){for(var f=u+"Capture",p=[];o!==null;){var y=o,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=Fu(o,f),y!=null&&p.unshift(ps(o,y,b)),y=Fu(o,u),y!=null&&p.push(ps(o,y,b))),o.tag===3)return p;o=o.return}return[]}function ER(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Jb(o,u,f,p,y){for(var b=u._reactName,T=[];f!==null&&f!==p;){var k=f,P=k.alternate,Y=k.stateNode;if(k=k.tag,P!==null&&P===p)break;k!==5&&k!==26&&k!==27||Y===null||(P=Y,y?(Y=Fu(f,b),Y!=null&&T.unshift(ps(f,Y,P))):y||(Y=Fu(f,b),Y!=null&&T.push(ps(f,Y,P)))),f=f.return}T.length!==0&&o.push({event:u,listeners:T})}var _R=/\r\n?/g,CR=/\u0000|\uFFFD/g;function e1(o){return(typeof o=="string"?o:""+o).replace(_R,`
`).replace(CR,"")}function t1(o,u){return u=e1(u),e1(o)===u}function dt(o,u,f,p,y,b){switch(f){case"children":typeof p=="string"?u==="body"||u==="textarea"&&p===""||go(o,p):(typeof p=="number"||typeof p=="bigint")&&u!=="body"&&go(o,""+p);break;case"className":Sl(o,"class",p);break;case"tabIndex":Sl(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Sl(o,f,p);break;case"style":ty(o,p,b);break;case"data":if(u!=="object"){Sl(o,"data",p);break}case"src":case"href":if(p===""&&(u!=="a"||f!=="href")){o.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=_l(""+p),o.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(f==="formAction"?(u!=="input"&&dt(o,u,"name",y.name,y,null),dt(o,u,"formEncType",y.formEncType,y,null),dt(o,u,"formMethod",y.formMethod,y,null),dt(o,u,"formTarget",y.formTarget,y,null)):(dt(o,u,"encType",y.encType,y,null),dt(o,u,"method",y.method,y,null),dt(o,u,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(f);break}p=_l(""+p),o.setAttribute(f,p);break;case"onClick":p!=null&&(o.onclick=ca);break;case"onScroll":p!=null&&Ge("scroll",o);break;case"onScrollEnd":p!=null&&Ge("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}f=_l(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""+p):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":p===!0?o.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(f,p):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(f,p):o.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(f):o.setAttribute(f,p);break;case"popover":Ge("beforetoggle",o),Ge("toggle",o),wl(o,"popover",p);break;case"xlinkActuate":la(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":la(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":la(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":la(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":la(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":la(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":la(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":la(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":la(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":wl(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=J_.get(f)||f,wl(o,f,p))}}function lp(o,u,f,p,y,b){switch(f){case"style":ty(o,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof p=="string"?go(o,p):(typeof p=="number"||typeof p=="bigint")&&go(o,""+p);break;case"onScroll":p!=null&&Ge("scroll",o);break;case"onScrollEnd":p!=null&&Ge("scrollend",o);break;case"onClick":p!=null&&(o.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qg.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),u=f.slice(2,y?f.length-7:void 0),b=o[Rn]||null,b=b!=null?b[f]:null,typeof b=="function"&&o.removeEventListener(u,b,y),typeof p=="function")){typeof b!="function"&&b!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(u,p,y);break e}f in o?o[f]=p:p===!0?o.setAttribute(f,""):wl(o,f,p)}}}function sn(o,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",o),Ge("load",o);var p=!1,y=!1,b;for(b in f)if(f.hasOwnProperty(b)){var T=f[b];if(T!=null)switch(b){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dt(o,u,b,T,f,null)}}y&&dt(o,u,"srcSet",f.srcSet,f,null),p&&dt(o,u,"src",f.src,f,null);return;case"input":Ge("invalid",o);var k=b=T=y=null,P=null,Y=null;for(p in f)if(f.hasOwnProperty(p)){var se=f[p];if(se!=null)switch(p){case"name":y=se;break;case"type":T=se;break;case"checked":P=se;break;case"defaultChecked":Y=se;break;case"value":b=se;break;case"defaultValue":k=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,u));break;default:dt(o,u,p,se,f,null)}}Yg(o,b,k,P,Y,T,y,!1);return;case"select":Ge("invalid",o),p=T=b=null;for(y in f)if(f.hasOwnProperty(y)&&(k=f[y],k!=null))switch(y){case"value":b=k;break;case"defaultValue":T=k;break;case"multiple":p=k;default:dt(o,u,y,k,f,null)}u=b,f=T,o.multiple=!!p,u!=null?mo(o,!!p,u,!1):f!=null&&mo(o,!!p,f,!0);return;case"textarea":Ge("invalid",o),b=y=p=null;for(T in f)if(f.hasOwnProperty(T)&&(k=f[T],k!=null))switch(T){case"value":p=k;break;case"defaultValue":y=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:dt(o,u,T,k,f,null)}Jg(o,p,y,b);return;case"option":for(P in f)if(f.hasOwnProperty(P)&&(p=f[P],p!=null))switch(P){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:dt(o,u,P,p,f,null)}return;case"dialog":Ge("beforetoggle",o),Ge("toggle",o),Ge("cancel",o),Ge("close",o);break;case"iframe":case"object":Ge("load",o);break;case"video":case"audio":for(p=0;p<ds.length;p++)Ge(ds[p],o);break;case"image":Ge("error",o),Ge("load",o);break;case"details":Ge("toggle",o);break;case"embed":case"source":case"link":Ge("error",o),Ge("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in f)if(f.hasOwnProperty(Y)&&(p=f[Y],p!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:dt(o,u,Y,p,f,null)}return;default:if(Eh(u)){for(se in f)f.hasOwnProperty(se)&&(p=f[se],p!==void 0&&lp(o,u,se,p,f,void 0));return}}for(k in f)f.hasOwnProperty(k)&&(p=f[k],p!=null&&dt(o,u,k,p,f,null))}function RR(o,u,f,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,T=null,k=null,P=null,Y=null,se=null;for(ae in f){var fe=f[ae];if(f.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":P=fe;default:p.hasOwnProperty(ae)||dt(o,u,ae,null,p,fe)}}for(var Q in p){var ae=p[Q];if(fe=f[Q],p.hasOwnProperty(Q)&&(ae!=null||fe!=null))switch(Q){case"type":b=ae;break;case"name":y=ae;break;case"checked":Y=ae;break;case"defaultChecked":se=ae;break;case"value":T=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,u));break;default:ae!==fe&&dt(o,u,Q,ae,p,fe)}}wh(o,T,k,P,Y,se,b,y);return;case"select":ae=T=k=Q=null;for(b in f)if(P=f[b],f.hasOwnProperty(b)&&P!=null)switch(b){case"value":break;case"multiple":ae=P;default:p.hasOwnProperty(b)||dt(o,u,b,null,p,P)}for(y in p)if(b=p[y],P=f[y],p.hasOwnProperty(y)&&(b!=null||P!=null))switch(y){case"value":Q=b;break;case"defaultValue":k=b;break;case"multiple":T=b;default:b!==P&&dt(o,u,y,b,p,P)}u=k,f=T,p=ae,Q!=null?mo(o,!!f,Q,!1):!!p!=!!f&&(u!=null?mo(o,!!f,u,!0):mo(o,!!f,f?[]:"",!1));return;case"textarea":ae=Q=null;for(k in f)if(y=f[k],f.hasOwnProperty(k)&&y!=null&&!p.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:dt(o,u,k,null,p,y)}for(T in p)if(y=p[T],b=f[T],p.hasOwnProperty(T)&&(y!=null||b!=null))switch(T){case"value":Q=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&dt(o,u,T,y,p,b)}Qg(o,Q,ae);return;case"option":for(var xe in f)if(Q=f[xe],f.hasOwnProperty(xe)&&Q!=null&&!p.hasOwnProperty(xe))switch(xe){case"selected":o.selected=!1;break;default:dt(o,u,xe,null,p,Q)}for(P in p)if(Q=p[P],ae=f[P],p.hasOwnProperty(P)&&Q!==ae&&(Q!=null||ae!=null))switch(P){case"selected":o.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:dt(o,u,P,Q,p,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in f)Q=f[ke],f.hasOwnProperty(ke)&&Q!=null&&!p.hasOwnProperty(ke)&&dt(o,u,ke,null,p,Q);for(Y in p)if(Q=p[Y],ae=f[Y],p.hasOwnProperty(Y)&&Q!==ae&&(Q!=null||ae!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,u));break;default:dt(o,u,Y,Q,p,ae)}return;default:if(Eh(u)){for(var pt in f)Q=f[pt],f.hasOwnProperty(pt)&&Q!==void 0&&!p.hasOwnProperty(pt)&&lp(o,u,pt,void 0,p,Q);for(se in p)Q=p[se],ae=f[se],!p.hasOwnProperty(se)||Q===ae||Q===void 0&&ae===void 0||lp(o,u,se,Q,p,ae);return}}for(var $ in f)Q=f[$],f.hasOwnProperty($)&&Q!=null&&!p.hasOwnProperty($)&&dt(o,u,$,null,p,Q);for(fe in p)Q=p[fe],ae=f[fe],!p.hasOwnProperty(fe)||Q===ae||Q==null&&ae==null||dt(o,u,fe,Q,p,ae)}function n1(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AR(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var y=f[p],b=y.transferSize,T=y.initiatorType,k=y.duration;if(b&&k&&n1(T)){for(T=0,k=y.responseEnd,p+=1;p<f.length;p++){var P=f[p],Y=P.startTime;if(Y>k)break;var se=P.transferSize,fe=P.initiatorType;se&&n1(fe)&&(P=P.responseEnd,T+=se*(P<k?1:(k-Y)/(P-Y)))}if(--p,u+=8*(b+T)/(y.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var cp=null,fp=null;function bc(o){return o.nodeType===9?o:o.ownerDocument}function r1(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a1(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function hp(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var dp=null;function TR(){var o=window.event;return o&&o.type==="popstate"?o===dp?!1:(dp=o,!0):(dp=null,!1)}var i1=typeof setTimeout=="function"?setTimeout:void 0,DR=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,OR=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(o){return o1.resolve(null).then(o).catch(kR)}:i1;function kR(o){setTimeout(function(){throw o})}function ai(o){return o==="head"}function u1(o,u){var f=u,p=0;do{var y=f.nextSibling;if(o.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(p===0){o.removeChild(y),Xo(u);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")vs(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,vs(f);for(var b=f.firstChild;b;){var T=b.nextSibling,k=b.nodeName;b[Mu]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||f.removeChild(b),b=T}}else f==="body"&&vs(o.ownerDocument.body);f=y}while(f);Xo(u)}function s1(o,u){var f=o;o=0;do{var p=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=p}while(f)}function pp(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":pp(f),bh(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function NR(o,u,f,p){for(;o.nodeType===1;){var y=f;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Mu])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(b=o.getAttribute("rel"),b==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(b!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(b=o.getAttribute("src"),(b!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===b)return o}else return o;if(o=pr(o.nextSibling),o===null)break}return null}function MR(o,u,f){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=pr(o.nextSibling),o===null))return null;return o}function l1(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=pr(o.nextSibling),o===null))return null;return o}function vp(o){return o.data==="$?"||o.data==="$~"}function mp(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function IR(o,u){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||f.readyState!=="loading")u();else{var p=function(){u(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function pr(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var gp=null;function c1(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(u===0)return pr(o.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}o=o.nextSibling}return null}function f1(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return o;u--}else f!=="/$"&&f!=="/&"||u++}o=o.previousSibling}return null}function h1(o,u,f){switch(u=bc(f),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function vs(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);bh(o)}var vr=new Map,d1=new Set;function xc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ra=W.d;W.d={f:FR,r:BR,D:LR,C:zR,L:PR,m:UR,X:VR,S:HR,M:jR};function FR(){var o=Ra.f(),u=fc();return o||u}function BR(o){var u=ho(o);u!==null&&u.tag===5&&u.type==="form"?O0(u):Ra.r(o)}var Go=typeof document>"u"?null:document;function p1(o,u,f){var p=Go;if(p&&typeof u=="string"&&u){var y=ur(u);y='link[rel="'+o+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),d1.has(y)||(d1.add(y),o={rel:o,crossOrigin:f,href:u},p.querySelector(y)===null&&(u=p.createElement("link"),sn(u,"link",o),Zt(u),p.head.appendChild(u)))}}function LR(o){Ra.D(o),p1("dns-prefetch",o,null)}function zR(o,u){Ra.C(o,u),p1("preconnect",o,u)}function PR(o,u,f){Ra.L(o,u,f);var p=Go;if(p&&o&&u){var y='link[rel="preload"][as="'+ur(u)+'"]';u==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+ur(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+ur(f.imageSizes)+'"]')):y+='[href="'+ur(o)+'"]';var b=y;switch(u){case"style":b=qo(o);break;case"script":b=Ko(o)}vr.has(b)||(o=v({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:o,as:u},f),vr.set(b,o),p.querySelector(y)!==null||u==="style"&&p.querySelector(ms(b))||u==="script"&&p.querySelector(gs(b))||(u=p.createElement("link"),sn(u,"link",o),Zt(u),p.head.appendChild(u)))}}function UR(o,u){Ra.m(o,u);var f=Go;if(f&&o){var p=u&&typeof u.as=="string"?u.as:"script",y='link[rel="modulepreload"][as="'+ur(p)+'"][href="'+ur(o)+'"]',b=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ko(o)}if(!vr.has(b)&&(o=v({rel:"modulepreload",href:o},u),vr.set(b,o),f.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(gs(b)))return}p=f.createElement("link"),sn(p,"link",o),Zt(p),f.head.appendChild(p)}}}function HR(o,u,f){Ra.S(o,u,f);var p=Go;if(p&&o){var y=po(p).hoistableStyles,b=qo(o);u=u||"default";var T=y.get(b);if(!T){var k={loading:0,preload:null};if(T=p.querySelector(ms(b)))k.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":u},f),(f=vr.get(b))&&yp(o,f);var P=T=p.createElement("link");Zt(P),sn(P,"link",o),P._p=new Promise(function(Y,se){P.onload=Y,P.onerror=se}),P.addEventListener("load",function(){k.loading|=1}),P.addEventListener("error",function(){k.loading|=2}),k.loading|=4,wc(T,u,p)}T={type:"stylesheet",instance:T,count:1,state:k},y.set(b,T)}}}function VR(o,u){Ra.X(o,u);var f=Go;if(f&&o){var p=po(f).hoistableScripts,y=Ko(o),b=p.get(y);b||(b=f.querySelector(gs(y)),b||(o=v({src:o,async:!0},u),(u=vr.get(y))&&bp(o,u),b=f.createElement("script"),Zt(b),sn(b,"link",o),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(y,b))}}function jR(o,u){Ra.M(o,u);var f=Go;if(f&&o){var p=po(f).hoistableScripts,y=Ko(o),b=p.get(y);b||(b=f.querySelector(gs(y)),b||(o=v({src:o,async:!0,type:"module"},u),(u=vr.get(y))&&bp(o,u),b=f.createElement("script"),Zt(b),sn(b,"link",o),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(y,b))}}function v1(o,u,f,p){var y=(y=me.current)?xc(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=qo(f.href),f=po(y).hoistableStyles,p=f.get(u),p||(p={type:"style",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=qo(f.href);var b=po(y).hoistableStyles,T=b.get(o);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(o,T),(b=y.querySelector(ms(o)))&&!b._p&&(T.instance=b,T.state.loading=5),vr.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},vr.set(o,f),b||WR(y,o,f,T.state))),u&&p===null)throw Error(r(528,""));return T}if(u&&p!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ko(f),f=po(y).hoistableScripts,p=f.get(u),p||(p={type:"script",instance:null,count:0,state:null},f.set(u,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function qo(o){return'href="'+ur(o)+'"'}function ms(o){return'link[rel="stylesheet"]['+o+"]"}function m1(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function WR(o,u,f,p){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?p.loading=1:(u=o.createElement("link"),p.preload=u,u.addEventListener("load",function(){return p.loading|=1}),u.addEventListener("error",function(){return p.loading|=2}),sn(u,"link",f),Zt(u),o.head.appendChild(u))}function Ko(o){return'[src="'+ur(o)+'"]'}function gs(o){return"script[async]"+o}function g1(o,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var p=o.querySelector('style[data-href~="'+ur(f.href)+'"]');if(p)return u.instance=p,Zt(p),p;var y=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),Zt(p),sn(p,"style",y),wc(p,f.precedence,o),u.instance=p;case"stylesheet":y=qo(f.href);var b=o.querySelector(ms(y));if(b)return u.state.loading|=4,u.instance=b,Zt(b),b;p=m1(f),(y=vr.get(y))&&yp(p,y),b=(o.ownerDocument||o).createElement("link"),Zt(b);var T=b;return T._p=new Promise(function(k,P){T.onload=k,T.onerror=P}),sn(b,"link",p),u.state.loading|=4,wc(b,f.precedence,o),u.instance=b;case"script":return b=Ko(f.src),(y=o.querySelector(gs(b)))?(u.instance=y,Zt(y),y):(p=f,(y=vr.get(b))&&(p=v({},f),bp(p,y)),o=o.ownerDocument||o,y=o.createElement("script"),Zt(y),sn(y,"link",p),o.head.appendChild(y),u.instance=y);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(p=u.instance,u.state.loading|=4,wc(p,f.precedence,o));return u.instance}function wc(o,u,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,b=y,T=0;T<p.length;T++){var k=p[T];if(k.dataset.precedence===u)b=k;else if(b!==y)break}b?b.parentNode.insertBefore(o,b.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(o,u.firstChild))}function yp(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function bp(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Sc=null;function y1(o,u,f){if(Sc===null){var p=new Map,y=Sc=new Map;y.set(f,p)}else y=Sc,p=y.get(f),p||(p=new Map,y.set(f,p));if(p.has(o))return p;for(p.set(o,null),f=f.getElementsByTagName(o),y=0;y<f.length;y++){var b=f[y];if(!(b[Mu]||b[rn]||o==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(u)||"";T=o+T;var k=p.get(T);k?k.push(b):p.set(T,[b])}}return p}function b1(o,u,f){o=o.ownerDocument||o,o.head.insertBefore(f,u==="title"?o.querySelector("head > title"):null)}function GR(o,u,f){if(f===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function x1(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function qR(o,u,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=qo(p.href),b=u.querySelector(ms(y));if(b){u=b._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=Ec.bind(o),u.then(o,o)),f.state.loading|=4,f.instance=b,Zt(b);return}b=u.ownerDocument||u,p=m1(p),(y=vr.get(y))&&yp(p,y),b=b.createElement("link"),Zt(b);var T=b;T._p=new Promise(function(k,P){T.onload=k,T.onerror=P}),sn(b,"link",p),f.instance=b}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=Ec.bind(o),u.addEventListener("load",f),u.addEventListener("error",f))}}var xp=0;function KR(o,u){return o.stylesheets&&o.count===0&&Cc(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var p=setTimeout(function(){if(o.stylesheets&&Cc(o,o.stylesheets),o.unsuspend){var b=o.unsuspend;o.unsuspend=null,b()}},6e4+u);0<o.imgBytes&&xp===0&&(xp=62500*AR());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Cc(o,o.stylesheets),o.unsuspend)){var b=o.unsuspend;o.unsuspend=null,b()}},(o.imgBytes>xp?50:800)+u);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function Ec(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cc(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var _c=null;function Cc(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,_c=new Map,u.forEach(XR,o),_c=null,Ec.call(o))}function XR(o,u){if(!(u.state.loading&4)){var f=_c.get(o);if(f)var p=f.get(null);else{f=new Map,_c.set(o,f);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var T=y[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(f.set(T.dataset.precedence,T),p=T)}p&&f.set(null,p)}y=u.instance,T=y.getAttribute("data-precedence"),b=f.get(T)||p,b===p&&f.set(null,y),f.set(T,y),this.count++,p=Ec.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),b?b.parentNode.insertBefore(y,b.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),u.state.loading|=4}}var ys={$$typeof:R,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function $R(o,u,f,p,y,b,T,k,P){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vh(0),this.hiddenUpdates=vh(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function w1(o,u,f,p,y,b,T,k,P,Y,se,fe){return o=new $R(o,u,f,T,P,Y,se,fe,k),u=1,b===!0&&(u|=24),b=Wn(3,null,null,u),o.current=b,b.stateNode=o,u=Jh(),u.refCount++,o.pooledCache=u,u.refCount++,b.memoizedState={element:p,isDehydrated:f,cache:u},rd(b),o}function S1(o){return o?(o=_o,o):_o}function E1(o,u,f,p,y,b){y=S1(y),p.context===null?p.context=y:p.pendingContext=y,p=Ka(u),p.payload={element:f},b=b===void 0?null:b,b!==null&&(p.callback=b),f=Xa(o,p,u),f!==null&&(Nn(f,o,u),Zu(f,o,u))}function _1(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<u?f:u}}function wp(o,u){_1(o,u),(o=o.alternate)&&_1(o,u)}function C1(o){if(o.tag===13||o.tag===31){var u=Oi(o,67108864);u!==null&&Nn(u,o,67108864),wp(o,67108864)}}function R1(o){if(o.tag===13||o.tag===31){var u=$n();u=mh(u);var f=Oi(o,u);f!==null&&Nn(f,o,u),wp(o,u)}}var Rc=!0;function ZR(o,u,f,p){var y=z.T;z.T=null;var b=W.p;try{W.p=2,Sp(o,u,f,p)}finally{W.p=b,z.T=y}}function YR(o,u,f,p){var y=z.T;z.T=null;var b=W.p;try{W.p=8,Sp(o,u,f,p)}finally{W.p=b,z.T=y}}function Sp(o,u,f,p){if(Rc){var y=Ep(p);if(y===null)sp(o,u,p,Ac,f),T1(o,p);else if(JR(y,o,u,f,p))p.stopPropagation();else if(T1(o,p),u&4&&-1<QR.indexOf(o)){for(;y!==null;){var b=ho(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Ci(b.pendingLanes);if(T!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;T;){var P=1<<31-Vn(T);k.entanglements[1]|=P,T&=~P}Pr(b),(nt&6)===0&&(lc=It()+500,hs(0))}}break;case 31:case 13:k=Oi(b,2),k!==null&&Nn(k,b,2),fc(),wp(b,2)}if(b=Ep(p),b===null&&sp(o,u,p,Ac,f),b===y)break;y=b}y!==null&&p.stopPropagation()}else sp(o,u,p,null,f)}}function Ep(o){return o=Ch(o),_p(o)}var Ac=null;function _p(o){if(Ac=null,o=fo(o),o!==null){var u=i(o);if(u===null)o=null;else{var f=u.tag;if(f===13){if(o=s(u),o!==null)return o;o=null}else if(f===31){if(o=l(u),o!==null)return o;o=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Ac=o,null}function A1(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_r()){case lo:return 2;case ua:return 8;case wn:case Ou:return 32;case ml:return 268435456;default:return 32}default:return 32}}var Cp=!1,ii=null,oi=null,ui=null,bs=new Map,xs=new Map,si=[],QR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T1(o,u){switch(o){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":bs.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(u.pointerId)}}function ws(o,u,f,p,y,b){return o===null||o.nativeEvent!==b?(o={blockedOn:u,domEventName:f,eventSystemFlags:p,nativeEvent:b,targetContainers:[y]},u!==null&&(u=ho(u),u!==null&&C1(u)),o):(o.eventSystemFlags|=p,u=o.targetContainers,y!==null&&u.indexOf(y)===-1&&u.push(y),o)}function JR(o,u,f,p,y){switch(u){case"focusin":return ii=ws(ii,o,u,f,p,y),!0;case"dragenter":return oi=ws(oi,o,u,f,p,y),!0;case"mouseover":return ui=ws(ui,o,u,f,p,y),!0;case"pointerover":var b=y.pointerId;return bs.set(b,ws(bs.get(b)||null,o,u,f,p,y)),!0;case"gotpointercapture":return b=y.pointerId,xs.set(b,ws(xs.get(b)||null,o,u,f,p,y)),!0}return!1}function D1(o){var u=fo(o.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=s(f),u!==null){o.blockedOn=u,jg(o.priority,function(){R1(f)});return}}else if(u===31){if(u=l(f),u!==null){o.blockedOn=u,jg(o.priority,function(){R1(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Tc(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var f=Ep(o.nativeEvent);if(f===null){f=o.nativeEvent;var p=new f.constructor(f.type,f);_h=p,f.target.dispatchEvent(p),_h=null}else return u=ho(f),u!==null&&C1(u),o.blockedOn=f,!1;u.shift()}return!0}function O1(o,u,f){Tc(o)&&f.delete(u)}function eA(){Cp=!1,ii!==null&&Tc(ii)&&(ii=null),oi!==null&&Tc(oi)&&(oi=null),ui!==null&&Tc(ui)&&(ui=null),bs.forEach(O1),xs.forEach(O1)}function Dc(o,u){o.blockedOn===u&&(o.blockedOn=null,Cp||(Cp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,eA)))}var Oc=null;function k1(o){Oc!==o&&(Oc=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Oc===o&&(Oc=null);for(var u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],y=o[u+2];if(typeof p!="function"){if(_p(p||f)===null)continue;break}var b=ho(f);b!==null&&(o.splice(u,3),u-=3,Ed(b,{pending:!0,data:y,method:f.method,action:p},p,y))}}))}function Xo(o){function u(P){return Dc(P,o)}ii!==null&&Dc(ii,o),oi!==null&&Dc(oi,o),ui!==null&&Dc(ui,o),bs.forEach(u),xs.forEach(u);for(var f=0;f<si.length;f++){var p=si[f];p.blockedOn===o&&(p.blockedOn=null)}for(;0<si.length&&(f=si[0],f.blockedOn===null);)D1(f),f.blockedOn===null&&si.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var y=f[p],b=f[p+1],T=y[Rn]||null;if(typeof b=="function")T||k1(f);else if(T){var k=null;if(b&&b.hasAttribute("formAction")){if(y=b,T=b[Rn]||null)k=T.formAction;else if(_p(y)!==null)continue}else k=T.action;typeof k=="function"?f[p+1]=k:(f.splice(p,3),p-=3),k1(f)}}}function N1(){function o(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function u(){y!==null&&(y(),y=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),y!==null&&(y(),y=null)}}}function Rp(o){this._internalRoot=o}kc.prototype.render=Rp.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,p=$n();E1(f,p,o,u,null,null)},kc.prototype.unmount=Rp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;E1(o.current,2,null,o,null,null),fc(),u[co]=null}};function kc(o){this._internalRoot=o}kc.prototype.unstable_scheduleHydration=function(o){if(o){var u=Vg();o={blockedOn:null,target:o,priority:u};for(var f=0;f<si.length&&u!==0&&u<si[f].priority;f++);si.splice(f,0,o),f===0&&D1(o)}};var M1=e.version;if(M1!=="19.2.0")throw Error(r(527,M1,"19.2.0"));W.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=h(u),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var tA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{sa=Nc.inject(tA),nn=Nc}catch{}}return _s.createRoot=function(o,u){if(!a(o))throw Error(r(299));var f=!1,p="",y=U0,b=H0,T=V0;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(b=u.onCaughtError),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=w1(o,1,!1,null,null,f,p,null,y,b,T,N1),o[co]=u.current,up(o),new Rp(u)},_s.hydrateRoot=function(o,u,f){if(!a(o))throw Error(r(299));var p=!1,y="",b=U0,T=H0,k=V0,P=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(b=f.onUncaughtError),f.onCaughtError!==void 0&&(T=f.onCaughtError),f.onRecoverableError!==void 0&&(k=f.onRecoverableError),f.formState!==void 0&&(P=f.formState)),u=w1(o,1,!0,u,f??null,p,y,P,b,T,k,N1),u.context=S1(null),f=u.current,p=$n(),p=mh(p),y=Ka(p),y.callback=null,Xa(f,y,p),f=p,u.current.lanes=f,Nu(u,f),Pr(u),o[co]=u.current,up(o),new kc(u)},_s.version="19.2.0",_s}var tx;function nT(){if(tx)return Np.exports;tx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Np.exports=tT(),Np.exports}var rT=nT();const EU=c2(rT);var nx=function(e,t){var r=arguments;if(t==null||!tl.call(t,"css"))return K.createElement.apply(void 0,r);var a=r.length,i=new Array(a);i[0]=mm,i[1]=vm(e,t);for(var s=2;s<a;s++)i[s]=r[s];return K.createElement.apply(null,i)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(nx||(nx={}));var _U=pm(function(n,e){var t=n.styles,r=jf([t],void 0,K.useContext(bu)),a=K.useRef();return $1(function(){var i=e.key+"-global",s=new e.sheet.constructor({key:i,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",i),s.hydrate([c])),a.current=[s,l],function(){s.flush()}},[e]),$1(function(){var i=a.current,s=i[0],l=i[1];if(l){i[1]=!1;return}if(r.next!==void 0&&dm(e,r.next,!0),s.tags.length){var c=s.tags[s.tags.length-1].nextElementSibling;s.before=c,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null});function aT(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return jf(e)}function CU(){var n=aT.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function iT(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var oT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,uT=iT(function(n){return oT.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),sT=uT,lT=function(e){return e!=="theme"},rx=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?sT:lT},ax=function(e,t,r){var a;if(t){var i=t.shouldForwardProp;a=e.__emotion_forwardProp&&i?function(s){return e.__emotion_forwardProp(s)&&i(s)}:i}return typeof a!="function"&&r&&(a=e.__emotion_forwardProp),a},cT=function(e){var t=e.cache,r=e.serialized,a=e.isStringTag;return hm(t,r,a),w2(function(){return dm(t,r,a)}),null},RU=function n(e,t){var r=e.__emotion_real===e,a=r&&e.__emotion_base||e,i,s;t!==void 0&&(i=t.label,s=t.target);var l=ax(e,t,r),c=l||rx(a),h=!c("as");return function(){var d=arguments,v=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(i!==void 0&&v.push("label:"+i+";"),d[0]==null||d[0].raw===void 0)v.push.apply(v,d);else{var m=d[0];v.push(m[0]);for(var g=d.length,x=1;x<g;x++)v.push(d[x],m[x])}var w=pm(function(S,E,_){var R=h&&S.as||a,A="",C=[],D=S;if(S.theme==null){D={};for(var O in S)D[O]=S[O];D.theme=K.useContext(bu)}typeof S.className=="string"?A=y2(E.registered,C,S.className):S.className!=null&&(A=S.className+" ");var F=jf(v.concat(C),E.registered,D);A+=E.key+"-"+F.name,s!==void 0&&(A+=" "+s);var N=h&&l===void 0?rx(R):c,I={};for(var U in S)h&&U==="as"||N(U)&&(I[U]=S[U]);return I.className=A,_&&(I.ref=_),K.createElement(K.Fragment,null,K.createElement(cT,{cache:E,serialized:F,isStringTag:typeof R=="string"}),K.createElement(R,I))});return w.displayName=i!==void 0?i:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=a,w.__emotion_styles=v,w.__emotion_forwardProp=l,Object.defineProperty(w,"toString",{value:function(){return"."+s}}),w.withComponent=function(S,E){var _=n(S,yu({},t,E,{shouldForwardProp:ax(w,E,!0)}));return _.apply(void 0,v)},w}};/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ix="popstate";function fT(n={}){function e(r,a){let{pathname:i,search:s,hash:l}=r.location;return xv("",{pathname:i,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Ps(a)}return dT(e,t,null,n)}function Ct(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function kr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hT(){return Math.random().toString(36).substring(2,10)}function ox(n,e){return{usr:n.state,key:n.key,idx:e}}function xv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Cu(e):e,state:t,key:e&&e.key||r||hT()}}function Ps({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Cu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function dT(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,l="POP",c=null,h=d();h==null&&(h=0,s.replaceState({...s.state,idx:h},""));function d(){return(s.state||{idx:null}).idx}function v(){l="POP";let S=d(),E=S==null?null:S-h;h=S,c&&c({action:l,location:w.location,delta:E})}function m(S,E){l="PUSH";let _=xv(w.location,S,E);h=d()+1;let R=ox(_,h),A=w.createHref(_);try{s.pushState(R,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(A)}i&&c&&c({action:l,location:w.location,delta:1})}function g(S,E){l="REPLACE";let _=xv(w.location,S,E);h=d();let R=ox(_,h),A=w.createHref(_);s.replaceState(R,"",A),i&&c&&c({action:l,location:w.location,delta:0})}function x(S){return pT(S)}let w={get action(){return l},get location(){return n(a,s)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(ix,v),c=S,()=>{a.removeEventListener(ix,v),c=null}},createHref(S){return e(a,S)},createURL:x,encodeLocation(S){let E=x(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:g,go(S){return s.go(S)}};return w}function pT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ps(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function E2(n,e,t="/"){return vT(n,e,t,!1)}function vT(n,e,t,r){let a=typeof e=="string"?Cu(e):e,i=ka(a.pathname||"/",t);if(i==null)return null;let s=_2(n);mT(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let h=AT(i);l=CT(s[c],h,r)}return l}function _2(n,e=[],t=[],r="",a=!1){let i=(s,l,c=a,h)=>{let d={relativePath:h===void 0?s.path||"":h,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;Ct(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let v=Oa([r,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(Ct(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),_2(s.children,e,m,v,c)),!(s.path==null&&!s.index)&&e.push({path:v,score:ET(v,s.index),routesMeta:m})};return n.forEach((s,l)=>{if(s.path===""||!s.path?.includes("?"))i(s,l);else for(let c of C2(s.path))i(s,l,!0,c)}),e}function C2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let s=C2(r.join("/")),l=[];return l.push(...s.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...s),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function mT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_T(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var gT=/^:[\w-]+$/,yT=3,bT=2,xT=1,wT=10,ST=-2,ux=n=>n==="*";function ET(n,e){let t=n.split("/"),r=t.length;return t.some(ux)&&(r+=ST),e&&(r+=bT),t.filter(a=>!ux(a)).reduce((a,i)=>a+(gT.test(i)?yT:i===""?xT:wT),r)}function _T(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function CT(n,e,t=!1){let{routesMeta:r}=n,a={},i="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",v=ff({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),m=c.route;if(!v&&h&&t&&!r[r.length-1].route.index&&(v=ff({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!v)return null;Object.assign(a,v.params),s.push({params:a,pathname:Oa([i,v.pathname]),pathnameBase:kT(Oa([i,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(i=Oa([i,v.pathnameBase]))}return s}function ff(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=RT(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((h,{paramName:d,isOptional:v},m)=>{if(d==="*"){let x=l[m]||"";s=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const g=l[m];return v&&!g?h[d]=void 0:h[d]=(g||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:s,pattern:n}}function RT(n,e=!1,t=!0){kr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function AT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ka(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function TT(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?Cu(n):n;return{pathname:t?t.startsWith("/")?t:DT(t,e):e,search:NT(r),hash:MT(a)}}function DT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Bp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function R2(n){let e=OT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function A2(n,e,t,r=!1){let a;typeof n=="string"?a=Cu(n):(a={...n},Ct(!a.pathname||!a.pathname.includes("?"),Bp("?","pathname","search",a)),Ct(!a.pathname||!a.pathname.includes("#"),Bp("#","pathname","hash",a)),Ct(!a.search||!a.search.includes("#"),Bp("#","search","hash",a)));let i=n===""||a.pathname==="",s=i?"/":a.pathname,l;if(s==null)l=t;else{let v=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),v-=1;a.pathname=m.join("/")}l=v>=0?e[v]:"/"}let c=TT(a,l),h=s&&s!=="/"&&s.endsWith("/"),d=(i||s===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}var Oa=n=>n.join("/").replace(/\/\/+/g,"/"),kT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,MT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function IT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var T2=["POST","PUT","PATCH","DELETE"];new Set(T2);var FT=["GET",...T2];new Set(FT);var Ru=K.createContext(null);Ru.displayName="DataRouter";var Wf=K.createContext(null);Wf.displayName="DataRouterState";K.createContext(!1);var D2=K.createContext({isTransitioning:!1});D2.displayName="ViewTransition";var BT=K.createContext(new Map);BT.displayName="Fetchers";var LT=K.createContext(null);LT.displayName="Await";var na=K.createContext(null);na.displayName="Navigation";var nl=K.createContext(null);nl.displayName="Location";var Ma=K.createContext({outlet:null,matches:[],isDataRoute:!1});Ma.displayName="Route";var gm=K.createContext(null);gm.displayName="RouteError";function zT(n,{relative:e}={}){Ct(rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(na),{hash:a,pathname:i,search:s}=al(n,{relative:e}),l=i;return t!=="/"&&(l=i==="/"?t:Oa([t,i])),r.createHref({pathname:l,search:s,hash:a})}function rl(){return K.useContext(nl)!=null}function wi(){return Ct(rl(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(nl).location}var O2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k2(n){K.useContext(na).static||K.useLayoutEffect(n)}function N2(){let{isDataRoute:n}=K.useContext(Ma);return n?YT():PT()}function PT(){Ct(rl(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(Ru),{basename:e,navigator:t}=K.useContext(na),{matches:r}=K.useContext(Ma),{pathname:a}=wi(),i=JSON.stringify(R2(r)),s=K.useRef(!1);return k2(()=>{s.current=!0}),K.useCallback((c,h={})=>{if(kr(s.current,O2),!s.current)return;if(typeof c=="number"){t.go(c);return}let d=A2(c,JSON.parse(i),a,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Oa([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,i,a,n])}K.createContext(null);function al(n,{relative:e}={}){let{matches:t}=K.useContext(Ma),{pathname:r}=wi(),a=JSON.stringify(R2(t));return K.useMemo(()=>A2(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function UT(n,e){return M2(n,e)}function M2(n,e,t,r,a){Ct(rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=K.useContext(na),{matches:s}=K.useContext(Ma),l=s[s.length-1],c=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",v=l&&l.route;{let _=v&&v.path||"";I2(h,!v||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let m=wi(),g;if(e){let _=typeof e=="string"?Cu(e):e;Ct(d==="/"||_.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=m;let x=g.pathname||"/",w=x;if(d!=="/"){let _=d.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=E2(n,{pathname:w});kr(v||S!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),kr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=GT(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Oa([d,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Oa([d,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),s,t,r,a);return e&&E?K.createElement(nl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function HT(){let n=ZT(),e=IT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:i},"ErrorBoundary")," or"," ",K.createElement("code",{style:i},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:a},t):null,s)}var VT=K.createElement(HT,null),jT=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?K.createElement(Ma.Provider,{value:this.props.routeContext},K.createElement(gm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WT({routeContext:n,match:e,children:t}){let r=K.useContext(Ru);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(Ma.Provider,{value:n},t)}function GT(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t?.errors;if(s!=null){let h=i.findIndex(d=>d.route.id&&s?.[d.route.id]!==void 0);Ct(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<i.length;h++){let d=i[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:v,errors:m}=t,g=d.route.loader&&!v.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((h,d,v)=>{let m,g=!1,x=null,w=null;t&&(m=s&&d.route.id?s[d.route.id]:void 0,x=d.route.errorElement||VT,l&&(c<0&&v===0?(I2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):c===v&&(g=!0,w=d.route.hydrateFallbackElement||null)));let S=e.concat(i.slice(0,v+1)),E=()=>{let _;return m?_=x:g?_=w:d.route.Component?_=K.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=h,K.createElement(WT,{match:d,routeContext:{outlet:h,matches:S,isDataRoute:t!=null},children:_})};return t&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?K.createElement(jT,{location:t.location,revalidation:t.revalidation,component:x,error:m,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):E()},null)}function ym(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qT(n){let e=K.useContext(Ru);return Ct(e,ym(n)),e}function KT(n){let e=K.useContext(Wf);return Ct(e,ym(n)),e}function XT(n){let e=K.useContext(Ma);return Ct(e,ym(n)),e}function bm(n){let e=XT(n),t=e.matches[e.matches.length-1];return Ct(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $T(){return bm("useRouteId")}function ZT(){let n=K.useContext(gm),e=KT("useRouteError"),t=bm("useRouteError");return n!==void 0?n:e.errors?.[t]}function YT(){let{router:n}=qT("useNavigate"),e=bm("useNavigate"),t=K.useRef(!1);return k2(()=>{t.current=!0}),K.useCallback(async(a,i={})=>{kr(t.current,O2),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...i}))},[n,e])}var sx={};function I2(n,e,t){!e&&!sx[n]&&(sx[n]=!0,kr(!1,t))}K.memo(QT);function QT({routes:n,future:e,state:t,unstable_onError:r}){return M2(n,void 0,t,r,e)}function JT(n){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eD({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:i=!1}){Ct(!rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),l=K.useMemo(()=>({basename:s,navigator:a,static:i,future:{}}),[s,a,i]);typeof t=="string"&&(t=Cu(t));let{pathname:c="/",search:h="",hash:d="",state:v=null,key:m="default"}=t,g=K.useMemo(()=>{let x=ka(c,s);return x==null?null:{location:{pathname:x,search:h,hash:d,state:v,key:m},navigationType:r}},[s,c,h,d,v,m,r]);return kr(g!=null,`<Router basename="${s}"> is not able to match the URL "${c}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:K.createElement(na.Provider,{value:l},K.createElement(nl.Provider,{children:e,value:g}))}function AU({children:n,location:e}){return UT(wv(n),e)}function wv(n,e=[]){let t=[];return K.Children.forEach(n,(r,a)=>{if(!K.isValidElement(r))return;let i=[...e,a];if(r.type===K.Fragment){t.push.apply(t,wv(r.props.children,i));return}Ct(r.type===JT,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=wv(r.props.children,i)),t.push(s)}),t}var uf="get",sf="application/x-www-form-urlencoded";function Gf(n){return n!=null&&typeof n.tagName=="string"}function tD(n){return Gf(n)&&n.tagName.toLowerCase()==="button"}function nD(n){return Gf(n)&&n.tagName.toLowerCase()==="form"}function rD(n){return Gf(n)&&n.tagName.toLowerCase()==="input"}function aD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iD(n,e){return n.button===0&&(!e||e==="_self")&&!aD(n)}function Sv(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(a=>[t,a]):[[t,r]])},[]))}function oD(n,e){let t=Sv(n);return e&&e.forEach((r,a)=>{t.has(a)||e.getAll(a).forEach(i=>{t.append(a,i)})}),t}var Ic=null;function uD(){if(Ic===null)try{new FormData(document.createElement("form"),0),Ic=!1}catch{Ic=!0}return Ic}var sD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lp(n){return n!=null&&!sD.has(n)?(kr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sf}"`),null):n}function lD(n,e){let t,r,a,i,s;if(nD(n)){let l=n.getAttribute("action");r=l?ka(l,e):null,t=n.getAttribute("method")||uf,a=Lp(n.getAttribute("enctype"))||sf,i=new FormData(n)}else if(tD(n)||rD(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(r=c?ka(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||uf,a=Lp(n.getAttribute("formenctype"))||Lp(l.getAttribute("enctype"))||sf,i=new FormData(l,n),!uD()){let{name:h,type:d,value:v}=n;if(d==="image"){let m=h?`${h}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else h&&i.append(h,v)}}else{if(Gf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uf,r=null,a=sf,s=n}return i&&a==="text/plain"&&(s=i,i=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cD(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ka(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function fD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dD(n,e,t){let r=await Promise.all(n.map(async a=>{let i=e.routes[a.route.id];if(i){let s=await fD(i,t);return s.links?s.links():[]}return[]}));return gD(r.flat(1).filter(hD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function lx(n,e,t,r,a,i){let s=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,l=(c,h)=>t[h].pathname!==c.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,h)=>s(c,h)||l(c,h)):i==="data"?e.filter((c,h)=>{let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(s(c,h)||l(c,h))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function pD(n,e,{includeHydrateFallback:t}={}){return vD(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function vD(n){return[...new Set(n)]}function mD(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function gD(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let i=JSON.stringify(mD(a));return t.has(i)||(t.add(i),r.push({key:i,link:a})),r},[])}function F2(){let n=K.useContext(Ru);return xm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yD(){let n=K.useContext(Wf);return xm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var wm=K.createContext(void 0);wm.displayName="FrameworkContext";function B2(){let n=K.useContext(wm);return xm(n,"You must render this element inside a <HydratedRouter> element"),n}function bD(n,e){let t=K.useContext(wm),[r,a]=K.useState(!1),[i,s]=K.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:d,onTouchStart:v}=e,m=K.useRef(null);K.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let w=E=>{E.forEach(_=>{s(_.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[n]),K.useEffect(()=>{if(r){let w=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(w)}}},[r]);let g=()=>{a(!0)},x=()=>{a(!1),s(!1)};return t?n!=="intent"?[i,m,{}]:[i,m,{onFocus:Cs(l,g),onBlur:Cs(c,x),onMouseEnter:Cs(h,g),onMouseLeave:Cs(d,x),onTouchStart:Cs(v,g)}]:[!1,m,{}]}function Cs(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function xD({page:n,...e}){let{router:t}=F2(),r=K.useMemo(()=>E2(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(SD,{page:n,matches:r,...e}):null}function wD(n){let{manifest:e,routeModules:t}=B2(),[r,a]=K.useState([]);return K.useEffect(()=>{let i=!1;return dD(n,e,t).then(s=>{i||a(s)}),()=>{i=!0}},[n,e,t]),r}function SD({page:n,matches:e,...t}){let r=wi(),{manifest:a,routeModules:i}=B2(),{basename:s}=F2(),{loaderData:l,matches:c}=yD(),h=K.useMemo(()=>lx(n,e,c,a,r,"data"),[n,e,c,a,r]),d=K.useMemo(()=>lx(n,e,c,a,r,"assets"),[n,e,c,a,r]),v=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(E=>{let _=a.routes[E.route.id];!_||!_.hasLoader||(!h.some(R=>R.route.id===E.route.id)&&E.route.id in l&&i[E.route.id]?.shouldRevalidate||_.hasClientLoader?w=!0:x.add(E.route.id))}),x.size===0)return[];let S=cD(n,s,"data");return w&&x.size>0&&S.searchParams.set("_routes",e.filter(E=>x.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[s,l,r,a,h,e,n,i]),m=K.useMemo(()=>pD(d,a),[d,a]),g=wD(d);return K.createElement(K.Fragment,null,v.map(x=>K.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),m.map(x=>K.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),g.map(({key:x,link:w})=>K.createElement("link",{key:x,nonce:t.nonce,...w})))}function ED(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var L2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{L2&&(window.__reactRouterVersion="7.9.4")}catch{}function TU({basename:n,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=fT({window:t,v5Compat:!0}));let a=r.current,[i,s]=K.useState({action:a.action,location:a.location}),l=K.useCallback(c=>{K.startTransition(()=>s(c))},[s]);return K.useLayoutEffect(()=>a.listen(l),[a,l]),K.createElement(eD,{basename:n,children:e,location:i.location,navigationType:i.action,navigator:a})}var z2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P2=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:i,replace:s,state:l,target:c,to:h,preventScrollReset:d,viewTransition:v,...m},g){let{basename:x}=K.useContext(na),w=typeof h=="string"&&z2.test(h),S,E=!1;if(typeof h=="string"&&w&&(S=h,L2))try{let N=new URL(window.location.href),I=h.startsWith("//")?new URL(N.protocol+h):new URL(h),U=ka(I.pathname,x);I.origin===N.origin&&U!=null?h=U+I.search+I.hash:E=!0}catch{kr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=zT(h,{relative:a}),[R,A,C]=bD(r,m),D=AD(h,{replace:s,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:v});function O(N){e&&e(N),N.defaultPrevented||D(N)}let F=K.createElement("a",{...m,...C,href:S||_,onClick:E||i?e:O,ref:ED(g,A),target:c,"data-discover":!w&&t==="render"?"true":void 0});return R&&!w?K.createElement(K.Fragment,null,F,K.createElement(xD,{page:_})):F});P2.displayName="Link";var _D=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:i,to:s,viewTransition:l,children:c,...h},d){let v=al(s,{relative:h.relative}),m=wi(),g=K.useContext(Wf),{navigator:x,basename:w}=K.useContext(na),S=g!=null&&ND(v)&&l===!0,E=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,_=m.pathname,R=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(_=_.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&w&&(R=ka(R,w)||R);const A=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let C=_===E||!a&&_.startsWith(E)&&_.charAt(A)==="/",D=R!=null&&(R===E||!a&&R.startsWith(E)&&R.charAt(E.length)==="/"),O={isActive:C,isPending:D,isTransitioning:S},F=C?e:void 0,N;typeof r=="function"?N=r(O):N=[r,C?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(O):i;return K.createElement(P2,{...h,"aria-current":F,className:N,ref:d,style:I,to:s,viewTransition:l},typeof c=="function"?c(O):c)});_D.displayName="NavLink";var CD=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:i,method:s=uf,action:l,onSubmit:c,relative:h,preventScrollReset:d,viewTransition:v,...m},g)=>{let x=OD(),w=kD(l,{relative:h}),S=s.toLowerCase()==="get"?"get":"post",E=typeof l=="string"&&z2.test(l),_=R=>{if(c&&c(R),R.defaultPrevented)return;R.preventDefault();let A=R.nativeEvent.submitter,C=A?.getAttribute("formmethod")||s;x(A||R.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:a,state:i,relative:h,preventScrollReset:d,viewTransition:v})};return K.createElement("form",{ref:g,method:S,action:w,onSubmit:r?c:_,...m,"data-discover":!E&&n==="render"?"true":void 0})});CD.displayName="Form";function RD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U2(n){let e=K.useContext(Ru);return Ct(e,RD(n)),e}function AD(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:s}={}){let l=N2(),c=wi(),h=al(n,{relative:i});return K.useCallback(d=>{if(iD(d,e)){d.preventDefault();let v=t!==void 0?t:Ps(c)===Ps(h);l(n,{replace:v,state:r,preventScrollReset:a,relative:i,viewTransition:s})}},[c,l,h,t,r,e,n,a,i,s])}function DU(n){kr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=K.useRef(Sv(n)),t=K.useRef(!1),r=wi(),a=K.useMemo(()=>oD(r.search,t.current?null:e.current),[r.search]),i=N2(),s=K.useCallback((l,c)=>{const h=Sv(typeof l=="function"?l(new URLSearchParams(a)):l);t.current=!0,i("?"+h,c)},[i,a]);return[a,s]}var TD=0,DD=()=>`__${String(++TD)}__`;function OD(){let{router:n}=U2("useSubmit"),{basename:e}=K.useContext(na),t=$T();return K.useCallback(async(r,a={})=>{let{action:i,method:s,encType:l,formData:c,body:h}=lD(r,e);if(a.navigate===!1){let d=a.fetcherKey||DD();await n.fetch(d,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:h,formMethod:a.method||s,formEncType:a.encType||l,flushSync:a.flushSync})}else await n.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:h,formMethod:a.method||s,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function kD(n,{relative:e}={}){let{basename:t}=K.useContext(na),r=K.useContext(Ma);Ct(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...al(n||".",{relative:e})},s=wi();if(n==null){i.search=s.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(v=>v).forEach(v=>l.append("index",v));let d=l.toString();i.search=d?`?${d}`:""}}return(!n||n===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Oa([t,i.pathname])),Ps(i)}function ND(n,{relative:e}={}){let t=K.useContext(D2);Ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=U2("useViewTransitionState"),a=al(n,{relative:e});if(!t.isTransitioning)return!1;let i=ka(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=ka(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ff(a.pathname,s)!=null||ff(a.pathname,i)!=null}function MD(n={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}=n,[a,i]=K.useState(!1),s=K.useRef(t);s.current=t;const l=K.useRef(r);return l.current=r,K.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var h;i(!0),(h=s.current)===null||h===void 0||h.call(s)},c.onerror=()=>{var h;i(!1),(h=l.current)===null||h===void 0||h.call(l)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),a}const H2=K.createContext(null);function OU({clientId:n,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r,children:a}){const i=MD({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}),s=K.useMemo(()=>({clientId:n,scriptLoadedSuccessfully:i}),[n,i]);return iu.createElement(H2.Provider,{value:s},a)}function ID(){const n=K.useContext(H2);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function kU({flow:n="implicit",scope:e="",onSuccess:t,onError:r,onNonOAuthError:a,overrideScope:i,state:s,...l}){const{clientId:c,scriptLoadedSuccessfully:h}=ID(),d=K.useRef(),v=K.useRef(t);v.current=t;const m=K.useRef(r);m.current=r;const g=K.useRef(a);g.current=a,K.useEffect(()=>{var S,E;if(!h)return;const _=n==="implicit"?"initTokenClient":"initCodeClient",R=(E=(S=window?.google)===null||S===void 0?void 0:S.accounts)===null||E===void 0?void 0:E.oauth2[_]({client_id:c,scope:i?e:`openid profile email ${e}`,callback:A=>{var C,D;if(A.error)return(C=m.current)===null||C===void 0?void 0:C.call(m,A);(D=v.current)===null||D===void 0||D.call(v,A)},error_callback:A=>{var C;(C=g.current)===null||C===void 0||C.call(g,A)},state:s,...l});d.current=R},[c,h,n,e,s]);const x=K.useCallback(S=>{var E;return(E=d.current)===null||E===void 0?void 0:E.requestAccessToken(S)},[]),w=K.useCallback(()=>{var S;return(S=d.current)===null||S===void 0?void 0:S.requestCode()},[]);return n==="implicit"?x:w}var Au=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},FD={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},BD=class{#e=FD;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},Ki=new BD;function LD(n){setTimeout(n,0)}var Ji=typeof window>"u"||"Deno"in globalThis;function En(){}function zD(n,e){return typeof n=="function"?n(e):n}function Ev(n){return typeof n=="number"&&n>=0&&n!==1/0}function V2(n,e){return Math.max(n+(e||0)-Date.now(),0)}function mi(n,e){return typeof n=="function"?n(e):n}function mr(n,e){return typeof n=="function"?n(e):n}function cx(n,e){const{type:t="all",exact:r,fetchStatus:a,predicate:i,queryKey:s,stale:l}=n;if(s){if(r){if(e.queryHash!==Sm(s,e.options))return!1}else if(!Us(e.queryKey,s))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||a&&a!==e.state.fetchStatus||i&&!i(e))}function fx(n,e){const{exact:t,status:r,predicate:a,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(eo(e.options.mutationKey)!==eo(i))return!1}else if(!Us(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function Sm(n,e){return(e?.queryKeyHashFn||eo)(n)}function eo(n){return JSON.stringify(n,(e,t)=>_v(t)?Object.keys(t).sort().reduce((r,a)=>(r[a]=t[a],r),{}):t)}function Us(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Us(n[t],e[t])):!1}var PD=Object.prototype.hasOwnProperty;function j2(n,e){if(n===e)return n;const t=hx(n)&&hx(e);if(!t&&!(_v(n)&&_v(e)))return e;const a=(t?n:Object.keys(n)).length,i=t?e:Object.keys(e),s=i.length,l=t?new Array(s):{};let c=0;for(let h=0;h<s;h++){const d=t?h:i[h],v=n[d],m=e[d];if(v===m){l[d]=v,(t?h<a:PD.call(n,d))&&c++;continue}if(v===null||m===null||typeof v!="object"||typeof m!="object"){l[d]=m;continue}const g=j2(v,m);l[d]=g,g===v&&c++}return a===s&&c===a?n:l}function hf(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function hx(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function _v(n){if(!dx(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!dx(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function dx(n){return Object.prototype.toString.call(n)==="[object Object]"}function UD(n){return new Promise(e=>{Ki.setTimeout(e,n)})}function Cv(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?j2(n,e):e}function HD(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function VD(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Em=Symbol();function W2(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===Em?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function G2(n,e){return typeof n=="function"?n(...e):!!n}var jD=class extends Au{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!Ji&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},_m=new jD;function Rv(){let n,e;const t=new Promise((a,i)=>{n=a,e=i});t.status="pending",t.catch(()=>{});function r(a){Object.assign(t,a),delete t.resolve,delete t.reject}return t.resolve=a=>{r({status:"fulfilled",value:a}),n(a)},t.reject=a=>{r({status:"rejected",reason:a}),e(a)},t}var WD=LD;function GD(){let n=[],e=0,t=l=>{l()},r=l=>{l()},a=WD;const i=l=>{e?n.push(l):a(()=>{t(l)})},s=()=>{const l=n;n=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||s()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var Wt=GD(),qD=class extends Au{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!Ji&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},df=new qD;function KD(n){return Math.min(1e3*2**n,3e4)}function q2(n){return(n??"online")==="online"?df.isOnline():!0}var Av=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function K2(n){let e=!1,t=0,r;const a=Rv(),i=()=>a.status!=="pending",s=w=>{if(!i()){const S=new Av(w);m(S),n.onCancel?.(S)}},l=()=>{e=!0},c=()=>{e=!1},h=()=>_m.isFocused()&&(n.networkMode==="always"||df.isOnline())&&n.canRun(),d=()=>q2(n.networkMode)&&n.canRun(),v=w=>{i()||(r?.(),a.resolve(w))},m=w=>{i()||(r?.(),a.reject(w))},g=()=>new Promise(w=>{r=S=>{(i()||h())&&w(S)},n.onPause?.()}).then(()=>{r=void 0,i()||n.onContinue?.()}),x=()=>{if(i())return;let w;const S=t===0?n.initialPromise:void 0;try{w=S??n.fn()}catch(E){w=Promise.reject(E)}Promise.resolve(w).then(v).catch(E=>{if(i())return;const _=n.retry??(Ji?0:3),R=n.retryDelay??KD,A=typeof R=="function"?R(t,E):R,C=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,E);if(e||!C){m(E);return}t++,n.onFail?.(t,E),UD(A).then(()=>h()?void 0:g()).then(()=>{e?m(E):x()})})};return{promise:a,status:()=>a.status,cancel:s,continue:()=>(r?.(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():g().then(x),a)}}var X2=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ev(this.gcTime)&&(this.#e=Ki.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ji?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(Ki.clearTimeout(this.#e),this.#e=void 0)}},XD=class extends X2{#e;#t;#n;#a;#r;#o;#u;constructor(n){super(),this.#u=!1,this.#o=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#a=n.client,this.#n=this.#a.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=px(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(n){if(this.options={...this.#o,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=px(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,e){const t=Cv(this.state.data,n,this.options);return this.#i({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#i({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#r?.promise;return this.#r?.cancel(n),e?e.then(En).catch(En):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>mr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Em||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>mi(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!V2(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#r&&(this.#u?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(n,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(n&&this.setOptions(n),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const t=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#u=!0,t.signal)})},a=()=>{const l=W2(this.options,e),h=(()=>{const d={client:this.#a,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#u=!1,this.options.persister?this.options.persister(l,h,this):l(h)},s=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:a};return r(l),l})();this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#i({type:"fetch",meta:s.fetchOptions?.meta}),this.#r=K2({initialPromise:e?.initialPromise,fn:s.fetchFn,onCancel:l=>{l instanceof Av&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),t.abort()},onFail:(l,c)=>{this.#i({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0});try{const l=await this.#r.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Av){if(l.silent)return this.#r.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#i({type:"error",error:l}),this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#i(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...$2(t.data,this.options),fetchMeta:n.meta??null};case"success":const r={...t,data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=n.manual?r:void 0,r;case"error":const a=n.error;return{...t,error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),Wt.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function $2(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:q2(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function px(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var $D=class extends Au{constructor(n,e){super(),this.options=e,this.#e=n,this.#i=null,this.#u=Rv(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#a=void 0;#r;#o;#u;#i;#v;#h;#d;#l;#c;#s;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),vx(this.#t,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Tv(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Tv(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof mr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),e._defaulted&&!hf(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&mx(this.#t,t,this.options,e)&&this.#f(),this.updateResult(),r&&(this.#t!==t||mr(this.options.enabled,this.#t)!==mr(e.enabled,this.#t)||mi(this.options.staleTime,this.#t)!==mi(e.staleTime,this.#t))&&this.#m();const a=this.#g();r&&(this.#t!==t||mr(this.options.enabled,this.#t)!==mr(e.enabled,this.#t)||a!==this.#s)&&this.#y(a)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return YD(this,t)&&(this.#a=t,this.#o=this.options,this.#r=this.#t.state),t}getCurrentResult(){return this.#a}trackResult(n,e){return new Proxy(n,{get:(t,r)=>(this.trackProp(r),e?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#u.status==="pending"&&this.#u.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,r))})}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#f({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#f(n){this.#S();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(En)),e}#m(){this.#x();const n=mi(this.options.staleTime,this.#t);if(Ji||this.#a.isStale||!Ev(n))return;const t=V2(this.#a.dataUpdatedAt,n)+1;this.#l=Ki.setTimeout(()=>{this.#a.isStale||this.updateResult()},t)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(n){this.#w(),this.#s=n,!(Ji||mr(this.options.enabled,this.#t)===!1||!Ev(this.#s)||this.#s===0)&&(this.#c=Ki.setInterval(()=>{(this.options.refetchIntervalInBackground||_m.isFocused())&&this.#f()},this.#s))}#b(){this.#m(),this.#y(this.#g())}#x(){this.#l&&(Ki.clearTimeout(this.#l),this.#l=void 0)}#w(){this.#c&&(Ki.clearInterval(this.#c),this.#c=void 0)}createResult(n,e){const t=this.#t,r=this.options,a=this.#a,i=this.#r,s=this.#o,c=n!==t?n.state:this.#n,{state:h}=n;let d={...h},v=!1,m;if(e._optimisticResults){const F=this.hasListeners(),N=!F&&vx(n,e),I=F&&mx(n,t,e,r);(N||I)&&(d={...d,...$2(h.data,n.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:w}=d;m=d.data;let S=!1;if(e.placeholderData!==void 0&&m===void 0&&w==="pending"){let F;a?.isPlaceholderData&&e.placeholderData===s?.placeholderData?(F=a.data,S=!0):F=typeof e.placeholderData=="function"?e.placeholderData(this.#d?.state.data,this.#d):e.placeholderData,F!==void 0&&(w="success",m=Cv(a?.data,F,e),v=!0)}if(e.select&&m!==void 0&&!S)if(a&&m===i?.data&&e.select===this.#v)m=this.#h;else try{this.#v=e.select,m=e.select(m),m=Cv(a?.data,m,e),this.#h=m,this.#i=null}catch(F){this.#i=F}this.#i&&(g=this.#i,m=this.#h,x=Date.now(),w="error");const E=d.fetchStatus==="fetching",_=w==="pending",R=w==="error",A=_&&E,C=m!==void 0,O={status:w,fetchStatus:d.fetchStatus,isPending:_,isSuccess:w==="success",isError:R,isInitialLoading:A,isLoading:A,data:m,dataUpdatedAt:d.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:E,isRefetching:E&&!_,isLoadingError:R&&!C,isPaused:d.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:R&&C,isStale:Cm(n,e),refetch:this.refetch,promise:this.#u,isEnabled:mr(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const F=U=>{O.status==="error"?U.reject(O.error):O.data!==void 0&&U.resolve(O.data)},N=()=>{const U=this.#u=O.promise=Rv();F(U)},I=this.#u;switch(I.status){case"pending":n.queryHash===t.queryHash&&F(I);break;case"fulfilled":(O.status==="error"||O.data!==I.value)&&N();break;case"rejected":(O.status!=="error"||O.error!==I.reason)&&N();break}}return O}updateResult(){const n=this.#a,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#d=this.#t),hf(e,n))return;this.#a=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#p.size)return!0;const i=new Set(a??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(s=>{const l=s;return this.#a[l]!==n[l]&&i.has(l)})};this.#E({listeners:t()})}#S(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#E(n){Wt.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ZD(n,e){return mr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function vx(n,e){return ZD(n,e)||n.state.data!==void 0&&Tv(n,e,e.refetchOnMount)}function Tv(n,e,t){if(mr(e.enabled,n)!==!1&&mi(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Cm(n,e)}return!1}function mx(n,e,t,r){return(n!==e||mr(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Cm(n,t)}function Cm(n,e){return mr(e.enabled,n)!==!1&&n.isStaleByTime(mi(e.staleTime,n))}function YD(n,e){return!hf(n.getCurrentResult(),e)}function gx(n){return{onFetch:(e,t)=>{const r=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,i=e.state.data?.pages||[],s=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const h=async()=>{let d=!1;const v=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?d=!0:e.signal.addEventListener("abort",()=>{d=!0}),e.signal)})},m=W2(e.options,e.fetchOptions),g=async(x,w,S)=>{if(d)return Promise.reject();if(w==null&&x.pages.length)return Promise.resolve(x);const _=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:w,direction:S?"backward":"forward",meta:e.options.meta};return v(D),D})(),R=await m(_),{maxPages:A}=e.options,C=S?VD:HD;return{pages:C(x.pages,R,A),pageParams:C(x.pageParams,w,A)}};if(a&&i.length){const x=a==="backward",w=x?QD:yx,S={pages:i,pageParams:s},E=w(r,S);l=await g(S,E,x)}else{const x=n??i.length;do{const w=c===0?s[0]??r.initialPageParam:yx(r,l);if(c>0&&w==null)break;l=await g(l,w),c++}while(c<x)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=h}}}function yx(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function QD(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var JD=class extends X2{#e;#t;#n;#a;constructor(n){super(),this.#e=n.client,this.mutationId=n.mutationId,this.#n=n.mutationCache,this.#t=[],this.state=n.state||Z2(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#t.includes(n)||(this.#t.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#t=this.#t.filter(e=>e!==n),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(n){const e=()=>{this.#r({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=K2({fn:()=>this.options.mutationFn?this.options.mutationFn(n,t):Promise.reject(new Error("No mutationFn found")),onFail:(i,s)=>{this.#r({type:"failed",failureCount:i,error:s})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",a=!this.#a.canStart();try{if(r)e();else{this.#r({type:"pending",variables:n,isPaused:a}),await this.#n.config.onMutate?.(n,this,t);const s=await this.options.onMutate?.(n,t);s!==this.state.context&&this.#r({type:"pending",context:s,variables:n,isPaused:a})}const i=await this.#a.start();return await this.#n.config.onSuccess?.(i,n,this.state.context,this,t),await this.options.onSuccess?.(i,n,this.state.context,t),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(i,null,n,this.state.context,t),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#n.config.onError?.(i,n,this.state.context,this,t),await this.options.onError?.(i,n,this.state.context,t),await this.#n.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(void 0,i,n,this.state.context,t),i}finally{this.#r({type:"error",error:i})}}finally{this.#n.runNext(this)}}#r(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Wt.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(n)}),this.#n.notify({mutation:this,type:"updated",action:n})})}};function Z2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var eO=class extends Au{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const r=new JD({client:n,mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){this.#e.add(n);const e=Fc(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=Fc(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const r=t.indexOf(n);r!==-1&&t.splice(r,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=Fc(n);if(typeof e=="string"){const r=this.#t.get(e)?.find(a=>a.state.status==="pending");return!r||r===n}else return!0}runNext(n){const e=Fc(n);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==n&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Wt.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>fx(e,t))}findAll(n={}){return this.getAll().filter(e=>fx(n,e))}notify(n){Wt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Wt.batch(()=>Promise.all(n.map(e=>e.continue().catch(En))))}};function Fc(n){return n.options.scope?.id}var tO=class extends Au{#e;#t=void 0;#n;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),hf(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&eo(t.mutationKey)!==eo(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#o()}mutate(e,t){return this.#a=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??Z2();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){Wt.batch(()=>{if(this.#a&&this.hasListeners()){const t=this.#t.variables,r=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#a.onSuccess?.(e.data,t,r,a),this.#a.onSettled?.(e.data,null,t,r,a)):e?.type==="error"&&(this.#a.onError?.(e.error,t,r,a),this.#a.onSettled?.(void 0,e.error,t,r,a))}this.listeners.forEach(t=>{t(this.#t)})})}},nO=class extends Au{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,a=e.queryHash??Sm(r,e);let i=this.get(a);return i||(i=new XD({client:n,queryKey:r,queryHash:a,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(i)),i}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Wt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>cx(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>cx(n,t)):e}notify(n){Wt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Wt.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Wt.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},MU=class{#e;#t;#n;#a;#r;#o;#u;#i;constructor(n={}){this.#e=n.queryCache||new nO,this.#t=n.mutationCache||new eO,this.#n=n.defaultOptions||{},this.#a=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#u=_m.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=df.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#u?.(),this.#u=void 0,this.#i?.(),this.#i=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(mi(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=this.#e.get(r.queryHash)?.state.data,s=zD(e,i);if(s!==void 0)return this.#e.build(this,r).setData(s,{...t,manual:!0})}setQueriesData(n,e,t){return Wt.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Wt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return Wt.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Wt.batch(()=>this.#e.findAll(n).map(a=>a.cancel(t)));return Promise.all(r).then(En).catch(En)}invalidateQueries(n,e={}){return Wt.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Wt.batch(()=>this.#e.findAll(n).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,t);return t.throwOnError||(i=i.catch(En)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(En)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(mi(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(En).catch(En)}fetchInfiniteQuery(n){return n.behavior=gx(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(En).catch(En)}ensureInfiniteQueryData(n){return n.behavior=gx(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return df.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#a.set(eo(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#a.values()],t={};return e.forEach(r=>{Us(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){this.#r.set(eo(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(r=>{Us(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Sm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Em&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Y2=K.createContext(void 0),Q2=n=>{const e=K.useContext(Y2);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},IU=({client:n,children:e})=>(K.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),mu.jsx(Y2.Provider,{value:n,children:e})),J2=K.createContext(!1),rO=()=>K.useContext(J2);J2.Provider;function aO(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var iO=K.createContext(aO()),oO=()=>K.useContext(iO),uO=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},sO=n=>{K.useEffect(()=>{n.clearReset()},[n])},lO=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:a})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(a&&n.data===void 0||G2(t,[n.error,r])),cO=n=>{if(n.suspense){const t=a=>a==="static"?a:Math.max(a??1e3,1e3),r=n.staleTime;n.staleTime=typeof r=="function"?(...a)=>t(r(...a)):t(r),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},fO=(n,e)=>n.isLoading&&n.isFetching&&!e,hO=(n,e)=>n?.suspense&&e.isPending,bx=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function dO(n,e,t){const r=rO(),a=oO(),i=Q2(),s=i.defaultQueryOptions(n);i.getDefaultOptions().queries?._experimental_beforeQuery?.(s),s._optimisticResults=r?"isRestoring":"optimistic",cO(s),uO(s,a),sO(a);const l=!i.getQueryCache().get(s.queryHash),[c]=K.useState(()=>new e(i,s)),h=c.getOptimisticResult(s),d=!r&&n.subscribed!==!1;if(K.useSyncExternalStore(K.useCallback(v=>{const m=d?c.subscribe(Wt.batchCalls(v)):En;return c.updateResult(),m},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),K.useEffect(()=>{c.setOptions(s)},[s,c]),hO(s,h))throw bx(s,c,a);if(lO({result:h,errorResetBoundary:a,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw h.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(s,h),s.experimental_prefetchInRender&&!Ji&&fO(h,r)&&(l?bx(s,c,a):i.getQueryCache().get(s.queryHash)?.promise)?.catch(En).finally(()=>{c.updateResult()}),s.notifyOnChangeProps?h:c.trackResult(h)}function FU(n,e){return dO(n,$D)}function BU(n,e){const t=Q2(),[r]=K.useState(()=>new tO(t,n));K.useEffect(()=>{r.setOptions(n)},[r,n]);const a=K.useSyncExternalStore(K.useCallback(s=>r.subscribe(Wt.batchCalls(s)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=K.useCallback((s,l)=>{r.mutate(s,l).catch(En)},[r]);if(a.error&&G2(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var LU=function(){return null};const pO=(n,e,t,r)=>{const a=[t,{code:e,...r||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(a,"warn","react-i18next::",!0);Zi(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...a):console?.warn&&console.warn(...a)},xx={},Dv=(n,e,t,r)=>{Zi(t)&&xx[t]||(Zi(t)&&(xx[t]=new Date),pO(n,e,t,r))},eS=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},Ov=(n,e,t)=>{n.loadNamespaces(e,eS(n,t))},wx=(n,e,t,r)=>{if(Zi(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return Ov(n,t,r);t.forEach(a=>{n.options.ns.indexOf(a)<0&&n.options.ns.push(a)}),n.loadLanguages(e,eS(n,r))},vO=(n,e,t={})=>!e.languages||!e.languages.length?(Dv(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,a)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,n))return!1}}),Zi=n=>typeof n=="string",mO=n=>typeof n=="object"&&n!==null,gO=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,yO={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},bO=n=>yO[n],xO=n=>n.replace(gO,bO);let kv={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:xO};const wO=(n={})=>{kv={...kv,...n}},SO=()=>kv;let tS;const EO=n=>{tS=n},_O=()=>tS,zU={type:"3rdParty",init(n){wO(n.options.react),EO(n)}},nS=K.createContext();class CO{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const RO=(n,e)=>{const t=K.useRef();return K.useEffect(()=>{t.current=n},[n,e]),t.current},rS=(n,e,t,r)=>n.getFixedT(e,t,r),AO=(n,e,t,r)=>K.useCallback(rS(n,e,t,r),[n,e,t,r]),PU=(n,e={})=>{const{i18n:t}=e,{i18n:r,defaultNS:a}=K.useContext(nS)||{},i=t||r||_O();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new CO),!i){Dv(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const A=(D,O)=>Zi(O)?O:mO(O)&&Zi(O.defaultValue)?O.defaultValue:Array.isArray(D)?D[D.length-1]:D,C=[A,{},!1];return C.t=A,C.i18n={},C.ready=!1,C}i.options.react?.wait&&Dv(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...SO(),...i.options.react,...e},{useSuspense:l,keyPrefix:c}=s;let h=a||i.options?.defaultNS;h=Zi(h)?[h]:h||["translation"],i.reportNamespaces.addUsedNamespaces?.(h);const d=(i.isInitialized||i.initializedStoreOnce)&&h.every(A=>vO(A,i,s)),v=AO(i,e.lng||null,s.nsMode==="fallback"?h:h[0],c),m=()=>v,g=()=>rS(i,e.lng||null,s.nsMode==="fallback"?h:h[0],c),[x,w]=K.useState(m);let S=h.join();e.lng&&(S=`${e.lng}${S}`);const E=RO(S),_=K.useRef(!0);K.useEffect(()=>{const{bindI18n:A,bindI18nStore:C}=s;_.current=!0,!d&&!l&&(e.lng?wx(i,e.lng,h,()=>{_.current&&w(g)}):Ov(i,h,()=>{_.current&&w(g)})),d&&E&&E!==S&&_.current&&w(g);const D=()=>{_.current&&w(g)};return A&&i?.on(A,D),C&&i?.store.on(C,D),()=>{_.current=!1,i&&A&&A?.split(" ").forEach(O=>i.off(O,D)),C&&i&&C.split(" ").forEach(O=>i.store.off(O,D))}},[i,S]),K.useEffect(()=>{_.current&&d&&w(m)},[i,c,d]);const R=[x,i,d];if(R.t=x,R.i18n=i,R.ready=d,d||!d&&!l)return R;throw new Promise(A=>{e.lng?wx(i,e.lng,h,()=>A()):Ov(i,h,()=>A())})};function UU({i18n:n,defaultNS:e,children:t}){const r=K.useMemo(()=>({i18n:n,defaultNS:e}),[n,e]);return K.createElement(nS.Provider,{value:r},t)}function TO(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Nv(n,e){return Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Nv(n,e)}function DO(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Nv(n,e)}function zp(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Bc={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Sx;function OO(){if(Sx)return Bc;Sx=1;var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Bc.format=s,Bc.parse=l;function s(v){if(!v||typeof v!="object")throw new TypeError("argument obj is required");var m=v.parameters,g=v.type;if(!g||!i.test(g))throw new TypeError("invalid type");var x=g;if(m&&typeof m=="object")for(var w,S=Object.keys(m).sort(),E=0;E<S.length;E++){if(w=S[E],!t.test(w))throw new TypeError("invalid parameter name");x+="; "+w+"="+h(m[w])}return x}function l(v){if(!v)throw new TypeError("argument string is required");var m=typeof v=="object"?c(v):v;if(typeof m!="string")throw new TypeError("argument string is required to be a string");var g=m.indexOf(";"),x=g!==-1?m.slice(0,g).trim():m.trim();if(!i.test(x))throw new TypeError("invalid media type");var w=new d(x.toLowerCase());if(g!==-1){var S,E,_;for(n.lastIndex=g;E=n.exec(m);){if(E.index!==g)throw new TypeError("invalid parameter format");g+=E[0].length,S=E[1].toLowerCase(),_=E[2],_.charCodeAt(0)===34&&(_=_.slice(1,-1),_.indexOf("\\")!==-1&&(_=_.replace(r,"$1"))),w.parameters[S]=_}if(g!==m.length)throw new TypeError("invalid parameter format")}return w}function c(v){var m;if(typeof v.getHeader=="function"?m=v.getHeader("content-type"):typeof v.headers=="object"&&(m=v.headers&&v.headers["content-type"]),typeof m!="string")throw new TypeError("content-type header is missing from object");return m}function h(v){var m=String(v);if(t.test(m))return m;if(m.length>0&&!e.test(m))throw new TypeError("invalid parameter value");return'"'+m.replace(a,"\\$1")+'"'}function d(v){this.parameters=Object.create(null),this.type=v}return Bc}var kO=OO(),eu=new Map,aS=function(e){return e.cloneNode(!0)},Ex=function(){return window.location.protocol==="file:"},iS=function(e,t,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&a.readyState===2){var i=a.getResponseHeader("Content-Type");if(!i)throw new Error("Content type not found");var s=kO.parse(i).type;if(!(s==="image/svg+xml"||s==="text/plain"))throw new Error("Invalid content type: ".concat(s))}if(a.readyState===4){if(a.status===404||a.responseXML===null)throw new Error(Ex()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(a.status===200||Ex()&&a.status===0)r(null,a);else throw new Error("There was a problem injecting the SVG: "+a.status+" "+a.statusText)}}catch(l){if(a.abort(),l instanceof Error)r(l,a);else throw l}},a.open("GET",e),a.withCredentials=t,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.send()},hi={},_x=function(e,t){hi[e]=hi[e]||[],hi[e].push(t)},NO=function(e){for(var t=function(s,l){setTimeout(function(){if(Array.isArray(hi[e])){var c=eu.get(e),h=hi[e][s];c instanceof SVGSVGElement&&h(null,aS(c)),c instanceof Error&&h(c),s===hi[e].length-1&&delete hi[e]}},0)},r=0,a=hi[e].length;r<a;r++)t(r)},MO=function(e,t,r){if(eu.has(e)){var a=eu.get(e);if(a===void 0){_x(e,r);return}if(a instanceof SVGSVGElement){r(null,aS(a));return}}eu.set(e,void 0),_x(e,r),iS(e,t,function(i,s){var l;i?eu.set(e,i):((l=s.responseXML)===null||l===void 0?void 0:l.documentElement)instanceof SVGSVGElement&&eu.set(e,s.responseXML.documentElement),NO(e)})},IO=function(e,t,r){iS(e,t,function(a,i){var s;a?r(a):((s=i.responseXML)===null||s===void 0?void 0:s.documentElement)instanceof SVGSVGElement&&r(null,i.responseXML.documentElement)})},FO=0,BO=function(){return++FO},Ur=[],Cx={},LO="http://www.w3.org/2000/svg",Pp="http://www.w3.org/1999/xlink",Rx=function(e,t,r,a,i,s,l){var c=e.getAttribute("data-src")||e.getAttribute("src");if(!c){l(new Error("Invalid data-src or src attribute"));return}if(Ur.indexOf(e)!==-1){Ur.splice(Ur.indexOf(e),1),e=null;return}Ur.push(e),e.setAttribute("src","");var h=a?MO:IO;h(c,i,function(d,v){if(!v){Ur.splice(Ur.indexOf(e),1),e=null,l(d);return}var m=e.getAttribute("id");m&&v.setAttribute("id",m);var g=e.getAttribute("title");g&&v.setAttribute("title",g);var x=e.getAttribute("width");x&&v.setAttribute("width",x);var w=e.getAttribute("height");w&&v.setAttribute("height",w);var S=Array.from(new Set(zp(zp(zp([],(v.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();v.setAttribute("class",S);var E=e.getAttribute("style");E&&v.setAttribute("style",E),v.setAttribute("data-src",c);var _=[].filter.call(e.attributes,function(q){return/^data-\w[\w-]*$/.test(q.name)});if(Array.prototype.forEach.call(_,function(q){q.name&&q.value&&v.setAttribute(q.name,q.value)}),r){var R={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},A,C,D,O,F;Object.keys(R).forEach(function(q){A=q,D=R[q],C=v.querySelectorAll(A+"[id]");for(var re=function(oe,de){O=C[oe].id,F=O+"-"+BO();var ve;Array.prototype.forEach.call(D,function(Ve){ve=v.querySelectorAll("["+Ve+'*="'+O+'"]');for(var $e=0,lt=ve.length;$e<lt;$e++){var ot=ve[$e].getAttribute(Ve);ot&&!ot.match(new RegExp('url\\("?#'+O+'"?\\)'))||ve[$e].setAttribute(Ve,"url(#"+F+")")}});for(var me=v.querySelectorAll("[*|href]"),ye=[],De=0,Te=me.length;De<Te;De++){var it=me[De].getAttributeNS(Pp,"href");it&&it.toString()==="#"+C[oe].id&&ye.push(me[De])}for(var Fe=0,Ye=ye.length;Fe<Ye;Fe++)ye[Fe].setAttributeNS(Pp,"href","#"+F);C[oe].id=F},ue=0,B=C.length;ue<B;ue++)re(ue)})}v.removeAttribute("xmlns:a");for(var N=v.querySelectorAll("script"),I=[],U,H,J=0,ee=N.length;J<ee;J++)H=N[J].getAttribute("type"),(!H||H==="application/ecmascript"||H==="application/javascript"||H==="text/javascript")&&(U=N[J].innerText||N[J].textContent,U&&I.push(U),v.removeChild(N[J]));if(I.length>0&&(t==="always"||t==="once"&&!Cx[c])){for(var ne=0,z=I.length;ne<z;ne++)new Function(I[ne])(window);Cx[c]=!0}var W=v.querySelectorAll("style");if(Array.prototype.forEach.call(W,function(q){q.textContent+=""}),v.setAttribute("xmlns",LO),v.setAttribute("xmlns:xlink",Pp),s(v),!e.parentNode){Ur.splice(Ur.indexOf(e),1),e=null,l(new Error("Parent node is null"));return}e.parentNode.replaceChild(v,e),Ur.splice(Ur.indexOf(e),1),e=null,l(null,v)})},zO=function(e,t){var r=t===void 0?{}:t,a=r.afterAll,i=a===void 0?function(){}:a,s=r.afterEach,l=s===void 0?function(){}:s,c=r.beforeEach,h=c===void 0?function(){}:c,d=r.cacheRequests,v=d===void 0?!0:d,m=r.evalScripts,g=m===void 0?"never":m,x=r.httpRequestWithCredentials,w=x===void 0?!1:x,S=r.renumerateIRIElements,E=S===void 0?!0:S;if(e&&"length"in e)for(var _=0,R=0,A=e.length;R<A;R++)Rx(e[R],g,E,v,w,h,function(C,D){l(C,D),e&&"length"in e&&e.length===++_&&i(_)});else e?Rx(e,g,E,v,w,h,function(C,D){l(C,D),i(1),e=null}):i(0)},Up={exports:{}},Hp,Ax;function PO(){if(Ax)return Hp;Ax=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Hp=n,Hp}var Vp,Tx;function UO(){if(Tx)return Vp;Tx=1;var n=PO();function e(){}function t(){}return t.resetWarningCache=e,Vp=function(){function r(s,l,c,h,d,v){if(v!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},Vp}var Dx;function HO(){return Dx||(Dx=1,Up.exports=UO()()),Up.exports}var Vt=HO(),VO=function(e){var t=e?.ownerDocument||document;return t.defaultView||window},jO=function(e,t){for(var r in e)if(!(r in t))return!0;for(var a in t)if(e[a]!==t[a])return!0;return!1},WO=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],Lc="http://www.w3.org/2000/svg",Ox="http://www.w3.org/1999/xlink",oS=function(n){function e(){for(var r,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=n.call.apply(n,[this].concat(i))||this,r.initialState={hasError:!1,isLoading:!0},r.state=r.initialState,r._isMounted=!1,r.reactWrapper=void 0,r.nonReactWrapper=void 0,r.refCallback=function(l){r.reactWrapper=l},r}DO(e,n);var t=e.prototype;return t.renderSVG=function(){var a=this;if(this.reactWrapper instanceof VO(this.reactWrapper).Node){var i=this.props,s=i.desc,l=i.evalScripts,c=i.httpRequestWithCredentials,h=i.renumerateIRIElements,d=i.src,v=i.title,m=i.useRequestCache,g=this.props.onError,x=this.props.beforeInjection,w=this.props.afterInjection,S=this.props.wrapper,E,_;S==="svg"?(E=document.createElementNS(Lc,S),E.setAttribute("xmlns",Lc),E.setAttribute("xmlns:xlink",Ox),_=document.createElementNS(Lc,S)):(E=document.createElement(S),_=document.createElement(S)),E.appendChild(_),_.dataset.src=d,this.nonReactWrapper=this.reactWrapper.appendChild(E);var R=function(O){if(a.removeSVG(),!a._isMounted){g(O);return}a.setState(function(){return{hasError:!0,isLoading:!1}},function(){g(O)})},A=function(O,F){if(O){R(O);return}a._isMounted&&a.setState(function(){return{isLoading:!1}},function(){try{w(F)}catch(N){R(N)}})},C=function(O){if(O.setAttribute("role","img"),s){var F=O.querySelector(":scope > desc");F&&O.removeChild(F);var N=document.createElement("desc");N.innerHTML=s,O.prepend(N)}if(v){var I=O.querySelector(":scope > title");I&&O.removeChild(I);var U=document.createElement("title");U.innerHTML=v,O.prepend(U)}try{x(O)}catch(H){R(H)}};zO(_,{afterEach:A,beforeEach:C,cacheRequests:m,evalScripts:l,httpRequestWithCredentials:c,renumerateIRIElements:h})}},t.removeSVG=function(){var a;(a=this.nonReactWrapper)!=null&&a.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},t.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},t.componentDidUpdate=function(a){var i=this;jO(yu({},a),this.props)&&this.setState(function(){return i.initialState},function(){i.removeSVG(),i.renderSVG()})},t.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},t.render=function(){var a=this.props;a.afterInjection,a.beforeInjection,a.desc,a.evalScripts;var i=a.fallback;a.httpRequestWithCredentials;var s=a.loading;a.renumerateIRIElements,a.src,a.title,a.useRequestCache;var l=a.wrapper,c=TO(a,WO),h=l;return K.createElement(h,yu({},c,{ref:this.refCallback},l==="svg"?{xmlns:Lc,xmlnsXlink:Ox}:{}),this.state.isLoading&&s&&K.createElement(s,null),this.state.hasError&&i&&K.createElement(i,null))},e}(K.Component);oS.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};oS.propTypes={afterInjection:Vt.func,beforeInjection:Vt.func,desc:Vt.string,evalScripts:Vt.oneOf(["always","once","never"]),fallback:Vt.oneOfType([Vt.func,Vt.object,Vt.string]),httpRequestWithCredentials:Vt.bool,loading:Vt.oneOfType([Vt.func,Vt.object,Vt.string]),onError:Vt.func,renumerateIRIElements:Vt.bool,src:Vt.string.isRequired,title:Vt.string,useRequestCache:Vt.bool,wrapper:Vt.oneOf(["div","span","svg"])};const Me=n=>typeof n=="string",Rs=()=>{let n,e;const t=new Promise((r,a)=>{n=r,e=a});return t.resolve=n,t.reject=e,t},kx=n=>n==null?"":""+n,GO=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},qO=/###/g,Nx=n=>n&&n.indexOf("###")>-1?n.replace(qO,"."):n,Mx=n=>!n||Me(n),Ns=(n,e,t)=>{const r=Me(e)?e.split("."):e;let a=0;for(;a<r.length-1;){if(Mx(n))return{};const i=Nx(r[a]);!n[i]&&t&&(n[i]=new t),Object.prototype.hasOwnProperty.call(n,i)?n=n[i]:n={},++a}return Mx(n)?{}:{obj:n,k:Nx(r[a])}},Ix=(n,e,t)=>{const{obj:r,k:a}=Ns(n,e,Object);if(r!==void 0||e.length===1){r[a]=t;return}let i=e[e.length-1],s=e.slice(0,e.length-1),l=Ns(n,s,Object);for(;l.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),l=Ns(n,s,Object),l?.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=t},KO=(n,e,t,r)=>{const{obj:a,k:i}=Ns(n,e,Object);a[i]=a[i]||[],a[i].push(t)},pf=(n,e)=>{const{obj:t,k:r}=Ns(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},XO=(n,e,t)=>{const r=pf(n,t);return r!==void 0?r:pf(e,t)},uS=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Me(n[r])||n[r]instanceof String||Me(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):uS(n[r],e[r],t):n[r]=e[r]);return n},$o=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var $O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ZO=n=>Me(n)?n.replace(/[&<>"'\/]/g,e=>$O[e]):n;class YO{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const QO=[" ",",","?","!",";"],JO=new YO(20),e3=(n,e,t)=>{e=e||"",t=t||"";const r=QO.filter(s=>e.indexOf(s)<0&&t.indexOf(s)<0);if(r.length===0)return!0;const a=JO.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let i=!a.test(n);if(!i){const s=n.indexOf(t);s>0&&!a.test(n.substring(0,s))&&(i=!0)}return i},Mv=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let a=n;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let s,l="";for(let c=i;c<r.length;++c)if(c!==i&&(l+=t),l+=r[c],s=a[l],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<r.length-1)continue;i+=c-i+1;break}a=s}return a},Hs=n=>n?.replace("_","-"),t3={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class vf{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||t3,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,a){return a&&!this.debug?null:(Me(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new vf(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new vf(this.logger,e)}}var Xr=new vf;class qf{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(t)||0;this.observers[r].set(t,a+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a.apply(a,[e,...t])})}}class Fx extends qf{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,a={}){const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,s=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],r&&(Array.isArray(r)?l.push(...r):Me(r)&&i?l.push(...r.split(i)):l.push(r)));const c=pf(this.data,l);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=l[0],t=l[1],r=l.slice(2).join(".")),c||!s||!Me(r)?c:Mv(this.data?.[e]?.[t],r,i)}addResource(e,t,r,a,i={silent:!1}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,t];r&&(l=l.concat(s?r.split(s):r)),e.indexOf(".")>-1&&(l=e.split("."),a=t,t=l[1]),this.addNamespaces(t),Ix(this.data,l,a),i.silent||this.emit("added",e,t,r,a)}addResources(e,t,r,a={silent:!1}){for(const i in r)(Me(r[i])||Array.isArray(r[i]))&&this.addResource(e,t,i,r[i],{silent:!0});a.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,a,i,s={silent:!1,skipCopy:!1}){let l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),a=r,r=t,t=l[1]),this.addNamespaces(t);let c=pf(this.data,l)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?uS(c,r,i):c={...c,...r},Ix(this.data,l,c),s.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(a=>t[a]&&Object.keys(t[a]).length>0)}toJSON(){return this.data}}var sS={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,a){return n.forEach(i=>{e=this.processors[i]?.process(e,t,r,a)??e}),e}};const lS=Symbol("i18next/PATH_KEY");function n3(){const n=[],e=Object.create(null);let t;return e.get=(r,a)=>(t?.revoke?.(),a===lS?n:(n.push(a),t=Proxy.revocable(r,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Iv(n,e){const{[lS]:t}=n(n3());return t.join(e?.keySeparator??".")}const Bx={},Lx=n=>!Me(n)&&typeof n!="boolean"&&typeof n!="number";class mf extends qf{constructor(e,t={}){super(),GO(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Xr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const s=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!e3(e,r,a);if(s&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Me(i)?[i]:i};const h=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),e=h.join(a)}return{key:e,namespaces:Me(i)?[i]:i}}translate(e,t,r){let a=typeof t=="object"?{...t}:t;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),e==null)return"";typeof e=="function"&&(e=Iv(e,{...this.options,...a})),Array.isArray(e)||(e=[String(e)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],a),h=c[c.length-1];let d=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const v=a.lng||this.language,m=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return m?i?{res:`${h}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:`${h}${d}${l}`:i?{res:l,usedKey:l,exactUsedKey:l,usedLng:v,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:l;const g=this.resolve(e,a);let x=g?.res;const w=g?.usedKey||l,S=g?.exactUsedKey||l,E=["[object Number]","[object Function]","[object RegExp]"],_=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,R=!this.i18nFormat||this.i18nFormat.handleAsObject,A=a.count!==void 0&&!Me(a.count),C=mf.hasDefaultValue(a),D=A?this.pluralResolver.getSuffix(v,a.count,a):"",O=a.ordinal&&A?this.pluralResolver.getSuffix(v,a.count,{ordinal:!1}):"",F=A&&!a.ordinal&&a.count===0,N=F&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${D}`]||a[`defaultValue${O}`]||a.defaultValue;let I=x;R&&!x&&C&&(I=N);const U=Lx(I),H=Object.prototype.toString.apply(I);if(R&&I&&U&&E.indexOf(H)<0&&!(Me(_)&&Array.isArray(I))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const J=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,I,{...a,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(g.res=J,g.usedParams=this.getUsedParamsDetails(a),g):J}if(s){const J=Array.isArray(I),ee=J?[]:{},ne=J?S:w;for(const z in I)if(Object.prototype.hasOwnProperty.call(I,z)){const W=`${ne}${s}${z}`;C&&!x?ee[z]=this.translate(W,{...a,defaultValue:Lx(N)?N[z]:void 0,joinArrays:!1,ns:c}):ee[z]=this.translate(W,{...a,joinArrays:!1,ns:c}),ee[z]===W&&(ee[z]=I[z])}x=ee}}else if(R&&Me(_)&&Array.isArray(x))x=x.join(_),x&&(x=this.extendTranslation(x,e,a,r));else{let J=!1,ee=!1;!this.isValidLookup(x)&&C&&(J=!0,x=N),this.isValidLookup(x)||(ee=!0,x=l);const z=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ee?void 0:x,W=C&&N!==x&&this.options.updateMissing;if(ee||J||W){if(this.logger.log(W?"updateKey":"missingKey",v,h,l,W?N:x),s){const B=this.resolve(l,{...a,keySeparator:!1});B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const re=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&re&&re[0])for(let B=0;B<re.length;B++)q.push(re[B]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(a.lng||this.language):q.push(a.lng||this.language);const ue=(B,X,oe)=>{const de=C&&oe!==x?oe:z;this.options.missingKeyHandler?this.options.missingKeyHandler(B,h,X,de,W,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(B,h,X,de,W,a),this.emit("missingKey",B,h,X,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?q.forEach(B=>{const X=this.pluralResolver.getSuffixes(B,a);F&&a[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(oe=>{ue([B],l+oe,a[`defaultValue${oe}`]||N)})}):ue(q,l,N))}x=this.extendTranslation(x,e,a,g,r),ee&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${h}${d}${l}`),(ee||J)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${d}${l}`:l,J?x:void 0,a))}return i?(g.res=x,g.usedParams=this.getUsedParamsDetails(a),g):x}extendTranslation(e,t,r,a,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=Me(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const v=e.match(this.interpolator.nestingRegexp);h=v&&v.length}let d=r.replace&&!Me(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||a.usedLng,r),c){const v=e.match(this.interpolator.nestingRegexp),m=v&&v.length;h<m&&(r.nest=!1)}!r.lng&&a&&a.res&&(r.lng=this.language||a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>i?.[0]===v[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=Me(s)?[s]:s;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=sS.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,a,i,s,l;return Me(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(c,t),d=h.key;a=d;let v=h.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const m=t.count!==void 0&&!Me(t.count),g=m&&!t.ordinal&&t.count===0,x=t.context!==void 0&&(Me(t.context)||typeof t.context=="number")&&t.context!=="",w=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(S=>{this.isValidLookup(r)||(l=S,!Bx[`${w[0]}-${S}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(Bx[`${w[0]}-${S}`]=!0,this.logger.warn(`key "${a}" for languages "${w.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(E=>{if(this.isValidLookup(r))return;s=E;const _=[d];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(_,d,E,S,t);else{let A;m&&(A=this.pluralResolver.getSuffix(E,t.count,t));const C=`${this.options.pluralSeparator}zero`,D=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(t.ordinal&&A.indexOf(D)===0&&_.push(d+A.replace(D,this.options.pluralSeparator)),_.push(d+A),g&&_.push(d+C)),x){const O=`${d}${this.options.contextSeparator||"_"}${t.context}`;_.push(O),m&&(t.ordinal&&A.indexOf(D)===0&&_.push(O+A.replace(D,this.options.pluralSeparator)),_.push(O+A),g&&_.push(O+C))}}let R;for(;R=_.pop();)this.isValidLookup(r)||(i=R,r=this.getResource(E,S,R,t))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:s,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,a):this.resourceStore.getResource(e,t,r,a)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Me(e.replace);let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of t)delete a[i]}return a}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class zx{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Xr.create("languageUtils")}getScriptPartFromCode(e){if(e=Hs(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Hs(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Me(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(t=a)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const a=this.getScriptPartFromCode(r);if(this.isSupportedCode(a))return t=a;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Me(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),a=[],i=s=>{s&&(this.isSupportedCode(s)?a.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return Me(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):Me(e)&&i(this.formatLanguageCode(e)),r.forEach(s=>{a.indexOf(s)<0&&i(this.formatLanguageCode(s))}),a}}const Px={zero:0,one:1,two:2,few:3,many:4,other:5},Ux={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class r3{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Xr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=Hs(e==="dev"?"en":e),a=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(r,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Ux;if(!e.match(/-|_/))return Ux;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,t)}return this.pluralRulesCache[i]=s,s}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(a=>`${t}${a}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((a,i)=>Px[a]-Px[i]).map(a=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,t,r={}){const a=this.getRule(e,r);return a?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const Hx=(n,e,t,r=".",a=!0)=>{let i=XO(n,e,t);return!i&&a&&Me(t)&&(i=Mv(n,t,r),i===void 0&&(i=Mv(e,t,r))),i},jp=n=>n.replace(/\$/g,"$$$$");class a3{constructor(e={}){this.logger=Xr.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:a,prefix:i,prefixEscaped:s,suffix:l,suffixEscaped:c,formatSeparator:h,unescapeSuffix:d,unescapePrefix:v,nestingPrefix:m,nestingPrefixEscaped:g,nestingSuffix:x,nestingSuffixEscaped:w,nestingOptionsSeparator:S,maxReplaces:E,alwaysFormat:_}=e.interpolation;this.escape=t!==void 0?t:ZO,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?$o(i):s||"{{",this.suffix=l?$o(l):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=d?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=m?$o(m):g||$o("$t("),this.nestingSuffix=x?$o(x):w||$o(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=E||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t?.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,a){let i,s,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=g=>{if(g.indexOf(this.formatSeparator)<0){const E=Hx(t,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,r,{...a,...t,interpolationkey:g}):E}const x=g.split(this.formatSeparator),w=x.shift().trim(),S=x.join(this.formatSeparator).trim();return this.format(Hx(t,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),S,r,{...a,...t,interpolationkey:w})};this.resetRegExp();const d=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>jp(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?jp(this.escape(g)):jp(g)}].forEach(g=>{for(l=0;i=g.regex.exec(e);){const x=i[1].trim();if(s=h(x),s===void 0)if(typeof d=="function"){const S=d(e,i,a);s=Me(S)?S:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))s="";else if(v){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),s="";else!Me(s)&&!this.useRawValueToEscape&&(s=kx(s));const w=g.safeValue(s);if(e=e.replace(i[0],w),v?(g.regex.lastIndex+=s.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t,r={}){let a,i,s;const l=(c,h)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const v=c.split(new RegExp(`${d}[ ]*{`));let m=`{${v[1]}`;c=v[0],m=this.interpolate(m,s);const g=m.match(/'/g),x=m.match(/"/g);((g?.length??0)%2===0&&!x||x.length%2!==0)&&(m=m.replace(/'/g,'"'));try{s=JSON.parse(m),h&&(s={...h,...s})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,w),`${c}${d}${m}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;a=this.nestingRegexp.exec(e);){let c=[];s={...r},s=s.replace&&!Me(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const h=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(h!==-1&&(c=a[1].slice(h).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),a[1]=a[1].slice(0,h)),i=t(l.call(this,a[1].trim(),s),s),i&&a[0]===e&&!Me(i))return i;Me(i)||(i=kx(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),c.length&&(i=c.reduce((d,v)=>this.format(d,v,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const i3=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?t.currency||(t.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?t.range||(t.range=a.trim()):a.split(";").forEach(s=>{if(s){const[l,...c]=s.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();t[d]||(t[d]=h),h==="false"&&(t[d]=!1),h==="true"&&(t[d]=!0),isNaN(h)||(t[d]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},Vx=n=>{const e={};return(t,r,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const s=r+JSON.stringify(i);let l=e[s];return l||(l=n(Hs(r),a),e[s]=l),l(t)}},o3=n=>(e,t,r)=>n(Hs(t),r)(e);class u3{constructor(e={}){this.logger=Xr.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?Vx:o3;this.formats={number:r((a,i)=>{const s=new Intl.NumberFormat(a,{...i});return l=>s.format(l)}),currency:r((a,i)=>{const s=new Intl.NumberFormat(a,{...i,style:"currency"});return l=>s.format(l)}),datetime:r((a,i)=>{const s=new Intl.DateTimeFormat(a,{...i});return l=>s.format(l)}),relativetime:r((a,i)=>{const s=new Intl.RelativeTimeFormat(a,{...i});return l=>s.format(l,i.range||"day")}),list:r((a,i)=>{const s=new Intl.ListFormat(a,{...i});return l=>s.format(l)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Vx(t)}format(e,t,r,a={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:h,formatOptions:d}=i3(c);if(this.formats[h]){let v=l;try{const m=a?.formatParams?.[a.interpolationkey]||{},g=m.locale||m.lng||a.locale||a.lng||r;v=this.formats[h](l,g,{...d,...a,...m})}catch(m){this.logger.warn(m)}return v}else this.logger.warn(`there was no format function for ${h}`);return l},e)}}const s3=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class l3 extends qf{constructor(e,t,r,a={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=Xr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,a.backend,a)}queueLoad(e,t,r,a){const i={},s={},l={},c={};return e.forEach(h=>{let d=!0;t.forEach(v=>{const m=`${h}|${v}`;!r.reload&&this.store.hasResourceBundle(h,v)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?s[m]===void 0&&(s[m]=!0):(this.state[m]=1,d=!1,s[m]===void 0&&(s[m]=!0),i[m]===void 0&&(i[m]=!0),c[v]===void 0&&(c[v]=!0)))}),d||(l[h]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const a=e.split("|"),i=a[0],s=a[1];t&&this.emit("failedLoading",i,s,t),!t&&r&&this.store.addResourceBundle(i,s,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const l={};this.queue.forEach(c=>{KO(c.loaded,[i],s),s3(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{l[h]||(l[h]={});const d=c.loaded[h];d.length&&d.forEach(v=>{l[h][v]===void 0&&(l[h][v]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r,a=0,i=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:a,wait:i,callback:s});return}this.readingCalls++;const l=(h,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(h&&d&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,a+1,i*2,s)},i);return}s(h,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(d=>l(null,d)).catch(l):l(null,h)}catch(h){l(h)}return}return c(e,t,l)}prepareLoading(e,t,r={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Me(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Me(t)&&(t=[t]);const i=this.queueLoad(e,t,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(s,l)=>{s&&this.logger.warn(`${t}loading namespace ${i} for language ${a} failed`,s),!s&&l&&this.logger.log(`${t}loaded namespace ${i} for language ${a}`,l),this.loaded(e,s,l)})}saveMissing(e,t,r,a,i,s={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...s,isUpdate:i},h=this.backend.create.bind(this.backend);if(h.length<6)try{let d;h.length===5?d=h(e,t,r,a,c):d=h(e,t,r,a),d&&typeof d.then=="function"?d.then(v=>l(null,v)).catch(l):l(null,d)}catch(d){l(d)}else h(e,t,r,a,l,c)}!e||!e[0]||this.store.addResource(e[0],t,r,a)}}}const jx=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Me(n[1])&&(e.defaultValue=n[1]),Me(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Wx=n=>(Me(n.ns)&&(n.ns=[n.ns]),Me(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Me(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),zc=()=>{},c3=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Vs extends qf{constructor(e={},t){if(super(),this.options=Wx(e),this.services={},this.logger=Xr,this.modules={external:[]},c3(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Me(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=jx();this.options={...r,...this.options,...Wx(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const a=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Xr.init(a(this.modules.logger),this.options):Xr.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=u3;const d=new zx(this.options);this.store=new Fx(this.options.resources,this.options);const v=this.services;v.logger=Xr,v.resourceStore=this.store,v.languageUtils=d,v.pluralResolver=new r3(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(v.formatter=a(h),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new a3(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new l3(a(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(g,...x)=>{this.emit(g,...x)}),this.modules.languageDetector&&(v.languageDetector=a(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=a(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new mf(this.services,this.options),this.translator.on("*",(g,...x)=>{this.emit(g,...x)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,t||(t=zc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...d)=>this.store[h](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...d)=>(this.store[h](...d),this)});const l=Rs(),c=()=>{const h=(d,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(v),t(d,v)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,t=zc){let r=t;const a=Me(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],s=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(h=>{h!=="cimode"&&i.indexOf(h)<0&&i.push(h)})};a?s(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(l=>s(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,t,r){const a=Rs();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=zc),this.services.backendConnector.reload(e,t,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&sS.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=Rs();this.emit("languageChanging",e);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,c)=>{c?this.isLanguageChangingTo===e&&(a(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),t&&t(l,(...h)=>this.t(...h))},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=Me(l)?l:l&&l[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Me(l)?[l]:l);h&&(this.language||a(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,d=>{i(d,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),r}getFixedT(e,t,r){const a=(i,s,...l)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([i,s].concat(l)):c={...s},c.lng=c.lng||a.lng,c.lngs=c.lngs||a.lngs,c.ns=c.ns||a.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||a.keyPrefix);const h=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(i)?d=i.map(v=>(typeof v=="function"&&(v=Iv(v,{...this.options,...s})),`${c.keyPrefix}${h}${v}`)):(typeof i=="function"&&(i=Iv(i,{...this.options,...s})),d=c.keyPrefix?`${c.keyPrefix}${h}${i}`:i),this.t(d,c)};return Me(e)?a.lng=e:a.lngs=e,a.ns=t,a.keyPrefix=r,a}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(l,c)=>{const h=this.services.backendConnector.state[`${l}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const l=t.precheck(this,s);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,e)&&(!a||s(i,e)))}loadNamespaces(e,t){const r=Rs();return this.options.ns?(Me(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Rs();Me(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(s=>a.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=a.concat(i),this.loadResources(s=>{r.resolve(),t&&t(s)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const i=a.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new zx(jx());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new Vs(e,t)}cloneInstance(e={},t=zc){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new Vs(a);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const l=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((d,v)=>(d[v]={...c[h][v]},d),c[h]),c),{});i.store=new Fx(l,a),i.services.resourceStore=i.store}return i.translator=new mf(i.services,a),i.translator.on("*",(l,...c)=>{i.emit(l,...c)}),i.init(a,t),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _n=Vs.createInstance();_n.createInstance=Vs.createInstance;_n.createInstance;_n.dir;_n.init;_n.loadResources;_n.reloadResources;_n.use;_n.changeLanguage;_n.getFixedT;_n.t;_n.exists;_n.setDefaultNamespace;_n.hasLoadedNamespace;_n.loadNamespaces;_n.loadLanguages;const Gx=n=>{let e;const t=new Set,r=(h,d)=>{const v=typeof h=="function"?h(e):h;if(!Object.is(v,e)){const m=e;e=d??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(g=>g(e,m))}},a=()=>e,l={setState:r,getState:a,getInitialState:()=>c,subscribe:h=>(t.add(h),()=>t.delete(h))},c=e=n(r,a,l);return l},f3=n=>n?Gx(n):Gx,h3=n=>n;function d3(n,e=h3){const t=iu.useSyncExternalStore(n.subscribe,iu.useCallback(()=>e(n.getState()),[n,e]),iu.useCallback(()=>e(n.getInitialState()),[n,e]));return iu.useDebugValue(t),t}const qx=n=>{const e=f3(n),t=r=>d3(e,r);return Object.assign(t,e),t},HU=n=>n?qx(n):qx;function p3(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var i;const s=c=>c===null?null:JSON.parse(c,void 0),l=(i=t.getItem(a))!=null?i:null;return l instanceof Promise?l.then(s):s(l)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>t.removeItem(a)}}const Fv=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return Fv(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return Fv(r)(t)}}}},v3=(n,e)=>(t,r,a)=>{let i={storage:p3(()=>localStorage),partialize:w=>w,version:0,merge:(w,S)=>({...S,...w}),...e},s=!1;const l=new Set,c=new Set;let h=i.storage;if(!h)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...w)},r,a);const d=()=>{const w=i.partialize({...r()});return h.setItem(i.name,{state:w,version:i.version})},v=a.setState;a.setState=(w,S)=>(v(w,S),d());const m=n((...w)=>(t(...w),d()),r,a);a.getInitialState=()=>m;let g;const x=()=>{var w,S;if(!h)return;s=!1,l.forEach(_=>{var R;return _((R=r())!=null?R:m)});const E=((S=i.onRehydrateStorage)==null?void 0:S.call(i,(w=r())!=null?w:m))||void 0;return Fv(h.getItem.bind(h))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate){const R=i.migrate(_.state,_.version);return R instanceof Promise?R.then(A=>[!0,A]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var R;const[A,C]=_;if(g=i.merge(C,(R=r())!=null?R:m),t(g,!0),A)return d()}).then(()=>{E?.(g,void 0),g=r(),s=!0,c.forEach(_=>_(g))}).catch(_=>{E?.(void 0,_)})};return a.persist={setOptions:w=>{i={...i,...w},w.storage&&(h=w.storage)},clearStorage:()=>{h?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>s,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},i.skipHydration||x(),g||m},VU=v3;function pe(n,e,t){function r(l,c){var h;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(h=l._zod).traits??(h.traits=new Set),l._zod.traits.add(n),e(l,c);for(const d in s.prototype)d in l||Object.defineProperty(l,d,{value:s.prototype[d].bind(l)});l._zod.constr=s,l._zod.def=c}const a=t?.Parent??Object;class i extends a{}Object.defineProperty(i,"name",{value:n});function s(l){var c;const h=t?.Parent?new i:this;r(h,l),(c=h._zod).deferred??(c.deferred=[]);for(const d of h._zod.deferred)d();return h}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:l=>t?.Parent&&l instanceof t.Parent?!0:l?._zod?.traits?.has(n)}),Object.defineProperty(s,"name",{value:n}),s}class su extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class cS extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const m3={};function to(n){return m3}function Bv(n,e){return typeof e=="bigint"?e.toString():e}function Rm(n){return n==null}function Am(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}const Kx=Symbol("evaluating");function wt(n,e,t){let r;Object.defineProperty(n,e,{get(){if(r!==Kx)return r===void 0&&(r=Kx,r=t()),r},set(a){Object.defineProperty(n,e,{value:a})},configurable:!0})}function g3(...n){const e={};for(const t of n){const r=Object.getOwnPropertyDescriptors(t);Object.assign(e,r)}return Object.defineProperties({},e)}const fS="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function Xx(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Lv(n){if(Xx(n)===!1)return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(Xx(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function hS(n){return Lv(n)?{...n}:Array.isArray(n)?[...n]:n}function Tm(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y3(n,e,t){const r=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(r._zod.parent=n),r}function He(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function ou(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function b3(n,e){return e.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(n),t})}function Pc(n){return typeof n=="string"?n:n?.message}function no(n,e,t){const r={...n,path:n.path??[]};if(!n.message){const a=Pc(n.inst?._zod.def?.error?.(n))??Pc(e?.error?.(n))??Pc(t.customError?.(n))??Pc(t.localeError?.(n))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Dm(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function js(...n){const[e,t,r]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:r}:{...e}}const dS=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,Bv,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},pS=pe("$ZodError",dS),vS=pe("$ZodError",dS,{Parent:Error});function x3(n,e=t=>t.message){const t={},r=[];for(const a of n.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}function w3(n,e=t=>t.message){const t={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(s=>r({issues:s}));else if(i.code==="invalid_key")r({issues:i.issues});else if(i.code==="invalid_element")r({issues:i.issues});else if(i.path.length===0)t._errors.push(e(i));else{let s=t,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(e(i))):s[c]=s[c]||{_errors:[]},s=s[c],l++}}};return r(n),t}const Om=n=>(e,t,r,a)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:t,issues:[]},i);if(s instanceof Promise)throw new su;if(s.issues.length){const l=new(a?.Err??n)(s.issues.map(c=>no(c,i,to())));throw fS(l,a?.callee),l}return s.value},km=n=>async(e,t,r,a)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:t,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const l=new(a?.Err??n)(s.issues.map(c=>no(c,i,to())));throw fS(l,a?.callee),l}return s.value},Kf=n=>(e,t,r)=>{const a=r?{...r,async:!1}:{async:!1},i=e._zod.run({value:t,issues:[]},a);if(i instanceof Promise)throw new su;return i.issues.length?{success:!1,error:new(n??pS)(i.issues.map(s=>no(s,a,to())))}:{success:!0,data:i.value}},S3=Kf(vS),Xf=n=>async(e,t,r)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:t,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new n(i.issues.map(s=>no(s,a,to())))}:{success:!0,data:i.value}},E3=Xf(vS),_3=n=>(e,t,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Om(n)(e,t,a)},C3=n=>(e,t,r)=>Om(n)(e,t,r),R3=n=>async(e,t,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return km(n)(e,t,a)},A3=n=>async(e,t,r)=>km(n)(e,t,r),T3=n=>(e,t,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Kf(n)(e,t,a)},D3=n=>(e,t,r)=>Kf(n)(e,t,r),O3=n=>async(e,t,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Xf(n)(e,t,a)},k3=n=>async(e,t,r)=>Xf(n)(e,t,r),N3=/^[cC][^\s-]{8,}$/,M3=/^[0-9a-z]+$/,I3=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,F3=/^[0-9a-vA-V]{20}$/,B3=/^[A-Za-z0-9]{27}$/,L3=/^[a-zA-Z0-9_-]{21}$/,z3=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,P3=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,$x=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,U3=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,H3="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function V3(){return new RegExp(H3,"u")}const j3=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,W3=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,G3=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,q3=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,K3=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,mS=/^[A-Za-z0-9_-]*$/,X3=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,$3=/^\+(?:[0-9]){6,14}[0-9]$/,gS="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Z3=new RegExp(`^${gS}$`);function yS(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Y3(n){return new RegExp(`^${yS(n)}$`)}function Q3(n){const e=yS({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${t.join("|")})`;return new RegExp(`^${gS}T(?:${r})$`)}const J3=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},e4=/^[^A-Z]*$/,t4=/^[^a-z]*$/,ra=pe("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),n4=pe("$ZodCheckMaxLength",(n,e)=>{var t;ra.init(n,e),(t=n._zod.def).when??(t.when=r=>{const a=r.value;return!Rm(a)&&a.length!==void 0}),n._zod.onattach.push(r=>{const a=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<a&&(r._zod.bag.maximum=e.maximum)}),n._zod.check=r=>{const a=r.value;if(a.length<=e.maximum)return;const s=Dm(a);r.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:a,inst:n,continue:!e.abort})}}),r4=pe("$ZodCheckMinLength",(n,e)=>{var t;ra.init(n,e),(t=n._zod.def).when??(t.when=r=>{const a=r.value;return!Rm(a)&&a.length!==void 0}),n._zod.onattach.push(r=>{const a=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>a&&(r._zod.bag.minimum=e.minimum)}),n._zod.check=r=>{const a=r.value;if(a.length>=e.minimum)return;const s=Dm(a);r.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:a,inst:n,continue:!e.abort})}}),a4=pe("$ZodCheckLengthEquals",(n,e)=>{var t;ra.init(n,e),(t=n._zod.def).when??(t.when=r=>{const a=r.value;return!Rm(a)&&a.length!==void 0}),n._zod.onattach.push(r=>{const a=r._zod.bag;a.minimum=e.length,a.maximum=e.length,a.length=e.length}),n._zod.check=r=>{const a=r.value,i=a.length;if(i===e.length)return;const s=Dm(a),l=i>e.length;r.issues.push({origin:s,...l?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:n,continue:!e.abort})}}),$f=pe("$ZodCheckStringFormat",(n,e)=>{var t,r;ra.init(n,e),n._zod.onattach.push(a=>{const i=a._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=a=>{e.pattern.lastIndex=0,!e.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:e.format,input:a.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(r=n._zod).check??(r.check=()=>{})}),i4=pe("$ZodCheckRegex",(n,e)=>{$f.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),o4=pe("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=e4),$f.init(n,e)}),u4=pe("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=t4),$f.init(n,e)}),s4=pe("$ZodCheckIncludes",(n,e)=>{ra.init(n,e);const t=Tm(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=r,n._zod.onattach.push(a=>{const i=a._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),n._zod.check=a=>{a.value.includes(e.includes,e.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:a.value,inst:n,continue:!e.abort})}}),l4=pe("$ZodCheckStartsWith",(n,e)=>{ra.init(n,e);const t=new RegExp(`^${Tm(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(t)}),n._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:n,continue:!e.abort})}}),c4=pe("$ZodCheckEndsWith",(n,e)=>{ra.init(n,e);const t=new RegExp(`.*${Tm(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const a=r._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(t)}),n._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:n,continue:!e.abort})}}),f4=pe("$ZodCheckOverwrite",(n,e)=>{ra.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}}),h4={major:4,minor:1,patch:12},Cn=pe("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=h4;const r=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&r.unshift(n);for(const a of r)for(const i of a._zod.onattach)i(n);if(r.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const a=(s,l,c)=>{let h=ou(s),d;for(const v of l){if(v._zod.def.when){if(!v._zod.def.when(s))continue}else if(h)continue;const m=s.issues.length,g=v._zod.check(s);if(g instanceof Promise&&c?.async===!1)throw new su;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,s.issues.length!==m&&(h||(h=ou(s,m)))});else{if(s.issues.length===m)continue;h||(h=ou(s,m))}}return d?d.then(()=>s):s},i=(s,l,c)=>{if(ou(s))return s.aborted=!0,s;const h=a(l,r,c);if(h instanceof Promise){if(c.async===!1)throw new su;return h.then(d=>n._zod.parse(d,c))}return n._zod.parse(h,c)};n._zod.run=(s,l)=>{if(l.skipChecks)return n._zod.parse(s,l);if(l.direction==="backward"){const h=n._zod.parse({value:s.value,issues:[]},{...l,skipChecks:!0});return h instanceof Promise?h.then(d=>i(d,s,l)):i(h,s,l)}const c=n._zod.parse(s,l);if(c instanceof Promise){if(l.async===!1)throw new su;return c.then(h=>a(h,r,l))}return a(c,r,l)}}n["~standard"]={validate:a=>{try{const i=S3(n,a);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return E3(n,a).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Nm=pe("$ZodString",(n,e)=>{Cn.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??J3(n._zod.bag),n._zod.parse=(t,r)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),St=pe("$ZodStringFormat",(n,e)=>{$f.init(n,e),Nm.init(n,e)}),d4=pe("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=P3),St.init(n,e)}),p4=pe("$ZodUUID",(n,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=$x(r))}else e.pattern??(e.pattern=$x());St.init(n,e)}),v4=pe("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=U3),St.init(n,e)}),m4=pe("$ZodURL",(n,e)=>{St.init(n,e),n._zod.check=t=>{try{const r=t.value.trim(),a=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(a.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:X3.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=a.href:t.value=r;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),g4=pe("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=V3()),St.init(n,e)}),y4=pe("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=L3),St.init(n,e)}),b4=pe("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=N3),St.init(n,e)}),x4=pe("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=M3),St.init(n,e)}),w4=pe("$ZodULID",(n,e)=>{e.pattern??(e.pattern=I3),St.init(n,e)}),S4=pe("$ZodXID",(n,e)=>{e.pattern??(e.pattern=F3),St.init(n,e)}),E4=pe("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=B3),St.init(n,e)}),_4=pe("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=Q3(e)),St.init(n,e)}),C4=pe("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=Z3),St.init(n,e)}),R4=pe("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=Y3(e)),St.init(n,e)}),A4=pe("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=z3),St.init(n,e)}),T4=pe("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=j3),St.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv4"})}),D4=pe("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=W3),St.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv6"}),n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),O4=pe("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=G3),St.init(n,e)}),k4=pe("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=q3),St.init(n,e),n._zod.check=t=>{const r=t.value.split("/");try{if(r.length!==2)throw new Error;const[a,i]=r;if(!i)throw new Error;const s=Number(i);if(`${s}`!==i)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${a}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function bS(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const N4=pe("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=K3),St.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64"}),n._zod.check=t=>{bS(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function M4(n){if(!mS.test(n))return!1;const e=n.replace(/[-_]/g,r=>r==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return bS(t)}const I4=pe("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=mS),St.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64url"}),n._zod.check=t=>{M4(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),F4=pe("$ZodE164",(n,e)=>{e.pattern??(e.pattern=$3),St.init(n,e)});function B4(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[r]=t;if(!r)return!1;const a=JSON.parse(atob(r));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||e&&(!("alg"in a)||a.alg!==e))}catch{return!1}}const L4=pe("$ZodJWT",(n,e)=>{St.init(n,e),n._zod.check=t=>{B4(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}});function Zx(n,e,t){n.issues.length&&e.issues.push(...b3(t,n.issues)),e.value[t]=n.value}const z4=pe("$ZodArray",(n,e)=>{Cn.init(n,e),n._zod.parse=(t,r)=>{const a=t.value;if(!Array.isArray(a))return t.issues.push({expected:"array",code:"invalid_type",input:a,inst:n}),t;t.value=Array(a.length);const i=[];for(let s=0;s<a.length;s++){const l=a[s],c=e.element._zod.run({value:l,issues:[]},r);c instanceof Promise?i.push(c.then(h=>Zx(h,t,s))):Zx(c,t,s)}return i.length?Promise.all(i).then(()=>t):t}});function Yx(n,e,t,r){for(const i of n)if(i.issues.length===0)return e.value=i.value,e;const a=n.filter(i=>!ou(i));return a.length===1?(e.value=a[0].value,a[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(i=>i.issues.map(s=>no(s,r,to())))}),e)}const P4=pe("$ZodUnion",(n,e)=>{Cn.init(n,e),wt(n._zod,"optin",()=>e.options.some(a=>a._zod.optin==="optional")?"optional":void 0),wt(n._zod,"optout",()=>e.options.some(a=>a._zod.optout==="optional")?"optional":void 0),wt(n._zod,"values",()=>{if(e.options.every(a=>a._zod.values))return new Set(e.options.flatMap(a=>Array.from(a._zod.values)))}),wt(n._zod,"pattern",()=>{if(e.options.every(a=>a._zod.pattern)){const a=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${a.map(i=>Am(i.source)).join("|")})$`)}});const t=e.options.length===1,r=e.options[0]._zod.run;n._zod.parse=(a,i)=>{if(t)return r(a,i);let s=!1;const l=[];for(const c of e.options){const h=c._zod.run({value:a.value,issues:[]},i);if(h instanceof Promise)l.push(h),s=!0;else{if(h.issues.length===0)return h;l.push(h)}}return s?Promise.all(l).then(c=>Yx(c,a,n,i)):Yx(l,a,n,i)}}),U4=pe("$ZodIntersection",(n,e)=>{Cn.init(n,e),n._zod.parse=(t,r)=>{const a=t.value,i=e.left._zod.run({value:a,issues:[]},r),s=e.right._zod.run({value:a,issues:[]},r);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([c,h])=>Qx(t,c,h)):Qx(t,i,s)}});function zv(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(Lv(n)&&Lv(e)){const t=Object.keys(e),r=Object.keys(n).filter(i=>t.indexOf(i)!==-1),a={...n,...e};for(const i of r){const s=zv(n[i],e[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};a[i]=s.data}return{valid:!0,data:a}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<n.length;r++){const a=n[r],i=e[r],s=zv(a,i);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};t.push(s.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function Qx(n,e,t){if(e.issues.length&&n.issues.push(...e.issues),t.issues.length&&n.issues.push(...t.issues),ou(n))return n;const r=zv(e.value,t.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return n.value=r.data,n}const H4=pe("$ZodTransform",(n,e)=>{Cn.init(n,e),n._zod.parse=(t,r)=>{if(r.direction==="backward")throw new cS(n.constructor.name);const a=e.transform(t.value,t);if(r.async)return(a instanceof Promise?a:Promise.resolve(a)).then(s=>(t.value=s,t));if(a instanceof Promise)throw new su;return t.value=a,t}});function Jx(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const V4=pe("$ZodOptional",(n,e)=>{Cn.init(n,e),n._zod.optin="optional",n._zod.optout="optional",wt(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),wt(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Am(t.source)})?$`):void 0}),n._zod.parse=(t,r)=>{if(e.innerType._zod.optin==="optional"){const a=e.innerType._zod.run(t,r);return a instanceof Promise?a.then(i=>Jx(i,t.value)):Jx(a,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,r)}}),j4=pe("$ZodNullable",(n,e)=>{Cn.init(n,e),wt(n._zod,"optin",()=>e.innerType._zod.optin),wt(n._zod,"optout",()=>e.innerType._zod.optout),wt(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Am(t.source)}|null)$`):void 0}),wt(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,r)=>t.value===null?t:e.innerType._zod.run(t,r)}),W4=pe("$ZodDefault",(n,e)=>{Cn.init(n,e),n._zod.optin="optional",wt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{if(r.direction==="backward")return e.innerType._zod.run(t,r);if(t.value===void 0)return t.value=e.defaultValue,t;const a=e.innerType._zod.run(t,r);return a instanceof Promise?a.then(i=>ew(i,e)):ew(a,e)}});function ew(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const G4=pe("$ZodPrefault",(n,e)=>{Cn.init(n,e),n._zod.optin="optional",wt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>(r.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,r))}),q4=pe("$ZodNonOptional",(n,e)=>{Cn.init(n,e),wt(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),n._zod.parse=(t,r)=>{const a=e.innerType._zod.run(t,r);return a instanceof Promise?a.then(i=>tw(i,n)):tw(a,n)}});function tw(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const K4=pe("$ZodCatch",(n,e)=>{Cn.init(n,e),wt(n._zod,"optin",()=>e.innerType._zod.optin),wt(n._zod,"optout",()=>e.innerType._zod.optout),wt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{if(r.direction==="backward")return e.innerType._zod.run(t,r);const a=e.innerType._zod.run(t,r);return a instanceof Promise?a.then(i=>(t.value=i.value,i.issues.length&&(t.value=e.catchValue({...t,error:{issues:i.issues.map(s=>no(s,r,to()))},input:t.value}),t.issues=[]),t)):(t.value=a.value,a.issues.length&&(t.value=e.catchValue({...t,error:{issues:a.issues.map(i=>no(i,r,to()))},input:t.value}),t.issues=[]),t)}}),X4=pe("$ZodPipe",(n,e)=>{Cn.init(n,e),wt(n._zod,"values",()=>e.in._zod.values),wt(n._zod,"optin",()=>e.in._zod.optin),wt(n._zod,"optout",()=>e.out._zod.optout),wt(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,r)=>{if(r.direction==="backward"){const i=e.out._zod.run(t,r);return i instanceof Promise?i.then(s=>Uc(s,e.in,r)):Uc(i,e.in,r)}const a=e.in._zod.run(t,r);return a instanceof Promise?a.then(i=>Uc(i,e.out,r)):Uc(a,e.out,r)}});function Uc(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const $4=pe("$ZodReadonly",(n,e)=>{Cn.init(n,e),wt(n._zod,"propValues",()=>e.innerType._zod.propValues),wt(n._zod,"values",()=>e.innerType._zod.values),wt(n._zod,"optin",()=>e.innerType._zod.optin),wt(n._zod,"optout",()=>e.innerType._zod.optout),n._zod.parse=(t,r)=>{if(r.direction==="backward")return e.innerType._zod.run(t,r);const a=e.innerType._zod.run(t,r);return a instanceof Promise?a.then(nw):nw(a)}});function nw(n){return n.value=Object.freeze(n.value),n}const Z4=pe("$ZodCustom",(n,e)=>{ra.init(n,e),Cn.init(n,e),n._zod.parse=(t,r)=>t,n._zod.check=t=>{const r=t.value,a=e.fn(r);if(a instanceof Promise)return a.then(i=>rw(i,t,r,n));rw(a,t,r,n)}});function rw(n,e,t,r){if(!n){const a={code:"custom",input:t,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(a.params=r._zod.def.params),e.issues.push(js(a))}}class Y4{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};delete r.id;const a={...r,...this._map.get(e)};return Object.keys(a).length?a:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Q4(){return new Y4}const Hc=Q4();function J4(n,e){return new n({type:"string",...He(e)})}function ek(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...He(e)})}function aw(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...He(e)})}function tk(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...He(e)})}function nk(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...He(e)})}function rk(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...He(e)})}function ak(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...He(e)})}function ik(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...He(e)})}function ok(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...He(e)})}function uk(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...He(e)})}function sk(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...He(e)})}function lk(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...He(e)})}function ck(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...He(e)})}function fk(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...He(e)})}function hk(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...He(e)})}function dk(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...He(e)})}function pk(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...He(e)})}function vk(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...He(e)})}function mk(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...He(e)})}function gk(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...He(e)})}function yk(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...He(e)})}function bk(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...He(e)})}function xk(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...He(e)})}function wk(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...He(e)})}function Sk(n,e){return new n({type:"string",format:"date",check:"string_format",...He(e)})}function Ek(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...He(e)})}function _k(n,e){return new n({type:"string",format:"duration",check:"string_format",...He(e)})}function xS(n,e){return new n4({check:"max_length",...He(e),maximum:n})}function gf(n,e){return new r4({check:"min_length",...He(e),minimum:n})}function wS(n,e){return new a4({check:"length_equals",...He(e),length:n})}function Ck(n,e){return new i4({check:"string_format",format:"regex",...He(e),pattern:n})}function Rk(n){return new o4({check:"string_format",format:"lowercase",...He(n)})}function Ak(n){return new u4({check:"string_format",format:"uppercase",...He(n)})}function Tk(n,e){return new s4({check:"string_format",format:"includes",...He(e),includes:n})}function Dk(n,e){return new l4({check:"string_format",format:"starts_with",...He(e),prefix:n})}function Ok(n,e){return new c4({check:"string_format",format:"ends_with",...He(e),suffix:n})}function il(n){return new f4({check:"overwrite",tx:n})}function kk(n){return il(e=>e.normalize(n))}function Nk(){return il(n=>n.trim())}function Mk(){return il(n=>n.toLowerCase())}function Ik(){return il(n=>n.toUpperCase())}function Fk(n,e,t){return new n({type:"array",element:e,...He(t)})}function Bk(n,e,t){return new n({type:"custom",check:"custom",fn:e,...He(t)})}function Lk(n){const e=zk(t=>(t.addIssue=r=>{if(typeof r=="string")t.issues.push(js(r,t.value,e._zod.def));else{const a=r;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=t.value),a.inst??(a.inst=e),a.continue??(a.continue=!e._zod.def.abort),t.issues.push(js(a))}},n(t.value,t)));return e}function zk(n,e){const t=new ra({check:"custom",...He(e)});return t._zod.check=n,t}const Pk=pe("ZodISODateTime",(n,e)=>{_4.init(n,e),At.init(n,e)});function Uk(n){return wk(Pk,n)}const Hk=pe("ZodISODate",(n,e)=>{C4.init(n,e),At.init(n,e)});function Vk(n){return Sk(Hk,n)}const jk=pe("ZodISOTime",(n,e)=>{R4.init(n,e),At.init(n,e)});function Wk(n){return Ek(jk,n)}const Gk=pe("ZodISODuration",(n,e)=>{A4.init(n,e),At.init(n,e)});function qk(n){return _k(Gk,n)}const Kk=(n,e)=>{pS.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>w3(n,t)},flatten:{value:t=>x3(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,Bv,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,Bv,2)}},isEmpty:{get(){return n.issues.length===0}}})},wr=pe("ZodError",Kk,{Parent:Error}),Xk=Om(wr),$k=km(wr),Zk=Kf(wr),Yk=Xf(wr),Qk=_3(wr),Jk=C3(wr),eN=R3(wr),tN=A3(wr),nN=T3(wr),rN=D3(wr),aN=O3(wr),iN=k3(wr),Pn=pe("ZodType",(n,e)=>(Cn.init(n,e),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone(g3(e,{checks:[...e.checks??[],...t.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),n.clone=(t,r)=>y3(n,t,r),n.brand=()=>n,n.register=(t,r)=>(t.add(n,r),n),n.parse=(t,r)=>Xk(n,t,r,{callee:n.parse}),n.safeParse=(t,r)=>Zk(n,t,r),n.parseAsync=async(t,r)=>$k(n,t,r,{callee:n.parseAsync}),n.safeParseAsync=async(t,r)=>Yk(n,t,r),n.spa=n.safeParseAsync,n.encode=(t,r)=>Qk(n,t,r),n.decode=(t,r)=>Jk(n,t,r),n.encodeAsync=async(t,r)=>eN(n,t,r),n.decodeAsync=async(t,r)=>tN(n,t,r),n.safeEncode=(t,r)=>nN(n,t,r),n.safeDecode=(t,r)=>rN(n,t,r),n.safeEncodeAsync=async(t,r)=>aN(n,t,r),n.safeDecodeAsync=async(t,r)=>iN(n,t,r),n.refine=(t,r)=>n.check(qN(t,r)),n.superRefine=t=>n.check(KN(t)),n.overwrite=t=>n.check(il(t)),n.optional=()=>ow(n),n.nullable=()=>uw(n),n.nullish=()=>ow(uw(n)),n.nonoptional=t=>PN(n,t),n.array=()=>CN(n),n.or=t=>AN([n,t]),n.and=t=>DN(n,t),n.transform=t=>sw(n,kN(t)),n.default=t=>FN(n,t),n.prefault=t=>LN(n,t),n.catch=t=>HN(n,t),n.pipe=t=>sw(n,t),n.readonly=()=>WN(n),n.describe=t=>{const r=n.clone();return Hc.add(r,{description:t}),r},Object.defineProperty(n,"description",{get(){return Hc.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return Hc.get(n);const r=n.clone();return Hc.add(r,t[0]),r},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),SS=pe("_ZodString",(n,e)=>{Nm.init(n,e),Pn.init(n,e);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...r)=>n.check(Ck(...r)),n.includes=(...r)=>n.check(Tk(...r)),n.startsWith=(...r)=>n.check(Dk(...r)),n.endsWith=(...r)=>n.check(Ok(...r)),n.min=(...r)=>n.check(gf(...r)),n.max=(...r)=>n.check(xS(...r)),n.length=(...r)=>n.check(wS(...r)),n.nonempty=(...r)=>n.check(gf(1,...r)),n.lowercase=r=>n.check(Rk(r)),n.uppercase=r=>n.check(Ak(r)),n.trim=()=>n.check(Nk()),n.normalize=(...r)=>n.check(kk(...r)),n.toLowerCase=()=>n.check(Mk()),n.toUpperCase=()=>n.check(Ik())}),oN=pe("ZodString",(n,e)=>{Nm.init(n,e),SS.init(n,e),n.email=t=>n.check(ek(uN,t)),n.url=t=>n.check(ik(sN,t)),n.jwt=t=>n.check(xk(EN,t)),n.emoji=t=>n.check(ok(lN,t)),n.guid=t=>n.check(aw(iw,t)),n.uuid=t=>n.check(tk(Vc,t)),n.uuidv4=t=>n.check(nk(Vc,t)),n.uuidv6=t=>n.check(rk(Vc,t)),n.uuidv7=t=>n.check(ak(Vc,t)),n.nanoid=t=>n.check(uk(cN,t)),n.guid=t=>n.check(aw(iw,t)),n.cuid=t=>n.check(sk(fN,t)),n.cuid2=t=>n.check(lk(hN,t)),n.ulid=t=>n.check(ck(dN,t)),n.base64=t=>n.check(gk(xN,t)),n.base64url=t=>n.check(yk(wN,t)),n.xid=t=>n.check(fk(pN,t)),n.ksuid=t=>n.check(hk(vN,t)),n.ipv4=t=>n.check(dk(mN,t)),n.ipv6=t=>n.check(pk(gN,t)),n.cidrv4=t=>n.check(vk(yN,t)),n.cidrv6=t=>n.check(mk(bN,t)),n.e164=t=>n.check(bk(SN,t)),n.datetime=t=>n.check(Uk(t)),n.date=t=>n.check(Vk(t)),n.time=t=>n.check(Wk(t)),n.duration=t=>n.check(qk(t))});function jU(n){return J4(oN,n)}const At=pe("ZodStringFormat",(n,e)=>{St.init(n,e),SS.init(n,e)}),uN=pe("ZodEmail",(n,e)=>{v4.init(n,e),At.init(n,e)}),iw=pe("ZodGUID",(n,e)=>{d4.init(n,e),At.init(n,e)}),Vc=pe("ZodUUID",(n,e)=>{p4.init(n,e),At.init(n,e)}),sN=pe("ZodURL",(n,e)=>{m4.init(n,e),At.init(n,e)}),lN=pe("ZodEmoji",(n,e)=>{g4.init(n,e),At.init(n,e)}),cN=pe("ZodNanoID",(n,e)=>{y4.init(n,e),At.init(n,e)}),fN=pe("ZodCUID",(n,e)=>{b4.init(n,e),At.init(n,e)}),hN=pe("ZodCUID2",(n,e)=>{x4.init(n,e),At.init(n,e)}),dN=pe("ZodULID",(n,e)=>{w4.init(n,e),At.init(n,e)}),pN=pe("ZodXID",(n,e)=>{S4.init(n,e),At.init(n,e)}),vN=pe("ZodKSUID",(n,e)=>{E4.init(n,e),At.init(n,e)}),mN=pe("ZodIPv4",(n,e)=>{T4.init(n,e),At.init(n,e)}),gN=pe("ZodIPv6",(n,e)=>{D4.init(n,e),At.init(n,e)}),yN=pe("ZodCIDRv4",(n,e)=>{O4.init(n,e),At.init(n,e)}),bN=pe("ZodCIDRv6",(n,e)=>{k4.init(n,e),At.init(n,e)}),xN=pe("ZodBase64",(n,e)=>{N4.init(n,e),At.init(n,e)}),wN=pe("ZodBase64URL",(n,e)=>{I4.init(n,e),At.init(n,e)}),SN=pe("ZodE164",(n,e)=>{F4.init(n,e),At.init(n,e)}),EN=pe("ZodJWT",(n,e)=>{L4.init(n,e),At.init(n,e)}),_N=pe("ZodArray",(n,e)=>{z4.init(n,e),Pn.init(n,e),n.element=e.element,n.min=(t,r)=>n.check(gf(t,r)),n.nonempty=t=>n.check(gf(1,t)),n.max=(t,r)=>n.check(xS(t,r)),n.length=(t,r)=>n.check(wS(t,r)),n.unwrap=()=>n.element});function CN(n,e){return Fk(_N,n,e)}const RN=pe("ZodUnion",(n,e)=>{P4.init(n,e),Pn.init(n,e),n.options=e.options});function AN(n,e){return new RN({type:"union",options:n,...He(e)})}const TN=pe("ZodIntersection",(n,e)=>{U4.init(n,e),Pn.init(n,e)});function DN(n,e){return new TN({type:"intersection",left:n,right:e})}const ON=pe("ZodTransform",(n,e)=>{H4.init(n,e),Pn.init(n,e),n._zod.parse=(t,r)=>{if(r.direction==="backward")throw new cS(n.constructor.name);t.addIssue=i=>{if(typeof i=="string")t.issues.push(js(i,t.value,e));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=t.value),s.inst??(s.inst=n),t.issues.push(js(s))}};const a=e.transform(t.value,t);return a instanceof Promise?a.then(i=>(t.value=i,t)):(t.value=a,t)}});function kN(n){return new ON({type:"transform",transform:n})}const NN=pe("ZodOptional",(n,e)=>{V4.init(n,e),Pn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function ow(n){return new NN({type:"optional",innerType:n})}const MN=pe("ZodNullable",(n,e)=>{j4.init(n,e),Pn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function uw(n){return new MN({type:"nullable",innerType:n})}const IN=pe("ZodDefault",(n,e)=>{W4.init(n,e),Pn.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function FN(n,e){return new IN({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():hS(e)}})}const BN=pe("ZodPrefault",(n,e)=>{G4.init(n,e),Pn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function LN(n,e){return new BN({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():hS(e)}})}const zN=pe("ZodNonOptional",(n,e)=>{q4.init(n,e),Pn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function PN(n,e){return new zN({type:"nonoptional",innerType:n,...He(e)})}const UN=pe("ZodCatch",(n,e)=>{K4.init(n,e),Pn.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function HN(n,e){return new UN({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const VN=pe("ZodPipe",(n,e)=>{X4.init(n,e),Pn.init(n,e),n.in=e.in,n.out=e.out});function sw(n,e){return new VN({type:"pipe",in:n,out:e})}const jN=pe("ZodReadonly",(n,e)=>{$4.init(n,e),Pn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function WN(n){return new jN({type:"readonly",innerType:n})}const GN=pe("ZodCustom",(n,e)=>{Z4.init(n,e),Pn.init(n,e)});function qN(n,e={}){return Bk(GN,n,e)}function KN(n){return Lk(n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ES=function(n,e){return(ES=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])})(n,e)};function Nr(n,e){function t(){this.constructor=n}ES(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function we(n,e,t,r){return new(t||(t=Promise))(function(a,i){function s(h){try{c(r.next(h))}catch(d){i(d)}}function l(h){try{c(r.throw(h))}catch(d){i(d)}}function c(h){h.done?a(h.value):new t(function(d){d(h.value)}).then(s,l)}c((r=r.apply(n,[])).next())})}function Se(n,e){var t,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(h){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(a=2&d[0]?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,r=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){s.label=d[1];break}if(d[0]===6&&s.label<a[1]){s.label=a[1],a=d;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(d);break}a[2]&&s.ops.pop(),s.trys.pop();continue}d=e.call(n,s)}catch(v){d=[6,v],r=0}finally{t=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,h])}}}var XN=function(){function n(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},n.prototype.registerFlag=function(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){var a=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+a+"."),this.set(e,a)}},n.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},n.prototype.getNumber=function(e){return this.get(e)},n.prototype.getBool=function(e){return this.get(e)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},n.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},n.prototype.setFlags=function(e){this.flags=Object.assign({},e)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,a=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return $N(r,s[0],s[1]),s.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(i){var s=i.split(":"),l=s[0],c=s[1];e.urlFlags[l]=function(h,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+h+".")}(l,c)})}},n}();function $N(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function le(){return _S}var _S=null,yf=new Map,Pv=new Map;function CS(n,e){var t=AS(n,e);return yf.get(t)}function ZN(n){return Pv.get(n)}function lw(n){for(var e=yf.entries(),t=[];;){var r=e.next(),a=r.done,i=r.value;if(a)break;var s=i[0],l=i[1];s.split("_")[0]===n&&t.push(l)}return t}function RS(n){var e=n.kernelName,t=n.backendName,r=AS(e,t);if(yf.has(r))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");yf.set(r,n)}function YN(n){var e=n.kernelName;Pv.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),Pv.set(e,n)}function AS(n,e){return e+"_"+n}function Uv(n,e,t){return Math.max(n,Math.min(e,t))}function TS(n){return n%2==0?n:n+1}function QN(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e}function L(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function st(n,e,t){t===void 0&&(t=""),L(Jt(n,e),function(){return t+" Shapes "+n+" and "+e+" must match"})}function Tu(n){L(n!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function xu(n,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(n)||Yr(n)&&!t)for(var r=0;r<n.length;++r)xu(n[r],e,t);else e.push(n);return e}function _e(n){if(n.length===0)return 1;for(var e=n[0],t=1;t<n.length;t++)e*=n[t];return e}function Jt(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Mt(n){return n%1==0}function JN(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var e=Math.exp(2*n);return(e-1)/(e+1)}function Hv(n){var e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function lu(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function cw(n,e,t){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,a){var i=0,s=function(){if(n())r();else{i++;var l=e(i);t!=null&&i>=t?a():setTimeout(s,l)}};s()})}function eM(n,e){for(var t=1,r=-1,a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(n[a]<0)throw Error("Shapes can not be < 0. Found "+n[a]+" at dim "+a);if(r===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+n);return n}if(t===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var i=n.slice();return i[r]=e/t,i}function $t(n,e){var t=e.length;return L((n=n==null?e.map(function(r,a){return a}):[].concat(n)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+n}),L(n.every(function(r){return Mt(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?t+r:r})}function qi(n,e){for(var t=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:$t(e,n).sort(),s=0,l=0;l<n.length;++l){if(i!=null){if(i[s]===l&&n[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+n[l]+"' is not 1");(i[s]==null||i[s]>l)&&n[l]===1&&(t.push(n[l]),r.push(l)),i[s]<=l&&s++}n[l]!==1&&(t.push(n[l]),r.push(l))}return{newShape:t,keptDims:r}}function Ws(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);t=new Uint8Array(e)}return t}function bf(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else{if(n!=="string")throw new Error("Unknown data type "+n);t=new Array(e)}return t}function tM(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function nM(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function rM(n,e){return e!=="complex64"&&(e!=="float32"||n==="complex64")&&(e!=="int32"||n==="float32"||n==="complex64")&&(e!=="bool"||n!=="bool")}function Yr(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function DS(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function aM(n){if(n==null)return 0;var e=0;return n.forEach(function(t){return e+=t.length}),e}function Mm(n){return typeof n=="string"||n instanceof String}function iM(n){return typeof n=="boolean"}function oM(n){return typeof n=="number"}function ol(n){return Array.isArray(n)?ol(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":oM(n)?"float32":Mm(n)?"string":iM(n)?"bool":"float32"}function Vv(n){return!!(n&&n.constructor&&n.call&&n.apply)}function jv(n,e){for(var t=e;t<n;++t)if(n%t==0)return t;return n}function Qr(n){var e=n.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=n[e-1];for(var r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function OS(n,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=xu(n)),t&&tM(n,e),function(i,s){return i instanceof Float32Array&&s==="float32"||i instanceof Int32Array&&s==="int32"||i instanceof Uint8Array&&s==="bool"}(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){for(var r=new Uint8Array(n.length),a=0;a<r.length;++a)Math.round(n[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+e)}function fw(n,e){if(n.length===0)return e[0];var t=n.reduce(function(r,a){return r*a});if(t===0)return[];if(t!==e.length)throw new Error("["+n+"] does not match the input size.");return function r(a,i,s){var l=new Array;if(i.length===1)for(var c=i[0],h=0;h<c;h++)l[h]=s[a+h];else{c=i[0];var d=i.slice(1),v=d.reduce(function(m,g){return m*g});for(h=0;h<c;h++)l[h]=r(a+h*v,d,s)}return l}(0,n,e)}function kS(n,e){for(var t=ul(n,e),r=0;r<t.length;r++)t[r]=1;return t}function ul(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+e)}function Gr(){return le().platform.now()}function NS(n){n.forEach(function(e){L(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function uM(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",le().platform.encode(n,e)}function xf(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",le().platform.decode(n,e)}function hw(n,e,t){if(e===0)return 0;if(e===1)return n[0];for(var r=n[n.length-1],a=0;a<n.length-1;++a)r+=t[a]*n[a];return r}function sM(n,e,t){if(e===0)return[];if(e===1)return[n];for(var r=new Array(e),a=0;a<r.length-1;++a)r[a]=Math.floor(n/t[a]),n-=r[a]*t[a];return r[r.length-1]=n,r}var lM=function(){function n(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new cM)}return n.prototype.profileKernel=function(e,t,r){var a,i=this,s=this.backendTimer.time(function(){a=r()});return a.forEach(function(l){l.data().then(function(c){(function(h,d,v){if(d!=="float32")return!1;for(var m=0;m<h.length;m++){var g=h[m];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+v+"'"),!0}})(c,l.dtype,e),s.then(function(h){var d="";h.getExtraProfileInfo!=null&&(d=h.getExtraProfileInfo()),i.logger.logKernelProfile(e,l,c,h.kernelMs,t,d)})})}),a},n}(),cM=function(){function n(){}return n.prototype.logKernelProfile=function(e,t,r,a,i,s){var l=typeof a=="number"?lu(a+"ms",9):a.error,c=lu(e,25),h=t.rank,d=t.size,v=lu(t.shape.toString(),14),m="";for(var g in i){var x=i[g].shape||t.shape,w=x.length;m+=g+": "+w+"D "+(w>0?x:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+h+"D "+v+"	%c"+d+"	%c"+m+"	%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}(),dw=20,As=3,Wp=7;function fM(n,e,t,r){var a=Qr(e),i=function(h,d,v,m){var g=_e(d),x=m[m.length-1],w=new Array(x).fill(0),S=d.length,E=v==="complex64"?Ds(h):h;if(S>1)for(var _=0;_<g/x;_++)for(var R=_*x,A=0;A<x;A++)w[A]=Math.max(w[A],Ts(E[R+A],0,v).length);return w}(n,e,t,a),s=e.length,l=function h(d,v,m,g,x,w){w===void 0&&(w=!0);var S=m==="complex64"?2:1,E=v[0],_=v.length;if(_===0)return m==="complex64"?[Ts(Ds(d)[0],0,m)]:m==="bool"?[MS(d[0])]:[d[0].toString()];if(_===1){if(E>dw){var R=As*S,A=Array.from(d.slice(0,R)),C=Array.from(d.slice((E-As)*S,E*S));return m==="complex64"&&(A=Ds(A),C=Ds(C)),["["+A.map(function(ne,z){return Ts(ne,x[z],m)}).join(", ")+", ..., "+C.map(function(ne,z){return Ts(ne,x[E-As+z],m)}).join(", ")+"]"]}return["["+(m==="complex64"?Ds(d):Array.from(d)).map(function(ne,z){return Ts(ne,x[z],m)}).join(", ")+"]"]}var D=v.slice(1),O=g.slice(1),F=g[0]*S,N=[];if(E>dw){for(var I=0;I<As;I++){var U=(H=I*F)+F;N.push.apply(N,h(d.slice(H,U),D,m,O,x,!1))}for(N.push("..."),I=E-As;I<E;I++)U=(H=I*F)+F,N.push.apply(N,h(d.slice(H,U),D,m,O,x,I===E-1))}else for(I=0;I<E;I++){var H;U=(H=I*F)+F,N.push.apply(N,h(d.slice(H,U),D,m,O,x,I===E-1))}var J=_===2?",":"";for(N[0]="["+N[0]+J,I=1;I<N.length-1;I++)N[I]=" "+N[I]+J;var ee=`,
`;for(I=2;I<_;I++)ee+=`
`;return N[N.length-1]=" "+N[N.length-1]+"]"+(w?"":ee),N}(n,e,t,a,i),c=["Tensor"];return r&&(c.push("  dtype: "+t),c.push("  rank: "+s),c.push("  shape: ["+e+"]"),c.push("  values:")),c.push(l.map(function(h){return"    "+h}).join(`
`)),c.join(`
`)}function Ts(n,e,t){return lu(Array.isArray(n)?parseFloat(n[0].toFixed(Wp))+" + "+parseFloat(n[1].toFixed(Wp))+"j":Mm(n)?"'"+n+"'":t==="bool"?MS(n):parseFloat(n.toFixed(Wp)).toString(),e)}function MS(n){return n===0?"false":"true"}function Ds(n){for(var e=[],t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}var Gs=function(){function n(e,t,r){var a=this;if(this.dtype=t,this.shape=e.slice(),this.size=_e(e),r!=null){var i=r.length;L(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||bf(t,this.size),this.strides=Qr(e)}return n.prototype.set=function(e){for(var t=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),L(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var i=this.locToIndex(r);this.values[i]=e},n.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var r=0,a=0,i=e;a<i.length;a++){var s=i[a];if(s<0||s>=this.shape[r]){var l="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(l)}r++}for(var c=e[e.length-1],h=0;h<e.length-1;++h)c+=this.strides[h]*e[h];return this.values[c]},n.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},n.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return qr().makeTensor(this.values,this.shape,this.dtype)},n}(),qr=null,ie=null,IS=null,Et=function(){function n(e,t,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=_e(e),this.strides=Qr(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),L(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},n.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},n.prototype.as4D=function(e,t,r,a){return this.throwIfDisposed(),this.reshape([e,t,r,a])},n.prototype.as5D=function(e,t,r,a,i){return this.throwIfDisposed(),this.reshape([e,t,r,a,i])},n.prototype.asType=function(e){return this.throwIfDisposed(),ie.cast(this,e)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return we(this,void 0,void 0,function(){var e;return Se(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,ie.buffer(this.shape,this.dtype,e)]}})})},n.prototype.bufferSync=function(){return ie.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return we(this,void 0,void 0,function(){var e;return Se(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,fw(this.shape,e)]}})})},n.prototype.arraySync=function(){return fw(this.shape,this.dataSync())},n.prototype.data=function(){return we(this,void 0,void 0,function(){var e,t;return Se(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=qr().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=r.sent();try{return[2,t.map(function(a){return xf(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var e=qr().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(t){return xf(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},n.prototype.bytes=function(){return we(this,void 0,void 0,function(){var e;return Se(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,qr().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(qr().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(e){return e===void 0&&(e=!1),ie.print(this,e)},n.prototype.reshape=function(e){return this.throwIfDisposed(),ie.reshape(this,e)},n.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},n.prototype.expandDims=function(e){return e===void 0&&(e=0),ie.expandDims(this,e)},n.prototype.cumsum=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1),ie.cumsum(this,e,t,r)},n.prototype.squeeze=function(e){return this.throwIfDisposed(),ie.squeeze(this,e)},n.prototype.clone=function(){return this.throwIfDisposed(),ie.clone(this)},n.prototype.oneHot=function(e,t,r){return this.throwIfDisposed(),ie.oneHot(this,e,t,r)},n.prototype.toString=function(e){return e===void 0&&(e=!1),fM(this.dataSync(),this.shape,this.dtype,e)},n.prototype.tile=function(e){return this.throwIfDisposed(),ie.tile(this,e)},n.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),ie.gather(this,e,t)},n.prototype.matMul=function(e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ie.matMul(this,e,t,r)},n.prototype.dot=function(e){return this.throwIfDisposed(),ie.dot(this,e)},n.prototype.norm=function(e,t,r){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),ie.norm(this,e,t,r)},n.prototype.slice=function(e,t){return this.throwIfDisposed(),ie.slice(this,e,t)},n.prototype.reverse=function(e){return this.throwIfDisposed(),ie.reverse(this,e)},n.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof n&&(e=[e]),ie.concat([this].concat(e),t)},n.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),ie.split(this,e,t)},n.prototype.stack=function(e,t){return t===void 0&&(t=0),ie.stack([this,e],t)},n.prototype.unstack=function(e){return e===void 0&&(e=0),ie.unstack(this,e)},n.prototype.pad=function(e,t){return t===void 0&&(t=0),ie.pad(this,e,t)},n.prototype.batchNormalization=function(e,t,r,a,i){return r===void 0&&(r=.001),IS("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,a,r)},n.prototype.batchNorm=function(e,t,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),ie.batchNorm(this,e,t,r,a,i)},n.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.all(this,e,t)},n.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.any(this,e,t)},n.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.logSumExp(this,e,t)},n.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.sum(this,e,t)},n.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.prod(this,e,t)},n.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.mean(this,e,t)},n.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.min(this,e,t)},n.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),ie.max(this,e,t)},n.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ie.argMin(this,e)},n.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ie.argMax(this,e)},n.prototype.cast=function(e){return this.throwIfDisposed(),ie.cast(this,e)},n.prototype.add=function(e){return this.throwIfDisposed(),ie.add(this,e)},n.prototype.addStrict=function(e){return this.throwIfDisposed(),ie.addStrict(this,e)},n.prototype.atan2=function(e){return this.throwIfDisposed(),ie.atan2(this,e)},n.prototype.sub=function(e){return this.throwIfDisposed(),ie.sub(this,e)},n.prototype.subStrict=function(e){return this.throwIfDisposed(),ie.subStrict(this,e)},n.prototype.pow=function(e){return this.throwIfDisposed(),ie.pow(this,e)},n.prototype.powStrict=function(e){return this.throwIfDisposed(),ie.powStrict(this,e)},n.prototype.mul=function(e){return this.throwIfDisposed(),ie.mul(this,e)},n.prototype.mulStrict=function(e){return this.throwIfDisposed(),ie.mulStrict(this,e)},n.prototype.div=function(e){return this.throwIfDisposed(),ie.div(this,e)},n.prototype.divNoNan=function(e){return this.throwIfDisposed(),ie.divNoNan(this,e)},n.prototype.floorDiv=function(e){return this.throwIfDisposed(),ie.floorDiv(this,e)},n.prototype.divStrict=function(e){return this.throwIfDisposed(),ie.divStrict(this,e)},n.prototype.minimum=function(e){return this.throwIfDisposed(),ie.minimum(this,e)},n.prototype.minimumStrict=function(e){return this.throwIfDisposed(),ie.minimumStrict(this,e)},n.prototype.maximum=function(e){return this.throwIfDisposed(),ie.maximum(this,e)},n.prototype.maximumStrict=function(e){return this.throwIfDisposed(),ie.maximumStrict(this,e)},n.prototype.mod=function(e){return this.throwIfDisposed(),ie.mod(this,e)},n.prototype.modStrict=function(e){return this.throwIfDisposed(),ie.modStrict(this,e)},n.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),ie.squaredDifferenceStrict(this,e)},n.prototype.transpose=function(e){return this.throwIfDisposed(),ie.transpose(this,e)},n.prototype.notEqual=function(e){return this.throwIfDisposed(),ie.notEqual(this,e)},n.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),ie.notEqualStrict(this,e)},n.prototype.less=function(e){return this.throwIfDisposed(),ie.less(this,e)},n.prototype.lessStrict=function(e){return this.throwIfDisposed(),ie.lessStrict(this,e)},n.prototype.equal=function(e){return this.throwIfDisposed(),ie.equal(this,e)},n.prototype.equalStrict=function(e){return this.throwIfDisposed(),ie.equalStrict(this,e)},n.prototype.lessEqual=function(e){return this.throwIfDisposed(),ie.lessEqual(this,e)},n.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),ie.lessEqualStrict(this,e)},n.prototype.greater=function(e){return this.throwIfDisposed(),ie.greater(this,e)},n.prototype.greaterStrict=function(e){return this.throwIfDisposed(),ie.greaterStrict(this,e)},n.prototype.greaterEqual=function(e){return this.throwIfDisposed(),ie.greaterEqual(this,e)},n.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),ie.greaterEqualStrict(this,e)},n.prototype.logicalAnd=function(e){return this.throwIfDisposed(),ie.logicalAnd(this,e)},n.prototype.logicalOr=function(e){return this.throwIfDisposed(),ie.logicalOr(this,e)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),ie.logicalNot(this)},n.prototype.logicalXor=function(e){return this.throwIfDisposed(),ie.logicalXor(this,e)},n.prototype.where=function(e,t){return this.throwIfDisposed(),ie.where(e,this,t)},n.prototype.neg=function(){return this.throwIfDisposed(),ie.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),ie.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),ie.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),ie.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),ie.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),ie.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),ie.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),ie.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),ie.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),ie.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),ie.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),ie.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),ie.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),ie.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),ie.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),ie.abs(this)},n.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),ie.clipByValue(this,e,t)},n.prototype.relu=function(){return this.throwIfDisposed(),ie.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),ie.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),ie.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),ie.selu(this)},n.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),ie.leakyRelu(this,e)},n.prototype.prelu=function(e){return this.throwIfDisposed(),ie.prelu(this,e)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),ie.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),ie.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),ie.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),ie.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),ie.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),ie.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),ie.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),ie.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),ie.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),ie.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),ie.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),ie.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),ie.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),ie.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),ie.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),ie.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),ie.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),ie.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),ie.round(this)},n.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),ie.step(this,e)},n.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ie.softmax(this,e)},n.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ie.logSoftmax(this,e)},n.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),ie.image.resizeBilinear(this,e,t)},n.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),ie.image.resizeNearestNeighbor(this,e,t)},n.prototype.conv1d=function(e,t,r,a,i,s){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),ie.conv1d(this,e,t,r,a,i,s)},n.prototype.conv2d=function(e,t,r,a,i,s){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),ie.conv2d(this,e,t,r,a,i,s)},n.prototype.conv2dTranspose=function(e,t,r,a,i){return this.throwIfDisposed(),ie.conv2dTranspose(this,e,t,r,a,i)},n.prototype.depthwiseConv2D=function(e,t,r,a,i,s){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),ie.depthwiseConv2d(this,e,t,r,a,i,s)},n.prototype.separableConv2d=function(e,t,r,a,i,s){return i===void 0&&(i=[1,1]),s===void 0&&(s="NHWC"),this.throwIfDisposed(),ie.separableConv2d(this,e,t,r,a,i,s)},n.prototype.avgPool=function(e,t,r,a){return this.throwIfDisposed(),ie.avgPool(this,e,t,r,a)},n.prototype.maxPool=function(e,t,r,a){return this.throwIfDisposed(),ie.maxPool(this,e,t,r,a)},n.prototype.localResponseNormalization=function(e,t,r,a){return e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5),ie.localResponseNormalization(this,e,t,r,a)},n.prototype.pool=function(e,t,r,a,i){return this.throwIfDisposed(),ie.pool(this,e,t,r,a,i)},n.prototype.variable=function(e,t,r){return e===void 0&&(e=!0),this.throwIfDisposed(),qr().makeVariable(this,e,t,r)},n.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),ie.unsortedSegmentSum(this,e,t)},n.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),ie.batchToSpaceND(this,e,t)},n.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),ie.spaceToBatchND(this,e,t)},n.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),ie.topk(this,e,t)},n.prototype.stridedSlice=function(e,t,r,a,i,s,l,c){return a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),ie.stridedSlice(this,e,t,r,a,i,s,l,c)},n.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),ie.depthToSpace(this,e,t)},n.prototype.fft=function(){return this.throwIfDisposed(),ie.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),ie.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),ie.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),ie.spectral.irfft(this)},n}();Object.defineProperty(Et,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var pw,Wv,Gv,qv,Kv,wu=function(n){function e(t,r,a,i){var s=n.call(this,t.shape,t.dtype,t.dataId,i)||this;return s.trainable=r,s.name=a,s}return Nr(e,n),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!Jt(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");qr().disposeTensor(this),this.dataId=t.dataId,qr().incRef(this,null)},e.prototype.dispose=function(){qr().disposeVariable(this),this.isDisposedInternal=!0},e}(Et);Object.defineProperty(wu,Symbol.hasInstance,{value:function(n){return n instanceof Et&&n.assign!=null&&n.assign instanceof Function}}),function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"}(pw||(pw={})),function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(Wv||(Wv={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(Gv||(Gv={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(qv||(qv={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(Kv||(Kv={}));var hM={float32:qv,int32:Wv,bool:Gv,complex64:Kv};function cn(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error("Can not upcast "+n+" with "+e)}return hM[n][e]}function Gp(n){return cn(n,"int32")}function Rt(n,e){if(n.dtype===e.dtype)return[n,e];var t=cn(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function dM(n,e){L(n.dtype===e.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+e.dtype+") input must match"})}function FS(n){var e=[];return function t(r,a,i){if(r!=null){if(r instanceof Et)return void a.push(r);if(s=r,!(!Array.isArray(s)&&typeof s!="object")){var s,l=r;for(var c in l){var h=l[c];i.has(h)||(i.add(h),t(h,a,i))}}}}(n,e,new Set),e}var qp,vw=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},n}(),pM=function(){function n(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new vw}return n.prototype.ready=function(){return we(this,void 0,void 0,function(){var e,t,r;return Se(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,a.label=1;case 1:return t<e.length?(r=e[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},n.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},n.prototype.registerBackend=function(e,t,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:r},!0)},n.prototype.setBackend=function(e){return we(this,void 0,void 0,function(){var t,r,a;return Se(this,function(i){switch(i.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new lM(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var e=this;lw(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)})},n.prototype.disposeRegisteredKernels=function(e){var t=this;lw(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[e])})},n.prototype.initializeBackend=function(e){var t=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,s=a.then(function(l){return!(i<t.pendingBackendInitId)&&(t.registry[e]=l,t.pendingBackendInit=null,!0)}).catch(function(l){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(l.stack||l.message),!1)});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[e]=a,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+e+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return e.registryFactory[r].priority-e.registryFactory[t].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var r=e[t],a=this.initializeBackend(r),i=a.success,s=a.asyncInit;if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(e,t){var r=this.state.tensorInfo.get(t),a=r.backend,i=this.readSync(t);a.disposeData(t),r.backend=e,e.move(t,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(e,t){var r,a=this,i=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return a.startScope(i)},function(){return a.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(e,t,r){e();try{var a=r();return t(),a}catch(i){throw t(),i}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],function(a){return{x:function(){return a.toFloat()}}},[]),t},n.prototype.runKernel=function(e,t,r,a,i){return this.runKernelFunc(null,t,null,e,r,a,i)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(e,t,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(c){i+=c.dtype==="complex64"?3:1});var s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=a-t-i-s;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+e+"'")},n.prototype.runKernelFunc=function(e,t,r,a,i,s,l){var c,h=this;s===void 0&&(s=[]),l===void 0&&(l=[]);var d=[],v=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var m,g=function(_){v&&(d=_.map(function(R){return h.keep(h.clone(R))}))},x=this.state.numBytes,w=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var S,E=CS(a,this.backendName);return m=E!=null?function(){var _=h.backend.numDataIds();S=E.kernelFunc({inputs:t,attrs:i,backend:h.backend});var R=Array.isArray(S)?S:[S];h.shouldCheckForMemLeaks()&&h.checkKernelForMemLeak(a,_,R);var A=R.map(function(D){var O=D.dataId,F=D.shape,N=D.dtype;return h.makeTensorFromDataId(O,F,N)}),C=A.filter(function(D,O){return l[O]});return g((s||[]).slice().concat(C)),A}:function(){var _=h.backend.numDataIds();S=h.tidy(function(){return e(h.backend,g)});var R=Array.isArray(S)?S:[S];return h.shouldCheckForMemLeaks()&&h.checkKernelForMemLeak(a,_,R),R},this.scopedRun(function(){return h.state.kernelDepth++},function(){return h.state.kernelDepth--},function(){c=h.ENV.getBool("DEBUG")?h.profiler.profileKernel(a,t,function(){return m()}):m()}),v&&this.addTapeNode(a,t,c,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-x,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-w,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(_){return t[_].shape}),outputShapes:c.map(function(_){return _.shape})}),Array.isArray(S)?c:c[0]},n.prototype.makeTensor=function(e,t,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=e;r==="string"&&Mm(e[0])&&(i=e.map(function(d){return uM(d)}));var s=a.write(i,t,r),l=new Et(t,r,s,this.nextTensorId());if(this.incRef(l,a),r==="string"){var c=this.state.tensorInfo.get(s),h=aM(i);this.state.numBytes+=h-c.bytes,c.bytes=h}return l},n.prototype.makeTensorFromDataId=function(e,t,r,a){var i=new Et(t,r=r||"float32",e,this.nextTensorId());return this.incRef(i,a),i},n.prototype.makeVariable=function(e,t,r,a){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.asType(a));var i=new wu(e,t,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},n.prototype.incRef=function(e,t){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(a=e.size*DS(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof wu||this.track(e)},n.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},n.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},n.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},n.prototype.profile=function(e){return we(this,void 0,void 0,function(){var t,r;return Se(this,function(a){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(e,t,r,a,i){var s=this,l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:i},c=ZN(e);c!=null&&(a=c.gradFunc),a!=null&&(l.gradient=function(h){return h=h.map(function(d,v){if(d==null){var m=r[v],g=ul(m.size,m.dtype);return s.makeTensor(g,m.shape,m.dtype)}return d}),a(h.length>1?h:h[0],i)}),this.state.activeTape.push(l)},n.prototype.keep=function(e){return e.kept=!0,e},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},n.prototype.endScope=function(e){for(var t=this,r=FS(e),a=new Set(r.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var s=this.state.activeScope.track[i];s.kept||a.has(s.id)||s.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(c){c.kept||c.scopeId!==l.id||t.track(c)})},n.prototype.gradients=function(e,t,r,a){var i=this;if(a===void 0&&(a=!1),L(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)});L(s instanceof Et,function(){return"The result y returned by f() must be a tensor."});var l=function(c,h,d){for(var v={},m={},g=0;g<h.length;g++)v[h[g].id]=!0;for(g=0;g<c.length;g++){var x=(D=c[g]).inputs;for(var w in x){for(var S=x[w],E=!1,_=0;_<h.length;_++)if(v[S.id]){D.outputs.forEach(function(I){return v[I.id]=!0}),E=!0,m[D.id]=!0;break}if(E)break}}var R={};R[d.id]=!0;var A={};for(g=c.length-1;g>=0;g--)for(x=(D=c[g]).inputs,_=0;_<D.outputs.length;_++)if(R[D.outputs[_].id]){for(var w in x)R[x[w].id]=!0,A[D.id]=!0;break}var C=[];for(g=0;g<c.length;g++){var D;if(m[(D=c[g]).id]&&A[D.id]){var O={};for(var w in D.inputs){var F=D.inputs[w];v[F.id]&&(O[w]=F)}var N=Object.assign({},D);N.inputs=O,N.outputs=D.outputs,C.push(N)}}return C}(this.state.activeTape,t,s);if(!a&&l.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,h,d={};d[s.id]=r??(c=s.shape,h=kS(_e(c),"float32"),G.makeTensor(h,c,"float32")),function(m,g,x){for(var w=function(E){var _=g[E],R=[];if(_.outputs.forEach(function(O){var F=m[O.id];F!=null?R.push(F):R.push(null)}),_.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+_.kernelName+".");var A=_.gradient(R),C=function(O){if(!(O in A))throw new Error("Cannot backprop through input "+O+". Available gradients found: "+Object.keys(A)+".");var F=x(function(){return A[O]()});if(F.dtype!=="float32")throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input "+O+" must have 'float32' dtype, but has '"+F.dtype+"'");var N=_.inputs[O];if(!Jt(F.shape,N.shape))throw new Error("Error in gradient for op "+_.kernelName+". The gradient of input '"+O+"' has shape '"+F.shape+"', which does not match the shape of the input '"+N.shape+"'");if(m[N.id]==null)m[N.id]=F;else{var I=m[N.id];m[N.id]=I.add(F),I.dispose()}};for(var D in _.inputs)C(D)},S=g.length-1;S>=0;S--)w(S)}(d,l,function(m){return i.tidy(m)});var v=t.map(function(m){return d[m.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(m){for(var g=0,x=m.saved;g<x.length;g++)x[g].dispose()}),i.state.activeTape=null),{value:s,grads:v}})},n.prototype.customGrad=function(e){var t=this;return L(Vv(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];L(a.every(function(l){return l instanceof Et}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return a.forEach(function(l,c){s[c]=l}),t.runKernelFunc(function(l,c){return L((r=e.apply(void 0,a.concat([c]))).value instanceof Et,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),L(Vv(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},s,function(l,c){var h=r.gradFunc(l,c),d=Array.isArray(h)?h:[h];L(d.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),L(d.every(function(m){return m instanceof Et}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var v={};return d.forEach(function(m,g){v[g]=function(){return m}}),v})}},n.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},n.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},n.prototype.time=function(e){return we(this,void 0,void 0,function(){var t,r;return Se(this,function(a){switch(a.label){case 0:return t=Gr(),[4,this.backend.time(e)];case 1:return(r=a.sent()).wallMs=Gr()-t,[2,r]}})})},n.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new vw,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),G=function(){var n=function(){if(qp==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}qp=t}return qp}();if(n._tfengine==null){var e=new XN(n);n._tfengine=new pM(e)}return function(t){_S=t}(n._tfengine.ENV),qr=function(){return n._tfengine},n._tfengine}();function BS(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Aa=le();Aa.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Aa.registerFlag("IS_BROWSER",function(){return BS()}),Aa.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Aa.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Aa.registerFlag("PROD",function(){return!1}),Aa.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Aa.getBool("DEBUG")}),Aa.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Aa.registerFlag("IS_TEST",function(){return!1});var qs,Qn,Yn,Wi={},Kp={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function vM(n,e){Wi[n]=e}function aa(n){n in Wi||(Wi[n]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete Wi[t]},!1),t===1?r.getContext("webgl",Kp)||r.getContext("experimental-webgl",Kp):r.getContext("webgl2",Kp)}(n));var e=Wi[n];return e.isContextLost()?(delete Wi[n],aa(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Wi[n])}function Zf(n,e){return[e,n]}function Ms(n){var e=_e(n);return Hv(Math.ceil(e/4))}function sl(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function Im(n,e){var t,r,a,i,s,l,c,h,d,v=n;return le().getNumber("WEBGL_VERSION")===2?(t=v.R32F,r=v.R16F,a=v.RGBA16F,i=v.RGBA32F,s=v.RED,l=4,c=1,h=v.HALF_FLOAT,d=v.FLOAT):(t=n.RGBA,r=n.RGBA,a=n.RGBA,i=v.RGBA,s=n.RGBA,l=4,c=4,h=e!=null?e.HALF_FLOAT_OES:null,d=n.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function Ce(n,e,t){var r=t();return e&&function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+bM(a,i))}(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(qs||(qs={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(Qn||(Qn={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Yn||(Yn={}));var mM=596e-10,gM=65504;function yM(n){return!!(le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||mM<Math.abs(n)&&Math.abs(n)<gM)}function bM(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function jc(n,e,t){return Ia(n,e,function(){return n.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function xM(n,e,t){var r=Ia(n,e,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Ce(n,e,function(){return n.shaderSource(r,t)}),Ce(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function wM(n,e,t){var r=Ia(n,e,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Ce(n,e,function(){return n.shaderSource(r,t)}),Ce(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw function(a,i){var s=SM.exec(i);if(s==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var l=+s[1],c=a.split(`
`),h=c.length.toString().length+2,d=c.map(function(S,E){return lu((E+1).toString(),h)+S}),v=0,m=0;m<d.length;m++)v=Math.max(d[m].length,v);var g=d.slice(0,l-1),x=d.slice(l-1,l),w=d.slice(l);console.log(g.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+lu(x[0],v),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(w.join(`
`))}(t,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Xp,$p,SM=/ERROR: [0-9]+:([0-9]+):/g;function EM(n,e){return Ia(n,e,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function _M(n,e,t){if(Ce(n,e,function(){return n.linkProgram(t)}),n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Zp(n,e,t){if(Ce(n,e,function(){return n.validateProgram(t)}),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function CM(n,e,t){var r=Ia(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Ce(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),Ce(n,e,function(){return n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function RM(n,e,t){var r=Ia(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Ce(n,e,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),Ce(n,e,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function AM(n,e){return Ia(n,e,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function TM(n,e){var t=le().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){var r="["+n+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t)throw r="["+n+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function DM(n,e){return Ia(n,e,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function mw(n,e,t,r,a,i,s,l){var c=n.getAttribLocation(t,r);return c!==-1&&(Ce(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,a)}),Ce(n,e,function(){return n.vertexAttribPointer(c,i,n.FLOAT,!1,s,l)}),Ce(n,e,function(){return n.enableVertexAttribArray(c)}),!0)}function OM(n,e,t,r){FM(n,r),Ce(n,e,function(){return n.activeTexture(n.TEXTURE0+r)}),Ce(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)})}function kM(n,e,t,r){return Ia(n,e,function(){return n.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function NM(n,e,t){return n.getUniformLocation(e,t)}function MM(n,e,t,r,a,i){Ce(n,e,function(){return OM(n,e,r,i)}),Ce(n,e,function(){return n.uniform1i(a,i)})}function Yp(n,e,t,r){Ce(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),Ce(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)})}function gw(n,e,t){Ce(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,t)}),Ce(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function Wc(n){var e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+IM(n,e))}function IM(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Ia(n,e,t,r){var a=Ce(n,e,function(){return t()});if(a==null)throw new Error(r);return a}function FM(n,e){var t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function wf(n,e){return e===void 0&&(e=2),_e(n.slice(0,n.length-e))}function Sf(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function Qp(n){var e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[wf(n)].concat(Sf(n))),e}function BM(n,e){var t;e===void 0&&(e=!1);var r=le().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(n=n.map(function(h,d){return d>=n.length-2?TS(n[d]):n[d]})).length===1&&(n=[2,n[0]])),n.length!==2){var a=qi(n);n=a.newShape}var i=_e(n);if(n.length<=1&&i<=r)return[1,i];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(e){var s=wf(n),l=2,c=2;return n.length&&(l=(t=Sf(n))[0],c=t[1]),Hv(i=s*(l/2)*(c/2)).map(function(h){return 2*h})}return Hv(i)}function Gc(n){return n%2==0}function qc(n,e){if(Jt(n=n.slice(-2),e=e.slice(-2))||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){var t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||Gc(t)&&Gc(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&Gc(n[0])&&Gc(e[0])}function LM(n){if(Xp==null){var e=aa(n);Xp=e.getParameter(e.MAX_TEXTURE_SIZE)}return Xp}function zM(n){if($p==null){var e=aa(n);$p=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$p)}function PM(n){if(n===0)return 0;var e=aa(n);return br(e,"EXT_disjoint_timer_query_webgl2")&&n===2?2:br(e,"EXT_disjoint_timer_query")?1:0}function br(n,e){return n.getExtension(e)!=null}function yw(n){try{if(aa(n)!=null)return!0}catch{return!1}return!1}function UM(n){if(n===0)return!1;var e=aa(n);if(n===1){if(!br(e,"OES_texture_float"))return!1}else if(!br(e,"EXT_color_buffer_float"))return!1;return Xv(e)}function HM(n){if(n===0)return!1;var e=aa(n);if(n!==1){if(br(e,"EXT_color_buffer_float"))return Xv(e);if(br(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return function(r,a){var i=Im(r,a),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var l=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,l),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(l),c}(e,t)}return!1}return!!br(e,"OES_texture_float")&&!!br(e,"WEBGL_color_buffer_float")&&Xv(e)}function Xv(n){var e=Im(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(r),a}function VM(n){return n===2&&aa(n).fenceSync!=null}var Ne=le();function LS(n){le().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function be(n,e){return G.tidy(n,e)}function Fn(n){FS(n).forEach(function(e){return e.dispose()})}function jM(n){return G.keep(n)}function Ef(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];le().getBool("IS_TEST")||console.warn.apply(console,n)}function Si(n,e){var t=n;if(Yr(n))return e==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(t)||Yr(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&le().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(i,s,l){if(l=l||[],!Array.isArray(i)&&!Yr(i))return void L(s.length===0,function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"});L(s.length>0,function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),L(i.length===s[0],function(){return"Element arr["+l.join("][")+"] should have "+s[0]+" elements, but has "+i.length+" elements"});for(var c=s.slice(1),h=0;h<i.length;++h)a(i[h],c,l.concat(h))}(n,r,[]),r}function bw(n,e,t,r){if(n!=null&&(n!=="numeric"&&n!==e||n==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+n+" tensor, but got "+e+" tensor")}function M(n,e,t,r){if(r===void 0&&(r="numeric"),n instanceof Et)return bw(r,n.dtype,e,t),n;var a=ol(n);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),bw(r,a,e,t),n==null||!Yr(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var i=n==null?"null":n.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+i+"'")}var s=Si(n,a);Yr(n)||Array.isArray(n)||(n=[n]);var l=a!=="string"?OS(n,a,le().getBool("DEBUG")):xu(n,[],!0);return G.makeTensor(l,s,a)}function _f(n,e,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(a,i){return M(a,e+"["+i+"]",t)},r)}function zS(n,e){for(var t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function WM(n,e,t){for(var r=n.length+e.length,a=[],i=0,s=0,l=0;l<r;l++)t.indexOf(l)===-1?a.push(n[i++]):a.push(e[s++]);return a}function vn(n,e){for(var t=[],r=n.length,a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);return[t,e.map(function(i){return n[i]})]}function Ln(n,e){return WM(n,e.map(function(t){return 1}),e)}function Zn(n,e,t){L(zS(e,t),function(){return n+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."})}function ia(n,e){if(zS(n,e))return null;for(var t=[],r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(function(a){return t.push(a)}),t}function Fm(n){return n.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function oa(n,e){for(var t=[],r=e-n;r<e;++r)t.push(r);return t}function GM(n,e){var t=n[0].length;n.forEach(function(a,i){L(a.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+t+")"})}),L(e>=0&&e<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=n[0];n.forEach(function(a,i){for(var s=0;s<t;s++)L(s===e||a[s]===r[s],function(){return"Error in concat"+t+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Su(n,e){for(var t=n[0].slice(),r=1;r<n.length;r++)t[e]+=n[r][e];return t}function V(n){var e=Object.keys(n);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var a=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];G.startScope(t);try{var l=r.apply(void 0,i);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),G.endScope(l),l}catch(c){throw G.endScope(null),c}};return Object.defineProperty(a,"name",{value:t,configurable:!0}),a}Ne.registerFlag("HAS_WEBGL",function(){return Ne.getNumber("WEBGL_VERSION")>0}),Ne.registerFlag("WEBGL_VERSION",function(){return yw(2)?2:yw(1)?1:0}),Ne.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ne.get("WEBGL_VERSION")===2}),Ne.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ne.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ne.registerFlag("WEBGL_PACK",function(){return Ne.getBool("HAS_WEBGL")}),Ne.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_PACK_CLIP",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ne.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_PACK_REDUCE",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_CONV_IM2COL",function(){return Ne.getBool("WEBGL_PACK")}),Ne.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return LM(Ne.getNumber("WEBGL_VERSION"))}),Ne.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return zM(Ne.getNumber("WEBGL_VERSION"))}),Ne.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=Ne.getNumber("WEBGL_VERSION");return n===0?0:PM(n)}),Ne.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ne.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),Ne.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return UM(Ne.getNumber("WEBGL_VERSION"))}),Ne.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ne.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ne.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ne.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return HM(Ne.getNumber("WEBGL_VERSION"))}),Ne.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return VM(Ne.getNumber("WEBGL_VERSION"))}),Ne.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ne.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),IS=LS;var ln=V({complex_:function(n,e){var t=M(n,"real","complex"),r=M(e,"imag","complex");return st(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),G.runKernelFunc(function(a){return a.complex(t,r)},{$real:t,$imag:r})}}),yr=V({real_:function(n){var e=M(n,"input","real");return G.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),Kr=V({imag_:function(n){var e=M(n,"input","imag");return G.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function hn(n,e,t){return Ei(n,e,Si(n,t),t)}function Ei(n,e,t,r){if(r==null&&(r=ol(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Yr(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){NS(e);var a=_e(e),i=_e(t);L(a===i,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+a+" values but has "+i});for(var s=0;s<t.length;++s){var l=t[s],c=s!==t.length-1||l!==_e(e.slice(s));L(t[s]===e[s]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "})}}return Yr(n)||Array.isArray(n)||(n=[n]),e=e||t,n=r!=="string"?OS(n,r,le().getBool("DEBUG")):xu(n,[],!0),G.makeTensor(n,e,r)}function ge(n,e){if((Yr(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Yr(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ei(n,[],[],e)}function Ut(n,e){Tu(n);var t=Si(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ei(n,null,t,e)}function gi(n,e,t){if(Tu(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Si(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ei(n,e,r,t)}function Bm(n,e,t){if(Tu(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Si(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ei(n,e,r,t)}function Mn(n,e,t){if(Tu(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Si(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ei(n,e,r,t)}function qM(n,e,t){if(Tu(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Si(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ei(n,e,r,t)}function KM(n,e,t){if(Tu(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Si(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ei(n,e=e||r,r,t)}function XM(n,e,t,r){return e===void 0&&(e=!0),G.makeVariable(n,e,t,r)}function Du(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Du(n,"float32"),r=bt(n,"float32");return ln(t,r)}var a=kS(_e(n),e);return G.makeTensor(a,n,e)}function bt(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=bt(n,"float32"),r=bt(n,"float32");return ln(t,r)}var a=ul(_e(n),e);return G.makeTensor(a,n,e)}function Jr(n,e,t){return G.runKernelFunc(function(r){return r.fill(n,e,t)},{})}function $M(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");return G.runKernelFunc(function(r){return r.linspace(n,e,t)},{})}function Cf(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(n===e||n<e&&t<0||e<n&&t>1)return bt([0],r);var a=ul(Math.abs(Math.ceil((e-n)/t)),r);e<n&&t===1&&(t=-1),a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+t;return Ut(a,r)}var PS=V({onesLike_:function(n){var e=M(n,"x","onesLike");if(e.dtype==="complex64"){var t=PS(yr(e)),r=Qe(Kr(e));return ln(t,r)}return G.runKernelFunc(function(a){return a.onesLike(e)},{$x:e},function(a,i){return{$x:function(){return Qe(a)}}})}}),Qe=V({zerosLike_:function(n){var e=M(n,"x","zerosLike");return G.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,r){return{$x:function(){return Qe(t)}}})}}),Gt=V({concat_:function(n,e){e===void 0&&(e=0),L(n.length>=1,function(){return"Pass at least one tensor to concat"});var t=_f(n,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")}),e=$t(e,t[0].shape)[0];var r=Su(t.map(function(l){return l.shape}),e);if(_e(r)===0)return hn([],r);if((t=t.filter(function(l){return l.size>0})).length===1)return t[0];var a=t.map(function(l){return l.shape});GM(a,e);var i=t,s={axis:e};return G.runKernelFunc(function(l){return l.concat(t,e)},i,function(l){var c=a.map(function(h){return h[e]});return Lm(l,c,e).map(function(h){return function(){return h}})},"Concat",s)}}),ZM=V({concat1d_:function(n){return Gt(n,0)}}),YM=V({concat2d_:function(n,e){return Gt(n,e)}}),QM=V({concat3d_:function(n,e){return Gt(n,e)}}),JM=V({concat4d_:function(n,e){return Gt(n,e)}}),Lm=V({split_:function(n,e,t){t===void 0&&(t=0);var r,a=M(n,"x","split");return t=$t(t,a.shape)[0],typeof e=="number"?(L(a.shape[t]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(a.shape[t]/e)):(L(a.shape[t]===e.reduce(function(i,s){return i+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),G.runKernelFunc(function(i){return i.split(a,r,t)},{$x:a},function(i){return{$x:function(){return Gt(i,t)}}})}});function ao(n,e){return n(e={exports:{}},e.exports),e.exports}var eI=ao(function(n){(function(e,t,r){function a(l){var c,h=this,d=(c=4022871197,function(v){v=v.toString();for(var m=0;m<v.length;m++){var g=.02519603282416938*(c+=v.charCodeAt(m));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});h.next=function(){var v=2091639*h.s0+23283064365386963e-26*h.c;return h.s0=h.s1,h.s1=h.s2,h.s2=v-(h.c=0|v)},h.c=1,h.s0=d(" "),h.s1=d(" "),h.s2=d(" "),h.s0-=d(l),h.s0<0&&(h.s0+=1),h.s1-=d(l),h.s1<0&&(h.s1+=1),h.s2-=d(l),h.s2<0&&(h.s2+=1),d=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function s(l,c){var h=new a(l),d=c&&c.state,v=h.next;return v.int32=function(){return 4294967296*h.next()|0},v.double=function(){return v()+11102230246251565e-32*(2097152*v()|0)},v.quick=v,d&&(typeof d=="object"&&i(d,h),v.state=function(){return i(h,{})}),v}t&&t.exports?t.exports=s:this.alea=s})(0,n)}),tI=ao(function(n){(function(e,t,r){function a(l){var c=this,h="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var v=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^v^v>>>8},l===(0|l)?c.x=l:h+=l;for(var d=0;d<h.length+64;d++)c.x^=0|h.charCodeAt(d),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function s(l,c){var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&i(d,h),v.state=function(){return i(h,{})}),v}t&&t.exports?t.exports=s:this.xor128=s})(0,n)}),nI=ao(function(n){(function(e,t,r){function a(l){var c=this,h="";c.next=function(){var v=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^v^v<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:h+=l;for(var d=0;d<h.length+64;d++)c.x^=0|h.charCodeAt(d),d==h.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function s(l,c){var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&i(d,h),v.state=function(){return i(h,{})}),v}t&&t.exports?t.exports=s:this.xorwow=s})(0,n)}),rI=ao(function(n){(function(e,t,r){function a(l){var c=this;c.next=function(){var h,d,v=c.x,m=c.i;return h=v[m],d=(h^=h>>>7)^h<<24,d^=(h=v[m+1&7])^h>>>10,d^=(h=v[m+3&7])^h>>>3,d^=(h=v[m+4&7])^h<<7,h=v[m+7&7],d^=(h^=h<<13)^h<<9,v[m]=d,c.i=m+1&7,d},function(h,d){var v,m=[];if(d===(0|d))m[0]=d;else for(d=""+d,v=0;v<d.length;++v)m[7&v]=m[7&v]<<15^d.charCodeAt(v)+m[v+1&7]<<13;for(;m.length<8;)m.push(0);for(v=0;v<8&&m[v]===0;++v);for(v==8?m[7]=-1:m[v],h.x=m,h.i=0,v=256;v>0;--v)h.next()}(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function s(l,c){l==null&&(l=+new Date);var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(d.x&&i(d,h),v.state=function(){return i(h,{})}),v}t&&t.exports?t.exports=s:this.xorshift7=s})(0,n)}),aI=ao(function(n){(function(e,t,r){function a(l){var c=this;c.next=function(){var h,d,v=c.w,m=c.X,g=c.i;return c.w=v=v+1640531527|0,d=m[g+34&127],h=m[g=g+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,d=m[g]=d^h,c.i=g,d+(v^v>>>16)|0},function(h,d){var v,m,g,x,w,S=[],E=128;for(d===(0|d)?(m=d,d=null):(d+="\0",m=0,E=Math.max(E,d.length)),g=0,x=-32;x<E;++x)d&&(m^=d.charCodeAt((x+32)%d.length)),x===0&&(w=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,x>=0&&(w=w+1640531527|0,g=(v=S[127&x]^=m+w)==0?g+1:0);for(g>=128&&(S[127&(d&&d.length||0)]=-1),g=127,x=512;x>0;--x)m=S[g+34&127],v=S[g=g+1&127],m^=m<<13,v^=v<<17,m^=m>>>15,v^=v>>>12,S[g]=m^v;h.w=w,h.X=S,h.i=g}(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function s(l,c){l==null&&(l=+new Date);var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(d.X&&i(d,h),v.state=function(){return i(h,{})}),v}t&&t.exports?t.exports=s:this.xor4096=s})(0,n)}),iI=ao(function(n){(function(e,t,r){function a(l){var c=this,h="";c.next=function(){var v=c.b,m=c.c,g=c.d,x=c.a;return v=v<<25^v>>>7^m,m=m-g|0,g=g<<24^g>>>8^x,x=x-v|0,c.b=v=v<<20^v>>>12^m,c.c=m=m-g|0,c.d=g<<16^m>>>16^x,c.a=x-v|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):h+=l;for(var d=0;d<h.length+20;d++)c.b^=0|h.charCodeAt(d),c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function s(l,c){var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&i(d,h),v.state=function(){return i(h,{})}),v}t&&t.exports?t.exports=s:this.tychei=s})(0,n)}),Gi=ao(function(n){(function(e,t){var r,a=this,i=256,s=6,l="random",c=t.pow(i,s),h=t.pow(2,52),d=2*h,v=i-1;function m(E,_,R){var A=[],C=w(function F(N,I){var U,H=[],J=typeof N;if(I&&J=="object")for(U in N)try{H.push(F(N[U],I-1))}catch{}return H.length?H:J=="string"?N:N+"\0"}((_=_==1?{entropy:!0}:_||{}).entropy?[E,S(e)]:E??function(){try{var F;return r&&(F=r.randomBytes)?F=F(i):(F=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(F)),S(F)}catch{var N=a.navigator,I=N&&N.plugins;return[+new Date,a,I,a.screen,S(e)]}}(),3),A),D=new g(A),O=function(){for(var F=D.g(s),N=c,I=0;F<h;)F=(F+I)*i,N*=i,I=D.g(1);for(;F>=d;)F/=2,N/=2,I>>>=1;return(F+I)/N};return O.int32=function(){return 0|D.g(4)},O.quick=function(){return D.g(4)/4294967296},O.double=O,w(S(D.S),e),(_.pass||R||function(F,N,I,U){return U&&(U.S&&x(U,D),F.state=function(){return x(D,{})}),I?(t[l]=F,N):F})(O,C,"global"in _?_.global:this==t,_.state)}function g(E){var _,R=E.length,A=this,C=0,D=A.i=A.j=0,O=A.S=[];for(R||(E=[R++]);C<i;)O[C]=C++;for(C=0;C<i;C++)O[C]=O[D=v&D+E[C%R]+(_=O[C])],O[D]=_;(A.g=function(F){for(var N,I=0,U=A.i,H=A.j,J=A.S;F--;)N=J[U=v&U+1],I=I*i+J[v&(J[U]=J[H=v&H+N])+(J[H]=N)];return A.i=U,A.j=H,I})(i)}function x(E,_){return _.i=E.i,_.j=E.j,_.S=E.S.slice(),_}function w(E,_){for(var R,A=E+"",C=0;C<A.length;)_[v&C]=v&(R^=19*_[v&C])+A.charCodeAt(C++);return S(_)}function S(E){return String.fromCharCode.apply(0,E)}if(t["seed"+l]=m,w(t.random(),e),n.exports){n.exports=m;try{r=require("crypto")}catch{}}})([],Math)});Gi.alea=eI,Gi.xor128=tI,Gi.xorwow=nI,Gi.xorshift7=rI,Gi.xor4096=aI,Gi.tychei=iI;var Yf=Gi.alea,zm=function(){function n(e,t,r,a,i){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=i||Math.random();this.random=Yf(s.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,r,a=!1;!a;){var i=void 0,s=void 0,l=void 0;do l=(i=2*this.random()-1)*i+(s=2*this.random()-1)*s;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);t=this.mean+this.stdDev*i*c,r=this.mean+this.stdDev*s*c,this.truncated&&!this.isValidTruncated(t)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},n.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},n.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},n}(),oI=function(){function n(e,t,r,a){this.alpha=e,this.beta=1/t,this.dtype=r;var i=a||Math.random();this.randu=Yf(i.toString()),this.randn=new zm(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var e,t,r,a,i,s;;){do a=this.randn.nextValue(),s=1+this.c*a;while(s<=0);if(s*=s*s,t=1-.331*(e=a*a)*e,r=.5*e+this.d*(1-s+Math.log(s)),(i=this.randu())<t||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},n.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},n}(),uI=function(){function n(e,t,r,a){var i=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Yf(a)}return n.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}();function Le(n,e,t){return e===void 0&&(e="float32"),e=e||"float32",NS(n),new Gs(n,e,t)}function sI(n,e){e===void 0&&(e=!1),console.log(n.toString(e))}var US=V({batchToSpaceND_:function(n,e,t){var r=M(n,"x","batchToSpaceND"),a=e.reduce(function(i,s){return i*s});return L(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),L(t.length===e.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length}),L(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+a}),G.runKernelFunc(function(i){return i.batchToSpaceND(r,e,t)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(e,t)}}})}}),lI=V({broadcastTo_:function(n,e){var t=M(n,"broadcastTo","x"),r=t.shape;if(e.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var a=t.shape.slice();a.length<e.length;)a.unshift(1);t=t.reshape(a)}for(var i=Array.from(e),s=e.length-1;s>=0;s--)if(t.shape[s]===e[s])i[s]=1;else if(t.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var l=i.map(function(c,h){return c>1?h:-1}).filter(function(c){return c>=0});return l.length===0?t.clone():G.runKernelFunc(function(c){return c.tile(t,i)},{input:t},function(c){return{input:function(){return c.sum(l,!0)}}})}}),cI=V({cast_:function(n,e){var t=M(n,"x","cast");if(!nM(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return G.runKernelFunc(function(a){return a.cast(t,e)},{x:t},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),fI=V({clone_:function(n){var e=M(n,"x","clone",null);return G.runKernelFunc(function(){return G.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),hI=V({cumsum_:function(n,e,t,r){e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var a=M(n,"x","cumsum"),i=ia([e|=0],a.rank),s=a;i!=null&&(s=a.transpose(i));var l=oa(1,a.rank)[0],c=G.runKernelFunc(function(h){return h.cumsum(s,l,t,r)},{permutedX:s},function(h){return{permutedX:function(){return h.cumsum(e,t,!r)}}});return i!=null&&(c=c.transpose(i)),c}}),dI=V({depthToSpace_:function(n,e,t){t===void 0&&(t="NHWC");var r=M(n,"x","depthToSpace"),a=t==="NHWC"?r.shape[1]:r.shape[2],i=t==="NHWC"?r.shape[2]:r.shape[3],s=t==="NHWC"?r.shape[3]:r.shape[1];return L(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),L(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+` for depthToSpace with input shape
          `+r.shape}),L(s%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+s+" for depthToSpace with input shape "+r.shape}),G.runKernelFunc(function(l){return l.depthToSpace(r,e,t)},{$x:r})}}),gr=V({expandDims_:function(n,e){e===void 0&&(e=0);var t=M(n,"x","expandDims",null);L(e<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return e<0&&(L(-(t.rank+1)<=e,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),e=t.rank+e+1),r.splice(e,0,1),Dr(t,r)}}),HS=V({eye_:function(n,e,t,r){r===void 0&&(r="float32"),e==null&&(e=n);for(var a=Le([n,e],r),i=n<=e?n:e,s=0;s<i;++s)a.set(1,s,s);var l=a.toTensor().as2D(n,e);if(t==null)return l;if(t.length===1)return cu(gr(l,0),[t[0],1,1]);if(t.length===2)return cu(gr(gr(l,0),0),[t[0],t[1],1,1]);if(t.length===3)return cu(gr(gr(gr(l,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),pI=V({multinomial_:function(n,e,t,r){r===void 0&&(r=!1);var a=M(n,"logits","multinomial"),i=a.size,s=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);t=t||Math.random();var l=s===1?a.as2D(1,-1):a,c=G.runKernelFunc(function(h){return h.multinomial(l,r,e,t)},{logits2D:l});return s===1?c.as1D():c}}),$v=V({oneHot_:function(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var a=M(n,"indices","oneHot","int32"),i=a.shape.concat([e]);return a=a.flatten(),G.runKernelFunc(function(s){return s.oneHot(a,e,t,r)},{$indices:a},function(s){return{$indices:function(){return bt(a.shape,"float32")}}}).reshape(i)}}),io=V({pad_:function(n,e,t){t===void 0&&(t=0);var r=M(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:e,constantValue:t};return G.runKernelFunc(function(i){return i.pad(r,e,t)},{x:r},function(i){var s=e.map(function(l){return l[0]});return{x:function(){return i.slice(s,r.shape)}}},"PadV2",a)}}),vI=V({pad1d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),io(n,[e],t)}}),mI=V({pad2d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),io(n,e,t)}}),gI=V({pad3d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),io(n,e,t)}}),yI=V({pad4d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),io(n,e,t)}}),bI=V({rand_:function(n,e,t){var r=_e(n),a=null;if(t==null||t==="float32")a=new Float32Array(r);else if(t==="int32")a=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=e();return G.makeTensor(a,n,t)}}),xI=V({randomNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new zm(e,t,r,!1,a),s=Le(n,r),l=0;l<s.values.length;l++)s.values[l]=i.nextValue();return s.toTensor()}}),wI=V({randomGamma_:function(n,e,t,r,a){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new oI(e,t,r,a),s=Le(n,r),l=0;l<s.values.length;l++)s.values[l]=i.nextValue();return s.toTensor()}}),VS=V({randomUniform_:function(n,e,t,r,a){e===void 0&&(e=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var i=Le(n,r),s=new uI(e,t,null,a),l=0;l<i.values.length;l++)i.values[l]=s.nextValue();return i.toTensor()}}),Dr=V({reshape_:function(n,e){var t=M(n,"x","reshape",null);e=eM(e,t.size),L(t.size===_e(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return G.runKernelFunc(function(a){return a.reshape(t,e)},{x:t},function(a){return{x:function(){return a.reshape(t.shape)}}},"Reshape",r)}}),jS=V({spaceToBatchND_:function(n,e,t){var r=M(n,"x","spaceToBatchND");return L(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),L(t.length===e.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length}),L(r.shape.reduce(function(a,i,s){return s>0&&s<=e.length?a&&(i+t[s-1][0]+t[s-1][1])%e[s-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()}),G.runKernelFunc(function(a){return a.spaceToBatchND(r,e,t)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(e,t)}}})}}),WS=V({squeeze_:function(n,e){var t=M(n,"x","squeeze");return Dr(t,qi(t.shape,e).newShape)}}),nr=V({stack_:function(n,e){e===void 0&&(e=0);var t=_f(n,"tensors","stack");if(L(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(e);var r=t[0].rank,a=t[0].shape,i=t[0].dtype;L(e<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(l){st(a,l.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(l){L(i===l.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=t.map(function(l){return l.expandDims(e)});return Gt(s,e)}}),cu=V({tile_:function(n,e){var t=M(n,"x","tile",null);L(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."});var r=[t],a={reps:e};return G.runKernelFunc(function(i,s){var l=i.tile(t,e);return s([t]),l},{x:t},function(i,s){var l=s[0];return{x:function(){var c=Qe(l);if(l.rank===1)for(var h=0;h<e[0];++h)c=c.add(i.slice([h*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(h=0;h<e[0];++h)for(var d=0;d<e[1];++d)c=c.add(i.slice([h*l.shape[0],d*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(h=0;h<e[0];++h)for(d=0;d<e[1];++d)for(var v=0;v<e[2];++v)c=c.add(i.slice([h*l.shape[0],d*l.shape[1],v*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(h=0;h<e[0];++h)for(d=0;d<e[1];++d)for(v=0;v<e[2];++v)for(var m=0;m<e[3];++m)c=c.add(i.slice([h*l.shape[0],d*l.shape[1],v*l.shape[2],m*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}},"Tile",a,r)}}),SI=V({truncatedNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new zm(e,t,r,!0,a),s=Le(n,r),l=0;l<s.values.length;l++)s.values[l]=i.nextValue();return s.toTensor()}}),qt=V({unstack_:function(n,e){e===void 0&&(e=0),e=e||0;var t=M(n,"x","unstack");L(e>=-t.shape.length&&e<t.shape.length,function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),e<0&&(e+=t.shape.length);var r={axis:e};return G.runKernelFunc(function(a){return a.unstack(t,e)},{x:t},function(a){return{x:function(){return nr(a,e)}}},"Unpack",r)}}),EI=function(n,e){return we(this,void 0,void 0,function(){var t,r,a,i,s,l,c,h,d,v;return Se(this,function(m){switch(m.label){case 0:return t=M(n,"x","setdiff1d"),r=M(e,"y","setdiff1d"),L(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),L(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),L(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return a=m.sent(),[4,r.data()];case 2:for(i=m.sent(),s=new Set(i),l=0,d=0;d<a.length;d++)s.has(a[d])||l++;for(c=new Gs([l],t.dtype),h=new Gs([l],"int32"),d=0,v=0;d<a.length;d++)s.has(a[d])||(c.values[v]=a[d],h.values[v]=d,v++);return[2,[c.toTensor(),h.toTensor()]]}})})};function Rf(n,e,t,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(e.slice(0))).push(n[0]/t),a=a.concat(n.slice(1));else{a=a.concat(n[0]);for(var i=e.length,s=0;s<i;++s)a=a.concat([n[s+1]/e[s],e[s]]);a=a.concat(n.slice(i+1))}return a}function Af(n,e,t){t===void 0&&(t=!0);var r=[];if(t){r.push(e);for(var a=e+1;a<n;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{var i=[],s=[];for(a=1;a<n;++a)a>=2*e+1||a%2==1?s.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,s)}return r}function Tf(n,e,t,r){r===void 0&&(r=!0);var a=[];r?a.push(n[0]/t):a.push(n[0]*t);for(var i=1;i<n.length;++i)i<=e.length?r?a.push(e[i-1]*n[i]):a.push(n[i]/e[i-1]):a.push(n[i]);return a}function GS(n,e){for(var t=[0],r=0;r<e;++r)t.push(n[r][0]);return t}function qS(n,e,t){for(var r=n.slice(0,1),a=0;a<t;++a)r.push(n[a+1]-e[a][0]-e[a][1]);return r}function KS(n,e){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var t=e.shape,r=t[t.length-1],a=1,i=0;i<t.length-1;++i)a*=t[i];var s=n.shape,l=t.slice();l.pop();var c=1;for(i=r;i<n.rank;++i)c*=s[i],l.push(s[i]);var h=Qr(n.shape).map(function(d){return d/c}).concat([1]).slice(0,r);return[l,a,c,h]}var XS=30;function Jp(n){return n<=XS?n:jv(n,Math.floor(Math.sqrt(n)))}function _I(n,e,t){var r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+a+".";if(t.rank<a)throw new Error(i+" update.rank < "+a+". ");if(n.length<r+(t.rank-a))throw new Error(i+" Output shape length < "+(r+(t.rank-a)));if(t.rank!==a+n.length-r)throw new Error(i+" update.rank != "+(a+n.length-r));for(var s=0;s<a;++s)if(t.shape[s]!==e.shape[s])throw new Error(i+" updates.shape["+s+"] ("+t.shape[s]+") != indices.shape["+s+"] ("+e.shape[s]+").");for(s=0;s<t.rank-a;++s)if(t.shape[s+a]!==n[s+r])throw new Error(i+" updates.shape["+(s+a)+"] ("+t.shape[s+a]+") != shape["+(s+a)+"] ("+n[s+a]+")")}function CI(n,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}_I(t,e,n)}function Df(n,e,t){for(var r=e.shape.length,a=r>1?e.shape[r-1]:1,i=t.length,s=1,l=a;l<i;++l)s*=t[l];var c=a<1?1:a;return{sliceRank:a,numUpdates:_e(e.shape)/c,sliceSize:s,strides:Qr(t.slice(0,a)).concat([1]),outputSize:_e(t)}}function RI(n,e,t){L(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+e+" must match the rank of the array ("+n.rank+")."}),L(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of size "+t+" must match the rank of the array ("+n.rank+")."});for(var r=function(i){L(e[i]+t[i]<=n.shape[i],function(){return"Error in slice"+n.rank+"D: begin["+i+"] + size["+i+"] ("+(e[i]+t[i])+") would overflow input.shape["+i+"] ("+n.shape[i]+")"})},a=0;a<n.rank;++a)r(a)}function xw(n){for(var e=[],t=0;n>0;)1&n&&e.push(t),n/=2,t++;return e}function Pm(n,e,t){for(var r=[],a=0;a<n.length;a++)r[a]=Math.ceil((e[a]-n[a])/t[a]);return r}function AI(n,e,t,r,a){var i=e[a],s=t[a]||1;(n&1<<a||i==null)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=r[a];return i<0&&(i+=l),i=Uv(0,i,l-1)}function TI(n,e,t,r,a){var i=e[a],s=t[a]||1;(n&1<<a||i==null)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=r[a];return i<0&&(i+=l),i=s>0?Uv(0,i,l):Uv(-1,i,l-1)}function $S(n,e,t){for(var r=t.length,a=0;a<t.length;a++)if(t[a]>1){r=a;break}for(a=r+1;a<t.length;a++)if(e[a]>0||t[a]!==n[a])return!1;return!0}function ZS(n,e){for(var t=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function DI(n,e){L(Vv(n),function(){return"The f passed in variableGrads(f) must be a function"}),L(e==null||Array.isArray(e)&&e.every(function(d){return d instanceof wu}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=e!=null;if(!t)for(var r in e=[],G.registeredVariables)e.push(G.registeredVariables[r]);var a=t?e.filter(function(d){return!d.trainable}):null,i=e.length;L((e=e.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var s=G.gradients(n,e,null,!0),l=s.value,c=s.grads;L(c.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),L(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"});var h={};return e.forEach(function(d,v){c[v]!=null&&(h[d.name]=c[v])}),a?.forEach(function(d){return h[d.name]=null}),{value:l,grads:h}}function Qf(n){return G.customGrad(n)}var Fa=V({softmax_:function(n,e){e===void 0&&(e=-1);var t=M(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return G.runKernelFunc(function(r,a){var i=r.softmax(t,e);return a([i]),i},{logits:t},function(r,a){var i=a[0],s=r.mul(i);return{logits:function(){return s.sub(s.sum([e],!0).mul(i))}}},"Softmax",{dim:e},[],[!0])}}),OI=V({logSoftmax_:function(n,e){e===void 0&&(e=-1);var t=M(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return Qf(function(r,a){var i=r.max(e,!0),s=r.sub(i),l=s.toFloat().sub(s.exp().sum(e,!0).log());return a([l]),{value:l,gradFunc:function(c,h){var d=h[0].exp();return c.sub(c.sum(e,!0).mul(d))}}})(t)}}),YS=function(){function n(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},n.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},n.prototype.has=function(e){return this.data.has(e)},n.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),QS=function(){function n(){}return n.prototype.time=function(e){return te("time")},n.prototype.read=function(e){return te("read")},n.prototype.readSync=function(e){return te("readSync")},n.prototype.numDataIds=function(){return te("numDataIds")},n.prototype.disposeData=function(e){return te("disposeData")},n.prototype.write=function(e,t,r){return te("write")},n.prototype.move=function(e,t,r,a){return te("move")},n.prototype.memory=function(){return te("memory")},n.prototype.floatPrecision=function(){return te("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(e,t,r,a){return te("batchMatMul")},n.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,te("fusedBatchMatMul")},n.prototype.slice=function(e,t,r){return te("slice")},n.prototype.stridedSlice=function(e,t,r,a){return te("stridedSlice")},n.prototype.unstack=function(e,t){return te("unstack")},n.prototype.reverse=function(e,t){return te("reverse")},n.prototype.concat=function(e,t){return te("concat")},n.prototype.neg=function(e){return te("neg")},n.prototype.add=function(e,t){return te("add")},n.prototype.addN=function(e){return te("addN")},n.prototype.subtract=function(e,t){return te("subtract")},n.prototype.multiply=function(e,t){return te("multiply")},n.prototype.realDivide=function(e,t){return te("realDivide")},n.prototype.floorDiv=function(e,t){return te("floorDiv")},n.prototype.sum=function(e,t){return te("sum")},n.prototype.prod=function(e,t){return te("prod")},n.prototype.unsortedSegmentSum=function(e,t,r){return te("unsortedSegmentSum")},n.prototype.argMin=function(e,t){return te("argMin")},n.prototype.argMax=function(e,t){return te("argMax")},n.prototype.equal=function(e,t){return te("equal")},n.prototype.notEqual=function(e,t){return te("notEqual")},n.prototype.less=function(e,t){return te("less")},n.prototype.lessEqual=function(e,t){return te("lessEqual")},n.prototype.greater=function(e,t){return te("greater")},n.prototype.greaterEqual=function(e,t){return te("greaterEqual")},n.prototype.logicalNot=function(e){return te("logicalNot")},n.prototype.logicalAnd=function(e,t){return te("logicalAnd")},n.prototype.logicalOr=function(e,t){return te("logicalOr")},n.prototype.where=function(e){return te("where")},n.prototype.select=function(e,t,r){return te("select")},n.prototype.topk=function(e,t,r){return te("topk")},n.prototype.min=function(e,t){return te("min")},n.prototype.minimum=function(e,t){return te("minimum")},n.prototype.mod=function(e,t){return te("mod")},n.prototype.max=function(e,t){return te("max")},n.prototype.maximum=function(e,t){return te("maximum")},n.prototype.all=function(e,t){return te("all")},n.prototype.any=function(e,t){return te("any")},n.prototype.squaredDifference=function(e,t){return te("squaredDifference")},n.prototype.ceil=function(e){return te("ceil")},n.prototype.floor=function(e){return te("floor")},n.prototype.round=function(e){return te("round")},n.prototype.sign=function(e){return te("sign")},n.prototype.isNaN=function(e){return te("isNaN")},n.prototype.isInf=function(e){return te("isInf")},n.prototype.isFinite=function(e){return te("isFinite")},n.prototype.pow=function(e,t){return te("pow")},n.prototype.exp=function(e){return te("exp")},n.prototype.expm1=function(e){return te("expm1")},n.prototype.softmax=function(e,t){return te("softmax")},n.prototype.log=function(e){return te("log")},n.prototype.log1p=function(e){return te("log1p")},n.prototype.sqrt=function(e){return te("sqrt")},n.prototype.rsqrt=function(e){return te("rsqrt")},n.prototype.square=function(e){return te("square")},n.prototype.reciprocal=function(e){return te("reciprocal")},n.prototype.relu=function(e){return te("relu")},n.prototype.relu6=function(e){return te("relu6")},n.prototype.prelu=function(e,t){return te("prelu")},n.prototype.elu=function(e){return te("elu")},n.prototype.eluDer=function(e,t){return te("eluDer")},n.prototype.selu=function(e){return te("selu")},n.prototype.int=function(e){return te("int")},n.prototype.clip=function(e,t,r){return te("clip")},n.prototype.abs=function(e){return te("abs")},n.prototype.complexAbs=function(e){return te("complexAbs")},n.prototype.sigmoid=function(e){return te("sigmoid")},n.prototype.softplus=function(e){return te("softplus")},n.prototype.sin=function(e){return te("sin")},n.prototype.cos=function(e){return te("cos")},n.prototype.tan=function(e){return te("tan")},n.prototype.asin=function(e){return te("asin")},n.prototype.acos=function(e){return te("acos")},n.prototype.atan=function(e){return te("atan")},n.prototype.atan2=function(e,t){return te("atan2")},n.prototype.sinh=function(e){return te("sinh")},n.prototype.cosh=function(e){return te("cosh")},n.prototype.tanh=function(e){return te("tanh")},n.prototype.asinh=function(e){return te("asinh")},n.prototype.acosh=function(e){return te("acosh")},n.prototype.atanh=function(e){return te("atanh")},n.prototype.erf=function(e){return te("erf")},n.prototype.step=function(e,t){return te("step")},n.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,te("fusedConv2d")},n.prototype.conv2d=function(e,t,r){return te("conv2d")},n.prototype.conv2dDerInput=function(e,t,r){return te("conv2dDerInput")},n.prototype.conv2dDerFilter=function(e,t,r){return te("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,te("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(e,t,r){return te("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(e,t,r){return te("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(e,t,r){return te("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(e,t,r){return te("conv3d")},n.prototype.conv3dDerInput=function(e,t,r){return te("conv3dDerInput")},n.prototype.conv3dDerFilter=function(e,t,r){return te("conv3dDerFilter")},n.prototype.maxPool=function(e,t){return te("maxPool")},n.prototype.maxPoolBackprop=function(e,t,r,a){return te("maxPoolBackprop")},n.prototype.avgPool=function(e,t){return te("avgPool")},n.prototype.avgPoolBackprop=function(e,t,r){return te("avgPoolBackprop")},n.prototype.avgPool3d=function(e,t){return te("avgPool3d")},n.prototype.avgPool3dBackprop=function(e,t,r){return te("avgPool3dBackprop")},n.prototype.maxPool3d=function(e,t){return te("maxPool3d")},n.prototype.maxPool3dBackprop=function(e,t,r,a){return te("maxPool3dBackprop")},n.prototype.reshape=function(e,t){return te("reshape")},n.prototype.cast=function(e,t){return te("cast")},n.prototype.tile=function(e,t){return te("tile")},n.prototype.pad=function(e,t,r){return te("pad")},n.prototype.transpose=function(e,t){return te("transpose")},n.prototype.gather=function(e,t,r){return te("gather")},n.prototype.gatherND=function(e,t){return te("gatherND")},n.prototype.scatterND=function(e,t,r){return te("scatterND")},n.prototype.batchToSpaceND=function(e,t,r){return te("batchToSpaceND")},n.prototype.spaceToBatchND=function(e,t,r){return te("spaceToBatchND")},n.prototype.resizeBilinear=function(e,t,r,a){return te("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(e,t,r){return te("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(e,t,r,a){return te("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(e,t,r){return te("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(e,t,r,a,i,s){return te("batchNormalization")},n.prototype.localResponseNormalization4D=function(e,t,r,a,i){return te("localResponseNormalization4D")},n.prototype.LRNGrad=function(e,t,r,a,i,s,l){return te("LRNGrad")},n.prototype.multinomial=function(e,t,r,a){return te("multinomial")},n.prototype.oneHot=function(e,t,r,a){return te("oneHot")},n.prototype.cumsum=function(e,t,r,a){return te("cumsum")},n.prototype.nonMaxSuppression=function(e,t,r,a,i){return te("nonMaxSuppression")},n.prototype.fft=function(e){return te("fft")},n.prototype.ifft=function(e){return te("ifft")},n.prototype.complex=function(e,t){return te("complex")},n.prototype.real=function(e){return te("real")},n.prototype.imag=function(e){return te("imag")},n.prototype.cropAndResize=function(e,t,r,a,i,s){return te("cropAndResize")},n.prototype.depthToSpace=function(e,t,r){return te("depthToSpace")},n.prototype.split=function(e,t,r){return te("split")},n.prototype.sparseToDense=function(e,t,r,a){return te("sparseToDense")},n.prototype.diag=function(e){return te("diag")},n.prototype.fill=function(e,t,r){return te("fill")},n.prototype.onesLike=function(e){return te("onesLike")},n.prototype.zerosLike=function(e){return te("zerosLike")},n.prototype.linspace=function(e,t,r){return te("linspace")},n.prototype.dispose=function(){return te("dispose")},n}();function te(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function di(n,e){for(var t=n.length,r=[],a=0;a<t;a++){var i=t-1-a,s=n[i]||1;(e[e.length-1-a]||1)>1&&s===1&&r.unshift(i)}return r}function Kt(n,e){for(var t=[],r=0;r<e.length;r++){var a=n[n.length-r-1],i=e.length-r-1,s=e[i];(a==null||a===1&&s>1)&&t.unshift(i)}return t}function qe(n,e){for(var t=[],r=Math.max(n.length,e.length),a=0;a<r;a++){var i=n[n.length-a-1];i==null&&(i=1);var s=e[e.length-a-1];if(s==null&&(s=1),i===1)t.unshift(s);else if(s===1)t.unshift(i);else{if(i!==s)throw Error("Operands could not be broadcast together with shapes "+n+" and "+e+".");t.unshift(i)}}return t}function Ks(n,e,t,r,a,i,s){s===void 0&&(s="channelsLast");var l,c=Nf(e),h=c[0],d=c[1];if(s==="channelsLast")l=[h,d,n[3],n[3]];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=[h,d,n[1],n[1]]}return oo(n,l,t,r,a,i,!1,s)}function Of(n,e,t,r,a,i,s){s===void 0&&(s="NDHWC");var l,c,h=Zv(e),d=h[0],v=h[1],m=h[2];if(s==="NDHWC")c="channelsLast",l=[d,v,m,n[4],n[4]];else{if(s!=="NCDHW")throw new Error("Unknown dataFormat "+s);c="channelsFirst",l=[d,v,m,n[1],n[1]]}return kf(n,l,t,r,a,!1,c,i)}function oo(n,e,t,r,a,i,s,l){s===void 0&&(s=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],h=c[0],d=c[1],v=c[2],m=c[3];if(l==="channelsLast")h=n[0],d=n[1],v=n[2],m=n[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);h=n[0],m=n[1],d=n[2],v=n[3]}var g,x=e[0],w=e[1],S=e[3],E=Nf(t),_=E[0],R=E[1],A=Nf(r),C=A[0],D=A[1],O=fu(x,C),F=fu(w,D),N=function(ee,ne,z,W,q,re,ue,B){var X,oe,de;if(typeof ee=="number"){X={top:ee,bottom:ee,left:ee,right:ee,type:ee===0?"VALID":"NUMBER"};var ve=function(Fe,Ye,Ve,$e,lt){$e==null&&($e=JS(Fe,Ye,Ve));var ot=Fe[0],ar=Fe[1],Un=Is((ot-Ye+2*$e)/Ve+1,lt);L(Mt(Un),function(){return"The output # of rows ("+Un+") must be an integer. Change the stride and/or zero pad parameters"});var tn=Is((ar-Ye+2*$e)/Ve+1,lt);return L(Mt(tn),function(){return"The output # of columns ("+tn+") must be an integer. Change the stride and/or zero pad parameters"}),[Un,tn]}([ne,z],re,W,ee,B);oe=ve[0],de=ve[1]}else if(ee==="same"){oe=Math.ceil(ne/W),de=Math.ceil(z/q);var me=Math.max(0,(oe-1)*W+re-ne),ye=Math.max(0,(de-1)*q+ue-z),De=Math.floor(me/2),Te=me-De,it=Math.floor(ye/2);X={top:De,bottom:Te,left:it,right:ye-it,type:"SAME"}}else{if(ee!=="valid")throw Error("Unknown padding parameter: "+ee);X={top:0,bottom:0,left:0,right:0,type:"VALID"},oe=Math.ceil((ne-re+1)/W),de=Math.ceil((z-ue+1)/q)}return{padInfo:X,outHeight:oe,outWidth:de}}(a,d,v,_,R,O,F,i),I=N.padInfo,U=N.outHeight,H=N.outWidth,J=s?S*m:S;return l==="channelsFirst"?g=[h,J,U,H]:l==="channelsLast"&&(g=[h,U,H,J]),{batchSize:h,dataFormat:l,inHeight:d,inWidth:v,inChannels:m,outHeight:U,outWidth:H,outChannels:J,padInfo:I,strideHeight:_,strideWidth:R,filterHeight:x,filterWidth:w,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationHeight:C,dilationWidth:D,inShape:n,outShape:g,filterShape:e}}function kf(n,e,t,r,a,i,s,l){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var c=[-1,-1,-1,-1,-1],h=c[0],d=c[1],v=c[2],m=c[3],g=c[4];if(s==="channelsLast")h=n[0],d=n[1],v=n[2],m=n[3],g=n[4];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);h=n[0],g=n[1],d=n[2],v=n[3],m=n[4]}var x,w=e[0],S=e[1],E=e[2],_=e[4],R=Zv(t),A=R[0],C=R[1],D=R[2],O=Zv(r),F=O[0],N=O[1],I=O[2],U=fu(w,F),H=fu(S,N),J=fu(E,I),ee=function(ue,B,X,oe,de,ve,me,ye,De,Te,it){var Fe,Ye,Ve,$e;if(typeof ue=="number"){Fe={top:ue,bottom:ue,left:ue,right:ue,front:ue,back:ue,type:ue===0?"VALID":"NUMBER"};var lt=function(It,_r,lo,ua,wn,Ou){wn==null&&(wn=JS(It,_r,ua));var ml=It[0],dh=It[1],ph=It[2],sa=Is((ml-_r+2*wn)/ua+1,Ou);L(Mt(sa),function(){return"The output # of depths ("+sa+") must be an integer. Change the stride and/or zero pad parameters"});var nn=Is((dh-_r+2*wn)/ua+1,Ou);L(Mt(nn),function(){return"The output # of rows ("+nn+") must be an integer. Change the stride and/or zero pad parameters"});var ir=Is((ph-_r+2*wn)/ua+1,Ou);return L(Mt(ir),function(){return"The output # of columns ("+ir+") must be an integer. Change the stride and/or zero pad parameters"}),[sa,nn,ir,lo]}([B,X,oe,1],ye,1,de,ue,it);Ye=lt[0],Ve=lt[1],$e=lt[2]}else if(ue==="same"){Ye=Math.ceil(B/de),Ve=Math.ceil(X/ve),$e=Math.ceil(oe/me);var ot=(Ye-1)*de+ye-B,ar=(Ve-1)*ve+De-X,Un=($e-1)*me+Te-oe,tn=Math.floor(ot/2),Ir=ot-tn,Hn=Math.floor(ar/2),Fr=ar-Hn,Er=Math.floor(Un/2);Fe={top:Hn,bottom:Fr,left:Er,right:Un-Er,front:tn,back:Ir,type:"SAME"}}else{if(ue!=="valid")throw Error("Unknown padding parameter: "+ue);Fe={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ye=Math.ceil((B-ye+1)/de),Ve=Math.ceil((X-De+1)/ve),$e=Math.ceil((oe-Te+1)/me)}return{padInfo:Fe,outDepth:Ye,outHeight:Ve,outWidth:$e}}(a,d,v,m,A,C,D,U,H,J,l),ne=ee.padInfo,z=ee.outDepth,W=ee.outHeight,q=ee.outWidth,re=i?_*g:_;return s==="channelsFirst"?x=[h,re,z,W,q]:s==="channelsLast"&&(x=[h,z,W,q,re]),{batchSize:h,dataFormat:s,inDepth:d,inHeight:v,inWidth:m,inChannels:g,outDepth:z,outHeight:W,outWidth:q,outChannels:re,padInfo:ne,strideDepth:A,strideHeight:C,strideWidth:D,filterDepth:w,filterHeight:S,filterWidth:E,effectiveFilterDepth:U,effectiveFilterHeight:H,effectiveFilterWidth:J,dilationDepth:F,dilationHeight:N,dilationWidth:I,inShape:n,outShape:x,filterShape:e}}function JS(n,e,t,r){r===void 0&&(r=1);var a=fu(e,r);return Math.floor((n[0]*(t-1)-t+a)/2)}function Nf(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function Zv(n){return typeof n=="number"?[n,n,n]:n}function fu(n,e){return e<=1?n:n+(n-1)*(e-1)}function Is(n,e){if(!e)return n;switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+e)}}function Eu(n){var e=Nf(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function zn(n,e){return Eu(n)||Eu(e)}function Um(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function eE(n,e,t){if(e==="complex64"){if(n.dtype==="complex64")return n.clone();var r=bt(n.shape),a=n.toFloat(),i=t.complex(a,r);return r.dispose(),a.dispose(),i}if(!rM(n.dtype,e))return G.makeTensorFromDataId(n.dataId,n.shape,e);if(n.dtype==="complex64"){var s=t.real(n);return i=s.cast(e),s.dispose(),i}if(e==="int32")return t.int(n);if(e==="bool"){var l=ge(0,n.dtype);return i=t.notEqual(n,l),l.dispose(),i}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+e)}function Yv(n,e){return G.makeTensorFromDataId(n.dataId,e,n.dtype)}function tE(n,e,t){var r=(e-n)/(t-1),a=ul(t,"float32");a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return Ut(a,"float32")}function Qv(n,e){if(n.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+e.length+".");for(var t=new Float32Array(2*n.length),r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function ww(n,e){return{real:n[2*e],imag:n[2*e+1]}}function kI(n,e,t,r){n[2*r]=e,n[2*r+1]=t}function NI(n,e,t){var r=(t?2:-2)*Math.PI*(n/e);return{real:Math.cos(r),imag:Math.sin(r)}}function MI(n,e,t){var r=function(i,s,l){return function(c,h,d){for(var v=0,m=c.length,g=0,x=!1;v<m;){var w=d(h,c[g=v+(m-v>>>1)]);w>0?v=g+1:(m=g,x=!w)}return x?v:-v-1}(i,s,l||II)}(n,e,t),a=r<0?-(r+1):r;n.splice(a,0,e)}function II(n,e){return n>e?1:n<e?-1:0}function Hm(n,e,t,r,a){return nE(n,e,t,r,a,0).selectedIndices}function Vm(n,e,t,r,a,i){var s=nE(n,e,t,r,a,i);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function nE(n,e,t,r,a,i,s,l){l===void 0&&(l=!1);for(var c=Array.from(e).map(function(A,C){return{score:A,boxIndex:C,suppressBeginIndex:0}}).filter(function(A){return A.score>a}).sort(Sw),h=i>0?-.5/i:0,d=[],v=[];d.length<t&&c.length>0;){var m=c.pop(),g=m.score,x=m.boxIndex,w=m.suppressBeginIndex;if(g<a)break;for(var S=!1,E=d.length-1;E>=w;--E){var _=FI(n,x,d[E]);if(_>=r){S=!0;break}if(m.score=m.score*BI(r,h,_),m.score<=a)break}m.suppressBeginIndex=d.length,S||(m.score===g?(d.push(x),v.push(m.score)):m.score>a&&MI(c,m,Sw))}var R=d.length;return l&&(d.fill(0,R),v.fill(0,R)),{selectedIndices:Ut(d,"int32"),selectedScores:Ut(v,"float32"),numValidOutputs:ge(R,"int32")}}function FI(n,e,t){var r=n.subarray(4*e,4*e+4),a=n.subarray(4*t,4*t+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),l=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),h=Math.min(a[0],a[2]),d=Math.min(a[1],a[3]),v=Math.max(a[0],a[2]),m=Math.max(a[1],a[3]),g=(l-i)*(c-s),x=(v-h)*(m-d);if(g<=0||x<=0)return 0;var w=Math.max(i,h),S=Math.max(s,d),E=Math.min(l,v),_=Math.min(c,m),R=Math.max(E-w,0)*Math.max(_-S,0);return R/(g+x-R)}function BI(n,e,t){var r=Math.exp(e*t*t);return t<=n?r:0}function Sw(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}function rE(n,e,t){var r=new Array(n.rank).fill(0),a=n.shape.slice();return e.map(function(i){a[t]=i;var s=n.slice(r,a);return r[t]+=i,s})}function aE(n,e){for(var t=new Array(n.rank),r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];var a=Le(t,n.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),s=new Array(n.rank),l=0;l<s.length;l++)s[l]=i[l]%n.shape[l];var c=n.locToIndex(s);a.values[r]=n.values[c]}return a.toTensor()}function iE(n,e,t,r,a){for(var i=e[e.length-1],s=[n.length/i,i],l=s[0],c=s[1],h=Ws(t,l*r),d=Ws("int32",l*r),v=0;v<l;v++){for(var m=v*c,g=n.subarray(m,m+c),x=[],w=0;w<g.length;w++)x.push({value:g[w],index:w});x.sort(function(A,C){return C.value-A.value});var S=v*r,E=h.subarray(S,S+r),_=d.subarray(S,S+r);for(w=0;w<r;w++)E[w]=x[w].value,_[w]=x[w].index}var R=e.slice();return R[R.length-1]=r,[hn(h,R,t),hn(d,R,"int32")]}function jm(n,e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(r);var a=Le(n,"int32"),i=Le([t.length,n.length],"int32");for(r=0;r<t.length;r++){var s=a.indexToLoc(t[r]),l=r*n.length;i.values.set(s,l)}return i.toTensor()}var LI=function(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},zI=function(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},PI=function(n,e,t){this.variableNames=["A"];var r=n.windowSize,a=n.batchSize,i=n.inSize,s=Math.ceil(i/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[a,s];var l=e==="max"?">":"<",c=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function oE(n,e){return["x","y","z","w","u","v"].slice(0,e).map(function(t){return n+"."+t})}function In(n,e){return e===1?[n]:oE(n,e)}function gn(){var n,e,t,r,a,i,s,l,c,h;return le().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",h=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",a="texture2D",i="gl_FragColor",s="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,h=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:l,defineSpecialInf:c,defineRound:h}}function Xi(n,e,t){t===void 0&&(t="index");var r=Qr(e);return r.map(function(a,i){return"int "+n[i]+" = "+t+" / "+a+"; "+(i===r.length-1?"int "+n[i+1]+" = "+t+" - "+n[i]+" * "+a:"index -= "+n[i]+" * "+a)+";"}).join("")}function Wm(n){var e=Qr(n).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var uE=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function UI(n,e,t,r){var a=[];n.forEach(function(g){var x=_e(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(x>1?"["+x+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))});var i,s,l=a.join(`
`),c=n.map(function(g){return function(x,w,S){S===void 0&&(S=!1);var E="";E+=S?sE(x):tu(x);var _=x.shapeInfo.logicalShape,R=w.logicalShape;return _.length<=R.length&&(E+=S?function(A,C){var D,O=A.name,F=O.charAt(0).toUpperCase()+O.slice(1),N="get"+F+"AtOutCoords",I=A.shapeInfo.logicalShape.length,U=C.logicalShape.length,H=di(A.shapeInfo.logicalShape,C.logicalShape),J=mt(U),ee=U-I,ne=["x","y","z","w","u","v"];D=I===0?"":U<2&&H.length>=1?"coords = 0;":H.map(function(X){return"coords."+ne[X+ee]+" = 0;"}).join(`
`);var z="";z=U<2&&I>0?"coords":A.shapeInfo.logicalShape.map(function(X,oe){return"coords."+ne[oe+ee]}).join(", ");var W="return outputValue;",q=_e(A.shapeInfo.logicalShape)===1,re=_e(C.logicalShape)===1;if(I!==1||q||re){if(q&&!re)W=U===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(H.length){var ue=I-2,B=I-1;H.indexOf(ue)>-1&&H.indexOf(B)>-1?W="return vec4(outputValue.x);":H.indexOf(ue)>-1?W="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":H.indexOf(B)>-1&&(W="return vec4(outputValue.xx, outputValue.zz);")}}else W=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+N+`() {
      `+J+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+F+"("+z+`);
      `+W+`
    }
  `}(x,w):function(A,C){var D=A.name,O=D.charAt(0).toUpperCase()+D.slice(1),F="get"+O+"AtOutCoords",N=C.texShape,I=A.shapeInfo.texShape,U=A.shapeInfo.logicalShape.length,H=C.logicalShape.length;if(!A.shapeInfo.isUniform&&U===H&&A.shapeInfo.flatOffset==null&&Jt(I,N))return`
      float `+F+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var J,ee=mt(H),ne=di(A.shapeInfo.logicalShape,C.logicalShape),z=H-U,W=["x","y","z","w","u","v"];J=U===0?"":H<2&&ne.length>=1?"coords = 0;":ne.map(function(re){return"coords."+W[re+z]+" = 0;"}).join(`
`);var q="";return q=H<2&&U>0?"coords":A.shapeInfo.logicalShape.map(function(re,ue){return"coords."+W[ue+z]}).join(", "),`
    float `+F+`() {
      `+ee+` coords = getOutputCoords();
      `+J+`
      return get`+O+"("+q+`);
    }
  `}(x,w)),E}(g,e,r)}).join(`
`),h=e.texShape,d=gn(),v=function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `}(d),m=function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+HI+`
    `+VI+`
    `+jI+`
  `}(d);return e.isPacked?(i=function(g,x){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(A,C){var D=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `}(0,x);case 2:return function(A,C){var D=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];if(Jt(A,C))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var O=Math.ceil(A[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+O+`);
      int c = imod(index, `+O+`) * 2;

      return ivec2(r, c);
    }
  `}(g,x);case 3:return w=g,S=x,E=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],_=Math.ceil(w[2]/2),R=_*Math.ceil(w[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;

      int b = index / `+R+`;
      index -= b * `+R+`;

      int r = 2 * (index / `+_+`);
      int c = imod(index, `+_+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(A,C){for(var D=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)],O=Math.ceil(A[A.length-1]/2),F=O*Math.ceil(A[A.length-2]/2),N=F,I="",U="b, r, c",H=2;H<A.length-1;H++)N*=A[A.length-H-1],I=`
      int b`+H+" = index / "+N+`;
      index -= b`+H+" * "+N+`;
    `+I,U="b"+H+", "+U;return`
    ivec`+A.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+I+`

      int b = index / `+F+`;
      index -= b * `+F+`;

      int r = 2 * (index / `+O+`);
      int c = imod(index, `+O+`) * 2;

      return ivec`+A.length+"("+U+`);
    }
  `}(g,x)}var w,S,E,_,R}(e.logicalShape,h),s=function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `}(d)):(i=function(g,x){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(E,_){return _[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+_[1]+`.0);
      }
    `:_[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+_[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      return resTexRC.x * `+_[1]+` + resTexRC.y;
    }
  `}(0,x);case 2:return function(E,_){return Jt(E,_)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+_[0]+", "+_[1]+`));
      }
    `:E[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:E[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+_[0]+", "+_[1]+`));
        int index = resTexRC.x * `+_[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      int r = index / `+E[1]+`;
      int c = index - r * `+E[1]+`;
      return ivec2(r, c);
    }
  `}(g,x);case 3:return w=x,S=Xi(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));
      int index = resTexRC.x * `+w[1]+` + resTexRC.y;
      `+S+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(E,_){var R=Xi(["r","c","d","d2"],E);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;
      `+R+`
      return ivec4(r, c, d, d2);
    }
  `}(g,x);case 5:return function(E,_){var R=Xi(["r","c","d","d2","d3"],E);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+_[0]+`,
                             `+_[1]+`));

      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+R+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(g,x);case 6:return function(E,_){var R=Xi(["r","c","d","d2","d3","d4"],E);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      `+R+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(g,x);default:throw new Error(g.length+"-D output sampling is not yet supported")}var w,S}(e.logicalShape,h),s=function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),r&&(m+=WI),[m,v,s,l,i,c,t].join(`
`)}function tu(n){var e=n.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=t.shapeInfo.texShape,s=i[0],l=i[1];if(s===1&&l===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=t.shapeInfo.texShape,h=c[0],d=c[1],v=ji(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+h+", "+d+", "+v+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 1:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Zo(t)+`
      }
    `;var i=t.shapeInfo.texShape,s=i[0],l=i[1];if(l===1&&s===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=ji(r);return l===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+s+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:s===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+s+", "+l+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 2:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=t.shapeInfo.texShape;if(s!=null&&Jt(r,s)){var l=s[0],c=s[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var h=qi(r),d=h.newShape,v=h.keptDims,m=d;if(m.length<r.length){var g=nu(t,m);return`
      `+tu(g)+`
      float `+i+`(int row, int col) {
        return `+i+"("+ru(["row","col"],v)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Zo(t)+`
      }
    `;var x=s[0],w=s[1],S=ji(a);return w===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+x+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:x===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+S+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+w+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+S+`;
    vec2 uv = uvFromFlat(`+x+", "+w+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(n);case 3:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=r[1]*r[2],l=r[2],c=qi(r),h=c.newShape,d=c.keptDims,v=h;if(v.length<r.length){var m=nu(t,v);return`
        `+tu(m)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+ru(["row","col","depth"],d)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+s+", "+l+`, 1)));
        `+Zo(t)+`
      }
    `;var g=t.shapeInfo.texShape,x=g[0],w=g[1],S=t.shapeInfo.flatOffset;if(w===s&&S==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+w+".0, "+x+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(w===l&&S==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+w+".0, "+x+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var E=ji(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+s+" + col * "+l+" + depth + "+E+`;
        vec2 uv = uvFromFlat(`+x+", "+w+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(n);case 4:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=r[3],l=r[2]*s,c=r[1]*l,h=qi(r),d=h.newShape,v=h.keptDims;if(d.length<r.length){var m=nu(t,d);return`
      `+tu(m)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+ru(["row","col","depth","depth2"],v)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+s+`, 1)));
        `+Zo(t)+`
      }
    `;var g=t.shapeInfo.flatOffset,x=t.shapeInfo.texShape,w=x[0],S=x[1];if(S===c&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===s&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var E=ji(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+s+` + depth2;
      vec2 uv = uvFromFlat(`+w+", "+S+", index + "+E+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 5:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=r[4],l=r[3]*s,c=r[2]*l,h=r[1]*c,d=qi(r),v=d.newShape,m=d.keptDims;if(v.length<r.length){var g=nu(t,v);return`
      `+tu(g)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+ru(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+h+", "+c+", "+l+", "+s+`)) +
          depth3;
        `+Zo(t)+`
      }
    `;var x=t.shapeInfo.flatOffset,w=t.shapeInfo.texShape,S=w[0],E=w[1];if(E===h&&x==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+E+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(E===s&&x==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+E+".0, "+S+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=ji(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+h+" + col * "+c+" + depth * "+l+` +
          depth2 * `+s+" + depth3 + "+_+`;
      vec2 uv = uvFromFlat(`+S+", "+E+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 6:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=qi(r),l=s.newShape,c=s.keptDims;if(l.length<r.length){var h=nu(t,l);return`
      `+tu(h)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+ru(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=r[5],v=r[4]*d,m=r[3]*v,g=r[2]*m,x=r[1]*g;if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+x+", "+g+", "+m+", "+v+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Zo(t)+`
      }
    `;var w=t.shapeInfo.flatOffset,S=t.shapeInfo.texShape,E=S[0],_=S[1];if(_===x&&w==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+m+", "+v+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===d&&w==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var R=ji(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+x+" + col * "+g+" + depth * "+m+` +
          depth2 * `+v+" + depth3 * "+d+" + depth4 + "+R+`;
      vec2 uv = uvFromFlat(`+E+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function sE(n){var e,t,r;switch(n.shapeInfo.logicalShape.length){case 0:return e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=gn(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(a){var i=a.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),l=a.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],h=gn();return`
    vec4 `+s+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+h.texture2D+"("+i+`, uv);
    }
  `}(n);case 2:return function(a){var i=a.shapeInfo.logicalShape,s=a.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),c=a.shapeInfo.texShape,h=c[0],d=c[1],v=gn();if(c!=null&&Jt(i,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+h+`.0);

        return `+v.texture2D+"("+s+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(i[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+m[0]+", "+m[1]+`, row, col);
      return `+v.texture2D+"("+s+`, uv);
    }
  `}(n);case 3:return function(a){var i=a.shapeInfo.logicalShape,s=a.name,l="get"+s.charAt(0).toUpperCase()+s.slice(1),c=a.shapeInfo.texShape,h=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var d=i.slice(1),v=nu(a,d);return`
        `+sE(v)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+ru(["b","row","col"],[1,2])+`);
        }
      `}var m=h[0],g=h[1],x=Math.ceil(i[2]/2),w=x*Math.ceil(i[1]/2),S=gn();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+g+", "+w+", "+x+`, b, row, col);
      return `+S.texture2D+"("+s+`, uv);
    }
  `}(n);default:return function(a){for(var i=a.shapeInfo.logicalShape,s=i.length,l=a.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),h=a.shapeInfo.texShape,d=[Math.ceil(h[0]/2),Math.ceil(h[1]/2)],v=d[0],m=d[1],g=Math.ceil(i[s-1]/2),x=g*Math.ceil(i[s-2]/2),w="int b, int row, int col",S="b * "+x+" + (row / 2) * "+g+" + (col / 2)",E=2;E<s-1;E++)w="int b"+E+", "+w,x*=i[s-E-1],S="b"+E+" * "+x+" + "+S;var _=gn();return`
    vec4 `+c+"("+w+`) {
      int index = `+S+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+v+`);
      return `+_.texture2D+"("+l+`, uv);
    }
  `}(n)}}var HI=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,VI=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jI=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,WI=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ji(n){return"offset"+n}function Zo(n){var e=n.name,t=_e(n.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function mt(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function nu(n,e){var t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function ru(n,e){return e.map(function(t){return n[t]}).join(", ")}var GI=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,L(n.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var a=n[n.length-1],i=Math.ceil(a/e);this.outputShape=n.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var s,l,c=this.outputShape,h=c.length,d=mt(h),v=In("coords",h);if(i===1){var m=mt(l=h+1);s=`
        `+m+" sourceLocR = "+m+"("+v.join()+`, 0);
        ++`+v[h-1]+`;
        `+m+" sourceLocG = "+m+"("+v.join()+`, 0);
        ++`+v[h-2]+`;
        `+m+" sourceLocA = "+m+"("+v.join()+`, 0);
        --`+v[h-1]+`;
        `+m+" sourceLocB = "+m+"("+v.join()+`, 0);
        --`+v[h-2]+";"}else l=h,s=`
        `+d+` sourceLocR = coords;
        ++`+v[h-1]+`;
        `+d+` sourceLocG = coords;
        ++`+v[h-2]+`;
        `+d+` sourceLocA = coords;
        --`+v[h-1]+`;
        `+d+` sourceLocB = coords;
        --`+v[h-2]+";";var g=["x","y","z","w","u","v"].slice(0,l),x="."+g[l-1],w=g.map(function(F){return"int "+F}),S=In("sourceLocR",l-1).concat("inIdx.r"),E=In("sourceLocG",l-1).concat("inIdx.g"),_=In("sourceLocB",l-1).concat("inIdx.b"),R=In("sourceLocA",l-1).concat("inIdx.a"),A=t==="max"?"greaterThan":"lessThan",C=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+E.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+R.join()+")));",D=`vec4(
            getAChannel(`+S.join()+`),
            hasNextCol ? getAChannel(`+E.join()+`) : 0.,
            hasNextRow ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+R.join()+") : 0.)",O=r?"":`
      float getBestIndicesAChannel(`+w.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+w.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+O+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+v[h-1]+" < "+(c[h-1]-1)+`;
        bool hasNextRow = `+v[h-2]+" < "+(c[h-2]-1)+`;
        `+s+`
        ivec4 srcIdx = ivec4(sourceLocR`+x+", sourceLocG"+x+`,
          sourceLocB`+x+", sourceLocA"+x+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+C+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+A+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},qI=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,s=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=l-1-n.padInfo.top,d=c-1-n.padInfo.left,v=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+h+", "+d+`);
      const float avgMultiplier = float(`+v+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+s+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},KI=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,s=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,v=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=d-1-n.padInfo.front,x=v-1-n.padInfo.top,w=m-1-n.padInfo.left,S=1/(e*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+x+", "+w+`);
      const float avgMultiplier = float(`+S+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+v+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+h+`) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},XI=function(n,e,t,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],qe(n,e),qe(n,t);var s="0.0";r!=null&&(qe(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="1.0";a!=null&&(qe(n,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+s+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},$I=function(n,e,t,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],qe(n,e),qe(n,t);var s="vec4(0.0)";r!=null&&(qe(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var l="vec4(1.0)";a!=null&&(qe(n,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+s+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},ZI="return areal * breal - aimag * bimag;",YI="return areal * bimag + aimag * breal;",Ew=function(n,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=qe(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},ev="return a + b;",tv="return a - b;",_w="return a * b;",lE="return (a < 0.) ? b * a : a;",Ot=function(n,e,t){this.variableNames=["A","B"],this.outputShape=qe(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},cE=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ta=function(n,e,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=qe(e,t);var a=this.outputShape.length,i="";if(r)if(a===0||_e(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+mt(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var s=In("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+s[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+s[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},QI=function(){function n(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),JI=function(){function n(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),eF=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},tF=function(n){this.outputShape=[],this.outputShape=Su(n,1),this.variableNames=n.map(function(l,c){return"T"+c});var e=new Array(n.length-1);e[0]=n[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+n[t][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var a=e[t-1];r.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+a+"));")}var i=e.length,s=e[e.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+s+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},nF=function(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Su(n,e);var t=this.outputShape,r=t.length,a=mt(r),i=In("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(S,E){return"T"+E});var l=new Array(n.length-1);l[0]=n[0][e];for(var c=1;c<l.length;c++)l[c]=l[c-1]+n[c][e];var h=s[e],d=s.slice(-2),v=s.join(),m="if ("+h+" < "+l[0]+`) {
        return getChannel(
            getT0(`+v+"), vec2("+d.join()+`));
        }`;for(c=1;c<l.length;c++){var g=l[c-1];m+=`
        if (`+h+" < "+l[c]+"  && "+h+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+Kc(s,h,g)+`),
            vec2(`+Kc(d,h,g)+`));
        }`}var x=l.length,w=l[l.length-1];m+=`
        return getChannel(
          getT`+x+"("+Kc(s,h,w)+`),
          vec2(`+Kc(d,h,w)+"));",this.userCode=`
      float getValue(`+s.map(function(S){return"int "+S})+`) {
        `+m+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+t[r-2]+` &&
            `+i[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function Kc(n,e,t){var r=n.indexOf(e);return n.map(function(a,i){return i===r?a+" - "+t:a}).join()}var rF=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},aF=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dataFormat==="channelsLast",s=e-1-n.padInfo.top,l=t-1-n.padInfo.left,c=i?1:2,h=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+h+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},iF=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.padInfo.front,i=n.padInfo.top,s=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+a+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+i+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+s+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},oF=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,s=n.strideWidth,l=e-1-n.padInfo.front,c=t-1-n.padInfo.top,h=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},uF=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},sF=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=e-1-n.padInfo.top,s=t-1-n.padInfo.left,l=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Cw=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.padInfo.top,i=n.padInfo.left,s=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,h=n.dilationWidth,d=n.filterHeight,v=n.filterWidth,m=4*Math.floor(n.inChannels/4),g=n.inChannels%4,x=n.dataFormat==="channelsLast",w=x?1:2,S=x?2:3,E=x?3:1,_="",R="";t&&(_=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,R="result = activation(result);");var A=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+s+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+E+`];

        ivec2 xRCCorner =
            ivec2(coords[`+w+"], coords["+S+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+x+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+x+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+x+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+x+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+A+`
        `+R+`
        setOutput(result);
      }
    `},lF=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var e=n.padInfo.front,t=n.padInfo.top,r=n.padInfo.left,a=n.strideDepth,i=n.strideHeight,s=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.filterDepth,v=n.filterHeight,m=n.filterWidth,g=4*Math.floor(n.inChannels/4),x=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+s+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+v+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+h+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(x===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(x===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(x===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Rw=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.inHeight,i=n.inWidth,s=n.padInfo.top,l=n.padInfo.left,c=n.strideHeight,h=n.strideWidth,d=n.dilationHeight,v=n.dilationWidth,m=n.filterHeight,g=n.filterWidth,x=n.outChannels/n.inChannels,w="",S="";t&&(w=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,S="result = activation(result);");var E=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+c+", "+h+`);
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+x+`;
        int q = d2 - d1 * `+x+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+v+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+E+`
        `+S+`
        setOutput(result);
      }
    `},Aw=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var a=n.inHeight,i=n.inWidth,s=n.padInfo.top,l=n.padInfo.left,c=n.strideHeight,h=n.strideWidth,d=n.dilationHeight,v=n.dilationWidth,m=n.filterHeight,g=n.filterWidth,x=g,w="int xR; int xC; int xCOffset;",S=0;S<m;S++)for(var E=0;E<g;E++)w+=`
          vec4 xTexelR`+S+"C"+2*E+` = vec4(0.);
          vec4 wR`+S+"C"+E+` = vec4(0.);
          vec4 xR`+S+"C"+E+" = vec4(0.);";for(S=0;S<m;S++)for(var _=0;_<x;_++){if(w+=`
          xR = xRCorner + `+S*d+`;
          xC = xCCorner + `+(E=2*_)*v+`;
        `,h===1){if(E<g&&(w+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+S+"C"+E+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+S+"C"+E+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+S+"C"+E+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+S+"C"+E+" = vec4(previous.zw, xTexelR"+S+"C"+E+`.xy);
                } else {
                  xR`+S+"C"+E+" = vec4(0, 0, xTexelR"+S+"C"+E+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+S+"C"+E+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+E+` = vec4(0.);
                }

                xR`+S+"C"+E+" = xTexelR"+S+"C"+E+`;
              `,E+1<g)){var R=l%2==0?TS(v):v;v%2==0&&l%2==1||v%2!=0&&l%2!=1?(w+=`
                  xCOffset = xC + `+l%2+" + "+R+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+S+"C"+(E+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,v>1&&(w+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+S+"C"+E+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+S+"C"+E+` = vec4(0.);
                    }
                  `),w+=`
                  xR`+S+"C"+(E+1)+` = vec4(
                    xTexelR`+S+"C"+E+".zw, xTexelR"+S+"C"+(E+2)+`.xy);
                `):w+=`
                  xCOffset = xC + `+R+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+S+"C"+(E+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+S+"C"+(E+1)+" = xTexelR"+S+"C"+(E+2)+`;
                `}}else E<g&&(w+=`
              if(xR >= 0 && xR < `+a+`) {
            `,l%2==1?(w+=`
                xCOffset = xC + 1 - `+h+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+S+"C"+E+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+E+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+S+"C"+(E+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+S+"C"+(E+2)+` = vec4(0.);
                }

                xR`+S+"C"+E+` = vec4(
                  xTexelR`+S+"C"+E+".zw, xTexelR"+S+"C"+(E+2)+`.zw);
              `,E+1<g&&(w+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+h+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+S+"C"+(E+1)+" = vec4(xTexelR"+S+"C"+(E+2)+`.xy, final.xy);
                `)):(w+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+S+"C"+E+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+S+"C"+E+` = vec4(0.);
                }

                xCOffset = xC + `+h+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+S+"C"+(E+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+S+"C"+(E+2)+` = vec4(0.);
                }

                xR`+S+"C"+E+` = vec4(
                  xTexelR`+S+"C"+E+".xy, xTexelR"+S+"C"+(E+2)+`.xy);
              `,E+1<g&&(w+=`
                  xR`+S+"C"+(E+1)+` = vec4(
                    xTexelR`+S+"C"+E+".zw, xTexelR"+S+"C"+(E+2)+`.zw);
                `)),w+="}");E<g&&(w+=`
            vec4 wTexelR`+S+"C"+E+" = getW("+S+", "+E+`, d1, q);
            wR`+S+"C"+E+" = vec4(wTexelR"+S+"C"+E+".xz, wTexelR"+S+"C"+E+`.xz);
          `,E+1<g&&(w+=`
              vec4 wTexelR`+S+"C"+(E+1)+" = getW("+S+", "+(E+1)+`, d1, q);
              wR`+S+"C"+(E+1)+` =
                vec4(wTexelR`+S+"C"+(E+1)+".xz, wTexelR"+S+"C"+(E+1)+".xz);"))}for(S=0;S<m;S++)for(E=0;E<g;E++)w+="dotProd += xR"+S+"C"+E+" * wR"+S+"C"+E+";";var A="",C="";t&&(A=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,C="result = activation(result);");var D=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+A+`

      const ivec2 strides = ivec2(`+c+", "+h+`);
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+w+`

        vec4 result = dotProd;
        `+D+`
        `+C+`
        setOutput(result);
      }
    `},cF=function(n,e,t,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=n[0],s=n[1],l=n[2],c=n[3],h=e[0],d=t[0],v=t[1];this.outputShape=[h,d,v,c];var m=r==="bilinear"?1:0,g=[s-1+".0",l-1+".0"],x=g[0],w=g[1],S=d>1?[""+(s-1)/(d-1),"(y2-y1) * height_ratio","y1*"+x+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+x],E=S[0],_=S[1],R=S[2],A=v>1?[""+(l-1)/(v-1),"(x2-x1) * width_ratio","x1*"+w+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+w],C=A[0],D=A[1],O=A[2];this.userCode=`
      const float height_ratio = float(`+E+`);
      const float width_ratio = float(`+C+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+_+`;
        float width_scale = `+D+`;

        float in_y = `+R+`;
        if( in_y < 0.0 || in_y > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+O+`;
        if( in_x < 0.0 || in_x > `+w+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},fF=function(n,e,t){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=n[n.length-1],i=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+mt(r)+` coords = getOutputCoords();
        int end = `+Tw(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+Tw(r,"coords")+` = idx;
          val += getX(`+function(s,l){if(s===1)return""+l;if(s===2)return l+".x, "+l+".y";if(s===3)return l+".x, "+l+".y, "+l+".z";if(s===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function Tw(n,e){if(n===1)return""+e;if(n===2)return e+".y";if(n===3)return e+".z";if(n===4)return e+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var hF=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=qs.DENSE;var e=Ms(n),t=gn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Xi(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},dF=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=qs.DENSE;var e=Ms(n),t=gn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Xi(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},pF=function(){function n(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),vF=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},mF=function(n){this.variableNames=["A"],this.outTexUsage=Qn.DOWNLOAD;var e=gn();this.outputShape=n,this.userCode=`
      `+uE+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},gF=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Qn.DOWNLOAD;var e=gn();this.outputShape=n,this.userCode=`
      `+uE+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},yF=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=gn(),a=e[0],i=e[1];this.outputShape=n;var s="result";t&&(s="floor(result * 255. + 0.5)"),this.userCode=`
      `+Wm(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+s+`, 0., 0., 0.);
      }
    `},bF=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=gn(),a=e[0],i=e[1];this.outputShape=n;var s="",l="result";t&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var h=0;h<=1;h++){var d=2*c+h;s+=`
          localCoords = coords;
          if(localCoords[2] + `+h+" < "+n[2]+`) {
            localCoords[2] += `+h+`;
            if(localCoords[1] + `+c+" < "+n[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Wm(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+s+`

        `+r.output+" = "+l+`;
      }
    `},xF="return real * expR - imag * expI;",wF="return real * expI + imag * expR;",Dw=function(n,e,t){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var a=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},SF=function(){function n(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(t.valueLoc,e)}},n}(),EF=function(n,e,t){this.variableNames=["A","indices"];var r=n.slice();r[t]=e,this.outputShape=r,this.rank=r.length;var a=mt(this.rank),i=function(s,l){var c=s.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var h=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],v=0;v<s.length;v++)v===l?d.push("int(getIndices("+h[v]+"))"):d.push(""+h[v]);return d.join()}(n,t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},_F=function(n,e,t){this.sliceDim=n,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var r=mt(e.length),a=mt(t.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function CF(n,e){var t=gn();return xM(n,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function RF(n,e){return CM(n,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function AF(n,e){return RM(n,e,new Uint16Array([0,1,2,2,1,3]))}function ll(n,e,t,r,a,i,s){TM(t,r);var l=AM(n,e),c=n.TEXTURE_2D;return Ce(n,e,function(){return n.bindTexture(c,l)}),Ce(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),Ce(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),Ce(n,e,function(){return n.texParameteri(c,n.TEXTURE_MIN_FILTER,n.NEAREST)}),Ce(n,e,function(){return n.texParameteri(c,n.TEXTURE_MAG_FILTER,n.NEAREST)}),Ce(n,e,function(){return n.texImage2D(c,0,a,t,r,0,i,s,null)}),Ce(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)}),l}function TF(n,e,t,r,a){var i=Zf(t,r);return ll(n,e,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,n.FLOAT)}function DF(n,e,t,r,a){var i=Zf(t,r);return ll(n,e,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function OF(n,e,t,r,a){var i=Zf(t,r);return ll(n,e,i[0],i[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function kF(n,e,t,r,a){var i=sl(t,r);return ll(n,e,i[0],i[1],a.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function NF(n,e,t,r,a){var i=sl(t,r);return ll(n,e,i[0],i[1],a.internalFormatPackedHalfFloat,n.RGBA,a.textureTypeHalfFloat)}function MF(n,e,t,r){return Ce(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),mw(n,e,t,"clipSpacePos",r,3,20,0)&&mw(n,e,t,"uv",r,2,20,12)}function IF(n,e,t,r,a,i,s){var l,c,h;Ce(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),i instanceof Uint8Array?(l=new Uint8Array(r*a*4),c=n.UNSIGNED_BYTE,h=n.RGBA):(l=new Float32Array(r*a*4),c=n.FLOAT,h=s.internalFormatPackedFloat),l.set(i),Ce(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,h,r,a,0,n.RGBA,c,l)}),Ce(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function FF(n,e,t,r){Ce(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),r.data instanceof Uint8Array?Ce(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):Ce(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),Ce(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function BF(n,e,t,r,a){var i=n.createBuffer();Ce(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,i)});var s=16*t*r;return Ce(n,e,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,s,n.STREAM_READ)}),Ce(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,0)}),Ce(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),i}function LF(n,e,t){var r=n,a=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function zF(n,e,t,r,a){var i=Zf(t,r),s=i[0],l=i[1],c=new Uint8Array(t*r*4);return Ce(n,e,function(){return n.readPixels(0,0,s,l,a.downloadTextureFormat,n.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function PF(n,e,t,r,a,i,s,l){var c=n,h=new Float32Array(function(d,v){var m=sl(d,v);return m[0]*m[1]*4}(i,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,h),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),h}function UF(n,e,t,r){var a=new Float32Array(t*r*4);return Ce(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,a)}),a}var HF=function(){function n(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=le().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,vM(t,e)):this.gl=aa(t);var r="WEBGL_color_buffer_float";if(le().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=jc(this.gl,this.debug,"OES_texture_float"),br(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=jc(this.gl,this.debug,"OES_texture_half_float");else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),br(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=jc(this.gl,this.debug,"EXT_color_buffer_half_float");else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",br(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!br(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=RF(this.gl,this.debug),this.indexBuffer=AF(this.gl,this.debug),this.framebuffer=DM(this.gl,this.debug),this.textureConfig=Im(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return le().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Ce(t,this.debug,function(){return t.finish()}),Ce(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Ce(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Ce(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Ce(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Ce(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),TF(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),DF(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),OF(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),FF(this.gl,this.debug,e,t)},n.prototype.uploadDenseMatrixToTexture=function(e,t,r,a){this.throwIfDisposed(),IF(this.gl,this.debug,e,t,r,a,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),NF(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),kF(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(gw(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ce(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return zF(a.gl,a.debug,t,r,a.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(e,t,r,a,i,s){return PF(this.gl,e,0,0,0,i,s,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return LF(this.gl,e,t)},n.prototype.createBufferFromTexture=function(e,t,r){this.bindTextureToFrameBuffer(e);var a=BF(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},n.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},n.prototype.createFence=function(e){var t,r,a=this;if(le().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var l=i.clientWaitSync(s,0,0);return l===i.ALREADY_SIGNALED||l===i.CONDITION_SATISFIED},t=s}else le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(t,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return UF(a.gl,a.debug,t,r)})},n.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,r=wM(t,this.debug,e),a=CF(t,this.debug),i=EM(t,this.debug);return Ce(t,this.debug,function(){return t.attachShader(i,a)}),Ce(t,this.debug,function(){return t.attachShader(i,r)}),_M(t,this.debug,i),this.debug&&Zp(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=MF(t,this.debug,this.program,this.vertexBuffer)),i},n.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Ce(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},n.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Zp(this.gl,this.debug,this.program),Ce(this.gl,this.debug,function(){return t.gl.useProgram(e)})},n.prototype.getUniformLocation=function(e,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?kM(this.gl,this.debug,e,t):NM(this.gl,e,t)},n.prototype.getAttributeLocation=function(e,t){var r=this;return this.throwIfDisposed(),Ce(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,t)})},n.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},n.prototype.setInputMatrixTexture=function(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),MM(this.gl,this.debug,this.program,e,t,r)},n.prototype.setOutputMatrixTexture=function(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)},n.prototype.setOutputPackedMatrixTexture=function(e,t,r){this.throwIfDisposed();var a=sl(t,r),i=a[0],s=a[1];this.setOutputMatrixTextureDriver(e,i,s)},n.prototype.setOutputMatrixWriteRegion=function(e,t,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,t)},n.prototype.setOutputPackedMatrixWriteRegion=function(e,t,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&Zp(this.gl,this.debug,this.program),Wc(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Ce(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Ce(this.gl,this.debug,function(){return e.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=jc(this.gl,this.debug,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},n.prototype.endQuery=function(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(e){return we(this,void 0,void 0,function(){var t=this;return Se(this,function(r){switch(r.label){case 0:return[4,cw(function(){return t.disposed||t.isQueryAvailable(e,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},n.prototype.pollFence=function(e){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var e=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},n.prototype.addItemToPoll=function(e,t){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||cw(function(){return r.pollItems(),r.itemsToPoll.length===0})},n.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Yp(this.gl,this.debug,e,this.framebuffer),this.debug&&Wc(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Yp(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Wc(this.gl)):gw(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var r=t();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(e,t,r){this.throwIfDisposed();var a=this.gl;Yp(a,this.debug,e,this.framebuffer),this.debug&&Wc(a),this.outputTexture=e,Ce(a,this.debug,function(){return a.viewport(0,0,t,r)}),Ce(a,this.debug,function(){return a.scissor(0,0,t,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(e,t,r,a){var i=this;this.throwIfDisposed(),Ce(this.gl,this.debug,function(){return i.gl.scissor(e,t,r,a)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n}();function Ow(n,e){if(n.length!==e.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+e.length+" inputs");n.forEach(function(t,r){var a=t.logicalShape,i=e[r],s=i.shape;if(!Jt(a,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+s+" must match");if(!t.isUniform||!i.isUniform){var l=t.texShape,c=i.isUniform?null:i.texData.texShape;if(!Jt(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}})}var VF=function(n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=t.filterWidth,a=t.inChannels,i=t.strideWidth,s=t.strideHeight,l=t.padInfo,c=t.outWidth,h=t.dilationWidth,d=t.dilationHeight,v=t.dataFormat,m=l.left,g=l.top,x=a*r,w=gn(),S=v==="channelsLast",E=S?0:1,_=S?1:2,R="",A=0;A<=1;A++)for(var C=0;C<=1;C++)R+=`
          blockIndex = rc.y + `+C+`;
          pos = rc.x + `+A+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+s+" - "+g+`;
            d0 = offsetY + `+d+" * (pos / "+x+`);

            if(d0 < `+e[E]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+m+`.);
              d1 = offsetX + `+h+" * (int(mod(float(pos), "+x+".) / "+a+`.));

              if(d1 < `+e[_]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+S+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*A+C)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*A+C)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+R+`

        `+w.output+` = result;
      }
    `},jF=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[];var i,s=e,l=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+s+"; j <= "+s+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},WF=function(n,e,t,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=t,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},GF=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=e,l=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+s+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+s+"; j <= "+s+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},qF=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideHeight,t=n.strideWidth,r=n.dilationHeight,a=n.effectiveFilterHeight,i=n.effectiveFilterWidth,s=a-1-n.padInfo.top,l=i-1-n.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},KF=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.dilationDepth,i=n.dilationHeight,s=n.dilationWidth,l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,h=n.effectiveFilterWidth,d=l-1-n.padInfo.front,v=c-1-n.padInfo.top,m=h-1-n.padInfo.left,g=l*c*h-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+v+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+s+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+h+` +
                  wR * `+h+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},nv=function(n,e,t,r,a,i,s){t===void 0&&(t=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),s===void 0&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var l=t?n[1]:n[2],c=Math.ceil(l/2),h=t?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",v=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",x="";i&&(g=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,x="result = activation(result);");var w=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+h+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+v[0]+" * "+m[0]+`);
          result += (`+v[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+w+`

        `+x+`

        setOutput(result);
      }
    `},XF=function(){function n(e,t,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(t.seedLoc,e)}},n}(),$F=function(n,e,t,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},ZF=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var e=n.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=In("rc",e),r=mt(e),a=function(l,c,h){if(l===1)return"rc > "+c[0];for(var d="",v=l-2;v<l;v++)d+=h[v]+" >= "+c[v],v<l-1&&(d+="||");return d}(e,n,t),i=function(l,c,h,d){if(l===1)return"";var v=d.slice(-2);return`
    int r = `+v[0]+`;
    int c = `+v[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+h+`;
  `}(e,n[n.length-1],n[n.length-2],t),s=function(l,c){var h=l.length,d=function(v,m){for(var g=[],x=0;x<=1;x++)for(var w=0;w<=1;w++){for(var S=(x===0?"r":"rp1")+", "+(w===0?"c":"cp1"),E=2;E<v;E++)S=m[m.length-1-E]+","+S;g.push(S)}return g}(h,c);return h===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(n,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+s+`));
          }
        }
      `}},YF=function(n,e,t){this.variableNames=["x"],this.outputShape=e.map(function(c,h){return c[0]+n[h]+c[1]});var r=n.length,a=mt(r),i=e.map(function(c){return c[0]}).join(","),s=e.map(function(c,h){return c[0]+n[h]}).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+s+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+s+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},QF=function(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(S,E){return S[0]+n[E]+S[1]});for(var r=n.length,a=mt(r),i=e.map(function(S){return S[0]}).join(","),s=e.map(function(S,E){return S[0]+n[E]}).join(","),l=In("rc",r),c=In("source",r),h=l[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+c.slice(-2).join()+")",v=[a+" rc = outputLoc;",l[r-1]+` += 1;
       if(`+h+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+l[r-2]+` += 1;
       if(`+l[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+l[r-1]+` += 1;
         if(`+h+") {"],m=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",x=0,w=r===1?2:4;x<w;x++)g+=`
        `+v[x]+`
        if (`+m+`) {
          result[`+x+"] = float("+t+`);
        } else {
          `+a+` source = rc - start;
          result[`+x+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+s+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},rv=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideHeight,i=n.strideWidth,s=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterHeight,h=n.effectiveFilterWidth,d=n.padInfo.top,v=n.padInfo.left;this.outputShape=n.outShape;var m=e==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+d+", "+v+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+h+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(x="avgValue / count");var w=4*Math.floor(r/4),S=r%4,E=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+d+", "+v+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+s+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+w+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+E+`
          }

          int xC = xCCorner + `+w+`;
          if (`+(S===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+E+`
          } else if (`+(S===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+E+`
          } else if (`+(S===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+E+`
          }
        }
        setOutput(`+x+`);
      }
    `}},av=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,s=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,v=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=n.padInfo.front,x=n.padInfo.top,w=n.padInfo.left;this.outputShape=n.outShape;var S=e==="avg",E="0.0";if(S||(E="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+s+`);
        const ivec3 pads = ivec3(`+g+", "+x+", "+w+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+v+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+h+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+v+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(_="avgValue / count");var R=4*Math.floor(r/4),A=r%4,C=`
      if (`+S+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+s+`);
      const ivec3 pads = ivec3(`+g+", "+x+", "+w+`);
      const float initializationValue = `+E+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+E+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+v+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+R+`; wC += 4) {
              int xC = xCCorner + wC * `+h+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+h+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+h+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+h+`, ch)
              );

              `+C+`
            }

            int xC = xCCorner + `+R+`;
            if (`+(A===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(A===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+h+`, ch),
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(A===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+h+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+h+`, ch),
                initializationValue
              );

              `+C+`
            }
          }
          setOutput(`+_+`);
        }
      }
    `}},JF=function(n,e){this.variableNames=["x"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=Math.ceil(a/t);this.outputShape=[r,i];var s="0.0",l="";e==="prod"?s="1.0":e==="min"?(s="1.0 / 1e-20",l="min"):e==="max"&&(s="-1.0 / 1e-20",l="max");var c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");var h=4*Math.floor(t/4),d=t%4,v=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,m="vec4";e==="all"?(s="1.0",v=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):e==="any"&&(s="0.0",v=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var g="";a%t>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+s+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+s+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+h+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+v+`
        }

        int inIdx = inOffset + `+h+`;
        if (`+(d===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+v+`
        } else if (`+(d===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+v+`
        } else if (`+(d===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+v+`
        }
        setOutput(`+c+`);
      }
    `},eB=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var t="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),t+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Xi(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+Wm(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+t+`

        setOutput(result);
      }
    `},tB=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],s=n.shape,l=s[1],c=s[2],h=[t&&l>1?a-1:a,t&&c>1?i-1:i],d=[t&&l>1?l-1:l,t&&c>1?c-1:c],v=h[0]/d[0],m=h[1]/d[1],g=1/v,x=1/m,w=2*Math.ceil(g)+2,S=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+v+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+w+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},nB=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],s=n[2],l=n[3];this.outputShape=[a,e,t,l];var c=[r&&e>1?i-1:i,r&&t>1?s-1:s],h=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/h[0]+`,
          `+c[1]/h[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},rB=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=n[0],i=n[1],s=n[2],l=n[3];this.outputShape=[a,e,t,l];var c=[r&&e>1?i-1:i,r&&t>1?s-1:s],h=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/h[0]+`,
          `+c[1]/h[1]+`,
          `+c[1]/h[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+s+`.0,
                                     `+s+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},aB=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],s=n.shape,l=s[1],c=s[2],h=[t&&l>1?a-1:a,t&&c>1?i-1:i],d=[t&&l>1?l-1:l,t&&c>1?c-1:c],v=h[0]/d[0],m=h[1]/d[1],g=1/v,x=1/m,w=2*Math.ceil(g)+2,S=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+v+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+w+`);
        const int winWidth = int(`+S+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+h[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+h[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},iB=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],s=n[2],l=n[3];this.outputShape=[a,e,t,l];var c=[r&&e>1?i-1:i,r&&t>1?s-1:s],h=[r&&e>1?e-1:e,r&&t>1?t-1:t],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/h[0]+`,
          `+c[1]/h[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},oB=function(n,e){this.variableNames=["x"];var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=n,t!==1){var r=n.map(function(i,s){return function(l){return e.indexOf(l)!==-1&&n[l]!==1?n[l]+" - coords["+l+"] - 1":"coords["+l+"]"}(s)}).join(","),a=mt(t);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},uB=function(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=n;var r=In("rc",t),a=r[t-1]+" + 1 < "+this.outputShape[t-1],i=r[t-2]+" + 1 < "+this.outputShape[t-2],s=mt(t);function l(c){var h=n.map(function(d,v){return function(m,g){return e.indexOf(m)!==-1&&n[m]!==1?n[m]+" - "+g[m]+" - 1":""+g[m]}(v,c)});return"getChannel(getX("+h.join(",")+"), vec2("+h.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+s+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return l(c)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",l(c)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[t-2]="("+c[t-2]+" + 1)",l(c)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",c[t-2]="("+c[t-2]+" + 1)",l(c)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},kw=function(n,e,t,r,a,i,s){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var l=mt(a.length),c=mt(i.length),h="";t===1?h="i":t===2&&(h="i, j");var d="getIndices("+h+")",v="";r===1?v="i":r===2&&(v="i, coords[1]");var m="getUpdates("+v+")",g=e>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},sB=function(n,e){this.variableNames=["x","segmentIds"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=n.numSegments,s=i*Math.ceil(a/t);this.outputShape=[r,s];var l=4*Math.floor(t/4),c=t%4,h=`
        sumValue += dot(values, segFilter);
    `,d="";a%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var v="";a%t>0&&(v=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+v+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+h+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+h+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+h+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+h+`
        }
        setOutput(sumValue);
      }
    `},lB=function(n,e,t){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],l=[],c=0;c<e.length;c++)l.push(""+i[c]),c<n&&s.push(""+i[c]);r=s.join(),a=l.join()}var h=mt(t);this.userCode=`
      void main() {
        `+h+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},cB=function(){function n(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,r=mt(this.rank),a="uniform int start["+this.rank+"];",i=function(s){if(s===1)return"sourceLoc";if(s<=6)return iv.slice(0,s).map(function(l){return"sourceLoc."+l}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(s,l){return"sourceLoc."+iv[l]+" = start["+l+"] + coords."+iv[l]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+t+`
        setOutput(getSource(`+i+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),iv=["x","y","z","w","u","v"],fB=function(){function n(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=mt(this.rank),r=In("coords",this.rank),a=In("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",s="getChannel(getSource("+a.join()+"), "+i+")",l=`
      result.x = `+s+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+s+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+s+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+s+`;
        }
      }
    `,h=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map(function(d,v){return"start["+v+"]"}).join()+");":e.map(function(d,v){return a[v]+" = "+r[v]+" + start["+v+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+h+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),hB=function(n,e,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=mt(t.length),i=mt(t.length),s="";if(r===1)s="coords * strides + begin";else{var l=0;s=t.map(function(c,h){return l++,t.length===1?"coords * strides["+h+"] + begin["+h+"]":"coords["+(l-1)+"] * strides["+h+"] + begin["+h+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+n+`);
      `+a+" strides = "+a+"("+e+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+s+`));
      }
    `},dB=function(){function n(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(e,t,r){var a,i=Nw(t,r),s=Mw(e,i,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[s].shift();return this.usedTextures[s].push(l),l}return this.numUsedTextures++,this.log(),i===Yn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Yn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Yn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Yn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Yn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),a},n.prototype.releaseTexture=function(e,t,r,a){if(this.freeTextures!=null){var i=Mw(t,Nw(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[i],l=s.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(l,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(a){e.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function Nw(n,e){if(n===Qn.UPLOAD)return Yn.PACKED_2X2_FLOAT32;if(n===Qn.RENDER||n==null)return function(t){return le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Yn.PACKED_2X2_FLOAT32:Yn.UNPACKED_FLOAT32:t?Yn.PACKED_2X2_FLOAT16:Yn.UNPACKED_FLOAT16}(e);if(n===Qn.DOWNLOAD||n===Qn.PIXELS)return Yn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function Mw(n,e,t){return n[0]+"_"+n[1]+"_"+e+"_"+t}var pB=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[r]*e[r];this.outputShape=t,this.rank=t.length;var a=mt(this.rank),i=function(s){var l=s.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+s[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],h=[],d=0;d<s.length;d++)h.push("imod("+c[d]+", "+s[d]+")");return h.join()}(n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},vB=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];this.outputShape=t,this.rank=t.length;var a=mt(this.rank),i=function(s){var l=s.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],h=new Array(l),d=0;d<s.length;d++)h[s[d]]=c[d];return h.join()}(e);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},mB=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=mt(this.rank),i=oE("rc",this.rank),s=new Array(this.rank);for(r=0;r<e.length;r++)s[e[r]]=i[r];var l="vec2("+s.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+t[this.rank-1],h="getChannel(getA("+s.join()+"), "+l+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+h+`;
      if(`+c+`) {
        result[1] = `+h+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+h+`;
        if(`+c+`) {
          result[3] = `+h+`;
        }
      }
      setOutput(result);
    }
    `},Gm=1.7580993408473768,qm=1.0507009873554805,Ue=function(n,e){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Mr="if (isnan(x)) return x;",gB="return x;",Iw="return abs(x);",fE=Mr+`
  return (x < 0.0) ? 0.0 : x;
`,hE=Mr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,dE="return (x >= 0.0) ? x : (exp(x) - 1.0);",yB=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Gm+`;
  float scale = `+qm+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Fw="return -x;",Bw="return ceil(x);",Lw="return floor(x);",zw="return exp(x);",Pw="return exp(x) - 1.0;",bB=Mr+`
  return sin(x);
`,xB=Mr+`
  return cos(x);
`,wB=Mr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,SB=Mr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,EB=Mr+`
  return atan(x);
`,_B=Mr+"return log(x + sqrt(x * x + 1.0));",CB=Mr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,RB=Mr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Xc="return x;",AB="return x;",pE=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vE=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mE=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Os=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},TB=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var e=n.length,t=In("rc",e),r=mt(e),a=function(l,c){if(l===1)return"rc";for(var h="",d=0;d<l;d++)h+=c[d],d<l-1&&(h+=",");return h}(e,t),i=t.slice(-2),s=e<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+s+`));
      }
    `},$c={};function Zc(n,e){if(e===void 0&&(e=!1),n==="linear")return e?AB:gB;if(n==="relu")return e?pE:fE;if(n==="elu")return e?mE:dE;if(n==="relu6")return e?vE:hE;if(n==="prelu")return e?cE:lE;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var DB=600,OB=function(n){function e(t){var r,a=n.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!le().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var i=aa(le().getNumber("WEBGL_VERSION"));a.binaryCache=((r=le().getNumber("WEBGL_VERSION"))in $c||($c[r]={}),$c[r]),a.gpgpu=new HF(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=t,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=t.gl.canvas;return a.textureManager=new dB(a.gpgpu),a.numMBBeforeWarning=le().global.screen==null?1024:le().global.screen.height*le().global.screen.width*window.devicePixelRatio*DB/1024/1024,a.texData=new YS(a,G),a}return Nr(e,n),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,r,a){if(le().getBool("DEBUG")&&this.checkNumericalProblems(t),a==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:t,usage:Qn.UPLOAD}),i},e.prototype.move=function(t,r,a,i){if(le().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:a,dtype:i,values:r,usage:Qn.UPLOAD})},e.prototype.readSync=function(t){var r=this.texData.get(t),a=r.values,i=r.dtype,s=r.complexTensors,l=r.slice,c=r.shape,h=r.isPacked;if(l!=null){var d=void 0;d=h?new Os(c,Xc):new Ue(c,Xc);var v=this.runWebGLProgram(d,[{dataId:t,shape:c,dtype:i}],i),m=this.readSync(v.dataId);return this.disposeData(v.dataId),m}if(a!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return a;var g,x,w=this.activeTimers!=null;return w&&(g=Gr()),i==="complex64"?x=Qv(s.real.dataSync(),s.imag.dataSync()):x=this.getValuesFromTexture(t),w&&(this.downloadWaitMs+=Gr()-g),this.convertAndCacheOnCPU(t,x)},e.prototype.read=function(t){return we(this,void 0,void 0,function(){var r,a,i,s,l,c,h,d,v,m,g,x,w,S,E,_,R,A,C,D,O,F;return Se(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(I){return r.push(I)})];if(a=this.texData.get(t),i=a.values,s=a.shape,l=a.slice,c=a.dtype,h=a.complexTensors,d=a.isPacked,l!=null)return v=void 0,v=d?new Os(s,Xc):new Ue(s,Xc),m=this.runWebGLProgram(v,[{dataId:t,shape:s,dtype:c}],c),g=this.read(m.dataId),this.disposeData(m.dataId),[2,g];if(i!=null)return[2,this.convertAndCacheOnCPU(t)];if(!le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&le().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return x=null,c!=="complex64"&&le().get("WEBGL_BUFFER_SUPPORTED")&&(w=this.decode(t),S=this.texData.get(w.dataId),x=(F=this.gpgpu).createBufferFromTexture.apply(F,[S.texture].concat(Ms(s)))),this.pendingRead.set(t,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([h.real.data(),h.imag.data()])];case 3:return _=N.sent(),R=_[0],A=_[1],E=Qv(R,A),[3,5];case 4:x==null?E=this.getValuesFromTexture(t):(C=_e(s),E=this.gpgpu.downloadFloat32MatrixFromBuffer(x,C)),N.label=5;case 5:return w!=null&&this.disposeData(w.dataId),D=this.convertAndCacheOnCPU(t,E),O=this.pendingRead.get(t),this.pendingRead.delete(t),O.forEach(function(I){return I(D)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,D]}})})},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var a=t[r];if(!yM(a))throw le().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var r,a=this.texData.get(t),i=a.shape,s=a.dtype,l=a.isPacked,c=_e(i);if(le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var h=this.decode(t),d=this.texData.get(h.dataId),v=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(Ms(i))).subarray(0,c);return this.disposeData(h.dataId),v}var m=le().getBool("WEBGL_PACK")&&l===!0,g=m?Qp(i):i,x=m?new gF(g):new mF(g),w=this.runWebGLProgram(x,[{shape:g,dtype:s,dataId:t}],"float32"),S=this.texData.get(w.dataId),E=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(S.texture,S.texShape[0],S.texShape[1]).subarray(0,c);return this.disposeData(w.dataId),E},e.prototype.time=function(t){return we(this,void 0,void 0,function(){var r,a,i,s,l,c,h;return Se(this,function(d){switch(d.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,t(),s=xu(this.activeTimers.map(function(v){return v.query})).filter(function(v){return v!=null}),l=xu(this.activeTimers.map(function(v){return v.name})).filter(function(v){return v!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return h=d.sent(),c.kernelMs=QN(h),c.getExtraProfileInfo=function(){return h.map(function(v,m){return{name:l[m],ms:v}}).map(function(v){return v.name+": "+v.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Gr(),endMs:null}},e.prototype.endTimer=function(t){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Gr(),t)},e.prototype.getQueryTime=function(t){return we(this,void 0,void 0,function(){var r;return Se(this,function(a){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var r=this.texData.get(t),a=r.texture,i=r.dtype,s=r.texShape,l=r.usage,c=r.isPacked,h=r.slice,d=h&&h.origDataId||t,v=this.dataRefCount.get(d);v>1?this.dataRefCount.set(d,v-1):(this.dataRefCount.delete(d),a!=null&&(this.numBytesInGPU-=this.computeBytes(s,i),this.textureManager.releaseTexture(a,s,l,c)));var m=this.texData.get(t);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return le().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=G.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(i){return a.texData.get(i.dataId).texture==null&&i.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,r){var a=this.makeOutput(t.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:G.keep(t.clone()),imag:G.keep(r.clone())},a},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,a);if(_e(a)===0)return hn([],a,t.dtype);var i=this.texData.get(t.dataId).isPacked,s=$S(t.shape,r,a);if(i||!s){var l=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fB(a):new cB(a),c=l.getCustomSetupFunc(r);return this.compileAndRun(l,[t],null,c)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,a)},e.prototype.shallowSlice=function(t,r,a){var i=this.texData.get(t.dataId),s=this.makeOutput(a,t.dtype),l=this.texData.get(s.dataId);Object.assign(l,i),l.shape=a,l.dtype=t.dtype;var c=ZS(r,t.strides);i.slice&&(c+=i.slice.flatOffset),l.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||t.dataId};var h=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,h+1),s},e.prototype.stridedSlice=function(t,r,a,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,a,i);var s=Pm(r,a,i);if(s.some(function(c){return c===0}))return hn([],s);var l=new hB(r,i,s);return this.compileAndRun(l,[t])},e.prototype.reverse=function(t,r){var a=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uB(t.shape,r):new oB(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var a=t.map(function(g){return yr(g)}),i=t.map(function(g){return Kr(g)});return ln(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>le().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(t.length/2),l=this.concat(t.slice(0,s),r),c=this.concat(t.slice(s),r);return this.concat([l,c],r)}if(le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var h=new nF(t.map(function(g){return g.shape}),r);return this.compileAndRun(h,t)}var d=Su(t.map(function(g){return g.shape}),r),v=t.map(function(g){return g.as2D(-1,_e(g.shape.slice(r)))}),m=new tF(v.map(function(g){return g.shape}));return this.compileAndRun(m,v).reshape(d)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Fw,t.dtype);var r=new Ue(t.shape,Fw);return this.compileAndRun(r,[t])},e.prototype.batchMatMul=function(t,r,a,i){var s=a?t.shape[2]:t.shape[1],l=i?r.shape[1]:r.shape[2],c=a?t.shape[1]:t.shape[2],h=t.shape[0];if((s===1||l===1)&&c>1e3){a&&(t=t.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var d=l===1?t:t.as3D(h,c,1),v=l===1?2:1,m=l===1?r.as3D(h,1,c):r;return this.multiply(d,m).sum(v,!0)}var g=cn(t.dtype,r.dtype),x=new nv(t.shape,[h,s,l],a,i);return this.compileAndRun(x,[t,r],g)},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,s=t.transposeB,l=t.bias,c=t.activation,h=t.preluActivationWeights,d=i?r.shape[2]:r.shape[1],v=s?a.shape[1]:a.shape[2],m=r.shape[0],g=cn(r.dtype,a.dtype),x=l!=null,w=h!=null,S=c?Zc(c,!0):null,E=new nv(r.shape,[m,d,v],i,s,x,S,w),_=[r,a];return l&&_.push(l),h&&_.push(h),this.compileAndRun(E,_,g)},e.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var a=this.texData.get(t.dataId),i=this.texData.get(r.dataId),s=new Ew(ZI,t.shape,r.shape),l=new Ew(YI,t.shape,r.shape),c=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],h=this.compileAndRun(s,c),d=this.compileAndRun(l,c),v=this.complex(h,d);return h.dispose(),d.dispose(),v}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,_w,t.dtype);var m=new Ot(_w,t.shape,r.shape);return this.compileAndRun(m,[t,r],t.dtype)},e.prototype.batchNormalization=function(t,r,a,i,s,l){var c=[t,r,a],h=null;l!=null&&(h=l.shape,c.push(l));var d=null;if(s!=null&&(d=s.shape,c.push(s)),le().getBool("WEBGL_PACK_NORMALIZATION")){var v=new $I(t.shape,r.shape,a.shape,h,d,i);return this.compileAndRun(v,c)}var m=new XI(t.shape,r.shape,a.shape,h,d,i);return this.compileAndRun(m,c)},e.prototype.localResponseNormalization4D=function(t,r,a,i,s){var l=le().getBool("WEBGL_PACK_NORMALIZATION")?new GF(t.shape,r,a,i,s):new jF(t.shape,r,a,i,s);return this.compileAndRun(l,[t])},e.prototype.LRNGrad=function(t,r,a,i,s,l,c){var h=new WF(r.shape,i,s,l,c);return this.compileAndRun(h,[r,a,t])},e.prototype.tile=function(t,r){if(t.dtype==="string"){var a=this.readSync(t.dataId).map(function(s){return xf(s)});return aE(Le(t.shape,t.dtype,a),r)}var i=new pB(t.shape,r);return this.compileAndRun(i,[t])},e.prototype.pad=function(t,r,a){var i=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new QF(t.shape,r,a):new YF(t.shape,r,a);return this.compileAndRun(i,[t])},e.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var a=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mB(t.shape,r):new vB(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.gather=function(t,r,a){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,a);var i=new EF(t.shape,r.size,a);return this.compileAndRun(i,[t,r])},e.prototype.batchToSpaceND=function(t,r,a){L(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(v,m){return v*m}),s=Rf(t.shape,r,i),l=Af(s.length,r.length),c=Tf(t.shape,r,i),h=GS(a,r.length),d=qS(c,a,r.length);return t.reshape(s).transpose(l).reshape(c).slice(h,d)},e.prototype.spaceToBatchND=function(t,r,a){L(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(m,g){return m*g}),s=[[0,0]];s.push.apply(s,a);for(var l=1+r.length;l<t.shape.length;++l)s.push([0,0]);var c=t.pad(s),h=Rf(c.shape,r,i,!1),d=Af(h.length,r.length,!1),v=Tf(c.shape,r,i,!1);return c.reshape(h).transpose(d).reshape(v)},e.prototype.reduce=function(t,r,a){var i=t.shape[0],s=t.shape[1],l=Jp(s),c=new JF({windowSize:l,inSize:s,batchSize:i},r),h=this.compileAndRun(c,[t],a);return h.shape[1]===1?h:this.reduce(h,r,a)},e.prototype.argReduce=function(t,r,a){a===void 0&&(a=null);var i=t.shape[0],s=t.shape[1];a!=null&&(i=a.shape[0],s=a.shape[1]);var l=Jp(s),c=new PI({windowSize:l,inSize:s,batchSize:i},r,a==null),h=[t];a!=null&&h.push(a);var d=this.compileAndRun(c,h,"int32");return d.shape[1]===1?d:this.argReduce(t,r,d)},e.prototype.argReducePacked=function(t,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:t.shape,s=Jp(i[i.length-1]),l=new GI(i,s,r,a==null),c=a==null?[t]:[t,a],h=this.compileAndRun(l,c,"int32");return h.rank===t.rank?this.argReducePacked(t,r,h):h},e.prototype.sum=function(t,r){Zn("sum",r,t.rank);var a=vn(t.shape,r),i=a[0],s=_e(a[1]),l=t.as2D(-1,s),c=Gp(t.dtype);return this.reduce(l,"sum",c).reshape(i)},e.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var a=vn(t.shape,r),i=a[0],s=_e(a[1]),l=t.as2D(-1,s),c=Gp(t.dtype);return this.reduce(l,"prod",c).reshape(i)},e.prototype.unsortedSegmentSum=function(t,r,a){var i=0,s=ia([i],t.rank),l=t;s!=null&&(l=t.transpose(s),i=oa(1,t.rank)[0]);var c=function(g,x,w){for(var S=[],E=g.length,_=0;_<E;_++)_!==x?S.push(g[_]):S.push(w);return S}(l.shape,i,a),h=_e([l.shape[i]]),d=l.as2D(-1,h),v=Gp(t.dtype),m=this.segOpCompute(d,"unsortedSegmentSum",r,v,a).reshape(c);return s!=null&&(m=m.transpose(Fm(s))),m},e.prototype.segOpCompute=function(t,r,a,i,s){var l=t.shape[0],c=t.shape[1],h=function(m,g){var x,w=!1;for(m<=XS?(x=m,w=!0):x=jv(m,Math.floor(Math.sqrt(m)));!w;)x>g||x===m?w=!0:x=jv(m,x+1);return x}(c,s),d=new sB({windowSize:h,inSize:c,batchSize:l,numSegments:s}),v=this.compileAndRun(d,[t,a],i);return v.shape[1]===s?v:(a=Cf(0,s).tile([c/h]),this.segOpCompute(v,r,a,i,s))},e.prototype.argMinMaxReduce=function(t,r,a){var i=[r];if(Zn("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,t.rank),!le().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var s=vn(t.shape,i),l=s[0],c=_e(s[1]),h=t.as2D(-1,c);return this.argReduce(h,a).reshape(l)}return this.argReducePacked(t,a)},e.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},e.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},e.prototype.cumsum=function(t,r,a,i){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var s=new fF(t.shape,a,i);return this.compileAndRun(s,[t])},e.prototype.equal=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Ot("return float(a == b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.notEqual=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Ot("return float(a != b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Ot("return float(a < b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.lessEqual=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Ot("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Ot("return float(a > b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greaterEqual=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Ot("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalNot=function(t){var r=new Ue(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},e.prototype.logicalAnd=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Ot("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalOr=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Ot("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.select=function(t,r,a){var i=new lB(t.rank,r.shape,r.rank);return this.compileAndRun(i,[t,r,a],cn(r.dtype,a.dtype))},e.prototype.where=function(t){Ef("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return jm(t.shape,r)},e.prototype.topk=function(t,r,a){return iE(t.dataSync(),t.shape,t.dtype,r)},e.prototype.min=function(t,r){Zn("min",r,t.rank);var a=vn(t.shape,r),i=a[0],s=_e(a[1]),l=t.as2D(-1,s);return this.reduce(l,"min",l.dtype).reshape(i)},e.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ot(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.mod=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ot(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);Zn("max",r,t.rank);var a=vn(t.shape,r),i=a[0],s=_e(a[1]),l=t.as2D(-1,s);return this.reduce(l,"max",l.dtype).reshape(i)},e.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ot(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.all=function(t,r){Zn("all",r,t.rank);var a=vn(t.shape,r),i=a[0],s=_e(a[1]),l=t.as2D(-1,s);return this.reduce(l,"all",l.dtype).reshape(i)},e.prototype.any=function(t,r){Zn("any",r,t.rank);var a=vn(t.shape,r),i=a[0],s=_e(a[1]),l=t.as2D(-1,s);return this.reduce(l,"any",l.dtype).reshape(i)},e.prototype.realDivide=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Ot(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"float32")},e.prototype.floorDiv=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Ot(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"int32")},e.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,ev);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var a=cn(t.dtype,r.dtype);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,ev,a);var i=new Ot(ev,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.packedUnaryOp=function(t,r,a){var i=new Os(t.shape,r);return this.compileAndRun(i,[t],a)},e.prototype.packedBinaryOp=function(t,r,a,i,s){s===void 0&&(s=!1);var l=new Ta(a,t.shape,r.shape,s);return this.compileAndRun(l,[t,r],i)},e.prototype.complexSeparableBinaryOp=function(t,r,a){var i=this,s=this.texData.get(t.dataId),l=this.texData.get(r.dataId),c=[[s.complexTensors.real,l.complexTensors.real],[s.complexTensors.imag,l.complexTensors.imag]].map(function(m){var g=m[0],x=m[1],w=i.makeComplexComponentTensorInfo(t,g),S=i.makeComplexComponentTensorInfo(r,x),E=new Ot(a,t.shape,r.shape);return i.compileAndRun(E,[w,S],cn(g.dtype,x.dtype))}),h=c[0],d=c[1],v=this.complex(h,d);return h.dispose(),d.dispose(),v},e.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>le().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),a=this.addN(t.slice(0,r)),i=this.addN(t.slice(r));return this.addN([a,i])}var s=t.map(function(h){return h.dtype}).reduce(function(h,d){return cn(h,d)}),l=t.map(function(h){return h.shape}),c=le().getBool("WEBGL_PACK")?new zI(t[0].shape,l):new LI(t[0].shape,l);return this.compileAndRun(c,t,s)},e.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,tv);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var a=cn(t.dtype,r.dtype);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,tv,t.dtype);var i=new Ot(tv,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.pow=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ot(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),i=cn(t.dtype,r.dtype);return this.compileAndRun(a,[t,r],i)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Bw,t.dtype);var r=new Ue(t.shape,Bw);return this.compileAndRun(r,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Lw,t.dtype);var r=new Ue(t.shape,Lw);return this.compileAndRun(r,[t])},e.prototype.sign=function(t){var r=new Ue(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},e.prototype.isNaN=function(t){var r=new Ue(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isInf=function(t){var r=new Ue(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isFinite=function(t){var r=new Ue(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.round=function(t){var r=new Ue(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,zw,t.dtype);var r=new Ue(t.shape,zw);return this.compileAndRun(r,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Pw,t.dtype);var r=new Ue(t.shape,Pw);return this.compileAndRun(r,[t])},e.prototype.softmax=function(t,r){var a=$t([r],t.shape),i=this.max(t,a),s=Ln(i.shape,a),l=this.subtract(t,i.reshape(s)),c=this.exp(l),h=this.sum(c,a).reshape(s);return this.realDivide(c,h)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new Ue(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},e.prototype.log1p=function(t){var r=new Ue(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},e.prototype.sqrt=function(t){var r=new Ue(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new Ue(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},e.prototype.reciprocal=function(t){var r=new Ue(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},e.prototype.relu=function(t){var r;return r=le().getBool("WEBGL_PACK")?new Os(t.shape,pE):new Ue(t.shape,fE),this.compileAndRun(r,[t])},e.prototype.relu6=function(t){var r;return r=le().getBool("WEBGL_PACK")?new Os(t.shape,vE):new Ue(t.shape,hE),this.compileAndRun(r,[t])},e.prototype.prelu=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta(cE,t.shape,r.shape):new Ot(lE,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.elu=function(t){if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,mE,t.dtype);var r=new Ue(t.shape,dE);return this.compileAndRun(r,[t])},e.prototype.eluDer=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new Ot("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.selu=function(t){var r=new Ue(t.shape,yB);return this.compileAndRun(r,[t])},e.prototype.int=function(t){var r=new Ue(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},e.prototype.clip=function(t,r,a){var i,s=(i=le().getBool("WEBGL_PACK_CLIP")?new JI(t.shape):new QI(t.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[t],null,s)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Iw,t.dtype);var r=new Ue(t.shape,Iw);return this.compileAndRun(r,[t])},e.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),a=new eF(t.shape),i=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(a,i)},e.prototype.sigmoid=function(t){var r=new Ue(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},e.prototype.softplus=function(t){var r=new Ue(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},e.prototype.sin=function(t){var r=new Ue(t.shape,bB);return this.compileAndRun(r,[t])},e.prototype.cos=function(t){var r=new Ue(t.shape,xB);return this.compileAndRun(r,[t])},e.prototype.tan=function(t){var r=new Ue(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},e.prototype.asin=function(t){var r=new Ue(t.shape,wB);return this.compileAndRun(r,[t])},e.prototype.acos=function(t){var r=new Ue(t.shape,SB);return this.compileAndRun(r,[t])},e.prototype.atan=function(t){var r=new Ue(t.shape,EB);return this.compileAndRun(r,[t])},e.prototype.atan2=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Ot(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.sinh=function(t){var r=new Ue(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.cosh=function(t){var r=new Ue(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.tanh=function(t){var r=new Ue(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},e.prototype.asinh=function(t){var r=new Ue(t.shape,_B);return this.compileAndRun(r,[t])},e.prototype.acosh=function(t){var r=new Ue(t.shape,CB);return this.compileAndRun(r,[t])},e.prototype.atanh=function(t){var r=new Ue(t.shape,RB);return this.compileAndRun(r,[t])},e.prototype.erf=function(t){var r=new Ue(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},e.prototype.step=function(t,r){var a=new Ue(t.shape,function(i){return i===void 0&&(i=0),Mr+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(a,[t])},e.prototype.conv2dByMatMul=function(t,r,a,i,s,l){var c=t.shape,h=this.texData.get(t.dataId),d=a.inChannels,v=c[0]*c[1]*c[2],m=a.outChannels,g=a.dataFormat==="channelsLast",x=(v===1||m===1)&&d>1e3,w=c[2]%2!=0&&!!h.isPacked;if(x||!le().getBool("WEBGL_LAZILY_UNPACK")||!le().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!w){var S=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],E=this.reshape(t,[1,S,a.inChannels]),_=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:E,b:_,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:l}),a.outShape)}var R=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),A={dataId:t.dataId,shape:[1,R,a.inChannels],dtype:t.dtype},C=h.shape;h.shape=h.shape.slice(),h.shape[h.shape.length-2]++,L(qc(h.shape,A.shape),function(){return"packed reshape "+h.shape+" to "+A.shape+" isn't free"});var D=this.reshape(r,[1,a.inChannels,a.outChannels]),O=this.fusedBatchMatMul({a:A,b:D,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:l}),F=this.texData.get(O.dataId);return L(F.isPacked,function(){return"batchMatMul result is expected to be packed"}),h.shape=C,F.shape=a.outShape,G.makeTensorFromDataId(O.dataId,a.outShape,O.dtype)},e.prototype.conv2dWithIm2Row=function(t,r,a,i,s,l){var c=a.filterWidth,h=a.filterHeight,d=a.inChannels,v=a.outWidth,m=a.outHeight,g=a.dataFormat==="channelsLast",x=c*h*d,w=m*v,S=[x,w],E=t.squeeze([0]),_=r.reshape([1,x,-1]),R=new VF(S,E.shape,a),A=this.compileAndRun(R,[E]).reshape([1,S[0],S[1]]),C=i!=null,D=l!=null,O=s?Zc(s,!0):null,F=new nv(A.shape,[1,w,a.outChannels],!0,!1,C,O,D),N=[A,_];i&&N.push(i),D&&N.push(l);var I=this.compileAndRun(F,N);return g?I.reshape([1,m,v,a.outChannels]):I.reshape([1,a.outChannels,m,v])},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,s=t.bias,l=t.activation,c=t.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,s,l,c);if(le().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,s,l,c);var h=s!=null,d=c!=null,v=l?Zc(l,!1):null,m=new Cw(i,h,v,d),g=[r,a];return s&&g.push(s),c&&g.push(c),this.compileAndRun(m,g)},e.prototype.conv2d=function(t,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,a);if(le().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,a);var i=new Cw(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerInput=function(t,r,a){var i=new aF(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerFilter=function(t,r,a){var i=new rF(a);return this.compileAndRun(i,[t,r])},e.prototype.fusedDepthwiseConv2D=function(t){var r,a=t.input,i=t.filter,s=t.convInfo,l=t.bias,c=t.activation,h=t.preluActivationWeights,d=le().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,v=c?Zc(c,d):null,m=[a,i],g=l!=null,x=h!=null;return g&&m.push(l),x&&m.push(h),d?(r=new Aw(s,g,v,x),this.compileAndRun(r,m)):(r=new Rw(s,g,v,x),this.compileAndRun(r,m))},e.prototype.depthwiseConv2D=function(t,r,a){var i;return le().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new Aw(a),this.compileAndRun(i,[t,r])):(i=new Rw(a),this.compileAndRun(i,[t,r]))},e.prototype.depthwiseConv2DDerInput=function(t,r,a){var i=new sF(a);return this.compileAndRun(i,[t,r])},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){var i=new uF(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3d=function(t,r,a){var i=new lF(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerInput=function(t,r,a){var i=new oF(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerFilter=function(t,r,a){var i=new iF(a);return this.compileAndRun(i,[t,r])},e.prototype.maxPool=function(t,r){var a=new rv(r,"max",!1);return this.compileAndRun(a,[t])},e.prototype.avgPool=function(t,r){var a=new rv(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPoolBackprop=function(t,r,a,i){var s=new rv(i,"max",!0),l=this.compileAndRun(s,[r]),c=new qF(i),h=this.compileAndRun(c,[t,l],r.dtype);return l.dispose(),h},e.prototype.avgPoolBackprop=function(t,r,a){var i=new qI(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.cast=function(t,r){return eE(t,r,this)},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),s=0,l=0;l<t.rank;l++)l!==r&&(i[s++]=t.shape[l]);var c=new Array(t.rank).fill(0),h=t.shape.slice();h[r]=1;var d=new Array(a);for(l=0;l<d.length;l++)c[r]=l,d[l]=this.slice(t,c,h).reshape(i);return d},e.prototype.avgPool3d=function(t,r){var a=new av(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,r,a){var i=new KI(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.maxPool3d=function(t,r){var a=new av(r,"max",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,r,a,i){var s=new av(i,"max",!0),l=this.compileAndRun(s,[r]),c=new KF(i),h=this.compileAndRun(c,[t,l],r.dtype);return l.dispose(),h},e.prototype.reshape=function(t,r){var a=this.texData.get(t.dataId);if(a.isPacked&&!qc(t.shape,r)&&(a.texture===null||!qc(a.shape,r))){var i=this.packedReshape(t,r);return G.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return Yv(t,r)},e.prototype.resizeBilinear=function(t,r,a,i){var s=le().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rB(t.shape,r,a,i):new nB(t.shape,r,a,i);return this.compileAndRun(s,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,r,a){var i=new tB(t,r,a);return this.compileAndRun(i,[t])},e.prototype.resizeNearestNeighbor=function(t,r,a,i){var s=new iB(t.shape,r,a,i);return this.compileAndRun(s,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){var i=new aB(t,r,a);return this.compileAndRun(i,[t])},e.prototype.multinomial=function(t,r,a,i){var s=r?t:Fa(t),l=s.shape[0],c=s.shape[1],h=new XF(l,c,a),d=h.getCustomSetupFunc(i);return this.compileAndRun(h,[s],"int32",d)},e.prototype.oneHot=function(t,r,a,i){var s=new $F(t.size,r,a,i);return this.compileAndRun(s,[t])},e.prototype.diag=function(t){var r=new vF(t.size);return this.compileAndRun(r,[t])},e.prototype.nonMaxSuppression=function(t,r,a,i,s){return Ef("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Hm(t.dataSync(),r.dataSync(),a,i,s)},e.prototype.cropAndResize=function(t,r,a,i,s,l){var c=new cF(t.shape,r.shape,i,s,l);return this.compileAndRun(c,[t,r,a],"float32")},e.prototype.depthToSpace=function(t,r,a){L(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=t.shape[0],s=a==="NHWC"?t.shape[1]:t.shape[2],l=a==="NHWC"?t.shape[2]:t.shape[3],c=a==="NHWC"?t.shape[3]:t.shape[1],h=s*r,d=l*r,v=c/(r*r),m=new pF(a==="NHWC"?[i,h,d,v]:[i,v,h,d],r,a);return this.compileAndRun(m,[t])},e.prototype.split=function(t,r,a){return rE(t,r,a)},e.prototype.scatterND=function(t,r,a){var i=Df(0,t,a),s=i.sliceRank,l=i.numUpdates,c=i.sliceSize,h=i.strides,d=i.outputSize,v=[d/c,c],m=t.reshape([l,s]),g=r.reshape([l,c]);if(d===0)return Yv(hn([]),a);var x=ge(0),w=new kw(l,s,m.rank,g.rank,h,v);return this.compileAndRun(w,[g,m,x]).reshape(a)},e.prototype.sparseToDense=function(t,r,a,i){var s=Df(0,t,a),l=s.sliceRank,c=s.numUpdates,h=s.strides,d=s.outputSize,v=new kw(c,l,t.rank,r.rank,h,[d,1]);return this.compileAndRun(v,[r,t,i]).reshape(a)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,r){var a=this.texData.get(t.dataId),i=new Dw(xF,t.shape,r),s=new Dw(wF,t.shape,r),l=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag)],c=this.compileAndRun(i,l),h=this.compileAndRun(s,l),d=this.complex(c,h).as2D(t.shape[0],t.shape[1]);return c.dispose(),h.dispose(),d},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],s=KS(t,r),l=s[0],c=s[1],h=s[2],d=s[3],v=r.reshape([c,i]),m=t.reshape([t.size/h,h]),g=new _F(i,d,[c,h]);return this.compileAndRun(g,[m,v]).reshape(l)},e.prototype.fill=function(t,r,a){if((a=a||ol(r))==="string"){var i=bf(a,_e(t));return i.fill(r),G.makeTensor(i,t,a,this)}var s=new SF(t,r),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[],a,l)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,r,a){return tE(t,r,a)},e.prototype.makeTensorInfo=function(t,r){var a=this.write(null,t,r);return this.texData.get(a).usage=null,{dataId:a,shape:t,dtype:r}},e.prototype.makeOutput=function(t,r){var a=this.makeTensorInfo(t,r).dataId;return G.makeTensorFromDataId(a,t,r,this)},e.prototype.unpackTensor=function(t){var r=new TB(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},e.prototype.packTensor=function(t){var r=new ZF(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,r){var a=[wf(t.shape)].concat(Sf(t.shape)),i={dtype:t.dtype,shape:a,dataId:t.dataId},s=[wf(r)].concat(Sf(r)),l=new eB(s,a),c=this.runWebGLProgram(l,[i],t.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},e.prototype.decode=function(t){var r,a=this.texData.get(t),i=a.isPacked,s=a.shape,l=a.dtype,c=Qp(s);return r=i?new dF(c):new hF(c),{dtype:l,shape:s,dataId:this.runWebGLProgram(r,[{shape:c,dtype:l,dataId:t}],l,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,r,a,i,s){var l=this;s===void 0&&(s=!1);var c=this.makeTensorInfo(t.outputShape,a),h=this.texData.get(c.dataId);if(t.packedOutput&&(h.isPacked=!0),t.outPackingScheme===qs.DENSE){var d=Ms(t.outputShape);h.texShape=d.map(function(R){return 2*R})}if(t.outTexUsage!=null&&(h.usage=t.outTexUsage),_e(c.shape)===0)return h.values=Ws(c.dtype,0),c;var v=[],m=r.map(function(R){if(R.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var A=l.texData.get(R.dataId);if(A.texture==null){if(!t.packedInputs&&_e(R.shape)<=le().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:R.shape,texData:null,isUniform:!0,uniformValues:A.values};t.packedInputs&&(A.isPacked=!0,A.shape=R.shape)}else if(!!A.isPacked!=!!t.packedInputs)R=A.isPacked?l.unpackTensor(R):l.packTensor(R),v.push(R),A=l.texData.get(R.dataId);else if(A.isPacked&&!qc(A.shape,R.shape)){var C=R,D=R.shape;R.shape=A.shape,R=l.packedReshape(R,D),v.push(R),A=l.texData.get(R.dataId),C.shape=D}return l.uploadToGPU(R.dataId),{shape:R.shape,texData:A,isUniform:!1}});this.uploadToGPU(c.dataId);var g,x={shape:c.shape,texData:h,isUniform:!1},w=function(R,A,C){var D="";A.concat(C).forEach(function(N){var I=N.texData!=null&&N.texData.slice!=null&&N.texData.slice.flatOffset>0,U=N.isUniform?"uniform":N.texData.texShape;D+=N.shape+"_"+U+"_"+I});var O=R.userCode,F=R.constructor.name;return F+="_"+D+"_"+O}(t,m,x),S=this.getAndSaveBinary(w,function(){return function(R,A,C,D){var O=A.userCode,F=C.map(function(q,re){var ue={logicalShape:q.shape,texShape:q.isUniform?null:q.texData.texShape,isUniform:q.isUniform,isPacked:!q.isUniform&&q.texData.isPacked,flatOffset:null};return q.texData!=null&&q.texData.slice!=null&&q.texData.slice.flatOffset>0&&(ue.flatOffset=q.texData.slice.flatOffset),{name:A.variableNames[re],shapeInfo:ue}}),N=F.map(function(q){return q.shapeInfo}),I={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},U=UI(F,I,O,A.packedInputs),H=R.createProgram(U),J=null,ee=R.getUniformLocation(H,"NAN",!1);le().getNumber("WEBGL_VERSION")===1&&(J=R.getUniformLocation(H,"INFINITY",!1));for(var ne={},z=0;z<A.variableNames.length;z++){var W=A.variableNames[z];ne[W]=R.getUniformLocation(H,W,!1),ne["offset"+W]=R.getUniformLocation(H,"offset"+W,!1)}return{program:A,source:U,webGLProgram:H,uniformLocations:ne,inShapeInfos:N,outShapeInfo:I,infLoc:J,nanLoc:ee}}(l.gpgpu,t,m,x)}),E=this.activeTimers!=null;if(E&&(g=this.startTimer()),function(R,A,C,D,O){Ow(A.inShapeInfos,C),Ow([A.outShapeInfo],[D]);var F=D.texData.texture,N=D.texData.texShape;D.texData.isPacked?R.setOutputPackedMatrixTexture(F,N[0],N[1]):R.setOutputMatrixTexture(F,N[0],N[1]),R.setProgram(A.webGLProgram),le().getNumber("WEBGL_VERSION")===1&&A.infLoc!==null&&R.gl.uniform1f(A.infLoc,1/0),A.nanLoc!==null&&R.gl.uniform1f(A.nanLoc,NaN),C.forEach(function(I,U){var H=A.program.variableNames[U],J=A.uniformLocations[H],ee=A.uniformLocations["offset"+H];if(J!=null)if(I.isUniform)if(_e(I.shape)<2)R.gl.uniform1f(J,I.uniformValues[0]);else{var ne=I.uniformValues;ne instanceof Float32Array||(ne=new Float32Array(ne)),R.gl.uniform1fv(J,ne)}else I.texData.slice!=null&&ee!=null&&R.gl.uniform1i(ee,I.texData.slice.flatOffset),R.setInputMatrixTexture(I.texData.texture,J,U)}),O?.(R,A.webGLProgram),R.executeProgram()}(this.gpgpu,S,m,x,i),v.forEach(function(R){return l.disposeData(R.dataId)}),E&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)})),!le().getBool("WEBGL_LAZILY_UNPACK")&&h.isPacked&&s===!1){var _=this.unpackTensor(c);return this.disposeData(c.dataId),_}return c},e.prototype.compileAndRun=function(t,r,a,i,s){s===void 0&&(s=!1),a=a||r[0].dtype;var l=this.runWebGLProgram(t,r,a,i,s);return G.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},e.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(le().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=be(function(){if(!le().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=le().getBool("DEBUG");le().set("DEBUG",!1);var a=t.abs(ge(1e-8)).dataSync()[0];if(le().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var r,a=this.texData.get(t),i=a.shape,s=a.dtype,l=a.values,c=a.texture,h=a.usage,d=a.isPacked;if(c==null){var v,m=this.activeTimers!=null;m&&(v=Gr());var g=a.texShape;if(g==null&&(g=BM(i,d),a.texShape=g),l!=null){var x=Qp(i),w=void 0,S=g[1],E=g[0],_=l instanceof Uint8Array;d?(S=(r=sl(g[0],g[1]))[0],E=r[1],w=new bF(x,[E,S],_)):w=new yF(x,[E,S],_);var R=this.makeTensorInfo([E,S],s);this.texData.get(R.dataId).usage=_?Qn.PIXELS:Qn.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(R.dataId),S,E,l);var A=this.runWebGLProgram(w,[R],s,null,!0),C=this.texData.get(A.dataId);a.texture=C.texture,a.texShape=C.texShape,a.isPacked=C.isPacked,a.usage=C.usage,this.disposeData(R.dataId),this.texData.delete(A.dataId),a.values=null,m&&(this.uploadWaitMs+=Gr()-v)}else{var D=this.acquireTexture(g,h,s,d);a.texture=D}}},e.prototype.convertAndCacheOnCPU=function(t,r){var a=this.texData.get(t),i=a.dtype;return this.releaseGPUData(t),r!=null&&(a.values=function(s,l){if(l==="float32"||l==="complex64")return s;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(s.length):new Uint8Array(s.length),h=0;h<c.length;++h)c[h]=Math.round(s[h]);return c}throw new Error("Unknown dtype "+l)}(r,i)),a.values},e.prototype.acquireTexture=function(t,r,a,i){if(this.numBytesInGPU+=this.computeBytes(t,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,i)},e.prototype.computeBytes=function(t,r){return t[0]*t[1]*DS(r)},e}(QS);BS()&&G.registerBackend("webgl",function(){return new OB},2);var kB=V({square_:function(n){var e=M(n,"x","square"),t=[e];return G.runKernelFunc(function(r,a){return a([e]),r.square(e)},{x:e},null,"Square",{},t,[])}}),Xs="SquaredDifference",gE=V({squaredDifference_:function(n,e){var t,r=M(n,"a","squaredDifference"),a=M(e,"b","squaredDifference");t=Rt(r,a),r=t[0],a=t[1],qe(r.shape,a.shape);var i={a:r,b:a},s=[r,a];return G.runKernelFunc(function(l,c){var h=l.squaredDifference(r,a);return c([r,a]),h},i,function(l,c){var h=c[0],d=c[1],v=ge(2);return{a:function(){return l.mul(h.sub(d).mul(v))},b:function(){return l.mul(d.sub(h).mul(v))}}},Xs,{},s,[])}}),NB=V({abs_:function(n){var e=M(n,"x","abs");return e.dtype==="complex64"?G.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):G.runKernelFunc(function(t,r){var a=t.abs(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.toFloat().step(-1))}}},"Abs")}}),MB=V({acos_:function(n){var e=M(n,"x","acos");return G.runKernelFunc(function(t,r){var a=t.acos(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(ge(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),IB=V({acosh_:function(n){var e=M(n,"x","acosh");return G.runKernelFunc(function(t,r){var a=t.acosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),FB=V({asin_:function(n){var e=M(n,"x","asin");return G.runKernelFunc(function(t,r){var a=t.asin(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(ge(1).sub(a.toFloat().square()).sqrt())}}})}}),BB=V({asinh_:function(n){var e=M(n,"x","asinh");return G.runKernelFunc(function(t,r){var a=t.asinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(ge(1).add(a.toFloat().square()).sqrt())}}})}}),LB=V({atan_:function(n){var e=M(n,"x","atan");return G.runKernelFunc(function(t,r){var a=t.atan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().square().add(1))}}})}}),zB=V({atanh_:function(n){var e=M(n,"x","atanh");return G.runKernelFunc(function(t,r){var a=t.atanh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(ge(1).sub(a.toFloat().square()))}}})}}),PB=V({ceil_:function(n){var e=M(n,"x","ceil");return G.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return Qe(t)}}})}}),Km=V({clipByValue_:function(n,e,t){var r=M(n,"x","clipByValue");L(e<=t,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."});var a=[r],i={min:e,max:t};return G.runKernelFunc(function(s,l){var c=s.clip(r,e,t);return l([r]),c},{x:r},function(s,l){var c=l[0];return{x:function(){return s.where(c.greaterEqual(e).logicalAnd(c.lessEqual(t)),Qe(s))}}},"ClipByValue",i,a)}}),UB=V({cos_:function(n){var e=M(n,"x","cos"),t=[e];return G.runKernelFunc(function(r,a){var i=r.cos(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),HB=V({cosh_:function(n){var e=M(n,"x","cosh");return G.runKernelFunc(function(t,r){var a=t.cosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(t)}}})}}),VB=V({erf_:function(n){var e=M(n,"x","erf");return L(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),G.runKernelFunc(function(t,r){var a=t.erf(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Jv=V({exp_:function(n){var e=M(n,"x","exp");return G.runKernelFunc(function(t,r){var a=t.exp(e);return r([a]),a},{x:e},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),jB=V({expm1_:function(n){var e=M(n,"x","expm1");return G.runKernelFunc(function(t,r){var a=t.expm1(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.exp())}}})}}),WB=V({floor_:function(n){var e=M(n,"x","floor");return G.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return Qe(t)}}})}}),GB=V({log_:function(n){var e=M(n,"x","log"),t=[e];return G.runKernelFunc(function(r,a){var i=r.log(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},t)}}),qB=V({log1p_:function(n){var e=M(n,"x","log1p");return G.runKernelFunc(function(t,r){var a=t.log1p(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.add(1))}}})}}),KB=V({logSigmoid_:function(n){var e=M(n,"x","logSigmoid");return G.runKernelFunc(function(t,r){var a=t.softplus(e.neg()).neg();return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.neg().sigmoid())}}})}}),Mf=V({neg_:function(n){var e=M(n,"x","neg"),t=[e];return G.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),XB=V({reciprocal_:function(n){var e=M(n,"x","reciprocal");return G.runKernelFunc(function(t,r){var a=t.reciprocal(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.square().neg())}}})}}),$B=V({round_:function(n){var e=M(n,"x","round");return G.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return Qe(t)}}})}}),yE=V({rsqrt_:function(n){var e=M(n,"x","rsqrt"),t=[e];return G.runKernelFunc(function(r,a){var i=r.rsqrt(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),bE=V({sigmoid_:function(n){var e=M(n,"x","sigmoid");return G.runKernelFunc(function(t,r){var a=t.sigmoid(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.mul(ge(1).sub(a)))}}},"Sigmoid")}}),ZB=V({sign_:function(n){var e=M(n,"x","sign");return G.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return Qe(t)}}})}}),YB=V({isNaN_:function(n){var e=M(n,"x","isNaN");return G.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return Qe(t)}}})}}),QB=V({isInf_:function(n){var e=M(n,"x","isInf");return G.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return Qe(t)}}})}}),JB=V({isFinite_:function(n){var e=M(n,"x","isFinite");return G.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return Qe(t)}}})}}),eL=V({sin_:function(n){var e=M(n,"x","sin"),t=[e];return G.runKernelFunc(function(r,a){var i=r.sin(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},t)}}),tL=V({sinh_:function(n){var e=M(n,"x","sinh");return G.runKernelFunc(function(t,r){var a=t.sinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(t)}}})}}),nL=V({softplus_:function(n){var e=M(n,"x","softplus");return G.runKernelFunc(function(t,r){var a=t.softplus(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.sigmoid())}}})}}),rL=V({sqrt_:function(n){var e=M(n,"x","sqrt");return G.runKernelFunc(function(t,r){var a=t.sqrt(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().sqrt().mul(2))}}})}}),aL=V({step_:function(n,e){e===void 0&&(e=0);var t=M(n,"x","step");return G.runKernelFunc(function(r){return r.step(t,e)},{$x:t},function(r){return{$x:function(){return Qe(r)}}})}}),iL=V({tan_:function(n){var e=M(n,"x","tan");return G.runKernelFunc(function(t,r){var a=t.tan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.cos().square())}}})}}),oL=V({tanh_:function(n){var e=M(n,"x","tanh");return G.runKernelFunc(function(t,r){var a=t.tanh(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return ge(1).sub(a.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function xE(n,e,t,r,a,i){var s,l,c=M(n,"x","batchNorm"),h=M(e,"mean","batchNorm"),d=M(t,"variance","batchNorm");return a!=null&&(s=M(a,"scale","batchNorm")),r!=null&&(l=M(r,"offset","batchNorm")),L(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),L(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+h.rank+"."}),L(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),s!=null&&L(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),l!=null&&L(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."}),cl(c,h,d,l,s,i)}function wE(n,e,t,r,a,i){var s,l,c=M(n,"x","batchNorm"),h=M(e,"mean","batchNorm"),d=M(t,"variance","batchNorm");return a!=null&&(s=M(a,"scale","batchNorm")),r!=null&&(l=M(r,"offset","batchNorm")),L(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),L(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+h.rank+"."}),L(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),s!=null&&L(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),l!=null&&L(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."}),cl(c,h,d,l,s,i)}function SE(n,e,t,r,a,i){var s,l,c=M(n,"x","batchNorm"),h=M(e,"mean","batchNorm"),d=M(t,"variance","batchNorm");return a!=null&&(s=M(a,"scale","batchNorm")),r!=null&&(l=M(r,"offset","batchNorm")),L(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),L(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+h.rank+"."}),L(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),s!=null&&L(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),l!=null&&L(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."}),cl(c,h,d,l,s,i)}function cl(n,e,t,r,a,i){i==null&&(i=.001);var s,l,c,h=M(n,"x","batchNorm"),d=M(e,"mean","batchNorm"),v=M(t,"variance","batchNorm");a!=null&&(s=M(a,"scale","batchNorm")),r!=null&&(l=M(r,"offset","batchNorm")),L(d.rank===v.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),L(l==null||d.rank===l.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),L(s==null||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=h.rank===0||h.rank===1?h.as4D(1,1,1,h.size):h.rank===2?h.as4D(1,1,h.shape[0],h.shape[1]):h.rank===3?h.as4D(1,h.shape[0],h.shape[1],h.shape[2]):h;var m=[h,d,v,s];return G.runKernelFunc(function(g,x){var w=g.batchNormalization(c,Yc(d),Yc(v),i,Yc(s),Yc(l));return x([h,d,v,s]),w},{x:h,mean:d,variance:v,scale:s,offset:l},function(g,x){var w=x,S=w[0],E=w[1],_=w[2],R=w[3],A=R??ge(1),C=Kt(E.shape,c.shape),D=[];if(E.rank===1){for(var O=0;O<c.shape.length-1;++O)D.push(c.shape[O]);D.push(1)}var F=S.sub(E),N=g.mul(A),I=yE(_.add(ge(i))),U=I.mul(I).mul(I).mul(ge(-.5));return{x:function(){return E.rank===1?g.mul(cu(I.as4D(1,1,1,E.shape[0]),D)).mul(A).reshape(S.shape):g.mul(I).mul(A).reshape(S.shape)},mean:function(){var H=I.mul(ge(-1)).mul(N);return E.rank===1&&(H=H.sum(C)),H.reshape(E.shape)},variance:function(){var H=U.mul(F).mul(N);return E.rank===1&&(H=H.sum(C)),H.reshape(E.shape)},scale:function(){var H=F.mul(I),J=g.mul(H);return E.rank===1&&(J=J.sum(C)),J.reshape(E.shape)},offset:function(){var H=g;return E.rank===1&&(H=H.sum(C)),H.reshape(E.shape)}}},"BatchNormalization",{varianceEpsilon:i},m).reshape(h.shape)}function Yc(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function Jf(){LS("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var uL=V({batchNormalization2d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Jf(),xE(n,e,t,i,a,r)}}),sL=V({batchNormalization3d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Jf(),wE(n,e,t,i,a,r)}}),lL=V({batchNormalization4d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Jf(),SE(n,e,t,i,a,r)}}),cL=V({batchNormalization_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Jf(),cl(n,e,t,i,a,r)}}),EE=V({batchNorm_:cl}),fL=V({batchNorm2d_:xE}),hL=V({batchNorm3d_:wE}),dL=V({batchNorm4d_:SE}),eh=V({logicalAnd_:function(n,e){var t=M(n,"a","logicalAnd","bool"),r=M(e,"b","logicalAnd","bool");return qe(t.shape,r.shape),G.runKernelFunc(function(a){return a.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),pL=V({logicalNot_:function(n){var e=M(n,"x","logicalNot","bool");return G.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),_E=V({logicalOr_:function(n,e){var t=M(n,"a","logicalOr","bool"),r=M(e,"b","logicalOr","bool");return qe(t.shape,r.shape),G.runKernelFunc(function(a){return a.logicalOr(t,r)},{$a:t,$b:r})}}),vL=V({logicalXor_:function(n,e){var t=M(n,"a","logicalXor","bool"),r=M(e,"b","logicalXor","bool");return qe(t.shape,r.shape),_E(n,e).logicalAnd(eh(n,e).logicalNot())}}),ro=V({where_:function(n,e,t){var r=M(e,"a","where"),a=M(t,"b","where"),i=M(n,"condition","where","bool");return st(r.shape,a.shape,"Error in where: "),i.rank===1?L(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):st(i.shape,a.shape,"Error in where: "),G.runKernelFunc(function(s,l){var c=s.select(i,r,a);return l([i]),c},{$condition:i,$a:r,$b:a},function(s,l){var c=l[0];return{$condition:function(){return Qe(c).toFloat()},$a:function(){return s.mul(c.cast(s.dtype))},$b:function(){return s.mul(c.logicalNot().cast(s.dtype))}}})}}),CE=function(n){return we(this,void 0,void 0,function(){var e,t,r;return Se(this,function(a){switch(a.label){case 0:return[4,(e=M(n,"condition","whereAsync","bool")).data()];case 1:return t=a.sent(),r=jm(e.shape,t),n!==e&&e.dispose(),[2,r]}})})},je=V({add_:function(n,e){var t,r=M(n,"a","add"),a=M(e,"b","add");t=Rt(r,a),r=t[0],a=t[1];var i=qe(r.shape,a.shape);return G.runKernelFunc(function(s){return s.add(r,a)},{a:r,b:a},function(s){return{a:function(){var l=s,c=Kt(r.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=s,c=Kt(a.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)}}},"Add")}}),mL=V({addN_:function(n){L(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),L(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var e=n.map(function(a,i){return M(a,"tensors"+i,"addN")}),t=e[0];e.forEach(function(a){if(a.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(a){if(!Jt(a.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return G.runKernelFunc(function(a){return a.addN(e)},r,function(a){var i={};return e.forEach(function(s,l){i[l]=function(){return a.clone()}}),i},"AddN")}}),gL=V({addStrict_:function(n,e){var t=M(n,"a","addStrict"),r=M(e,"b","addStrict");return st(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),yL=V({atan2_:function(n,e){var t,r=M(n,"a","atan2"),a=M(e,"b","atan2");t=Rt(r,a),r=t[0],a=t[1];var i=qe(r.shape,a.shape);return G.runKernelFunc(function(s,l){var c=s.atan2(r,a);return l([r,a]),c},{$a:r,$b:a},function(s,l){var c=l[0],h=l[1];return{$a:function(){var d=je(c.square(),h.square()),v=s.mul(h.div(d)),m=Kt(c.shape,i);return m.length>0&&(v=v.sum(m)),v.reshape(c.shape)},$b:function(){var d=je(c.square(),h.square()),v=Mf(s.mul(c.div(d))),m=Kt(h.shape,i);return m.length>0&&(v=v.sum(m)),v.reshape(h.shape)}}})}}),Tr=V({div_:function(n,e){var t,r=M(n,"a","div"),a=M(e,"b","div");if(t=Rt(r,a),r=t[0],a=t[1],r.dtype==="int32"&&a.dtype==="int32")return RE(r,a);var i=qe(r.shape,a.shape);return G.runKernelFunc(function(s,l){var c=s.realDivide(r,a);return l([r,a]),c},{a:r,b:a},function(s,l){var c=l[0],h=l[1];return{a:function(){var d=s.div(h.toFloat()),v=Kt(c.shape,i);return v.length>0?d.sum(v).reshape(c.shape):d},b:function(){var d=s.mul(c.toFloat()),v=Kt(h.shape,i);v.length>0&&(d=d.sum(v).reshape(h.shape));var m=h.square();return d.div(m.toFloat()).neg()}}},"Div")}}),bL=V({divNoNan_:function(n,e){var t,r=M(n,"a","div"),a=M(e,"b","div");r=(t=Rt(r,a))[0],a=t[1];var i=Tr(r,a),s=Qe(i),l=a.equal(s);return ro(l,s,i)}}),xL=V({divStrict_:function(n,e){var t=M(n,"a","div"),r=M(e,"b","div");return st(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),RE=V({floorDiv_:function(n,e){var t,r=M(n,"a","floorDiv"),a=M(e,"b","floorDiv");t=Rt(r,a),r=t[0],a=t[1];var i=qe(r.shape,a.shape);return G.runKernelFunc(function(s,l){var c=s.floorDiv(r,a);return l([r,a]),c},{a:r,b:a},function(s,l){var c=l[0],h=l[1];return{a:function(){var d=s.div(h.toFloat()),v=Kt(c.shape,i);return v.length>0?d.sum(v).reshape(c.shape):d},b:function(){var d=s.mul(c.toFloat()),v=Kt(h.shape,i);v.length>0&&(d=d.sum(v).reshape(h.shape));var m=h.square();return d.div(m.toFloat()).neg()}}},"FloorDiv")}}),Xm=V({maximum_:function(n,e){var t,r=M(n,"a","maximum"),a=M(e,"b","maximum");return t=Rt(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),qe(r.shape,a.shape),G.runKernelFunc(function(i,s){var l=i.maximum(r,a);return s([r,a]),l},{a:r,b:a},function(i,s){var l=s[0],c=s[1];return{a:function(){return i.mul(l.greaterEqual(c).toFloat())},b:function(){return i.mul(l.less(c).toFloat())}}},"Maximum")}}),wL=V({maximumStrict_:function(n,e){var t=M(n,"a","maximumStrict"),r=M(e,"b","maximumStrict");return st(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),AE=V({minimum_:function(n,e){var t,r=M(n,"a","minimum"),a=M(e,"b","minimum");return t=Rt(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),qe(r.shape,a.shape),G.runKernelFunc(function(i,s){var l=i.minimum(r,a);return s([r,a]),l},{a:r,b:a},function(i,s){var l=s[0],c=s[1];return{a:function(){return i.mul(l.lessEqual(c).toFloat())},b:function(){return i.mul(l.greater(c).toFloat())}}},"Minimum")}}),SL=V({minimumStrict_:function(n,e){var t=M(n,"a","minimumStrict"),r=M(e,"b","minimumStrict");return st(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),EL=V({mod_:function(n,e){var t,r=M(n,"a","mod"),a=M(e,"b","mod");t=Rt(r,a),r=t[0],a=t[1];var i=qe(r.shape,a.shape);return G.runKernelFunc(function(s,l){var c=s.mod(r,a);return l([r,a]),c},{$a:r,$b:a},function(s,l){var c=l[0],h=l[1];return{$a:function(){var d=Kt(c.shape,i);return d.length>0?s.sum(d).reshape(c.shape):s},$b:function(){var d=s.mul(c.div(h).floor().neg()),v=Kt(h.shape,i);return v.length>0?d.sum(v).reshape(h.shape):d}}})}}),_L=V({modStrict_:function(n,e){var t=M(n,"a","modStrict"),r=M(e,"b","modStrict");return st(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),bn=V({mul_:function(n,e){var t,r=M(n,"a","mul"),a=M(e,"b","mul");t=Rt(r,a),r=t[0],a=t[1];var i=qe(r.shape,a.shape);return G.runKernelFunc(function(s,l){var c=s.multiply(r,a);return l([r,a]),c},{a:r,b:a},function(s,l){var c=l[0],h=l[1];return{a:function(){var d=s.mul(h.toFloat()),v=Kt(c.shape,i);return v.length>0?d.sum(v).reshape(c.shape):d},b:function(){var d=s.mul(c.toFloat()),v=Kt(h.shape,i);return v.length>0?d.sum(v).reshape(h.shape):d}}},"Mul")}}),CL=V({mulStrict_:function(n,e){var t=M(n,"a","mul"),r=M(e,"b","mul");return st(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),If=V({pow_:function(n,e){var t,r=M(n,"base","pow"),a=M(e,"exp","pow");t=Rt(r,a),r=t[0],a=t[1];var i=qe(r.shape,a.shape),s=[r,a];return G.runKernelFunc(function(l,c){var h=l.pow(r,a);return c([r,a,h]),h},{a:r,b:a},function(l,c){var h=c[0],d=c[1],v=c[2];return{a:function(){var m=d.toFloat(),g=l.mul(m.mul(h.pow(m.sub(ge(1))))),x=Kt(h.shape,i);return x.length>0&&(g=g.sum(x)),g.reshape(h.shape)},b:function(){var m=h.greater(0),g=h.log().where(m,Qe(h)),x=l.mul(v.mul(g)),w=Kt(d.shape,i);return w.length>0&&(x=x.sum(w)),x.reshape(d.shape)}}},"Pow",{},s,[!0])}}),RL=V({powStrict_:function(n,e){return st(n.shape,e.shape,"Error in powStrict: "),n.pow(e)}}),AL=V({squaredDifferenceStrict_:function(n,e){var t=M(n,"a","squaredDifferenceStrict"),r=M(e,"b","squaredDifferenceStrict");return st(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),Xt=V({sub_:function(n,e){var t,r=M(n,"a","sub"),a=M(e,"b","sub");t=Rt(r,a),r=t[0],a=t[1];var i=qe(r.shape,a.shape);return G.runKernelFunc(function(s){return s.subtract(r,a)},{a:r,b:a},function(s){return{a:function(){var l=s,c=Kt(r.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=s,c=Kt(a.shape,i);return c.length>0&&(l=l.sum(c)),l.neg().reshape(a.shape)}}},"Sub")}}),TL=V({subStrict_:function(n,e){var t=M(n,"a","subStrict"),r=M(e,"b","subStrict");return st(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),TE=V({equal_:function(n,e){var t,r=M(n,"a","equal"),a=M(e,"b","equal");return t=Rt(r,a),r=t[0],a=t[1],qe(r.shape,a.shape),G.runKernelFunc(function(i){return i.equal(r,a)},{$a:r,$b:a})}}),DL=V({equalStrict_:function(n,e){var t=M(n,"a","equalStrict"),r=M(e,"b","equalStrict");return st(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),OL=V({greater_:function(n,e){var t,r=M(n,"a","greater"),a=M(e,"b","greater");return t=Rt(r,a),r=t[0],a=t[1],qe(r.shape,a.shape),G.runKernelFunc(function(i){return i.greater(r,a)},{a:r,b:a},null,"Greater")}}),DE=V({greaterEqual_:function(n,e){var t,r=M(n,"a","greaterEqual"),a=M(e,"b","greaterEqual");return t=Rt(r,a),r=t[0],a=t[1],qe(r.shape,a.shape),G.runKernelFunc(function(i,s){var l=i.greaterEqual(r,a);return s([r,a]),l},{a:r,b:a},function(i,s){var l=s[0],c=s[1];return{a:function(){return Qe(l)},b:function(){return Qe(c)}}},"GreaterEqual")}}),kL=V({greaterEqualStrict_:function(n,e){var t=M(n,"a","greaterEqualStrict"),r=M(e,"b","greaterEqualStrict");return st(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),NL=V({greaterStrict_:function(n,e){var t=M(n,"a","greaterStrict"),r=M(e,"b","greaterStrict");return st(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),ML=V({less_:function(n,e){var t,r=M(n,"a","less"),a=M(e,"b","less");return t=Rt(r,a),r=t[0],a=t[1],qe(r.shape,a.shape),G.runKernelFunc(function(i){return i.less(r,a)},{a:r,b:a},null,"Less")}}),IL=V({lessEqual_:function(n,e){var t,r=M(n,"a","lessEqual"),a=M(e,"b","lessEqual");return t=Rt(r,a),r=t[0],a=t[1],qe(r.shape,a.shape),G.runKernelFunc(function(i,s){var l=i.lessEqual(r,a);return s([r,a]),l},{a:r,b:a},null,"LessEqual")}}),FL=V({lessEqualStrict_:function(n,e){var t=M(n,"a","lessEqualStrict"),r=M(e,"b","lessEqualStrict");return st(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),BL=V({lessStrict_:function(n,e){var t=M(n,"a","lessStrict"),r=M(e,"b","lessStrict");return st(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),LL=V({notEqual_:function(n,e){var t,r=M(n,"a","notEqual"),a=M(e,"b","notEqual");return t=Rt(r,a),r=t[0],a=t[1],qe(r.shape,a.shape),G.runKernelFunc(function(i){return i.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),zL=V({notEqualStrict_:function(n,e){var t=M(n,"a","notEqualStrict"),r=M(e,"b","notEqualStrict");return st(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function Uw(n,e){for(var t=[],r=n;r<e;++r)t.push(r);return t}function Hw(n){for(var e=[],t=0;t<n.length;++t)for(var r=0;r<n[t].length;++r)e.push(n[t][r]);return e}var $m=V({gather_:function(n,e,t){t===void 0&&(t=0);var r=M(n,"x","gather"),a=M(e,"indices","gather","int32");t=$t(t,r.shape)[0];var i=function(s,l,c){for(var h=s.shape[c],d=[],v=1,m=1,g=0;g<c;g++)d.push(s.shape[g]),v*=s.shape[g];for(g=0;g<l.rank;g++)d.push(l.shape[g]);for(g=c+1;g<s.rank;g++)d.push(s.shape[g]),m*=s.shape[g];return{batchSize:v,sliceSize:m,dimSize:h,outputShape:d}}(r,a,t);return G.runKernelFunc(function(s,l){var c=s.gather(r,a.flatten(),t);return l([a]),c},{x:r,indices:a},function(s,l){var c=l[0];return{x:function(){var h=r.shape,d=c.size,v=h.slice(0,t),m=v.length,g=h.slice(t,h.length).slice(1),x=g.length,w=Uw(0,m),S=Uw(m+1,m+1+x),E=Hw([v,[d],g]),_=s.reshape(E),R=c.reshape([d]),A=Hw([[m],w,S]),C=_.transpose(A),D=OE(C,R,r.shape[t]),O=Fm(A);return D=D.transpose(O)},indices:function(){return c}}},"Gather",{axis:t}).reshape(i.outputShape)}}),OE=V({unsortedSegmentSum_:function(n,e,t){var r=M(n,"x","unsortedSegmentSum"),a=M(e,"segmentIds","unsortedSegmentSum","int32");return L(Mt(t),function(){return"numSegments must be of dtype int"}),G.runKernelFunc(function(i,s){var l=i.unsortedSegmentSum(r,a,t);return s([a]),l},{$x:r},function(i,s){var l=s[0];return{$x:function(){return function(c,h){for(var d=Xm(h,Qe(h)),v=$m(c,d),m=DE(h,ge(0,"int32")),g=v.rank-m.rank,x=0;x<g;++x)m=gr(m,x+1);m=eh(m,Du(v.shape,"bool"));var w=Qe(v);return ro(m,v,w)}(i,l)}}})}}),PL=function(n,e,t){return we(this,void 0,void 0,function(){var r,a,i,s,l,c,h,d,v,m,g,x,w;return Se(this,function(S){switch(S.label){case 0:for(r=M(n,"tensor","boolMask"),a=M(e,"mask","boolMask","bool"),i=t??0,s=a.rank,l=r.shape,L(s>0,function(){return"mask cannot be scalar"}),st(l.slice(i,i+s),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,h=i;h<i+s;h++)c*=l[h];return d=l.slice(0,i).concat([c],l.slice(i+s)),v=r.reshape(d),m=a.reshape([-1]),[4,CE(m)];case 1:return g=S.sent(),x=g.squeeze([1]),w=$m(v,x,i),n!==r&&r.dispose(),e!==a&&a.dispose(),x.dispose(),v.dispose(),m.dispose(),g.dispose(),[2,w]}})})};function kE(n,e,t,r,a,i,s){i===void 0&&(i="NHWC"),L(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var l=n,c=e,h=!1;e.rank===3&&(h=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),l=[1,n[0],n[1],n[2]]),L(l.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."}),L(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),L(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var d=i==="NHWC"?l[3]:l[1],v=i==="NHWC"?c.shape[3]:c.shape[1];L(d===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+t.shape[2]+"."}),L(v===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+v+") must match output depth for filter "+t.shape[3]+"."}),s!=null&&L(Mt(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var m=Um(i),g=oo(l,t.shape,r,1,a,s,!1,m),x=G.runKernelFunc(function(w,S){var E=w.conv2dDerInput(c,t,g);return S([t,c]),E},{dy4D:c,filter:t},function(w,S){var E=S[0],_=S[1];return{dy4D:function(){return Sr(w,E,r,a,i,1,s)},filter:function(){return Zm(w,_,E.shape,r,a,i,s)}}});return h?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}function ov(n){var e=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function NE(n,e,t,r,a){L(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var i=n,s=e,l=!1;e.rank===4&&(l=!0,s=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,n[0],n[1],n[2],n[3]]);var c=i[4],h=s.shape[4];L(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),L(s.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),L(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),L(c===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+t.shape[3]+"."}),L(h===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+h+") must match output depth for filter "+t.shape[4]+"."});var d=kf(i,t.shape,r,1,a),v=G.runKernelFunc(function(m){return m.conv3dDerInput(s,t,d)},{dy5D:s});return l?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}var UL=V({conv1d_:function(n,e,t,r,a,i,s){a===void 0&&(a="NWC"),i===void 0&&(i=1);var l=M(n,"x","conv1d"),c=M(e,"filter","conv1d"),h=l,d=!1;l.rank===2&&(d=!0,h=l.as3D(1,l.shape[0],l.shape[1])),L(h.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+h.rank+"."}),L(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),s!=null&&L(Mt(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),L(h.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+h.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),L(zn(t,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+i+"'"}),L(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var v=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=h.as4D(h.shape[0],1,h.shape[1],h.shape[2]),g=Sr(m,v,[1,t],r,"NHWC",[1,i],s);return d?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),Sr=V({conv2d_:function(n,e,t,r,a,i,s){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var l=M(n,"x","conv2d"),c=M(e,"filter","conv2d"),h=l,d=!1;l.rank===3&&(d=!0,h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),L(h.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+h.rank+"."}),L(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),s!=null&&L(Mt(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var v=a==="NHWC"?h.shape[3]:h.shape[1];L(v===c.shape[2],function(){return"Error in conv2d: depth of input ("+v+") must match input depth for filter "+c.shape[2]+"."}),L(zn(t,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"});var m=Um(a),g=oo(h.shape,c.shape,t,i,r,s,!1,m),x=[c,h],w=G.runKernelFunc(function(S,E){var _=S.conv2d(h,c,g);return E([c,h]),_},{x:h,filter:c},function(S,E){var _=E,R=_[0],A=_[1];return L(Eu(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return ME(A.shape,S,R,t,r,a)},filter:function(){return Zm(A,S,R.shape,t,r,a)}}},"Conv2D",g,x);return d?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),HL=V({conv3d_:function(n,e,t,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var s=M(n,"x","conv3d"),l=M(e,"filter","conv3d"),c=s,h=!1;s.rank===4&&(h=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),L(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),L(l.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."}),L(c.shape[4]===l.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."}),L(function(m,g){return ov(m)||ov(g)}(t,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),L(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var d=kf(c.shape,l.shape,t,i,r),v=G.runKernelFunc(function(m,g){var x=m.conv3d(c,l,d);return g([c,l]),x},{x:c,$filter:l},function(m,g){L(ov(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var x=g[0],w=g[1];return{x:function(){return NE(x.shape,m,w,t,r)},$filter:function(){return function(S,E,_,R,A){var C=S;S.rank===4&&(C=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]));var D=E;D.rank===4&&(D=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3])),L(C.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+C.shape+"."}),L(D.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."}),L(_.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+_+"."}),L(C.shape[4]===_[3],function(){return"Error in conv3dDerFilter: depth of input "+C.shape[4]+") must match input depth in filter ("+_[3]+"."}),L(D.shape[4]===_[4],function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+_[4]+")."});var O=kf(C.shape,_,R,1,A);return G.runKernelFunc(function(F){return F.conv3dDerFilter(C,D,O)},{x5D:C,dy5D:D})}(x,m,w.shape,t,r)}}});return h?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),Zm=V({conv2dDerFilter_:function(n,e,t,r,a,i,s){i===void 0&&(i="NHWC");var l=n;n.rank===3&&(l=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var c=e;c.rank===3&&(c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),L(l.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."}),L(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),L(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var h=i==="NHWC"?l.shape[3]:l.shape[1],d=i==="NHWC"?c.shape[3]:c.shape[1];L(h===t[2],function(){return"Error in conv2dDerFilter: depth of input "+h+") must match input depth in filter ("+t[2]+"."}),L(d===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+t[3]+")."}),s!=null&&L(Mt(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."});var v=Um(i),m=oo(l.shape,t,r,1,a,s,!1,v);return G.runKernelFunc(function(g){return g.conv2dDerFilter(l,c,m)},{x4D:l,dy4D:c})}}),ME=V({conv2dDerInput_:kE}),th=V({depthwiseConv2d_:function(n,e,t,r,a,i,s){i===void 0&&(i=[1,1]);var l=M(n,"x","depthwiseConv2d"),c=M(e,"filter","depthwiseConv2d"),h=l,d=!1;l.rank===3&&(d=!0,h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),L(h.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+h.rank+"."}),L(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),L(h.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+h.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),L(zn(t,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),s!=null&&L(Mt(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var v=oo(h.shape,c.shape,t,i,r,s,!0),m=[h,c],g=G.runKernelFunc(function(x,w){var S=x.depthwiseConv2D(h,c,v);return w([h,c]),S},{x:h,filter:c},function(x,w){L(Eu(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var S=w[0],E=w[1];return{x:function(){return IE(S.shape,x,E,v)},filter:function(){return FE(S,x,E.shape,v)}}},"DepthwiseConv2dNative",v,m);return d?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),IE=V({depthwiseConv2dDerInput_:function(n,e,t,r){var a=e,i=!1;e.rank===3&&(i=!0,a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=G.runKernelFunc(function(l){return l.depthwiseConv2DDerInput(a,t,r)},{dy4D:a});return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),FE=V({depthwiseConv2dDerFilter_:function(n,e,t,r){var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var i=e;return i.rank===3&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),G.runKernelFunc(function(s){return s.depthwiseConv2DDerFilter(a,i,r)},{x4D:a,dy4D:i})}}),Ym=V({separableConv2d_:function(n,e,t,r,a,i,s){i===void 0&&(i=[1,1]),s===void 0&&(s="NHWC");var l=M(n,"x","separableConv2d"),c=M(e,"depthwiseFilter","separableConv2d"),h=M(t,"pointwiseFilter","separableConv2d"),d=l,v=!1;if(l.rank===3&&(v=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");L(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),L(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),L(h.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),L(h.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+h.shape[0]+"."}),L(h.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+h.shape[1]+"."});var m=c.shape[2],g=c.shape[3];L(h.shape[2]===m*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*g+", but got "+h.shape[2]+"."});var x=th(d,c,r,a,s,i),w=Sr(x,h,1,"valid",s);return v?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),VL=V({conv2dTranspose_:function(n,e,t,r,a,i){return kE(t,M(n,"x","conv2dTranspose"),M(e,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),jL=V({conv3dTranspose_:function(n,e,t,r,a){return NE(t,M(n,"x","conv3dTranspose"),M(e,"filter","conv3dTranspose"),r,a)}}),nh=V({matMul_:function(n,e,t,r){var a;t===void 0&&(t=!1),r===void 0&&(r=!1);var i=M(n,"a","matMul"),s=M(e,"b","matMul");a=Rt(i,s),i=a[0],s=a[1];var l=t?i.shape[i.rank-2]:i.shape[i.rank-1],c=r?s.shape[s.rank-1]:s.shape[s.rank-2],h=t?i.shape[i.rank-1]:i.shape[i.rank-2],d=r?s.shape[s.rank-2]:s.shape[s.rank-1],v=i.shape.slice(0,-2),m=s.shape.slice(0,-2),g=_e(v),x=_e(m);L(i.rank>=2&&s.rank>=2&&i.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+s.rank+"."}),L(Jt(v,m),function(){return"Error in matMul: outer dimensions ("+v+") and ("+m+") of Tensors with shapes "+i.shape+" and "+s.shape+" must match."}),L(l===c,function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+i.shape+" and "+s.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var w=i.shape.slice(0,-2).concat([h,d]),S=t?i.as3D(g,l,h):i.as3D(g,h,l),E=r?s.as3D(x,d,c):s.as3D(x,c,d),_={transposeA:t,transposeB:r};return G.runKernelFunc(function(R,A){var C=R.batchMatMul(S,E,t,r);return A([S,E]),C},{a:S,b:E},function(R,A){var C=A,D=C[0],O=C[1];return t||r?!t&&r?{a:function(){return R.matMul(O,!1,!1)},b:function(){return R.matMul(D,!0,!1)}}:t&&!r?{a:function(){return O.matMul(R,!1,!0)},b:function(){return D.matMul(R,!1,!1)}}:{a:function(){return O.matMul(R,!0,!0)},b:function(){return R.matMul(D,!0,!0)}}:{a:function(){return R.matMul(O,!1,!0)},b:function(){return D.matMul(R,!0,!1)}}},"BatchMatMul",_).reshape(w)}}),WL=V({dot_:function(n,e){var t=M(n,"t1","dot"),r=M(e,"t2","dot");L(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var a=t.rank===1?t.size:t.shape[1],i=r.rank===1?r.size:r.shape[0];return L(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),GL=V({outerProduct_:function(n,e){var t=M(n,"v1","outerProduct"),r=M(e,"v2","outerProduct");return L(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),fl=V({reverse_:function(n,e){var t=M(n,"x","reverse");if(t.rank===0)return t.clone();var r=$t(e,t.shape);return G.runKernelFunc(function(a){return a.reverse(t,r)},{$x:t},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(t)}}),qL=V({reverse1d_:function(n){var e=M(n,"x","reverse");return L(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),fl(e,0)}}),KL=V({reverse2d_:function(n,e){var t=M(n,"x","reverse");return L(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),fl(t,e)}}),XL=V({reverse3d_:function(n,e){var t=M(n,"x","reverse");return L(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),fl(t,e)}}),$L=V({reverse4d_:function(n,e){var t=M(n,"x","reverse");return L(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),fl(t,e)}});function BE(n,e,t,r,a,i){var s=M(n,"x","maxPool"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),L(l.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."}),L(zn(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),i!=null&&L(Mt(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var h=Ks(l.shape,e,t,r,a,i);if(h.filterWidth===1&&h.filterHeight===1&&Jt(h.inShape,h.outShape))return s.clone();var d=[l],v=G.runKernelFunc(function(m,g){var x=m.maxPool(l,h);return g([l,x]),x},{x:l},function(m,g){var x=g[0],w=g[1];return{x:function(){return function(S,E,_,R,A,C,D,O){var F=M(S,"dy","maxPoolBackprop"),N=M(E,"input","maxPoolBackprop"),I=M(_,"output","maxPoolBackprop");L(N.rank===F.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+F.rank+")"}),L(zn(A,C),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+A+" and dilations '"+C+"'"}),L(F.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+F.rank+"."}),L(N.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+N.rank+"."});var U=Ks(N.shape,R,A,C,D,O);return G.runKernelFunc(function(H){return H.maxPoolBackprop(F,N,I,U)},{$dy:F,$input:N})}(m,x,w,e,t,r,a)}}},"MaxPool",h,d);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function LE(n,e,t,r,a,i){var s=M(n,"x","avgPool","float32");L(zn(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),L(l.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."}),i!=null&&L(Mt(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var h=Ks(l.shape,e,t,r,a,i);if(h.filterWidth===1&&h.filterHeight===1&&Jt(h.inShape,h.outShape))return s.clone();var d=G.runKernelFunc(function(v){return v.avgPool(l,h)},{x:l},function(v){return{x:function(){return function(m,g,x,w,S,E){var _=M(m,"dy","avgPoolBackprop"),R=M(g,"input","avgPoolBackprop");L(R.rank===_.rank,function(){return"Rank of input ("+R.rank+") does not match rank of dy ("+_.rank+")"}),L(zn(w,S),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+S+"'"});var A=R,C=_,D=!1;R.rank===3&&(D=!0,A=R.as4D(1,R.shape[0],R.shape[1],R.shape[2]),C=_.as4D(1,_.shape[0],_.shape[1],_.shape[2])),L(C.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),L(A.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+A.rank+"."});var O=Ks(A.shape,x,w,S,E),F=G.runKernelFunc(function(N){return N.avgPoolBackprop(C,A,O)},{dy4D:C,input4D:A});return D?F.as3D(F.shape[1],F.shape[2],F.shape[3]):F}(v,l,e,t,r,a)}}},"AvgPool",h);return d=d.cast(s.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var Qt=V({maxPool_:function(n,e,t,r,a){return BE(n,e,t,1,r,a)}}),hl=V({avgPool_:function(n,e,t,r,a){return LE(n,e,t,1,r,a)}}),ZL=V({pool_:function(n,e,t,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var s=M(n,"x","maxPool"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),L(zn(i,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"});var h,d=Ks(l.shape,e,i,a,r),v=[d.dilationHeight,d.dilationWidth];h=r==="same"?function(A,C){var D=A.map(function(N,I){return N+(N-1)*(C[I]-1)}).map(function(N){return N-1}),O=D.map(function(N){return Math.floor(N/2)}),F=D.map(function(N,I){return N-O[I]});return D.map(function(N,I){return[O[I],F[I]]})}([d.filterHeight,d.filterWidth],v):[[0,0],[0,0]];var m=v[0]===1&&v[1]===1,g=function(A,C,D){var O=D.map(function(ee){return ee[0]}),F=D.map(function(ee){return ee[1]}),N=A.concat(O,F),I=C.map(function(ee,ne){return(ee-N[ne]%ee)%ee}),U=F.map(function(ee,ne){return ee+I[ne]}),H=C.map(function(ee,ne){return[O[ne],U[ne]]}),J=C.map(function(ee,ne){return[0,I[ne]]});return[H,J]}([d.inHeight,d.inWidth],v,h),x=g[0],w=g[1],S=m?r:"valid",E=m?l:jS(l,v,x),_=(t==="avg"?function(){return LE(E,e,i,1,S)}:function(){return BE(E,e,i,1,S)})(),R=m?_:US(_,v,w);return c?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),YL=V({maxPool3d_:function(n,e,t,r,a,i,s){i===void 0&&(i="NDHWC");var l=M(n,"x","maxPool3d"),c=l,h=!1;l.rank===4&&(h=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),s==null&&(s=[1,1,1]),L(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),L(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),L(zn(t,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+s+"'"}),a!=null&&L(Mt(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=Of(c.shape,e,t,s,r,a,i),v=G.runKernelFunc(function(m,g){var x=m.maxPool3d(c,d);return g([c,x]),x},{x:c},function(m,g){var x=g[0],w=g[1];return{x:function(){return function(S,E,_,R,A,C,D,O){var F=M(S,"dy","maxPool3dBackprop"),N=M(E,"input","maxPool3dBackprop"),I=M(_,"output","maxPool3dBackprop"),U=F,H=N,J=I,ee=!1;N.rank===4&&(ee=!0,U=F.as5D(1,F.shape[0],F.shape[1],F.shape[2],F.shape[3]),H=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),J=I.as5D(1,I.shape[0],I.shape[1],I.shape[2],I.shape[3])),L(U.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+U.rank+"."}),L(H.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+H.rank+"."}),L(J.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+J.rank+"."}),C==null&&(C=[1,1,1]),L(zn(A,C),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+A+" and dilations '"+C+"'"}),O!=null&&L(Mt(D),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+O+" but got pad "+D+"."});var ne=Of(H.shape,R,A,C,D,O),z=G.runKernelFunc(function(W){return W.maxPool3dBackprop(U,H,J,ne)},{dy5D:U,input5D:H});return ee?z.as4D(z.shape[1],z.shape[2],z.shape[3],z.shape[4]):z}(m,x,w,e,t,s,r,a)}}});return h?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),QL=V({avgPool3d_:function(n,e,t,r,a,i,s){i===void 0&&(i="NDHWC");var l=M(n,"x","avgPool3d","float32"),c=l,h=!1;l.rank===4&&(h=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),s==null&&(s=[1,1,1]),L(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),L(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),L(zn(t,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+s+"'"}),a!=null&&L(Mt(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=Of(c.shape,e,t,s,r,a,i),v=G.runKernelFunc(function(m){return m.avgPool3d(c,d)},{x:c},function(m){return{x:function(){return function(g,x,w,S,E,_,R){var A=M(g,"dy","avgPool3dBackprop"),C=M(x,"input","avgPool3dBackprop"),D=A,O=C,F=!1;C.rank===4&&(F=!0,D=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),O=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),L(D.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."}),L(O.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+O.rank+"."}),E==null&&(E=[1,1,1]),L(zn(S,E),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+S+" and dilations '"+E+"'"}),R!=null&&L(Mt(_),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+R+" but got pad "+_+"."});var N=Of(O.shape,w,S,E,_,R),I=G.runKernelFunc(function(U){return U.avgPool3dBackprop(D,O,N)},{dy5D:D,input5D:O});return F?I.as4D(I.shape[1],I.shape[2],I.shape[3],I.shape[4]):I}(m,c,e,t,s,r,a)}}});return v=v.cast(c.dtype),h?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),ea=V({slice_:function(n,e,t){var r,a,i=M(n,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice()).forEach(function(c){L(c!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=t==null?new Array(i.rank).fill(-1):typeof t=="number"?[t].concat(new Array(i.rank-1).fill(-1)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(-1)):t).map(function(c,h){return c>=0?c:(L(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+h+"."}),i.shape[h]-r[h])}),RI(i,r,a);var s=i.shape,l={begin:r,size:a};return G.runKernelFunc(function(c){return c.slice(i,r,a)},{x:i},function(c){for(var h=[],d=0;d<c.rank;d++)h.push([r[d],s[d]-r[d]-a[d]]);return{x:function(){return c.pad(h)}}},"Slice",l)}}),JL=V({slice1d_:function(n,e,t){var r=M(n,"x","slice1d");return L(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),ea(r,[e],[t])}}),ez=V({slice2d_:function(n,e,t){var r=M(n,"x","slice2d");return L(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),ea(r,e,t)}}),zE=V({slice3d_:function(n,e,t){var r=M(n,"x","slice3d");return L(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),ea(r,e,t)}}),tz=V({slice4d_:function(n,e,t){var r=M(n,"x","slice4d");return L(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),ea(r,e,t)}});function PE(n,e,t,r,a){return e.rank<t.rank&&(e=e.reshape(Ln(e.shape,r))),n.rank<t.rank&&(n=n.reshape(Ln(n.shape,r))),{x:function(){var i=n.mul(t.equal(e).cast(n.dtype));return a==null?i:i.transpose(a)}}}var nz=V({all_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","all","bool"),a=$t(e,r.shape),i=a,s=ia(i,r.rank);s!=null&&(r=r.transpose(s),i=oa(i.length,r.rank));var l=G.runKernelFunc(function(h){return h.all(r,i)},{$x:r});if(t){var c=Ln(l.shape,a);return l.reshape(c)}return l}}),rz=V({any_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","any","bool"),a=$t(e,r.shape),i=a,s=ia(i,r.rank);s!=null&&(r=r.transpose(s),i=oa(i.length,r.rank));var l=G.runKernelFunc(function(h){return h.any(r,i)},{$x:r});if(t){var c=Ln(l.shape,a);return l.reshape(c)}return l}}),az=V({argMax_:function(n,e){e===void 0&&(e=0);var t=M(n,"x","argMax");e==null&&(e=0);var r=$t(e,t.shape),a=ia(r,t.rank);a!=null&&(t=t.transpose(a),r=oa(r.length,t.rank));var i={axis:r[0]},s=[t];return G.runKernelFunc(function(l,c){var h=l.argMax(t,r[0]);return c([t]),h},{x:t},function(l,c){var h=c[0];return{x:function(){return Qe(h)}}},"ArgMax",i,s)}}),iz=V({argMin_:function(n,e){e===void 0&&(e=0);var t=M(n,"x","argMin");e==null&&(e=0);var r=$t(e,t.shape),a=ia(r,t.rank);return a!=null&&(t=t.transpose(a),r=oa(r.length,t.rank)),G.runKernelFunc(function(i,s){var l=i.argMin(t,r[0]);return s([t]),l},{$x:t},function(i,s){var l=s[0];return{$x:function(){return Qe(l)}}})}}),oz=V({logSumExp_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","logSumExp"),a=$t(e,r.shape),i=r.max(a,!0),s=r.sub(i).exp().sum(a).log(),l=i.reshape(s.shape).add(s);if(t){var c=Ln(l.shape,a);return l.reshape(c)}return l}}),rh=V({max_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","max"),a=r,i=$t(e,r.shape),s=i,l=ia(s,r.rank);l!=null&&(r=r.transpose(l),s=oa(s.length,r.rank));var c=[r],h=G.runKernelFunc(function(v,m){var g=v.max(r,s);return m([a,g]),g},{x:r},function(v,m){return PE(v,m[1],m[0],i,l)},"Max",{axes:s},c,[!0]);if(t){var d=Ln(h.shape,i);h=h.reshape(d)}return h}}),uz=V({mean_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","mean"),a=$t(e,r.shape),i=_e(vn(r.shape,a)[1]);return Qf(function(s){var l=ge(i);return{value:(l.dtype===s.dtype?s:s.cast(l.dtype)).div(l).sum(e,t),gradFunc:function(c){var h=s.shape.slice();return a.forEach(function(d){h[d]=1}),c.reshape(h).mul(Du(s.shape,"float32")).div(i)}}})(r)}}),sz=V({min_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","min"),a=r,i=$t(e,r.shape),s=i,l=ia(s,r.rank);l!=null&&(r=r.transpose(l),s=oa(s.length,r.rank));var c=[r],h=G.runKernelFunc(function(v,m){var g=v.min(r,s);return m([a,g]),g},{x:r},function(v,m){return PE(v,m[1],m[0],i,l)},"Min",{axes:s},c,[!0]);if(t){var d=Ln(h.shape,i);h=h.reshape(d)}return h}}),lz=V({moments_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=$t(e,(n=M(n,"x","moments")).shape),a=n.mean(r,t),i=a.shape;t||(i=Ln(a.shape,r));var s=n.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:s.mean(r,t)}}}),UE=V({sum_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=$t(e,r.shape);return Qf(function(i){var s=ia(a,i.rank),l=a,c=i;s!=null&&(c=i.transpose(s),l=oa(l.length,i.rank));var h=function(g){var x=i.shape.slice();return a.forEach(function(w){x[w]=1}),g.reshape(x).mul(Du(i.shape,"float32"))},d={axes:l},v=G.runKernelFunc(function(g){return g.sum(c,l)},{x:c},function(g){return{x:function(){return h(g)}}},"Sum",d);if(t){var m=Ln(v.shape,a);v=v.reshape(m)}return{value:v,gradFunc:h}})(r)}}),cz=V({prod_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=M(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=$t(e,r.shape),i=ia(a,r.rank),s=a,l=r;i!=null&&(l=r.transpose(i),s=oa(s.length,r.rank));var c=G.runKernelFunc(function(d){return d.prod(l,s)},{permutedX:l});if(t){var h=Ln(c.shape,a);c=c.reshape(h)}return c}}),HE=V({elu_:function(n){var e=M(n,"x","elu");return G.runKernelFunc(function(t,r){var a=t.elu(e);return r([a]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return G.runKernelFunc(function(i){return i.eluDer(t,a)},{dy:t,y:a})}}})}}),fz=V({leakyRelu_:function(n,e){e===void 0&&(e=.2);var t=M(n,"x","leakyRelu");return Xm(ge(e).mul(t),t)}}),VE=V({prelu_:function(n,e){var t=M(n,"x","prelu"),r=M(e,"alpha","prelu");return G.runKernelFunc(function(a,i){var s=a.prelu(t,r);return i([t,r]),s},{x:t,alpha:r},function(a,i){var s=i[0],l=i[1],c=s.greater(0);return{x:function(){return ro(c,a,a.mul(l))},alpha:function(){var h=ro(c,Qe(a),a.mul(s)),d=Kt(l.shape,a.shape);return d.length>0&&(h=h.sum(d)),h.reshape(l.shape)}}},"Prelu")}}),_t=V({relu_:function(n){var e=M(n,"x","relu");return e.dtype==="bool"?e.toInt():G.runKernelFunc(function(t,r){var a=t.relu(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mulStrict(a.step().toFloat())}}},"Relu")}}),jE=V({relu6_:function(n){var e=M(n,"x","relu6");return e.dtype==="bool"?e.toInt():G.runKernelFunc(function(t,r){var a=t.relu6(e);return r([e]),a},{x:e},function(t,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return t.mulStrict(i.toFloat())}}},"Relu6")}}),hz=V({selu_:function(n){var e=M(n,"x","selu");return G.runKernelFunc(function(t,r){var a=t.selu(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){var i=a.greater(ge(0)),s=ge(Gm),l=ge(qm),c=t.mul(l),h=t.mul(s).mul(a.toFloat().exp());return ro(i,c,h)}}})}}),xi=V({transpose_:function(n,e){var t=M(n,"x","transpose");if(e==null&&(e=t.shape.map(function(a,i){return i}).reverse()),L(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."}),e.forEach(function(a){L(a>=0&&a<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e})}),t.rank<=1)return t.clone();var r={perm:e};return G.runKernelFunc(function(a){return a.transpose(t,e)},{x:t},function(a){var i=Fm(e);return{x:function(){return a.transpose(i)}}},"Transpose",r)}}),dz=V({localResponseNormalization_:function(n,e,t,r,a){e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=M(n,"x","localResponseNormalization");L(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),L(Mt(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var s=i,l=!1;i.rank===3&&(l=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=G.runKernelFunc(function(h,d){var v=h.localResponseNormalization4D(s,e,t,r,a);return d([s,v]),v},{x4D:s},function(h,d){var v=d[0],m=d[1];return{x4D:function(){return G.runKernelFunc(function(g){return g.LRNGrad(h,v,m,e,t,r,a)},{})}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),WE=V({norm_:function(n,e,t,r){e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var a=function l(c,h,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return l(c.reshape([-1]),h,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(h===1)return c.abs().sum(d);if(h===1/0)return c.abs().max(d);if(h===-1/0)return c.abs().min(d);if(h==="euclidean"||h===2)return c.abs().pow(ge(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+h)}if(Array.isArray(d)&&d.length===2){if(h===1)return c.abs().sum(d[0]).max(d[1]-1);if(h===1/0)return c.abs().sum(d[1]).max(d[0]);if(h===-1/0)return c.abs().sum(d[1]).min(d[0]);if(h==="fro"||h==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+h)}throw new Error("Error in norm: invalid axis: "+d)}(n=M(n,"x","norm"),e,t),i=a.shape;if(r){var s=$t(t,n.shape);i=Ln(a.shape,s)}return a.reshape(i)}}),pz=V({basicLSTMCell_:function(n,e,t,r,a,i){var s=M(n,"forgetBias","basicLSTMCell"),l=M(e,"lstmKernel","basicLSTMCell"),c=M(t,"lstmBias","basicLSTMCell"),h=M(r,"data","basicLSTMCell"),d=M(a,"c","basicLSTMCell"),v=M(i,"h","basicLSTMCell"),m=h.concat(v,1).matMul(l).add(c),g=m.shape[0],x=m.shape[1]/4,w=[g,x],S=m.slice([0,0],w),E=m.slice([0,x],w),_=m.slice([0,2*x],w),R=m.slice([0,3*x],w),A=S.sigmoid().mulStrict(E.tanh()).addStrict(d.mulStrict(s.add(_).sigmoid())),C=A.tanh().mulStrict(R.sigmoid());return[A,C]}}),vz=V({multiRNNCell_:function(n,e,t,r){for(var a=M(e,"data","multiRNNCell"),i=_f(t,"c","multiRNNCell"),s=_f(r,"h","multiRNNCell"),l=a,c=[],h=0;h<n.length;h++){var d=n[h](l,i[h],s[h]);c.push(d[0]),c.push(d[1]),l=d[1]}var v=[],m=[];for(h=0;h<c.length;h+=2)v.push(c[h]),m.push(c[h+1]);return[v,m]}}),mz=V({movingAverage_:function(n,e,t,r,a){a===void 0&&(a=!0);var i=M(n,"v","movingAverage"),s=M(e,"x","movingAverage"),l=M(t,"decay","movingAverage");dM(i,s),L(Jt(i.shape,s.shape),function(){return"Shape mismatch in v and x"});var c=ge(1),h=c.sub(l),d=s.sub(i).mul(h);if(a){L(r!=null,function(){return"When using zeroDebias: true, step is required."});var v=M(r,"step","movingAverage");d=d.div(c.sub(If(l,v)))}return i.add(d)}}),gz=V({stridedSlice_:function(n,e,t,r,a,i,s,l,c){if(a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),l===void 0&&(l=0),c===void 0&&(c=0),r==null&&(r=new Array(e.length)),s!==0)throw new Error("ellipsis mask is not yet supported");var h=M(n,"x","stridedSlice"),d=xw(l),v=h.shape.slice();d.forEach(function(S){e[S]=0,t[S]=1,v.splice(S,0,1)}),h=h.reshape(v);for(var m=0;m<h.rank;m++)e[m]=AI(a,e,r,h.shape,m),t[m]=TI(i,t,r,h.shape,m),r[m]=r[m]||1;var g=xw(c);g.forEach(function(S){t[S]=e[S]+1,r[S]=1});var x=Pm(e,t,r),w=x.filter(function(S,E){return g.indexOf(E)===-1});return r.every(function(S){return S===1})?ea(h,e,x).reshape(w):G.runKernelFunc(function(S){return S.stridedSlice(h,e,t,r)},{$x:h}).reshape(w)}}),yz=V({topk_:function(n,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var r=M(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(e>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+e);var i=G.runKernelFunc(function(s){return s.topk(r,e,t)},{$x:r});return{values:i[0],indices:i[1]}}}),bz=V({scatterND_:function(n,e,t){var r=M(n,"indices","scatterND","int32"),a=M(e,"updates","scatterND");return CI(a,r,t),G.runKernelFunc(function(i){return i.scatterND(r,a,t)},{indices:r,updates:a},null,"ScatterNd",{shape:t})}}),Qm=V({fft_:function(n){L(n.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return G.runKernelFunc(function(a){return a.fft(r)},{input:n}).reshape(n.shape)}}),Ff=V({ifft_:function(n){L(n.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return G.runKernelFunc(function(a){return a.ifft(r)},{input:n}).reshape(n.shape)}}),Jm=V({rfft_:function(n,e){L(n.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+n.dtype});var t,r=n.shape[n.shape.length-1],a=n.size/r;if(e!=null&&e<r){var i=n.shape.map(function(E){return 0}),s=n.shape.map(function(E){return E});s[n.shape.length-1]=e,t=n.slice(i,s),r=e}else if(e!=null&&e>r){var l=n.shape.map(function(E){return E});l[n.shape.length-1]=e-r,t=n.concat(bt(l),n.shape.length-1),r=e}else t=n;var c=t.zerosLike(),h=ln(t,c).as2D(a,r),d=Qm(h),v=Math.floor(r/2)+1,m=yr(d),g=Kr(d),x=m.split([v,r-v],m.shape.length-1),w=g.split([v,r-v],g.shape.length-1),S=t.shape.slice();return S[t.shape.length-1]=v,ln(x[0],w[0]).reshape(S)}}),GE=V({irfft_:function(n){var e=n.shape[n.shape.length-1],t=n.size/e;if(e<=2){var r=n.as2D(t,e),a=Ff(r);return yr(a)}var i=[t,2*(e-1)],s=yr(n).as2D(t,e),l=Kr(n).as2D(t,e),c=s.slice([0,1],[t,e-2]).reverse(1),h=l.slice([0,1],[t,e-2]).reverse(1).mul(ge(-1)),d=s.concat(c,1),v=l.concat(h,1);return r=ln(d,v).as2D(i[0],i[1]),a=Ff(r),yr(a)}}),xz=Object.freeze({fft:Qm,ifft:Ff,rfft:Jm,irfft:GE}),wz=V({sparseToDense_:function(n,e,t,r){r===void 0&&(r=0);var a=M(n,"sparseIndices","sparseToDense","int32"),i=M(e,"sparseValues","sparseToDense"),s=M(r,"defaultValue","sparseToDense",i.dtype);return function(l,c,h,d){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var v=l.rank>0?l.shape[0]:1,m=l.rank>1?l.shape[1]:1;if(h.length!==m)throw new Error("outputShape has incorrect number of elements:, "+h.length+", should be: "+m+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==v))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+v+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,t,s),G.runKernelFunc(function(l){return l.sparseToDense(a,i,t,s)},{$sparseIndices:a,$sparseValues:i,$defaultValue:s})}}),Sz=V({gatherND_:function(n,e){var t=M(e,"indices","gatherND","int32"),r=M(n,"x","gatherND");return G.runKernelFunc(function(a){return a.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),Ez=V({diag_:function(n){var e=M(n,"x","diag").flatten(),t=n.shape.concat(n.shape);return G.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(t)}}),_z=V({dropout_:function(n,e,t,r){var a=M(n,"x","dropout");if(L(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),L(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return n instanceof Et?a.clone():a;var i=function(c,h){if(h==null)return c.shape.slice();if(Jt(c.shape,h))return h;if(c.shape.length===h.length){for(var d=[],v=0;v<c.shape.length;v++)h[v]==null&&c.shape[v]!=null?d.push(c.shape[v]):d.push(h[v]);return d}return h}(a,t),s=1-e,l=VS(i,0,1,"float32",r).add(s).floor().div(s);return a.mul(l)}});function qE(n,e,t){for(var r=1-n%2,a=new Float32Array(n),i=0;i<n;++i){var s=2*Math.PI*i/(n+r-1);a[i]=e-t*Math.cos(s)}return Ut(a,"float32")}var eg=V({hannWindow_:function(n){return qE(n,.5,.5)}}),KE=V({hammingWindow_:function(n){return qE(n,.54,.46)}}),tg=V({frame_:function(n,e,t,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,s=[];i+e<=n.size;)s.push(ea(n,i,e)),i+=t;if(r)for(;i<n.size;){var l=i+e-n.size,c=Gt([ea(n,i,e-l),Jr([l],a)]);s.push(c),i+=t}return s.length===0?gi([],[0,e]):Gt(s).as2D(s.length,e)}}),XE=V({stft_:function(n,e,t,r,a){var i;a===void 0&&(a=eg),r==null&&(i=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var s=tg(n,e,t),l=bn(s,a(e)),c=[],h=0;h<s.shape[0];h++)c.push(Jm(l.slice([h,0],[1,e]),r));return Gt(c)}}),Cz=Object.freeze({hannWindow:eg,hammingWindow:KE,frame:tg,stft:XE}),yn,Rz=function(n,e,t){return t===void 0&&(t=1),we(this,void 0,void 0,function(){var r,a,i,s,l,c,h,d,v,m,g,x,w,S;return Se(this,function(E){switch(E.label){case 0:return r=M(n,"predictions","inTopK"),a=M(e,"targets","inTopK"),L(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),L(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),st(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],L(t>0&&t<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+t}),[4,r.data()];case 1:return s=E.sent(),[4,a.data()];case 2:for(l=E.sent(),c=[s.length/i,i],d=c[1],v=Ws("bool",h=c[0]),m=0;m<h;m++){for(g=m*d,x=s.subarray(g,g+d),w=[],S=0;S<x.length;S++)w.push({value:x[S],index:S});for(w.sort(function(_,R){return R.value-_.value}),v[m]=0,S=0;S<t;S++)if(w[S].index===l[m]){v[m]=1;break}}return n!==r&&r.dispose(),e!==a&&a.dispose(),[2,hn(v,a.shape,"bool")]}})})};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(yn||(yn={}));var Az=V({absoluteDifference_:function(n,e,t,r){r===void 0&&(r=yn.SUM_BY_NONZERO_WEIGHTS);var a=M(n,"labels","absoluteDifference"),i=M(e,"predictions","absoluteDifference"),s=null;t!=null&&(s=M(t,"weights","absoluteDifference")),st(a.shape,i.shape,"Error in absoluteDifference: ");var l=a.sub(i).abs();return Ba(l,s,r)}}),Ba=V({computeWeightedLoss_:function(n,e,t){t===void 0&&(t=yn.SUM_BY_NONZERO_WEIGHTS);var r=M(n,"losses","computeWeightedLoss"),a=null;e!=null&&(a=M(e,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(t===yn.NONE)return i;if(t===yn.SUM)return i.sum();if(t===yn.MEAN){if(a==null)return i.mean();var s=r.size/a.size,l=i.sum().div(a.sum());return s>1?l.div(ge(s)):l}if(t===yn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(ge(r.size));var c=a.mul(Du(r.shape)).notEqual(ge(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+t)}}),Tz=V({cosineDistance_:function(n,e,t,r,a){a===void 0&&(a=yn.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"labels","cosineDistance"),s=M(e,"predictions","cosineDistance"),l=null;r!=null&&(l=M(r,"weights","cosineDistance")),st(i.shape,s.shape,"Error in cosineDistance: ");var c=ge(1).sub(i.mul(s).sum(t,!0));return Ba(c,l,a)}}),Dz=V({hingeLoss_:function(n,e,t,r){r===void 0&&(r=yn.SUM_BY_NONZERO_WEIGHTS);var a=M(n,"labels","hingeLoss"),i=M(e,"predictions","hingeLoss"),s=null;t!=null&&(s=M(t,"weights","hingeLoss")),st(a.shape,i.shape,"Error in hingeLoss: ");var l=ge(1);a=ge(2).mul(a).sub(l);var c=l.sub(a.mul(i)).relu();return Ba(c,s,r)}}),Oz=V({huberLoss_:function(n,e,t,r,a){r===void 0&&(r=1),a===void 0&&(a=yn.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"labels","huberLoss"),s=M(e,"predictions","huberLoss"),l=null;t!=null&&(l=M(t,"weights","huberLoss")),st(i.shape,s.shape,"Error in huberLoss: ");var c=ge(r),h=s.sub(i).abs(),d=AE(h,c),v=h.sub(d),m=ge(.5).mul(d.square()).add(c.mul(v));return Ba(m,l,a)}}),kz=V({logLoss_:function(n,e,t,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=yn.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"labels","logLoss"),s=M(e,"predictions","logLoss"),l=null;t!=null&&(l=M(t,"weights","logLoss")),st(i.shape,s.shape,"Error in logLoss: ");var c=ge(1),h=ge(r),d=i.mul(s.add(h).log()).neg().sub(c.sub(i).mul(c.sub(s).add(h).log()));return Ba(d,l,a)}}),Nz=V({meanSquaredError_:function(n,e,t,r){r===void 0&&(r=yn.SUM_BY_NONZERO_WEIGHTS);var a=M(n,"labels","meanSquaredError"),i=M(e,"predictions","meanSquaredError"),s=null;t!=null&&(s=M(t,"weights","meanSquaredError")),st(a.shape,i.shape,"Error in meanSquaredError: ");var l=a.squaredDifference(i);return Ba(l,s,r)}}),Mz=V({sigmoidCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=yn.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"multiClassLabels","sigmoidCrossEntropy"),s=M(e,"logits","sigmoidCrossEntropy"),l=null;if(t!=null&&(l=M(t,"weights","sigmoidCrossEntropy")),st(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=ge(r),h=ge(1),d=ge(.5);i=i.mul(h.sub(c)).add(d.mul(c))}var v=function(m,g){var x=M(m,"labels","sigmoidCrossEntropyWithLogits"),w=M(g,"logits","sigmoidCrossEntropyWithLogits");st(x.shape,w.shape,"Error in sigmoidCrossEntropyWithLogits: ");var S=w.relu(),E=w.mul(x),_=w.abs().neg().exp().log1p();return S.sub(E).add(_)}(i,s);return Ba(v,l,a)}}),Iz=V({softmaxCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=yn.SUM_BY_NONZERO_WEIGHTS);var i=M(n,"onehotLabels","softmaxCrossEntropy"),s=M(e,"logits","softmaxCrossEntropy"),l=null;if(t!=null&&(l=M(t,"weights","softmaxCrossEntropy")),st(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var c=ge(r),h=ge(1),d=ge(i.shape[1]);i=i.mul(h.sub(c)).add(c.div(d))}var v=function(m,g,x){if(x===void 0&&(x=-1),x===-1&&(x=g.rank-1),x!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+x);return Qf(function(w,S,E){var _=S.logSumExp([x],!0),R=S.toFloat().sub(_);return E([w,R]),{value:R.mul(w).neg().sum([x]),gradFunc:function(A,C){var D=C[0],O=C[1],F=Ln(A.shape,[x]);return[A.reshape(F).mul(D.toFloat().sub(O.exp())),A.reshape(F).mul(O.exp().sub(D.toFloat()))]}}})(m,g)}(i,s);return Ba(v,l,a)}}),Fz=Object.freeze({get Reduction(){return yn},absoluteDifference:Az,computeWeightedLoss:Ba,cosineDistance:Tz,hingeLoss:Dz,huberLoss:Oz,logLoss:kz,meanSquaredError:Nz,sigmoidCrossEntropy:Mz,softmaxCrossEntropy:Iz});function Vw(n,e){return e===void 0&&(e=!1),G.tidy(function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var t=n.shape[0],r=n.shape[1],a=HS(t),i=n.clone(),s=gi([[1]],[1,1]),l=s.clone(),c=t>=r?r:t,h=function(v){var m,g=i,x=l,w=a;m=G.tidy(function(){var S=i.slice([v,v],[t-v,1]),E=S.norm(),_=i.slice([v,v],[1,1]),R=gi([[-1]]).where(_.greater(0),gi([[1]])),A=_.sub(R.mul(E)),C=S.div(A);l=C.shape[0]===1?s.clone():s.concat(C.slice([1,0],[C.shape[0]-1,C.shape[1]]),0);var D=R.matMul(A).div(E).neg(),O=i.slice([v,0],[t-v,r]),F=D.mul(l);if(v===0)i=O.sub(F.matMul(l.transpose().matMul(O)));else{var N=O.sub(F.matMul(l.transpose().matMul(O)));i=i.slice([0,0],[v,r]).concat(N,0)}var I=a.slice([0,v],[t,a.shape[1]-v]);if(v===0)a=I.sub(I.matMul(l).matMul(F.transpose()));else{var U=I.sub(I.matMul(l).matMul(F.transpose()));a=a.slice([0,0],[t,v]).concat(U,1)}return[l,i,a]}),l=m[0],i=m[1],a=m[2],Fn([g,x,w])},d=0;d<c;++d)h(d);return!e&&t>r&&(a=a.slice([0,0],[t,r]),i=i.slice([0,0],[r,r])),[a,i]})}var Bz=V({bandPart_:function(n,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=M(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),s=i[0],l=i[1];if(!(e<=s))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+s+").");if(!(t<=l))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+l+").");e<0&&(e=s),t<0&&(t=l);var c=Cf(0,s,1,"int32").reshape([-1,1]),h=Cf(0,l,1,"int32"),d=Xt(c,h),v=eh(d.lessEqual(ge(+e,"int32")),d.greaterEqual(ge(-t,"int32"))),m=bt([s,l],r.dtype);return nr(qt(r.reshape([-1,s,l])).map(function(g){return ro(v,g,m)})).reshape(a)}}),Lz=V({gramSchmidt_:function(n){var e;if(Array.isArray(n)){e=!1,L(n!=null&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=n[0].shape[0],r=function(c){L(n[c].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[c].shape[0]+" vs. "+t+")"})},a=1;a<n.length;++a)r(a)}else e=!0,n=Lm(n,n.shape[0],0).map(function(c){return WS(c,[0])});L(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var i=[],s=n,l=function(c){i.push(G.tidy(function(){var h=s[c];if(c>0)for(var d=0;d<c;++d){var v=UE(i[d].mulStrict(h)).mul(i[d]);h=h.sub(v)}return h.div(WE(h,"euclidean"))}))};for(a=0;a<n.length;++a)l(a);return e?nr(i,0):i}}),zz=V({qr_:function(n,e){if(e===void 0&&(e=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return Vw(n,e);var t=n.shape.slice(0,n.shape.length-2).reduce(function(s,l){return s*l}),r=qt(n.reshape([t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),a=[],i=[];return r.forEach(function(s){var l=Vw(s,e),c=l[0],h=l[1];a.push(c),i.push(h)}),[nr(a,0).reshape(n.shape),nr(i,0).reshape(n.shape)]}}),Pz=Object.freeze({bandPart:Bz,gramSchmidt:Lz,qr:zz});function ah(n,e,t,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var s=n.shape[0];return t=Math.min(t,s),L(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),L(n.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),L(n.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),L(e.rank===1,function(){return"scores must be a 1D tensor"}),L(e.shape[0]===s,function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+e.shape[0]}),L(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Uz=V({resizeBilinear_:function(n,e,t){t===void 0&&(t=!1);var r=M(n,"images","resizeBilinear");L(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),L(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],l=e[1],c=G.runKernelFunc(function(h,d){return d([a]),h.resizeBilinear(a,s,l,t)},{x:a},function(h,d){return{x:function(){return G.runKernelFunc(function(v){return v.resizeBilinearBackprop(h,d[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:s,newWidth:l});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Hz=V({resizeNearestNeighbor_:function(n,e,t){t===void 0&&(t=!1);var r=M(n,"images","resizeNearestNeighbor");L(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),L(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),L(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],l=e[1],c=G.runKernelFunc(function(h,d){return d([a]),h.resizeNearestNeighbor(a,s,l,t)},{batchImages:a},function(h,d){return{batchImages:function(){return G.runKernelFunc(function(v){return v.resizeNearestNeighborBackprop(h,d[0],t)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Vz=V({nonMaxSuppression_:function(n,e,t,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=M(n,"boxes","nonMaxSuppression"),s=M(e,"scores","nonMaxSuppression"),l=ah(i,s,t,r,a);t=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold;var c={maxOutputSize:t,iouThreshold:r,scoreThreshold:a};return G.runKernelFunc(function(h){return h.nonMaxSuppression(i,s,t,r,a)},{boxes:i,scores:s},null,"NonMaxSuppressionV3",c)}}),jz=function(n,e,t,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),we(this,void 0,void 0,function(){var i,s,l,c,h,d,v;return Se(this,function(m){switch(m.label){case 0:return i=M(n,"boxes","nonMaxSuppressionAsync"),s=M(e,"scores","nonMaxSuppressionAsync"),l=ah(i,s,t,r,a),t=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,[4,Promise.all([i.data(),s.data()])];case 1:return c=m.sent(),h=c[0],d=c[1],v=Hm(h,d,t,r,a),i!==n&&i.dispose(),s!==e&&s.dispose(),[2,v]}})})},Wz=V({nonMaxSuppressionWithScore_:function(n,e,t,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var s=M(n,"boxes","nonMaxSuppression"),l=M(e,"scores","nonMaxSuppression"),c=ah(s,l,t,r,a,i),h={maxOutputSize:t=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},d=G.runKernel("NonMaxSuppressionV5",{boxes:s,scores:l},h);return{selectedIndices:d[0],selectedScores:d[1]}}}),Gz=function(n,e,t,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),we(this,void 0,void 0,function(){var s,l,c,h,d,v,m;return Se(this,function(g){switch(g.label){case 0:return s=M(n,"boxes","nonMaxSuppressionAsync"),l=M(e,"scores","nonMaxSuppressionAsync"),c=ah(s,l,t,r,a,i),t=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([s.data(),l.data()])];case 1:return h=g.sent(),d=h[0],v=h[1],m=Vm(d,v,t,r,a,i),s!==n&&s.dispose(),l!==e&&l.dispose(),[2,m]}})})},qz=V({cropAndResize_:function(n,e,t,r,a,i){var s=M(n,"image","cropAndResize"),l=M(e,"boxes","cropAndResize","float32"),c=M(t,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var h=l.shape[0];return L(s.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),L(l.rank===2&&l.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+h+",4] but had shape "+l.shape+"."}),L(c.rank===1&&c.shape[0]===h,function(){return"Error in cropAndResize: boxInd must be have size ["+h+"] but had shape "+l.shape+"."}),L(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),L(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),L(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),G.runKernelFunc(function(d,v){return d.cropAndResize(s,l,c,r,a,i)},{images:s,boxes:l,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),ng=Object.freeze({resizeBilinear:Uz,resizeNearestNeighbor:Hz,nonMaxSuppression:Vz,nonMaxSuppressionAsync:jz,nonMaxSuppressionWithScore:Wz,nonMaxSuppressionWithScoreAsync:Gz,cropAndResize:qz}),rg=function(n,e){return!(n>0)||e==="linear"},ag=function(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return n.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},ig=function(n,e){var t=e,r=Kt(n.shape,e.shape);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},og=function(n,e,t){if(e==="linear")return n;if(e==="relu")return _t(n);if(e==="elu")return HE(n);if(e==="relu6")return jE(n);if(e==="prelu")return VE(n,t);throw new Error("Unknown fused activation "+e+".")},Kz=V({fusedMatMul_:function(n){var e,t=n.a,r=n.b,a=n.transposeA,i=a!==void 0&&a,s=n.transposeB,l=s!==void 0&&s,c=n.bias,h=n.activation,d=h===void 0?"linear":h,v=n.preluActivationWeights;if(rg(G.state.gradientDepth,d)===!1){var m=nh(t,r,i,l);return c!=null&&(m=je(m,c)),og(m,d,v)}var g=M(t,"a","fused matMul"),x=M(r,"b","fused matMul");e=Rt(g,x),g=e[0],x=e[1];var w=i?g.shape[g.rank-2]:g.shape[g.rank-1],S=l?x.shape[x.rank-1]:x.shape[x.rank-2],E=i?g.shape[g.rank-1]:g.shape[g.rank-2],_=l?x.shape[x.rank-2]:x.shape[x.rank-1],R=g.shape.slice(0,-2),A=x.shape.slice(0,-2),C=_e(R),D=_e(A);L(g.rank>=2&&x.rank>=2&&g.rank===x.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+x.rank+"."}),L(Jt(R,A),function(){return"Error in fused matMul: outer dimensions ("+R+") and ("+A+") of Tensors with shapes "+g.shape+" and "+x.shape+" must match."}),L(w===S,function(){return"Error in fused matMul: inner shapes ("+w+") and ("+S+") of Tensors with shapes "+g.shape+" and "+x.shape+" and transposeA="+i+" and transposeB="+l+" must match."});var O,F,N=g.shape.slice(0,-2).concat([E,_]),I=i?g.as3D(C,w,E):g.as3D(C,E,w),U=l?x.as3D(D,_,S):x.as3D(D,S,_);c!=null&&qe(N,(O=Rt(O=M(c,"bias","fused matMul"),g)[0]).shape),v!=null&&(F=M(v,"prelu weights","fused matMul"));var H={a:I,b:U};c!=null&&(H.bias=O),v!=null&&(H.preluActivationWeights=F);var J=[I,U];return G.runKernelFunc(function(ee,ne){var z=ee.fusedBatchMatMul({a:I,b:U,transposeA:i,transposeB:l,bias:O,activation:d,preluActivationWeights:F});return ne([I,U,z]),z},H,function(ee,ne){var z=ne[0],W=ne[1],q=ne[2],re=ag(ee,q,d),ue={};return c!=null&&(ue={bias:function(){return ig(O,re)}}),Object.assign(i||l?!i&&l?{a:function(){return re.matMul(W,!1,!1)},b:function(){return re.matMul(z,!0,!1)}}:i&&!l?{a:function(){return W.matMul(re,!1,!0)},b:function(){return z.matMul(re,!1,!1)}}:{a:function(){return W.matMul(re,!0,!0)},b:function(){return re.matMul(z,!0,!0)}}:{a:function(){return re.matMul(W,!1,!0)},b:function(){return z.matMul(re,!0,!1)}},ue)},"_FusedMatMul",{transposeA:i,transposeB:l,activation:d},J,[!0]).reshape(N)}}),Xz=V({fusedConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,s=i===void 0?"NHWC":i,l=n.dilations,c=l===void 0?[1,1]:l,h=n.dimRoundingMode,d=n.bias,v=n.activation,m=v===void 0?"linear":v,g=n.preluActivationWeights;if(m=m||"linear",rg(G.state.gradientDepth,m)===!1){var x=Sr(e,t,r,a,s,c,h);return d!=null&&(x=je(x,d)),og(x,m,g)}var w=M(e,"x","conv2d"),S=M(t,"filter","conv2d"),E=w,_=!1;w.rank===3&&(_=!0,E=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),L(E.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+E.rank+"."}),L(S.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+S.rank+"."}),h!=null&&L(Mt(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+h+" but got pad "+a+"."}),L(E.shape[3]===S.shape[2],function(){return"Error in conv2d: depth of input ("+E.shape[3]+") must match input depth for filter "+S.shape[2]+"."}),L(zn(r,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),L(s==="NHWC",function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var R,A,C=oo(E.shape,S.shape,r,c,a,h);d!=null&&(R=Rt(R=M(d,"bias","fused conv2d"),w)[0],qe(C.outShape,R.shape)),g!=null&&(A=M(g,"prelu weights","fused conv2d"));var D={x:E,filter:S};d!=null&&(D.bias=R),g!=null&&(D.preluActivationWeights=A);var O=[S,E],F=G.runKernelFunc(function(N,I){var U=N.fusedConv2d({input:E,filter:S,convInfo:C,bias:R,activation:m,preluActivationWeights:A});return I([S,E,U]),U},D,function(N,I){var U=I,H=U[0],J=U[1],ee=U[2],ne=ag(N,ee,m);L(Eu(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var z={};return d!=null&&(z={bias:function(){return ig(R,ne)}}),Object.assign({x:function(){return ME(J.shape,ne,H,r,a)},filter:function(){return Zm(J,ne,H.shape,r,a)}},z)},"FusedConv2D",{convInfo:C,activation:m},O,[!0]);return _?F.as3D(F.shape[1],F.shape[2],F.shape[3]):F}}),$z=V({fusedDepthwiseConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,s=i===void 0?"NHWC":i,l=n.dilations,c=l===void 0?[1,1]:l,h=n.dimRoundingMode,d=n.bias,v=n.activation,m=v===void 0?"linear":v,g=n.preluActivationWeights;if(rg(G.state.gradientDepth,m)===!1){var x=th(e,t,r,a,s,c,h);return d!=null&&(x=je(x,d)),og(x,m,g)}var w=M(e,"x","depthwiseConv2d"),S=M(t,"filter","depthwiseConv2d"),E=w,_=!1;w.rank===3&&(_=!0,E=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),L(E.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+E.rank+"."}),L(S.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+S.rank+"."}),L(E.shape[3]===S.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+E.shape[3]+") must match the inChannels dimension in filter "+S.shape[2]+"."}),c==null&&(c=[1,1]),L(zn(r,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),h!=null&&L(Mt(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+h+" but got pad "+a+"."});var R,A,C=oo(E.shape,S.shape,r,c,a,h,!0);d!=null&&(R=Rt(R=M(d,"bias","fused conv2d"),w)[0],qe(C.outShape,R.shape)),g!=null&&(A=M(g,"prelu weights","fused depthwiseConv2d"));var D={x:E,filter:S};d!=null&&(D.bias=R),g!=null&&(D.preluActivationWeights=A);var O=[S,E],F=G.runKernelFunc(function(N,I){var U=N.fusedDepthwiseConv2D({input:E,filter:S,convInfo:C,bias:R,activation:m,preluActivationWeights:A});return I([S,E,U]),U},D,function(N,I){L(Eu(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var U=I[0],H=I[1],J=I[2],ee=ag(N,J,m),ne={};return d!=null&&(ne={bias:function(){return ig(R,ee)}}),Object.assign({x:function(){return IE(H.shape,ee,U,C)},filter:function(){return FE(H,ee,U.shape,C)}},ne)},"FusedDepthwiseConv2D",{convInfo:C,activation:m},O,[!0]);return _?F.as3D(F.shape[1],F.shape[2],F.shape[3]):F}}),Zz=Object.freeze({matMul:Kz,conv2d:Xz,depthwiseConv2d:$z}),Yz=Object.freeze({image:ng,linalg:Pz,losses:Fz,spectral:xz,fused:Zz,signal:Cz,square:kB,squaredDifference:gE,conv1d:UL,conv2d:Sr,conv3d:HL,depthwiseConv2d:th,separableConv2d:Ym,conv2dTranspose:VL,conv3dTranspose:jL,op:V,batchNormalization2d:uL,batchNormalization3d:sL,batchNormalization4d:lL,batchNormalization:cL,batchNorm:EE,batchNorm2d:fL,batchNorm3d:hL,batchNorm4d:dL,booleanMaskAsync:PL,complex:ln,real:yr,imag:Kr,concat:Gt,concat1d:ZM,concat2d:YM,concat3d:QM,concat4d:JM,split:Lm,matMul:nh,dot:WL,outerProduct:GL,reverse:fl,reverse1d:qL,reverse2d:KL,reverse3d:XL,reverse4d:$L,maxPool:Qt,avgPool:hl,pool:ZL,maxPool3d:YL,avgPool3d:QL,slice:ea,slice1d:JL,slice2d:ez,slice3d:zE,slice4d:tz,abs:NB,acos:MB,acosh:IB,asin:FB,asinh:BB,atan:LB,atanh:zB,ceil:PB,clipByValue:Km,cos:UB,cosh:HB,erf:VB,exp:Jv,expm1:jB,floor:WB,log:GB,log1p:qB,logSigmoid:KB,neg:Mf,reciprocal:XB,round:$B,rsqrt:yE,sigmoid:bE,sign:ZB,isNaN:YB,isInf:QB,isFinite:JB,sin:eL,sinh:tL,softplus:nL,sqrt:rL,step:aL,tan:iL,tanh:oL,all:nz,any:rz,argMax:az,argMin:iz,logSumExp:oz,max:rh,mean:uz,min:sz,moments:lz,sum:UE,prod:cz,equal:TE,equalStrict:DL,greater:OL,greaterEqual:DE,greaterEqualStrict:kL,greaterStrict:NL,less:ML,lessEqual:IL,lessEqualStrict:FL,lessStrict:BL,notEqual:LL,notEqualStrict:zL,add:je,addN:mL,addStrict:gL,atan2:yL,div:Tr,divNoNan:bL,divStrict:xL,floorDiv:RE,maximum:Xm,maximumStrict:wL,minimum:AE,minimumStrict:SL,mod:EL,modStrict:_L,mul:bn,mulStrict:CL,pow:If,powStrict:RL,squaredDifferenceStrict:AL,sub:Xt,subStrict:TL,elu:HE,leakyRelu:fz,prelu:VE,relu:_t,relu6:jE,selu:hz,logicalAnd:eh,logicalNot:pL,logicalOr:_E,logicalXor:vL,where:ro,whereAsync:CE,buffer:Le,print:sI,batchToSpaceND:US,broadcastTo:lI,cast:cI,clone:fI,cumsum:hI,depthToSpace:dI,expandDims:gr,eye:HS,multinomial:pI,oneHot:$v,pad:io,pad1d:vI,pad2d:mI,pad3d:gI,pad4d:yI,rand:bI,randomNormal:xI,randomGamma:wI,randomUniform:VS,reshape:Dr,spaceToBatchND:jS,squeeze:WS,stack:nr,tile:cu,truncatedNormal:SI,unstack:qt,setdiff1dAsync:EI,fill:Jr,linspace:$M,ones:Du,range:Cf,scalar:ge,tensor:hn,tensor1d:Ut,tensor2d:gi,tensor3d:Bm,tensor4d:Mn,tensor5d:qM,tensor6d:KM,variable:XM,zeros:bt,onesLike:PS,zerosLike:Qe,transpose:xi,softmax:Fa,logSoftmax:OI,localResponseNormalization:dz,norm:WE,gather:$m,unsortedSegmentSum:OE,basicLSTMCell:pz,multiRNNCell:vz,movingAverage:mz,stridedSlice:gz,topk:yz,scatterND:bz,fft:Qm,ifft:Ff,rfft:Jm,irfft:GE,sparseToDense:wz,gatherND:Sz,diag:Ez,dropout:_z,hannWindow:eg,hammingWindow:KE,frame:tg,stft:XE,inTopKAsync:Rz});function he(n,e){Array.isArray(n)||(n=[n]),n.forEach(function(t){t!=null&&L(t.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function uv(n,e,t,r){if(t==="linear")return n.linear(e);if(t==="relu")return n.relu(e);if(t==="elu")return n.elu(e);if(t==="relu6")return n.relu6(e);if(t==="prelu")return n.prelu(e,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var Qz=function(n){function e(){var t=n.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new YS(t,G),t}return Nr(e,n),e.prototype.write=function(t,r,a){this.firstUse&&(this.firstUse=!1,le().get("IS_NODE")&&Ef(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:t,dtype:a}),i},e.prototype.move=function(t,r,a,i){this.data.set(t,{values:r,dtype:i})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return we(this,void 0,void 0,function(){return Se(this,function(r){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var r=this.data.get(t),a=r.dtype,i=r.complexTensors;return a==="complex64"?Qv(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),a=r;if(t.dtype==="string")try{a=r.map(function(i){return xf(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Le(t.shape,t.dtype,a)},e.prototype.makeOutput=function(t,r,a){var i=this.write(t,r,a);return G.makeTensorFromDataId(i,r,a,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return we(this,void 0,void 0,function(){var r;return Se(this,function(a){return r=Gr(),t(),[2,{kernelMs:Gr()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,r){var a=this.makeOutput(null,t.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:G.keep(t.clone()),imag:G.keep(r.clone())},a},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(he(t,"slice"),$S(t.shape,r,a)){var i=ZS(r,t.strides),s=_e(a);return hn(this.readSync(t.dataId).subarray(i,i+s),a,t.dtype)}for(var l=Le(a,t.dtype),c=this.bufferSync(t),h=0;h<l.size;++h){var d=l.indexToLoc(h).map(function(v,m){return v+r[m]});l.values[h]=c.get.apply(c,d)}return l.toTensor()},e.prototype.stridedSlice=function(t,r,a,i){he(t,"stridedSlice");var s=Pm(r,a,i);if(s.some(function(g){return g===0}))return hn([],s);for(var l=Le(s,t.dtype),c=this.bufferSync(t),h=0;h<l.size;h++){for(var d=l.indexToLoc(h),v=new Array(d.length),m=0;m<v.length;m++)v[m]=d[m]*i[m]+r[m];l.set.apply(l,[c.get.apply(c,v)].concat(d))}return l.toTensor()},e.prototype.diag=function(t){for(var r=this.readSync(t.dataId),a=Le([t.size,t.size],t.dtype),i=a.values,s=0;s<r.length;s++)i[s*t.size+s]=r[s];return a.toTensor()},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),s=0,l=0;l<t.rank;l++)l!==r&&(i[s++]=t.shape[l]);var c=new Array(t.rank).fill(0),h=t.shape.slice();h[r]=1;var d=new Array(a);for(l=0;l<d.length;l++)c[r]=l,d[l]=this.slice(t,c,h).reshape(i);return d},e.prototype.reverse=function(t,r){he(t,"reverse");for(var a=Le(t.shape,t.dtype),i=this.bufferSync(t),s=function(c){var h=a.indexToLoc(c),d=h.slice();r.forEach(function(v){return d[v]=t.shape[v]-1-d[v]}),a.set.apply(a,[i.get.apply(i,d)].concat(h))},l=0;l<a.size;l++)s(l);return a.toTensor()},e.prototype.concat=function(t,r){var a=this;if(t[0].dtype==="complex64"){var i=t.map(function(g){return yr(g)}),s=t.map(function(g){return Kr(g)});return ln(this.concat(i,r),this.concat(s,r))}var l=t.map(function(g){var x=_e(g.shape.slice(r));return g.as2D(-1,x)}),c=Su(l.map(function(g){return g.shape}),1),h=Le(c,t[0].dtype).values;if(l[0].shape[0]===1){var d=0;l.forEach(function(g){h.set(a.readSync(g.dataId),d),d+=g.size})}else{var v=0;l.forEach(function(g){for(var x=a.readSync(g.dataId),w=0,S=0;S<g.shape[0];++S)for(var E=S*c[1]+v,_=0;_<g.shape[1];++_)h[E+_]=x[w++];v+=g.shape[1]})}var m=Su(t.map(function(g){return g.shape}),r);return hn(h,m,t[0].dtype)},e.prototype.neg=function(t){return he(t,"neg"),this.multiply(ge(-1),t)},e.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,s,l){return{real:a+s,imag:i+l}}):this.broadcastedBinaryOp(t,r,cn(t.dtype,r.dtype),function(a,i){return a+i})},e.prototype.addN=function(t){var r=this;he(t,"addN");for(var a=t.map(function(d){return r.readSync(d.dataId)}),i=Le(t[0].shape,t[0].dtype),s=i.values,l=0;l<t.length;l++)for(var c=a[l],h=0;h<s.length;h++)s[h]+=c[h];return i.toTensor()},e.prototype.softmax=function(t,r){var a=$t([r],t.shape),i=this.max(t,a),s=Ln(i.shape,a),l=this.subtract(t,i.reshape(s)),c=this.exp(l),h=this.sum(c,a).reshape(s);return this.realDivide(c,h)},e.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,s,l){return{real:a-s,imag:i-l}}):this.broadcastedBinaryOp(t,r,cn(t.dtype,r.dtype),function(a,i){return a-i})},e.prototype.pow=function(t,r){return he([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.pow(a,i)})},e.prototype.batchMatMul=function(t,r,a,i){he([t,r],"matMul");for(var s=a?t.shape[1]:t.shape[2],l=a?t.shape[2]:t.shape[1],c=i?r.shape[1]:r.shape[2],h=t.shape[0],d=this.readSync(t.dataId),v=this.readSync(r.dataId),m=a?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],g=m[0],x=m[1],w=m[2],S=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],E=S[0],_=S[1],R=S[2],A=l*c,C=Le([h,l,c],t.dtype),D=C.values,O=this.blockSize,F=0;F<h;F++)for(var N=0;N<l;N+=O)for(var I=0;I<c;I+=O)for(var U=0;U<s;U+=O)for(var H=Math.min(N+O,l),J=Math.min(I+O,c),ee=Math.min(U+O,s),ne=N;ne<H;ne++)for(var z=I;z<J;z++){for(var W=0,q=U;q<ee;q++)W+=d[F*g+ne*x+q*w]*v[q*E+z*_+F*R];D[F*A+(ne*c+z)]+=W}return C.toTensor()},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,s=t.transposeB,l=t.bias,c=t.activation,h=t.preluActivationWeights,d=this.batchMatMul(r,a,i,s);return l&&(d=this.add(d,l)),c&&(d=uv(this,d,c,h)),d},e.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,s,l){return{real:a*s-i*l,imag:a*l+i*s}}):this.broadcastedBinaryOp(t,r,cn(t.dtype,r.dtype),function(a,i){return a*i})},e.prototype.realDivide=function(t,r){return he([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(a,i){return a/i})},e.prototype.floorDiv=function(t,r){return he([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(a,i){return Math.floor(a/i)})},e.prototype.sum=function(t,r){he(t,"sum"),Zn("sum",r,t.rank);for(var a=vn(t.shape,r),i=a[0],s=a[1],l=bt(i,cn(t.dtype,"int32")),c=_e(s),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=0,x=0;x<c;++x)g+=d[m+x];h[v]=g}return l},e.prototype.prod=function(t,r){he(t,"sum");for(var a=vn(t.shape,r),i=a[0],s=a[1],l=bt(i,cn(t.dtype,"int32")),c=_e(s),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=1,x=0;x<c;++x)g*=d[m+x];h[v]=g}return l},e.prototype.unsortedSegmentSum=function(t,r,a){he(t,"unsortedSegmentSum");for(var i=[],s=t.rank-r.rank,l=0;l<s;++l)r=r.expandDims(l+1);for(l=0;l<a;++l){var c=ge(l,"int32"),h=TE(c,r).asType("float32").mul(t).sum(0);i.push(h)}return nr(i)},e.prototype.argMin=function(t,r){he(t,"argMin");var a=[r];Zn("argMin",a,t.rank);for(var i=vn(t.shape,a),s=i[0],l=i[1],c=bt(s,"int32"),h=_e(l),d=this.readSync(c.dataId),v=this.readSync(t.dataId),m=0;m<d.length;++m){for(var g=m*h,x=v[g],w=0,S=0;S<h;++S){var E=v[g+S];E<x&&(x=E,w=S)}d[m]=w}return c},e.prototype.argMax=function(t,r){he(t,"argMax");var a=[r];Zn("argMax",a,t.rank);for(var i=vn(t.shape,a),s=i[0],l=i[1],c=bt(s,"int32"),h=_e(l),d=this.readSync(c.dataId),v=this.readSync(t.dataId),m=0;m<d.length;++m){for(var g=m*h,x=v[g],w=0,S=0;S<h;++S){var E=v[g+S];E>x&&(x=E,w=S)}d[m]=w}return c},e.prototype.cumsum=function(t,r,a,i){if(he(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var s=cn(t.dtype,"int32"),l=bt(t.shape,s),c=this.readSync(l.dataId),h=this.readSync(t.dataId),d=t.shape[t.rank-1],v=i?function(S,E){return S+d-E-1}:function(S,E){return S+E},m=0;m<h.length;m+=d)for(var g=0;g<d;g++){var x=v(m,g);if(g===0)c[x]=a?0:h[x];else{var w=v(m,g-1);c[x]=a?h[w]+c[w]:h[x]+c[w]}}return l},e.prototype.equal=function(t,r){return he([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a===i?1:0})},e.prototype.notEqual=function(t,r){return he([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a!==i?1:0})},e.prototype.less=function(t,r){return he([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<i?1:0})},e.prototype.lessEqual=function(t,r){return he([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<=i?1:0})},e.prototype.greater=function(t,r){return he([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>i?1:0})},e.prototype.greaterEqual=function(t,r){return he([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>=i?1:0})},e.prototype.logicalNot=function(t){he(t,"logicalNot");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,t.shape,"bool")},e.prototype.logicalAnd=function(t,r){return he([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a&&i})},e.prototype.logicalOr=function(t,r){return he([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a||i})},e.prototype.select=function(t,r,a){he([t,r,a],"select");for(var i=this.readSync(t.dataId),s=this.readSync(r.dataId),l=this.readSync(a.dataId),c=bt(r.shape,cn(r.dtype,a.dtype)),h=this.readSync(c.dataId),d=0,v=t.rank===0||t.rank>1||r.rank===1?1:_e(r.shape.slice(1)),m=0;m<i.length;m++)for(var g=0;g<v;g++)i[m]===1?h[d++]=s[m]:h[d++]=l[m];return c},e.prototype.where=function(t){he([t],"where");var r=this.readSync(t.dataId);return jm(t.shape,r)},e.prototype.topk=function(t,r,a){return he(t,"topk"),iE(this.readSync(t.dataId),t.shape,t.dtype,r)},e.prototype.min=function(t,r){he(t,"min"),Zn("min",r,t.rank);for(var a=vn(t.shape,r),i=a[0],s=a[1],l=bt(i,t.dtype),c=_e(s),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var w=d[m+x];w<g&&(g=w)}h[v]=g}return l},e.prototype.minimum=function(t,r){return he([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.min(a,i)})},e.prototype.mod=function(t,r){return he([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var s=a%i;return a<0&&i<0||a>=0&&i>=0?s:(s+i)%i})},e.prototype.max=function(t,r){he(t,"max"),Zn("max",r,t.rank);for(var a=vn(t.shape,r),i=a[0],s=a[1],l=bt(i,t.dtype),c=_e(s),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var w=d[m+x];w>g&&(g=w)}h[v]=g}return l},e.prototype.maximum=function(t,r){return he([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.max(a,i)})},e.prototype.all=function(t,r){he(t,"all"),Zn("all",r,t.rank);for(var a=vn(t.shape,r),i=a[0],s=a[1],l=bt(i,t.dtype),c=_e(s),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var w=d[m+x];g=g&&w}h[v]=g}return l},e.prototype.any=function(t,r){he(t,"any"),Zn("any",r,t.rank);for(var a=vn(t.shape,r),i=a[0],s=a[1],l=bt(i,t.dtype),c=_e(s),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var w=d[m+x];g=g||w}h[v]=g}return l},e.prototype.squaredDifference=function(t,r){return he([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var s=a-i;return s*s})},e.prototype.ceil=function(t){he(t,"ceil");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.floor=function(t){he(t,"floor");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.sign=function(t){he(t,"x");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,t.shape,"float32")},e.prototype.isNaN=function(t){he(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isInf=function(t){he(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isFinite=function(t){he(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.round=function(t){he(t,"round");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var s=Math.floor(r[i]);r[i]-s<.5?a[i]=Math.floor(r[i]):r[i]-s>.5?a[i]=Math.ceil(r[i]):a[i]=s%2==0?s:s+1}return this.makeOutput(a,t.shape,"float32")},e.prototype.exp=function(t){he(t,"exp");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.expm1=function(t){he(t,"expm1");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.log=function(t){he(t,"log");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var s=r[i];a[i]=Math.log(s)}return this.makeOutput(a,t.shape,"float32")},e.prototype.log1p=function(t){he(t,"log1p");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var s=r[i];a[i]=Math.log1p(s)}return this.makeOutput(a,t.shape,"float32")},e.prototype.sqrt=function(t){he(t,"sqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var s=r[i];a[i]=Math.sqrt(s)}return this.makeOutput(a,t.shape,"float32")},e.prototype.rsqrt=function(t){he(t,"rsqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var s=r[i];a[i]=1/Math.sqrt(s)}return this.makeOutput(a,t.shape,"float32")},e.prototype.reciprocal=function(t){he(t,"reciprocal");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){he(t,"relu");for(var r=bt(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),s=0;s<i.length;++s)a[s]=Math.max(0,i[s]);return r},e.prototype.relu6=function(t){he(t,"relu");for(var r=bt(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),s=0;s<i.length;++s)a[s]=Math.min(Math.max(0,i[s]),6);return r},e.prototype.prelu=function(t,r){return he([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return a<0?i*a:a})},e.prototype.elu=function(t){he(t,"elu");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var s=a[i];r[i]=s>=0?s:Math.exp(s)-1}return this.makeOutput(r,t.shape,"float32")},e.prototype.eluDer=function(t,r){he([t,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),s=this.readSync(t.dataId),l=0;l<i.length;++l){var c=i[l];a[l]=c>=1?s[l]:s[l]*(c+1)}return this.makeOutput(a,r.shape,"float32")},e.prototype.selu=function(t){he(t,"selu");for(var r=Gm,a=qm,i=new Float32Array(t.size),s=this.readSync(t.dataId),l=0;l<s.length;++l){var c=s[l];i[l]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(i,t.shape,"float32")},e.prototype.clip=function(t,r,a){he(t,"clip");for(var i=new Float32Array(t.size),s=this.readSync(t.dataId),l=0;l<s.length;++l){var c=s[l];i[l]=c>a?a:c<r?r:c}return this.makeOutput(i,t.shape,"float32")},e.prototype.abs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<t.size;++i){var s=a[2*i],l=a[2*i+1];r[i]=Math.hypot(s,l)}return this.makeOutput(r,t.shape,"float32")},e.prototype.int=function(t){he(t,"int");for(var r=new Int32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,t.shape,"int32")},e.prototype.sigmoid=function(t){he(t,"sigmoid");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,t.shape,"float32")},e.prototype.softplus=function(t){he(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(t.size),i=this.readSync(t.dataId),s=0;s<i.length;++s){var l=i[s]>-r,c=i[s]<r,h=Math.exp(i[s]),d=void 0;d=c?h:l?i[s]:Math.log(1+h),a[s]=d}return this.makeOutput(a,t.shape,"float32")},e.prototype.sin=function(t){he(t,"sin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cos=function(t){he(t,"cos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tan=function(t){he(t,"tan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asin=function(t){he(t,"asin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acos=function(t){he(t,"acos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan=function(t){he(t,"atan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan2=function(t,r){return he([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.atan2(a,i)})},e.prototype.sinh=function(t){he(t,"sinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cosh=function(t){he(t,"cosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tanh=function(t){he(t,"tanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=JN(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asinh=function(t){he(t,"asinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acosh=function(t){he(t,"acosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atanh=function(t){he(t,"atanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.erf=function(t){he(t,"erf");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var s=Math.sign(a[i]),l=Math.abs(a[i]),c=1/(1+.3275911*l);r[i]=s*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(r,t.shape,"float32")},e.prototype.step=function(t,r){r===void 0&&(r=0),he(t,"step");for(var a=new Float32Array(t.size),i=this.readSync(t.dataId),s=0;s<i.length;++s){var l=i[s];isNaN(l)?a[s]=NaN:a[s]=l>0?1:r}return this.makeOutput(a,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,s=t.bias,l=t.activation,c=t.preluActivationWeights,h=this.conv2d(r,a,i);return s&&(h=this.add(h,s)),l&&(h=uv(this,h,l,c)),h},e.prototype.conv2d=function(t,r,a){he([t,r],"conv2d");for(var i=a.filterHeight,s=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,h=a.padInfo.left,d=a.padInfo.top,v=a.dataFormat==="channelsLast",m=Le(a.outShape,t.dtype),g=t.strides[0],x=v?t.strides[1]:t.strides[2],w=v?t.strides[2]:1,S=v?1:t.strides[1],E=m.strides[0],_=v?m.strides[1]:m.strides[2],R=v?m.strides[2]:1,A=v?1:m.strides[1],C=this.readSync(t.dataId),D=this.readSync(r.dataId),O=m.values,F=0;F<a.batchSize;++F)for(var N=F*g,I=F*E,U=0;U<a.outHeight;++U)for(var H=I+U*_,J=U*a.strideHeight-d,ee=0;ee<i;ee++){var ne=J+ee*l;if(!(ne<0||ne>=a.inHeight))for(var z=ee*r.strides[0],W=N+ne*x,q=0;q<a.outWidth;++q)for(var re=H+q*R,ue=q*a.strideWidth-h,B=0;B<s;B++){var X=ue+B*c;if(!(X<0||X>=a.inWidth))for(var oe=W+X*w,de=z+B*r.strides[1],ve=0;ve<a.inChannels;++ve){for(var me=C[oe+ve*S],ye=0;ye<a.outChannels;++ye)O[re+ye*A]+=me*D[de+ye];de+=a.outChannels}}}return m.toTensor()},e.prototype.conv3d=function(t,r,a){for(var i=a.filterDepth,s=a.filterHeight,l=a.filterWidth,c=a.dilationDepth,h=a.dilationHeight,d=a.dilationWidth,v=a.padInfo.front,m=a.padInfo.left,g=a.padInfo.top,x=Le(a.outShape,t.dtype),w=this.readSync(t.dataId),S=this.readSync(r.dataId),E=x.values,_=0;_<a.batchSize;++_)for(var R=_*t.strides[0],A=_*x.strides[0],C=0;C<a.outDepth;++C)for(var D=A+C*x.strides[1],O=C*a.strideDepth-v,F=0;F<i;F++){var N=O+F*c;if(!(N<0||N>=a.inDepth))for(var I=F*r.strides[0],U=R+N*t.strides[1],H=0;H<a.outHeight;++H)for(var J=D+H*x.strides[2],ee=H*a.strideHeight-g,ne=0;ne<s;ne++){var z=ee+ne*h;if(!(z<0||z>=a.inHeight))for(var W=I+ne*r.strides[1],q=U+z*t.strides[2],re=0;re<a.outWidth;++re)for(var ue=J+re*a.outChannels,B=re*a.strideWidth-m,X=0;X<l;X++){var oe=B+X*d;if(!(oe<0||oe>=a.inWidth))for(var de=W+X*r.strides[2],ve=q+oe*a.inChannels,me=de,ye=0;ye<a.inChannels;++ye){for(var De=w[ve+ye],Te=0;Te<a.outChannels;++Te)E[ue+Te]+=De*S[me+Te];me+=a.outChannels}}}}return x.toTensor()},e.prototype.conv2dDerInput=function(t,r,a){he([t,r],"conv2dDerInput");for(var i=Le(a.inShape,"float32"),s=i.values,l=this.readSync(t.dataId),c=this.readSync(r.dataId),h=r.strides,d=h[0],v=h[1],m=h[2],g=a.batchSize,x=a.filterHeight,w=a.filterWidth,S=a.inChannels,E=a.inHeight,_=a.inWidth,R=a.outChannels,A=a.outHeight,C=a.outWidth,D=a.strideHeight,O=a.strideWidth,F=a.dataFormat,N=x-1-a.padInfo.top,I=w-1-a.padInfo.left,U=F==="channelsLast",H=i.strides[0],J=U?i.strides[1]:i.strides[2],ee=U?i.strides[2]:1,ne=U?1:i.strides[1],z=t.strides[0],W=U?t.strides[1]:t.strides[2],q=U?t.strides[2]:1,re=U?1:t.strides[1],ue=0;ue<g;++ue)for(var B=0;B<S;++B)for(var X=0;X<E;++X)for(var oe=X-N,de=Math.max(0,Math.ceil(oe/D)),ve=Math.min(A,(x+oe)/D),me=0;me<_;++me){for(var ye=me-I,De=Math.max(0,Math.ceil(ye/O)),Te=Math.min(C,(w+ye)/O),it=0,Fe=de;Fe<ve;++Fe)for(var Ye=Fe*D-oe,Ve=De;Ve<Te;++Ve)for(var $e=z*ue+W*Fe+q*Ve,lt=d*(x-1-Ye)+v*(w-1-(Ve*O-ye))+m*B,ot=0;ot<R;++ot)it+=l[$e+re*ot]*c[lt+ot];s[H*ue+J*X+ee*me+ne*B]=it}return i.toTensor()},e.prototype.conv3dDerInput=function(t,r,a){for(var i=Le(a.inShape,"float32"),s=i.values,l=i.strides,c=l[0],h=l[1],d=l[2],v=l[3],m=this.readSync(t.dataId),g=t.strides,x=g[0],w=g[1],S=g[2],E=g[3],_=this.readSync(r.dataId),R=r.strides,A=R[0],C=R[1],D=R[2],O=R[3],F=a.batchSize,N=a.filterDepth,I=a.filterHeight,U=a.filterWidth,H=a.inChannels,J=a.inDepth,ee=a.inHeight,ne=a.inWidth,z=a.outChannels,W=a.outDepth,q=a.outHeight,re=a.outWidth,ue=a.strideDepth,B=a.strideHeight,X=a.strideWidth,oe=N-1-a.padInfo.front,de=I-1-a.padInfo.top,ve=U-1-a.padInfo.left,me=0;me<F;++me)for(var ye=0;ye<H;++ye)for(var De=0;De<J;++De)for(var Te=De-oe,it=Math.max(0,Math.ceil(Te/ue)),Fe=Math.min(W,(N+Te)/ue),Ye=0;Ye<ee;++Ye)for(var Ve=Ye-de,$e=Math.max(0,Math.ceil(Ve/B)),lt=Math.min(q,(I+Ve)/B),ot=0;ot<ne;++ot){for(var ar=ot-ve,Un=Math.max(0,Math.ceil(ar/X)),tn=Math.min(re,(U+ar)/X),Ir=0,Hn=it;Hn<Fe;++Hn)for(var Fr=Hn*ue-Te,Er=$e;Er<lt;++Er)for(var It=Er*B-Ve,_r=Un;_r<tn;++_r)for(var lo=x*me+w*Hn+S*Er+E*_r,ua=A*(N-1-Fr)+C*(I-1-It)+D*(U-1-(_r*X-ar))+O*ye,wn=0;wn<z;++wn)Ir+=m[lo+wn]*_[ua+wn];s[c*me+h*De+d*Ye+v*ot+ye]=Ir}return i.toTensor()},e.prototype.conv2dDerFilter=function(t,r,a){he([t,r],"conv2dDerFilter");for(var i=a.strideHeight,s=a.strideWidth,l=a.filterHeight,c=a.filterWidth,h=a.dataFormat==="channelsLast",d=Le(a.filterShape,"float32"),v=a.padInfo.left,m=a.padInfo.top,g=this.bufferSync(t),x=this.bufferSync(r),w=0;w<l;++w)for(var S=Math.max(0,Math.ceil((m-w)/i)),E=Math.min(a.outHeight,(a.inHeight+m-w)/i),_=0;_<c;++_)for(var R=Math.max(0,Math.ceil((v-_)/s)),A=Math.min(a.outWidth,(a.inWidth+v-_)/s),C=0;C<a.inChannels;++C)for(var D=0;D<a.outChannels;++D){for(var O=0,F=0;F<a.batchSize;++F)for(var N=S;N<E;++N)for(var I=w+N*i-m,U=R;U<A;++U){var H=_+U*s-v;O+=h?g.get(F,I,H,C)*x.get(F,N,U,D):g.get(F,C,I,H)*x.get(F,D,N,U)}d.set(O,w,_,C,D)}return d.toTensor()},e.prototype.conv3dDerFilter=function(t,r,a){for(var i=a.strideDepth,s=a.strideHeight,l=a.strideWidth,c=a.filterDepth,h=a.filterHeight,d=a.filterWidth,v=Le(a.filterShape,"float32"),m=v.values,g=v.strides,x=g[0],w=g[1],S=g[2],E=g[3],_=this.readSync(r.dataId),R=r.strides,A=R[0],C=R[1],D=R[2],O=R[3],F=this.readSync(t.dataId),N=t.strides,I=N[0],U=N[1],H=N[2],J=N[3],ee=a.padInfo.front,ne=a.padInfo.left,z=a.padInfo.top,W=0;W<c;++W)for(var q=Math.max(0,Math.ceil((ee-W)/i)),re=Math.min(a.outDepth,(a.inDepth+ee-W)/i),ue=W*x,B=0;B<h;++B)for(var X=Math.max(0,Math.ceil((z-B)/s)),oe=Math.min(a.outHeight,(a.inHeight+z-B)/s),de=B*w+ue,ve=0;ve<d;++ve)for(var me=Math.max(0,Math.ceil((ne-ve)/l)),ye=Math.min(a.outWidth,(a.inWidth+ne-ve)/l),De=ve*S+de,Te=0;Te<a.inChannels;++Te)for(var it=Te*E+De,Fe=0;Fe<a.outChannels;++Fe){for(var Ye=0,Ve=0;Ve<a.batchSize;++Ve)for(var $e=Ve*I,lt=Ve*A,ot=q;ot<re;++ot)for(var ar=(W+ot*i-ee)*U+$e,Un=ot*C+lt,tn=X;tn<oe;++tn)for(var Ir=(B+tn*s-z)*H+ar,Hn=tn*D+Un,Fr=me;Fr<ye;++Fr){var Er=Fr*O+Hn;Ye+=F[(ve+Fr*l-ne)*J+Ir+Te]*_[Er+Fe]}m[it+Fe]=Ye}return v.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,a=t.filter,i=t.convInfo,s=t.bias,l=t.activation,c=t.preluActivationWeights,h=this.depthwiseConv2D(r,a,i);return s&&(h=this.add(h,s)),l&&(h=uv(this,h,l,c)),h},e.prototype.depthwiseConv2D=function(t,r,a){he([t,r],"depthwiseConv2D");for(var i=a.filterHeight,s=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,h=a.padInfo.left,d=a.padInfo.top,v=a.outChannels/a.inChannels,m=Le(a.outShape,t.dtype),g=this.readSync(t.dataId),x=this.readSync(r.dataId),w=m.values,S=0;S<a.batchSize;++S)for(var E=S*t.strides[0],_=S*m.strides[0],R=0;R<a.outHeight;++R)for(var A=_+R*m.strides[1],C=R*a.strideHeight-h,D=0;D<i;++D){var O=C+D*l;if(!(O<0||O>=a.inHeight))for(var F=D*r.strides[0],N=E+O*t.strides[1],I=0;I<a.outWidth;++I)for(var U=A+I*m.strides[2],H=I*a.strideWidth-d,J=0;J<s;++J){var ee=H+J*c;if(!(ee<0||ee>=a.inWidth))for(var ne=F+J*r.strides[1],z=N+ee*a.inChannels,W=U,q=ne,re=0;re<a.inChannels;++re){for(var ue=g[z+re],B=0;B<v;++B)w[W+B]+=ue*x[q+B];W+=v,q+=v}}}return m.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,r,a){he([t,r],"depthwiseConv2DDerInput");for(var i=Le(a.inShape,"float32"),s=i.values,l=i.strides,c=l[0],h=l[1],d=l[2],v=this.readSync(t.dataId),m=t.strides,g=m[0],x=m[1],w=m[2],S=this.readSync(r.dataId),E=r.strides,_=E[0],R=E[1],A=E[2],C=a.batchSize,D=a.filterHeight,O=a.filterWidth,F=a.inChannels,N=a.inHeight,I=a.inWidth,U=a.outChannels,H=a.outHeight,J=a.outWidth,ee=a.strideHeight,ne=a.strideWidth,z=D-1-a.padInfo.top,W=O-1-a.padInfo.left,q=U/F,re=0;re<C;++re)for(var ue=0;ue<F;++ue)for(var B=0;B<N;++B)for(var X=B-z,oe=Math.max(0,Math.ceil(X/ee)),de=Math.min(H,(D+X)/ee),ve=0;ve<I;++ve){for(var me=ve-W,ye=Math.max(0,Math.ceil(me/ne)),De=Math.min(J,(O+me)/ne),Te=0,it=oe;it<de;++it)for(var Fe=it*ee-X,Ye=ye;Ye<De;++Ye)for(var Ve=g*re+x*it+w*Ye,$e=_*(D-1-Fe)+R*(O-1-(Ye*ne-me))+A*ue,lt=0;lt<q;++lt)Te+=v[Ve+(ue*q+lt)]*S[$e+lt];s[c*re+h*B+d*ve+ue]=Te}return i.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){he([t,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,s=a.strideWidth,l=a.filterHeight,c=a.filterWidth,h=Le(a.filterShape,"float32"),d=a.padInfo.left,v=a.padInfo.top,m=a.outChannels/a.inChannels,g=this.bufferSync(t),x=this.bufferSync(r),w=0;w<l;++w)for(var S=Math.max(0,Math.ceil((v-w)/i)),E=Math.min(a.outHeight,(a.inHeight+v-w)/i),_=0;_<c;++_)for(var R=Math.max(0,Math.ceil((d-_)/s)),A=Math.min(a.outWidth,(a.inWidth+d-_)/s),C=0;C<a.outChannels;++C){for(var D=Math.trunc(C/m),O=C%m,F=0,N=0;N<a.batchSize;++N)for(var I=S;I<E;++I)for(var U=w+I*i-v,H=R;H<A;++H){var J=_+H*s-d;F+=g.get(N,U,J,D)*x.get(N,I,H,C)}h.set(F,w,_,D,O)}return h.toTensor()},e.prototype.tile=function(t,r){return he(t,"tile"),aE(this.bufferSync(t),r)},e.prototype.pad=function(t,r,a){he(t,"pad");var i=r.map(function(m,g){return m[0]+t.shape[g]+m[1]}),s=r.map(function(m){return m[0]}),l=this.bufferSync(t),c=Le(i,t.dtype);a!==0&&c.values.fill(a);for(var h=0;h<t.size;h++){var d=l.indexToLoc(h),v=d.map(function(m,g){return m+s[g]});c.set.apply(c,[l.get.apply(l,d)].concat(v))}return c.toTensor()},e.prototype.transpose=function(t,r){he(t,"transpose");for(var a=new Array(t.rank),i=0;i<a.length;i++)a[i]=t.shape[r[i]];var s=this.readSync(t.dataId),l=Le(a,t.dtype),c=this.bufferSync(t);for(i=0;i<t.size;++i){for(var h=c.indexToLoc(i),d=new Array(h.length),v=0;v<d.length;v++)d[v]=h[r[v]];var m=l.locToIndex(d);l.values[m]=s[i]}return l.toTensor()},e.prototype.gather=function(t,r,a){he([t,r],"gather");var i=t.shape.slice(),s=this.readSync(r.dataId);i[a]=s.length;for(var l=Le(i,t.dtype),c=this.bufferSync(t),h=0;h<l.size;++h){var d=l.indexToLoc(h),v=d.slice();v[a]=s[d[a]];var m=c.locToIndex(v);l.values[h]=c.values[m]}return l.toTensor()},e.prototype.batchToSpaceND=function(t,r,a){he([t],"batchToSpaceND");var i=r.reduce(function(v,m){return v*m}),s=Rf(t.shape,r,i),l=Af(s.length,r.length),c=Tf(t.shape,r,i),h=GS(a,r.length),d=qS(c,a,r.length);return t.reshape(s).transpose(l).reshape(c).slice(h,d)},e.prototype.spaceToBatchND=function(t,r,a){he([t],"spaceToBatchND");var i=r.reduce(function(m,g){return m*g}),s=[[0,0]];s.push.apply(s,a);for(var l=1+r.length;l<t.shape.length;++l)s.push([0,0]);var c=t.pad(s),h=Rf(c.shape,r,i,!1),d=Af(h.length,r.length,!1),v=Tf(c.shape,r,i,!1);return c.reshape(h).transpose(d).reshape(v)},e.prototype.pool=function(t,r,a){he(t,"pool");for(var i=r.strideHeight,s=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.top,m=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(t.dataId),w=Le(r.outShape,t.dtype),S=w.values,E=r.outShape[1]*r.outShape[2]*r.outShape[3],_=r.outShape[2]*r.outShape[3],R=r.outShape[3],A=0;A<r.batchSize;++A)for(var C=A*E,D=A*t.strides[0],O=0;O<r.inChannels;++O)for(var F=0;F<r.outHeight;++F)for(var N=F*i-v,I=Math.max(0,N),U=Math.min(r.inHeight,h+N),H=C+F*_,J=0;J<r.outWidth;++J){for(var ee=J*s-m,ne=Math.max(0,ee),z=Math.min(r.inWidth,d+ee),W=g,q=0,re=0,ue=I;ue<U;ue+=l){for(var B=D+ue*t.strides[1],X=ne;X<z;X+=c){var oe=x[B+X*t.strides[2]+O];a==="max"&&oe>W?W=oe:a==="avg"&&(q+=oe,re++)}if(isNaN(W))break}S[H+J*R+O]=a==="avg"?q/re:W}return w.toTensor()},e.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},e.prototype.maxPoolPositions=function(t,r){for(var a=Le(r.outShape,"int32"),i=r.strideHeight,s=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(t),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var S=0;S<r.outHeight;++S){for(var E=S*i-v,_=E;_<0;)_+=l;for(var R=Math.min(r.inHeight,h+E),A=0;A<r.outWidth;++A){for(var C=A*s-m,D=C;D<0;)D+=c;for(var O=Math.min(r.inWidth,d+C),F=Number.NEGATIVE_INFINITY,N=-1,I=_;I<R;I+=l)for(var U=I-E,H=D;H<O;H+=c){var J=H-C,ee=g.get(x,I,H,w);ee>F&&(F=ee,N=U*d+J)}a.set(N,x,S,A,w)}}return a.toTensor()},e.prototype.maxPoolBackprop=function(t,r,a,i){he([r,a],"maxPoolBackprop");for(var s=this.maxPoolPositions(r,i),l=i.strideHeight,c=i.strideWidth,h=i.dilationHeight,d=i.dilationWidth,v=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=m-1-i.padInfo.left,x=v-1-i.padInfo.top,w=Le(r.shape,"float32"),S=this.bufferSync(s),E=this.bufferSync(t),_=0;_<i.batchSize;++_)for(var R=0;R<i.inChannels;++R)for(var A=0;A<i.inHeight;++A)for(var C=0;C<i.inWidth;++C){for(var D=A-x,O=C-g,F=0,N=0;N<v;N+=h){var I=(D+N)/l;if(!(I<0||I>=i.outHeight||Math.floor(I)!==I))for(var U=0;U<m;U+=d){var H=(O+U)/c;if(!(H<0||H>=i.outWidth||Math.floor(H)!==H)){var J=v*m-1-S.get(_,I,H,R)===N*m+U?1:0;J!==0&&(F+=E.get(_,I,H,R)*J)}}}w.set(F,_,A,C,R)}return w.toTensor()},e.prototype.avgPoolBackprop=function(t,r,a){he([t,r],"avgPoolBackprop");for(var i=a.strideHeight,s=a.strideWidth,l=a.filterHeight,c=a.filterWidth,h=a.dilationHeight,d=a.dilationWidth,v=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=m-1-a.padInfo.left,x=v-1-a.padInfo.top,w=Le(r.shape,"float32"),S=1/(l*c),E=this.bufferSync(t),_=0;_<a.batchSize;++_)for(var R=0;R<a.inChannels;++R)for(var A=0;A<a.inHeight;++A)for(var C=0;C<a.inWidth;++C){for(var D=A-x,O=C-g,F=0,N=0;N<v;N+=h){var I=(D+N)/i;if(!(I<0||I>=a.outHeight||Math.floor(I)!==I))for(var U=0;U<m;U+=d){var H=(O+U)/s;H<0||H>=a.outWidth||Math.floor(H)!==H||(F+=E.get(_,I,H,R))}}w.set(F*S,_,A,C,R)}return w.toTensor()},e.prototype.pool3d=function(t,r,a){he(t,"pool3d");for(var i=r.strideDepth,s=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,h=r.dilationHeight,d=r.dilationWidth,v=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,x=r.padInfo.front,w=r.padInfo.top,S=r.padInfo.left,E=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=this.readSync(t.dataId),R=Le(r.outShape,t.dtype),A=R.values,C=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[2]*r.outShape[3]*r.outShape[4],O=r.outShape[3]*r.outShape[4],F=r.outShape[4],N=0;N<r.batchSize;++N)for(var I=N*C,U=N*t.strides[0],H=0;H<r.inChannels;++H)for(var J=0;J<r.outDepth;++J){for(var ee=J*i-x,ne=ee;ne<0;)ne+=c;for(var z=Math.min(r.inDepth,v+ee),W=I+J*D,q=0;q<r.outHeight;++q){for(var re=q*s-w,ue=re;ue<0;)ue+=h;for(var B=Math.min(r.inHeight,m+re),X=W+q*O,oe=0;oe<r.outWidth;++oe){for(var de=oe*l-S,ve=de;ve<0;)ve+=d;for(var me=Math.min(r.inWidth,g+de),ye=X+oe*F,De=E,Te=0,it=0,Fe=ne;Fe<z;Fe+=c){for(var Ye=U+Fe*t.strides[1],Ve=ue;Ve<B;Ve+=h){for(var $e=Ye+Ve*t.strides[2],lt=ve;lt<me;lt+=d){var ot=_[$e+lt*t.strides[3]+H];if(a==="max"&&ot>De?De=ot:a==="avg"&&(Te+=ot,it++),isNaN(De))break}if(isNaN(De))break}if(isNaN(De))break}A[ye+H]=a==="avg"?Te/it:De}}}return R.toTensor()},e.prototype.avgPool3d=function(t,r){return he(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,r,a){he([t,r],"avgPool3dBackprop");for(var i=a.strideDepth,s=a.strideHeight,l=a.strideWidth,c=a.filterDepth,h=a.filterHeight,d=a.filterWidth,v=a.dilationDepth,m=a.dilationHeight,g=a.dilationWidth,x=a.effectiveFilterDepth,w=a.effectiveFilterHeight,S=a.effectiveFilterWidth,E=x-1-a.padInfo.front,_=S-1-a.padInfo.left,R=w-1-a.padInfo.top,A=Le(r.shape,"float32"),C=1/(c*h*d),D=this.bufferSync(t),O=0;O<a.batchSize;++O)for(var F=0;F<a.inChannels;++F)for(var N=0;N<a.inDepth;++N)for(var I=0;I<a.inHeight;++I)for(var U=0;U<a.inWidth;++U){for(var H=N-E,J=I-R,ee=U-_,ne=0,z=0;z<x;z+=v){var W=(H+z)/i;if(!(W<0||W>=a.outDepth||Math.floor(W)!==W))for(var q=0;q<w;q+=m){var re=(J+q)/s;if(!(re<0||re>=a.outHeight||Math.floor(re)!==re))for(var ue=0;ue<S;ue+=g){var B=(ee+ue)/l;B<0||B>=a.outWidth||Math.floor(B)!==B||(ne+=D.get(O,W,re,B,F))}}}A.set(ne*C,O,N,I,U,F)}return A.toTensor()},e.prototype.maxPool3d=function(t,r){return he(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,r){for(var a=Le(r.outShape,"int32"),i=r.strideDepth,s=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,h=r.dilationHeight,d=r.dilationWidth,v=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,x=r.padInfo.front,w=r.padInfo.top,S=r.padInfo.left,E=this.bufferSync(t),_=0;_<r.batchSize;++_)for(var R=0;R<r.inChannels;++R)for(var A=0;A<r.outDepth;++A){for(var C=A*i-x,D=C;D<0;)D+=c;for(var O=Math.min(r.inDepth,v+C),F=0;F<r.outHeight;++F){for(var N=F*s-w,I=N;I<0;)I+=h;for(var U=Math.min(r.inHeight,m+N),H=0;H<r.outWidth;++H){for(var J=H*l-S,ee=J;ee<0;)ee+=d;for(var ne=Math.min(r.inWidth,g+J),z=Number.NEGATIVE_INFINITY,W=-1,q=D;q<O;q+=c)for(var re=q-C,ue=I;ue<U;ue+=h)for(var B=ue-N,X=ee;X<ne;X+=d){var oe=X-J,de=E.get(_,q,ue,X,R);de>=z&&(z=de,W=re*m*g+B*m+oe)}a.set(W,_,A,F,H,R)}}}return a.toTensor()},e.prototype.maxPool3dBackprop=function(t,r,a,i){he([r,a],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(r,i),l=i.strideDepth,c=i.strideHeight,h=i.strideWidth,d=i.dilationDepth,v=i.dilationHeight,m=i.dilationWidth,g=i.effectiveFilterDepth,x=i.effectiveFilterHeight,w=i.effectiveFilterWidth,S=g-1-i.padInfo.front,E=w-1-i.padInfo.left,_=x-1-i.padInfo.top,R=Le(r.shape,"float32"),A=this.bufferSync(s),C=this.bufferSync(t),D=0;D<i.batchSize;++D)for(var O=0;O<i.inChannels;++O)for(var F=0;F<i.inDepth;++F)for(var N=0;N<i.inHeight;++N)for(var I=0;I<i.inWidth;++I){for(var U=F-S,H=N-_,J=I-E,ee=0,ne=0;ne<g;ne+=d){var z=(U+ne)/l;if(!(z<0||z>=i.outDepth||Math.floor(z)!==z))for(var W=0;W<x;W+=v){var q=(H+W)/c;if(!(q<0||q>=i.outHeight||Math.floor(q)!==q))for(var re=0;re<w;re+=m){var ue=(J+re)/h;if(!(ue<0||ue>=i.outWidth||Math.floor(ue)!==ue)){var B=g*x*w-1-A.get(D,z,q,ue,O)===ne*x*w+W*w+re?1:0;B!==0&&(ee+=C.get(D,z,q,ue,O)*B)}}}}R.set(ee,D,F,N,I,O)}return R.toTensor()},e.prototype.cast=function(t,r){return eE(t,r,this)},e.prototype.reshape=function(t,r){return Yv(t,r)},e.prototype.avgPool=function(t,r){return he(t,"avgPool"),this.pool(t,r,"avg").toFloat()},e.prototype.resizeBilinear=function(t,r,a,i){he(t,"resizeBilinear");for(var s=t.shape,l=s[0],c=s[1],h=s[2],d=s[3],v=this.readSync(t.dataId),m=new Float32Array(_e([l,r,a,d])),g=[i&&r>1?c-1:c,i&&a>1?h-1:h],x=[i&&r>1?r-1:r,i&&a>1?a-1:a],w=0,S=g[0]/x[0],E=g[1]/x[1],_=0;_<l;_++)for(var R=0;R<r;R++)for(var A=S*R,C=Math.floor(A),D=A-C,O=Math.min(c-1,Math.ceil(A)),F=_*t.strides[0]+C*t.strides[1],N=_*t.strides[0]+O*t.strides[1],I=0;I<a;I++)for(var U=E*I,H=Math.floor(U),J=U-H,ee=Math.min(h-1,Math.ceil(U)),ne=F+H*t.strides[2],z=N+H*t.strides[2],W=F+ee*t.strides[2],q=N+ee*t.strides[2],re=0;re<d;re++){var ue=v[ne+re],B=v[z+re],X=ue+(v[W+re]-ue)*J,oe=X+(B+(v[q+re]-B)*J-X)*D;m[w++]=oe}return hn(m,[l,r,a,d])},e.prototype.resizeBilinearBackprop=function(t,r,a){he([t,r],"resizeBilinearBackprop");for(var i=r.shape,s=i[0],l=i[1],c=i[2],h=i[3],d=t.shape,v=d[1],m=d[2],g=new Float32Array(s*l*c*h),x=[a&&v>1?l-1:l,a&&m>1?c-1:c],w=[a&&v>1?v-1:v,a&&m>1?m-1:m],S=x[0]/w[0],E=x[1]/w[1],_=this.readSync(t.dataId),R=0,A=0;A<s;A++)for(var C=A*r.strides[0],D=0;D<v;D++)for(var O=D*S,F=Math.floor(O),N=Math.min(Math.ceil(O),l-1),I=C+F*r.strides[1],U=C+N*r.strides[1],H=O-F,J=1-H,ee=0;ee<m;ee++)for(var ne=ee*E,z=Math.floor(ne),W=Math.min(Math.ceil(ne),c-1),q=ne-z,re=1-q,ue=I+z*r.strides[2],B=I+W*r.strides[2],X=U+z*r.strides[2],oe=U+W*r.strides[2],de=J*re,ve=J*q,me=H*re,ye=H*q,De=0;De<h;De++){var Te=_[R++];g[ue+De]+=Te*de,g[B+De]+=Te*ve,g[X+De]+=Te*me,g[oe+De]+=Te*ye}return Mn(g,[s,c,l,h],r.dtype)},e.prototype.resizeNearestNeighbor=function(t,r,a,i){he(t,"resizeNearestNeighbor");for(var s=t.shape,l=s[0],c=s[1],h=s[2],d=s[3],v=this.readSync(t.dataId),m=new Float32Array(l*r*a*d),g=[i&&r>1?c-1:c,i&&a>1?h-1:h],x=[i&&r>1?r-1:r,i&&a>1?a-1:a],w=g[0]/x[0],S=g[1]/x[1],E=0,_=0;_<l;_++)for(var R=_*t.strides[0],A=0;A<r;A++)for(var C=w*A,D=R+Math.min(c-1,i?Math.round(C):Math.floor(C))*t.strides[1],O=0;O<a;O++)for(var F=S*O,N=D+Math.min(h-1,i?Math.round(F):Math.floor(F))*t.strides[2],I=0;I<d;I++){var U=v[N+I];m[E++]=U}return hn(m,[l,r,a,d],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){he([t,r],"resizeNearestNeighborBackprop");for(var i=r.shape,s=i[0],l=i[1],c=i[2],h=i[3],d=t.shape,v=d[1],m=d[2],g=new Float32Array(s*l*c*h),x=this.readSync(t.dataId),w=[a&&v>1?l-1:l,a&&m>1?c-1:c],S=[a&&v>1?v-1:v,a&&m>1?m-1:m],E=w[0]/S[0],_=w[1]/S[1],R=1/E,A=1/_,C=2*Math.ceil(R)+2,D=2*Math.ceil(A)+2,O=0;O<s;O++)for(var F=O*r.strides[0],N=0;N<l;N++)for(var I=F+N*r.strides[1],U=Math.floor(N*R),H=Math.floor(U-C/2),J=0;J<c;J++)for(var ee=I+J*r.strides[2],ne=Math.floor(J*A),z=Math.floor(ne-D/2),W=0;W<h;W++){for(var q=0,re=0;re<C;re++){var ue=re+H;if(!(ue<0||ue>=v)){var B=F+ue*t.strides[1],X=ue*E;if(N===Math.min(l-1,a?Math.round(X):Math.floor(X)))for(var oe=0;oe<D;oe++){var de=oe+z;if(!(de<0||de>=m)){var ve=B+de*t.strides[2],me=de*_;J===Math.min(c-1,a?Math.round(me):Math.floor(me))&&(q+=x[ve+W])}}}}g[ee+W]=q}return Mn(g,r.shape,r.dtype)},e.prototype.batchNormalization=function(t,r,a,i,s,l){he([t,r,a,s,l],"batchNorm");for(var c=this.readSync(t.dataId),h=this.readSync(r.dataId),d=this.readSync(a.dataId),v=s?this.readSync(s.dataId):new Float32Array([1]),m=l?this.readSync(l.dataId):new Float32Array([0]),g=new Float32Array(c.length),x=m.length,w=v.length,S=d.length,E=h.length,_=0,R=0,A=0,C=0,D=0;D<c.length;++D)g[D]=m[_++]+(c[D]-h[R++])*v[A++]/Math.sqrt(d[C++]+i),_>=x&&(_=0),R>=E&&(R=0),A>=w&&(A=0),C>=S&&(C=0);return Mn(g,t.shape)},e.prototype.localResponseNormalization4D=function(t,r,a,i,s){he(t,"localResponseNormalization4D");var l=t.shape[3],c=l-1,h=this.readSync(t.dataId),d=t.size,v=new Float32Array(d);function m(S){for(var E=S%l,_=S-E+Math.max(0,E-r),R=S-E+Math.min(E+r,c),A=0;_<=R;_++){var C=h[_];A+=C*C}return A}for(var g=0;g<d;g++){var x=m(g),w=h[g]*Math.pow(a+i*x,-s);v[g]=w}return Mn(v,t.shape)},e.prototype.LRNGrad=function(t,r,a,i,s,l,c){he(t,"LRNGrad");for(var h=t.shape[3],d=this.readSync(t.dataId),v=this.readSync(r.dataId),m=this.readSync(a.dataId),g=new Float32Array(t.size),x=t.size,w=0;w<x;w++){for(var S=w%h,E=w-S+Math.max(0,S-i),_=w-S+Math.min(h,S+i+1),R=0,A=E;A<_;A++)R+=Math.pow(v[A],2);for(R=l*R+s,A=E;A<_;A++){var C=-2*l*c*v[A]*m[w]/R;w===A&&(C+=Math.pow(R,-c)),C*=d[w],g[A]+=C}}return Mn(g,t.shape)},e.prototype.multinomial=function(t,r,a,i){he(t,"multinomial");for(var s=r?t:Fa(t),l=s.shape[0],c=s.shape[1],h=bt([l,a],"int32"),d=this.readSync(h.dataId),v=this.readSync(s.dataId),m=0;m<l;++m){var g=m*c,x=new Float32Array(c-1);x[0]=v[g];for(var w=1;w<x.length;++w)x[w]=x[w-1]+v[g+w];for(var S=Yf(i.toString()),E=m*a,_=0;_<a;++_){var R=S();d[E+_]=x.length;for(var A=0;A<x.length;A++)if(R<x[A]){d[E+_]=A;break}}}return h},e.prototype.oneHot=function(t,r,a,i){he(t,"oneHot");var s=new Float32Array(t.size*r);s.fill(i);for(var l=this.readSync(t.dataId),c=0;c<t.size;++c)l[c]>=0&&l[c]<r&&(s[c*r+l[c]]=a);return gi(s,[t.size,r],"int32")},e.prototype.nonMaxSuppression=function(t,r,a,i,s){return he(t,"nonMaxSuppression"),Hm(this.readSync(t.dataId),this.readSync(r.dataId),a,i,s)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,r){for(var a=t.shape[0],i=t.shape[1],s=Le(t.shape,"float32"),l=Le(t.shape,"float32"),c=yr(t).as2D(a,i),h=Kr(t).as2D(a,i),d=0;d<a;d++)for(var v=c.slice([d,0],[1,i]),m=h.slice([d,0],[1,i]),g=ln(v,m),x=this.readSync(this.fftImpl(g,r).dataId),w=0;w<i;w++){var S=ww(x,w);s.values[d*i+w]=S.real,l.values[d*i+w]=S.imag}return ln(s.toTensor(),l.toTensor()).as2D(a,i)},e.prototype.fftImpl=function(t,r){var a=t.as1D(),i=a.size;if(this.isExponentOf2(i)){var s=this.fftRadix2(a,i,r).as2D(t.shape[0],t.shape[1]);return r&&(s=ln(yr(s).div(ge(i)),Kr(s).div(ge(i)))),s}var l=this.readSync(t.dataId),c=function(h){for(var d=new Float32Array(h.length/2),v=new Float32Array(h.length/2),m=0;m<h.length;m+=2)d[m/2]=h[m],v[m/2]=h[m+1];return{real:d,imag:v}}(this.fourierTransformByMatmul(l,i,r));return ln(c.real,c.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,r,a){if(r===1)return t;var i=this.readSync(t.dataId),s=r/2,l=function(E){for(var _=Math.ceil(E.length/4),R=new Float32Array(_),A=new Float32Array(_),C=0;C<E.length;C+=4)R[Math.floor(C/4)]=E[C],A[Math.floor(C/4)]=E[C+1];return{real:R,imag:A}}(i),c=ln(l.real,l.imag).as1D(),h=function(E){for(var _=Math.floor(E.length/4),R=new Float32Array(_),A=new Float32Array(_),C=2;C<E.length;C+=4)R[Math.floor(C/4)]=E[C],A[Math.floor(C/4)]=E[C+1];return{real:R,imag:A}}(i),d=ln(h.real,h.imag).as1D();c=this.fftRadix2(c,s,a),d=this.fftRadix2(d,s,a);var v=function(E,_){for(var R=new Float32Array(E/2),A=new Float32Array(E/2),C=0;C<Math.ceil(E/2);C++){var D=(_?2:-2)*Math.PI*(C/E);R[C]=Math.cos(D),A[C]=Math.sin(D)}return{real:R,imag:A}}(r,a),m=ln(v.real,v.imag).mul(d),g=c.add(m),x=c.sub(m),w=yr(g).concat(yr(x)),S=Kr(g).concat(Kr(x));return ln(w,S).as1D()},e.prototype.fourierTransformByMatmul=function(t,r,a){for(var i=new Float32Array(2*r),s=0;s<r;s++){for(var l=0,c=0,h=0;h<r;h++){var d=NI(s*h,r,a),v=ww(t,h);l+=v.real*d.real-v.imag*d.imag,c+=v.real*d.imag+v.imag*d.real}a&&(l/=r,c/=r),kI(i,l,c,s)}return i},e.prototype.depthToSpace=function(t,r,a){L(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),L(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=t.shape[0],s=t.shape[1],l=t.shape[2],c=t.shape[3],h=s*r,d=l*r,v=c/(r*r),m=this.readSync(t.dataId),g=new Float32Array(i*h*d*v),x=0,w=0;w<i;++w)for(var S=0;S<h;++S)for(var E=Math.floor(S/r),_=S%r,R=0;R<d;++R)for(var A=Math.floor(R/r),C=(_*r+R%r)*v,D=0;D<v;++D){var O=D+C+c*(A+l*(E+s*w));g[x++]=m[O]}return Mn(g,[i,h,d,v])},e.prototype.broadcastedBinaryOp=function(t,r,a,i){var s=qe(t.shape,r.shape),l=Le(s,a),c=this.readSync(t.dataId),h=this.readSync(r.dataId),d=di(t.shape,s),v=di(r.shape,s),m=l.values;if(d.length+v.length===0)for(var g=0;g<m.length;++g)m[g]=i(c[g%c.length],h[g%h.length]);else{var x=this.bufferSync(t),w=this.bufferSync(r),S=function(E){var _=l.indexToLoc(E),R=_.slice(-t.rank);d.forEach(function(O){return R[O]=0});var A=x.locToIndex(R),C=_.slice(-r.rank);v.forEach(function(O){return C[O]=0});var D=w.locToIndex(C);m[E]=i(c[A],h[D])};for(g=0;g<m.length;++g)S(g)}return l.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,r,a){var i=qe(t.shape,r.shape),s=Le(i,"float32"),l=Le(i,"float32"),c=this.readSync(t.dataId),h=this.readSync(r.dataId),d=di(t.shape,i),v=di(r.shape,i),m=s.values,g=l.values;if(d.length+v.length===0)for(var x=0;x<m.length;x++){var w=x%c.length,S=x%h.length,E=a(c[2*w],c[2*w+1],h[2*S],h[2*S+1]);m[x]=E.real,g[x]=E.imag}else{var _=this.bufferSync(this.data.get(t.dataId).complexTensors.real),R=this.bufferSync(this.data.get(r.dataId).complexTensors.real),A=function(C){var D=s.indexToLoc(C),O=D.slice(-t.rank);d.forEach(function(H){return O[H]=0});var F=_.locToIndex(O),N=D.slice(-r.rank);v.forEach(function(H){return N[H]=0});var I=R.locToIndex(N),U=a(c[2*F],c[2*F+1],h[2*I],h[2*I+1]);m[C]=U.real,g[C]=U.imag};for(x=0;x<m.length;x++)A(x)}return this.complex(s.toTensor(),l.toTensor())},e.prototype.split=function(t,r,a){return rE(t,r,a)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,r,a,i,s,l){for(var c=t.shape,h=c[0],d=c[1],v=c[2],m=c[3],g=r.shape[0],x=i[0],w=i[1],S=Le([g,x,w,m],"float32"),E=this.readSync(r.dataId),_=this.readSync(a.dataId),R=this.readSync(t.dataId),A=t.strides,C=S.strides,D=0;D<g;D++){var O=4*D,F=E[O],N=E[O+1],I=E[O+2],U=E[O+3],H=_[D];if(!(H>=h))for(var J=x>1?(I-F)*(d-1)/(x-1):0,ee=w>1?(U-N)*(v-1)/(w-1):0,ne=0;ne<x;ne++){var z=x>1?F*(d-1)+ne*J:.5*(F+I)*(d-1);if(z<0||z>d-1)for(var W=0;W<w;W++)for(var q=0;q<m;q++){var re=q+W*C[2]+ne*C[1]+D*C[0];S.values[re]=l}else if(s==="bilinear"){var ue=Math.floor(z),B=Math.ceil(z),X=z-ue;for(W=0;W<w;W++)if((Fe=w>1?N*(v-1)+W*ee:.5*(N+U)*(v-1))<0||Fe>v-1)for(q=0;q<m;q++)re=q+W*C[2]+ne*C[1]+D*C[0],S.values[re]=l;else{var oe=Math.floor(Fe),de=Math.ceil(Fe),ve=Fe-oe;for(q=0;q<m;q++){var me=R[re=q+oe*A[2]+ue*A[1]+H*A[0]],ye=R[re=q+de*A[2]+ue*A[1]+H*A[0]],De=R[re=q+oe*A[2]+B*A[1]+H*A[0]],Te=me+(ye-me)*ve,it=De+(R[re=q+de*A[2]+B*A[1]+H*A[0]]-De)*ve;re=q+W*C[2]+ne*C[1]+D*C[0],S.values[re]=Te+(it-Te)*X}}}else for(W=0;W<w;++W){var Fe;if((Fe=w>1?N*(v-1)+W*ee:.5*(N+U)*(v-1))<0||Fe>v-1)for(q=0;q<m;q++)re=q+W*C[2]+ne*C[1]+D*C[0],S.values[re]=l;else{var Ye=Math.round(Fe),Ve=Math.round(z);for(q=0;q<m;q++){var $e=q+Ye*A[2]+Ve*A[1]+H*A[0],lt=q+W*C[2]+ne*C[1]+D*C[0];S.values[lt]=R[$e]}}}}}return S.toTensor()},e.prototype.sparseToDense=function(t,r,a,i){var s=Df(0,t,a),l=s.sliceRank,c=s.numUpdates,h=s.sliceSize,d=s.strides,v=s.outputSize;return this.scatter(t,r,a,v,h,c,l,d,i,!1)},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],s=KS(t,r),l=s[0],c=s[1],h=s[2],d=s[3];if(c===0)return hn([],l,t.dtype);for(var v=new Gs([c,h],t.dtype),m=this.readSync(r.dataId),g=this.readSync(t.dataId),x=0;x<c;x++){for(var w=[],S=0,E=0;E<i;E++){var _=m[x*i+E];S+=_*d[E],w.push(_)}if(S<0||S>=t.size/h)throw new Error("Invalid indices: "+w+" does not index into "+t.shape);for(var R=0;R<h;R++)v.values[x*h+R]=g[S*h+R]}return v.toTensor().reshape(l)},e.prototype.scatterND=function(t,r,a){var i=Df(0,t,a),s=i.sliceRank,l=i.numUpdates,c=i.sliceSize,h=i.strides,d=i.outputSize,v=ge(0);return this.scatter(t,r,a,d,c,l,s,h,v,!0)},e.prototype.fill=function(t,r,a){var i=bf(a=a||ol(r),_e(t));return i.fill(r),G.makeTensor(i,t,a,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var r=bf(t.dtype,_e(t.shape));return this.makeOutput(r,t.shape,t.dtype)},e.prototype.linspace=function(t,r,a){return tE(t,r,a)},e.prototype.scatter=function(t,r,a,i,s,l,c,h,d,v){var m=[i/s,s],g=this.readSync(t.dataId),x=this.readSync(r.dataId);if(i===0)return hn([],a,r.dtype);var w=new Gs(m,r.dtype);w.values.fill(this.readSync(d.dataId)[0]);for(var S=0;S<l;S++){for(var E=[],_=0,R=0;R<c;R++){var A=g[S*c+R];E.push(A),_+=A*h[R]}if(_<0||_>=i/s)throw new Error("Invalid indices: "+E+" does not index into "+a);for(var C=0;C<s;C++)v?w.values[_*s+C]+=x[S*s+C]:w.values[_*s+C]=r.rank===0?x[0]:x[S*s+C]}return w.toTensor().reshape(a)},e}(QS);G.registerBackend("cpu",function(){return new Qz},1);for(var sv=0,jw=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e,i=a.boxes,s=a.scores,l=r,c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,v=l.softNmsSigma,m=t;he(i,"NonMaxSuppressionWithScore");var g=Vm(m.data.get(i.dataId).values,m.data.get(s.dataId).values,c,h,d,v);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t;he(r,"square");for(var i=a.data.get(r.dataId).values,s=new Float32Array(i.length),l=0;l<i.length;++l){var c=i[l];s[l]=c*c}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Xs,backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,s=t;he([a,i],Xs);var l=s.data.get(a.dataId).values,c=s.data.get(i.dataId).values,h=function(m,g,x,w,S,E){var _=qe(m,g),R=_.length,A=Qr(_),C=Ws(S,_e(_)),D=m.length,O=g.length,F=Qr(m),N=Qr(g),I=di(m,_),U=di(g,_);if(I.length+U.length===0)for(var H=0;H<C.length;++H)C[H]=E(x[H%x.length],w[H%w.length]);else{var J=function(ee){var ne=sM(ee,R,A),z=ne.slice(-D);I.forEach(function(ue){return z[ue]=0});var W=hw(z,D,F),q=ne.slice(-O);U.forEach(function(ue){return q[ue]=0});var re=hw(q,O,N);C[ee]=E(x[W],w[re])};for(H=0;H<C.length;++H)J(H)}return[C,_]}(a.shape,i.shape,l,c,a.dtype,function(m,g){var x=m-g;return x*x}),d=h[0],v=h[1];return{dataId:s.write(d,v,a.dtype),shape:v,dtype:a.dtype}}}];sv<jw.length;sv++)RS(jw[sv]);var Yo,Jz=function(n){this.variableNames=["A"];var e=gn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},eP=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=gn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var lv=0,Ww=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e.pixels,i=r.numChannels,s=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],h=c[0],d=c[1],v=[d,h],m=[d,h,i];(l||s)&&(Yo==null&&(Yo=document.createElement("canvas").getContext("2d")),Yo.canvas.width=h,Yo.canvas.height=d,Yo.drawImage(a,0,0,h,d),a=Yo.canvas);var g=t.makeTensorInfo(v,"int32");t.texData.get(g.dataId).usage=Qn.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(g.dataId),a);var x=le().getBool("WEBGL_PACK")?new eP(m):new Jz(m),w=t.runWebGLProgram(x,[g],"int32");return t.disposeData(g.dataId),w}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs;Ef("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=e,i=a.boxes,s=a.scores,l=r,c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,v=l.softNmsSigma,m=t,g=Vm(m.readSync(i.dataId),m.readSync(s.dataId),c,h,d,v);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t,i=new Ue(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:Xs,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,s=t,l=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ta("return (a - b) * (a - b);",a.shape,i.shape):new Ot("return (a - b) * (a - b);",a.shape,i.shape);return s.compileAndRun(l,[a,i])}}];lv<Ww.length;lv++)RS(Ww[lv]);for(var cv=0,Gw=[{kernelName:"Square",gradFunc:function(n,e){var t=e[0];return{x:function(){return n.mul(t.toFloat().mul(2))}}}},{kernelName:Xs,gradFunc:function(n,e){var t=e[0],r=e[1],a=ge(2);return{a:function(){return bn(n,bn(a,Xt(t,r)))},b:function(){return bn(n,bn(a,Xt(r,t)))}}}}];cv<Gw.length;cv++)YN(Gw[cv]);var tP=function(){function n(){}return n.prototype.fetch=function(e,t){return fetch(e,t)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},n}();le().get("IS_BROWSER")&&le().setPlatform("browser",new tP);var fv,nP=function(){return require("node-fetch")},rP=function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(e,t){return le().global.fetch!=null?le().global.fetch(e,t):(fv==null&&(fv=nP()),fv(e,t))},n.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},n}();le().get("IS_NODE")&&le().setPlatform("node",new rP);var em={float32:4,int32:4,uint16:2,uint8:1,bool:1},Bf=4;function $E(n,e){for(var t={},r=0,a=function(l){var c=l.name,h=l.dtype,d=l.shape,v=_e(d),m=void 0;if("quantization"in l){var g=l.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var x=em[g.dtype],w=n.slice(r,r+v*x),S=g.dtype==="uint8"?new Uint8Array(w):new Uint16Array(w);if(h==="float32")m=Float32Array.from(S,function(D){return D*g.scale+g.min});else{if(h!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+h);m=Int32Array.from(S,function(D){return Math.round(D*g.scale+g.min)})}r+=v*x}else if(h==="string"){var E=_e(l.shape);m=[];for(var _=0;_<E;_++){var R=new Uint32Array(n.slice(r,r+Bf))[0];r+=Bf;var A=new Uint8Array(n.slice(r,r+R));m.push(A),r+=R}}else{var C=em[h];if(w=n.slice(r,r+v*C),h==="float32")m=new Float32Array(w);else if(h==="int32")m=new Int32Array(w);else{if(h!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+h);m=new Uint8Array(w)}r+=v*C}t[c]=hn(m,d,h)},i=0,s=e;i<s.length;i++)a(s[i]);return t}function aP(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var e=0,t=[];n.forEach(function(i){if(e+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(e),a=0;return t.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var tm=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function qw(n){return tm?Buffer.byteLength(n):new Blob([n]).size}function ug(n){var e=0;n.forEach(function(a){e+=a.byteLength});var t=new Uint8Array(e),r=0;return n.forEach(function(a){t.set(new Uint8Array(a),r),r+=a.byteLength}),t.buffer}function Kw(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var e=n.split("/");return e[e.length-1]}function dl(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:qw(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:qw(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var Jn=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(e){n.getInstance().saveRouters.push(e)},n.registerLoadRouter=function(e){n.getInstance().loadRouters.push(e)},n.getSaveHandlers=function(e){return n.getHandlers(e,"save")},n.getLoadHandlers=function(e,t){return n.getHandlers(e,"load",t)},n.getHandlers=function(e,t,r){var a=[];return(t==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(i){var s=i(e,r);s!==null&&a.push(s)}),a},n}(),hu="://",yi=function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(e,t){L(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(hu)&&(e=e.slice(0,e.indexOf(hu))),L(e.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();L(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=t},n.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function lf(n){if(n.indexOf(hu)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+yi.getSchemes().join(","));return{scheme:n.split(hu)[0],path:n.split(hu)[1]}}function Xw(n,e,t){return t===void 0&&(t=!1),we(this,void 0,void 0,function(){var r,a,i,s,l,c,h,d,v;return Se(this,function(m){switch(m.label){case 0:return L(n!==e,function(){return"Old path and new path are the same: '"+n+"'"}),L((r=Jn.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),L(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),a=r[0],L((i=Jn.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),L(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),s=i[0],l=lf(n).scheme,c=lf(n).path,h=l===lf(n).scheme,[4,a.load()];case 1:return d=m.sent(),t&&h?[4,yi.getManager(l).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,s.save(d)];case 4:return v=m.sent(),!t||h?[3,6]:[4,yi.getManager(l).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,v.modelArtifactsInfo]}})})}var $i="models_store",pi="model_info_store";function ZE(){if(!le().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function nm(n){var e=n.result;e.createObjectStore($i,{keyPath:"modelPath"}),e.createObjectStore(pi,{keyPath:"modelPath"})}var du=function(){function n(e){if(this.indexedDB=ZE(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return n.prototype.save=function(e){return we(this,void 0,void 0,function(){return Se(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},n.prototype.load=function(){return we(this,void 0,void 0,function(){return Se(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(e,t){var r=this;return new Promise(function(a,i){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return nm(s)},s.onsuccess=function(){var l=s.result;if(t==null){var c=l.transaction($i,"readonly"),h=c.objectStore($i).get(r.modelPath);h.onsuccess=function(){if(h.result==null)return l.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(h.result.modelArtifacts)},h.onerror=function(w){return l.close(),i(h.error)},c.oncomplete=function(){return l.close()}}else{var d,v=dl(t),m=l.transaction(pi,"readwrite"),g=m.objectStore(pi),x=g.put({modelPath:r.modelPath,modelArtifactsInfo:v});x.onsuccess=function(){var w=(d=l.transaction($i,"readwrite")).objectStore($i).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:v});w.onsuccess=function(){return a({modelArtifactsInfo:v})},w.onerror=function(S){var E=(g=m.objectStore(pi)).delete(r.modelPath);E.onsuccess=function(){return l.close(),i(w.error)},E.onerror=function(_){return l.close(),i(w.error)}}},x.onerror=function(w){return l.close(),i(x.error)},m.oncomplete=function(){d==null?l.close():d.oncomplete=function(){return l.close()}}}},s.onerror=function(l){return i(s.error)}})},n.URL_SCHEME="indexeddb://",n}(),$w=function(n){return le().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(du.URL_SCHEME)?(e=n.slice(du.URL_SCHEME.length),new du(e)):null;var e};Jn.registerSaveRouter($w),Jn.registerLoadRouter($w);var iP=function(){function n(){this.indexedDB=ZE()}return n.prototype.listModels=function(){return we(this,void 0,void 0,function(){var e=this;return Se(this,function(t){return[2,new Promise(function(r,a){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return nm(i)},i.onsuccess=function(){var s=i.result,l=s.transaction(pi,"readonly"),c=l.objectStore(pi).getAll();c.onsuccess=function(){for(var h={},d=0,v=c.result;d<v.length;d++){var m=v[d];h[m.modelPath]=m.modelArtifactsInfo}r(h)},c.onerror=function(h){return s.close(),a(c.error)},l.oncomplete=function(){return s.close()}},i.onerror=function(s){return a(i.error)}})]})})},n.prototype.removeModel=function(e){return we(this,void 0,void 0,function(){var t=this;return Se(this,function(r){var a;return e=(a=e).startsWith(du.URL_SCHEME)?a.slice(du.URL_SCHEME.length):a,[2,new Promise(function(i,s){var l=t.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return nm(l)},l.onsuccess=function(){var c,h=l.result,d=h.transaction(pi,"readwrite"),v=d.objectStore(pi),m=v.get(e);m.onsuccess=function(){if(m.result==null)return h.close(),s(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var g=v.delete(e),x=function(){var w=(c=h.transaction($i,"readwrite")).objectStore($i).delete(e);w.onsuccess=function(){return i(m.result.modelArtifactsInfo)},w.onerror=function(S){return s(m.error)}};g.onsuccess=x,g.onerror=function(w){return x(),h.close(),s(m.error)}},m.onerror=function(g){return h.close(),s(m.error)},d.oncomplete=function(){c==null?h.close():c.oncomplete=function(){return h.close()}}},l.onerror=function(c){return s(l.error)}})]})})},n}();if(le().getBool("IS_BROWSER"))try{yi.registerManager(du.URL_SCHEME,new iP)}catch{}var Da="/",au="tensorflowjs_models",YE="info",oP="model_topology",uP="weight_specs",sP="weight_data",lP="model_metadata";function QE(n){return{info:[au,n,YE].join(Da),topology:[au,n,oP].join(Da),weightSpecs:[au,n,uP].join(Da),weightData:[au,n,sP].join(Da),modelMetadata:[au,n,lP].join(Da)}}function cP(n){var e=n.split(Da);if(e.length<3)throw new Error("Invalid key format: "+n);return e.slice(1,e.length-1).join(Da)}var pu=function(){function n(e){if(!le().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=QE(this.modelPath)}return n.prototype.save=function(e){return we(this,void 0,void 0,function(){var t,r,a;return Se(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=dl(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(s){if(tm)return Buffer.from(s).toString("base64");for(var l=new Uint8Array(s),c="",h=0,d=l.length;h<d;h++)c+=String.fromCharCode(l[h]);return btoa(c)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return we(this,void 0,void 0,function(){var e,t,r,a,i,s,l;return Se(this,function(c){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(s=JSON.parse(i),t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,t.userDefinedMetadata=s.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(h){if(tm){var d=Buffer.from(h,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var v=atob(h),m=new Uint8Array(v.length),g=0;g<v.length;++g)m.set([v.charCodeAt(g)],g);return m.buffer}(l),[2,t]})})},n.URL_SCHEME="localstorage://",n}(),Zw=function(n){return le().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(pu.URL_SCHEME)?(e=n.slice(pu.URL_SCHEME.length),new pu(e)):null;var e};Jn.registerSaveRouter(Zw),Jn.registerLoadRouter(Zw);var fP=function(){function n(){L(le().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),L(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return we(this,void 0,void 0,function(){var e,t,r,a,i,s;return Se(this,function(l){for(e={},t=au+Da,r=Da+YE,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(t)&&i.endsWith(r)&&(s=cP(i),e[s]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},n.prototype.removeModel=function(e){return we(this,void 0,void 0,function(){var t,r;return Se(this,function(a){var i;if(e=(i=e).startsWith(pu.URL_SCHEME)?i.slice(pu.URL_SCHEME.length):i,t=QE(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},n}();if(le().getBool("IS_BROWSER"))try{yi.registerManager(pu.URL_SCHEME,new fP)}catch{}var hP="model",dP=".json",pP=".weights.bin";function Yw(n){return new Promise(function(e){return setTimeout(e)}).then(n)}var hv=function(){function n(e){if(!le().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),e!=null&&e.length!==0||(e=hP),this.modelTopologyFileName=e+dP,this.weightDataFileName=e+pP}return n.prototype.save=function(e){return we(this,void 0,void 0,function(){var t,r,a,i,s,l;return Se(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=i,[4,Yw(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),e.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=t,[4,Yw(function(){return l.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:dl(e)}]}})})},n.URL_SCHEME="downloads://",n}(),vP=function(){function n(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return n.prototype.load=function(){return we(this,void 0,void 0,function(){var e,t,r=this;return Se(this,function(a){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(i,s){var l=new FileReader;l.onload=function(c){var h=JSON.parse(c.target.result),d=h.modelTopology;if(d!=null){t.length===0&&i({modelTopology:d});var v=h.weightsManifest;if(v!=null){var m;try{m=r.checkManifestAndWeightFiles(v,t)}catch(S){return void s(S)}var g=[],x=[],w=[];v.forEach(function(S){S.paths.forEach(function(E){x.push(E),w.push(null)}),g.push.apply(g,S.weights)}),v.forEach(function(S){S.paths.forEach(function(E){var _=new FileReader;_.onload=function(R){var A=R.target.result,C=x.indexOf(E);w[C]=A,w.indexOf(null)===-1&&i({modelTopology:d,weightSpecs:g,weightData:ug(w),format:h.format,generatedBy:h.generatedBy,convertedBy:h.convertedBy,userDefinedMetadata:h.userDefinedMetadata})},_.onerror=function(R){return s("Failed to weights data from file of path '"+E+"'.")},_.readAsArrayBuffer(m[E])})})}else s(new Error("weightManifest field is missing from file "+e.name))}else s(new Error("modelTopology field is missing from file "+e.name))},l.onerror=function(c){return s("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(e)})]})})},n.prototype.checkManifestAndWeightFiles=function(e,t){for(var r=[],a=t.map(function(c){return Kw(c.name)}),i={},s=0,l=e;s<l.length;s++)l[s].paths.forEach(function(c){var h=Kw(c);if(r.indexOf(h)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+h+"'");if(r.push(h),a.indexOf(h)===-1)throw new Error("Weight file with basename '"+h+"' is not provided.");i[c]=t[a.indexOf(h)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return i},n}();function Qw(n,e,t,r){(function(i){L(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(n),function(i,s){L(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),L(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),L(s>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+s})}(t=t??0,r=r??1);var a=0;return Promise.all(n.map(function(i){return i.then(function(s){var l=t+ ++a/n.length*(r-t);return e(l),s}),i}))}function JE(n,e){return we(this,void 0,void 0,function(){var t,r,a,i,s,l,c,h,d;return Se(this,function(v){switch(v.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?le().platform.fetch:e.fetchFunc,r=n.map(function(m){return t(m,e.requestInit,{isBinary:!0})}),a=0,i=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=v.sent(),[3,4];case 2:return[4,Qw(r,e.onProgress,a,i)];case 3:s=v.sent(),v.label=4;case 4:return l=s.map(function(m){return m.arrayBuffer()}),c=.5,h=1,e.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return d=v.sent(),[3,8];case 6:return[4,Qw(l,e.onProgress,c,h)];case 7:d=v.sent(),v.label=8;case 8:return[2,d]}})})}function Jw(n){var e=this;return function(t,r,a){return r===void 0&&(r=""),we(e,void 0,void 0,function(){var i,s,l,c,h,d,v,m,g,x;return Se(this,function(w){switch(w.label){case 0:if(i=t.map(function(){return!1}),s={},l=a!=null?a.map(function(){return!1}):[],c=[],t.forEach(function(S,E){var _=0;S.weights.forEach(function(R){var A="quantization"in R?R.quantization.dtype:R.dtype,C=em[A]*_e(R.shape),D=function(){i[E]=!0,s[E]==null&&(s[E]=[]),s[E].push({manifestEntry:R,groupOffset:_,sizeBytes:C})};a!=null?a.forEach(function(O,F){O===R.name&&(D(),l[F]=!0)}):D(),c.push(R.name),_+=C})}),!l.every(function(S){return S}))throw h=a.filter(function(S,E){return!l[E]}),new Error("Could not find weights in manifest with names: "+h.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=i.reduce(function(S,E,_){return E&&S.push(_),S},[]),v=[],d.forEach(function(S){t[S].paths.forEach(function(E){var _=r+(r.endsWith("/")?"":"/")+E;v.push(_)})}),[4,n(v)];case 1:return m=w.sent(),g={},x=0,d.forEach(function(S){for(var E=t[S].paths.length,_=0,R=0;R<E;R++)_+=m[x+R].byteLength;for(var A=new ArrayBuffer(_),C=new Uint8Array(A),D=0,O=0;O<E;O++){var F=new Uint8Array(m[x+O]);C.set(F,D),D+=F.byteLength}s[S].forEach(function(N){var I=$E(A.slice(N.groupOffset,N.groupOffset+N.sizeBytes),[N.manifestEntry]);for(var U in I)g[U]=I[U]}),x+=E}),[2,g]}})})}}Jn.registerSaveRouter(function(n){return le().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(hv.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new hv(e)}(n.slice(hv.URL_SCHEME.length)):null});var e_=function(){function n(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(L(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=le().platform.fetch,L(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&L(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return n.prototype.save=function(e){return we(this,void 0,void 0,function(){var t,r,a,i;return Se(this,function(s){switch(s.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=s.sent()).ok)return[2,{modelArtifactsInfo:dl(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},n.prototype.load=function(){return we(this,void 0,void 0,function(){var e,t,r,a,i,s,l,c,h,d,v,m;return Se(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,e.json()];case 3:return t=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=t.modelTopology,i=t.weightsManifest,s=t.generatedBy,l=t.convertedBy,c=t.format,h=t.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:m=g.sent(),d=m[0],v=m[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:d,weightData:v,userDefinedMetadata:h,generatedBy:s,convertedBy:l,format:c}]}})})},n.prototype.loadWeights=function(e){return we(this,void 0,void 0,function(){var t,r,a,i,s,l,c,h,d,v,m;return Se(this,function(g){switch(g.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(x){var w=x.lastIndexOf("/"),S=x.lastIndexOf("?"),E=x.substring(0,w),_=S>w?x.substring(S):"";return[E+"/",_]}(t),a=r[0],i=r[1],s=this.weightPathPrefix||a,l=[],c=0,h=e;c<h.length;c++)d=h[c],l.push.apply(l,d.weights);return v=[],e.forEach(function(x){x.paths.forEach(function(w){v.push(s+w+i)})}),[4,JE(v,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=g.sent(),[2,[l,ug(m)]]}})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function rm(n){return n.match(e_.URL_SCHEME_REGEX)!=null}var e2=function(n,e){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(t){return rm(t)}):rm(n))?am(n,{onProgress:e}):null};function am(n,e){return new e_(n,e)}Jn.registerSaveRouter(e2),Jn.registerLoadRouter(e2);var dv=function(){function n(e){this.modelArtifacts=e}return n.prototype.load=function(){return we(this,void 0,void 0,function(){return Se(this,function(e){return[2,this.modelArtifacts]})})},n}(),mP=function(){function n(e){this.saveHandler=e}return n.prototype.save=function(e){return we(this,void 0,void 0,function(){return Se(this,function(t){return[2,this.saveHandler(e)]})})},n}(),t_=Object.freeze({browserFiles:function(n){return new vP(n)},browserHTTPRequest:function(n,e){return am(n,e)},concatenateArrayBuffers:ug,decodeWeights:$E,encodeWeights:function(n,e){return we(this,void 0,void 0,function(){var t,r,a,i,s,l=this;return Se(this,function(c){switch(c.label){case 0:for(t=[],r=[],a=Array.isArray(n)?n.map(function(h){return h.name}):Object.keys(n),i=function(h){var d=a[h],v=Array.isArray(n)?n[h].tensor:n[d];if(v.dtype!=="float32"&&v.dtype!=="int32"&&v.dtype!=="bool"&&v.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+v.dtype);var m={name:d,shape:v.shape,dtype:v.dtype};if(v.dtype==="string"){var g=new Promise(function(x){return we(l,void 0,void 0,function(){var w,S,E,_,R,A,C;return Se(this,function(D){switch(D.label){case 0:return[4,v.bytes()];case 1:for(w=D.sent(),S=w.reduce(function(O,F){return O+F.length},0)+Bf*w.length,E=new Uint8Array(S),_=0,R=0;R<w.length;R++)A=w[R],C=new Uint8Array(new Uint32Array([A.length]).buffer),E.set(C,_),_+=Bf,E.set(A,_),_+=A.length;return x(E),[2]}})})});r.push(g)}else r.push(v.data());e!=null&&(m.group=e),t.push(m)},s=0;s<a.length;++s)i(s);return[4,Promise.all(r)];case 1:return[2,{data:aP(c.sent()),specs:t}]}})})},fromMemory:function(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new dv(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new dv({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new dv({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))},getLoadHandlers:function(n,e){return Jn.getLoadHandlers(n,e)},getModelArtifactsInfoForJSON:dl,getSaveHandlers:function(n){return Jn.getSaveHandlers(n)},http:am,isHTTPScheme:rm,loadWeights:function(n,e,t,r){return e===void 0&&(e=""),we(this,void 0,void 0,function(){return Se(this,function(a){return[2,Jw(function(i){return JE(i,{requestInit:r})})(n,e,t)]})})},registerLoadRouter:function(n){return Jn.registerLoadRouter(n)},registerSaveRouter:function(n){return Jn.registerSaveRouter(n)},weightsLoaderFactory:Jw,withSaveHandler:function(n){return new mP(n)},copyModel:function(n,e){return we(this,void 0,void 0,function(){return Se(this,function(t){return[2,Xw(n,e,!1)]})})},listModels:function(){return we(this,void 0,void 0,function(){var n,e,t,r,a,i,s;return Se(this,function(l){switch(l.label){case 0:n=yi.getSchemes(),e={},t=0,r=n,l.label=1;case 1:return t<r.length?(a=r[t],[4,yi.getManager(a).listModels()]):[3,4];case 2:for(s in i=l.sent())e[a+hu+s]=i[s];l.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},moveModel:function(n,e){return we(this,void 0,void 0,function(){return Se(this,function(t){return[2,Xw(n,e,!0)]})})},removeModel:function(n){return we(this,void 0,void 0,function(){var e;return Se(this,function(t){return e=lf(n),[2,yi.getManager(e.scheme).removeModel(e.path)]})})}}),Qo;V({confusionMatrix_:function(n,e,t){var r=M(n,"labels","confusionMatrix"),a=M(e,"predictions","confusionMatrix");L(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),L(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),L(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),L(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),L(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var i=$v(r.asType("int32"),t),s=$v(a.asType("int32"),t);return i.transpose().matMul(s).asType("int32")}});var gP=V({fromPixels_:function(n,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,a=!1,i=!1,s=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)i=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);s=!0}if(a&&a&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(CS("FromPixels",G.backendName)!=null)return G.runKernel("FromPixels",{pixels:n},{numChannels:e});var l,c,h=a?[n.videoWidth,n.videoHeight]:[n.width,n.height],d=h[0],v=h[1];if(s?l=n.getContext("2d").getImageData(0,0,d,v).data:r||t?l=n.data:(i||a)&&(Qo==null&&(Qo=document.createElement("canvas").getContext("2d")),Qo.canvas.width=d,Qo.canvas.height=v,Qo.drawImage(n,0,0,d,v),l=Qo.getImageData(0,0,d,v).data),e===4)c=new Int32Array(l);else{var m=d*v;c=new Int32Array(m*e);for(var g=0;g<m;g++)for(var x=0;x<e;++x)c[g*e+x]=l[4*g+x]}return Bm(c,[v,d,e],"int32")}}),sg=Object.freeze({toPixels:function(n,e){return we(this,void 0,void 0,function(){var t,r,a,i,s,l,c,h,d,v,m,g,x,w,S,E,_,R,A,C,D,O,F;return Se(this,function(N){switch(N.label){case 0:if(t=M(n,"img","toPixels"),n instanceof Et||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),a=r[0],i=r[1],(s=t.rank===2?1:t.shape[2])>4||s===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,t.data()];case 1:return l=N.sent(),c=t.min(),h=t.max(),[4,Promise.all([c.data(),h.data()])];case 2:if(d=N.sent(),v=d[0],m=d[1],g=v[0],x=m[0],c.dispose(),h.dispose(),t.dtype==="float32"){if(g<0||x>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+x+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(g<0||x>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+x+"].")}for(w=t.dtype==="float32"?255:1,S=new Uint8ClampedArray(i*a*4),E=0;E<a*i;++E)_=void 0,R=void 0,A=void 0,C=void 0,s===1?(_=l[E]*w,R=l[E]*w,A=l[E]*w,C=255):s===3?(_=l[3*E]*w,R=l[3*E+1]*w,A=l[3*E+2]*w,C=255):s===4&&(_=l[4*E]*w,R=l[4*E+1]*w,A=l[4*E+2]*w,C=l[4*E+3]*w),S[(D=4*E)+0]=Math.round(_),S[D+1]=Math.round(R),S[D+2]=Math.round(A),S[D+3]=Math.round(C);return e!=null&&(e.width=i,e.height=a,O=e.getContext("2d"),F=new ImageData(S,i,a),O.putImageData(F,0,0)),t!==n&&t.dispose(),[2,S]}})})},fromPixels:gP}),yP=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(e,t){return new e(t)},n}(),bP=function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(e){n.getMap().classNameMap[e.className]=[e,e.fromConfig]},n}();function uo(n){L(n.className!=null,function(){return"Class being registered does not have the static className property defined."}),L(typeof n.className=="string",function(){return"className is required to be a string, but got type "+typeof n.className}),L(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),bP.register(n)}var so=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Nr(e,n),e.prototype.minimize=function(t,r,a){r===void 0&&(r=!1);var i=this.computeGradients(t,a),s=i.value,l=i.grads;if(a!=null){var c=a.map(function(h){return{name:h.name,tensor:l[h.name]}});this.applyGradients(c)}else this.applyGradients(l);return Fn(l),r?s:(s.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,r){return DI(t,r)},e.prototype.dispose=function(){this.iterations_!=null&&Fn(this.iterations_)},e.prototype.saveIterations=function(){return we(this,void 0,void 0,function(){return Se(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:ge(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Se(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){return Se(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return we(this,void 0,void 0,function(){var r;return Se(this,function(a){switch(a.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,t.slice(1)]}})})},e}(yP);Object.defineProperty(so,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var xP=function(n){function e(t,r,a){a===void 0&&(a=null);var i=n.call(this)||this;return i.learningRate=t,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=G.backend.epsilon()),i}return Nr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var s=G.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:be(function(){return Qe(s).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:be(function(){return Qe(s).variable(!1)})});var l=Array.isArray(t)?t[i].tensor:t[a];if(l!=null){var c=r.accumulatedGrads[i].variable,h=r.accumulatedUpdates[i].variable;be(function(){var d=c.mul(r.rho).add(l.square().mul(1-r.rho)),v=h.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(l),m=h.mul(r.rho).add(v.square().mul(1-r.rho));c.assign(d),h.assign(m);var g=v.mul(-r.learningRate).add(s);s.assign(g)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Fn(this.accumulatedGrads.map(function(t){return t.variable})),Fn(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){var t;return Se(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){var r;return Se(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(so);uo(xP);var wP=function(n){function e(t,r){r===void 0&&(r=.1);var a=n.call(this)||this;return a.learningRate=t,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Nr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var s=G.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:be(function(){return Jr(s.shape,r.initialAccumulatorValue).variable(!1)})});var l=Array.isArray(t)?t[i].tensor:t[a];if(l!=null){var c=r.accumulatedGrads[i].variable;be(function(){var h=c.add(l.square());c.assign(h);var d=l.div(h.add(G.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Fn(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){return Se(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(so);uo(wP);var SP=function(n){function e(t,r,a,i){i===void 0&&(i=null);var s=n.call(this)||this;return s.learningRate=t,s.beta1=r,s.beta2=a,s.epsilon=i,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],be(function(){s.accBeta1=ge(r).variable(),s.accBeta2=ge(a).variable()}),i==null&&(s.epsilon=G.backend.epsilon()),s}return Nr(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);be(function(){var i=Xt(1,r.accBeta1),s=Xt(1,r.accBeta2);a.forEach(function(l,c){var h=G.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:be(function(){return Qe(h).variable(!1)})}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:l+"/v",variable:be(function(){return Qe(h).variable(!1)})});var d=Array.isArray(t)?t[c].tensor:t[l];if(d!=null){var v=r.accumulatedFirstMoment[c].variable,m=r.accumulatedSecondMoment[c].variable,g=v.mul(r.beta1).add(d.mul(1-r.beta1)),x=m.mul(r.beta2).add(d.square().mul(1-r.beta2)),w=g.div(i),S=x.div(s);v.assign(g),m.assign(x);var E=w.div(S.sqrt().add(r.epsilon)).mul(-r.learningRate).add(h);h.assign(E)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Fn(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&Fn(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){var t;return Se(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){var r,a=this;return Se(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),be(function(){a.accBeta1.assign(If(a.beta1,a.iterations_+1)),a.accBeta2.assign(If(a.beta2,a.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(so);uo(SP);var EP=function(n){function e(t,r,a,i,s){i===void 0&&(i=null),s===void 0&&(s=0);var l=n.call(this)||this;return l.learningRate=t,l.beta1=r,l.beta2=a,l.epsilon=i,l.decay=s,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],be(function(){l.iteration=ge(0).variable(),l.accBeta1=ge(r).variable()}),i==null&&(l.epsilon=G.backend.epsilon()),l}return Nr(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);be(function(){var i=Xt(1,r.accBeta1),s=Tr(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(l,c){var h=G.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:Qe(h).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:Qe(h).variable(!1)});var d=Array.isArray(t)?t[c].tensor:t[l];if(d!=null){var v=r.accumulatedFirstMoment[c].variable,m=r.accumulatedWeightedInfNorm[c].variable,g=v.mul(r.beta1).add(d.mul(1-r.beta1)),x=m.mul(r.beta2),w=d.abs(),S=x.maximum(w);v.assign(g),m.assign(S);var E=s.div(i).mul(g.div(S.add(r.epsilon))).add(h);h.assign(E)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Fn(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&Fn(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Se(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){return Se(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(so);uo(EP);var n_=function(n){function e(t){var r=n.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return Nr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var s=Array.isArray(t)?t[i].tensor:t[a];if(s!=null){var l=G.registeredVariables[a];be(function(){var c=r.c.mul(s).add(l);l.assign(c)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=jM(ge(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){return Se(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,r){return new t(r.learningRate)},e.className="SGD",e}(so);uo(n_);var _P=function(n){function e(t,r,a){a===void 0&&(a=!1);var i=n.call(this,t)||this;return i.learningRate=t,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=ge(i.momentum),i}return Nr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var s=G.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:be(function(){return Qe(s).variable(!1)})});var l=r.accumulations[i].variable,c=Array.isArray(t)?t[i].tensor:t[a];c!=null&&be(function(){var h,d=r.m.mul(l).add(c);h=r.useNesterov?r.c.mul(c.add(d.mul(r.m))).add(s):r.c.mul(d).add(s),l.assign(d),s.assign(h)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Fn(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){return Se(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(n_);uo(_P);var CP=function(n){function e(t,r,a,i,s){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),s===void 0&&(s=!1);var l=n.call(this)||this;if(l.learningRate=t,l.decay=r,l.momentum=a,l.epsilon=i,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=s,i==null&&(l.epsilon=G.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return Nr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var s=G.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:be(function(){return Qe(s).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:be(function(){return Qe(s).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:be(function(){return Qe(s).variable(!1)})});var l=Array.isArray(t)?t[i].tensor:t[a];if(l!=null){var c=r.accumulatedMeanSquares[i].variable,h=r.accumulatedMoments[i].variable;be(function(){var d=c.mul(r.decay).add(l.square().mul(1-r.decay));if(r.centered){var v=r.accumulatedMeanGrads[i].variable,m=v.mul(r.decay).add(l.mul(1-r.decay)),g=h.mul(r.momentum).add(l.mul(r.learningRate).div(d.sub(m.square().add(r.epsilon)).sqrt()));c.assign(d),v.assign(m),h.assign(g);var x=s.sub(g);s.assign(x)}else{var w=c.mul(r.decay).add(l.square().mul(1-r.decay));g=h.mul(r.momentum).add(l.mul(r.learningRate).div(w.add(r.epsilon).sqrt())),c.assign(w),h.assign(g),x=s.sub(g),s.assign(x)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Fn(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Fn(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&Fn(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return we(this,void 0,void 0,function(){var t;return Se(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return we(this,void 0,void 0,function(){var r;return Se(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(so);uo(CP);Et.prototype.squaredDifference=function(n){return gE(this,n)},ie=Yz;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var im=function(n,e){return im=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])},im(n,e)};function Ie(n,e){im(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mn=function(){return mn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mn.apply(this,arguments)};function Re(n,e,t,r){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function l(d){try{h(r.next(d))}catch(v){s(v)}}function c(d){try{h(r.throw(d))}catch(v){s(v)}}function h(d){d.done?i(d.value):a(d.value).then(l,c)}h((r=r.apply(n,[])).next())})}function Ae(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(d){return c([h,d])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=h[0]&2?a.return:h[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,h[1])).done)return i;switch(a=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,a=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(d){h=[6,d],a=0}finally{r=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Fs(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<t;e++)for(var i=arguments[e],s=0,l=i.length;s<l;s++,a++)r[a]=i[s];return r}var Yi=function(){function n(e,t){if(!Qi(e)||!Qi(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n}();function ih(n,e){return n instanceof Et&&n.shape.length===e}function RP(n){return ih(n,2)}function oh(n){return ih(n,3)}function bi(n){return ih(n,4)}function AP(n){return n%1!==0}function t2(n){return n%2===0}function lg(n,e){e===void 0&&(e=2);var t=Math.pow(10,e);return Math.floor(n*t)/t}function n2(n){return n&&n.width&&n.height}function TP(n,e){var t=n.width,r=n.height,a=e/Math.max(r,t);return new Yi(Math.round(t*a),Math.round(r*a))}function cg(n){return n.reduce(function(e,t){return e.add(t)},new tt(0,0)).div(new tt(n.length,n.length))}function $s(n,e,t){return Array(n).fill(0).map(function(r,a){return e+a*t})}function Qi(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function r2(n){return Qi(n)&&0<=n&&n<=1}var tt=function(){function n(e,t){this._x=e,this._y=t}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(e){return new n(this.x+e.x,this.y+e.y)},n.prototype.sub=function(e){return new n(this.x-e.x,this.y-e.y)},n.prototype.mul=function(e){return new n(this.x*e.x,this.y*e.y)},n.prototype.div=function(e){return new n(this.x/e.x,this.y/e.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n}(),ta=function(){function n(e,t){t===void 0&&(t=!0);var r=e||{},a=[r.left,r.top,r.right,r.bottom].every(Qi),i=[r.x,r.y,r.width,r.height].every(Qi);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var s=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],l=s[0],c=s[1],h=s[2],d=s[3];n.assertIsValidBox({x:l,y:c,width:h,height:d},"Box.constructor",t),this._x=l,this._y=c,this._width=h,this._height=d}return n.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Qi)},n.assertIsValidBox=function(e,t,r){if(r===void 0&&(r=!1),!n.isRect(e))throw new Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new tt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new tt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new tt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new tt(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.toSquare=function(){var e=this,t=e.x,r=e.y,a=e.width,i=e.height,s=Math.abs(a-i);return a<i&&(t-=s/2,a+=s),i<a&&(r-=s/2,i+=s),new n({x:t,y:r,width:a,height:i})},n.prototype.rescale=function(e){var t=n2(e)?e.width:e,r=n2(e)?e.height:e;return new n({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},n.prototype.pad=function(e,t){var r=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],a=r[0],i=r[1],s=r[2],l=r[3];return new n({x:a,y:i,width:s,height:l})},n.prototype.clipAtImageBorders=function(e,t){var r=this,a=r.x,i=r.y,s=r.right,l=r.bottom,c=Math.max(a,0),h=Math.max(i,0),d=s-c,v=l-h,m=Math.min(d,e-c),g=Math.min(v,t-h);return new n({x:c,y:h,width:m,height:g}).floor()},n.prototype.shift=function(e,t){var r=this,a=r.width,i=r.height,s=this.x+e,l=this.y+t;return new n({x:s,y:l,width:a,height:i})},n.prototype.padAtBorders=function(e,t){var r=this.width+1,a=this.height+1,i=1,s=1,l=r,c=a,h=this.left,d=this.top,v=this.right,m=this.bottom;return v>t&&(l=-v+t+r,v=t),m>e&&(c=-m+e+a,m=e),h<1&&(c=2-h,h=1),d<1&&(c=2-d,d=1),{dy:s,edy:c,dx:i,edx:l,y:d,ey:m,x:h,ex:v,w:r,h:a}},n.prototype.calibrate=function(e){return new n({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},n}(),uh=function(n){Ie(e,n);function e(t,r,a,i,s){return s===void 0&&(s=!1),n.call(this,{left:t,top:r,right:a,bottom:i},s)||this}return e}(ta),r_=function(){function n(e,t,r,a,i){this._imageDims=new Yi(i.width,i.height),this._score=e,this._classScore=t,this._className=r,this._box=new ta(a).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new ta(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},n}(),rr=function(n){Ie(e,n);function e(t,r,a){return n.call(this,t,t,"",r,a)||this}return e.prototype.forSize=function(t,r){var a=n.prototype.forSize.call(this,t,r),i=a.score,s=a.relativeBox,l=a.imageDims;return new e(i,s,l)},e}(r_);function DP(n,e,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),a=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),i=r*a;return t?i/(n.area+e.area-i):i/Math.min(n.area,e.area)}function OP(n){var e=n.map(function(l){return l.x}),t=n.map(function(l){return l.y}),r=e.reduce(function(l,c){return c<l?c:l},1/0),a=t.reduce(function(l,c){return c<l?c:l},1/0),i=e.reduce(function(l,c){return l<c?c:l},0),s=t.reduce(function(l,c){return l<c?c:l},0);return new uh(r,a,i,s)}function Zs(n,e,t,r){r===void 0&&(r=!0);for(var a=e.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),i=[],s=function(){var l=a.pop();i.push(l);for(var c=a,h=[],d=0;d<c.length;d++){var v=c[d],m=n[l],g=n[v];h.push(DP(m,g,r))}a=a.filter(function(x,w){return h[w]<=t})};a.length>0;)s();return i}function pl(n,e){return be(function(){var t=e[0],r=e[1],a=e[2],i=Jr(Fs(n.shape.slice(0,3),[1]),t),s=Jr(Fs(n.shape.slice(0,3),[1]),r),l=Jr(Fs(n.shape.slice(0,3),[1]),a),c=Gt([i,s,l],3);return Xt(n,c)})}function kP(n,e){return e===void 0&&(e=!1),be(function(){var t=n.shape.slice(1),r=t[0],a=t[1];if(r===a)return n;var i=Math.abs(r-a),s=Math.round(i*(e?.5:1)),l=r>a?2:1,c=function(g){var x=n.shape.slice();return x[l]=g,Jr(x,0)},h=c(s),d=i-h.shape[l],v=e&&d?c(d):null,m=[v,n,h].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return Gt(m,l)})}function pv(n){return 1/(1+Math.exp(-n))}var fg=function(n){Ie(e,n);function e(t,r,a,i,s){return s===void 0&&(s=!1),n.call(this,{x:t,y:r,width:a,height:i},s)||this}return e}(ta),NP=.5,MP=.43,IP=.45,Ys=function(){function n(e,t,r){r===void 0&&(r=new tt(0,0));var a=t.width,i=t.height;this._imgDims=new Yi(a,i),this._shift=r,this._positions=e.map(function(s){return s.mul(new tt(a,i)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new tt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new tt(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},n.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new tt(e,t))},n.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},n.prototype.align=function(e,t){if(t===void 0&&(t={}),e){var r=e instanceof rr?e.box.floor():new ta(e);return this.shiftBy(r.x,r.y).align(null,t)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=a.useDlibAlignment,s=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(s)},n.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],r=e[1],a=e[2],i=function(v){return a.sub(v).magnitude()},s=(i(t)+i(r))/2,l=Math.floor(s/IP),c=cg(e),h=Math.floor(Math.max(0,c.x-NP*l)),d=Math.floor(Math.max(0,c.y-MP*l));return new fg(h,d,Math.min(l,this.imageWidth+h),Math.min(l,this.imageHeight+d))},n.prototype.alignMinBbox=function(e){var t=OP(this.positions);return t.pad(t.width*e,t.height*e)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n}(),FP=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],cg([t[3],t[4]])]},e}(Ys),BP=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(cg)},e}(Ys),a2=function(){function n(e,t){this._label=e,this._distance=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+lg(this.distance)+")":"")},n}(),i2=function(n){Ie(e,n);function e(t,r){var a=n.call(this,t)||this;return a._label=r,a}return e.assertIsValidLabeledBox=function(t,r){if(ta.assertIsValidBox(t,r),!Qi(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(ta),Qc=function(){function n(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},n.fromJSON=function(e){var t=e.descriptors.map(function(r){return new Float32Array(r)});return new n(e.label,t)},n}();(function(n){Ie(e,n);function e(t,r,a,i){var s=n.call(this,t,r)||this;return s._score=a,s._classScore=i,s}return e.assertIsValidPredictedBox=function(t,r){if(i2.assertIsValidLabeledBox(t,r),!r2(t.score)||!r2(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(i2);function Qs(n){return n.detection instanceof rr}function Js(n,e){var t={detection:e};return Object.assign({},n,t)}function a_(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:e}}function i_(n){var e="";if(!n)try{n=require("fs")}catch(r){e=r.toString()}var t=n?function(r){return new Promise(function(a,i){n.readFile(r,function(s,l){return s?i(s):a(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:t}}function o_(){var n=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,t=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=i_();return mn({Canvas:n||function(){function s(){}return s}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function s(){}return s}(),Image:e||function(){function s(){}return s}(),ImageData:global.ImageData||function(){function s(){}return s}(),Video:global.HTMLVideoElement||function(){function s(){}return s}(),createCanvasElement:t,createImageElement:r,fetch:a},i)}function u_(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function s_(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var jt;function LP(){if(!jt)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return jt}function om(n){jt=n}function hg(){u_()&&om(a_()),s_()&&om(o_())}function zP(n){if(jt||hg(),!jt)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=n.Canvas,t=e===void 0?jt.Canvas:e,r=n.Image,a=r===void 0?jt.Image:r;jt.Canvas=t,jt.Image=a,jt.createCanvasElement=n.createCanvasElement||function(){return new t},jt.createImageElement=n.createImageElement||function(){return new a},jt.ImageData=n.ImageData||jt.ImageData,jt.Video=n.Video||jt.Video,jt.fetch=n.fetch||jt.fetch,jt.readFile=n.readFile||jt.readFile}var xn={getEnv:LP,setEnv:om,initialize:hg,createBrowserEnv:a_,createFileSystem:i_,createNodejsEnv:o_,monkeyPatch:zP,isBrowser:u_,isNodejs:s_};hg();function dg(n){return!xn.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function Na(n){var e=xn.getEnv(),t=e.Canvas,r=e.CanvasRenderingContext2D;if(n instanceof r)return n;var a=dg(n);if(!(a instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var vi;(function(n){n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT"})(vi||(vi={}));var l_=function(){function n(e){e===void 0&&(e={});var t=e.anchorPosition,r=e.backgroundColor,a=e.fontColor,i=e.fontSize,s=e.fontStyle,l=e.padding;this.anchorPosition=t||vi.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=a||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=s||"Georgia",this.padding=l||4}return n}(),c_=function(){function n(e,t,r){r===void 0&&(r={}),this.text=typeof e=="string"?[e]:e instanceof n?e.text:e,this.anchor=t,this.options=new l_(r)}return n.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(r){return e.measureText(r).width}).reduce(function(r,a){return r<a?a:r},0)+2*t},n.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,r=e.padding;return this.text.length*t+2*r},n.prototype.getUpperLeft=function(e,t){var r=this.options.anchorPosition,a=r===vi.BOTTOM_RIGHT||r===vi.TOP_RIGHT,i=r===vi.BOTTOM_LEFT||r===vi.BOTTOM_RIGHT,s=this.measureWidth(e),l=this.measureHeight(),c=a?this.anchor.x-s:this.anchor.x,h=i?this.anchor.y-l:this.anchor.y;if(t){var d=t.width,v=t.height,m=Math.max(Math.min(c,d-s),0),g=Math.max(Math.min(h,v-l),0);return{x:m,y:g}}return{x:c,y:h}},n.prototype.draw=function(e){var t=dg(e),r=Na(t),a=this.options,i=a.backgroundColor,s=a.fontColor,l=a.fontSize,c=a.fontStyle,h=a.padding;r.font=l+"px "+c;var d=this.measureWidth(r),v=this.measureHeight();r.fillStyle=i;var m=this.getUpperLeft(r,t);r.fillRect(m.x,m.y,d,v),r.fillStyle=s,this.text.forEach(function(g,x){var w=h+m.x,S=h+m.y+(x+1)*l;r.fillText(g,w,S)})},n}(),PP=function(){function n(e){e===void 0&&(e={});var t=e.boxColor,r=e.lineWidth,a=e.label,i=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=a;var s={anchorPosition:vi.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new l_(Object.assign({},s,i))}return n}(),UP=function(){function n(e,t){t===void 0&&(t={}),this.box=new ta(e),this.options=new PP(t)}return n.prototype.draw=function(e){var t=Na(e),r=this.options,a=r.boxColor,i=r.lineWidth,s=this.box,l=s.x,c=s.y,h=s.width,d=s.height;t.strokeStyle=a,t.lineWidth=i,t.strokeRect(l,c,h,d);var v=this.options.label;v&&new c_([v],{x:l-i/2,y:c},this.options.drawLabelOptions).draw(e)},n}();function WU(n,e){var t=Array.isArray(e)?e:[e];t.forEach(function(r){var a=r instanceof rr?r.score:Qs(r)?r.detection.score:void 0,i=r instanceof rr?r.box:Qs(r)?r.detection.box:new ta(r),s=a?""+lg(a):void 0;new UP(i,{label:s}).draw(n)})}function f_(n){var e=xn.getEnv(),t=e.Image,r=e.Video;return n instanceof t&&n.complete||n instanceof r&&n.readyState>=3}function HP(n){return new Promise(function(e,t){if(n instanceof xn.getEnv().Canvas||f_(n))return e();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),e(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}n.addEventListener("load",r),n.addEventListener("error",a)})}function pg(n){var e=xn.getEnv(),t=e.Image,r=e.Video;return n instanceof t?new Yi(n.naturalWidth,n.naturalHeight):n instanceof r?new Yi(n.videoWidth,n.videoHeight):new Yi(n.width,n.height)}function sh(n){var e=n.width,t=n.height,r=xn.getEnv().createCanvasElement,a=r();return a.width=e,a.height=t,a}function vg(n,e){var t=xn.getEnv().ImageData;if(!(n instanceof t)&&!f_(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=pg(n),a=r.width,i=r.height,s=sh({width:a,height:i});return n instanceof t?Na(s).putImageData(n,0,0):Na(s).drawImage(n,0,0,a,i),s}function VP(n,e){return Re(this,void 0,void 0,function(){var t,r,a,i,s,l;return Ae(this,function(c){switch(c.label){case 0:return t=xn.getEnv().createCanvasElement(),r=n.shape.slice(bi(n)?1:0),a=r[0],i=r[1],s=r[2],l=be(function(){return n.as3D(a,i,s).toInt()}),[4,sg.toPixels(l,t)];case 1:return c.sent(),l.dispose(),[2,t]}})})}function o2(n){var e=xn.getEnv(),t=e.Image,r=e.Canvas,a=e.Video;return n instanceof t||n instanceof r||n instanceof a}function jP(n,e,t){t===void 0&&(t=!1);var r=xn.getEnv(),a=r.Image,i=r.Canvas;if(!(n instanceof a||n instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=pg(n),l=e/Math.max(s.height,s.width),c=l*s.width,h=l*s.height,d=sh({width:e,height:e}),v=n instanceof i?n:vg(n),m=Math.abs(c-h)/2,g=t&&c<h?m:0,x=t&&h<c?m:0;return Na(d).drawImage(v,g,x,c,h),d}var Lf=function(){function n(e,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(a,i){if(oh(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(bi(a)){var s=a.shape[0];if(s!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var l=a instanceof xn.getEnv().Canvas?a:vg(a);r._canvases[i]=l,r._inputDimensions[i]=[l.height,l.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var e=this;return $s(this.batchSize,0,1).map(function(t,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},n.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},n.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},n.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},n.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),r=this.getInputHeight(e);return TP({width:t,height:r},this.inputSize)},n.prototype.toBatchTensor=function(e,t){var r=this;return t===void 0&&(t=!0),this._inputSize=e,be(function(){var a=$s(r.batchSize,0,1).map(function(s){var l=r.getInput(s);if(l instanceof Et){var c=bi(l)?l:l.expandDims();return c=kP(c,t),(c.shape[1]!==e||c.shape[2]!==e)&&(c=ng.resizeBilinear(c,[e,e])),c.as3D(e,e,3)}if(l instanceof xn.getEnv().Canvas)return sg.fromPixels(jP(l,e,t));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),i=nr(a.map(function(s){return s.toFloat()})).as4D(r.batchSize,e,e,3);return i})},n}();function en(n){return Re(this,void 0,void 0,function(){var e,t,r;return Ae(this,function(a){switch(a.label){case 0:if(n instanceof Lf)return[2,n];if(e=Array.isArray(n)?n:[n],!e.length)throw new Error("toNetInput - empty array passed as input");return t=function(i){return Array.isArray(n)?" at input index "+i+":":""},r=e.map(dg),r.forEach(function(i,s){if(!o2(i)&&!oh(i)&&!bi(i))throw typeof e[s]=="string"?new Error("toNetInput -"+t(s)+" string passed, but could not resolve HTMLElement for element id "+e[s]):new Error("toNetInput -"+t(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(bi(i)){var l=i.shape[0];if(l!==1)throw new Error("toNetInput -"+t(s)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return o2(i)&&HP(i)}))];case 1:return a.sent(),[2,new Lf(r,Array.isArray(n))]}})})}function mg(n,e){return Re(this,void 0,void 0,function(){var t,r,a,i,s,l,c;return Ae(this,function(h){switch(h.label){case 0:return t=xn.getEnv().Canvas,r=n,n instanceof t?[3,5]:[4,en(n)];case 1:if(a=h.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof t?(s=i,[3,4]):[3,2];case 2:return[4,VP(i)];case 3:s=h.sent(),h.label=4;case 4:r=s,h.label=5;case 5:return l=Na(r),c=e.map(function(d){return d instanceof rr?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(d){var v=d.x,m=d.y,g=d.width,x=d.height,w=sh({width:g,height:x});return Na(w).putImageData(l.getImageData(v,m,g,x),0,0),w})]}})})}function gg(n,e){return Re(this,void 0,void 0,function(){return Ae(this,function(t){if(!oh(n)&&!bi(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(bi(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,be(function(){var r=n.shape.slice(bi(n)?1:0),a=r[0],i=r[1],s=r[2],l=e.map(function(h){return h instanceof rr?h.forSize(i,a).box:h}).map(function(h){return h.clipAtImageBorders(i,a)}),c=l.map(function(h){var d=h.x,v=h.y,m=h.width,g=h.height;return zE(n.as3D(a,i,s),[v,d,0],[g,m,s])});return c})]})})}function WP(n,e){return Re(this,void 0,void 0,function(){var t,r;return Ae(this,function(a){switch(a.label){case 0:return t=xn.getEnv().fetch,[4,t(n,e)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function GP(n){return Re(this,void 0,void 0,function(){return Ae(this,function(e){switch(e.label){case 0:return[4,WP(n)];case 1:return[2,e.sent().json()]}})})}function h_(n,e){var t=e+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:t};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var a=n.split("/").filter(function(l){return l}),i=n.endsWith(".json")?a[a.length-1]:t,s=r+(n.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return s=n.startsWith("/")?"/"+s:s,{modelBaseUri:s,manifestUri:s==="/"?"/"+i:s+"/"+i}}function qP(n,e){return Re(this,void 0,void 0,function(){var t,r,a,i;return Ae(this,function(s){switch(s.label){case 0:return t=h_(n,e),r=t.manifestUri,a=t.modelBaseUri,[4,GP(r)];case 1:return i=s.sent(),[2,t_.loadWeights(i,a)]}})})}function GU(n,e,t){t===void 0&&(t=!1);var r=t?pg(e):e,a=r.width,i=r.height;return n.width=a,n.height=i,{width:a,height:i}}var La=function(){function n(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),r=t.obj,a=t.objProp;return r[a]},n.prototype.reassignParamFromPath=function(e,t){var r=this.traversePropertyPath(e),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=t},n.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof wu})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof wu)})},n.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var r=t.path,a=t.tensor;e.reassignParamFromPath(r,a.variable())})},n.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var r=t.path,a=t.tensor,i=hn(a.dataSync());a.dispose(),e.reassignParamFromPath(r,i)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},n.prototype.load=function(e){return Re(this,void 0,void 0,function(){return Ae(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},n.prototype.loadFromUri=function(e){return Re(this,void 0,void 0,function(){var t;return Ae(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,qP(e,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},n.prototype.loadFromDisk=function(e){return Re(this,void 0,void 0,function(){var t,r,a,i,s,l,c,h,d,v;return Ae(this,function(m){switch(m.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=xn.getEnv().readFile,r=h_(e,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,s=function(g){return Promise.all(g.map(function(x){return t(x).then(function(w){return w.buffer})}))},l=t_.weightsLoaderFactory(s),d=(h=JSON).parse,[4,t(a)];case 1:return c=d.apply(h,[m.sent().toString()]),[4,l(c,i)];case 2:return v=m.sent(),this.loadFromWeightMap(v),[2]}})})},n.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.extractWeights=function(e){var t=this.extractParams(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(i,s){if(!i.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+e);return{obj:i.nextObj,objProp:s,nextObj:i.nextObj[s]}},{nextObj:this.params}),r=t.obj,a=t.objProp;if(!r||!a||!(r[a]instanceof Et))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:a}},n}();function er(n,e,t){return be(function(){var r=Ym(n,e.depthwise_filter,e.pointwise_filter,t,"same");return r=je(r,e.bias),r})}function vv(n,e,t){return t===void 0&&(t=!1),be(function(){var r=_t(t?je(Sr(n,e.conv0.filters,[2,2],"same"),e.conv0.bias):er(n,e.conv0,[2,2])),a=er(r,e.conv1,[1,1]),i=_t(je(r,a)),s=er(i,e.conv2,[1,1]);return _t(je(r,je(a,s)))})}function Jc(n,e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),be(function(){var a=_t(t?je(Sr(n,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):er(n,e.conv0,r?[2,2]:[1,1])),i=er(a,e.conv1,[1,1]),s=_t(je(a,i)),l=er(s,e.conv2,[1,1]),c=_t(je(a,je(i,l))),h=er(c,e.conv3,[1,1]);return _t(je(a,je(i,je(l,h))))})}function Or(n,e,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),be(function(){var a=je(Sr(n,e.filters,[1,1],t),e.bias);return r?_t(a):a})}function za(n,e){Object.keys(n).forEach(function(t){e.some(function(r){return r.originalPath===t})||n[t].dispose()})}function lh(n,e){return function(t,r,a,i){var s=Mn(n(t*r*a*a),[a,a,t,r]),l=Ut(n(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:s,bias:l}}}function yg(n,e){return function(t,r,a){var i=gi(n(t*r),[t,r]),s=Ut(n(r));return e.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:s}}}var d_=function(){function n(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}return n}();function bg(n,e){return function(t,r,a){var i=Mn(n(9*t),[3,3,t,1]),s=Mn(n(t*r),[1,1,t,r]),l=Ut(n(r));return e.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new d_(i,s,l)}}function xg(n){return function(e){var t=n(e+"/depthwise_filter",4),r=n(e+"/pointwise_filter",4),a=n(e+"/bias",1);return new d_(t,r,a)}}function _i(n,e){return function(t,r,a){var i=n[t];if(!ih(i,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+i);return e.push({originalPath:t,paramPath:a||t}),i}}function Pa(n){var e=n;function t(a){var i=e.slice(0,a);return e=e.slice(a),i}function r(){return e}return{extractWeights:t,getRemainingWeights:r}}function p_(n,e){var t=lh(n,e),r=bg(n,e);function a(s,l,c,h){h===void 0&&(h=!1);var d=h?t(s,l,3,c+"/conv0"):r(s,l,c+"/conv0"),v=r(l,l,c+"/conv1"),m=r(l,l,c+"/conv2");return{conv0:d,conv1:v,conv2:m}}function i(s,l,c,h){h===void 0&&(h=!1);var d=a(s,l,c,h),v=d.conv0,m=d.conv1,g=d.conv2,x=r(l,l,c+"/conv3");return{conv0:v,conv1:m,conv2:g,conv3:x}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function KP(n){var e=[],t=Pa(n),r=t.extractWeights,a=t.getRemainingWeights,i=p_(r,e).extractDenseBlock4Params,s=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2"),h=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:s,dense1:l,dense2:c,dense3:h}}}function v_(n){return function(e){var t=n(e+"/filters",4),r=n(e+"/bias",1);return{filters:t,bias:r}}}function m_(n,e){var t=_i(n,e),r=v_(t),a=xg(t);function i(l,c){c===void 0&&(c=!1);var h=c?r(l+"/conv0"):a(l+"/conv0"),d=a(l+"/conv1"),v=a(l+"/conv2");return{conv0:h,conv1:d,conv2:v}}function s(l,c){c===void 0&&(c=!1);var h=c?r(l+"/conv0"):a(l+"/conv0"),d=a(l+"/conv1"),v=a(l+"/conv2"),m=a(l+"/conv3");return{conv0:h,conv1:d,conv2:v,conv3:m}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:s}}function XP(n){var e=[],t=m_(n,e).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return za(n,e),{params:r,paramMappings:e}}var g_=function(n){Ie(e,n);function e(){return n.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return be(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=pl(a,i).div(ge(255)),l=Jc(s,r.dense0,!0);return l=Jc(l,r.dense1),l=Jc(l,r.dense2),l=Jc(l,r.dense3),l=hl(l,[7,7],[2,2],"valid"),l})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return XP(t)},e.prototype.extractParams=function(t){return KP(t)},e}(La);function $r(n,e){return be(function(){return je(nh(n,e.weights),e.bias)})}function $P(n,e,t){var r=[],a=Pa(n),i=a.extractWeights,s=a.getRemainingWeights,l=yg(i,r),c=l(e,t,"fc");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:c}}}function ZP(n){var e=[],t=_i(n,e);function r(i){var s=t(i+"/weights",2),l=t(i+"/bias",1);return{weights:s,bias:l}}var a={fc:r("fc")};return za(n,e),{params:a,paramMappings:e}}function y_(n){var e={},t={};return Object.keys(n).forEach(function(r){var a=r.startsWith("fc")?t:e;a[r]=n[r]}),{featureExtractorMap:e,classifierMap:t}}var b_=function(n){Ie(e,n);function e(t,r){var a=n.call(this,t)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return be(function(){var i=t instanceof Lf?r.faceFeatureExtractor.forwardInput(t):t;return $r(i.as2D(i.shape[0],-1),a.fc)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return $P(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var r=y_(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),ZP(i)},e.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,s=t.slice(0,t.length-i),l=t.slice(t.length-i);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(l)},e}(La),u2=["neutral","happy","sad","angry","fearful","disgusted","surprised"],wg=function(){function n(e){var t=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);u2.forEach(function(r,a){t[r]=e[a]})}return n.prototype.asSortedArray=function(){var e=this;return u2.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,r){return r.probability-t.probability})},n}(),YP=function(n){Ie(e,n);function e(t){return t===void 0&&(t=new g_),n.call(this,"FaceExpressionNet",t)||this}return e.prototype.forwardInput=function(t){var r=this;return be(function(){return Fa(r.runNet(t))})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictExpressions=function(t){return Re(this,void 0,void 0,function(){var r,a,i,s,l=this;return Ae(this,function(c){switch(c.label){case 0:return[4,en(t)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(qt(a).map(function(h){return Re(l,void 0,void 0,function(){var d;return Ae(this,function(v){switch(v.label){case 0:return[4,h.data()];case 1:return d=v.sent(),h.dispose(),[2,d]}})})}))];case 3:return i=c.sent(),a.dispose(),s=i.map(function(h){return new wg(h)}),[2,r.isBatchInput?s:s[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(b_);function QP(n){return n.expressions instanceof wg}function x_(n,e){var t={expressions:e};return Object.assign({},n,t)}function qU(n,e,t,r){t===void 0&&(t=.1);var a=Array.isArray(e)?e:[e];a.forEach(function(i){var s=i instanceof wg?i:QP(i)?i.expressions:void 0;if(!s)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var l=s.asSortedArray(),c=l.filter(function(v){return v.probability>t}),h=Qs(i)?i.detection.box.bottomLeft:new tt(0,0),d=new c_(c.map(function(v){return v.expression+" ("+lg(v.probability)+")"}),h);d.draw(n)})}function w_(n){return Qs(n)&&n.landmarks instanceof Ys&&n.unshiftedLandmarks instanceof Ys&&n.alignedRect instanceof rr}function ch(n,e){var t=n.detection.box,r=e.shiftBy(t.x,t.y),a=r.align(),i=n.detection.imageDims,s=new rr(n.detection.score,a.rescale(i.reverse()),i),l={landmarks:r,unshiftedLandmarks:e,alignedRect:s};return Object.assign({},n,l)}function JP(n,e){var t=lh(n,e),r=bg(n,e);function a(s,l,c){var h=r(s,l,c+"/separable_conv0"),d=r(l,l,c+"/separable_conv1"),v=t(s,l,1,c+"/expansion_conv");return{separable_conv0:h,separable_conv1:d,expansion_conv:v}}function i(s,l){var c=r(s,s,l+"/separable_conv0"),h=r(s,s,l+"/separable_conv1"),d=r(s,s,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:h,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function e6(n,e){var t=[],r=Pa(n),a=r.extractWeights,i=r.getRemainingWeights,s=JP(a,t),l=s.extractConvParams,c=s.extractSeparableConvParams,h=s.extractReductionBlockParams,d=s.extractMainBlockParams,v=l(3,32,3,"entry_flow/conv_in"),m=h(32,64,"entry_flow/reduction_block_0"),g=h(64,128,"entry_flow/reduction_block_1"),x={conv_in:v,reduction_block_0:m,reduction_block_1:g},w={};$s(e,0,1).forEach(function(R){w["main_block_"+R]=d(128,"middle_flow/main_block_"+R)});var S=h(128,256,"exit_flow/reduction_block"),E=c(256,512,"exit_flow/separable_conv"),_={reduction_block:S,separable_conv:E};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{entry_flow:x,middle_flow:w,exit_flow:_}}}function t6(n,e){var t=_i(n,e),r=v_(t),a=xg(t);function i(l){var c=a(l+"/separable_conv0"),h=a(l+"/separable_conv1"),d=r(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:h,expansion_conv:d}}function s(l){var c=a(l+"/separable_conv0"),h=a(l+"/separable_conv1"),d=a(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:h,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:s}}function n6(n,e){var t=[],r=t6(n,t),a=r.extractConvParams,i=r.extractSeparableConvParams,s=r.extractReductionBlockParams,l=r.extractMainBlockParams,c=a("entry_flow/conv_in"),h=s("entry_flow/reduction_block_0"),d=s("entry_flow/reduction_block_1"),v={conv_in:c,reduction_block_0:h,reduction_block_1:d},m={};$s(e,0,1).forEach(function(S){m["main_block_"+S]=l("middle_flow/main_block_"+S)});var g=s("exit_flow/reduction_block"),x=i("exit_flow/separable_conv"),w={reduction_block:g,separable_conv:x};return za(n,t),{params:{entry_flow:v,middle_flow:m,exit_flow:w},paramMappings:t}}function S_(n,e,t){return je(Sr(n,e.filters,t,"same"),e.bias)}function mv(n,e,t){t===void 0&&(t=!0);var r=t?_t(n):n;return r=er(r,e.separable_conv0,[1,1]),r=er(_t(r),e.separable_conv1,[1,1]),r=Qt(r,[3,3],[2,2],"same"),r=je(r,S_(n,e.expansion_conv,[2,2])),r}function r6(n,e){var t=er(_t(n),e.separable_conv0,[1,1]);return t=er(_t(t),e.separable_conv1,[1,1]),t=er(_t(t),e.separable_conv2,[1,1]),t=je(t,n),t}var a6=function(n){Ie(e,n);function e(t){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return e.prototype.forwardInput=function(t){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return be(function(){var i=t.toBatchTensor(112,!0),s=[122.782,117.001,104.298],l=pl(i,s).div(ge(256)),c=_t(S_(l,a.entry_flow.conv_in,[2,2]));return c=mv(c,a.entry_flow.reduction_block_0,!1),c=mv(c,a.entry_flow.reduction_block_1),$s(r._numMainBlocks,0,1).forEach(function(h){c=r6(c,a.middle_flow["main_block_"+h])}),c=mv(c,a.exit_flow.reduction_block),c=_t(er(c,a.exit_flow.separable_conv,[1,1])),c})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return n6(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return e6(t,this._numMainBlocks)},e}(La);function i6(n){var e=[],t=Pa(n),r=t.extractWeights,a=t.getRemainingWeights,i=yg(r,e),s=i(512,1,"fc/age"),l=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{fc:{age:s,gender:l}}}}function o6(n){var e=[],t=_i(n,e);function r(i){var s=t(i+"/weights",2),l=t(i+"/bias",1);return{weights:s,bias:l}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return za(n,e),{params:a,paramMappings:e}}var zf;(function(n){n.FEMALE="female",n.MALE="male"})(zf||(zf={}));var u6=function(n){Ie(e,n);function e(t){t===void 0&&(t=new a6(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return be(function(){var i=t instanceof Lf?r.faceFeatureExtractor.forwardInput(t):t,s=hl(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),l=$r(s,a.fc.age).as1D(),c=$r(s,a.fc.gender);return{age:l,gender:c}})},e.prototype.forwardInput=function(t){var r=this;return be(function(){var a=r.runNet(t),i=a.age,s=a.gender;return{age:i,gender:Fa(s)}})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return Re(this,void 0,void 0,function(){var r,a,i,s,l,c,h=this;return Ae(this,function(d){switch(d.label){case 0:return[4,en(t)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return a=d.sent(),i=qt(a.age),s=qt(a.gender),l=i.map(function(v,m){return{ageTensor:v,genderTensor:s[m]}}),[4,Promise.all(l.map(function(v){var m=v.ageTensor,g=v.genderTensor;return Re(h,void 0,void 0,function(){var x,w,S,E,_;return Ae(this,function(R){switch(R.label){case 0:return[4,m.data()];case 1:return x=R.sent()[0],[4,g.data()];case 2:return w=R.sent()[0],S=w>.5,E=S?zf.MALE:zf.FEMALE,_=S?w:1-w,m.dispose(),g.dispose(),[2,{age:x,gender:E,genderProbability:_}]}})})}))];case 3:return c=d.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return i6(t)},e.prototype.extractParamsFromWeigthMap=function(t){var r=y_(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),o6(i)},e.prototype.extractParams=function(t){var r=1539,a=t.slice(0,t.length-r),i=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},e}(La),E_=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.postProcess=function(t,r,a){var i=a.map(function(l){var c=l.width,h=l.height,d=r/Math.max(h,c);return{width:c*d,height:h*d}}),s=i.length;return be(function(){var l=function(m,g){return nr([Jr([68],m),Jr([68],g)],1).as2D(1,136).as1D()},c=function(m,g){var x=i[m],w=x.width,S=x.height;return g(w,S)?Math.abs(w-S)/2:0},h=function(m){return c(m,function(g,x){return g<x})},d=function(m){return c(m,function(g,x){return x<g})},v=t.mul(Jr([s,136],r)).sub(nr(Array.from(Array(s),function(m,g){return l(h(g),d(g))}))).div(nr(Array.from(Array(s),function(m,g){return l(i[g].width,i[g].height)})));return v})},e.prototype.forwardInput=function(t){var r=this;return be(function(){var a=r.runNet(t);return r.postProcess(a,t.inputSize,t.inputDimensions.map(function(i){var s=i[0],l=i[1];return{height:s,width:l}}))})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.detectLandmarks=function(t){return Re(this,void 0,void 0,function(){var r,a,i,s=this;return Ae(this,function(l){switch(l.label){case 0:return[4,en(t)];case 1:return r=l.sent(),a=be(function(){return qt(s.forwardInput(r))}),[4,Promise.all(a.map(function(c,h){return Re(s,void 0,void 0,function(){var d,v,m,g,x;return Ae(this,function(w){switch(w.label){case 0:return m=(v=Array).from,[4,c.data()];case 1:return d=m.apply(v,[w.sent()]),g=d.filter(function(S,E){return t2(E)}),x=d.filter(function(S,E){return!t2(E)}),[2,new BP(Array(68).fill(0).map(function(S,E){return new tt(g[E],x[E])}),{height:r.getInputHeight(h),width:r.getInputWidth(h)})]}})})}))];case 2:return i=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(b_),__=function(n){Ie(e,n);function e(t){return t===void 0&&(t=new g_),n.call(this,"FaceLandmark68Net",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(E_);function s6(n){var e=[],t=m_(n,e).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return za(n,e),{params:r,paramMappings:e}}function l6(n){var e=[],t=Pa(n),r=t.extractWeights,a=t.getRemainingWeights,i=p_(r,e).extractDenseBlock3Params,s=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:s,dense1:l,dense2:c}}}var c6=function(n){Ie(e,n);function e(){return n.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return be(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=pl(a,i).div(ge(255)),l=vv(s,r.dense0,!0);return l=vv(l,r.dense1),l=vv(l,r.dense2),l=hl(l,[14,14],[2,2],"valid"),l})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return s6(t)},e.prototype.extractParams=function(t){return l6(t)},e}(La),f6=function(n){Ie(e,n);function e(t){return t===void 0&&(t=new c6),n.call(this,"FaceLandmark68TinyNet",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(E_);(function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(__);function h6(n,e){return je(bn(n,e.weights),e.biases)}function Sg(n,e,t,r,a){a===void 0&&(a="same");var i=e.conv,s=i.filters,l=i.bias,c=Sr(n,s,t,a);return c=je(c,l),c=h6(c,e.scale),r?_t(c):c}function d6(n,e){return Sg(n,e,[1,1],!0)}function C_(n,e){return Sg(n,e,[1,1],!1)}function R_(n,e){return Sg(n,e,[2,2],!0,"valid")}function p6(n,e){function t(l,c,h){var d=n(l),v=d.length/(c*h*h);if(AP(v))throw new Error("depth has to be an integer: "+v+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+h);return be(function(){return xi(Mn(d,[c,v,h,h]),[2,3,1,0])})}function r(l,c,h,d){var v=t(l,c,h),m=Ut(n(c));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:v,bias:m}}function a(l,c){var h=Ut(n(l)),d=Ut(n(l));return e.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:h,biases:d}}function i(l,c,h,d){var v=r(l,c,h,d+"/conv"),m=a(c,d+"/scale");return{conv:v,scale:m}}function s(l,c,h,d,v){v===void 0&&(v=!1);var m=i((v?.5:1)*l,c,h,d+"/conv1"),g=i(l,c,h,d+"/conv2");return{conv1:m,conv2:g}}return{extractConvLayerParams:i,extractResidualLayerParams:s}}function v6(n){var e=Pa(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=p6(t,a),s=i.extractConvLayerParams,l=i.extractResidualLayerParams,c=s(4704,32,7,"conv32_down"),h=l(9216,32,3,"conv32_1"),d=l(9216,32,3,"conv32_2"),v=l(9216,32,3,"conv32_3"),m=l(36864,64,3,"conv64_down",!0),g=l(36864,64,3,"conv64_1"),x=l(36864,64,3,"conv64_2"),w=l(36864,64,3,"conv64_3"),S=l(147456,128,3,"conv128_down",!0),E=l(147456,128,3,"conv128_1"),_=l(147456,128,3,"conv128_2"),R=l(589824,256,3,"conv256_down",!0),A=l(589824,256,3,"conv256_1"),C=l(589824,256,3,"conv256_2"),D=l(589824,256,3,"conv256_down_out"),O=be(function(){return xi(gi(t(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var F={conv32_down:c,conv32_1:h,conv32_2:d,conv32_3:v,conv64_down:m,conv64_1:g,conv64_2:x,conv64_3:w,conv128_down:S,conv128_1:E,conv128_2:_,conv256_down:R,conv256_1:A,conv256_2:C,conv256_down_out:D,fc:O};return{params:F,paramMappings:a}}function m6(n,e){var t=_i(n,e);function r(s){var l=t(s+"/scale/weights",1),c=t(s+"/scale/biases",1);return{weights:l,biases:c}}function a(s){var l=t(s+"/conv/filters",4),c=t(s+"/conv/bias",1),h=r(s);return{conv:{filters:l,bias:c},scale:h}}function i(s){return{conv1:a(s+"/conv1"),conv2:a(s+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function g6(n){var e=[],t=m6(n,e),r=t.extractConvLayerParams,a=t.extractResidualLayerParams,i=r("conv32_down"),s=a("conv32_1"),l=a("conv32_2"),c=a("conv32_3"),h=a("conv64_down"),d=a("conv64_1"),v=a("conv64_2"),m=a("conv64_3"),g=a("conv128_down"),x=a("conv128_1"),w=a("conv128_2"),S=a("conv256_down"),E=a("conv256_1"),_=a("conv256_2"),R=a("conv256_down_out"),A=n.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!RP(A))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+A);var C={conv32_down:i,conv32_1:s,conv32_2:l,conv32_3:c,conv64_down:h,conv64_1:d,conv64_2:v,conv64_3:m,conv128_down:g,conv128_1:x,conv128_2:w,conv256_down:S,conv256_1:E,conv256_2:_,conv256_down_out:R,fc:A};return za(n,e),{params:C,paramMappings:e}}function Hr(n,e){var t=d6(n,e.conv1);return t=C_(t,e.conv2),t=je(t,n),t=_t(t),t}function ef(n,e){var t=R_(n,e.conv1);t=C_(t,e.conv2);var r=hl(n,2,2,"valid"),a=bt(r.shape),i=r.shape[3]!==t.shape[3],s=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(s){var l=Fs(t.shape);l[1]=1;var c=bt(l);t=Gt([t,c],1);var h=Fs(t.shape);h[2]=1;var d=bt(h);t=Gt([t,d],2)}return r=i?Gt([r,a],3):r,t=je(r,t),t=_t(t),t}var y6=function(n){Ie(e,n);function e(){return n.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return be(function(){var a=t.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],s=pl(a,i).div(ge(256)),l=R_(s,r.conv32_down);l=Qt(l,3,2,"valid"),l=Hr(l,r.conv32_1),l=Hr(l,r.conv32_2),l=Hr(l,r.conv32_3),l=ef(l,r.conv64_down),l=Hr(l,r.conv64_1),l=Hr(l,r.conv64_2),l=Hr(l,r.conv64_3),l=ef(l,r.conv128_down),l=Hr(l,r.conv128_1),l=Hr(l,r.conv128_2),l=ef(l,r.conv256_down),l=Hr(l,r.conv256_1),l=Hr(l,r.conv256_2),l=ef(l,r.conv256_down_out);var c=l.mean([1,2]),h=nh(c,r.fc);return h})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return Re(this,void 0,void 0,function(){var r,a,i,s=this;return Ae(this,function(l){switch(l.label){case 0:return[4,en(t)];case 1:return r=l.sent(),a=be(function(){return qt(s.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return i=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return g6(t)},e.prototype.extractParams=function(t){return v6(t)},e}(La);function A_(n,e){var t={descriptor:e};return Object.assign({},n,t)}function T_(n,e){var t={age:e};return Object.assign({},n,t)}function D_(n,e,t){var r={gender:e,genderProbability:t};return Object.assign({},n,r)}var O_=function(){function n(e){var t=e===void 0?{}:e,r=t.minFaceSize,a=t.scaleFactor,i=t.maxNumScales,s=t.scoreThresholds,l=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n}();function b6(n,e){function t(c,h){var d=Mn(n(9*c),[3,3,c,1]),v=Ut(n(c)),m=Ut(n(c)),g=Ut(n(c)),x=Ut(n(c));return e.push({paramPath:h+"/filters"},{paramPath:h+"/batch_norm_scale"},{paramPath:h+"/batch_norm_offset"},{paramPath:h+"/batch_norm_mean"},{paramPath:h+"/batch_norm_variance"}),{filters:d,batch_norm_scale:v,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:x}}function r(c,h,d,v,m){var g=Mn(n(c*h*d*d),[d,d,c,h]),x=Ut(n(h));return e.push({paramPath:v+"/filters"},{paramPath:v+"/"+(m?"batch_norm_offset":"bias")}),{filters:g,bias:x}}function a(c,h,d,v){var m=r(c,h,d,v,!0),g=m.filters,x=m.bias;return{filters:g,batch_norm_offset:x}}function i(c,h,d){var v=t(c,d+"/depthwise_conv"),m=a(c,h,1,d+"/pointwise_conv");return{depthwise_conv:v,pointwise_conv:m}}function s(){var c=a(3,32,3,"mobilenetv1/conv_0"),h=i(32,64,"mobilenetv1/conv_1"),d=i(64,128,"mobilenetv1/conv_2"),v=i(128,128,"mobilenetv1/conv_3"),m=i(128,256,"mobilenetv1/conv_4"),g=i(256,256,"mobilenetv1/conv_5"),x=i(256,512,"mobilenetv1/conv_6"),w=i(512,512,"mobilenetv1/conv_7"),S=i(512,512,"mobilenetv1/conv_8"),E=i(512,512,"mobilenetv1/conv_9"),_=i(512,512,"mobilenetv1/conv_10"),R=i(512,512,"mobilenetv1/conv_11"),A=i(512,1024,"mobilenetv1/conv_12"),C=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:h,conv_2:d,conv_3:v,conv_4:m,conv_5:g,conv_6:x,conv_7:w,conv_8:S,conv_9:E,conv_10:_,conv_11:R,conv_12:A,conv_13:C}}function l(){var c=a(1024,256,1,"prediction_layer/conv_0"),h=a(256,512,3,"prediction_layer/conv_1"),d=a(512,128,1,"prediction_layer/conv_2"),v=a(128,256,3,"prediction_layer/conv_3"),m=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),x=a(256,64,1,"prediction_layer/conv_6"),w=a(64,128,3,"prediction_layer/conv_7"),S=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),E=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),_=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),R=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),A=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),C=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),O=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),F=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),I=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),U=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),H={box_encoding_predictor:S,class_predictor:E},J={box_encoding_predictor:_,class_predictor:R},ee={box_encoding_predictor:A,class_predictor:C},ne={box_encoding_predictor:D,class_predictor:O},z={box_encoding_predictor:F,class_predictor:N},W={box_encoding_predictor:I,class_predictor:U};return{conv_0:c,conv_1:h,conv_2:d,conv_3:v,conv_4:m,conv_5:g,conv_6:x,conv_7:w,box_predictor_0:H,box_predictor_1:J,box_predictor_2:ee,box_predictor_3:ne,box_predictor_4:z,box_predictor_5:W}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:l}}function x6(n){var e=[],t=Pa(n),r=t.extractWeights,a=t.getRemainingWeights,i=b6(r,e),s=i.extractMobilenetV1Params,l=i.extractPredictionLayerParams,c=s(),h=l(),d=Bm(r(5118*4),[1,5118,4]),v={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:h,output_layer:v},paramMappings:e}}function w6(n,e){var t=_i(n,e);function r(h,d,v){var m=t(h+"/Conv2d_"+d+"_pointwise/weights",4,v+"/filters"),g=t(h+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,v+"/batch_norm_offset");return{filters:m,batch_norm_offset:g}}function a(h){var d="mobilenetv1/conv_"+h,v="MobilenetV1/Conv2d_"+h+"_depthwise",m=d+"/depthwise_conv",g=d+"/pointwise_conv",x=t(v+"/depthwise_weights",4,m+"/filters"),w=t(v+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),S=t(v+"/BatchNorm/beta",1,m+"/batch_norm_offset"),E=t(v+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),_=t(v+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:x,batch_norm_scale:w,batch_norm_offset:S,batch_norm_mean:E,batch_norm_variance:_},pointwise_conv:r("MobilenetV1",h,g)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function s(h,d){var v=t(h+"/weights",4,d+"/filters"),m=t(h+"/biases",1,d+"/bias");return{filters:v,bias:m}}function l(h){var d=s("Prediction/BoxPredictor_"+h+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+h+"/box_encoding_predictor"),v=s("Prediction/BoxPredictor_"+h+"/ClassPredictor","prediction_layer/box_predictor_"+h+"/class_predictor");return{box_encoding_predictor:d,class_predictor:v}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function S6(n){var e=[],t=w6(n,e),r=t.extractMobilenetV1Params,a=t.extractPredictionLayerParams,i=n["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!oh(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var s={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return za(n,e),{params:s,paramMappings:e}}function Vr(n,e,t){return be(function(){var r=Sr(n,e.filters,t,"same");return r=je(r,e.batch_norm_offset),Km(r,0,6)})}var E6=.0010000000474974513;function _6(n,e,t){return be(function(){var r=th(n,e.filters,t,"same");return r=EE(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,E6),Km(r,0,6)})}function C6(n){return[2,4,6,12].some(function(e){return e===n})?[2,2]:[1,1]}function R6(n,e){return be(function(){var t=null,r=Vr(n,e.conv_0,[2,2]),a=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(a.forEach(function(i,s){var l=s+1,c=C6(l);r=_6(r,i.depthwise_conv,c),r=Vr(r,i.pointwise_conv,[1,1]),l===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function A6(n,e,t,r,a){var i=n.shape[0],s=Math.min(t,i),l=e.map(function(d,v){return{score:d,boxIndex:v}}).filter(function(d){return d.score>a}).sort(function(d,v){return v.score-d.score}),c=function(d){return d<=r?1:0},h=[];return l.forEach(function(d){if(!(h.length>=s)){for(var v=d.score,m=h.length-1;m>=0;--m){var g=T6(n,d.boxIndex,h[m]);if(g!==0&&(d.score*=c(g),d.score<=a))break}v===d.score&&h.push(d.boxIndex)}}),h}function T6(n,e,t){var r=n.arraySync(),a=Math.min(r[e][0],r[e][2]),i=Math.min(r[e][1],r[e][3]),s=Math.max(r[e][0],r[e][2]),l=Math.max(r[e][1],r[e][3]),c=Math.min(r[t][0],r[t][2]),h=Math.min(r[t][1],r[t][3]),d=Math.max(r[t][0],r[t][2]),v=Math.max(r[t][1],r[t][3]),m=(s-a)*(l-i),g=(d-c)*(v-h);if(m<=0||g<=0)return 0;var x=Math.max(a,c),w=Math.max(i,h),S=Math.min(s,d),E=Math.min(l,v),_=Math.max(S-x,0)*Math.max(E-w,0);return _/(m+g-_)}function D6(n){var e=qt(xi(n,[1,0])),t=[Xt(e[2],e[0]),Xt(e[3],e[1])],r=[je(e[0],Tr(t[0],ge(2))),je(e[1],Tr(t[1],ge(2)))];return{sizes:t,centers:r}}function O6(n,e){var t=D6(n),r=t.sizes,a=t.centers,i=qt(xi(e,[1,0])),s=Tr(bn(Jv(Tr(i[2],ge(5))),r[0]),ge(2)),l=je(bn(Tr(i[0],ge(10)),r[0]),a[0]),c=Tr(bn(Jv(Tr(i[3],ge(5))),r[1]),ge(2)),h=je(bn(Tr(i[1],ge(10)),r[1]),a[1]);return xi(nr([Xt(l,s),Xt(h,c),je(l,s),je(h,c)]),[1,0])}function k6(n,e,t){return be(function(){var r=n.shape[0],a=O6(Dr(cu(t.extra_dim,[r,1,1]),[-1,4]),Dr(n,[-1,4]));a=Dr(a,[r,a.shape[0]/r,4]);var i=bE(ea(e,[0,0,1],[-1,-1,-1])),s=ea(i,[0,0,0],[-1,-1,1]);s=Dr(s,[r,s.shape[1]]);var l=qt(a),c=qt(s);return{boxes:l,scores:c}})}function Jo(n,e){return be(function(){var t=n.shape[0],r=Dr(Or(n,e.box_encoding_predictor),[t,-1,1,4]),a=Dr(Or(n,e.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function N6(n,e,t){return be(function(){var r=Vr(n,t.conv_0,[1,1]),a=Vr(r,t.conv_1,[2,2]),i=Vr(a,t.conv_2,[1,1]),s=Vr(i,t.conv_3,[2,2]),l=Vr(s,t.conv_4,[1,1]),c=Vr(l,t.conv_5,[2,2]),h=Vr(c,t.conv_6,[1,1]),d=Vr(h,t.conv_7,[2,2]),v=Jo(e,t.box_predictor_0),m=Jo(n,t.box_predictor_1),g=Jo(a,t.box_predictor_2),x=Jo(s,t.box_predictor_3),w=Jo(c,t.box_predictor_4),S=Jo(d,t.box_predictor_5),E=Gt([v.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,x.boxPredictionEncoding,w.boxPredictionEncoding,S.boxPredictionEncoding],1),_=Gt([v.classPrediction,m.classPrediction,g.classPrediction,x.classPrediction,w.classPrediction,S.classPrediction],1);return{boxPredictions:E,classPredictions:_}})}var fh=function(){function n(e){var t=e===void 0?{}:e,r=t.minConfidence,a=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n}(),k_=function(n){Ie(e,n);function e(){return n.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return be(function(){var a=t.toBatchTensor(512,!1).toFloat(),i=Xt(bn(a,ge(.007843137718737125)),ge(1)),s=R6(i,r.mobilenetv1),l=N6(s.out,s.conv11,r.prediction_layer),c=l.boxPredictions,h=l.classPredictions;return k6(c,h,r.output_layer)})},e.prototype.forward=function(t){return Re(this,void 0,void 0,function(){var r;return Ae(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,en(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Re(this,void 0,void 0,function(){var a,i,s,l,c,h,d,v,m,g,x,w,S,E,_,R,A,C,D,O,F;return Ae(this,function(N){switch(N.label){case 0:return a=new fh(r),i=a.maxResults,s=a.minConfidence,[4,en(t)];case 1:for(l=N.sent(),c=this.forwardInput(l),h=c.boxes,d=c.scores,v=h[0],m=d[0],g=1;g<h.length;g++)h[g].dispose(),d[g].dispose();return S=(w=Array).from,[4,m.data()];case 2:return x=S.apply(w,[N.sent()]),E=.5,_=A6(v,x,i,E,s),R=l.getReshapedInputDimensions(0),A=l.inputSize,C=A/R.width,D=A/R.height,O=v.arraySync(),F=_.map(function(I){var U=[Math.max(0,O[I][0]),Math.min(1,O[I][2])].map(function(W){return W*D}),H=U[0],J=U[1],ee=[Math.max(0,O[I][1]),Math.min(1,O[I][3])].map(function(W){return W*C}),ne=ee[0],z=ee[1];return new rr(x[I],new fg(ne,H,z-ne,J-H),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),v.dispose(),m.dispose(),[2,F]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return S6(t)},e.prototype.extractParams=function(t){return x6(t)},e}(La);(function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(k_);var M6=.4,I6=[new tt(.738768,.874946),new tt(2.42204,2.65704),new tt(4.30971,7.04493),new tt(10.246,4.59428),new tt(12.6868,11.8741)],F6=[new tt(1.603231,2.094468),new tt(6.041143,7.080126),new tt(2.882459,3.518061),new tt(4.266906,5.178857),new tt(9.041765,10.66308)],B6=[117.001,114.697,97.404],L6="tiny_yolov2_model",z6="tiny_yolov2_separable_conv_model",tf=function(n){return typeof n=="number"};function P6(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!tf(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(e){return e||{}}).every(function(e){return tf(e.x)&&tf(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every(tf)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function Eg(n){return be(function(){var e=bn(n,ge(.10000000149011612));return je(_t(Xt(n,e)),e)})}function ci(n,e){return be(function(){var t=io(n,[[0,0],[1,1],[1,1],[0,0]]);return t=Sr(t,e.conv.filters,[1,1],"valid"),t=Xt(t,e.bn.sub),t=bn(t,e.bn.truediv),t=je(t,e.conv.bias),Eg(t)})}function fi(n,e){return be(function(){var t=io(n,[[0,0],[1,1],[1,1],[0,0]]);return t=Ym(t,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t=je(t,e.bias),Eg(t)})}function U6(n,e){var t=lh(n,e);function r(s,l){var c=Ut(n(s)),h=Ut(n(s));return e.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:h}}function a(s,l,c){var h=t(s,l,3,c+"/conv"),d=r(l,c+"/bn");return{conv:h,bn:d}}var i=bg(n,e);return{extractConvParams:t,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function H6(n,e,t,r){var a=Pa(n),i=a.extractWeights,s=a.getRemainingWeights,l=[],c=U6(i,l),h=c.extractConvParams,d=c.extractConvWithBatchNormParams,v=c.extractSeparableConvParams,m;if(e.withSeparableConvs){var g=r[0],x=r[1],w=r[2],S=r[3],E=r[4],_=r[5],R=r[6],A=r[7],C=r[8],D=e.isFirstLayerConv2d?h(g,x,3,"conv0"):v(g,x,"conv0"),O=v(x,w,"conv1"),F=v(w,S,"conv2"),N=v(S,E,"conv3"),I=v(E,_,"conv4"),U=v(_,R,"conv5"),H=A?v(R,A,"conv6"):void 0,J=C?v(A,C,"conv7"):void 0,ee=h(C||A||R,5*t,1,"conv8");m={conv0:D,conv1:O,conv2:F,conv3:N,conv4:I,conv5:U,conv6:H,conv7:J,conv8:ee}}else{var g=r[0],x=r[1],w=r[2],S=r[3],E=r[4],_=r[5],R=r[6],A=r[7],C=r[8],D=d(g,x,"conv0"),O=d(x,w,"conv1"),F=d(w,S,"conv2"),N=d(S,E,"conv3"),I=d(E,_,"conv4"),U=d(_,R,"conv5"),H=d(R,A,"conv6"),J=d(A,C,"conv7"),ee=h(C,5*t,1,"conv8");m={conv0:D,conv1:O,conv2:F,conv3:N,conv4:I,conv5:U,conv6:H,conv7:J,conv8:ee}}if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:m,paramMappings:l}}function V6(n,e){var t=_i(n,e);function r(l){var c=t(l+"/sub",1),h=t(l+"/truediv",1);return{sub:c,truediv:h}}function a(l){var c=t(l+"/filters",4),h=t(l+"/bias",1);return{filters:c,bias:h}}function i(l){var c=a(l+"/conv"),h=r(l+"/bn");return{conv:c,bn:h}}var s=xg(t);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:s}}function j6(n,e){var t=[],r=V6(n,t),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,s=r.extractSeparableConvParams,l;if(e.withSeparableConvs){var c=e.filterSizes&&e.filterSizes.length||9;l={conv0:e.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:c>7?s("conv6"):void 0,conv7:c>8?s("conv7"):void 0,conv8:a("conv8")}}else l={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return za(n,t),{params:l,paramMappings:t}}var s2;(function(n){n[n.XS=224]="XS",n[n.SM=320]="SM",n[n.MD=416]="MD",n[n.LG=608]="LG"})(s2||(s2={}));var _g=function(){function n(e){var t=e===void 0?{}:e,r=t.inputSize,a=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n}(),N_=function(n){Ie(e,n);function e(t){var r=n.call(this,"TinyYolov2")||this;return P6(t),r._config=t,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,r){var a=ci(t,r.conv0);return a=Qt(a,[2,2],[2,2],"same"),a=ci(a,r.conv1),a=Qt(a,[2,2],[2,2],"same"),a=ci(a,r.conv2),a=Qt(a,[2,2],[2,2],"same"),a=ci(a,r.conv3),a=Qt(a,[2,2],[2,2],"same"),a=ci(a,r.conv4),a=Qt(a,[2,2],[2,2],"same"),a=ci(a,r.conv5),a=Qt(a,[2,2],[1,1],"same"),a=ci(a,r.conv6),a=ci(a,r.conv7),Or(a,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,r){var a=this.config.isFirstLayerConv2d?Eg(Or(t,r.conv0,"valid",!1)):fi(t,r.conv0);return a=Qt(a,[2,2],[2,2],"same"),a=fi(a,r.conv1),a=Qt(a,[2,2],[2,2],"same"),a=fi(a,r.conv2),a=Qt(a,[2,2],[2,2],"same"),a=fi(a,r.conv3),a=Qt(a,[2,2],[2,2],"same"),a=fi(a,r.conv4),a=Qt(a,[2,2],[2,2],"same"),a=fi(a,r.conv5),a=Qt(a,[2,2],[1,1],"same"),a=r.conv6?fi(a,r.conv6):a,a=r.conv7?fi(a,r.conv7):a,Or(a,r.conv8,"valid",!1)},e.prototype.forwardInput=function(t,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return be(function(){var s=t.toBatchTensor(r,!1).toFloat();return s=a.config.meanRgb?pl(s,a.config.meanRgb):s,s=s.div(ge(256)),a.config.withSeparableConvs?a.runMobilenet(s,i):a.runTinyYolov2(s,i)})},e.prototype.forward=function(t,r){return Re(this,void 0,void 0,function(){var a;return Ae(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,en(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},e.prototype.detect=function(t,r){return r===void 0&&(r={}),Re(this,void 0,void 0,function(){var a,i,s,l,c,h,d,v,m,g,x,w,S,E,_=this;return Ae(this,function(R){switch(R.label){case 0:return a=new _g(r),i=a.inputSize,s=a.scoreThreshold,[4,en(t)];case 1:return l=R.sent(),[4,this.forwardInput(l,i)];case 2:return c=R.sent(),h=be(function(){return qt(c)[0].expandDims()}),d={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(h,l.getReshapedInputDimensions(0),s)];case 3:return v=R.sent(),c.dispose(),h.dispose(),m=v.map(function(A){return A.box}),g=v.map(function(A){return A.score}),x=v.map(function(A){return A.classScore}),w=v.map(function(A){return _.config.classes[A.label]}),S=Zs(m.map(function(A){return A.rescale(i)}),g,this.config.iouThreshold,!0),E=S.map(function(A){return new r_(g[A],x[A],w[A],m[A],d)}),[2,E]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return j6(t,this.config)},e.prototype.extractParams=function(t){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return H6(t,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(t,r,a){return Re(this,void 0,void 0,function(){var i,s,l,c,h,d,v,m,g,x,w,S,E,_,R,A,C,D,O,F,N,I,U,H,J,ee,ne,z,W,q=this;return Ae(this,function(re){switch(re.label){case 0:return i=r.width,s=r.height,l=Math.max(i,s),c=l/i,h=l/s,d=t.shape[1],v=this.config.anchors.length,m=be(function(){var ue=t.reshape([d,d,v,q.boxEncodingSize]),B=ue.slice([0,0,0,0],[d,d,v,4]),X=ue.slice([0,0,0,4],[d,d,v,1]),oe=q.withClassScores?Fa(ue.slice([0,0,0,5],[d,d,v,q.config.classes.length]),3):ge(0);return[B,X,oe]}),g=m[0],x=m[1],w=m[2],S=[],[4,x.array()];case 1:return E=re.sent(),[4,g.array()];case 2:_=re.sent(),R=0,re.label=3;case 3:if(!(R<d))return[3,12];A=0,re.label=4;case 4:if(!(A<d))return[3,11];C=0,re.label=5;case 5:return C<v?(D=pv(E[R][A][C][0]),!a||D>a?(O=(A+pv(_[R][A][C][0]))/d*c,F=(R+pv(_[R][A][C][1]))/d*h,N=Math.exp(_[R][A][C][2])*this.config.anchors[C].x/d*c,I=Math.exp(_[R][A][C][3])*this.config.anchors[C].y/d*h,U=O-N/2,H=F-I/2,J={row:R,col:A,anchor:C},this.withClassScores?[4,this.extractPredictedClass(w,J)]:[3,7]):[3,9]):[3,10];case 6:return W=re.sent(),[3,8];case 7:W={classScore:1,label:0},re.label=8;case 8:ee=W,ne=ee.classScore,z=ee.label,S.push(mn({box:new uh(U,H,U+N,H+I),score:D,classScore:D*ne,label:z},J)),re.label=9;case 9:return C++,[3,5];case 10:return A++,[3,4];case 11:return R++,[3,3];case 12:return g.dispose(),x.dispose(),w.dispose(),[2,S]}})})},e.prototype.extractPredictedClass=function(t,r){return Re(this,void 0,void 0,function(){var a,i,s,l;return Ae(this,function(c){switch(c.label){case 0:return a=r.row,i=r.col,s=r.anchor,[4,t.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(h,d){return l[a][i][s][d]}).map(function(h,d){return{classScore:h,label:d}}).reduce(function(h,d){return h.classScore>d.classScore?h:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(La),W6=function(n){Ie(e,n);function e(t){t===void 0&&(t=!0);var r=this,a=Object.assign({},{withSeparableConvs:t,iouThreshold:M6,classes:["face"]},t?{anchors:F6,meanRgb:B6}:{anchors:I6,withClassScores:!0});return r=n.call(this,a)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Re(this,void 0,void 0,function(){var a;return Ae(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(s){return new rr(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?z6:L6},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(N_),G6=function(n){Ie(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return e}(_g),vl=function(){function n(){}return n.prototype.then=function(e){return Re(this,void 0,void 0,function(){var t;return Ae(this,function(r){switch(r.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Re(this,void 0,void 0,function(){return Ae(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},n}();function hh(n,e,t,r,a){return a===void 0&&(a=function(i){var s=i.alignedRect;return s}),Re(this,void 0,void 0,function(){var i,s,l,c,h;return Ae(this,function(d){switch(d.label){case 0:return i=n.map(function(v){return w_(v)?a(v):v.detection}),l=r,l?[3,5]:e instanceof Et?[4,gg(e,i)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,mg(e,i)];case 3:c=d.sent(),d.label=4;case 4:l=c,d.label=5;case 5:return s=l,[4,t(s)];case 6:return h=d.sent(),s.forEach(function(v){return v instanceof Et&&v.dispose()}),[2,h]}})})}function Cg(n,e,t,r,a){return Re(this,void 0,void 0,function(){var i=this;return Ae(this,function(s){return[2,hh([n],e,function(l){return Re(i,void 0,void 0,function(){return Ae(this,function(c){return[2,t(l[0])]})})},r,a)]})})}function q6(n){return be(function(){return nr(qt(n,3).reverse(),3)})}var nf=2,Pf=12;function K6(n,e){var t=lh(n,e),r=yg(n,e);function a(h,d){var v=Ut(n(h));return e.push({paramPath:d}),v}function i(h,d,v){v===void 0&&(v=!1);var m=t(h[0],h[1],3,d+"/conv1"),g=a(h[1],d+"/prelu1_alpha"),x=t(h[1],h[2],3,d+"/conv2"),w=a(h[2],d+"/prelu2_alpha"),S=t(h[2],h[3],v?2:3,d+"/conv3"),E=a(h[3],d+"/prelu3_alpha");return{conv1:m,prelu1_alpha:g,conv2:x,prelu2_alpha:w,conv3:S,prelu3_alpha:E}}function s(){var h=i([3,10,16,32],"pnet"),d=t(32,2,1,"pnet/conv4_1"),v=t(32,4,1,"pnet/conv4_2");return mn(mn({},h),{conv4_1:d,conv4_2:v})}function l(){var h=i([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),v=a(128,"rnet/prelu4_alpha"),m=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return mn(mn({},h),{fc1:d,prelu4_alpha:v,fc2_1:m,fc2_2:g})}function c(){var h=i([3,32,64,64],"onet"),d=t(64,128,2,"onet/conv4"),v=a(128,"onet/prelu4_alpha"),m=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),x=r(256,2,"onet/fc2_1"),w=r(256,4,"onet/fc2_2"),S=r(256,10,"onet/fc2_3");return mn(mn({},h),{conv4:d,prelu4_alpha:v,fc1:m,prelu5_alpha:g,fc2_1:x,fc2_2:w,fc2_3:S})}return{extractPNetParams:s,extractRNetParams:l,extractONetParams:c}}function X6(n){var e=Pa(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=K6(t,a),s=i.extractPNetParams,l=i.extractRNetParams,c=i.extractONetParams,h=s(),d=l(),v=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:h,rnet:d,onet:v},paramMappings:a}}function $6(n,e){var t=_i(n,e);function r(d){var v=t(d+"/weights",4,d+"/filters"),m=t(d+"/bias",1);return{filters:v,bias:m}}function a(d){var v=t(d+"/weights",2),m=t(d+"/bias",1);return{weights:v,bias:m}}function i(d){return t(d,1)}function s(d){var v=r(d+"/conv1"),m=i(d+"/prelu1_alpha"),g=r(d+"/conv2"),x=i(d+"/prelu2_alpha"),w=r(d+"/conv3"),S=i(d+"/prelu3_alpha");return{conv1:v,prelu1_alpha:m,conv2:g,prelu2_alpha:x,conv3:w,prelu3_alpha:S}}function l(){var d=s("pnet"),v=r("pnet/conv4_1"),m=r("pnet/conv4_2");return mn(mn({},d),{conv4_1:v,conv4_2:m})}function c(){var d=s("rnet"),v=a("rnet/fc1"),m=i("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),x=a("rnet/fc2_2");return mn(mn({},d),{fc1:v,prelu4_alpha:m,fc2_1:g,fc2_2:x})}function h(){var d=s("onet"),v=r("onet/conv4"),m=i("onet/prelu4_alpha"),g=a("onet/fc1"),x=i("onet/prelu5_alpha"),w=a("onet/fc2_1"),S=a("onet/fc2_2"),E=a("onet/fc2_3");return mn(mn({},d),{conv4:v,prelu4_alpha:m,fc1:g,prelu5_alpha:x,fc2_1:w,fc2_2:S,fc2_3:E})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:h}}function Z6(n){var e=[],t=$6(n,e),r=t.extractPNetParams,a=t.extractRNetParams,i=t.extractONetParams,s=r(),l=a(),c=i();return za(n,e),{params:{pnet:s,rnet:l,onet:c},paramMappings:e}}function um(n,e){var t=e[0],r=e[1];return{height:Math.floor(t*n),width:Math.floor(r*n)}}function Y6(n,e,t){for(var r=t[0],a=t[1],i=Pf/n,s=[],l=Math.min(r,a)*i,c=0;l>=12;)s.push(i*Math.pow(e,c)),l=l*e,c+=1;return s}var Rg=function(n){Ie(e,n);function e(t,r,a,i){return n.call(this,{left:t,top:r,right:a,bottom:i},!0)||this}return e}(ta);function M_(n){return be(function(){return bn(Xt(n,ge(127.5)),ge(.0078125))})}function vu(n,e){return be(function(){return je(_t(n),bn(e,Mf(_t(Mf(n)))))})}function Ag(n,e,t){return t===void 0&&(t=!1),be(function(){var r=Or(n,e.conv1,"valid");return r=vu(r,e.prelu1_alpha),r=Qt(r,t?[2,2]:[3,3],[2,2],"same"),r=Or(r,e.conv2,"valid"),r=vu(r,e.prelu2_alpha),r=t?r:Qt(r,[3,3],[2,2],"valid"),r=Or(r,e.conv3,"valid"),r=vu(r,e.prelu3_alpha),r})}function Q6(n,e){return be(function(){var t=Ag(n,e,!0),r=Or(t,e.conv4_1,"valid"),a=gr(rh(r,3),3),i=Fa(Xt(r,a),3),s=Or(t,e.conv4_2,"valid");return{prob:i,regions:s}})}function J6(n,e){return be(function(){var t=um(e,n.shape.slice(1)),r=t.height,a=t.width,i=ng.resizeBilinear(n,[r,a]),s=M_(i);return xi(s,[0,2,1,3])})}function eU(n,e,t,r){for(var a=[],i=n.arraySync(),s=0;s<n.shape[0];s++)for(var l=0;l<n.shape[1];l++)i[s][l]>=r&&a.push(new tt(l,s));var c=a.map(function(h){var d=new uh(Math.round((h.y*nf+1)/t),Math.round((h.x*nf+1)/t),Math.round((h.y*nf+Pf)/t),Math.round((h.x*nf+Pf)/t)),v=i[h.y][h.x],m=e.arraySync(),g=new Rg(m[h.y][h.x][0],m[h.y][h.x][1],m[h.y][h.x][2],m[h.y][h.x][3]);return{cell:d,score:v,region:g}});return c}function tU(n,e,t,r,a){a.stage1=[];var i=e.map(function(m){return be(function(){var g={scale:m},x=J6(n,m),w=Date.now(),S=Q6(x,r),E=S.prob,_=S.regions;g.pnet=Date.now()-w;var R=qt(qt(E,3)[1])[0],A=qt(_)[0];return{scoresTensor:R,regionsTensor:A,scale:m,statsForScale:g}})}),s=i.map(function(m){var g=m.scoresTensor,x=m.regionsTensor,w=m.scale,S=m.statsForScale,E=eU(g,x,w,t);if(g.dispose(),x.dispose(),!E.length)return a.stage1.push(S),[];var _=Date.now(),R=Zs(E.map(function(A){return A.cell}),E.map(function(A){return A.score}),.5);return S.nms=Date.now()-_,S.numBoxes=R.length,a.stage1.push(S),R.map(function(A){return E[A]})}),l=s.reduce(function(m,g){return m.concat(g)},[]),c=[],h=[];if(l.length>0){var d=Date.now(),v=Zs(l.map(function(m){return m.cell}),l.map(function(m){return m.score}),.7);a.stage1_nms=Date.now()-d,h=v.map(function(m){return l[m].score}),c=v.map(function(m){return l[m]}).map(function(m){var g=m.cell,x=m.region;return new uh(g.left+x.left*g.width,g.top+x.top*g.height,g.right+x.right*g.width,g.bottom+x.bottom*g.height).toSquare().round()})}return{boxes:c,scores:h}}function I_(n,e,t){var r=t.width,a=t.height;return Re(this,void 0,void 0,function(){var i,s,l,c=this;return Ae(this,function(h){switch(h.label){case 0:return i=Na(n),[4,Promise.all(e.map(function(d){return Re(c,void 0,void 0,function(){var v,m,g,x,w,S,E,_;return Ae(this,function(R){return v=d.padAtBorders(n.height,n.width),m=v.y,g=v.ey,x=v.x,w=v.ex,S=x-1,E=m-1,_=i.getImageData(S,E,w-S,g-E),[2,xn.isNodejs()?vg(_):createImageBitmap(_)]})})}))];case 1:return s=h.sent(),l=[],s.forEach(function(d){var v=sh({width:r,height:a}),m=Na(v);m.drawImage(d,0,0,r,a);for(var g=m.getImageData(0,0,r,a).data,x=[],w=0;w<g.length;w+=4)x.push(g[w+2]),x.push(g[w+1]),x.push(g[w]);l.push(x)}),[2,l.map(function(d){var v=be(function(){var m=xi(Mn(d,[1,r,a,3]),[0,2,1,3]).toFloat();return M_(m)});return v})]}})})}function nU(n,e){return be(function(){var t=Ag(n,e),r=Dr(t,[t.shape[0],e.fc1.weights.shape[0]]),a=$r(r,e.fc1),i=vu(a,e.prelu4_alpha),s=$r(i,e.fc2_1),l=gr(rh(s,1),1),c=Fa(Xt(s,l),1),h=$r(i,e.fc2_2),d=qt(c,1)[1];return{scores:d,regions:h}})}function rU(n,e,t,r,a){return Re(this,void 0,void 0,function(){var i,s,l,c,h,d,v,m,g,x,w,S,E,_;return Ae(this,function(R){switch(R.label){case 0:return i=Date.now(),[4,I_(n,e,{width:24,height:24})];case 1:return s=R.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),l=s.map(function(A){var C=nU(A,r);return A.dispose(),C}),a.stage2_rnet=Date.now()-i,c=l.length>1?Gt(l.map(function(A){return A.scores})):l[0].scores,v=(d=Array).from,[4,c.data()];case 2:return h=v.apply(d,[R.sent()]),c.dispose(),m=h.map(function(A,C){return{score:A,idx:C}}).filter(function(A){return A.score>t}).map(function(A){var C=A.idx;return C}),g=m.map(function(A){return e[A]}),x=m.map(function(A){return h[A]}),w=[],S=[],g.length>0&&(i=Date.now(),E=Zs(g,x,.7),a.stage2_nms=Date.now()-i,_=E.map(function(A){var C=l[m[A]].regions.arraySync();return new Rg(C[0][0],C[0][1],C[0][2],C[0][3])}),S=E.map(function(A){return x[A]}),w=E.map(function(A,C){return g[A].calibrate(_[C])})),l.forEach(function(A){A.regions.dispose(),A.scores.dispose()}),[2,{boxes:w,scores:S}]}})})}function aU(n,e){return be(function(){var t=Ag(n,e);t=Qt(t,[2,2],[2,2],"same"),t=Or(t,e.conv4,"valid"),t=vu(t,e.prelu4_alpha);var r=Dr(t,[t.shape[0],e.fc1.weights.shape[0]]),a=$r(r,e.fc1),i=vu(a,e.prelu5_alpha),s=$r(i,e.fc2_1),l=gr(rh(s,1),1),c=Fa(Xt(s,l),1),h=$r(i,e.fc2_2),d=$r(i,e.fc2_3),v=qt(c,1)[1];return{scores:v,regions:h,points:d}})}function iU(n,e,t,r,a){return Re(this,void 0,void 0,function(){var i,s,l,c,h,d,v,m,g,x,w,S,E,_,R;return Ae(this,function(A){switch(A.label){case 0:return i=Date.now(),[4,I_(n,e,{width:48,height:48})];case 1:return s=A.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),l=s.map(function(C){var D=aU(C,r);return C.dispose(),D}),a.stage3_onet=Date.now()-i,c=l.length>1?Gt(l.map(function(C){return C.scores})):l[0].scores,v=(d=Array).from,[4,c.data()];case 2:return h=v.apply(d,[A.sent()]),c.dispose(),m=h.map(function(C,D){return{score:C,idx:D}}).filter(function(C){return C.score>t}).map(function(C){var D=C.idx;return D}),g=m.map(function(C){var D=l[C].regions.arraySync();return new Rg(D[0][0],D[0][1],D[0][2],D[0][3])}),x=m.map(function(C,D){return e[C].calibrate(g[D])}),w=m.map(function(C){return h[C]}),S=[],E=[],_=[],x.length>0&&(i=Date.now(),R=Zs(x,w,.7,!1),a.stage3_nms=Date.now()-i,S=R.map(function(C){return x[C]}),E=R.map(function(C){return w[C]}),_=R.map(function(C,D){return Array(5).fill(0).map(function(O,F){var N=l[C].points.arraySync();return new tt(N[0][F]*(S[D].width+1)+S[D].left,N[0][F+5]*(S[D].height+1)+S[D].top)})})),l.forEach(function(C){C.regions.dispose(),C.scores.dispose(),C.points.dispose()}),[2,{boxes:S,scores:E,points:_}]}})})}var oU=function(n){Ie(e,n);function e(){return n.call(this,"Mtcnn")||this}return e.prototype.load=function(t){return Re(this,void 0,void 0,function(){return Ae(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,t)]})})},e.prototype.loadFromDisk=function(t){return Re(this,void 0,void 0,function(){return Ae(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,t)]})})},e.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Re(this,void 0,void 0,function(){var a,i,s,l,c,h,d,v,m,g,x,w,S,E,_,R,A,C,D,O,F;return Ae(this,function(N){switch(N.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=t.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},l=Date.now(),c=be(function(){return q6(gr(sg.fromPixels(i)).toFloat())}),h=function(I){return c.dispose(),s.total=Date.now()-l,I},d=c.shape.slice(1),v=d[0],m=d[1],g=new O_(r),x=g.minFaceSize,w=g.scaleFactor,S=g.maxNumScales,E=g.scoreThresholds,_=g.scaleSteps,R=(_||Y6(x,w,[v,m])).filter(function(I){var U=um(I,[v,m]);return Math.min(U.width,U.height)>Pf}).slice(0,S),s.scales=R,s.pyramid=R.map(function(I){return um(I,[v,m])}),A=Date.now(),[4,tU(c,R,E[0],a.pnet,s)];case 1:return C=N.sent(),s.total_stage1=Date.now()-A,C.boxes.length?(s.stage2_numInputBoxes=C.boxes.length,A=Date.now(),[4,rU(i,C.boxes,E[1],a.rnet,s)]):[2,h({results:[],stats:s})];case 2:return D=N.sent(),s.total_stage2=Date.now()-A,D.boxes.length?(s.stage3_numInputBoxes=D.boxes.length,A=Date.now(),[4,iU(i,D.boxes,E[2],a.onet,s)]):[2,h({results:[],stats:s})];case 3:return O=N.sent(),s.total_stage3=Date.now()-A,F=O.boxes.map(function(I,U){return ch(Js({},new rr(O.scores[U],new fg(I.left/m,I.top/v,I.width/m,I.height/v),{height:v,width:m})),new FP(O.points[U].map(function(H){return H.sub(new tt(I.left,I.top)).div(new tt(I.width,I.height))}),{width:I.width,height:I.height}))}),[2,h({results:F,stats:s})]}})})},e.prototype.forward=function(t,r){return r===void 0&&(r={}),Re(this,void 0,void 0,function(){var a;return Ae(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,en(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},e.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Re(this,void 0,void 0,function(){var a;return Ae(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,en(t)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Z6(t)},e.prototype.extractParams=function(t){return X6(t)},e}(La),uU=.4,sU=[new tt(1.603231,2.094468),new tt(6.041143,7.080126),new tt(2.882459,3.518061),new tt(4.266906,5.178857),new tt(9.041765,10.66308)],lU=[117.001,114.697,97.404],cU=function(n){Ie(e,n);function e(){var t=this,r={withSeparableConvs:!0,iouThreshold:uU,classes:["face"],anchors:sU,meanRgb:lU,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=n.call(this,r)||this,t}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Re(this,void 0,void 0,function(){var a;return Ae(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(s){return new rr(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(N_),xr={ssdMobilenetv1:new k_,tinyFaceDetector:new cU,tinyYolov2:new W6,mtcnn:new oU,faceLandmark68Net:new __,faceLandmark68TinyNet:new f6,faceRecognitionNet:new y6,faceExpressionNet:new YP,ageGenderNet:new u6},F_=function(n){Ie(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(vl),Tg=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r,a=this;return Ae(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,hh(t,this.input,function(s){return Re(a,void 0,void 0,function(){return Ae(this,function(l){switch(l.label){case 0:return[4,Promise.all(s.map(function(c){return xr.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(s,l){return x_(s,r[l])})]}})})},e.prototype.withAgeAndGender=function(){return new Ng(this,this.input)},e}(F_),Dg=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r;return Ae(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,Cg(t,this.input,function(i){return xr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,x_(t,r)]}})})},e.prototype.withAgeAndGender=function(){return new Mg(this,this.input)},e}(F_),Og=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new Ig(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Bg(this,this.input)},e}(Tg),kg=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new Fg(this,this.input)},e.prototype.withFaceDescriptor=function(){return new Lg(this,this.input)},e}(Dg),B_=function(n){Ie(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(vl),Ng=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r,a=this;return Ae(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,hh(t,this.input,function(s){return Re(a,void 0,void 0,function(){return Ae(this,function(l){switch(l.label){case 0:return[4,Promise.all(s.map(function(c){return xr.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(s,l){var c=r[l],h=c.age,d=c.gender,v=c.genderProbability;return T_(D_(s,d,v),h)})]}})})},e.prototype.withFaceExpressions=function(){return new Tg(this,this.input)},e}(B_),Mg=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r,a,i,s;return Ae(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return t=l.sent(),t?[4,Cg(t,this.input,function(c){return xr.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=l.sent(),a=r.age,i=r.gender,s=r.genderProbability,[2,T_(D_(t,i,s),a)]}})})},e.prototype.withFaceExpressions=function(){return new Dg(this,this.input)},e}(B_),Ig=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new Og(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Bg(this,this.input)},e}(Ng),Fg=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new kg(this,this.input)},e.prototype.withFaceDescriptor=function(){return new Lg(this,this.input)},e}(Mg),L_=function(n){Ie(e,n);function e(t,r){var a=n.call(this)||this;return a.parentTask=t,a.input=r,a}return e}(vl),Bg=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r;return Ae(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,hh(t,this.input,function(i){return Promise.all(i.map(function(s){return xr.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,s){return A_(t[s],i)})]}})})},e.prototype.withFaceExpressions=function(){return new Og(this,this.input)},e.prototype.withAgeAndGender=function(){return new Ig(this,this.input)},e}(L_),Lg=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r;return Ae(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,Cg(t,this.input,function(i){return xr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,A_(t,r)]}})})},e.prototype.withFaceExpressions=function(){return new kg(this,this.input)},e.prototype.withAgeAndGender=function(){return new Fg(this,this.input)},e}(L_),z_=function(n){Ie(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?xr.faceLandmark68TinyNet:xr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(vl),fU=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r,a,i,s,l=this;return Ae(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return t=c.sent(),r=t.map(function(h){return h.detection}),this.input instanceof Et?[4,gg(this.input,r)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,mg(this.input,r)];case 4:i=c.sent(),c.label=5;case 5:return a=i,[4,Promise.all(a.map(function(h){return l.landmarkNet.detectLandmarks(h)}))];case 6:return s=c.sent(),a.forEach(function(h){return h instanceof Et&&h.dispose()}),[2,t.map(function(h,d){return ch(h,s[d])})]}})})},e.prototype.withFaceExpressions=function(){return new Og(this,this.input)},e.prototype.withAgeAndGender=function(){return new Ig(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Bg(this,this.input)},e}(z_),hU=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r,a,i,s;return Ae(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return t=l.sent(),t?(r=t.detection,this.input instanceof Et?[4,gg(this.input,[r])]:[3,3]):[2];case 2:return i=l.sent(),[3,5];case 3:return[4,mg(this.input,[r])];case 4:i=l.sent(),l.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return s=l.sent(),a.forEach(function(c){return c instanceof Et&&c.dispose()}),[2,ch(t,s)]}})})},e.prototype.withFaceExpressions=function(){return new kg(this,this.input)},e.prototype.withAgeAndGender=function(){return new Fg(this,this.input)},e.prototype.withFaceDescriptor=function(){return new Lg(this,this.input)},e}(z_),P_=function(n){Ie(e,n);function e(t,r){r===void 0&&(r=new fh);var a=n.call(this)||this;return a.input=t,a.options=r,a}return e}(vl),U_=function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r,a,i;return Ae(this,function(s){switch(s.label){case 0:return t=this,r=t.input,a=t.options,a instanceof O_?[4,xr.mtcnn.forward(r,a)]:[3,2];case 1:return[2,s.sent().map(function(l){return l.detection})];case 2:if(i=a instanceof G6?function(l){return xr.tinyFaceDetector.locateFaces(l,a)}:a instanceof fh?function(l){return xr.ssdMobilenetv1.locateFaces(l,a)}:a instanceof _g?function(l){return xr.tinyYolov2.locateFaces(l,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Re(t,void 0,void 0,function(){var a;return Ae(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(s){return Js({},s)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new fU(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Tg(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new Ng(this.runAndExtendWithFaceDetections(),this.input)},e}(P_);(function(n){Ie(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Re(this,void 0,void 0,function(){var t,r;return Ae(this,function(a){switch(a.label){case 0:return[4,new U_(this.input,this.options)];case 1:return t=a.sent(),r=t[0],t.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Re(t,void 0,void 0,function(){var a;return Ae(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?Js({},a):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new hU(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Dg(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new Mg(this.runAndExtendWithFaceDetection(),this.input)},e})(P_);function KU(n,e){return e===void 0&&(e=new fh),new U_(n,e)}function dU(n,e){if(n.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(n),r=Array.from(e);return Math.sqrt(t.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}(function(){function n(e,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(s){if(s instanceof Qc)return s;if(s instanceof Float32Array)return new Qc(i(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new Qc(i(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(e,t){return t.map(function(r){return dU(r,e)}).reduce(function(r,a){return r+a},0)/(t.length||1)},n.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new a2(i,t.computeMeanDistance(e,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},n.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new a2("unknown",t.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},n.fromJSON=function(e){var t=e.labeledDescriptors.map(function(r){return Qc.fromJSON(r)});return new n(t,e.distanceThreshold)},n})();function pU(n,e){var t=new Yi(e.width,e.height),r=t.width,a=t.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(n))return n.map(function(l){return pU(l,{width:r,height:a})});if(w_(n)){var i=n.detection.forSize(r,a),s=n.unshiftedLandmarks.forSize(i.box.width,i.box.height);return ch(Js(n,i),s)}return Qs(n)?Js(n,n.detection.forSize(r,a)):n instanceof Ys||n instanceof rr?n.forSize(r,a):n}var ks={},l2;function vU(){if(l2)return ks;l2=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.styleq=void 0;var n=new WeakMap,e="$$css";function t(a){var i,s,l;return a!=null&&(i=a.disableCache===!0,s=a.disableMix===!0,l=a.transform),function(){for(var h=[],d="",v=null,m="",g=i?null:n,x=new Array(arguments.length),w=0;w<arguments.length;w++)x[w]=arguments[w];for(;x.length>0;){var S=x.pop();if(!(S==null||S===!1)){if(Array.isArray(S)){for(var E=0;E<S.length;E++)x.push(S[E]);continue}var _=l!=null?l(S):S;if(_.$$css!=null){var R="";if(g!=null&&g.has(_)){var A=g.get(_);A!=null&&(R=A[0],m=A[2],h.push.apply(h,A[1]),g=A[3])}else{var C=[];for(var D in _){var O=_[D];if(D===e){var F=_[D];F!==!0&&(m=m?F+"; "+m:F);continue}typeof O=="string"||O===null?h.includes(D)||(h.push(D),g!=null&&C.push(D),typeof O=="string"&&(R+=R?" "+O:O)):console.error("styleq: ".concat(D," typeof ").concat(String(O),' is not "string" or "null".'))}if(g!=null){var N=new WeakMap;g.set(_,[R,C,m,N]),g=N}}R&&(d=d?R+" "+d:R)}else if(s)v==null&&(v={}),v=Object.assign({},_,v);else{var I=null;for(var U in _){var H=_[U];H!==void 0&&(h.includes(U)||(H!=null&&(v==null&&(v={}),I==null&&(I={}),I[U]=H),h.push(U),g=null))}I!=null&&(v=Object.assign(I,v))}}}var J=[d,v,m];return J}}var r=ks.styleq=t();return r.factory=t,ks}var mU=vU();function XU(...n){const[e,t,r]=mU.styleq(n),a={};return e!=null&&e!==""&&(a.className=e),t!=null&&Object.keys(t).length>0&&(a.style=t),r!=null&&r!==""&&(a["data-style-src"]=r),a}export{iu as A,XU as B,pm as C,bu as D,TU as E,xU as F,_U as G,AU as H,UU as I,JT as J,LU as K,IU as L,OU as M,EU as N,MU as Q,oS as R,bU as T,aT as a,SU as b,RU as c,yU as d,zU as e,PU as f,HU as g,p3 as h,_n as i,wU as j,CU as k,DU as l,BU as m,FU as n,kU as o,VU as p,xr as q,K as r,jU as s,GU as t,N2 as u,KU as v,G6 as w,pU as x,WU as y,qU as z};
