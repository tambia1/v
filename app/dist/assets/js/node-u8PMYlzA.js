var e2=n=>{throw TypeError(n)};var Ny=(n,e,t)=>e.has(n)||e2("Cannot "+t);var j=(n,e,t)=>(Ny(n,e,"read from private field"),t?t.call(n):e.get(n)),Ue=(n,e,t)=>e.has(n)?e2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Se=(n,e,t,r)=>(Ny(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),tt=(n,e,t)=>(Ny(n,e,"access private method"),t);var ep=(n,e,t,r)=>({set _(a){Se(n,e,a,t)},get _(){return j(n,e,r)}});import{g as mx}from"./index-Cu9r0Mvq.js";function YM(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(n,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Iy={exports:{}},lf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t2;function ZM(){if(t2)return lf;t2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:n,type:r,key:o,ref:a!==void 0?a:null,props:i}}return lf.Fragment=e,lf.jsx=t,lf.jsxs=t,lf}var n2;function JM(){return n2||(n2=1,Iy.exports=ZM()),Iy.exports}var e3=JM(),My={exports:{}},cf={},Fy={exports:{}},Py={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2;function t3(){return r2||(r2=1,function(n){function e(U,H){var $=U.length;U.push(H);e:for(;0<$;){var Y=$-1>>>1,F=U[Y];if(0<a(F,H))U[Y]=H,U[$]=F,$=Y;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],$=U.pop();if($!==H){U[0]=$;e:for(var Y=0,F=U.length,Q=F>>>1;Y<Q;){var oe=2*(Y+1)-1,ue=U[oe],me=oe+1,be=U[me];if(0>a(ue,$))me<F&&0>a(be,ue)?(U[Y]=be,U[me]=$,Y=me):(U[Y]=ue,U[oe]=$,Y=oe);else if(me<F&&0>a(be,$))U[Y]=be,U[me]=$,Y=me;else break e}}return H}function a(U,H){var $=U.sortIndex-H.sortIndex;return $!==0?$:U.id-H.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var c=[],f=[],d=1,p=null,v=3,g=!1,y=!1,x=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function R(U){for(var H=t(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=U)r(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function T(U){if(x=!1,R(U),!y)if(t(c)!==null)y=!0,O||(O=!0,z());else{var H=t(f);H!==null&&te(T,H.startTime-U)}}var O=!1,k=-1,D=5,N=-1;function M(){return w?!0:!(n.unstable_now()-N<D)}function B(){if(w=!1,O){var U=n.unstable_now();N=U;var H=!0;try{e:{y=!1,x&&(x=!1,S(k),k=-1),g=!0;var $=v;try{t:{for(R(U),p=t(c);p!==null&&!(p.expirationTime>U&&M());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,v=p.priorityLevel;var F=Y(p.expirationTime<=U);if(U=n.unstable_now(),typeof F=="function"){p.callback=F,R(U),H=!0;break t}p===t(c)&&r(c),R(U)}else r(c);p=t(c)}if(p!==null)H=!0;else{var Q=t(f);Q!==null&&te(T,Q.startTime-U),H=!1}}break e}finally{p=null,v=$,g=!1}H=void 0}}finally{H?z():O=!1}}}var z;if(typeof C=="function")z=function(){C(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,re=ee.port2;ee.port1.onmessage=B,z=function(){re.postMessage(null)}}else z=function(){_(B,0)};function te(U,H){k=_(function(){U(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(U){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var $=v;v=H;try{return U()}finally{v=$}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var $=v;v=U;try{return H()}finally{v=$}},n.unstable_scheduleCallback=function(U,H,$){var Y=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Y+$:Y):$=Y,U){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=$+F,U={id:d++,callback:H,priorityLevel:U,startTime:$,expirationTime:F,sortIndex:-1},$>Y?(U.sortIndex=$,e(f,U),t(c)===null&&U===t(f)&&(x?(S(k),k=-1):x=!0,te(T,$-Y))):(U.sortIndex=F,e(c,U),y||g||(y=!0,O||(O=!0,z()))),U},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(U){var H=v;return function(){var $=v;v=H;try{return U.apply(this,arguments)}finally{v=$}}}}(Py)),Py}var a2;function n3(){return a2||(a2=1,Fy.exports=t3()),Fy.exports}var Ly={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function r3(){if(i2)return Je;i2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function w(F,Q,oe){this.props=F,this.context=Q,this.refs=x,this.updater=oe||g}w.prototype.isReactComponent={},w.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},w.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=w.prototype;function S(F,Q,oe){this.props=F,this.context=Q,this.refs=x,this.updater=oe||g}var C=S.prototype=new _;C.constructor=S,y(C,w.prototype),C.isPureReactComponent=!0;var R=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function k(F,Q,oe,ue,me,be){return oe=be.ref,{$$typeof:n,type:F,key:Q,ref:oe!==void 0?oe:null,props:be}}function D(F,Q){return k(F.type,Q,void 0,void 0,void 0,F.props)}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function M(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(oe){return Q[oe]})}var B=/\/+/g;function z(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?M(""+F.key):Q.toString(36)}function ee(){}function re(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ee,ee):(F.status="pending",F.then(function(Q){F.status==="pending"&&(F.status="fulfilled",F.value=Q)},function(Q){F.status==="pending"&&(F.status="rejected",F.reason=Q)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function te(F,Q,oe,ue,me){var be=typeof F;(be==="undefined"||be==="boolean")&&(F=null);var ye=!1;if(F===null)ye=!0;else switch(be){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(F.$$typeof){case n:case e:ye=!0;break;case d:return ye=F._init,te(ye(F._payload),Q,oe,ue,me)}}if(ye)return me=me(F),ye=ue===""?"."+z(F,0):ue,R(me)?(oe="",ye!=null&&(oe=ye.replace(B,"$&/")+"/"),te(me,Q,oe,"",function(ze){return ze})):me!=null&&(N(me)&&(me=D(me,oe+(me.key==null||F&&F.key===me.key?"":(""+me.key).replace(B,"$&/")+"/")+ye)),Q.push(me)),1;ye=0;var Le=ue===""?".":ue+":";if(R(F))for(var Ee=0;Ee<F.length;Ee++)ue=F[Ee],be=Le+z(ue,Ee),ye+=te(ue,Q,oe,be,me);else if(Ee=v(F),typeof Ee=="function")for(F=Ee.call(F),Ee=0;!(ue=F.next()).done;)ue=ue.value,be=Le+z(ue,Ee++),ye+=te(ue,Q,oe,be,me);else if(be==="object"){if(typeof F.then=="function")return te(re(F),Q,oe,ue,me);throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ye}function U(F,Q,oe){if(F==null)return F;var ue=[],me=0;return te(F,ue,"","",function(be){return Q.call(oe,be,me++)}),ue}function H(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(oe){(F._status===0||F._status===-1)&&(F._status=1,F._result=oe)},function(oe){(F._status===0||F._status===-1)&&(F._status=2,F._result=oe)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var $=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function Y(){}return Je.Children={map:U,forEach:function(F,Q,oe){U(F,function(){Q.apply(this,arguments)},oe)},count:function(F){var Q=0;return U(F,function(){Q++}),Q},toArray:function(F){return U(F,function(Q){return Q})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Je.Component=w,Je.Fragment=t,Je.Profiler=a,Je.PureComponent=S,Je.StrictMode=r,Je.Suspense=c,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Je.__COMPILER_RUNTIME={__proto__:null,c:function(F){return T.H.useMemoCache(F)}},Je.cache=function(F){return function(){return F.apply(null,arguments)}},Je.cloneElement=function(F,Q,oe){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ue=y({},F.props),me=F.key,be=void 0;if(Q!=null)for(ye in Q.ref!==void 0&&(be=void 0),Q.key!==void 0&&(me=""+Q.key),Q)!O.call(Q,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Q.ref===void 0||(ue[ye]=Q[ye]);var ye=arguments.length-2;if(ye===1)ue.children=oe;else if(1<ye){for(var Le=Array(ye),Ee=0;Ee<ye;Ee++)Le[Ee]=arguments[Ee+2];ue.children=Le}return k(F.type,me,void 0,void 0,be,ue)},Je.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:i,_context:F},F},Je.createElement=function(F,Q,oe){var ue,me={},be=null;if(Q!=null)for(ue in Q.key!==void 0&&(be=""+Q.key),Q)O.call(Q,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(me[ue]=Q[ue]);var ye=arguments.length-2;if(ye===1)me.children=oe;else if(1<ye){for(var Le=Array(ye),Ee=0;Ee<ye;Ee++)Le[Ee]=arguments[Ee+2];me.children=Le}if(F&&F.defaultProps)for(ue in ye=F.defaultProps,ye)me[ue]===void 0&&(me[ue]=ye[ue]);return k(F,be,void 0,void 0,null,me)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(F){return{$$typeof:u,render:F}},Je.isValidElement=N,Je.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:H}},Je.memo=function(F,Q){return{$$typeof:f,type:F,compare:Q===void 0?null:Q}},Je.startTransition=function(F){var Q=T.T,oe={};T.T=oe;try{var ue=F(),me=T.S;me!==null&&me(oe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Y,$)}catch(be){$(be)}finally{T.T=Q}},Je.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Je.use=function(F){return T.H.use(F)},Je.useActionState=function(F,Q,oe){return T.H.useActionState(F,Q,oe)},Je.useCallback=function(F,Q){return T.H.useCallback(F,Q)},Je.useContext=function(F){return T.H.useContext(F)},Je.useDebugValue=function(){},Je.useDeferredValue=function(F,Q){return T.H.useDeferredValue(F,Q)},Je.useEffect=function(F,Q,oe){var ue=T.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(F,Q)},Je.useId=function(){return T.H.useId()},Je.useImperativeHandle=function(F,Q,oe){return T.H.useImperativeHandle(F,Q,oe)},Je.useInsertionEffect=function(F,Q){return T.H.useInsertionEffect(F,Q)},Je.useLayoutEffect=function(F,Q){return T.H.useLayoutEffect(F,Q)},Je.useMemo=function(F,Q){return T.H.useMemo(F,Q)},Je.useOptimistic=function(F,Q){return T.H.useOptimistic(F,Q)},Je.useReducer=function(F,Q,oe){return T.H.useReducer(F,Q,oe)},Je.useRef=function(F){return T.H.useRef(F)},Je.useState=function(F){return T.H.useState(F)},Je.useSyncExternalStore=function(F,Q,oe){return T.H.useSyncExternalStore(F,Q,oe)},Je.useTransition=function(){return T.H.useTransition()},Je.version="19.1.0",Je}var o2;function Fv(){return o2||(o2=1,Ly.exports=r3()),Ly.exports}var By={exports:{}},Hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2;function a3(){if(s2)return Hn;s2=1;var n=Fv();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Hn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return i(c,f,null,d)},Hn.flushSync=function(c){var f=o.T,d=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=d,r.d.f()}},Hn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Hn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Hn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=u(d,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:g}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Hn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Hn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=u(d,f.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Hn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Hn.requestFormReset=function(c){r.d.r(c)},Hn.unstable_batchedUpdates=function(c,f){return c(f)},Hn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},Hn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Hn.version="19.1.0",Hn}var u2;function i3(){if(u2)return By.exports;u2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),By.exports=a3(),By.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function o3(){if(l2)return cf;l2=1;var n=n3(),e=Fv(),t=i3();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function i(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(i(s)!==s)throw Error(r(188))}function c(s){var l=s.alternate;if(!l){if(l=i(s),l===null)throw Error(r(188));return l!==s?null:s}for(var h=s,m=l;;){var b=h.return;if(b===null)break;var E=b.alternate;if(E===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===h)return u(b),s;if(E===m)return u(b),l;E=E.sibling}throw Error(r(188))}if(h.return!==m.return)h=b,m=E;else{for(var A=!1,I=b.child;I;){if(I===h){A=!0,h=b,m=E;break}if(I===m){A=!0,m=b,h=E;break}I=I.sibling}if(!A){for(I=E.child;I;){if(I===h){A=!0,h=E,m=b;break}if(I===m){A=!0,m=E,h=b;break}I=I.sibling}if(!A)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?s:l}function f(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=f(s),l!==null)return l;s=s.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function re(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case y:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case g:return"Portal";case C:return(s.displayName||"Context")+".Provider";case S:return(s._context.displayName||"Context")+".Consumer";case R:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case k:return l=s.displayName||null,l!==null?l:re(s.type)||"Memo";case D:l=s._payload,s=s._init;try{return re(s(l))}catch{}}return null}var te=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},Y=[],F=-1;function Q(s){return{current:s}}function oe(s){0>F||(s.current=Y[F],Y[F]=null,F--)}function ue(s,l){F++,Y[F]=s.current,s.current=l}var me=Q(null),be=Q(null),ye=Q(null),Le=Q(null);function Ee(s,l){switch(ue(ye,l),ue(be,s),ue(me,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?OS(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=OS(l),s=AS(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(me),ue(me,s)}function ze(){oe(me),oe(be),oe(ye)}function gt(s){s.memoizedState!==null&&ue(Le,s);var l=me.current,h=AS(l,s.type);l!==h&&(ue(be,s),ue(me,h))}function qe(s){be.current===s&&(oe(me),oe(be)),Le.current===s&&(oe(Le),rf._currentValue=$)}var Ye=Object.prototype.hasOwnProperty,at=n.unstable_scheduleCallback,xt=n.unstable_cancelCallback,It=n.unstable_shouldYield,At=n.unstable_requestPaint,en=n.unstable_now,Pr=n.unstable_getCurrentPriorityLevel,jn=n.unstable_ImmediatePriority,ii=n.unstable_UserBlockingPriority,or=n.unstable_NormalPriority,Sa=n.unstable_LowPriority,Lr=n.unstable_IdlePriority,Hi=n.log,na=n.unstable_setDisableYieldValue,oi=null,an=null;function fn(s){if(typeof Hi=="function"&&na(s),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(oi,s)}catch{}}var Mn=Math.clz32?Math.clz32:xm,ym=Math.log,bm=Math.LN2;function xm(s){return s>>>=0,s===0?32:31-(ym(s)/bm|0)|0}var Gi=256,Qi=4194304;function ra(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function qh(s,l,h){var m=s.pendingLanes;if(m===0)return 0;var b=0,E=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var I=m&134217727;return I!==0?(m=I&~E,m!==0?b=ra(m):(A&=I,A!==0?b=ra(A):h||(h=I&~s,h!==0&&(b=ra(h))))):(I=m&~E,I!==0?b=ra(I):A!==0?b=ra(A):h||(h=m&~s,h!==0&&(b=ra(h)))),b===0?0:l!==0&&l!==b&&(l&E)===0&&(E=b&-b,h=l&-l,E>=h||E===32&&(h&4194048)!==0)?l:b}function hc(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function BN(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fw(){var s=Gi;return Gi<<=1,(Gi&4194048)===0&&(Gi=256),s}function hw(){var s=Qi;return Qi<<=1,(Qi&62914560)===0&&(Qi=4194304),s}function wm(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function dc(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function zN(s,l,h,m,b,E){var A=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var I=s.entanglements,V=s.expirationTimes,ne=s.hiddenUpdates;for(h=A&~h;0<h;){var fe=31-Mn(h),de=1<<fe;I[fe]=0,V[fe]=-1;var ae=ne[fe];if(ae!==null)for(ne[fe]=null,fe=0;fe<ae.length;fe++){var ie=ae[fe];ie!==null&&(ie.lane&=-536870913)}h&=~de}m!==0&&dw(s,m,0),E!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=E&~(A&~l))}function dw(s,l,h){s.pendingLanes|=l,s.suspendedLanes&=~l;var m=31-Mn(l);s.entangledLanes|=l,s.entanglements[m]=s.entanglements[m]|1073741824|h&4194090}function pw(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var m=31-Mn(h),b=1<<m;b&l|s[m]&l&&(s[m]|=l),h&=~b}}function _m(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Em(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function vw(){var s=H.p;return s!==0?s:(s=window.event,s===void 0?32:$S(s.type))}function UN(s,l){var h=H.p;try{return H.p=s,l()}finally{H.p=h}}var $i=Math.random().toString(36).slice(2),qn="__reactFiber$"+$i,sr="__reactProps$"+$i,su="__reactContainer$"+$i,Sm="__reactEvents$"+$i,VN="__reactListeners$"+$i,jN="__reactHandles$"+$i,mw="__reactResources$"+$i,pc="__reactMarker$"+$i;function Cm(s){delete s[qn],delete s[sr],delete s[Sm],delete s[VN],delete s[jN]}function uu(s){var l=s[qn];if(l)return l;for(var h=s.parentNode;h;){if(l=h[su]||h[qn]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=IS(s);s!==null;){if(h=s[qn])return h;s=IS(s)}return l}s=h,h=s.parentNode}return null}function lu(s){if(s=s[qn]||s[su]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function vc(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function cu(s){var l=s[mw];return l||(l=s[mw]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function En(s){s[pc]=!0}var gw=new Set,yw={};function as(s,l){fu(s,l),fu(s+"Capture",l)}function fu(s,l){for(yw[s]=l,s=0;s<l.length;s++)gw.add(l[s])}var qN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bw={},xw={};function WN(s){return Ye.call(xw,s)?!0:Ye.call(bw,s)?!1:qN.test(s)?xw[s]=!0:(bw[s]=!0,!1)}function Wh(s,l,h){if(WN(l))if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+h)}}function Hh(s,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+h)}}function si(s,l,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(l,h,""+m)}}var Rm,ww;function hu(s){if(Rm===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);Rm=l&&l[1]||"",ww=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rm+s+ww}var Tm=!1;function Om(s,l){if(!s||Tm)return"";Tm=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ie){var ae=ie}Reflect.construct(s,[],de)}else{try{de.call()}catch(ie){ae=ie}s.call(de.prototype)}}else{try{throw Error()}catch(ie){ae=ie}(de=s())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ie){if(ie&&ae&&typeof ie.stack=="string")return[ie.stack,ae.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),A=E[0],I=E[1];if(A&&I){var V=A.split(`
`),ne=I.split(`
`);for(b=m=0;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;for(;b<ne.length&&!ne[b].includes("DetermineComponentFrameRoot");)b++;if(m===V.length||b===ne.length)for(m=V.length-1,b=ne.length-1;1<=m&&0<=b&&V[m]!==ne[b];)b--;for(;1<=m&&0<=b;m--,b--)if(V[m]!==ne[b]){if(m!==1||b!==1)do if(m--,b--,0>b||V[m]!==ne[b]){var fe=`
`+V[m].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=m&&0<=b);break}}}finally{Tm=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?hu(h):""}function HN(s){switch(s.tag){case 26:case 27:case 5:return hu(s.type);case 16:return hu("Lazy");case 13:return hu("Suspense");case 19:return hu("SuspenseList");case 0:case 15:return Om(s.type,!1);case 11:return Om(s.type.render,!1);case 1:return Om(s.type,!0);case 31:return hu("Activity");default:return""}}function _w(s){try{var l="";do l+=HN(s),s=s.return;while(s);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Br(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ew(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function GN(s){var l=Ew(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),m=""+s[l];if(!s.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,E=h.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return b.call(this)},set:function(A){m=""+A,E.call(this,A)}}),Object.defineProperty(s,l,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(A){m=""+A},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Gh(s){s._valueTracker||(s._valueTracker=GN(s))}function Sw(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),m="";return s&&(m=Ew(s)?s.checked?"true":"false":s.value),s=m,s!==h?(l.setValue(s),!0):!1}function Qh(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var QN=/[\n"\\]/g;function zr(s){return s.replace(QN,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Am(s,l,h,m,b,E,A,I){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),l!=null?A==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Br(l)):s.value!==""+Br(l)&&(s.value=""+Br(l)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),l!=null?km(s,A,Br(l)):h!=null?km(s,A,Br(h)):m!=null&&s.removeAttribute("value"),b==null&&E!=null&&(s.defaultChecked=!!E),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Br(I):s.removeAttribute("name")}function Cw(s,l,h,m,b,E,A,I){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),l!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||l!=null))return;h=h!=null?""+Br(h):"",l=l!=null?""+Br(l):h,I||l===s.value||(s.value=l),s.defaultValue=l}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=I?s.checked:!!m,s.defaultChecked=!!m,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A)}function km(s,l,h){l==="number"&&Qh(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function du(s,l,h,m){if(s=s.options,l){l={};for(var b=0;b<h.length;b++)l["$"+h[b]]=!0;for(h=0;h<s.length;h++)b=l.hasOwnProperty("$"+s[h].value),s[h].selected!==b&&(s[h].selected=b),b&&m&&(s[h].defaultSelected=!0)}else{for(h=""+Br(h),l=null,b=0;b<s.length;b++){if(s[b].value===h){s[b].selected=!0,m&&(s[b].defaultSelected=!0);return}l!==null||s[b].disabled||(l=s[b])}l!==null&&(l.selected=!0)}}function Rw(s,l,h){if(l!=null&&(l=""+Br(l),l!==s.value&&(s.value=l),h==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=h!=null?""+Br(h):""}function Tw(s,l,h,m){if(l==null){if(m!=null){if(h!=null)throw Error(r(92));if(te(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),l=h}h=Br(l),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m)}function pu(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var $N=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ow(s,l,h){var m=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":m?s.setProperty(l,h):typeof h!="number"||h===0||$N.has(l)?l==="float"?s.cssFloat=h:s[l]=(""+h).trim():s[l]=h+"px"}function Aw(s,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var b in l)m=l[b],l.hasOwnProperty(b)&&h[b]!==m&&Ow(s,b,m)}else for(var E in l)l.hasOwnProperty(E)&&Ow(s,E,l[E])}function Dm(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),XN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $h(s){return XN.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Nm=null;function Im(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var vu=null,mu=null;function kw(s){var l=lu(s);if(l&&(s=l.stateNode)){var h=s[sr]||null;e:switch(s=l.stateNode,l.type){case"input":if(Am(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+zr(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var m=h[l];if(m!==s&&m.form===s.form){var b=m[sr]||null;if(!b)throw Error(r(90));Am(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<h.length;l++)m=h[l],m.form===s.form&&Sw(m)}break e;case"textarea":Rw(s,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&du(s,!!h.multiple,l,!1)}}}var Mm=!1;function Dw(s,l,h){if(Mm)return s(l,h);Mm=!0;try{var m=s(l);return m}finally{if(Mm=!1,(vu!==null||mu!==null)&&(Id(),vu&&(l=vu,s=mu,mu=vu=null,kw(l),s)))for(l=0;l<s.length;l++)kw(s[l])}}function mc(s,l){var h=s.stateNode;if(h===null)return null;var m=h[sr]||null;if(m===null)return null;h=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fm=!1;if(ui)try{var gc={};Object.defineProperty(gc,"passive",{get:function(){Fm=!0}}),window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{Fm=!1}var Ki=null,Pm=null,Kh=null;function Nw(){if(Kh)return Kh;var s,l=Pm,h=l.length,m,b="value"in Ki?Ki.value:Ki.textContent,E=b.length;for(s=0;s<h&&l[s]===b[s];s++);var A=h-s;for(m=1;m<=A&&l[h-m]===b[E-m];m++);return Kh=b.slice(s,1<m?1-m:void 0)}function Xh(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Yh(){return!0}function Iw(){return!1}function ur(s){function l(h,m,b,E,A){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=E,this.target=A,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(h=s[I],this[I]=h?h(E):E[I]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Yh:Iw,this.isPropagationStopped=Iw,this}return d(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Yh)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Yh)},persist:function(){},isPersistent:Yh}),l}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zh=ur(is),yc=d({},is,{view:0,detail:0}),YN=ur(yc),Lm,Bm,bc,Jh=d({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Um,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bc&&(bc&&s.type==="mousemove"?(Lm=s.screenX-bc.screenX,Bm=s.screenY-bc.screenY):Bm=Lm=0,bc=s),Lm)},movementY:function(s){return"movementY"in s?s.movementY:Bm}}),Mw=ur(Jh),ZN=d({},Jh,{dataTransfer:0}),JN=ur(ZN),eI=d({},yc,{relatedTarget:0}),zm=ur(eI),tI=d({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),nI=ur(tI),rI=d({},is,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),aI=ur(rI),iI=d({},is,{data:0}),Fw=ur(iI),oI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lI(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=uI[s])?!!l[s]:!1}function Um(){return lI}var cI=d({},yc,{key:function(s){if(s.key){var l=oI[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Xh(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?sI[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Um,charCode:function(s){return s.type==="keypress"?Xh(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Xh(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),fI=ur(cI),hI=d({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pw=ur(hI),dI=d({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Um}),pI=ur(dI),vI=d({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),mI=ur(vI),gI=d({},Jh,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),yI=ur(gI),bI=d({},is,{newState:0,oldState:0}),xI=ur(bI),wI=[9,13,27,32],Vm=ui&&"CompositionEvent"in window,xc=null;ui&&"documentMode"in document&&(xc=document.documentMode);var _I=ui&&"TextEvent"in window&&!xc,Lw=ui&&(!Vm||xc&&8<xc&&11>=xc),Bw=" ",zw=!1;function Uw(s,l){switch(s){case"keyup":return wI.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vw(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var gu=!1;function EI(s,l){switch(s){case"compositionend":return Vw(l);case"keypress":return l.which!==32?null:(zw=!0,Bw);case"textInput":return s=l.data,s===Bw&&zw?null:s;default:return null}}function SI(s,l){if(gu)return s==="compositionend"||!Vm&&Uw(s,l)?(s=Nw(),Kh=Pm=Ki=null,gu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Lw&&l.locale!=="ko"?null:l.data;default:return null}}var CI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jw(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!CI[s.type]:l==="textarea"}function qw(s,l,h,m){vu?mu?mu.push(m):mu=[m]:vu=m,l=zd(l,"onChange"),0<l.length&&(h=new Zh("onChange","change",null,h,m),s.push({event:h,listeners:l}))}var wc=null,_c=null;function RI(s){ES(s,0)}function ed(s){var l=vc(s);if(Sw(l))return s}function Ww(s,l){if(s==="change")return l}var Hw=!1;if(ui){var jm;if(ui){var qm="oninput"in document;if(!qm){var Gw=document.createElement("div");Gw.setAttribute("oninput","return;"),qm=typeof Gw.oninput=="function"}jm=qm}else jm=!1;Hw=jm&&(!document.documentMode||9<document.documentMode)}function Qw(){wc&&(wc.detachEvent("onpropertychange",$w),_c=wc=null)}function $w(s){if(s.propertyName==="value"&&ed(_c)){var l=[];qw(l,_c,s,Im(s)),Dw(RI,l)}}function TI(s,l,h){s==="focusin"?(Qw(),wc=l,_c=h,wc.attachEvent("onpropertychange",$w)):s==="focusout"&&Qw()}function OI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ed(_c)}function AI(s,l){if(s==="click")return ed(l)}function kI(s,l){if(s==="input"||s==="change")return ed(l)}function DI(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var xr=typeof Object.is=="function"?Object.is:DI;function Ec(s,l){if(xr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!Ye.call(l,b)||!xr(s[b],l[b]))return!1}return!0}function Kw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Xw(s,l){var h=Kw(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=l&&m>=l)return{node:h,offset:l-s};s=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Kw(h)}}function Yw(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Yw(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Zw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Qh(s.document);l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=Qh(s.document)}return l}function Wm(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var NI=ui&&"documentMode"in document&&11>=document.documentMode,yu=null,Hm=null,Sc=null,Gm=!1;function Jw(s,l,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Gm||yu==null||yu!==Qh(m)||(m=yu,"selectionStart"in m&&Wm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Sc&&Ec(Sc,m)||(Sc=m,m=zd(Hm,"onSelect"),0<m.length&&(l=new Zh("onSelect","select",null,l,h),s.push({event:l,listeners:m}),l.target=yu)))}function os(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var bu={animationend:os("Animation","AnimationEnd"),animationiteration:os("Animation","AnimationIteration"),animationstart:os("Animation","AnimationStart"),transitionrun:os("Transition","TransitionRun"),transitionstart:os("Transition","TransitionStart"),transitioncancel:os("Transition","TransitionCancel"),transitionend:os("Transition","TransitionEnd")},Qm={},e_={};ui&&(e_=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function ss(s){if(Qm[s])return Qm[s];if(!bu[s])return s;var l=bu[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in e_)return Qm[s]=l[h];return s}var t_=ss("animationend"),n_=ss("animationiteration"),r_=ss("animationstart"),II=ss("transitionrun"),MI=ss("transitionstart"),FI=ss("transitioncancel"),a_=ss("transitionend"),i_=new Map,$m="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$m.push("scrollEnd");function aa(s,l){i_.set(s,l),as(l,[s])}var o_=new WeakMap;function Ur(s,l){if(typeof s=="object"&&s!==null){var h=o_.get(s);return h!==void 0?h:(l={value:s,source:l,stack:_w(l)},o_.set(s,l),l)}return{value:s,source:l,stack:_w(l)}}var Vr=[],xu=0,Km=0;function td(){for(var s=xu,l=Km=xu=0;l<s;){var h=Vr[l];Vr[l++]=null;var m=Vr[l];Vr[l++]=null;var b=Vr[l];Vr[l++]=null;var E=Vr[l];if(Vr[l++]=null,m!==null&&b!==null){var A=m.pending;A===null?b.next=b:(b.next=A.next,A.next=b),m.pending=b}E!==0&&s_(h,b,E)}}function nd(s,l,h,m){Vr[xu++]=s,Vr[xu++]=l,Vr[xu++]=h,Vr[xu++]=m,Km|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Xm(s,l,h,m){return nd(s,l,h,m),rd(s)}function wu(s,l){return nd(s,null,null,l),rd(s)}function s_(s,l,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var b=!1,E=s.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(b=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,b&&l!==null&&(b=31-Mn(h),s=E.hiddenUpdates,m=s[b],m===null?s[b]=[l]:m.push(l),l.lane=h|536870912),E):null}function rd(s){if(50<Kc)throw Kc=0,ny=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var _u={};function PI(s,l,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(s,l,h,m){return new PI(s,l,h,m)}function Ym(s){return s=s.prototype,!(!s||!s.isReactComponent)}function li(s,l){var h=s.alternate;return h===null?(h=wr(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function u_(s,l){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,l=h.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function ad(s,l,h,m,b,E){var A=0;if(m=s,typeof s=="function")Ym(s)&&(A=1);else if(typeof s=="string")A=BM(s,h,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=wr(31,h,l,b),s.elementType=N,s.lanes=E,s;case y:return us(h.children,b,E,l);case x:A=8,b|=24;break;case w:return s=wr(12,h,l,b|2),s.elementType=w,s.lanes=E,s;case T:return s=wr(13,h,l,b),s.elementType=T,s.lanes=E,s;case O:return s=wr(19,h,l,b),s.elementType=O,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:case C:A=10;break e;case S:A=9;break e;case R:A=11;break e;case k:A=14;break e;case D:A=16,m=null;break e}A=29,h=Error(r(130,s===null?"null":typeof s,"")),m=null}return l=wr(A,h,l,b),l.elementType=s,l.type=m,l.lanes=E,l}function us(s,l,h,m){return s=wr(7,s,m,l),s.lanes=h,s}function Zm(s,l,h){return s=wr(6,s,null,l),s.lanes=h,s}function Jm(s,l,h){return l=wr(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Eu=[],Su=0,id=null,od=0,jr=[],qr=0,ls=null,ci=1,fi="";function cs(s,l){Eu[Su++]=od,Eu[Su++]=id,id=s,od=l}function l_(s,l,h){jr[qr++]=ci,jr[qr++]=fi,jr[qr++]=ls,ls=s;var m=ci;s=fi;var b=32-Mn(m)-1;m&=~(1<<b),h+=1;var E=32-Mn(l)+b;if(30<E){var A=b-b%5;E=(m&(1<<A)-1).toString(32),m>>=A,b-=A,ci=1<<32-Mn(l)+b|h<<b|m,fi=E+s}else ci=1<<E|h<<b|m,fi=s}function eg(s){s.return!==null&&(cs(s,1),l_(s,1,0))}function tg(s){for(;s===id;)id=Eu[--Su],Eu[Su]=null,od=Eu[--Su],Eu[Su]=null;for(;s===ls;)ls=jr[--qr],jr[qr]=null,fi=jr[--qr],jr[qr]=null,ci=jr[--qr],jr[qr]=null}var er=null,$t=null,wt=!1,fs=null,Ca=!1,ng=Error(r(519));function hs(s){var l=Error(r(418,""));throw Tc(Ur(l,s)),ng}function c_(s){var l=s.stateNode,h=s.type,m=s.memoizedProps;switch(l[qn]=s,l[sr]=m,h){case"dialog":lt("cancel",l),lt("close",l);break;case"iframe":case"object":case"embed":lt("load",l);break;case"video":case"audio":for(h=0;h<Yc.length;h++)lt(Yc[h],l);break;case"source":lt("error",l);break;case"img":case"image":case"link":lt("error",l),lt("load",l);break;case"details":lt("toggle",l);break;case"input":lt("invalid",l),Cw(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Gh(l);break;case"select":lt("invalid",l);break;case"textarea":lt("invalid",l),Tw(l,m.value,m.defaultValue,m.children),Gh(l)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||m.suppressHydrationWarning===!0||TS(l.textContent,h)?(m.popover!=null&&(lt("beforetoggle",l),lt("toggle",l)),m.onScroll!=null&&lt("scroll",l),m.onScrollEnd!=null&&lt("scrollend",l),m.onClick!=null&&(l.onclick=Ud),l=!0):l=!1,l||hs(s)}function f_(s){for(er=s.return;er;)switch(er.tag){case 5:case 13:Ca=!1;return;case 27:case 3:Ca=!0;return;default:er=er.return}}function Cc(s){if(s!==er)return!1;if(!wt)return f_(s),wt=!0,!1;var l=s.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||yy(s.type,s.memoizedProps)),h=!h),h&&$t&&hs(s),f_(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(h=s.data,h==="/$"){if(l===0){$t=oa(s.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++;s=s.nextSibling}$t=null}}else l===27?(l=$t,fo(s.type)?(s=_y,_y=null,$t=s):$t=l):$t=er?oa(s.stateNode.nextSibling):null;return!0}function Rc(){$t=er=null,wt=!1}function h_(){var s=fs;return s!==null&&(fr===null?fr=s:fr.push.apply(fr,s),fs=null),s}function Tc(s){fs===null?fs=[s]:fs.push(s)}var rg=Q(null),ds=null,hi=null;function Xi(s,l,h){ue(rg,l._currentValue),l._currentValue=h}function di(s){s._currentValue=rg.current,oe(rg)}function ag(s,l,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),s===h)break;s=s.return}}function ig(s,l,h,m){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var E=b.dependencies;if(E!==null){var A=b.child;E=E.firstContext;e:for(;E!==null;){var I=E;E=b;for(var V=0;V<l.length;V++)if(I.context===l[V]){E.lanes|=h,I=E.alternate,I!==null&&(I.lanes|=h),ag(E.return,h,s),m||(A=null);break e}E=I.next}}else if(b.tag===18){if(A=b.return,A===null)throw Error(r(341));A.lanes|=h,E=A.alternate,E!==null&&(E.lanes|=h),ag(A,h,s),A=null}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===s){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}}function Oc(s,l,h,m){s=null;for(var b=l,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var A=b.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var I=b.type;xr(b.pendingProps.value,A.value)||(s!==null?s.push(I):s=[I])}}else if(b===Le.current){if(A=b.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(rf):s=[rf])}b=b.return}s!==null&&ig(l,s,h,m),l.flags|=262144}function sd(s){for(s=s.firstContext;s!==null;){if(!xr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ps(s){ds=s,hi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wn(s){return d_(ds,s)}function ud(s,l){return ds===null&&ps(s),d_(s,l)}function d_(s,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},hi===null){if(s===null)throw Error(r(308));hi=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else hi=hi.next=l;return h}var LI=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){l.aborted=!0,s.forEach(function(h){return h()})}},BI=n.unstable_scheduleCallback,zI=n.unstable_NormalPriority,hn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function og(){return{controller:new LI,data:new Map,refCount:0}}function Ac(s){s.refCount--,s.refCount===0&&BI(zI,function(){s.controller.abort()})}var kc=null,sg=0,Cu=0,Ru=null;function UI(s,l){if(kc===null){var h=kc=[];sg=0,Cu=ly(),Ru={status:"pending",value:void 0,then:function(m){h.push(m)}}}return sg++,l.then(p_,p_),l}function p_(){if(--sg===0&&kc!==null){Ru!==null&&(Ru.status="fulfilled");var s=kc;kc=null,Cu=0,Ru=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function VI(s,l){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return s.then(function(){m.status="fulfilled",m.value=l;for(var b=0;b<h.length;b++)(0,h[b])(l)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var v_=U.S;U.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&UI(s,l),v_!==null&&v_(s,l)};var vs=Q(null);function ug(){var s=vs.current;return s!==null?s:Pt.pooledCache}function ld(s,l){l===null?ue(vs,vs.current):ue(vs,l.pool)}function m_(){var s=ug();return s===null?null:{parent:hn._currentValue,pool:s}}var Dc=Error(r(460)),g_=Error(r(474)),cd=Error(r(542)),lg={then:function(){}};function y_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function fd(){}function b_(s,l,h){switch(h=s[h],h===void 0?s.push(l):h!==l&&(l.then(fd,fd),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,w_(s),s;default:if(typeof l.status=="string")l.then(fd,fd);else{if(s=Pt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(m){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=m}},function(m){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,w_(s),s}throw Nc=l,Dc}}var Nc=null;function x_(){if(Nc===null)throw Error(r(459));var s=Nc;return Nc=null,s}function w_(s){if(s===Dc||s===cd)throw Error(r(483))}var Yi=!1;function cg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fg(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Zi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ji(s,l,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Tt&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,l=rd(s),s_(s,null,h),l}return nd(s,m,l,h),rd(s)}function Ic(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var m=l.lanes;m&=s.pendingLanes,h|=m,l.lanes=h,pw(s,h)}}function hg(s,l){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var A={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?b=E=A:E=E.next=A,h=h.next}while(h!==null);E===null?b=E=l:E=E.next=l}else b=E=l;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}var dg=!1;function Mc(){if(dg){var s=Ru;if(s!==null)throw s}}function Fc(s,l,h,m){dg=!1;var b=s.updateQueue;Yi=!1;var E=b.firstBaseUpdate,A=b.lastBaseUpdate,I=b.shared.pending;if(I!==null){b.shared.pending=null;var V=I,ne=V.next;V.next=null,A===null?E=ne:A.next=ne,A=V;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,I=fe.lastBaseUpdate,I!==A&&(I===null?fe.firstBaseUpdate=ne:I.next=ne,fe.lastBaseUpdate=V))}if(E!==null){var de=b.baseState;A=0,fe=ne=V=null,I=E;do{var ae=I.lane&-536870913,ie=ae!==I.lane;if(ie?(pt&ae)===ae:(m&ae)===ae){ae!==0&&ae===Cu&&(dg=!0),fe!==null&&(fe=fe.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var He=s,Ve=I;ae=l;var Nt=h;switch(Ve.tag){case 1:if(He=Ve.payload,typeof He=="function"){de=He.call(Nt,de,ae);break e}de=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ve.payload,ae=typeof He=="function"?He.call(Nt,de,ae):He,ae==null)break e;de=d({},de,ae);break e;case 2:Yi=!0}}ae=I.callback,ae!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=b.callbacks,ie===null?b.callbacks=[ae]:ie.push(ae))}else ie={lane:ae,tag:I.tag,payload:I.payload,callback:I.callback,next:null},fe===null?(ne=fe=ie,V=de):fe=fe.next=ie,A|=ae;if(I=I.next,I===null){if(I=b.shared.pending,I===null)break;ie=I,I=ie.next,ie.next=null,b.lastBaseUpdate=ie,b.shared.pending=null}}while(!0);fe===null&&(V=de),b.baseState=V,b.firstBaseUpdate=ne,b.lastBaseUpdate=fe,E===null&&(b.shared.lanes=0),so|=A,s.lanes=A,s.memoizedState=de}}function __(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function E_(s,l){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)__(h[s],l)}var Tu=Q(null),hd=Q(0);function S_(s,l){s=xi,ue(hd,s),ue(Tu,l),xi=s|l.baseLanes}function pg(){ue(hd,xi),ue(Tu,Tu.current)}function vg(){xi=hd.current,oe(Tu),oe(hd)}var eo=0,it=null,kt=null,on=null,dd=!1,Ou=!1,ms=!1,pd=0,Pc=0,Au=null,jI=0;function tn(){throw Error(r(321))}function mg(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!xr(s[h],l[h]))return!1;return!0}function gg(s,l,h,m,b,E){return eo=E,it=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U.H=s===null||s.memoizedState===null?sE:uE,ms=!1,E=h(m,b),ms=!1,Ou&&(E=R_(l,h,m,b)),C_(s),E}function C_(s){U.H=xd;var l=kt!==null&&kt.next!==null;if(eo=0,on=kt=it=null,dd=!1,Pc=0,Au=null,l)throw Error(r(300));s===null||Sn||(s=s.dependencies,s!==null&&sd(s)&&(Sn=!0))}function R_(s,l,h,m){it=s;var b=0;do{if(Ou&&(Au=null),Pc=0,Ou=!1,25<=b)throw Error(r(301));if(b+=1,on=kt=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}U.H=KI,E=l(h,m)}while(Ou);return E}function qI(){var s=U.H,l=s.useState()[0];return l=typeof l.then=="function"?Lc(l):l,s=s.useState()[0],(kt!==null?kt.memoizedState:null)!==s&&(it.flags|=1024),l}function yg(){var s=pd!==0;return pd=0,s}function bg(s,l,h){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~h}function xg(s){if(dd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}dd=!1}eo=0,on=kt=it=null,Ou=!1,Pc=pd=0,Au=null}function lr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?it.memoizedState=on=s:on=on.next=s,on}function sn(){if(kt===null){var s=it.alternate;s=s!==null?s.memoizedState:null}else s=kt.next;var l=on===null?it.memoizedState:on.next;if(l!==null)on=l,kt=s;else{if(s===null)throw it.alternate===null?Error(r(467)):Error(r(310));kt=s,s={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},on===null?it.memoizedState=on=s:on=on.next=s}return on}function wg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lc(s){var l=Pc;return Pc+=1,Au===null&&(Au=[]),s=b_(Au,s,l),l=it,(on===null?l.memoizedState:on.next)===null&&(l=l.alternate,U.H=l===null||l.memoizedState===null?sE:uE),s}function vd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Lc(s);if(s.$$typeof===C)return Wn(s)}throw Error(r(438,String(s)))}function _g(s){var l=null,h=it.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var m=it.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=wg(),it.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(s),m=0;m<s;m++)h[m]=M;return l.index++,h}function pi(s,l){return typeof l=="function"?l(s):l}function md(s){var l=sn();return Eg(l,kt,s)}function Eg(s,l,h){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var b=s.baseQueue,E=m.pending;if(E!==null){if(b!==null){var A=b.next;b.next=E.next,E.next=A}l.baseQueue=b=E,m.pending=null}if(E=s.baseState,b===null)s.memoizedState=E;else{l=b.next;var I=A=null,V=null,ne=l,fe=!1;do{var de=ne.lane&-536870913;if(de!==ne.lane?(pt&de)===de:(eo&de)===de){var ae=ne.revertLane;if(ae===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),de===Cu&&(fe=!0);else if((eo&ae)===ae){ne=ne.next,ae===Cu&&(fe=!0);continue}else de={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},V===null?(I=V=de,A=E):V=V.next=de,it.lanes|=ae,so|=ae;de=ne.action,ms&&h(E,de),E=ne.hasEagerState?ne.eagerState:h(E,de)}else ae={lane:de,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},V===null?(I=V=ae,A=E):V=V.next=ae,it.lanes|=de,so|=de;ne=ne.next}while(ne!==null&&ne!==l);if(V===null?A=E:V.next=I,!xr(E,s.memoizedState)&&(Sn=!0,fe&&(h=Ru,h!==null)))throw h;s.memoizedState=E,s.baseState=A,s.baseQueue=V,m.lastRenderedState=E}return b===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Sg(s){var l=sn(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=s;var m=h.dispatch,b=h.pending,E=l.memoizedState;if(b!==null){h.pending=null;var A=b=b.next;do E=s(E,A.action),A=A.next;while(A!==b);xr(E,l.memoizedState)||(Sn=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,m]}function T_(s,l,h){var m=it,b=sn(),E=wt;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=l();var A=!xr((kt||b).memoizedState,h);A&&(b.memoizedState=h,Sn=!0),b=b.queue;var I=k_.bind(null,m,b,s);if(Bc(2048,8,I,[s]),b.getSnapshot!==l||A||on!==null&&on.memoizedState.tag&1){if(m.flags|=2048,ku(9,gd(),A_.bind(null,m,b,h,l),null),Pt===null)throw Error(r(349));E||(eo&124)!==0||O_(m,l,h)}return h}function O_(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=it.updateQueue,l===null?(l=wg(),it.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function A_(s,l,h,m){l.value=h,l.getSnapshot=m,D_(l)&&N_(s)}function k_(s,l,h){return h(function(){D_(l)&&N_(s)})}function D_(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!xr(s,h)}catch{return!0}}function N_(s){var l=wu(s,2);l!==null&&Rr(l,s,2)}function Cg(s){var l=lr();if(typeof s=="function"){var h=s;if(s=h(),ms){fn(!0);try{h()}finally{fn(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:s},l}function I_(s,l,h,m){return s.baseState=h,Eg(s,kt,typeof m=="function"?m:pi)}function WI(s,l,h,m,b){if(bd(s))throw Error(r(485));if(s=l.action,s!==null){var E={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){E.listeners.push(A)}};U.T!==null?h(!0):E.isTransition=!1,m(E),h=l.pending,h===null?(E.next=l.pending=E,M_(l,E)):(E.next=h.next,l.pending=h.next=E)}}function M_(s,l){var h=l.action,m=l.payload,b=s.state;if(l.isTransition){var E=U.T,A={};U.T=A;try{var I=h(b,m),V=U.S;V!==null&&V(A,I),F_(s,l,I)}catch(ne){Rg(s,l,ne)}finally{U.T=E}}else try{E=h(b,m),F_(s,l,E)}catch(ne){Rg(s,l,ne)}}function F_(s,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){P_(s,l,m)},function(m){return Rg(s,l,m)}):P_(s,l,h)}function P_(s,l,h){l.status="fulfilled",l.value=h,L_(l),s.state=h,l=s.pending,l!==null&&(h=l.next,h===l?s.pending=null:(h=h.next,l.next=h,M_(s,h)))}function Rg(s,l,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=h,L_(l),l=l.next;while(l!==m)}s.action=null}function L_(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function B_(s,l){return l}function z_(s,l){if(wt){var h=Pt.formState;if(h!==null){e:{var m=it;if(wt){if($t){t:{for(var b=$t,E=Ca;b.nodeType!==8;){if(!E){b=null;break t}if(b=oa(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){$t=oa(b.nextSibling),m=b.data==="F!";break e}}hs(m)}m=!1}m&&(l=h[0])}}return h=lr(),h.memoizedState=h.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B_,lastRenderedState:l},h.queue=m,h=aE.bind(null,it,m),m.dispatch=h,m=Cg(!1),E=Dg.bind(null,it,!1,m.queue),m=lr(),b={state:l,dispatch:null,action:s,pending:null},m.queue=b,h=WI.bind(null,it,b,E,h),b.dispatch=h,m.memoizedState=s,[l,h,!1]}function U_(s){var l=sn();return V_(l,kt,s)}function V_(s,l,h){if(l=Eg(s,l,B_)[0],s=md(pi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Lc(l)}catch(A){throw A===Dc?cd:A}else m=l;l=sn();var b=l.queue,E=b.dispatch;return h!==l.memoizedState&&(it.flags|=2048,ku(9,gd(),HI.bind(null,b,h),null)),[m,E,s]}function HI(s,l){s.action=l}function j_(s){var l=sn(),h=kt;if(h!==null)return V_(l,h,s);sn(),l=l.memoizedState,h=sn();var m=h.queue.dispatch;return h.memoizedState=s,[l,m,!1]}function ku(s,l,h,m){return s={tag:s,create:h,deps:m,inst:l,next:null},l=it.updateQueue,l===null&&(l=wg(),it.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,l.lastEffect=s),s}function gd(){return{destroy:void 0,resource:void 0}}function q_(){return sn().memoizedState}function yd(s,l,h,m){var b=lr();m=m===void 0?null:m,it.flags|=s,b.memoizedState=ku(1|l,gd(),h,m)}function Bc(s,l,h,m){var b=sn();m=m===void 0?null:m;var E=b.memoizedState.inst;kt!==null&&m!==null&&mg(m,kt.memoizedState.deps)?b.memoizedState=ku(l,E,h,m):(it.flags|=s,b.memoizedState=ku(1|l,E,h,m))}function W_(s,l){yd(8390656,8,s,l)}function H_(s,l){Bc(2048,8,s,l)}function G_(s,l){return Bc(4,2,s,l)}function Q_(s,l){return Bc(4,4,s,l)}function $_(s,l){if(typeof l=="function"){s=s();var h=l(s);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function K_(s,l,h){h=h!=null?h.concat([s]):null,Bc(4,4,$_.bind(null,l,s),h)}function Tg(){}function X_(s,l){var h=sn();l=l===void 0?null:l;var m=h.memoizedState;return l!==null&&mg(l,m[1])?m[0]:(h.memoizedState=[s,l],s)}function Y_(s,l){var h=sn();l=l===void 0?null:l;var m=h.memoizedState;if(l!==null&&mg(l,m[1]))return m[0];if(m=s(),ms){fn(!0);try{s()}finally{fn(!1)}}return h.memoizedState=[m,l],m}function Og(s,l,h){return h===void 0||(eo&1073741824)!==0?s.memoizedState=l:(s.memoizedState=h,s=eS(),it.lanes|=s,so|=s,h)}function Z_(s,l,h,m){return xr(h,l)?h:Tu.current!==null?(s=Og(s,h,m),xr(s,l)||(Sn=!0),s):(eo&42)===0?(Sn=!0,s.memoizedState=h):(s=eS(),it.lanes|=s,so|=s,l)}function J_(s,l,h,m,b){var E=H.p;H.p=E!==0&&8>E?E:8;var A=U.T,I={};U.T=I,Dg(s,!1,l,h);try{var V=b(),ne=U.S;if(ne!==null&&ne(I,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var fe=VI(V,m);zc(s,l,fe,Cr(s))}else zc(s,l,m,Cr(s))}catch(de){zc(s,l,{then:function(){},status:"rejected",reason:de},Cr())}finally{H.p=E,U.T=A}}function GI(){}function Ag(s,l,h,m){if(s.tag!==5)throw Error(r(476));var b=eE(s).queue;J_(s,b,l,$,h===null?GI:function(){return tE(s),h(m)})}function eE(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:$},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:h},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function tE(s){var l=eE(s).next.queue;zc(s,l,{},Cr())}function kg(){return Wn(rf)}function nE(){return sn().memoizedState}function rE(){return sn().memoizedState}function QI(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var h=Cr();s=Zi(h);var m=Ji(l,s,h);m!==null&&(Rr(m,l,h),Ic(m,l,h)),l={cache:og()},s.payload=l;return}l=l.return}}function $I(s,l,h){var m=Cr();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},bd(s)?iE(l,h):(h=Xm(s,l,h,m),h!==null&&(Rr(h,s,m),oE(h,l,m)))}function aE(s,l,h){var m=Cr();zc(s,l,h,m)}function zc(s,l,h,m){var b={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(bd(s))iE(l,b);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var A=l.lastRenderedState,I=E(A,h);if(b.hasEagerState=!0,b.eagerState=I,xr(I,A))return nd(s,l,b,0),Pt===null&&td(),!1}catch{}finally{}if(h=Xm(s,l,b,m),h!==null)return Rr(h,s,m),oE(h,l,m),!0}return!1}function Dg(s,l,h,m){if(m={lane:2,revertLane:ly(),action:m,hasEagerState:!1,eagerState:null,next:null},bd(s)){if(l)throw Error(r(479))}else l=Xm(s,h,m,2),l!==null&&Rr(l,s,2)}function bd(s){var l=s.alternate;return s===it||l!==null&&l===it}function iE(s,l){Ou=dd=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function oE(s,l,h){if((h&4194048)!==0){var m=l.lanes;m&=s.pendingLanes,h|=m,l.lanes=h,pw(s,h)}}var xd={readContext:Wn,use:vd,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},sE={readContext:Wn,use:vd,useCallback:function(s,l){return lr().memoizedState=[s,l===void 0?null:l],s},useContext:Wn,useEffect:W_,useImperativeHandle:function(s,l,h){h=h!=null?h.concat([s]):null,yd(4194308,4,$_.bind(null,l,s),h)},useLayoutEffect:function(s,l){return yd(4194308,4,s,l)},useInsertionEffect:function(s,l){yd(4,2,s,l)},useMemo:function(s,l){var h=lr();l=l===void 0?null:l;var m=s();if(ms){fn(!0);try{s()}finally{fn(!1)}}return h.memoizedState=[m,l],m},useReducer:function(s,l,h){var m=lr();if(h!==void 0){var b=h(l);if(ms){fn(!0);try{h(l)}finally{fn(!1)}}}else b=l;return m.memoizedState=m.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},m.queue=s,s=s.dispatch=$I.bind(null,it,s),[m.memoizedState,s]},useRef:function(s){var l=lr();return s={current:s},l.memoizedState=s},useState:function(s){s=Cg(s);var l=s.queue,h=aE.bind(null,it,l);return l.dispatch=h,[s.memoizedState,h]},useDebugValue:Tg,useDeferredValue:function(s,l){var h=lr();return Og(h,s,l)},useTransition:function(){var s=Cg(!1);return s=J_.bind(null,it,s.queue,!0,!1),lr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,h){var m=it,b=lr();if(wt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),Pt===null)throw Error(r(349));(pt&124)!==0||O_(m,l,h)}b.memoizedState=h;var E={value:h,getSnapshot:l};return b.queue=E,W_(k_.bind(null,m,E,s),[s]),m.flags|=2048,ku(9,gd(),A_.bind(null,m,E,h,l),null),h},useId:function(){var s=lr(),l=Pt.identifierPrefix;if(wt){var h=fi,m=ci;h=(m&~(1<<32-Mn(m)-1)).toString(32)+h,l="«"+l+"R"+h,h=pd++,0<h&&(l+="H"+h.toString(32)),l+="»"}else h=jI++,l="«"+l+"r"+h.toString(32)+"»";return s.memoizedState=l},useHostTransitionStatus:kg,useFormState:z_,useActionState:z_,useOptimistic:function(s){var l=lr();l.memoizedState=l.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=Dg.bind(null,it,!0,h),h.dispatch=l,[s,l]},useMemoCache:_g,useCacheRefresh:function(){return lr().memoizedState=QI.bind(null,it)}},uE={readContext:Wn,use:vd,useCallback:X_,useContext:Wn,useEffect:H_,useImperativeHandle:K_,useInsertionEffect:G_,useLayoutEffect:Q_,useMemo:Y_,useReducer:md,useRef:q_,useState:function(){return md(pi)},useDebugValue:Tg,useDeferredValue:function(s,l){var h=sn();return Z_(h,kt.memoizedState,s,l)},useTransition:function(){var s=md(pi)[0],l=sn().memoizedState;return[typeof s=="boolean"?s:Lc(s),l]},useSyncExternalStore:T_,useId:nE,useHostTransitionStatus:kg,useFormState:U_,useActionState:U_,useOptimistic:function(s,l){var h=sn();return I_(h,kt,s,l)},useMemoCache:_g,useCacheRefresh:rE},KI={readContext:Wn,use:vd,useCallback:X_,useContext:Wn,useEffect:H_,useImperativeHandle:K_,useInsertionEffect:G_,useLayoutEffect:Q_,useMemo:Y_,useReducer:Sg,useRef:q_,useState:function(){return Sg(pi)},useDebugValue:Tg,useDeferredValue:function(s,l){var h=sn();return kt===null?Og(h,s,l):Z_(h,kt.memoizedState,s,l)},useTransition:function(){var s=Sg(pi)[0],l=sn().memoizedState;return[typeof s=="boolean"?s:Lc(s),l]},useSyncExternalStore:T_,useId:nE,useHostTransitionStatus:kg,useFormState:j_,useActionState:j_,useOptimistic:function(s,l){var h=sn();return kt!==null?I_(h,kt,s,l):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:_g,useCacheRefresh:rE},Du=null,Uc=0;function wd(s){var l=Uc;return Uc+=1,Du===null&&(Du=[]),b_(Du,s,l)}function Vc(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function _d(s,l){throw l.$$typeof===p?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function lE(s){var l=s._init;return l(s._payload)}function cE(s){function l(X,W){if(s){var Z=X.deletions;Z===null?(X.deletions=[W],X.flags|=16):Z.push(W)}}function h(X,W){if(!s)return null;for(;W!==null;)l(X,W),W=W.sibling;return null}function m(X){for(var W=new Map;X!==null;)X.key!==null?W.set(X.key,X):W.set(X.index,X),X=X.sibling;return W}function b(X,W){return X=li(X,W),X.index=0,X.sibling=null,X}function E(X,W,Z){return X.index=Z,s?(Z=X.alternate,Z!==null?(Z=Z.index,Z<W?(X.flags|=67108866,W):Z):(X.flags|=67108866,W)):(X.flags|=1048576,W)}function A(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function I(X,W,Z,he){return W===null||W.tag!==6?(W=Zm(Z,X.mode,he),W.return=X,W):(W=b(W,Z),W.return=X,W)}function V(X,W,Z,he){var Oe=Z.type;return Oe===y?fe(X,W,Z.props.children,he,Z.key):W!==null&&(W.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===D&&lE(Oe)===W.type)?(W=b(W,Z.props),Vc(W,Z),W.return=X,W):(W=ad(Z.type,Z.key,Z.props,null,X.mode,he),Vc(W,Z),W.return=X,W)}function ne(X,W,Z,he){return W===null||W.tag!==4||W.stateNode.containerInfo!==Z.containerInfo||W.stateNode.implementation!==Z.implementation?(W=Jm(Z,X.mode,he),W.return=X,W):(W=b(W,Z.children||[]),W.return=X,W)}function fe(X,W,Z,he,Oe){return W===null||W.tag!==7?(W=us(Z,X.mode,he,Oe),W.return=X,W):(W=b(W,Z),W.return=X,W)}function de(X,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Zm(""+W,X.mode,Z),W.return=X,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return Z=ad(W.type,W.key,W.props,null,X.mode,Z),Vc(Z,W),Z.return=X,Z;case g:return W=Jm(W,X.mode,Z),W.return=X,W;case D:var he=W._init;return W=he(W._payload),de(X,W,Z)}if(te(W)||z(W))return W=us(W,X.mode,Z,null),W.return=X,W;if(typeof W.then=="function")return de(X,wd(W),Z);if(W.$$typeof===C)return de(X,ud(X,W),Z);_d(X,W)}return null}function ae(X,W,Z,he){var Oe=W!==null?W.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Oe!==null?null:I(X,W,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:return Z.key===Oe?V(X,W,Z,he):null;case g:return Z.key===Oe?ne(X,W,Z,he):null;case D:return Oe=Z._init,Z=Oe(Z._payload),ae(X,W,Z,he)}if(te(Z)||z(Z))return Oe!==null?null:fe(X,W,Z,he,null);if(typeof Z.then=="function")return ae(X,W,wd(Z),he);if(Z.$$typeof===C)return ae(X,W,ud(X,Z),he);_d(X,Z)}return null}function ie(X,W,Z,he,Oe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return X=X.get(Z)||null,I(W,X,""+he,Oe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case v:return X=X.get(he.key===null?Z:he.key)||null,V(W,X,he,Oe);case g:return X=X.get(he.key===null?Z:he.key)||null,ne(W,X,he,Oe);case D:var ot=he._init;return he=ot(he._payload),ie(X,W,Z,he,Oe)}if(te(he)||z(he))return X=X.get(Z)||null,fe(W,X,he,Oe,null);if(typeof he.then=="function")return ie(X,W,Z,wd(he),Oe);if(he.$$typeof===C)return ie(X,W,Z,ud(W,he),Oe);_d(W,he)}return null}function He(X,W,Z,he){for(var Oe=null,ot=null,Be=W,je=W=0,Rn=null;Be!==null&&je<Z.length;je++){Be.index>je?(Rn=Be,Be=null):Rn=Be.sibling;var yt=ae(X,Be,Z[je],he);if(yt===null){Be===null&&(Be=Rn);break}s&&Be&&yt.alternate===null&&l(X,Be),W=E(yt,W,je),ot===null?Oe=yt:ot.sibling=yt,ot=yt,Be=Rn}if(je===Z.length)return h(X,Be),wt&&cs(X,je),Oe;if(Be===null){for(;je<Z.length;je++)Be=de(X,Z[je],he),Be!==null&&(W=E(Be,W,je),ot===null?Oe=Be:ot.sibling=Be,ot=Be);return wt&&cs(X,je),Oe}for(Be=m(Be);je<Z.length;je++)Rn=ie(Be,X,je,Z[je],he),Rn!==null&&(s&&Rn.alternate!==null&&Be.delete(Rn.key===null?je:Rn.key),W=E(Rn,W,je),ot===null?Oe=Rn:ot.sibling=Rn,ot=Rn);return s&&Be.forEach(function(go){return l(X,go)}),wt&&cs(X,je),Oe}function Ve(X,W,Z,he){if(Z==null)throw Error(r(151));for(var Oe=null,ot=null,Be=W,je=W=0,Rn=null,yt=Z.next();Be!==null&&!yt.done;je++,yt=Z.next()){Be.index>je?(Rn=Be,Be=null):Rn=Be.sibling;var go=ae(X,Be,yt.value,he);if(go===null){Be===null&&(Be=Rn);break}s&&Be&&go.alternate===null&&l(X,Be),W=E(go,W,je),ot===null?Oe=go:ot.sibling=go,ot=go,Be=Rn}if(yt.done)return h(X,Be),wt&&cs(X,je),Oe;if(Be===null){for(;!yt.done;je++,yt=Z.next())yt=de(X,yt.value,he),yt!==null&&(W=E(yt,W,je),ot===null?Oe=yt:ot.sibling=yt,ot=yt);return wt&&cs(X,je),Oe}for(Be=m(Be);!yt.done;je++,yt=Z.next())yt=ie(Be,X,je,yt.value,he),yt!==null&&(s&&yt.alternate!==null&&Be.delete(yt.key===null?je:yt.key),W=E(yt,W,je),ot===null?Oe=yt:ot.sibling=yt,ot=yt);return s&&Be.forEach(function(XM){return l(X,XM)}),wt&&cs(X,je),Oe}function Nt(X,W,Z,he){if(typeof Z=="object"&&Z!==null&&Z.type===y&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:e:{for(var Oe=Z.key;W!==null;){if(W.key===Oe){if(Oe=Z.type,Oe===y){if(W.tag===7){h(X,W.sibling),he=b(W,Z.props.children),he.return=X,X=he;break e}}else if(W.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===D&&lE(Oe)===W.type){h(X,W.sibling),he=b(W,Z.props),Vc(he,Z),he.return=X,X=he;break e}h(X,W);break}else l(X,W);W=W.sibling}Z.type===y?(he=us(Z.props.children,X.mode,he,Z.key),he.return=X,X=he):(he=ad(Z.type,Z.key,Z.props,null,X.mode,he),Vc(he,Z),he.return=X,X=he)}return A(X);case g:e:{for(Oe=Z.key;W!==null;){if(W.key===Oe)if(W.tag===4&&W.stateNode.containerInfo===Z.containerInfo&&W.stateNode.implementation===Z.implementation){h(X,W.sibling),he=b(W,Z.children||[]),he.return=X,X=he;break e}else{h(X,W);break}else l(X,W);W=W.sibling}he=Jm(Z,X.mode,he),he.return=X,X=he}return A(X);case D:return Oe=Z._init,Z=Oe(Z._payload),Nt(X,W,Z,he)}if(te(Z))return He(X,W,Z,he);if(z(Z)){if(Oe=z(Z),typeof Oe!="function")throw Error(r(150));return Z=Oe.call(Z),Ve(X,W,Z,he)}if(typeof Z.then=="function")return Nt(X,W,wd(Z),he);if(Z.$$typeof===C)return Nt(X,W,ud(X,Z),he);_d(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,W!==null&&W.tag===6?(h(X,W.sibling),he=b(W,Z),he.return=X,X=he):(h(X,W),he=Zm(Z,X.mode,he),he.return=X,X=he),A(X)):h(X,W)}return function(X,W,Z,he){try{Uc=0;var Oe=Nt(X,W,Z,he);return Du=null,Oe}catch(Be){if(Be===Dc||Be===cd)throw Be;var ot=wr(29,Be,null,X.mode);return ot.lanes=he,ot.return=X,ot}finally{}}}var Nu=cE(!0),fE=cE(!1),Wr=Q(null),Ra=null;function to(s){var l=s.alternate;ue(dn,dn.current&1),ue(Wr,s),Ra===null&&(l===null||Tu.current!==null||l.memoizedState!==null)&&(Ra=s)}function hE(s){if(s.tag===22){if(ue(dn,dn.current),ue(Wr,s),Ra===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Ra=s)}}else no()}function no(){ue(dn,dn.current),ue(Wr,Wr.current)}function vi(s){oe(Wr),Ra===s&&(Ra=null),oe(dn)}var dn=Q(0);function Ed(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||wy(h)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Ng(s,l,h,m){l=s.memoizedState,h=h(m,l),h=h==null?l:d({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Ig={enqueueSetState:function(s,l,h){s=s._reactInternals;var m=Cr(),b=Zi(m);b.payload=l,h!=null&&(b.callback=h),l=Ji(s,b,m),l!==null&&(Rr(l,s,m),Ic(l,s,m))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var m=Cr(),b=Zi(m);b.tag=1,b.payload=l,h!=null&&(b.callback=h),l=Ji(s,b,m),l!==null&&(Rr(l,s,m),Ic(l,s,m))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=Cr(),m=Zi(h);m.tag=2,l!=null&&(m.callback=l),l=Ji(s,m,h),l!==null&&(Rr(l,s,h),Ic(l,s,h))}};function dE(s,l,h,m,b,E,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,A):l.prototype&&l.prototype.isPureReactComponent?!Ec(h,m)||!Ec(b,E):!0}function pE(s,l,h,m){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==s&&Ig.enqueueReplaceState(l,l.state,null)}function gs(s,l){var h=l;if("ref"in l){h={};for(var m in l)m!=="ref"&&(h[m]=l[m])}if(s=s.defaultProps){h===l&&(h=d({},h));for(var b in s)h[b]===void 0&&(h[b]=s[b])}return h}var Sd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function vE(s){Sd(s)}function mE(s){console.error(s)}function gE(s){Sd(s)}function Cd(s,l){try{var h=s.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function yE(s,l,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Mg(s,l,h){return h=Zi(h),h.tag=3,h.payload={element:null},h.callback=function(){Cd(s,l)},h}function bE(s){return s=Zi(s),s.tag=3,s}function xE(s,l,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var E=m.value;s.payload=function(){return b(E)},s.callback=function(){yE(l,h,m)}}var A=h.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){yE(l,h,m),typeof b!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var I=m.stack;this.componentDidCatch(m.value,{componentStack:I!==null?I:""})})}function XI(s,l,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=h.alternate,l!==null&&Oc(l,h,b,!0),h=Wr.current,h!==null){switch(h.tag){case 13:return Ra===null?ay():h.alternate===null&&Kt===0&&(Kt=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===lg?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([m]):l.add(m),oy(s,m,b)),!1;case 22:return h.flags|=65536,m===lg?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([m]):h.add(m)),oy(s,m,b)),!1}throw Error(r(435,h.tag))}return oy(s,m,b),ay(),!1}if(wt)return l=Wr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,m!==ng&&(s=Error(r(422),{cause:m}),Tc(Ur(s,h)))):(m!==ng&&(l=Error(r(423),{cause:m}),Tc(Ur(l,h))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,m=Ur(m,h),b=Mg(s.stateNode,m,b),hg(s,b),Kt!==4&&(Kt=2)),!1;var E=Error(r(520),{cause:m});if(E=Ur(E,h),$c===null?$c=[E]:$c.push(E),Kt!==4&&(Kt=2),l===null)return!0;m=Ur(m,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,s=b&-b,h.lanes|=s,s=Mg(h.stateNode,m,s),hg(h,s),!1;case 1:if(l=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(uo===null||!uo.has(E))))return h.flags|=65536,b&=-b,h.lanes|=b,b=bE(b),xE(b,s,h,m),hg(h,b),!1}h=h.return}while(h!==null);return!1}var wE=Error(r(461)),Sn=!1;function Fn(s,l,h,m){l.child=s===null?fE(l,null,h,m):Nu(l,s.child,h,m)}function _E(s,l,h,m,b){h=h.render;var E=l.ref;if("ref"in m){var A={};for(var I in m)I!=="ref"&&(A[I]=m[I])}else A=m;return ps(l),m=gg(s,l,h,A,E,b),I=yg(),s!==null&&!Sn?(bg(s,l,b),mi(s,l,b)):(wt&&I&&eg(l),l.flags|=1,Fn(s,l,m,b),l.child)}function EE(s,l,h,m,b){if(s===null){var E=h.type;return typeof E=="function"&&!Ym(E)&&E.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=E,SE(s,l,E,m,b)):(s=ad(h.type,null,m,l,l.mode,b),s.ref=l.ref,s.return=l,l.child=s)}if(E=s.child,!jg(s,b)){var A=E.memoizedProps;if(h=h.compare,h=h!==null?h:Ec,h(A,m)&&s.ref===l.ref)return mi(s,l,b)}return l.flags|=1,s=li(E,m),s.ref=l.ref,s.return=l,l.child=s}function SE(s,l,h,m,b){if(s!==null){var E=s.memoizedProps;if(Ec(E,m)&&s.ref===l.ref)if(Sn=!1,l.pendingProps=m=E,jg(s,b))(s.flags&131072)!==0&&(Sn=!0);else return l.lanes=s.lanes,mi(s,l,b)}return Fg(s,l,h,m,b)}function CE(s,l,h){var m=l.pendingProps,b=m.children,E=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((l.flags&128)!==0){if(m=E!==null?E.baseLanes|h:h,s!==null){for(b=l.child=s.child,E=0;b!==null;)E=E|b.lanes|b.childLanes,b=b.sibling;l.childLanes=E&~m}else l.childLanes=0,l.child=null;return RE(s,l,m,h)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&ld(l,E!==null?E.cachePool:null),E!==null?S_(l,E):pg(),hE(l);else return l.lanes=l.childLanes=536870912,RE(s,l,E!==null?E.baseLanes|h:h,h)}else E!==null?(ld(l,E.cachePool),S_(l,E),no(),l.memoizedState=null):(s!==null&&ld(l,null),pg(),no());return Fn(s,l,b,h),l.child}function RE(s,l,h,m){var b=ug();return b=b===null?null:{parent:hn._currentValue,pool:b},l.memoizedState={baseLanes:h,cachePool:b},s!==null&&ld(l,null),pg(),hE(l),s!==null&&Oc(s,l,m,!0),null}function Rd(s,l){var h=l.ref;if(h===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(s===null||s.ref!==h)&&(l.flags|=4194816)}}function Fg(s,l,h,m,b){return ps(l),h=gg(s,l,h,m,void 0,b),m=yg(),s!==null&&!Sn?(bg(s,l,b),mi(s,l,b)):(wt&&m&&eg(l),l.flags|=1,Fn(s,l,h,b),l.child)}function TE(s,l,h,m,b,E){return ps(l),l.updateQueue=null,h=R_(l,m,h,b),C_(s),m=yg(),s!==null&&!Sn?(bg(s,l,E),mi(s,l,E)):(wt&&m&&eg(l),l.flags|=1,Fn(s,l,h,E),l.child)}function OE(s,l,h,m,b){if(ps(l),l.stateNode===null){var E=_u,A=h.contextType;typeof A=="object"&&A!==null&&(E=Wn(A)),E=new h(m,E),l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Ig,l.stateNode=E,E._reactInternals=l,E=l.stateNode,E.props=m,E.state=l.memoizedState,E.refs={},cg(l),A=h.contextType,E.context=typeof A=="object"&&A!==null?Wn(A):_u,E.state=l.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(Ng(l,h,A,m),E.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(A=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),A!==E.state&&Ig.enqueueReplaceState(E,E.state,null),Fc(l,m,E,b),Mc(),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(s===null){E=l.stateNode;var I=l.memoizedProps,V=gs(h,I);E.props=V;var ne=E.context,fe=h.contextType;A=_u,typeof fe=="object"&&fe!==null&&(A=Wn(fe));var de=h.getDerivedStateFromProps;fe=typeof de=="function"||typeof E.getSnapshotBeforeUpdate=="function",I=l.pendingProps!==I,fe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I||ne!==A)&&pE(l,E,m,A),Yi=!1;var ae=l.memoizedState;E.state=ae,Fc(l,m,E,b),Mc(),ne=l.memoizedState,I||ae!==ne||Yi?(typeof de=="function"&&(Ng(l,h,de,m),ne=l.memoizedState),(V=Yi||dE(l,h,V,m,ae,ne,A))?(fe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=ne),E.props=m,E.state=ne,E.context=A,m=V):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{E=l.stateNode,fg(s,l),A=l.memoizedProps,fe=gs(h,A),E.props=fe,de=l.pendingProps,ae=E.context,ne=h.contextType,V=_u,typeof ne=="object"&&ne!==null&&(V=Wn(ne)),I=h.getDerivedStateFromProps,(ne=typeof I=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==de||ae!==V)&&pE(l,E,m,V),Yi=!1,ae=l.memoizedState,E.state=ae,Fc(l,m,E,b),Mc();var ie=l.memoizedState;A!==de||ae!==ie||Yi||s!==null&&s.dependencies!==null&&sd(s.dependencies)?(typeof I=="function"&&(Ng(l,h,I,m),ie=l.memoizedState),(fe=Yi||dE(l,h,fe,m,ae,ie,V)||s!==null&&s.dependencies!==null&&sd(s.dependencies))?(ne||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,ie,V),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,ie,V)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ie),E.props=m,E.state=ie,E.context=V,m=fe):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),m=!1)}return E=m,Rd(s,l),m=(l.flags&128)!==0,E||m?(E=l.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),l.flags|=1,s!==null&&m?(l.child=Nu(l,s.child,null,b),l.child=Nu(l,null,h,b)):Fn(s,l,h,b),l.memoizedState=E.state,s=l.child):s=mi(s,l,b),s}function AE(s,l,h,m){return Rc(),l.flags|=256,Fn(s,l,h,m),l.child}var Pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lg(s){return{baseLanes:s,cachePool:m_()}}function Bg(s,l,h){return s=s!==null?s.childLanes&~h:0,l&&(s|=Hr),s}function kE(s,l,h){var m=l.pendingProps,b=!1,E=(l.flags&128)!==0,A;if((A=E)||(A=s!==null&&s.memoizedState===null?!1:(dn.current&2)!==0),A&&(b=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,s===null){if(wt){if(b?to(l):no(),wt){var I=$t,V;if(V=I){e:{for(V=I,I=Ca;V.nodeType!==8;){if(!I){I=null;break e}if(V=oa(V.nextSibling),V===null){I=null;break e}}I=V}I!==null?(l.memoizedState={dehydrated:I,treeContext:ls!==null?{id:ci,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},V=wr(18,null,null,0),V.stateNode=I,V.return=l,l.child=V,er=l,$t=null,V=!0):V=!1}V||hs(l)}if(I=l.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return wy(I)?l.lanes=32:l.lanes=536870912,null;vi(l)}return I=m.children,m=m.fallback,b?(no(),b=l.mode,I=Td({mode:"hidden",children:I},b),m=us(m,b,h,null),I.return=l,m.return=l,I.sibling=m,l.child=I,b=l.child,b.memoizedState=Lg(h),b.childLanes=Bg(s,A,h),l.memoizedState=Pg,m):(to(l),zg(l,I))}if(V=s.memoizedState,V!==null&&(I=V.dehydrated,I!==null)){if(E)l.flags&256?(to(l),l.flags&=-257,l=Ug(s,l,h)):l.memoizedState!==null?(no(),l.child=s.child,l.flags|=128,l=null):(no(),b=m.fallback,I=l.mode,m=Td({mode:"visible",children:m.children},I),b=us(b,I,h,null),b.flags|=2,m.return=l,b.return=l,m.sibling=b,l.child=m,Nu(l,s.child,null,h),m=l.child,m.memoizedState=Lg(h),m.childLanes=Bg(s,A,h),l.memoizedState=Pg,l=b);else if(to(l),wy(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var ne=A.dgst;A=ne,m=Error(r(419)),m.stack="",m.digest=A,Tc({value:m,source:null,stack:null}),l=Ug(s,l,h)}else if(Sn||Oc(s,l,h,!1),A=(h&s.childLanes)!==0,Sn||A){if(A=Pt,A!==null&&(m=h&-h,m=(m&42)!==0?1:_m(m),m=(m&(A.suspendedLanes|h))!==0?0:m,m!==0&&m!==V.retryLane))throw V.retryLane=m,wu(s,m),Rr(A,s,m),wE;I.data==="$?"||ay(),l=Ug(s,l,h)}else I.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=V.treeContext,$t=oa(I.nextSibling),er=l,wt=!0,fs=null,Ca=!1,s!==null&&(jr[qr++]=ci,jr[qr++]=fi,jr[qr++]=ls,ci=s.id,fi=s.overflow,ls=l),l=zg(l,m.children),l.flags|=4096);return l}return b?(no(),b=m.fallback,I=l.mode,V=s.child,ne=V.sibling,m=li(V,{mode:"hidden",children:m.children}),m.subtreeFlags=V.subtreeFlags&65011712,ne!==null?b=li(ne,b):(b=us(b,I,h,null),b.flags|=2),b.return=l,m.return=l,m.sibling=b,l.child=m,m=b,b=l.child,I=s.child.memoizedState,I===null?I=Lg(h):(V=I.cachePool,V!==null?(ne=hn._currentValue,V=V.parent!==ne?{parent:ne,pool:ne}:V):V=m_(),I={baseLanes:I.baseLanes|h,cachePool:V}),b.memoizedState=I,b.childLanes=Bg(s,A,h),l.memoizedState=Pg,m):(to(l),h=s.child,s=h.sibling,h=li(h,{mode:"visible",children:m.children}),h.return=l,h.sibling=null,s!==null&&(A=l.deletions,A===null?(l.deletions=[s],l.flags|=16):A.push(s)),l.child=h,l.memoizedState=null,h)}function zg(s,l){return l=Td({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Td(s,l){return s=wr(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ug(s,l,h){return Nu(l,s.child,null,h),s=zg(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function DE(s,l,h){s.lanes|=l;var m=s.alternate;m!==null&&(m.lanes|=l),ag(s.return,l,h)}function Vg(s,l,h,m,b){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=h,E.tailMode=b)}function NE(s,l,h){var m=l.pendingProps,b=m.revealOrder,E=m.tail;if(Fn(s,l,m.children,h),m=dn.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&DE(s,h,l);else if(s.tag===19)DE(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(ue(dn,m),b){case"forwards":for(h=l.child,b=null;h!==null;)s=h.alternate,s!==null&&Ed(s)===null&&(b=h),h=h.sibling;h=b,h===null?(b=l.child,l.child=null):(b=h.sibling,h.sibling=null),Vg(l,!1,b,h,E);break;case"backwards":for(h=null,b=l.child,l.child=null;b!==null;){if(s=b.alternate,s!==null&&Ed(s)===null){l.child=b;break}s=b.sibling,b.sibling=h,h=b,b=s}Vg(l,!0,h,null,E);break;case"together":Vg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function mi(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),so|=l.lanes,(h&l.childLanes)===0)if(s!==null){if(Oc(s,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,h=li(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=li(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function jg(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&sd(s)))}function YI(s,l,h){switch(l.tag){case 3:Ee(l,l.stateNode.containerInfo),Xi(l,hn,s.memoizedState.cache),Rc();break;case 27:case 5:gt(l);break;case 4:Ee(l,l.stateNode.containerInfo);break;case 10:Xi(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(to(l),l.flags|=128,null):(h&l.child.childLanes)!==0?kE(s,l,h):(to(l),s=mi(s,l,h),s!==null?s.sibling:null);to(l);break;case 19:var b=(s.flags&128)!==0;if(m=(h&l.childLanes)!==0,m||(Oc(s,l,h,!1),m=(h&l.childLanes)!==0),b){if(m)return NE(s,l,h);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ue(dn,dn.current),m)break;return null;case 22:case 23:return l.lanes=0,CE(s,l,h);case 24:Xi(l,hn,s.memoizedState.cache)}return mi(s,l,h)}function IE(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps)Sn=!0;else{if(!jg(s,h)&&(l.flags&128)===0)return Sn=!1,YI(s,l,h);Sn=(s.flags&131072)!==0}else Sn=!1,wt&&(l.flags&1048576)!==0&&l_(l,od,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var m=l.elementType,b=m._init;if(m=b(m._payload),l.type=m,typeof m=="function")Ym(m)?(s=gs(m,s),l.tag=1,l=OE(null,l,m,s,h)):(l.tag=0,l=Fg(null,l,m,s,h));else{if(m!=null){if(b=m.$$typeof,b===R){l.tag=11,l=_E(null,l,m,s,h);break e}else if(b===k){l.tag=14,l=EE(null,l,m,s,h);break e}}throw l=re(m)||m,Error(r(306,l,""))}}return l;case 0:return Fg(s,l,l.type,l.pendingProps,h);case 1:return m=l.type,b=gs(m,l.pendingProps),OE(s,l,m,b,h);case 3:e:{if(Ee(l,l.stateNode.containerInfo),s===null)throw Error(r(387));m=l.pendingProps;var E=l.memoizedState;b=E.element,fg(s,l),Fc(l,m,null,h);var A=l.memoizedState;if(m=A.cache,Xi(l,hn,m),m!==E.cache&&ig(l,[hn],h,!0),Mc(),m=A.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=AE(s,l,m,h);break e}else if(m!==b){b=Ur(Error(r(424)),l),Tc(b),l=AE(s,l,m,h);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for($t=oa(s.firstChild),er=l,wt=!0,fs=null,Ca=!0,h=fE(l,null,m,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Rc(),m===b){l=mi(s,l,h);break e}Fn(s,l,m,h)}l=l.child}return l;case 26:return Rd(s,l),s===null?(h=LS(l.type,null,l.pendingProps,null))?l.memoizedState=h:wt||(h=l.type,s=l.pendingProps,m=Vd(ye.current).createElement(h),m[qn]=l,m[sr]=s,Ln(m,h,s),En(m),l.stateNode=m):l.memoizedState=LS(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return gt(l),s===null&&wt&&(m=l.stateNode=MS(l.type,l.pendingProps,ye.current),er=l,Ca=!0,b=$t,fo(l.type)?(_y=b,$t=oa(m.firstChild)):$t=b),Fn(s,l,l.pendingProps.children,h),Rd(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&wt&&((b=m=$t)&&(m=CM(m,l.type,l.pendingProps,Ca),m!==null?(l.stateNode=m,er=l,$t=oa(m.firstChild),Ca=!1,b=!0):b=!1),b||hs(l)),gt(l),b=l.type,E=l.pendingProps,A=s!==null?s.memoizedProps:null,m=E.children,yy(b,E)?m=null:A!==null&&yy(b,A)&&(l.flags|=32),l.memoizedState!==null&&(b=gg(s,l,qI,null,null,h),rf._currentValue=b),Rd(s,l),Fn(s,l,m,h),l.child;case 6:return s===null&&wt&&((s=h=$t)&&(h=RM(h,l.pendingProps,Ca),h!==null?(l.stateNode=h,er=l,$t=null,s=!0):s=!1),s||hs(l)),null;case 13:return kE(s,l,h);case 4:return Ee(l,l.stateNode.containerInfo),m=l.pendingProps,s===null?l.child=Nu(l,null,m,h):Fn(s,l,m,h),l.child;case 11:return _E(s,l,l.type,l.pendingProps,h);case 7:return Fn(s,l,l.pendingProps,h),l.child;case 8:return Fn(s,l,l.pendingProps.children,h),l.child;case 12:return Fn(s,l,l.pendingProps.children,h),l.child;case 10:return m=l.pendingProps,Xi(l,l.type,m.value),Fn(s,l,m.children,h),l.child;case 9:return b=l.type._context,m=l.pendingProps.children,ps(l),b=Wn(b),m=m(b),l.flags|=1,Fn(s,l,m,h),l.child;case 14:return EE(s,l,l.type,l.pendingProps,h);case 15:return SE(s,l,l.type,l.pendingProps,h);case 19:return NE(s,l,h);case 31:return m=l.pendingProps,h=l.mode,m={mode:m.mode,children:m.children},s===null?(h=Td(m,h),h.ref=l.ref,l.child=h,h.return=l,l=h):(h=li(s.child,m),h.ref=l.ref,l.child=h,h.return=l,l=h),l;case 22:return CE(s,l,h);case 24:return ps(l),m=Wn(hn),s===null?(b=ug(),b===null&&(b=Pt,E=og(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=h),b=E),l.memoizedState={parent:m,cache:b},cg(l),Xi(l,hn,b)):((s.lanes&h)!==0&&(fg(s,l),Fc(l,null,null,h),Mc()),b=s.memoizedState,E=l.memoizedState,b.parent!==m?(b={parent:m,cache:m},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),Xi(l,hn,m)):(m=E.cache,Xi(l,hn,m),m!==b.cache&&ig(l,[hn],h,!0))),Fn(s,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function gi(s){s.flags|=4}function ME(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!jS(l)){if(l=Wr.current,l!==null&&((pt&4194048)===pt?Ra!==null:(pt&62914560)!==pt&&(pt&536870912)===0||l!==Ra))throw Nc=lg,g_;s.flags|=8192}}function Od(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?hw():536870912,s.lanes|=l,Pu|=l)}function jc(s,l){if(!wt)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function jt(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(l)for(var b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=m,s.childLanes=h,l}function ZI(s,l,h){var m=l.pendingProps;switch(tg(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(l),null;case 1:return jt(l),null;case 3:return h=l.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),di(hn),ze(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Cc(l)?gi(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,h_())),jt(l),null;case 26:return h=l.memoizedState,s===null?(gi(l),h!==null?(jt(l),ME(l,h)):(jt(l),l.flags&=-16777217)):h?h!==s.memoizedState?(gi(l),jt(l),ME(l,h)):(jt(l),l.flags&=-16777217):(s.memoizedProps!==m&&gi(l),jt(l),l.flags&=-16777217),null;case 27:qe(l),h=ye.current;var b=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==m&&gi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return jt(l),null}s=me.current,Cc(l)?c_(l):(s=MS(b,m,h),l.stateNode=s,gi(l))}return jt(l),null;case 5:if(qe(l),h=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==m&&gi(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return jt(l),null}if(s=me.current,Cc(l))c_(l);else{switch(b=Vd(ye.current),s){case 1:s=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:s=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":s=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":s=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?b.createElement(h,{is:m.is}):b.createElement(h)}}s[qn]=l,s[sr]=m;e:for(b=l.child;b!==null;){if(b.tag===5||b.tag===6)s.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===l)break e;for(;b.sibling===null;){if(b.return===null||b.return===l)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}l.stateNode=s;e:switch(Ln(s,h,m),h){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&gi(l)}}return jt(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==m&&gi(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(s=ye.current,Cc(l)){if(s=l.stateNode,h=l.memoizedProps,m=null,b=er,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}s[qn]=l,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||TS(s.nodeValue,h)),s||hs(l)}else s=Vd(s).createTextNode(m),s[qn]=l,l.stateNode=s}return jt(l),null;case 13:if(m=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Cc(l),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(r(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[qn]=l}else Rc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;jt(l),b=!1}else b=h_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(vi(l),l):(vi(l),null)}if(vi(l),(l.flags&128)!==0)return l.lanes=h,l;if(h=m!==null,s=s!==null&&s.memoizedState!==null,h){m=l.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==b&&(m.flags|=2048)}return h!==s&&h&&(l.child.flags|=8192),Od(l,l.updateQueue),jt(l),null;case 4:return ze(),s===null&&dy(l.stateNode.containerInfo),jt(l),null;case 10:return di(l.type),jt(l),null;case 19:if(oe(dn),b=l.memoizedState,b===null)return jt(l),null;if(m=(l.flags&128)!==0,E=b.rendering,E===null)if(m)jc(b,!1);else{if(Kt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(E=Ed(s),E!==null){for(l.flags|=128,jc(b,!1),s=E.updateQueue,l.updateQueue=s,Od(l,s),l.subtreeFlags=0,s=h,h=l.child;h!==null;)u_(h,s),h=h.sibling;return ue(dn,dn.current&1|2),l.child}s=s.sibling}b.tail!==null&&en()>Dd&&(l.flags|=128,m=!0,jc(b,!1),l.lanes=4194304)}else{if(!m)if(s=Ed(E),s!==null){if(l.flags|=128,m=!0,s=s.updateQueue,l.updateQueue=s,Od(l,s),jc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!E.alternate&&!wt)return jt(l),null}else 2*en()-b.renderingStartTime>Dd&&h!==536870912&&(l.flags|=128,m=!0,jc(b,!1),l.lanes=4194304);b.isBackwards?(E.sibling=l.child,l.child=E):(s=b.last,s!==null?s.sibling=E:l.child=E,b.last=E)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=en(),l.sibling=null,s=dn.current,ue(dn,m?s&1|2:s&1),l):(jt(l),null);case 22:case 23:return vi(l),vg(),m=l.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(h&536870912)!==0&&(l.flags&128)===0&&(jt(l),l.subtreeFlags&6&&(l.flags|=8192)):jt(l),h=l.updateQueue,h!==null&&Od(l,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048),s!==null&&oe(vs),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),di(hn),jt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function JI(s,l){switch(tg(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return di(hn),ze(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return qe(l),null;case 13:if(vi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Rc()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return oe(dn),null;case 4:return ze(),null;case 10:return di(l.type),null;case 22:case 23:return vi(l),vg(),s!==null&&oe(vs),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return di(hn),null;case 25:return null;default:return null}}function FE(s,l){switch(tg(l),l.tag){case 3:di(hn),ze();break;case 26:case 27:case 5:qe(l);break;case 4:ze();break;case 13:vi(l);break;case 19:oe(dn);break;case 10:di(l.type);break;case 22:case 23:vi(l),vg(),s!==null&&oe(vs);break;case 24:di(hn)}}function qc(s,l){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&s)===s){m=void 0;var E=h.create,A=h.inst;m=E(),A.destroy=m}h=h.next}while(h!==b)}}catch(I){Mt(l,l.return,I)}}function ro(s,l,h){try{var m=l.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var E=b.next;m=E;do{if((m.tag&s)===s){var A=m.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,b=l;var V=h,ne=I;try{ne()}catch(fe){Mt(b,V,fe)}}}m=m.next}while(m!==E)}}catch(fe){Mt(l,l.return,fe)}}function PE(s){var l=s.updateQueue;if(l!==null){var h=s.stateNode;try{E_(l,h)}catch(m){Mt(s,s.return,m)}}}function LE(s,l,h){h.props=gs(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){Mt(s,l,m)}}function Wc(s,l){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof h=="function"?s.refCleanup=h(m):h.current=m}}catch(b){Mt(s,l,b)}}function Ta(s,l){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){Mt(s,l,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Mt(s,l,b)}else h.current=null}function BE(s){var l=s.type,h=s.memoizedProps,m=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){Mt(s,s.return,b)}}function qg(s,l,h){try{var m=s.stateNode;xM(m,s.type,h,l),m[sr]=l}catch(b){Mt(s,s.return,b)}}function zE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&fo(s.type)||s.tag===4}function Wg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||zE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&fo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Hg(s,l,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(s),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Ud));else if(m!==4&&(m===27&&fo(s.type)&&(h=s.stateNode,l=null),s=s.child,s!==null))for(Hg(s,l,h),s=s.sibling;s!==null;)Hg(s,l,h),s=s.sibling}function Ad(s,l,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(m!==4&&(m===27&&fo(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(Ad(s,l,h),s=s.sibling;s!==null;)Ad(s,l,h),s=s.sibling}function UE(s){var l=s.stateNode,h=s.memoizedProps;try{for(var m=s.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Ln(l,m,h),l[qn]=s,l[sr]=h}catch(E){Mt(s,s.return,E)}}var yi=!1,nn=!1,Gg=!1,VE=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function eM(s,l){if(s=s.containerInfo,my=Qd,s=Zw(s),Wm(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var A=0,I=-1,V=-1,ne=0,fe=0,de=s,ae=null;t:for(;;){for(var ie;de!==h||b!==0&&de.nodeType!==3||(I=A+b),de!==E||m!==0&&de.nodeType!==3||(V=A+m),de.nodeType===3&&(A+=de.nodeValue.length),(ie=de.firstChild)!==null;)ae=de,de=ie;for(;;){if(de===s)break t;if(ae===h&&++ne===b&&(I=A),ae===E&&++fe===m&&(V=A),(ie=de.nextSibling)!==null)break;de=ae,ae=de.parentNode}de=ie}h=I===-1||V===-1?null:{start:I,end:V}}else h=null}h=h||{start:0,end:0}}else h=null;for(gy={focusedElem:s,selectionRange:h},Qd=!1,Cn=l;Cn!==null;)if(l=Cn,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,Cn=s;else for(;Cn!==null;){switch(l=Cn,E=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,h=l,b=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var He=gs(h.type,b,h.elementType===h.type);s=m.getSnapshotBeforeUpdate(He,E),m.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){Mt(h,h.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,h=s.nodeType,h===9)xy(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":xy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Cn=s;break}Cn=l.return}}function jE(s,l,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:ao(s,h),m&4&&qc(5,h);break;case 1:if(ao(s,h),m&4)if(s=h.stateNode,l===null)try{s.componentDidMount()}catch(A){Mt(h,h.return,A)}else{var b=gs(h.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(b,l,s.__reactInternalSnapshotBeforeUpdate)}catch(A){Mt(h,h.return,A)}}m&64&&PE(h),m&512&&Wc(h,h.return);break;case 3:if(ao(s,h),m&64&&(s=h.updateQueue,s!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{E_(s,l)}catch(A){Mt(h,h.return,A)}}break;case 27:l===null&&m&4&&UE(h);case 26:case 5:ao(s,h),l===null&&m&4&&BE(h),m&512&&Wc(h,h.return);break;case 12:ao(s,h);break;case 13:ao(s,h),m&4&&HE(s,h),m&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=lM.bind(null,h),TM(s,h))));break;case 22:if(m=h.memoizedState!==null||yi,!m){l=l!==null&&l.memoizedState!==null||nn,b=yi;var E=nn;yi=m,(nn=l)&&!E?io(s,h,(h.subtreeFlags&8772)!==0):ao(s,h),yi=b,nn=E}break;case 30:break;default:ao(s,h)}}function qE(s){var l=s.alternate;l!==null&&(s.alternate=null,qE(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Cm(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Vt=null,cr=!1;function bi(s,l,h){for(h=h.child;h!==null;)WE(s,l,h),h=h.sibling}function WE(s,l,h){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(oi,h)}catch{}switch(h.tag){case 26:nn||Ta(h,l),bi(s,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:nn||Ta(h,l);var m=Vt,b=cr;fo(h.type)&&(Vt=h.stateNode,cr=!1),bi(s,l,h),Jc(h.stateNode),Vt=m,cr=b;break;case 5:nn||Ta(h,l);case 6:if(m=Vt,b=cr,Vt=null,bi(s,l,h),Vt=m,cr=b,Vt!==null)if(cr)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(h.stateNode)}catch(E){Mt(h,l,E)}else try{Vt.removeChild(h.stateNode)}catch(E){Mt(h,l,E)}break;case 18:Vt!==null&&(cr?(s=Vt,NS(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),uf(s)):NS(Vt,h.stateNode));break;case 4:m=Vt,b=cr,Vt=h.stateNode.containerInfo,cr=!0,bi(s,l,h),Vt=m,cr=b;break;case 0:case 11:case 14:case 15:nn||ro(2,h,l),nn||ro(4,h,l),bi(s,l,h);break;case 1:nn||(Ta(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"&&LE(h,l,m)),bi(s,l,h);break;case 21:bi(s,l,h);break;case 22:nn=(m=nn)||h.memoizedState!==null,bi(s,l,h),nn=m;break;default:bi(s,l,h)}}function HE(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{uf(s)}catch(h){Mt(l,l.return,h)}}function tM(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new VE),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new VE),l;default:throw Error(r(435,s.tag))}}function Qg(s,l){var h=tM(s);l.forEach(function(m){var b=cM.bind(null,s,m);h.has(m)||(h.add(m),m.then(b,b))})}function _r(s,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],E=s,A=l,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(fo(I.type)){Vt=I.stateNode,cr=!1;break e}break;case 5:Vt=I.stateNode,cr=!1;break e;case 3:case 4:Vt=I.stateNode.containerInfo,cr=!0;break e}I=I.return}if(Vt===null)throw Error(r(160));WE(E,A,b),Vt=null,cr=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)GE(l,s),l=l.sibling}var ia=null;function GE(s,l){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:_r(l,s),Er(s),m&4&&(ro(3,s,s.return),qc(3,s),ro(5,s,s.return));break;case 1:_r(l,s),Er(s),m&512&&(nn||h===null||Ta(h,h.return)),m&64&&yi&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=ia;if(_r(l,s),Er(s),m&512&&(nn||h===null||Ta(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){e:{m=s.type,h=s.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":E=b.getElementsByTagName("title")[0],(!E||E[pc]||E[qn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(m),b.head.insertBefore(E,b.querySelector("head > title"))),Ln(E,m,h),E[qn]=s,En(E),m=E;break e;case"link":var A=US("link","href",b).get(m+(h.href||""));if(A){for(var I=0;I<A.length;I++)if(E=A[I],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){A.splice(I,1);break t}}E=b.createElement(m),Ln(E,m,h),b.head.appendChild(E);break;case"meta":if(A=US("meta","content",b).get(m+(h.content||""))){for(I=0;I<A.length;I++)if(E=A[I],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){A.splice(I,1);break t}}E=b.createElement(m),Ln(E,m,h),b.head.appendChild(E);break;default:throw Error(r(468,m))}E[qn]=s,En(E),m=E}s.stateNode=m}else VS(b,s.type,s.stateNode);else s.stateNode=zS(b,m,s.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?VS(b,s.type,s.stateNode):zS(b,m,s.memoizedProps)):m===null&&s.stateNode!==null&&qg(s,s.memoizedProps,h.memoizedProps)}break;case 27:_r(l,s),Er(s),m&512&&(nn||h===null||Ta(h,h.return)),h!==null&&m&4&&qg(s,s.memoizedProps,h.memoizedProps);break;case 5:if(_r(l,s),Er(s),m&512&&(nn||h===null||Ta(h,h.return)),s.flags&32){b=s.stateNode;try{pu(b,"")}catch(ie){Mt(s,s.return,ie)}}m&4&&s.stateNode!=null&&(b=s.memoizedProps,qg(s,b,h!==null?h.memoizedProps:b)),m&1024&&(Gg=!0);break;case 6:if(_r(l,s),Er(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(ie){Mt(s,s.return,ie)}}break;case 3:if(Wd=null,b=ia,ia=jd(l.containerInfo),_r(l,s),ia=b,Er(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{uf(l.containerInfo)}catch(ie){Mt(s,s.return,ie)}Gg&&(Gg=!1,QE(s));break;case 4:m=ia,ia=jd(s.stateNode.containerInfo),_r(l,s),Er(s),ia=m;break;case 12:_r(l,s),Er(s);break;case 13:_r(l,s),Er(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Jg=en()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Qg(s,m)));break;case 22:b=s.memoizedState!==null;var V=h!==null&&h.memoizedState!==null,ne=yi,fe=nn;if(yi=ne||b,nn=fe||V,_r(l,s),nn=fe,yi=ne,Er(s),m&8192)e:for(l=s.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(h===null||V||yi||nn||ys(s)),h=null,l=s;;){if(l.tag===5||l.tag===26){if(h===null){V=h=l;try{if(E=V.stateNode,b)A=E.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=V.stateNode;var de=V.memoizedProps.style,ae=de!=null&&de.hasOwnProperty("display")?de.display:null;I.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ie){Mt(V,V.return,ie)}}}else if(l.tag===6){if(h===null){V=l;try{V.stateNode.nodeValue=b?"":V.memoizedProps}catch(ie){Mt(V,V.return,ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Qg(s,h))));break;case 19:_r(l,s),Er(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Qg(s,m)));break;case 30:break;case 21:break;default:_r(l,s),Er(s)}}function Er(s){var l=s.flags;if(l&2){try{for(var h,m=s.return;m!==null;){if(zE(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var b=h.stateNode,E=Wg(s);Ad(s,E,b);break;case 5:var A=h.stateNode;h.flags&32&&(pu(A,""),h.flags&=-33);var I=Wg(s);Ad(s,I,A);break;case 3:case 4:var V=h.stateNode.containerInfo,ne=Wg(s);Hg(s,ne,V);break;default:throw Error(r(161))}}catch(fe){Mt(s,s.return,fe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function QE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;QE(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function ao(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)jE(s,l.alternate,l),l=l.sibling}function ys(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ro(4,l,l.return),ys(l);break;case 1:Ta(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&LE(l,l.return,h),ys(l);break;case 27:Jc(l.stateNode);case 26:case 5:Ta(l,l.return),ys(l);break;case 22:l.memoizedState===null&&ys(l);break;case 30:ys(l);break;default:ys(l)}s=s.sibling}}function io(s,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,b=s,E=l,A=E.flags;switch(E.tag){case 0:case 11:case 15:io(b,E,h),qc(4,E);break;case 1:if(io(b,E,h),m=E,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ne){Mt(m,m.return,ne)}if(m=E,b=m.updateQueue,b!==null){var I=m.stateNode;try{var V=b.shared.hiddenCallbacks;if(V!==null)for(b.shared.hiddenCallbacks=null,b=0;b<V.length;b++)__(V[b],I)}catch(ne){Mt(m,m.return,ne)}}h&&A&64&&PE(E),Wc(E,E.return);break;case 27:UE(E);case 26:case 5:io(b,E,h),h&&m===null&&A&4&&BE(E),Wc(E,E.return);break;case 12:io(b,E,h);break;case 13:io(b,E,h),h&&A&4&&HE(b,E);break;case 22:E.memoizedState===null&&io(b,E,h),Wc(E,E.return);break;case 30:break;default:io(b,E,h)}l=l.sibling}}function $g(s,l){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Ac(h))}function Kg(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Ac(s))}function Oa(s,l,h,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)$E(s,l,h,m),l=l.sibling}function $E(s,l,h,m){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Oa(s,l,h,m),b&2048&&qc(9,l);break;case 1:Oa(s,l,h,m);break;case 3:Oa(s,l,h,m),b&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Ac(s)));break;case 12:if(b&2048){Oa(s,l,h,m),s=l.stateNode;try{var E=l.memoizedProps,A=E.id,I=E.onPostCommit;typeof I=="function"&&I(A,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){Mt(l,l.return,V)}}else Oa(s,l,h,m);break;case 13:Oa(s,l,h,m);break;case 23:break;case 22:E=l.stateNode,A=l.alternate,l.memoizedState!==null?E._visibility&2?Oa(s,l,h,m):Hc(s,l):E._visibility&2?Oa(s,l,h,m):(E._visibility|=2,Iu(s,l,h,m,(l.subtreeFlags&10256)!==0)),b&2048&&$g(A,l);break;case 24:Oa(s,l,h,m),b&2048&&Kg(l.alternate,l);break;default:Oa(s,l,h,m)}}function Iu(s,l,h,m,b){for(b=b&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var E=s,A=l,I=h,V=m,ne=A.flags;switch(A.tag){case 0:case 11:case 15:Iu(E,A,I,V,b),qc(8,A);break;case 23:break;case 22:var fe=A.stateNode;A.memoizedState!==null?fe._visibility&2?Iu(E,A,I,V,b):Hc(E,A):(fe._visibility|=2,Iu(E,A,I,V,b)),b&&ne&2048&&$g(A.alternate,A);break;case 24:Iu(E,A,I,V,b),b&&ne&2048&&Kg(A.alternate,A);break;default:Iu(E,A,I,V,b)}l=l.sibling}}function Hc(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=s,m=l,b=m.flags;switch(m.tag){case 22:Hc(h,m),b&2048&&$g(m.alternate,m);break;case 24:Hc(h,m),b&2048&&Kg(m.alternate,m);break;default:Hc(h,m)}l=l.sibling}}var Gc=8192;function Mu(s){if(s.subtreeFlags&Gc)for(s=s.child;s!==null;)KE(s),s=s.sibling}function KE(s){switch(s.tag){case 26:Mu(s),s.flags&Gc&&s.memoizedState!==null&&UM(ia,s.memoizedState,s.memoizedProps);break;case 5:Mu(s);break;case 3:case 4:var l=ia;ia=jd(s.stateNode.containerInfo),Mu(s),ia=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Gc,Gc=16777216,Mu(s),Gc=l):Mu(s));break;default:Mu(s)}}function XE(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Qc(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];Cn=m,ZE(m,s)}XE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)YE(s),s=s.sibling}function YE(s){switch(s.tag){case 0:case 11:case 15:Qc(s),s.flags&2048&&ro(9,s,s.return);break;case 3:Qc(s);break;case 12:Qc(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,kd(s)):Qc(s);break;default:Qc(s)}}function kd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];Cn=m,ZE(m,s)}XE(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ro(8,l,l.return),kd(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,kd(l));break;default:kd(l)}s=s.sibling}}function ZE(s,l){for(;Cn!==null;){var h=Cn;switch(h.tag){case 0:case 11:case 15:ro(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ac(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Cn=m;else e:for(h=s;Cn!==null;){m=Cn;var b=m.sibling,E=m.return;if(qE(m),m===h){Cn=null;break e}if(b!==null){b.return=E,Cn=b;break e}Cn=E}}}var nM={getCacheForType:function(s){var l=Wn(hn),h=l.data.get(s);return h===void 0&&(h=s(),l.data.set(s,h)),h}},rM=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Pt=null,ut=null,pt=0,Ot=0,Sr=null,oo=!1,Fu=!1,Xg=!1,xi=0,Kt=0,so=0,bs=0,Yg=0,Hr=0,Pu=0,$c=null,fr=null,Zg=!1,Jg=0,Dd=1/0,Nd=null,uo=null,Pn=0,lo=null,Lu=null,Bu=0,ey=0,ty=null,JE=null,Kc=0,ny=null;function Cr(){if((Tt&2)!==0&&pt!==0)return pt&-pt;if(U.T!==null){var s=Cu;return s!==0?s:ly()}return vw()}function eS(){Hr===0&&(Hr=(pt&536870912)===0||wt?fw():536870912);var s=Wr.current;return s!==null&&(s.flags|=32),Hr}function Rr(s,l,h){(s===Pt&&(Ot===2||Ot===9)||s.cancelPendingCommit!==null)&&(zu(s,0),co(s,pt,Hr,!1)),dc(s,h),((Tt&2)===0||s!==Pt)&&(s===Pt&&((Tt&2)===0&&(bs|=h),Kt===4&&co(s,pt,Hr,!1)),Aa(s))}function tS(s,l,h){if((Tt&6)!==0)throw Error(r(327));var m=!h&&(l&124)===0&&(l&s.expiredLanes)===0||hc(s,l),b=m?oM(s,l):iy(s,l,!0),E=m;do{if(b===0){Fu&&!m&&co(s,l,0,!1);break}else{if(h=s.current.alternate,E&&!aM(h)){b=iy(s,l,!1),E=!1;continue}if(b===2){if(E=l,s.errorRecoveryDisabledLanes&E)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var I=s;b=$c;var V=I.current.memoizedState.isDehydrated;if(V&&(zu(I,A).flags|=256),A=iy(I,A,!1),A!==2){if(Xg&&!V){I.errorRecoveryDisabledLanes|=E,bs|=E,b=4;break e}E=fr,fr=b,E!==null&&(fr===null?fr=E:fr.push.apply(fr,E))}b=A}if(E=!1,b!==2)continue}}if(b===1){zu(s,0),co(s,l,0,!0);break}e:{switch(m=s,E=b,E){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:co(m,l,Hr,!oo);break e;case 2:fr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(b=Jg+300-en(),10<b)){if(co(m,l,Hr,!oo),qh(m,0,!0)!==0)break e;m.timeoutHandle=kS(nS.bind(null,m,h,fr,Nd,Zg,l,Hr,bs,Pu,oo,E,2,-0,0),b);break e}nS(m,h,fr,Nd,Zg,l,Hr,bs,Pu,oo,E,0,-0,0)}}break}while(!0);Aa(s)}function nS(s,l,h,m,b,E,A,I,V,ne,fe,de,ae,ie){if(s.timeoutHandle=-1,de=l.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(nf={stylesheets:null,count:0,unsuspend:zM},KE(l),de=VM(),de!==null)){s.cancelPendingCommit=de(lS.bind(null,s,l,E,h,m,b,A,I,V,fe,1,ae,ie)),co(s,E,A,!ne);return}lS(s,l,E,h,m,b,A,I,V)}function aM(s){for(var l=s;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],E=b.getSnapshot;b=b.value;try{if(!xr(E(),b))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function co(s,l,h,m){l&=~Yg,l&=~bs,s.suspendedLanes|=l,s.pingedLanes&=~l,m&&(s.warmLanes|=l),m=s.expirationTimes;for(var b=l;0<b;){var E=31-Mn(b),A=1<<E;m[E]=-1,b&=~A}h!==0&&dw(s,h,l)}function Id(){return(Tt&6)===0?(Xc(0),!1):!0}function ry(){if(ut!==null){if(Ot===0)var s=ut.return;else s=ut,hi=ds=null,xg(s),Du=null,Uc=0,s=ut;for(;s!==null;)FE(s.alternate,s),s=s.return;ut=null}}function zu(s,l){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,_M(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),ry(),Pt=s,ut=h=li(s.current,null),pt=l,Ot=0,Sr=null,oo=!1,Fu=hc(s,l),Xg=!1,Pu=Hr=Yg=bs=so=Kt=0,fr=$c=null,Zg=!1,(l&8)!==0&&(l|=l&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=l;0<m;){var b=31-Mn(m),E=1<<b;l|=s[b],m&=~E}return xi=l,td(),h}function rS(s,l){it=null,U.H=xd,l===Dc||l===cd?(l=x_(),Ot=3):l===g_?(l=x_(),Ot=4):Ot=l===wE?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Sr=l,ut===null&&(Kt=1,Cd(s,Ur(l,s.current)))}function aS(){var s=U.H;return U.H=xd,s===null?xd:s}function iS(){var s=U.A;return U.A=nM,s}function ay(){Kt=4,oo||(pt&4194048)!==pt&&Wr.current!==null||(Fu=!0),(so&134217727)===0&&(bs&134217727)===0||Pt===null||co(Pt,pt,Hr,!1)}function iy(s,l,h){var m=Tt;Tt|=2;var b=aS(),E=iS();(Pt!==s||pt!==l)&&(Nd=null,zu(s,l)),l=!1;var A=Kt;e:do try{if(Ot!==0&&ut!==null){var I=ut,V=Sr;switch(Ot){case 8:ry(),A=6;break e;case 3:case 2:case 9:case 6:Wr.current===null&&(l=!0);var ne=Ot;if(Ot=0,Sr=null,Uu(s,I,V,ne),h&&Fu){A=0;break e}break;default:ne=Ot,Ot=0,Sr=null,Uu(s,I,V,ne)}}iM(),A=Kt;break}catch(fe){rS(s,fe)}while(!0);return l&&s.shellSuspendCounter++,hi=ds=null,Tt=m,U.H=b,U.A=E,ut===null&&(Pt=null,pt=0,td()),A}function iM(){for(;ut!==null;)oS(ut)}function oM(s,l){var h=Tt;Tt|=2;var m=aS(),b=iS();Pt!==s||pt!==l?(Nd=null,Dd=en()+500,zu(s,l)):Fu=hc(s,l);e:do try{if(Ot!==0&&ut!==null){l=ut;var E=Sr;t:switch(Ot){case 1:Ot=0,Sr=null,Uu(s,l,E,1);break;case 2:case 9:if(y_(E)){Ot=0,Sr=null,sS(l);break}l=function(){Ot!==2&&Ot!==9||Pt!==s||(Ot=7),Aa(s)},E.then(l,l);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:y_(E)?(Ot=0,Sr=null,sS(l)):(Ot=0,Sr=null,Uu(s,l,E,7));break;case 5:var A=null;switch(ut.tag){case 26:A=ut.memoizedState;case 5:case 27:var I=ut;if(!A||jS(A)){Ot=0,Sr=null;var V=I.sibling;if(V!==null)ut=V;else{var ne=I.return;ne!==null?(ut=ne,Md(ne)):ut=null}break t}}Ot=0,Sr=null,Uu(s,l,E,5);break;case 6:Ot=0,Sr=null,Uu(s,l,E,6);break;case 8:ry(),Kt=6;break e;default:throw Error(r(462))}}sM();break}catch(fe){rS(s,fe)}while(!0);return hi=ds=null,U.H=m,U.A=b,Tt=h,ut!==null?0:(Pt=null,pt=0,td(),Kt)}function sM(){for(;ut!==null&&!It();)oS(ut)}function oS(s){var l=IE(s.alternate,s,xi);s.memoizedProps=s.pendingProps,l===null?Md(s):ut=l}function sS(s){var l=s,h=l.alternate;switch(l.tag){case 15:case 0:l=TE(h,l,l.pendingProps,l.type,void 0,pt);break;case 11:l=TE(h,l,l.pendingProps,l.type.render,l.ref,pt);break;case 5:xg(l);default:FE(h,l),l=ut=u_(l,xi),l=IE(h,l,xi)}s.memoizedProps=s.pendingProps,l===null?Md(s):ut=l}function Uu(s,l,h,m){hi=ds=null,xg(l),Du=null,Uc=0;var b=l.return;try{if(XI(s,b,l,h,pt)){Kt=1,Cd(s,Ur(h,s.current)),ut=null;return}}catch(E){if(b!==null)throw ut=b,E;Kt=1,Cd(s,Ur(h,s.current)),ut=null;return}l.flags&32768?(wt||m===1?s=!0:Fu||(pt&536870912)!==0?s=!1:(oo=s=!0,(m===2||m===9||m===3||m===6)&&(m=Wr.current,m!==null&&m.tag===13&&(m.flags|=16384))),uS(l,s)):Md(l)}function Md(s){var l=s;do{if((l.flags&32768)!==0){uS(l,oo);return}s=l.return;var h=ZI(l.alternate,l,xi);if(h!==null){ut=h;return}if(l=l.sibling,l!==null){ut=l;return}ut=l=s}while(l!==null);Kt===0&&(Kt=5)}function uS(s,l){do{var h=JI(s.alternate,s);if(h!==null){h.flags&=32767,ut=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(s=s.sibling,s!==null)){ut=s;return}ut=s=h}while(s!==null);Kt=6,ut=null}function lS(s,l,h,m,b,E,A,I,V){s.cancelPendingCommit=null;do Fd();while(Pn!==0);if((Tt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(E=l.lanes|l.childLanes,E|=Km,zN(s,h,E,A,I,V),s===Pt&&(ut=Pt=null,pt=0),Lu=l,lo=s,Bu=h,ey=E,ty=b,JE=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,fM(or,function(){return pS(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=U.T,U.T=null,b=H.p,H.p=2,A=Tt,Tt|=4;try{eM(s,l,h)}finally{Tt=A,H.p=b,U.T=m}}Pn=1,cS(),fS(),hS()}}function cS(){if(Pn===1){Pn=0;var s=lo,l=Lu,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=U.T,U.T=null;var m=H.p;H.p=2;var b=Tt;Tt|=4;try{GE(l,s);var E=gy,A=Zw(s.containerInfo),I=E.focusedElem,V=E.selectionRange;if(A!==I&&I&&I.ownerDocument&&Yw(I.ownerDocument.documentElement,I)){if(V!==null&&Wm(I)){var ne=V.start,fe=V.end;if(fe===void 0&&(fe=ne),"selectionStart"in I)I.selectionStart=ne,I.selectionEnd=Math.min(fe,I.value.length);else{var de=I.ownerDocument||document,ae=de&&de.defaultView||window;if(ae.getSelection){var ie=ae.getSelection(),He=I.textContent.length,Ve=Math.min(V.start,He),Nt=V.end===void 0?Ve:Math.min(V.end,He);!ie.extend&&Ve>Nt&&(A=Nt,Nt=Ve,Ve=A);var X=Xw(I,Ve),W=Xw(I,Nt);if(X&&W&&(ie.rangeCount!==1||ie.anchorNode!==X.node||ie.anchorOffset!==X.offset||ie.focusNode!==W.node||ie.focusOffset!==W.offset)){var Z=de.createRange();Z.setStart(X.node,X.offset),ie.removeAllRanges(),Ve>Nt?(ie.addRange(Z),ie.extend(W.node,W.offset)):(Z.setEnd(W.node,W.offset),ie.addRange(Z))}}}}for(de=[],ie=I;ie=ie.parentNode;)ie.nodeType===1&&de.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<de.length;I++){var he=de[I];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Qd=!!my,gy=my=null}finally{Tt=b,H.p=m,U.T=h}}s.current=l,Pn=2}}function fS(){if(Pn===2){Pn=0;var s=lo,l=Lu,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=U.T,U.T=null;var m=H.p;H.p=2;var b=Tt;Tt|=4;try{jE(s,l.alternate,l)}finally{Tt=b,H.p=m,U.T=h}}Pn=3}}function hS(){if(Pn===4||Pn===3){Pn=0,At();var s=lo,l=Lu,h=Bu,m=JE;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Pn=5:(Pn=0,Lu=lo=null,dS(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(uo=null),Em(h),l=l.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(oi,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=U.T,b=H.p,H.p=2,U.T=null;try{for(var E=s.onRecoverableError,A=0;A<m.length;A++){var I=m[A];E(I.value,{componentStack:I.stack})}}finally{U.T=l,H.p=b}}(Bu&3)!==0&&Fd(),Aa(s),b=s.pendingLanes,(h&4194090)!==0&&(b&42)!==0?s===ny?Kc++:(Kc=0,ny=s):Kc=0,Xc(0)}}function dS(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Ac(l)))}function Fd(s){return cS(),fS(),hS(),pS()}function pS(){if(Pn!==5)return!1;var s=lo,l=ey;ey=0;var h=Em(Bu),m=U.T,b=H.p;try{H.p=32>h?32:h,U.T=null,h=ty,ty=null;var E=lo,A=Bu;if(Pn=0,Lu=lo=null,Bu=0,(Tt&6)!==0)throw Error(r(331));var I=Tt;if(Tt|=4,YE(E.current),$E(E,E.current,A,h),Tt=I,Xc(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(oi,E)}catch{}return!0}finally{H.p=b,U.T=m,dS(s,l)}}function vS(s,l,h){l=Ur(h,l),l=Mg(s.stateNode,l,2),s=Ji(s,l,2),s!==null&&(dc(s,2),Aa(s))}function Mt(s,l,h){if(s.tag===3)vS(s,s,h);else for(;l!==null;){if(l.tag===3){vS(l,s,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(uo===null||!uo.has(m))){s=Ur(h,s),h=bE(2),m=Ji(l,h,2),m!==null&&(xE(h,m,l,s),dc(m,2),Aa(m));break}}l=l.return}}function oy(s,l,h){var m=s.pingCache;if(m===null){m=s.pingCache=new rM;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(h)||(Xg=!0,b.add(h),s=uM.bind(null,s,l,h),l.then(s,s))}function uM(s,l,h){var m=s.pingCache;m!==null&&m.delete(l),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,Pt===s&&(pt&h)===h&&(Kt===4||Kt===3&&(pt&62914560)===pt&&300>en()-Jg?(Tt&2)===0&&zu(s,0):Yg|=h,Pu===pt&&(Pu=0)),Aa(s)}function mS(s,l){l===0&&(l=hw()),s=wu(s,l),s!==null&&(dc(s,l),Aa(s))}function lM(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),mS(s,h)}function cM(s,l){var h=0;switch(s.tag){case 13:var m=s.stateNode,b=s.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),mS(s,h)}function fM(s,l){return at(s,l)}var Pd=null,Vu=null,sy=!1,Ld=!1,uy=!1,xs=0;function Aa(s){s!==Vu&&s.next===null&&(Vu===null?Pd=Vu=s:Vu=Vu.next=s),Ld=!0,sy||(sy=!0,dM())}function Xc(s,l){if(!uy&&Ld){uy=!0;do for(var h=!1,m=Pd;m!==null;){if(s!==0){var b=m.pendingLanes;if(b===0)var E=0;else{var A=m.suspendedLanes,I=m.pingedLanes;E=(1<<31-Mn(42|s)+1)-1,E&=b&~(A&~I),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,xS(m,E))}else E=pt,E=qh(m,m===Pt?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||hc(m,E)||(h=!0,xS(m,E));m=m.next}while(h);uy=!1}}function hM(){gS()}function gS(){Ld=sy=!1;var s=0;xs!==0&&(wM()&&(s=xs),xs=0);for(var l=en(),h=null,m=Pd;m!==null;){var b=m.next,E=yS(m,l);E===0?(m.next=null,h===null?Pd=b:h.next=b,b===null&&(Vu=h)):(h=m,(s!==0||(E&3)!==0)&&(Ld=!0)),m=b}Xc(s)}function yS(s,l){for(var h=s.suspendedLanes,m=s.pingedLanes,b=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var A=31-Mn(E),I=1<<A,V=b[A];V===-1?((I&h)===0||(I&m)!==0)&&(b[A]=BN(I,l)):V<=l&&(s.expiredLanes|=I),E&=~I}if(l=Pt,h=pt,h=qh(s,s===l?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,h===0||s===l&&(Ot===2||Ot===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&xt(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||hc(s,h)){if(l=h&-h,l===s.callbackPriority)return l;switch(m!==null&&xt(m),Em(h)){case 2:case 8:h=ii;break;case 32:h=or;break;case 268435456:h=Lr;break;default:h=or}return m=bS.bind(null,s),h=at(h,m),s.callbackPriority=l,s.callbackNode=h,l}return m!==null&&m!==null&&xt(m),s.callbackPriority=2,s.callbackNode=null,2}function bS(s,l){if(Pn!==0&&Pn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Fd()&&s.callbackNode!==h)return null;var m=pt;return m=qh(s,s===Pt?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(tS(s,m,l),yS(s,en()),s.callbackNode!=null&&s.callbackNode===h?bS.bind(null,s):null)}function xS(s,l){if(Fd())return null;tS(s,l,!0)}function dM(){EM(function(){(Tt&6)!==0?at(jn,hM):gS()})}function ly(){return xs===0&&(xs=fw()),xs}function wS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:$h(""+s)}function _S(s,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,s.id&&h.setAttribute("form",s.id),l.parentNode.insertBefore(h,l),s=new FormData(s),h.parentNode.removeChild(h),s}function pM(s,l,h,m,b){if(l==="submit"&&h&&h.stateNode===b){var E=wS((b[sr]||null).action),A=m.submitter;A&&(l=(l=A[sr]||null)?wS(l.formAction):A.getAttribute("formAction"),l!==null&&(E=l,A=null));var I=new Zh("action","action",null,m,b);s.push({event:I,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(xs!==0){var V=A?_S(b,A):new FormData(b);Ag(h,{pending:!0,data:V,method:b.method,action:E},null,V)}}else typeof E=="function"&&(I.preventDefault(),V=A?_S(b,A):new FormData(b),Ag(h,{pending:!0,data:V,method:b.method,action:E},E,V))},currentTarget:b}]})}}for(var cy=0;cy<$m.length;cy++){var fy=$m[cy],vM=fy.toLowerCase(),mM=fy[0].toUpperCase()+fy.slice(1);aa(vM,"on"+mM)}aa(t_,"onAnimationEnd"),aa(n_,"onAnimationIteration"),aa(r_,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(II,"onTransitionRun"),aa(MI,"onTransitionStart"),aa(FI,"onTransitionCancel"),aa(a_,"onTransitionEnd"),fu("onMouseEnter",["mouseout","mouseover"]),fu("onMouseLeave",["mouseout","mouseover"]),fu("onPointerEnter",["pointerout","pointerover"]),fu("onPointerLeave",["pointerout","pointerover"]),as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),as("onBeforeInput",["compositionend","keypress","textInput","paste"]),as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yc));function ES(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],b=m.event;m=m.listeners;e:{var E=void 0;if(l)for(var A=m.length-1;0<=A;A--){var I=m[A],V=I.instance,ne=I.currentTarget;if(I=I.listener,V!==E&&b.isPropagationStopped())break e;E=I,b.currentTarget=ne;try{E(b)}catch(fe){Sd(fe)}b.currentTarget=null,E=V}else for(A=0;A<m.length;A++){if(I=m[A],V=I.instance,ne=I.currentTarget,I=I.listener,V!==E&&b.isPropagationStopped())break e;E=I,b.currentTarget=ne;try{E(b)}catch(fe){Sd(fe)}b.currentTarget=null,E=V}}}}function lt(s,l){var h=l[Sm];h===void 0&&(h=l[Sm]=new Set);var m=s+"__bubble";h.has(m)||(SS(l,s,2,!1),h.add(m))}function hy(s,l,h){var m=0;l&&(m|=4),SS(h,s,m,l)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function dy(s){if(!s[Bd]){s[Bd]=!0,gw.forEach(function(h){h!=="selectionchange"&&(gM.has(h)||hy(h,!1,s),hy(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Bd]||(l[Bd]=!0,hy("selectionchange",!1,l))}}function SS(s,l,h,m){switch($S(l)){case 2:var b=WM;break;case 8:b=HM;break;default:b=Ty}h=b.bind(null,l,h,s),b=void 0,!Fm||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?s.addEventListener(l,h,{capture:!0,passive:b}):s.addEventListener(l,h,!0):b!==void 0?s.addEventListener(l,h,{passive:b}):s.addEventListener(l,h,!1)}function py(s,l,h,m,b){var E=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var A=m.tag;if(A===3||A===4){var I=m.stateNode.containerInfo;if(I===b)break;if(A===4)for(A=m.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===b)return;A=A.return}for(;I!==null;){if(A=uu(I),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){m=E=A;continue e}I=I.parentNode}}m=m.return}Dw(function(){var ne=E,fe=Im(h),de=[];e:{var ae=i_.get(s);if(ae!==void 0){var ie=Zh,He=s;switch(s){case"keypress":if(Xh(h)===0)break e;case"keydown":case"keyup":ie=fI;break;case"focusin":He="focus",ie=zm;break;case"focusout":He="blur",ie=zm;break;case"beforeblur":case"afterblur":ie=zm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=JN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=pI;break;case t_:case n_:case r_:ie=nI;break;case a_:ie=mI;break;case"scroll":case"scrollend":ie=YN;break;case"wheel":ie=yI;break;case"copy":case"cut":case"paste":ie=aI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Pw;break;case"toggle":case"beforetoggle":ie=xI}var Ve=(l&4)!==0,Nt=!Ve&&(s==="scroll"||s==="scrollend"),X=Ve?ae!==null?ae+"Capture":null:ae;Ve=[];for(var W=ne,Z;W!==null;){var he=W;if(Z=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||Z===null||X===null||(he=mc(W,X),he!=null&&Ve.push(Zc(W,he,Z))),Nt)break;W=W.return}0<Ve.length&&(ae=new ie(ae,He,null,h,fe),de.push({event:ae,listeners:Ve}))}}if((l&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",ae&&h!==Nm&&(He=h.relatedTarget||h.fromElement)&&(uu(He)||He[su]))break e;if((ie||ae)&&(ae=fe.window===fe?fe:(ae=fe.ownerDocument)?ae.defaultView||ae.parentWindow:window,ie?(He=h.relatedTarget||h.toElement,ie=ne,He=He?uu(He):null,He!==null&&(Nt=i(He),Ve=He.tag,He!==Nt||Ve!==5&&Ve!==27&&Ve!==6)&&(He=null)):(ie=null,He=ne),ie!==He)){if(Ve=Mw,he="onMouseLeave",X="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Pw,he="onPointerLeave",X="onPointerEnter",W="pointer"),Nt=ie==null?ae:vc(ie),Z=He==null?ae:vc(He),ae=new Ve(he,W+"leave",ie,h,fe),ae.target=Nt,ae.relatedTarget=Z,he=null,uu(fe)===ne&&(Ve=new Ve(X,W+"enter",He,h,fe),Ve.target=Z,Ve.relatedTarget=Nt,he=Ve),Nt=he,ie&&He)t:{for(Ve=ie,X=He,W=0,Z=Ve;Z;Z=ju(Z))W++;for(Z=0,he=X;he;he=ju(he))Z++;for(;0<W-Z;)Ve=ju(Ve),W--;for(;0<Z-W;)X=ju(X),Z--;for(;W--;){if(Ve===X||X!==null&&Ve===X.alternate)break t;Ve=ju(Ve),X=ju(X)}Ve=null}else Ve=null;ie!==null&&CS(de,ae,ie,Ve,!1),He!==null&&Nt!==null&&CS(de,Nt,He,Ve,!0)}}e:{if(ae=ne?vc(ne):window,ie=ae.nodeName&&ae.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ae.type==="file")var Oe=Ww;else if(jw(ae))if(Hw)Oe=kI;else{Oe=OI;var ot=TI}else ie=ae.nodeName,!ie||ie.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ne&&Dm(ne.elementType)&&(Oe=Ww):Oe=AI;if(Oe&&(Oe=Oe(s,ne))){qw(de,Oe,h,fe);break e}ot&&ot(s,ae,ne),s==="focusout"&&ne&&ae.type==="number"&&ne.memoizedProps.value!=null&&km(ae,"number",ae.value)}switch(ot=ne?vc(ne):window,s){case"focusin":(jw(ot)||ot.contentEditable==="true")&&(yu=ot,Hm=ne,Sc=null);break;case"focusout":Sc=Hm=yu=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,Jw(de,h,fe);break;case"selectionchange":if(NI)break;case"keydown":case"keyup":Jw(de,h,fe)}var Be;if(Vm)e:{switch(s){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else gu?Uw(s,h)&&(je="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(je="onCompositionStart");je&&(Lw&&h.locale!=="ko"&&(gu||je!=="onCompositionStart"?je==="onCompositionEnd"&&gu&&(Be=Nw()):(Ki=fe,Pm="value"in Ki?Ki.value:Ki.textContent,gu=!0)),ot=zd(ne,je),0<ot.length&&(je=new Fw(je,s,null,h,fe),de.push({event:je,listeners:ot}),Be?je.data=Be:(Be=Vw(h),Be!==null&&(je.data=Be)))),(Be=_I?EI(s,h):SI(s,h))&&(je=zd(ne,"onBeforeInput"),0<je.length&&(ot=new Fw("onBeforeInput","beforeinput",null,h,fe),de.push({event:ot,listeners:je}),ot.data=Be)),pM(de,s,ne,h,fe)}ES(de,l)})}function Zc(s,l,h){return{instance:s,listener:l,currentTarget:h}}function zd(s,l){for(var h=l+"Capture",m=[];s!==null;){var b=s,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=mc(s,h),b!=null&&m.unshift(Zc(s,b,E)),b=mc(s,l),b!=null&&m.push(Zc(s,b,E))),s.tag===3)return m;s=s.return}return[]}function ju(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function CS(s,l,h,m,b){for(var E=l._reactName,A=[];h!==null&&h!==m;){var I=h,V=I.alternate,ne=I.stateNode;if(I=I.tag,V!==null&&V===m)break;I!==5&&I!==26&&I!==27||ne===null||(V=ne,b?(ne=mc(h,E),ne!=null&&A.unshift(Zc(h,ne,V))):b||(ne=mc(h,E),ne!=null&&A.push(Zc(h,ne,V)))),h=h.return}A.length!==0&&s.push({event:l,listeners:A})}var yM=/\r\n?/g,bM=/\u0000|\uFFFD/g;function RS(s){return(typeof s=="string"?s:""+s).replace(yM,`
`).replace(bM,"")}function TS(s,l){return l=RS(l),RS(s)===l}function Ud(){}function Dt(s,l,h,m,b,E){switch(h){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||pu(s,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&pu(s,""+m);break;case"className":Hh(s,"class",m);break;case"tabIndex":Hh(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Hh(s,h,m);break;case"style":Aw(s,m,E);break;case"data":if(l!=="object"){Hh(s,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=$h(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(l!=="input"&&Dt(s,l,"name",b.name,b,null),Dt(s,l,"formEncType",b.formEncType,b,null),Dt(s,l,"formMethod",b.formMethod,b,null),Dt(s,l,"formTarget",b.formTarget,b,null)):(Dt(s,l,"encType",b.encType,b,null),Dt(s,l,"method",b.method,b,null),Dt(s,l,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=$h(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=Ud);break;case"onScroll":m!=null&&lt("scroll",s);break;case"onScrollEnd":m!=null&&lt("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=$h(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":lt("beforetoggle",s),lt("toggle",s),Wh(s,"popover",m);break;case"xlinkActuate":si(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":si(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":si(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":si(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":si(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":si(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":si(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":si(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":si(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Wh(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=KN.get(h)||h,Wh(s,h,m))}}function vy(s,l,h,m,b,E){switch(h){case"style":Aw(s,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"children":typeof m=="string"?pu(s,m):(typeof m=="number"||typeof m=="bigint")&&pu(s,""+m);break;case"onScroll":m!=null&&lt("scroll",s);break;case"onScrollEnd":m!=null&&lt("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Ud);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yw.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),l=h.slice(2,b?h.length-7:void 0),E=s[sr]||null,E=E!=null?E[h]:null,typeof E=="function"&&s.removeEventListener(l,E,b),typeof m=="function")){typeof E!="function"&&E!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(l,m,b);break e}h in s?s[h]=m:m===!0?s.setAttribute(h,""):Wh(s,h,m)}}}function Ln(s,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",s),lt("load",s);var m=!1,b=!1,E;for(E in h)if(h.hasOwnProperty(E)){var A=h[E];if(A!=null)switch(E){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(s,l,E,A,h,null)}}b&&Dt(s,l,"srcSet",h.srcSet,h,null),m&&Dt(s,l,"src",h.src,h,null);return;case"input":lt("invalid",s);var I=E=A=b=null,V=null,ne=null;for(m in h)if(h.hasOwnProperty(m)){var fe=h[m];if(fe!=null)switch(m){case"name":b=fe;break;case"type":A=fe;break;case"checked":V=fe;break;case"defaultChecked":ne=fe;break;case"value":E=fe;break;case"defaultValue":I=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,l));break;default:Dt(s,l,m,fe,h,null)}}Cw(s,E,I,V,ne,A,b,!1),Gh(s);return;case"select":lt("invalid",s),m=A=E=null;for(b in h)if(h.hasOwnProperty(b)&&(I=h[b],I!=null))switch(b){case"value":E=I;break;case"defaultValue":A=I;break;case"multiple":m=I;default:Dt(s,l,b,I,h,null)}l=E,h=A,s.multiple=!!m,l!=null?du(s,!!m,l,!1):h!=null&&du(s,!!m,h,!0);return;case"textarea":lt("invalid",s),E=b=m=null;for(A in h)if(h.hasOwnProperty(A)&&(I=h[A],I!=null))switch(A){case"value":m=I;break;case"defaultValue":b=I;break;case"children":E=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Dt(s,l,A,I,h,null)}Tw(s,m,b,E),Gh(s);return;case"option":for(V in h)if(h.hasOwnProperty(V)&&(m=h[V],m!=null))switch(V){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Dt(s,l,V,m,h,null)}return;case"dialog":lt("beforetoggle",s),lt("toggle",s),lt("cancel",s),lt("close",s);break;case"iframe":case"object":lt("load",s);break;case"video":case"audio":for(m=0;m<Yc.length;m++)lt(Yc[m],s);break;case"image":lt("error",s),lt("load",s);break;case"details":lt("toggle",s);break;case"embed":case"source":case"link":lt("error",s),lt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in h)if(h.hasOwnProperty(ne)&&(m=h[ne],m!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(s,l,ne,m,h,null)}return;default:if(Dm(l)){for(fe in h)h.hasOwnProperty(fe)&&(m=h[fe],m!==void 0&&vy(s,l,fe,m,h,void 0));return}}for(I in h)h.hasOwnProperty(I)&&(m=h[I],m!=null&&Dt(s,l,I,m,h,null))}function xM(s,l,h,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,A=null,I=null,V=null,ne=null,fe=null;for(ie in h){var de=h[ie];if(h.hasOwnProperty(ie)&&de!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":V=de;default:m.hasOwnProperty(ie)||Dt(s,l,ie,null,m,de)}}for(var ae in m){var ie=m[ae];if(de=h[ae],m.hasOwnProperty(ae)&&(ie!=null||de!=null))switch(ae){case"type":E=ie;break;case"name":b=ie;break;case"checked":ne=ie;break;case"defaultChecked":fe=ie;break;case"value":A=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,l));break;default:ie!==de&&Dt(s,l,ae,ie,m,de)}}Am(s,A,I,V,ne,fe,E,b);return;case"select":ie=A=I=ae=null;for(E in h)if(V=h[E],h.hasOwnProperty(E)&&V!=null)switch(E){case"value":break;case"multiple":ie=V;default:m.hasOwnProperty(E)||Dt(s,l,E,null,m,V)}for(b in m)if(E=m[b],V=h[b],m.hasOwnProperty(b)&&(E!=null||V!=null))switch(b){case"value":ae=E;break;case"defaultValue":I=E;break;case"multiple":A=E;default:E!==V&&Dt(s,l,b,E,m,V)}l=I,h=A,m=ie,ae!=null?du(s,!!h,ae,!1):!!m!=!!h&&(l!=null?du(s,!!h,l,!0):du(s,!!h,h?[]:"",!1));return;case"textarea":ie=ae=null;for(I in h)if(b=h[I],h.hasOwnProperty(I)&&b!=null&&!m.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Dt(s,l,I,null,m,b)}for(A in m)if(b=m[A],E=h[A],m.hasOwnProperty(A)&&(b!=null||E!=null))switch(A){case"value":ae=b;break;case"defaultValue":ie=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==E&&Dt(s,l,A,b,m,E)}Rw(s,ae,ie);return;case"option":for(var He in h)if(ae=h[He],h.hasOwnProperty(He)&&ae!=null&&!m.hasOwnProperty(He))switch(He){case"selected":s.selected=!1;break;default:Dt(s,l,He,null,m,ae)}for(V in m)if(ae=m[V],ie=h[V],m.hasOwnProperty(V)&&ae!==ie&&(ae!=null||ie!=null))switch(V){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Dt(s,l,V,ae,m,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in h)ae=h[Ve],h.hasOwnProperty(Ve)&&ae!=null&&!m.hasOwnProperty(Ve)&&Dt(s,l,Ve,null,m,ae);for(ne in m)if(ae=m[ne],ie=h[ne],m.hasOwnProperty(ne)&&ae!==ie&&(ae!=null||ie!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:Dt(s,l,ne,ae,m,ie)}return;default:if(Dm(l)){for(var Nt in h)ae=h[Nt],h.hasOwnProperty(Nt)&&ae!==void 0&&!m.hasOwnProperty(Nt)&&vy(s,l,Nt,void 0,m,ae);for(fe in m)ae=m[fe],ie=h[fe],!m.hasOwnProperty(fe)||ae===ie||ae===void 0&&ie===void 0||vy(s,l,fe,ae,m,ie);return}}for(var X in h)ae=h[X],h.hasOwnProperty(X)&&ae!=null&&!m.hasOwnProperty(X)&&Dt(s,l,X,null,m,ae);for(de in m)ae=m[de],ie=h[de],!m.hasOwnProperty(de)||ae===ie||ae==null&&ie==null||Dt(s,l,de,ae,m,ie)}var my=null,gy=null;function Vd(s){return s.nodeType===9?s:s.ownerDocument}function OS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function AS(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function yy(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var by=null;function wM(){var s=window.event;return s&&s.type==="popstate"?s===by?!1:(by=s,!0):(by=null,!1)}var kS=typeof setTimeout=="function"?setTimeout:void 0,_M=typeof clearTimeout=="function"?clearTimeout:void 0,DS=typeof Promise=="function"?Promise:void 0,EM=typeof queueMicrotask=="function"?queueMicrotask:typeof DS<"u"?function(s){return DS.resolve(null).then(s).catch(SM)}:kS;function SM(s){setTimeout(function(){throw s})}function fo(s){return s==="head"}function NS(s,l){var h=l,m=0,b=0;do{var E=h.nextSibling;if(s.removeChild(h),E&&E.nodeType===8)if(h=E.data,h==="/$"){if(0<m&&8>m){h=m;var A=s.ownerDocument;if(h&1&&Jc(A.documentElement),h&2&&Jc(A.body),h&4)for(h=A.head,Jc(h),A=h.firstChild;A;){var I=A.nextSibling,V=A.nodeName;A[pc]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&A.rel.toLowerCase()==="stylesheet"||h.removeChild(A),A=I}}if(b===0){s.removeChild(E),uf(l);return}b--}else h==="$"||h==="$?"||h==="$!"?b++:m=h.charCodeAt(0)-48;else m=0;h=E}while(h);uf(l)}function xy(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":xy(h),Cm(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function CM(s,l,h,m){for(;s.nodeType===1;){var b=h;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[pc])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=oa(s.nextSibling),s===null)break}return null}function RM(s,l,h){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=oa(s.nextSibling),s===null))return null;return s}function wy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function TM(s,l){var h=s.ownerDocument;if(s.data!=="$?"||h.readyState==="complete")l();else{var m=function(){l(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function oa(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var _y=null;function IS(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return s;l--}else h==="/$"&&l++}s=s.previousSibling}return null}function MS(s,l,h){switch(l=Vd(h),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Jc(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Cm(s)}var Gr=new Map,FS=new Set;function jd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var wi=H.d;H.d={f:OM,r:AM,D:kM,C:DM,L:NM,m:IM,X:FM,S:MM,M:PM};function OM(){var s=wi.f(),l=Id();return s||l}function AM(s){var l=lu(s);l!==null&&l.tag===5&&l.type==="form"?tE(l):wi.r(s)}var qu=typeof document>"u"?null:document;function PS(s,l,h){var m=qu;if(m&&typeof l=="string"&&l){var b=zr(l);b='link[rel="'+s+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),FS.has(b)||(FS.add(b),s={rel:s,crossOrigin:h,href:l},m.querySelector(b)===null&&(l=m.createElement("link"),Ln(l,"link",s),En(l),m.head.appendChild(l)))}}function kM(s){wi.D(s),PS("dns-prefetch",s,null)}function DM(s,l){wi.C(s,l),PS("preconnect",s,l)}function NM(s,l,h){wi.L(s,l,h);var m=qu;if(m&&s&&l){var b='link[rel="preload"][as="'+zr(l)+'"]';l==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+zr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+zr(h.imageSizes)+'"]')):b+='[href="'+zr(s)+'"]';var E=b;switch(l){case"style":E=Wu(s);break;case"script":E=Hu(s)}Gr.has(E)||(s=d({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:s,as:l},h),Gr.set(E,s),m.querySelector(b)!==null||l==="style"&&m.querySelector(ef(E))||l==="script"&&m.querySelector(tf(E))||(l=m.createElement("link"),Ln(l,"link",s),En(l),m.head.appendChild(l)))}}function IM(s,l){wi.m(s,l);var h=qu;if(h&&s){var m=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+zr(m)+'"][href="'+zr(s)+'"]',E=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Hu(s)}if(!Gr.has(E)&&(s=d({rel:"modulepreload",href:s},l),Gr.set(E,s),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(tf(E)))return}m=h.createElement("link"),Ln(m,"link",s),En(m),h.head.appendChild(m)}}}function MM(s,l,h){wi.S(s,l,h);var m=qu;if(m&&s){var b=cu(m).hoistableStyles,E=Wu(s);l=l||"default";var A=b.get(E);if(!A){var I={loading:0,preload:null};if(A=m.querySelector(ef(E)))I.loading=5;else{s=d({rel:"stylesheet",href:s,"data-precedence":l},h),(h=Gr.get(E))&&Ey(s,h);var V=A=m.createElement("link");En(V),Ln(V,"link",s),V._p=new Promise(function(ne,fe){V.onload=ne,V.onerror=fe}),V.addEventListener("load",function(){I.loading|=1}),V.addEventListener("error",function(){I.loading|=2}),I.loading|=4,qd(A,l,m)}A={type:"stylesheet",instance:A,count:1,state:I},b.set(E,A)}}}function FM(s,l){wi.X(s,l);var h=qu;if(h&&s){var m=cu(h).hoistableScripts,b=Hu(s),E=m.get(b);E||(E=h.querySelector(tf(b)),E||(s=d({src:s,async:!0},l),(l=Gr.get(b))&&Sy(s,l),E=h.createElement("script"),En(E),Ln(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function PM(s,l){wi.M(s,l);var h=qu;if(h&&s){var m=cu(h).hoistableScripts,b=Hu(s),E=m.get(b);E||(E=h.querySelector(tf(b)),E||(s=d({src:s,async:!0,type:"module"},l),(l=Gr.get(b))&&Sy(s,l),E=h.createElement("script"),En(E),Ln(E,"link",s),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function LS(s,l,h,m){var b=(b=ye.current)?jd(b):null;if(!b)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=Wu(h.href),h=cu(b).hoistableStyles,m=h.get(l),m||(m={type:"style",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=Wu(h.href);var E=cu(b).hoistableStyles,A=E.get(s);if(A||(b=b.ownerDocument||b,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,A),(E=b.querySelector(ef(s)))&&!E._p&&(A.instance=E,A.state.loading=5),Gr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Gr.set(s,h),E||LM(b,s,h,A.state))),l&&m===null)throw Error(r(528,""));return A}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Hu(h),h=cu(b).hoistableScripts,m=h.get(l),m||(m={type:"script",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Wu(s){return'href="'+zr(s)+'"'}function ef(s){return'link[rel="stylesheet"]['+s+"]"}function BS(s){return d({},s,{"data-precedence":s.precedence,precedence:null})}function LM(s,l,h,m){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=s.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Ln(l,"link",h),En(l),s.head.appendChild(l))}function Hu(s){return'[src="'+zr(s)+'"]'}function tf(s){return"script[async]"+s}function zS(s,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var m=s.querySelector('style[data-href~="'+zr(h.href)+'"]');if(m)return l.instance=m,En(m),m;var b=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),En(m),Ln(m,"style",b),qd(m,h.precedence,s),l.instance=m;case"stylesheet":b=Wu(h.href);var E=s.querySelector(ef(b));if(E)return l.state.loading|=4,l.instance=E,En(E),E;m=BS(h),(b=Gr.get(b))&&Ey(m,b),E=(s.ownerDocument||s).createElement("link"),En(E);var A=E;return A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),Ln(E,"link",m),l.state.loading|=4,qd(E,h.precedence,s),l.instance=E;case"script":return E=Hu(h.src),(b=s.querySelector(tf(E)))?(l.instance=b,En(b),b):(m=h,(b=Gr.get(E))&&(m=d({},h),Sy(m,b)),s=s.ownerDocument||s,b=s.createElement("script"),En(b),Ln(b,"link",m),s.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,qd(m,h.precedence,s));return l.instance}function qd(s,l,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,E=b,A=0;A<m.length;A++){var I=m[A];if(I.dataset.precedence===l)E=I;else if(E!==b)break}E?E.parentNode.insertBefore(s,E.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(s,l.firstChild))}function Ey(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Sy(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Wd=null;function US(s,l,h){if(Wd===null){var m=new Map,b=Wd=new Map;b.set(h,m)}else b=Wd,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),b=0;b<h.length;b++){var E=h[b];if(!(E[pc]||E[qn]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var A=E.getAttribute(l)||"";A=s+A;var I=m.get(A);I?I.push(E):m.set(A,[E])}}return m}function VS(s,l,h){s=s.ownerDocument||s,s.head.insertBefore(h,l==="title"?s.querySelector("head > title"):null)}function BM(s,l,h){if(h===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function jS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var nf=null;function zM(){}function UM(s,l,h){if(nf===null)throw Error(r(475));var m=nf;if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var b=Wu(h.href),E=s.querySelector(ef(b));if(E){s=E._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Hd.bind(m),s.then(m,m)),l.state.loading|=4,l.instance=E,En(E);return}E=s.ownerDocument||s,h=BS(h),(b=Gr.get(b))&&Ey(h,b),E=E.createElement("link"),En(E);var A=E;A._p=new Promise(function(I,V){A.onload=I,A.onerror=V}),Ln(E,"link",h),l.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Hd.bind(m),s.addEventListener("load",l),s.addEventListener("error",l))}}function VM(){if(nf===null)throw Error(r(475));var s=nf;return s.stylesheets&&s.count===0&&Cy(s,s.stylesheets),0<s.count?function(l){var h=setTimeout(function(){if(s.stylesheets&&Cy(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(h)}}:null}function Hd(){if(this.count--,this.count===0){if(this.stylesheets)Cy(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Gd=null;function Cy(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Gd=new Map,l.forEach(jM,s),Gd=null,Hd.call(s))}function jM(s,l){if(!(l.state.loading&4)){var h=Gd.get(s);if(h)var m=h.get(null);else{h=new Map,Gd.set(s,h);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var A=b[E];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(h.set(A.dataset.precedence,A),m=A)}m&&h.set(null,m)}b=l.instance,A=b.getAttribute("data-precedence"),E=h.get(A)||m,E===m&&h.set(null,b),h.set(A,b),this.count++,m=Hd.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),E?E.parentNode.insertBefore(b,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),l.state.loading|=4}}var rf={$$typeof:C,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function qM(s,l,h,m,b,E,A,I){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.hiddenUpdates=wm(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function qS(s,l,h,m,b,E,A,I,V,ne,fe,de){return s=new qM(s,l,h,A,I,V,ne,de),l=1,E===!0&&(l|=24),E=wr(3,null,null,l),s.current=E,E.stateNode=s,l=og(),l.refCount++,s.pooledCache=l,l.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:l},cg(E),s}function WS(s){return s?(s=_u,s):_u}function HS(s,l,h,m,b,E){b=WS(b),m.context===null?m.context=b:m.pendingContext=b,m=Zi(l),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=Ji(s,m,l),h!==null&&(Rr(h,s,l),Ic(h,s,l))}function GS(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function Ry(s,l){GS(s,l),(s=s.alternate)&&GS(s,l)}function QS(s){if(s.tag===13){var l=wu(s,67108864);l!==null&&Rr(l,s,67108864),Ry(s,67108864)}}var Qd=!0;function WM(s,l,h,m){var b=U.T;U.T=null;var E=H.p;try{H.p=2,Ty(s,l,h,m)}finally{H.p=E,U.T=b}}function HM(s,l,h,m){var b=U.T;U.T=null;var E=H.p;try{H.p=8,Ty(s,l,h,m)}finally{H.p=E,U.T=b}}function Ty(s,l,h,m){if(Qd){var b=Oy(m);if(b===null)py(s,l,m,$d,h),KS(s,m);else if(QM(b,s,l,h,m))m.stopPropagation();else if(KS(s,m),l&4&&-1<GM.indexOf(s)){for(;b!==null;){var E=lu(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var A=ra(E.pendingLanes);if(A!==0){var I=E;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var V=1<<31-Mn(A);I.entanglements[1]|=V,A&=~V}Aa(E),(Tt&6)===0&&(Dd=en()+500,Xc(0))}}break;case 13:I=wu(E,2),I!==null&&Rr(I,E,2),Id(),Ry(E,2)}if(E=Oy(m),E===null&&py(s,l,m,$d,h),E===b)break;b=E}b!==null&&m.stopPropagation()}else py(s,l,m,null,h)}}function Oy(s){return s=Im(s),Ay(s)}var $d=null;function Ay(s){if($d=null,s=uu(s),s!==null){var l=i(s);if(l===null)s=null;else{var h=l.tag;if(h===13){if(s=o(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return $d=s,null}function $S(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pr()){case jn:return 2;case ii:return 8;case or:case Sa:return 32;case Lr:return 268435456;default:return 32}default:return 32}}var ky=!1,ho=null,po=null,vo=null,af=new Map,of=new Map,mo=[],GM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KS(s,l){switch(s){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":af.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":of.delete(l.pointerId)}}function sf(s,l,h,m,b,E){return s===null||s.nativeEvent!==E?(s={blockedOn:l,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[b]},l!==null&&(l=lu(l),l!==null&&QS(l)),s):(s.eventSystemFlags|=m,l=s.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),s)}function QM(s,l,h,m,b){switch(l){case"focusin":return ho=sf(ho,s,l,h,m,b),!0;case"dragenter":return po=sf(po,s,l,h,m,b),!0;case"mouseover":return vo=sf(vo,s,l,h,m,b),!0;case"pointerover":var E=b.pointerId;return af.set(E,sf(af.get(E)||null,s,l,h,m,b)),!0;case"gotpointercapture":return E=b.pointerId,of.set(E,sf(of.get(E)||null,s,l,h,m,b)),!0}return!1}function XS(s){var l=uu(s.target);if(l!==null){var h=i(l);if(h!==null){if(l=h.tag,l===13){if(l=o(h),l!==null){s.blockedOn=l,UN(s.priority,function(){if(h.tag===13){var m=Cr();m=_m(m);var b=wu(h,m);b!==null&&Rr(b,h,m),Ry(h,m)}});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=Oy(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);Nm=m,h.target.dispatchEvent(m),Nm=null}else return l=lu(h),l!==null&&QS(l),s.blockedOn=h,!1;l.shift()}return!0}function YS(s,l,h){Kd(s)&&h.delete(l)}function $M(){ky=!1,ho!==null&&Kd(ho)&&(ho=null),po!==null&&Kd(po)&&(po=null),vo!==null&&Kd(vo)&&(vo=null),af.forEach(YS),of.forEach(YS)}function Xd(s,l){s.blockedOn===l&&(s.blockedOn=null,ky||(ky=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$M)))}var Yd=null;function ZS(s){Yd!==s&&(Yd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yd===s&&(Yd=null);for(var l=0;l<s.length;l+=3){var h=s[l],m=s[l+1],b=s[l+2];if(typeof m!="function"){if(Ay(m||h)===null)continue;break}var E=lu(h);E!==null&&(s.splice(l,3),l-=3,Ag(E,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function uf(s){function l(V){return Xd(V,s)}ho!==null&&Xd(ho,s),po!==null&&Xd(po,s),vo!==null&&Xd(vo,s),af.forEach(l),of.forEach(l);for(var h=0;h<mo.length;h++){var m=mo[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<mo.length&&(h=mo[0],h.blockedOn===null);)XS(h),h.blockedOn===null&&mo.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],E=h[m+1],A=b[sr]||null;if(typeof E=="function")A||ZS(h);else if(A){var I=null;if(E&&E.hasAttribute("formAction")){if(b=E,A=E[sr]||null)I=A.formAction;else if(Ay(b)!==null)continue}else I=A.action;typeof I=="function"?h[m+1]=I:(h.splice(m,3),m-=3),ZS(h)}}}function Dy(s){this._internalRoot=s}Zd.prototype.render=Dy.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,m=Cr();HS(h,m,s,l,null,null)},Zd.prototype.unmount=Dy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;HS(s.current,2,null,s,null,null),Id(),l[su]=null}};function Zd(s){this._internalRoot=s}Zd.prototype.unstable_scheduleHydration=function(s){if(s){var l=vw();s={blockedOn:null,target:s,priority:l};for(var h=0;h<mo.length&&l!==0&&l<mo[h].priority;h++);mo.splice(h,0,s),h===0&&XS(s)}};var JS=e.version;if(JS!=="19.1.0")throw Error(r(527,JS,"19.1.0"));H.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=c(l),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var KM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{oi=Jd.inject(KM),an=Jd}catch{}}return cf.createRoot=function(s,l){if(!a(s))throw Error(r(299));var h=!1,m="",b=vE,E=mE,A=gE,I=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(I=l.unstable_transitionCallbacks)),l=qS(s,1,!1,null,null,h,m,b,E,A,I,null),s[su]=l.current,dy(s),new Dy(l)},cf.hydrateRoot=function(s,l,h){if(!a(s))throw Error(r(299));var m=!1,b="",E=vE,A=mE,I=gE,V=null,ne=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(A=h.onCaughtError),h.onRecoverableError!==void 0&&(I=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(V=h.unstable_transitionCallbacks),h.formState!==void 0&&(ne=h.formState)),l=qS(s,1,!0,l,h??null,m,b,E,A,I,V,ne),l.context=WS(null),h=l.current,m=Cr(),m=_m(m),b=Zi(m),b.callback=null,Ji(h,b,m),h=m,l.current.lanes=h,dc(l,h),Aa(l),s[su]=l.current,dy(s),new Zd(l)},cf.version="19.1.0",cf}var c2;function s3(){if(c2)return My.exports;c2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),My.exports=o3(),My.exports}var u3=s3();const P9=mx(u3);var J=Fv();const mr=mx(J);var Dn=function(){return Dn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Dn.apply(this,arguments)};function zl(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var zt="-ms-",Df="-moz-",Et="-webkit-",AT="comm",Pv="rule",gx="decl",l3="@import",kT="@keyframes",c3="@layer",DT=Math.abs,yx=String.fromCharCode,V0=Object.assign;function f3(n,e){return An(n,0)^45?(((e<<2^An(n,0))<<2^An(n,1))<<2^An(n,2))<<2^An(n,3):0}function NT(n){return n.trim()}function Ri(n,e){return(n=e.exec(n))?n[0]:n}function nt(n,e,t){return n.replace(e,t)}function Rp(n,e,t){return n.indexOf(e,t)}function An(n,e){return n.charCodeAt(e)|0}function Ul(n,e,t){return n.slice(e,t)}function La(n){return n.length}function IT(n){return n.length}function Sf(n,e){return e.push(n),n}function h3(n,e){return n.map(e).join("")}function f2(n,e){return n.filter(function(t){return!Ri(t,e)})}var Lv=1,Vl=1,MT=0,Jr=0,ln=0,nc="";function Bv(n,e,t,r,a,i,o,u){return{value:n,root:e,parent:t,type:r,props:a,children:i,line:Lv,column:Vl,length:o,return:"",siblings:u}}function xo(n,e){return V0(Bv("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function Gu(n){for(;n.root;)n=xo(n.root,{children:[n]});Sf(n,n.siblings)}function d3(){return ln}function p3(){return ln=Jr>0?An(nc,--Jr):0,Vl--,ln===10&&(Vl=1,Lv--),ln}function va(){return ln=Jr<MT?An(nc,Jr++):0,Vl++,ln===10&&(Vl=1,Lv++),ln}function Us(){return An(nc,Jr)}function Tp(){return Jr}function zv(n,e){return Ul(nc,n,e)}function j0(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function v3(n){return Lv=Vl=1,MT=La(nc=n),Jr=0,[]}function m3(n){return nc="",n}function zy(n){return NT(zv(Jr-1,q0(n===91?n+2:n===40?n+1:n)))}function g3(n){for(;(ln=Us())&&ln<33;)va();return j0(n)>2||j0(ln)>3?"":" "}function y3(n,e){for(;--e&&va()&&!(ln<48||ln>102||ln>57&&ln<65||ln>70&&ln<97););return zv(n,Tp()+(e<6&&Us()==32&&va()==32))}function q0(n){for(;va();)switch(ln){case n:return Jr;case 34:case 39:n!==34&&n!==39&&q0(ln);break;case 40:n===41&&q0(n);break;case 92:va();break}return Jr}function b3(n,e){for(;va()&&n+ln!==57;)if(n+ln===84&&Us()===47)break;return"/*"+zv(e,Jr-1)+"*"+yx(n===47?n:va())}function x3(n){for(;!j0(Us());)va();return zv(n,Jr)}function w3(n){return m3(Op("",null,null,null,[""],n=v3(n),0,[0],n))}function Op(n,e,t,r,a,i,o,u,c){for(var f=0,d=0,p=o,v=0,g=0,y=0,x=1,w=1,_=1,S=0,C="",R=a,T=i,O=r,k=C;w;)switch(y=S,S=va()){case 40:if(y!=108&&An(k,p-1)==58){Rp(k+=nt(zy(S),"&","&\f"),"&\f",DT(f?u[f-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:k+=zy(S);break;case 9:case 10:case 13:case 32:k+=g3(y);break;case 92:k+=y3(Tp()-1,7);continue;case 47:switch(Us()){case 42:case 47:Sf(_3(b3(va(),Tp()),e,t,c),c);break;default:k+="/"}break;case 123*x:u[f++]=La(k)*_;case 125*x:case 59:case 0:switch(S){case 0:case 125:w=0;case 59+d:_==-1&&(k=nt(k,/\f/g,"")),g>0&&La(k)-p&&Sf(g>32?d2(k+";",r,t,p-1,c):d2(nt(k," ","")+";",r,t,p-2,c),c);break;case 59:k+=";";default:if(Sf(O=h2(k,e,t,f,d,a,u,C,R=[],T=[],p,i),i),S===123)if(d===0)Op(k,e,O,O,R,i,p,u,T);else switch(v===99&&An(k,3)===110?100:v){case 100:case 108:case 109:case 115:Op(n,O,O,r&&Sf(h2(n,O,O,0,0,a,u,C,a,R=[],p,T),T),a,T,p,u,r?R:T);break;default:Op(k,O,O,O,[""],T,0,u,T)}}f=d=g=0,x=_=1,C=k="",p=o;break;case 58:p=1+La(k),g=y;default:if(x<1){if(S==123)--x;else if(S==125&&x++==0&&p3()==125)continue}switch(k+=yx(S),S*x){case 38:_=d>0?1:(k+="\f",-1);break;case 44:u[f++]=(La(k)-1)*_,_=1;break;case 64:Us()===45&&(k+=zy(va())),v=Us(),d=p=La(C=k+=x3(Tp())),S++;break;case 45:y===45&&La(k)==2&&(x=0)}}return i}function h2(n,e,t,r,a,i,o,u,c,f,d,p){for(var v=a-1,g=a===0?i:[""],y=IT(g),x=0,w=0,_=0;x<r;++x)for(var S=0,C=Ul(n,v+1,v=DT(w=o[x])),R=n;S<y;++S)(R=NT(w>0?g[S]+" "+C:nt(C,/&\f/g,g[S])))&&(c[_++]=R);return Bv(n,e,t,a===0?Pv:u,c,f,d,p)}function _3(n,e,t,r){return Bv(n,e,t,AT,yx(d3()),Ul(n,2,-2),0,r)}function d2(n,e,t,r,a){return Bv(n,e,t,gx,Ul(n,0,r),Ul(n,r+1,-1),r,a)}function FT(n,e,t){switch(f3(n,e)){case 5103:return Et+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Et+n+n;case 4789:return Df+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Et+n+Df+n+zt+n+n;case 5936:switch(An(n,e+11)){case 114:return Et+n+zt+nt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Et+n+zt+nt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Et+n+zt+nt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return Et+n+zt+n+n;case 6165:return Et+n+zt+"flex-"+n+n;case 5187:return Et+n+nt(n,/(\w+).+(:[^]+)/,Et+"box-$1$2"+zt+"flex-$1$2")+n;case 5443:return Et+n+zt+"flex-item-"+nt(n,/flex-|-self/g,"")+(Ri(n,/flex-|baseline/)?"":zt+"grid-row-"+nt(n,/flex-|-self/g,""))+n;case 4675:return Et+n+zt+"flex-line-pack"+nt(n,/align-content|flex-|-self/g,"")+n;case 5548:return Et+n+zt+nt(n,"shrink","negative")+n;case 5292:return Et+n+zt+nt(n,"basis","preferred-size")+n;case 6060:return Et+"box-"+nt(n,"-grow","")+Et+n+zt+nt(n,"grow","positive")+n;case 4554:return Et+nt(n,/([^-])(transform)/g,"$1"+Et+"$2")+n;case 6187:return nt(nt(nt(n,/(zoom-|grab)/,Et+"$1"),/(image-set)/,Et+"$1"),n,"")+n;case 5495:case 3959:return nt(n,/(image-set\([^]*)/,Et+"$1$`$1");case 4968:return nt(nt(n,/(.+:)(flex-)?(.*)/,Et+"box-pack:$3"+zt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Et+n+n;case 4200:if(!Ri(n,/flex-|baseline/))return zt+"grid-column-align"+Ul(n,e)+n;break;case 2592:case 3360:return zt+nt(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,a){return e=a,Ri(r.props,/grid-\w+-end/)})?~Rp(n+(t=t[e].value),"span",0)?n:zt+nt(n,"-start","")+n+zt+"grid-row-span:"+(~Rp(t,"span",0)?Ri(t,/\d+/):+Ri(t,/\d+/)-+Ri(n,/\d+/))+";":zt+nt(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return Ri(r.props,/grid-\w+-start/)})?n:zt+nt(nt(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return nt(n,/(.+)-inline(.+)/,Et+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(La(n)-1-e>6)switch(An(n,e+1)){case 109:if(An(n,e+4)!==45)break;case 102:return nt(n,/(.+:)(.+)-([^]+)/,"$1"+Et+"$2-$3$1"+Df+(An(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Rp(n,"stretch",0)?FT(nt(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return nt(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,a,i,o,u,c,f){return zt+a+":"+i+f+(o?zt+a+"-span:"+(u?c:+c-+i)+f:"")+n});case 4949:if(An(n,e+6)===121)return nt(n,":",":"+Et)+n;break;case 6444:switch(An(n,An(n,14)===45?18:11)){case 120:return nt(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Et+(An(n,14)===45?"inline-":"")+"box$3$1"+Et+"$2$3$1"+zt+"$2box$3")+n;case 100:return nt(n,":",":"+zt)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nt(n,"scroll-","scroll-snap-")+n}return n}function qp(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function E3(n,e,t,r){switch(n.type){case c3:if(n.children.length)break;case l3:case gx:return n.return=n.return||n.value;case AT:return"";case kT:return n.return=n.value+"{"+qp(n.children,r)+"}";case Pv:if(!La(n.value=n.props.join(",")))return""}return La(t=qp(n.children,r))?n.return=n.value+"{"+t+"}":""}function S3(n){var e=IT(n);return function(t,r,a,i){for(var o="",u=0;u<e;u++)o+=n[u](t,r,a,i)||"";return o}}function C3(n){return function(e){e.root||(e=e.return)&&n(e)}}function R3(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case gx:n.return=FT(n.value,n.length,t);return;case kT:return qp([xo(n,{value:nt(n.value,"@","@"+Et)})],r);case Pv:if(n.length)return h3(t=n.props,function(a){switch(Ri(a,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Gu(xo(n,{props:[nt(a,/:(read-\w+)/,":"+Df+"$1")]})),Gu(xo(n,{props:[a]})),V0(n,{props:f2(t,r)});break;case"::placeholder":Gu(xo(n,{props:[nt(a,/:(plac\w+)/,":"+Et+"input-$1")]})),Gu(xo(n,{props:[nt(a,/:(plac\w+)/,":"+Df+"$1")]})),Gu(xo(n,{props:[nt(a,/:(plac\w+)/,zt+"input-$1")]})),Gu(xo(n,{props:[a]})),V0(n,{props:f2(t,r)});break}return""})}}var T3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tr={},jl=typeof process<"u"&&Tr!==void 0&&(Tr.REACT_APP_SC_ATTR||Tr.SC_ATTR)||"data-styled",PT="active",LT="data-styled-version",Uv="6.1.17",bx=`/*!sc*/
`,Wp=typeof window<"u"&&"HTMLElement"in window,O3=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Tr!==void 0&&Tr.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Tr.REACT_APP_SC_DISABLE_SPEEDY!==""?Tr.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Tr.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Tr!==void 0&&Tr.SC_DISABLE_SPEEDY!==void 0&&Tr.SC_DISABLE_SPEEDY!==""&&Tr.SC_DISABLE_SPEEDY!=="false"&&Tr.SC_DISABLE_SPEEDY),A3={},Vv=Object.freeze([]),ql=Object.freeze({});function BT(n,e,t){return t===void 0&&(t=ql),n.theme!==t.theme&&n.theme||e||t.theme}var zT=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),k3=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D3=/(^-|-$)/g;function p2(n){return n.replace(k3,"-").replace(D3,"")}var N3=/(a)(d)/gi,tp=52,v2=function(n){return String.fromCharCode(n+(n>25?39:97))};function W0(n){var e,t="";for(e=Math.abs(n);e>tp;e=e/tp|0)t=v2(e%tp)+t;return(v2(e%tp)+t).replace(N3,"$1-$2")}var Uy,UT=5381,sl=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},VT=function(n){return sl(UT,n)};function xx(n){return W0(VT(n)>>>0)}function I3(n){return n.displayName||n.name||"Component"}function Vy(n){return typeof n=="string"&&!0}var jT=typeof Symbol=="function"&&Symbol.for,qT=jT?Symbol.for("react.memo"):60115,M3=jT?Symbol.for("react.forward_ref"):60112,F3={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},P3={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},WT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L3=((Uy={})[M3]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Uy[qT]=WT,Uy);function m2(n){return("type"in(e=n)&&e.type.$$typeof)===qT?WT:"$$typeof"in n?L3[n.$$typeof]:F3;var e}var B3=Object.defineProperty,z3=Object.getOwnPropertyNames,g2=Object.getOwnPropertySymbols,U3=Object.getOwnPropertyDescriptor,V3=Object.getPrototypeOf,y2=Object.prototype;function HT(n,e,t){if(typeof e!="string"){if(y2){var r=V3(e);r&&r!==y2&&HT(n,r,t)}var a=z3(e);g2&&(a=a.concat(g2(e)));for(var i=m2(n),o=m2(e),u=0;u<a.length;++u){var c=a[u];if(!(c in P3||t&&t[c]||o&&c in o||i&&c in i)){var f=U3(e,c);try{B3(n,c,f)}catch{}}}}return n}function Hs(n){return typeof n=="function"}function wx(n){return typeof n=="object"&&"styledComponentId"in n}function Ts(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function Hp(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function jf(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function H0(n,e,t){if(t===void 0&&(t=!1),!t&&!jf(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=H0(n[r],e[r]);else if(jf(e))for(var r in e)n[r]=H0(n[r],e[r]);return n}function _x(n,e){Object.defineProperty(n,"toString",{value:e})}function Wo(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var j3=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,a=r.length,i=a;e>=i;)if((i<<=1)<0)throw Wo(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(r),this.length=i;for(var o=a;o<i;o++)this.groupSizes[o]=0}for(var u=this.indexOfGroup(e+1),c=(o=0,t.length);o<c;o++)this.tag.insertRule(u,t[o])&&(this.groupSizes[e]++,u++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t;this.groupSizes[e]=0;for(var i=r;i<a;i++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],a=this.indexOfGroup(e),i=a+r,o=a;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(bx);return t},n}(),Ap=new Map,Gp=new Map,kp=1,np=function(n){if(Ap.has(n))return Ap.get(n);for(;Gp.has(kp);)kp++;var e=kp++;return Ap.set(n,e),Gp.set(e,n),e},q3=function(n,e){kp=e+1,Ap.set(n,e),Gp.set(e,n)},W3="style[".concat(jl,"][").concat(LT,'="').concat(Uv,'"]'),H3=new RegExp("^".concat(jl,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),G3=function(n,e,t){for(var r,a=t.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&n.registerName(e,r)},Q3=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(bx),a=[],i=0,o=r.length;i<o;i++){var u=r[i].trim();if(u){var c=u.match(H3);if(c){var f=0|parseInt(c[1],10),d=c[2];f!==0&&(q3(d,f),G3(n,d,c[3]),n.getTag().insertRules(f,a)),a.length=0}else a.push(u)}}},b2=function(n){for(var e=document.querySelectorAll(W3),t=0,r=e.length;t<r;t++){var a=e[t];a&&a.getAttribute(jl)!==PT&&(Q3(n,a),a.parentNode&&a.parentNode.removeChild(a))}};function $3(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var GT=function(n){var e=document.head,t=n||e,r=document.createElement("style"),a=function(u){var c=Array.from(u.querySelectorAll("style[".concat(jl,"]")));return c[c.length-1]}(t),i=a!==void 0?a.nextSibling:null;r.setAttribute(jl,PT),r.setAttribute(LT,Uv);var o=$3();return o&&r.setAttribute("nonce",o),t.insertBefore(r,i),r},K3=function(){function n(e){this.element=GT(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,a=0,i=r.length;a<i;a++){var o=r[a];if(o.ownerNode===t)return o}throw Wo(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),X3=function(){function n(e){this.element=GT(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),Y3=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),x2=Wp,Z3={isServer:!Wp,useCSSOMInjection:!O3},Qp=function(){function n(e,t,r){e===void 0&&(e=ql),t===void 0&&(t={});var a=this;this.options=Dn(Dn({},Z3),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Wp&&x2&&(x2=!1,b2(this)),_x(this,function(){return function(i){for(var o=i.getTag(),u=o.length,c="",f=function(p){var v=function(_){return Gp.get(_)}(p);if(v===void 0)return"continue";var g=i.names.get(v),y=o.getGroup(p);if(g===void 0||!g.size||y.length===0)return"continue";var x="".concat(jl,".g").concat(p,'[id="').concat(v,'"]'),w="";g!==void 0&&g.forEach(function(_){_.length>0&&(w+="".concat(_,","))}),c+="".concat(y).concat(x,'{content:"').concat(w,'"}').concat(bx)},d=0;d<u;d++)f(d);return c}(a)})}return n.registerId=function(e){return np(e)},n.prototype.rehydrate=function(){!this.server&&Wp&&b2(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(Dn(Dn({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var r=t.useCSSOMInjection,a=t.target;return t.isServer?new Y3(a):r?new K3(a):new X3(a)}(this.options),new j3(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(np(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(np(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(np(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),J3=/&/g,e4=/^\s*\/\/.*$/gm;function QT(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=QT(t.children,e)),t})}function t4(n){var e,t,r,a=ql,i=a.options,o=i===void 0?ql:i,u=a.plugins,c=u===void 0?Vv:u,f=function(v,g,y){return y.startsWith(t)&&y.endsWith(t)&&y.replaceAll(t,"").length>0?".".concat(e):v},d=c.slice();d.push(function(v){v.type===Pv&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(J3,t).replace(r,f))}),o.prefix&&d.push(R3),d.push(E3);var p=function(v,g,y,x){g===void 0&&(g=""),y===void 0&&(y=""),x===void 0&&(x="&"),e=x,t=g,r=new RegExp("\\".concat(t,"\\b"),"g");var w=v.replace(e4,""),_=w3(y||g?"".concat(y," ").concat(g," { ").concat(w," }"):w);o.namespace&&(_=QT(_,o.namespace));var S=[];return qp(_,S3(d.concat(C3(function(C){return S.push(C)})))),S};return p.hash=c.length?c.reduce(function(v,g){return g.name||Wo(15),sl(v,g.name)},UT).toString():"",p}var n4=new Qp,G0=t4(),$T=mr.createContext({shouldForwardProp:void 0,styleSheet:n4,stylis:G0});$T.Consumer;mr.createContext(void 0);function Q0(){return J.useContext($T)}var KT=function(){function n(e,t){var r=this;this.inject=function(a,i){i===void 0&&(i=G0);var o=r.name+i.hash;a.hasNameForId(r.id,o)||a.insertRules(r.id,o,i(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,_x(this,function(){throw Wo(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=G0),this.name+e.hash},n}(),r4=function(n){return n>="A"&&n<="Z"};function w2(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;r4(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var XT=function(n){return n==null||n===!1||n===""},YT=function(n){var e,t,r=[];for(var a in n){var i=n[a];n.hasOwnProperty(a)&&!XT(i)&&(Array.isArray(i)&&i.isCss||Hs(i)?r.push("".concat(w2(a),":"),i,";"):jf(i)?r.push.apply(r,zl(zl(["".concat(a," {")],YT(i),!1),["}"],!1)):r.push("".concat(w2(a),": ").concat((e=a,(t=i)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in T3||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function zo(n,e,t,r){if(XT(n))return[];if(wx(n))return[".".concat(n.styledComponentId)];if(Hs(n)){if(!Hs(i=n)||i.prototype&&i.prototype.isReactComponent||!e)return[n];var a=n(e);return zo(a,e,t,r)}var i;return n instanceof KT?t?(n.inject(t,r),[n.getName(r)]):[n]:jf(n)?YT(n):Array.isArray(n)?Array.prototype.concat.apply(Vv,n.map(function(o){return zo(o,e,t,r)})):[n.toString()]}function ZT(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(Hs(t)&&!wx(t))return!1}return!0}var a4=VT(Uv),i4=function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&ZT(e),this.componentId=t,this.baseHash=sl(a4,t),this.baseStyle=r,Qp.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var a=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))a=Ts(a,this.staticRulesId);else{var i=Hp(zo(this.rules,e,t,r)),o=W0(sl(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var u=r(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,u)}a=Ts(a,o),this.staticRulesId=o}else{for(var c=sl(this.baseHash,r.hash),f="",d=0;d<this.rules.length;d++){var p=this.rules[d];if(typeof p=="string")f+=p;else if(p){var v=Hp(zo(p,e,t,r));c=sl(c,v+d),f+=v}}if(f){var g=W0(c>>>0);t.hasNameForId(this.componentId,g)||t.insertRules(this.componentId,g,r(f,".".concat(g),void 0,this.componentId)),a=Ts(a,g)}}return a},n}(),Wl=mr.createContext(void 0);Wl.Consumer;function L9(){var n=J.useContext(Wl);if(!n)throw Wo(18);return n}function B9(n){var e=mr.useContext(Wl),t=J.useMemo(function(){return function(r,a){if(!r)throw Wo(14);if(Hs(r)){var i=r(a);return i}if(Array.isArray(r)||typeof r!="object")throw Wo(8);return a?Dn(Dn({},a),r):r}(n.theme,e)},[n.theme,e]);return n.children?mr.createElement(Wl.Provider,{value:t},n.children):null}var jy={};function o4(n,e,t){var r=wx(n),a=n,i=!Vy(n),o=e.attrs,u=o===void 0?Vv:o,c=e.componentId,f=c===void 0?function(R,T){var O=typeof R!="string"?"sc":p2(R);jy[O]=(jy[O]||0)+1;var k="".concat(O,"-").concat(xx(Uv+O+jy[O]));return T?"".concat(T,"-").concat(k):k}(e.displayName,e.parentComponentId):c,d=e.displayName,p=d===void 0?function(R){return Vy(R)?"styled.".concat(R):"Styled(".concat(I3(R),")")}(n):d,v=e.displayName&&e.componentId?"".concat(p2(e.displayName),"-").concat(e.componentId):e.componentId||f,g=r&&a.attrs?a.attrs.concat(u).filter(Boolean):u,y=e.shouldForwardProp;if(r&&a.shouldForwardProp){var x=a.shouldForwardProp;if(e.shouldForwardProp){var w=e.shouldForwardProp;y=function(R,T){return x(R,T)&&w(R,T)}}else y=x}var _=new i4(t,v,r?a.componentStyle:void 0);function S(R,T){return function(O,k,D){var N=O.attrs,M=O.componentStyle,B=O.defaultProps,z=O.foldedComponentIds,ee=O.styledComponentId,re=O.target,te=mr.useContext(Wl),U=Q0(),H=O.shouldForwardProp||U.shouldForwardProp,$=BT(k,te,B)||ql,Y=function(be,ye,Le){for(var Ee,ze=Dn(Dn({},ye),{className:void 0,theme:Le}),gt=0;gt<be.length;gt+=1){var qe=Hs(Ee=be[gt])?Ee(ze):Ee;for(var Ye in qe)ze[Ye]=Ye==="className"?Ts(ze[Ye],qe[Ye]):Ye==="style"?Dn(Dn({},ze[Ye]),qe[Ye]):qe[Ye]}return ye.className&&(ze.className=Ts(ze.className,ye.className)),ze}(N,k,$),F=Y.as||re,Q={};for(var oe in Y)Y[oe]===void 0||oe[0]==="$"||oe==="as"||oe==="theme"&&Y.theme===$||(oe==="forwardedAs"?Q.as=Y.forwardedAs:H&&!H(oe,F)||(Q[oe]=Y[oe]));var ue=function(be,ye){var Le=Q0(),Ee=be.generateAndInjectStyles(ye,Le.styleSheet,Le.stylis);return Ee}(M,Y),me=Ts(z,ee);return ue&&(me+=" "+ue),Y.className&&(me+=" "+Y.className),Q[Vy(F)&&!zT.has(F)?"class":"className"]=me,D&&(Q.ref=D),J.createElement(F,Q)}(C,R,T)}S.displayName=p;var C=mr.forwardRef(S);return C.attrs=g,C.componentStyle=_,C.displayName=p,C.shouldForwardProp=y,C.foldedComponentIds=r?Ts(a.foldedComponentIds,a.styledComponentId):"",C.styledComponentId=v,C.target=r?a.target:n,Object.defineProperty(C,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(R){this._foldedDefaultProps=r?function(T){for(var O=[],k=1;k<arguments.length;k++)O[k-1]=arguments[k];for(var D=0,N=O;D<N.length;D++)H0(T,N[D],!0);return T}({},a.defaultProps,R):R}}),_x(C,function(){return".".concat(C.styledComponentId)}),i&&HT(C,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),C}function _2(n,e){for(var t=[n[0]],r=0,a=e.length;r<a;r+=1)t.push(e[r],n[r+1]);return t}var E2=function(n){return Object.assign(n,{isCss:!0})};function Ex(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Hs(n)||jf(n))return E2(zo(_2(Vv,zl([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?zo(r):E2(zo(_2(r,e)))}function $0(n,e,t){if(t===void 0&&(t=ql),!e)throw Wo(1,e);var r=function(a){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return n(e,t,Ex.apply(void 0,zl([a],i,!1)))};return r.attrs=function(a){return $0(n,e,Dn(Dn({},t),{attrs:Array.prototype.concat(t.attrs,a).filter(Boolean)}))},r.withConfig=function(a){return $0(n,e,Dn(Dn({},t),a))},r}var JT=function(n){return $0(o4,n)},s4=JT;zT.forEach(function(n){s4[n]=JT(n)});var u4=function(){function n(e,t){this.rules=e,this.componentId=t,this.isStatic=ZT(e),Qp.registerId(this.componentId+1)}return n.prototype.createStyles=function(e,t,r,a){var i=a(Hp(zo(this.rules,t,r,a)),""),o=this.componentId+e;r.insertRules(o,o,i)},n.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},n.prototype.renderStyles=function(e,t,r,a){e>2&&Qp.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,a)},n}();function z9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=Ex.apply(void 0,zl([n],e,!1)),a="sc-global-".concat(xx(JSON.stringify(r))),i=new u4(r,a),o=function(c){var f=Q0(),d=mr.useContext(Wl),p=mr.useRef(f.styleSheet.allocateGSInstance(a)).current;return f.styleSheet.server&&u(p,c,f.styleSheet,d,f.stylis),mr.useLayoutEffect(function(){if(!f.styleSheet.server)return u(p,c,f.styleSheet,d,f.stylis),function(){return i.removeStyles(p,f.styleSheet)}},[p,c,f.styleSheet,d,f.stylis]),null};function u(c,f,d,p,v){if(i.isStatic)i.renderStyles(c,A3,d,v);else{var g=Dn(Dn({},f),{theme:BT(f,p,o.defaultProps)});i.renderStyles(c,g,d,v)}}return mr.memo(o)}function U9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var r=Hp(Ex.apply(void 0,zl([n],e,!1))),a=xx(r);return new KT(a,r)}var ff={},S2;function l4(){if(S2)return ff;S2=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.parse=o,ff.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function o(v,g){const y=new i,x=v.length;if(x<2)return y;const w=(g==null?void 0:g.decode)||d;let _=0;do{const S=v.indexOf("=",_);if(S===-1)break;const C=v.indexOf(";",_),R=C===-1?x:C;if(S>R){_=v.lastIndexOf(";",S-1)+1;continue}const T=u(v,_,S),O=c(v,S,T),k=v.slice(T,O);if(y[k]===void 0){let D=u(v,S+1,R),N=c(v,R,D);const M=w(v.slice(D,N));y[k]=M}_=R+1}while(_<x);return y}function u(v,g,y){do{const x=v.charCodeAt(g);if(x!==32&&x!==9)return g}while(++g<y);return y}function c(v,g,y){for(;g>y;){const x=v.charCodeAt(--g);if(x!==32&&x!==9)return g+1}return y}function f(v,g,y){const x=(y==null?void 0:y.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const w=x(g);if(!e.test(w))throw new TypeError(`argument val is invalid: ${g}`);let _=v+"="+w;if(!y)return _;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);_+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);_+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);_+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);_+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(_+="; HttpOnly"),y.secure&&(_+="; Secure"),y.partitioned&&(_+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return _}function d(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function p(v){return a.call(v)==="[object Date]"}return ff}l4();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C2="popstate";function c4(n={}){function e(r,a){let{pathname:i,search:o,hash:u}=r.location;return K0("",{pathname:i,search:o,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:qf(a)}return h4(e,t,null,n)}function Gt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ba(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f4(){return Math.random().toString(36).substring(2,10)}function R2(n,e){return{usr:n.state,key:n.key,idx:e}}function K0(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?rc(e):e,state:t,key:e&&e.key||r||f4()}}function qf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function rc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function h4(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,u="POP",c=null,f=d();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function d(){return(o.state||{idx:null}).idx}function p(){u="POP";let w=d(),_=w==null?null:w-f;f=w,c&&c({action:u,location:x.location,delta:_})}function v(w,_){u="PUSH";let S=K0(x.location,w,_);f=d()+1;let C=R2(S,f),R=x.createHref(S);try{o.pushState(C,"",R)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(R)}i&&c&&c({action:u,location:x.location,delta:1})}function g(w,_){u="REPLACE";let S=K0(x.location,w,_);f=d();let C=R2(S,f),R=x.createHref(S);o.replaceState(C,"",R),i&&c&&c({action:u,location:x.location,delta:0})}function y(w){let _=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof w=="string"?w:qf(w);return S=S.replace(/ $/,"%20"),Gt(_,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,_)}let x={get action(){return u},get location(){return n(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(C2,p),c=w,()=>{a.removeEventListener(C2,p),c=null}},createHref(w){return e(a,w)},createURL:y,encodeLocation(w){let _=y(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:g,go(w){return o.go(w)}};return x}function eO(n,e,t="/"){return d4(n,e,t,!1)}function d4(n,e,t,r){let a=typeof e=="string"?rc(e):e,i=Ii(a.pathname||"/",t);if(i==null)return null;let o=tO(n);p4(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let f=C4(i);u=E4(o[c],f,r)}return u}function tO(n,e=[],t=[],r=""){let a=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Gt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Di([r,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(Gt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),tO(i.children,e,d,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:w4(f,i.index),routesMeta:d})};return n.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,o);else for(let c of nO(i.path))a(i,o,c)}),e}function nO(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=nO(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&u.push(...o),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function p4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var v4=/^:[\w-]+$/,m4=3,g4=2,y4=1,b4=10,x4=-2,T2=n=>n==="*";function w4(n,e){let t=n.split("/"),r=t.length;return t.some(T2)&&(r+=x4),e&&(r+=g4),t.filter(a=>!T2(a)).reduce((a,i)=>a+(v4.test(i)?m4:i===""?y4:b4),r)}function _4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function E4(n,e,t=!1){let{routesMeta:r}=n,a={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=$p({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},d),v=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=$p({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Di([i,p.pathname]),pathnameBase:A4(Di([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Di([i,p.pathnameBase]))}return o}function $p(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=S4(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},v)=>{if(d==="*"){let y=u[v]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=u[v];return p&&!g?f[d]=void 0:f[d]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:n}}function S4(n,e=!1,t=!0){ba(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function C4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ba(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function R4(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?rc(n):n;return{pathname:t?t.startsWith("/")?t:T4(t,e):e,search:k4(r),hash:D4(a)}}function T4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function qy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function O4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rO(n){let e=O4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function aO(n,e,t,r=!1){let a;typeof n=="string"?a=rc(n):(a={...n},Gt(!a.pathname||!a.pathname.includes("?"),qy("?","pathname","search",a)),Gt(!a.pathname||!a.pathname.includes("#"),qy("#","pathname","hash",a)),Gt(!a.search||!a.search.includes("#"),qy("#","search","hash",a)));let i=n===""||a.pathname==="",o=i?"/":a.pathname,u;if(o==null)u=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}u=p>=0?e[p]:"/"}let c=R4(a,u),f=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}var Di=n=>n.join("/").replace(/\/\/+/g,"/"),A4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),k4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,D4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function N4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var iO=["POST","PUT","PATCH","DELETE"];new Set(iO);var I4=["GET",...iO];new Set(I4);var ac=J.createContext(null);ac.displayName="DataRouter";var jv=J.createContext(null);jv.displayName="DataRouterState";var oO=J.createContext({isTransitioning:!1});oO.displayName="ViewTransition";var M4=J.createContext(new Map);M4.displayName="Fetchers";var F4=J.createContext(null);F4.displayName="Await";var ei=J.createContext(null);ei.displayName="Navigation";var Ch=J.createContext(null);Ch.displayName="Location";var Li=J.createContext({outlet:null,matches:[],isDataRoute:!1});Li.displayName="Route";var Sx=J.createContext(null);Sx.displayName="RouteError";function P4(n,{relative:e}={}){Gt(Rh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=J.useContext(ei),{hash:a,pathname:i,search:o}=Th(n,{relative:e}),u=i;return t!=="/"&&(u=i==="/"?t:Di([t,i])),r.createHref({pathname:u,search:o,hash:a})}function Rh(){return J.useContext(Ch)!=null}function es(){return Gt(Rh(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(Ch).location}var sO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uO(n){J.useContext(ei).static||J.useLayoutEffect(n)}function lO(){let{isDataRoute:n}=J.useContext(Li);return n?K4():L4()}function L4(){Gt(Rh(),"useNavigate() may be used only in the context of a <Router> component.");let n=J.useContext(ac),{basename:e,navigator:t}=J.useContext(ei),{matches:r}=J.useContext(Li),{pathname:a}=es(),i=JSON.stringify(rO(r)),o=J.useRef(!1);return uO(()=>{o.current=!0}),J.useCallback((c,f={})=>{if(ba(o.current,sO),!o.current)return;if(typeof c=="number"){t.go(c);return}let d=aO(c,JSON.parse(i),a,f.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Di([e,d.pathname])),(f.replace?t.replace:t.push)(d,f.state,f)},[e,t,i,a,n])}J.createContext(null);function Th(n,{relative:e}={}){let{matches:t}=J.useContext(Li),{pathname:r}=es(),a=JSON.stringify(rO(t));return J.useMemo(()=>aO(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function B4(n,e){return cO(n,e)}function cO(n,e,t,r){var S;Gt(Rh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:i}=J.useContext(ei),{matches:o}=J.useContext(Li),u=o[o.length-1],c=u?u.params:{},f=u?u.pathname:"/",d=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";fO(f,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=es(),g;if(e){let C=typeof e=="string"?rc(e):e;Gt(d==="/"||((S=C.pathname)==null?void 0:S.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${C.pathname}" was given in the \`location\` prop.`),g=C}else g=v;let y=g.pathname||"/",x=y;if(d!=="/"){let C=d.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=!i&&t&&t.matches&&t.matches.length>0?t.matches:eO(n,{pathname:x});ba(p||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ba(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=q4(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Di([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Di([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,t,r);return e&&_?J.createElement(Ch.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},_):_}function z4(){let n=$4(),e=N4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=J.createElement(J.Fragment,null,J.createElement("p",null,"💿 Hey developer 👋"),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:i},"ErrorBoundary")," or"," ",J.createElement("code",{style:i},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),t?J.createElement("pre",{style:a},t):null,o)}var U4=J.createElement(z4,null),V4=class extends J.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?J.createElement(Li.Provider,{value:this.props.routeContext},J.createElement(Sx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j4({routeContext:n,match:e,children:t}){let r=J.useContext(ac);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),J.createElement(Li.Provider,{value:n},t)}function q4(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,i=t==null?void 0:t.errors;if(i!=null){let c=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);Gt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,u=-1;if(t)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:d,errors:p}=t,v=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){o=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,f,d)=>{let p,v=!1,g=null,y=null;t&&(p=i&&f.route.id?i[f.route.id]:void 0,g=f.route.errorElement||U4,o&&(u<0&&d===0?(fO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):u===d&&(v=!0,y=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,d+1)),w=()=>{let _;return p?_=g:v?_=y:f.route.Component?_=J.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,J.createElement(j4,{match:f,routeContext:{outlet:c,matches:x,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?J.createElement(V4,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}function Cx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W4(n){let e=J.useContext(ac);return Gt(e,Cx(n)),e}function H4(n){let e=J.useContext(jv);return Gt(e,Cx(n)),e}function G4(n){let e=J.useContext(Li);return Gt(e,Cx(n)),e}function Rx(n){let e=G4(n),t=e.matches[e.matches.length-1];return Gt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Q4(){return Rx("useRouteId")}function $4(){var r;let n=J.useContext(Sx),e=H4("useRouteError"),t=Rx("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function K4(){let{router:n}=W4("useNavigate"),e=Rx("useNavigate"),t=J.useRef(!1);return uO(()=>{t.current=!0}),J.useCallback(async(a,i={})=>{ba(t.current,sO),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...i}))},[n,e])}var O2={};function fO(n,e,t){!e&&!O2[n]&&(O2[n]=!0,ba(!1,t))}J.memo(X4);function X4({routes:n,future:e,state:t}){return cO(n,void 0,t,e)}function Y4(n){Gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z4({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:i=!1}){Gt(!Rh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),u=J.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof t=="string"&&(t=rc(t));let{pathname:c="/",search:f="",hash:d="",state:p=null,key:v="default"}=t,g=J.useMemo(()=>{let y=Ii(c,o);return y==null?null:{location:{pathname:y,search:f,hash:d,state:p,key:v},navigationType:r}},[o,c,f,d,p,v,r]);return ba(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:J.createElement(ei.Provider,{value:u},J.createElement(Ch.Provider,{children:e,value:g}))}function V9({children:n,location:e}){return B4(X0(n),e)}function X0(n,e=[]){let t=[];return J.Children.forEach(n,(r,a)=>{if(!J.isValidElement(r))return;let i=[...e,a];if(r.type===J.Fragment){t.push.apply(t,X0(r.props.children,i));return}Gt(r.type===Y4,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=X0(r.props.children,i)),t.push(o)}),t}var Dp="get",Np="application/x-www-form-urlencoded";function qv(n){return n!=null&&typeof n.tagName=="string"}function J4(n){return qv(n)&&n.tagName.toLowerCase()==="button"}function eF(n){return qv(n)&&n.tagName.toLowerCase()==="form"}function tF(n){return qv(n)&&n.tagName.toLowerCase()==="input"}function nF(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rF(n,e){return n.button===0&&(!e||e==="_self")&&!nF(n)}function Y0(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(a=>[t,a]):[[t,r]])},[]))}function aF(n,e){let t=Y0(n);return e&&e.forEach((r,a)=>{t.has(a)||e.getAll(a).forEach(i=>{t.append(a,i)})}),t}var rp=null;function iF(){if(rp===null)try{new FormData(document.createElement("form"),0),rp=!1}catch{rp=!0}return rp}var oF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wy(n){return n!=null&&!oF.has(n)?(ba(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Np}"`),null):n}function sF(n,e){let t,r,a,i,o;if(eF(n)){let u=n.getAttribute("action");r=u?Ii(u,e):null,t=n.getAttribute("method")||Dp,a=Wy(n.getAttribute("enctype"))||Np,i=new FormData(n)}else if(J4(n)||tF(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?Ii(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Dp,a=Wy(n.getAttribute("formenctype"))||Wy(u.getAttribute("enctype"))||Np,i=new FormData(u,n),!iF()){let{name:f,type:d,value:p}=n;if(d==="image"){let v=f?`${f}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else f&&i.append(f,p)}}else{if(qv(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dp,r=null,a=Np,o=n}return i&&a==="text/plain"&&(o=i,i=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:i,body:o}}function Tx(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function uF(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lF(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function cF(n,e,t){let r=await Promise.all(n.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await uF(i,t);return o.links?o.links():[]}return[]}));return pF(r.flat(1).filter(lF).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function A2(n,e,t,r,a,i){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,u=(c,f)=>{var d;return t[f].pathname!==c.pathname||((d=t[f].route.path)==null?void 0:d.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,f)=>o(c,f)||u(c,f)):i==="data"?e.filter((c,f)=>{var p;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function fF(n,e,{includeHydrateFallback:t}={}){return hF(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function hF(n){return[...new Set(n)]}function dF(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function pF(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let i=JSON.stringify(dF(a));return t.has(i)||(t.add(i),r.push({key:i,link:a})),r},[])}function vF(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ii(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function hO(){let n=J.useContext(ac);return Tx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function mF(){let n=J.useContext(jv);return Tx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ox=J.createContext(void 0);Ox.displayName="FrameworkContext";function dO(){let n=J.useContext(Ox);return Tx(n,"You must render this element inside a <HydratedRouter> element"),n}function gF(n,e){let t=J.useContext(Ox),[r,a]=J.useState(!1),[i,o]=J.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=e,v=J.useRef(null);J.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let x=_=>{_.forEach(S=>{o(S.isIntersecting)})},w=new IntersectionObserver(x,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[n]),J.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{a(!0)},y=()=>{a(!1),o(!1)};return t?n!=="intent"?[i,v,{}]:[i,v,{onFocus:hf(u,g),onBlur:hf(c,y),onMouseEnter:hf(f,g),onMouseLeave:hf(d,y),onTouchStart:hf(p,g)}]:[!1,v,{}]}function hf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function yF({page:n,...e}){let{router:t}=hO(),r=J.useMemo(()=>eO(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?J.createElement(xF,{page:n,matches:r,...e}):null}function bF(n){let{manifest:e,routeModules:t}=dO(),[r,a]=J.useState([]);return J.useEffect(()=>{let i=!1;return cF(n,e,t).then(o=>{i||a(o)}),()=>{i=!0}},[n,e,t]),r}function xF({page:n,matches:e,...t}){let r=es(),{manifest:a,routeModules:i}=dO(),{basename:o}=hO(),{loaderData:u,matches:c}=mF(),f=J.useMemo(()=>A2(n,e,c,a,r,"data"),[n,e,c,a,r]),d=J.useMemo(()=>A2(n,e,c,a,r,"assets"),[n,e,c,a,r]),p=J.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let y=new Set,x=!1;if(e.forEach(_=>{var C;let S=a.routes[_.route.id];!S||!S.hasLoader||(!f.some(R=>R.route.id===_.route.id)&&_.route.id in u&&((C=i[_.route.id])!=null&&C.shouldRevalidate)||S.hasClientLoader?x=!0:y.add(_.route.id))}),y.size===0)return[];let w=vF(n,o);return x&&y.size>0&&w.searchParams.set("_routes",e.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,u,r,a,f,e,n,i]),v=J.useMemo(()=>fF(d,a),[d,a]),g=bF(d);return J.createElement(J.Fragment,null,p.map(y=>J.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),v.map(y=>J.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:x})=>J.createElement("link",{key:y,...x})))}function wF(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pO&&(window.__reactRouterVersion="7.5.0")}catch{}function j9({basename:n,children:e,window:t}){let r=J.useRef();r.current==null&&(r.current=c4({window:t,v5Compat:!0}));let a=r.current,[i,o]=J.useState({action:a.action,location:a.location}),u=J.useCallback(c=>{J.startTransition(()=>o(c))},[o]);return J.useLayoutEffect(()=>a.listen(u),[a,u]),J.createElement(Z4,{basename:n,children:e,location:i.location,navigationType:i.action,navigator:a})}var vO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mO=J.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:i,replace:o,state:u,target:c,to:f,preventScrollReset:d,viewTransition:p,...v},g){let{basename:y}=J.useContext(ei),x=typeof f=="string"&&vO.test(f),w,_=!1;if(typeof f=="string"&&x&&(w=f,pO))try{let N=new URL(window.location.href),M=f.startsWith("//")?new URL(N.protocol+f):new URL(f),B=Ii(M.pathname,y);M.origin===N.origin&&B!=null?f=B+M.search+M.hash:_=!0}catch{ba(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=P4(f,{relative:a}),[C,R,T]=gF(r,v),O=CF(f,{replace:o,state:u,target:c,preventScrollReset:d,relative:a,viewTransition:p});function k(N){e&&e(N),N.defaultPrevented||O(N)}let D=J.createElement("a",{...v,...T,href:w||S,onClick:_||i?e:k,ref:wF(g,R),target:c,"data-discover":!x&&t==="render"?"true":void 0});return C&&!x?J.createElement(J.Fragment,null,D,J.createElement(yF,{page:S})):D});mO.displayName="Link";var _F=J.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:i,to:o,viewTransition:u,children:c,...f},d){let p=Th(o,{relative:f.relative}),v=es(),g=J.useContext(jv),{navigator:y,basename:x}=J.useContext(ei),w=g!=null&&kF(p)&&u===!0,_=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,S=v.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&x&&(C=Ii(C,x)||C);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=S===_||!a&&S.startsWith(_)&&S.charAt(R)==="/",O=C!=null&&(C===_||!a&&C.startsWith(_)&&C.charAt(_.length)==="/"),k={isActive:T,isPending:O,isTransitioning:w},D=T?e:void 0,N;typeof r=="function"?N=r(k):N=[r,T?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M=typeof i=="function"?i(k):i;return J.createElement(mO,{...f,"aria-current":D,className:N,ref:d,style:M,to:o,viewTransition:u},typeof c=="function"?c(k):c)});_F.displayName="NavLink";var EF=J.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:i,method:o=Dp,action:u,onSubmit:c,relative:f,preventScrollReset:d,viewTransition:p,...v},g)=>{let y=OF(),x=AF(u,{relative:f}),w=o.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&vO.test(u),S=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let R=C.nativeEvent.submitter,T=(R==null?void 0:R.getAttribute("formmethod"))||o;y(R||C.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:a,state:i,relative:f,preventScrollReset:d,viewTransition:p})};return J.createElement("form",{ref:g,method:w,action:x,onSubmit:r?c:S,...v,"data-discover":!_&&n==="render"?"true":void 0})});EF.displayName="Form";function SF(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gO(n){let e=J.useContext(ac);return Gt(e,SF(n)),e}function CF(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:o}={}){let u=lO(),c=es(),f=Th(n,{relative:i});return J.useCallback(d=>{if(rF(d,e)){d.preventDefault();let p=t!==void 0?t:qf(c)===qf(f);u(n,{replace:p,state:r,preventScrollReset:a,relative:i,viewTransition:o})}},[c,u,f,t,r,e,n,a,i,o])}function q9(n){ba(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=J.useRef(Y0(n)),t=J.useRef(!1),r=es(),a=J.useMemo(()=>aF(r.search,t.current?null:e.current),[r.search]),i=lO(),o=J.useCallback((u,c)=>{const f=Y0(typeof u=="function"?u(a):u);t.current=!0,i("?"+f,c)},[i,a]);return[a,o]}var RF=0,TF=()=>`__${String(++RF)}__`;function OF(){let{router:n}=gO("useSubmit"),{basename:e}=J.useContext(ei),t=Q4();return J.useCallback(async(r,a={})=>{let{action:i,method:o,encType:u,formData:c,body:f}=sF(r,e);if(a.navigate===!1){let d=a.fetcherKey||TF();await n.fetch(d,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,flushSync:a.flushSync})}else await n.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function AF(n,{relative:e}={}){let{basename:t}=J.useContext(ei),r=J.useContext(Li);Gt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...Th(n||".",{relative:e})},o=es();if(n==null){i.search=o.search;let u=new URLSearchParams(i.search),c=u.getAll("index");if(c.some(d=>d==="")){u.delete("index"),c.filter(p=>p).forEach(p=>u.append("index",p));let d=u.toString();i.search=d?`?${d}`:""}}return(!n||n===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Di([t,i.pathname])),qf(i)}function kF(n,e={}){let t=J.useContext(oO);Gt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gO("useViewTransitionState"),a=Th(n,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Ii(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ii(t.nextLocation.pathname,r)||t.nextLocation.pathname;return $p(a.pathname,o)!=null||$p(a.pathname,i)!=null}new TextEncoder;function DF(n={}){const{nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}=n,[a,i]=J.useState(!1),o=J.useRef(t);o.current=t;const u=J.useRef(r);return u.current=r,J.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var f;i(!0),(f=o.current)===null||f===void 0||f.call(o)},c.onerror=()=>{var f;i(!1),(f=u.current)===null||f===void 0||f.call(u)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),a}const yO=J.createContext(null);function W9({clientId:n,nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r,children:a}){const i=DF({nonce:e,onScriptLoadSuccess:t,onScriptLoadError:r}),o=J.useMemo(()=>({clientId:n,scriptLoadedSuccessfully:i}),[n,i]);return mr.createElement(yO.Provider,{value:o},a)}function NF(){const n=J.useContext(yO);if(!n)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return n}function H9({flow:n="implicit",scope:e="",onSuccess:t,onError:r,onNonOAuthError:a,overrideScope:i,state:o,...u}){const{clientId:c,scriptLoadedSuccessfully:f}=NF(),d=J.useRef(),p=J.useRef(t);p.current=t;const v=J.useRef(r);v.current=r;const g=J.useRef(a);g.current=a,J.useEffect(()=>{var w,_;if(!f)return;const S=n==="implicit"?"initTokenClient":"initCodeClient",C=(_=(w=window==null?void 0:window.google)===null||w===void 0?void 0:w.accounts)===null||_===void 0?void 0:_.oauth2[S]({client_id:c,scope:i?e:`openid profile email ${e}`,callback:R=>{var T,O;if(R.error)return(T=v.current)===null||T===void 0?void 0:T.call(v,R);(O=p.current)===null||O===void 0||O.call(p,R)},error_callback:R=>{var T;(T=g.current)===null||T===void 0||T.call(g,R)},state:o,...u});d.current=C},[c,f,n,e,o]);const y=J.useCallback(w=>{var _;return(_=d.current)===null||_===void 0?void 0:_.requestAccessToken(w)},[]),x=J.useCallback(()=>{var w;return(w=d.current)===null||w===void 0?void 0:w.requestCode()},[]);return n==="implicit"?y:x}var ic=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Gs=typeof window>"u"||"Deno"in globalThis;function $r(){}function IF(n,e){return typeof n=="function"?n(e):n}function Z0(n){return typeof n=="number"&&n>=0&&n!==1/0}function bO(n,e){return Math.max(n+(e||0)-Date.now(),0)}function pl(n,e){return typeof n=="function"?n(e):n}function ca(n,e){return typeof n=="function"?n(e):n}function k2(n,e){const{type:t="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:u}=n;if(o){if(r){if(e.queryHash!==Ax(o,e.options))return!1}else if(!Wf(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||a&&a!==e.state.fetchStatus||i&&!i(e))}function D2(n,e){const{exact:t,status:r,predicate:a,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Qs(e.options.mutationKey)!==Qs(i))return!1}else if(!Wf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function Ax(n,e){return((e==null?void 0:e.queryKeyHashFn)||Qs)(n)}function Qs(n){return JSON.stringify(n,(e,t)=>J0(t)?Object.keys(t).sort().reduce((r,a)=>(r[a]=t[a],r),{}):t)}function Wf(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Wf(n[t],e[t])):!1}function xO(n,e){if(n===e)return n;const t=N2(n)&&N2(e);if(t||J0(n)&&J0(e)){const r=t?n:Object.keys(n),a=r.length,i=t?e:Object.keys(e),o=i.length,u=t?[]:{};let c=0;for(let f=0;f<o;f++){const d=t?f:i[f];(!t&&r.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(u[d]=void 0,c++):(u[d]=xO(n[d],e[d]),u[d]===n[d]&&n[d]!==void 0&&c++)}return a===o&&c===a?n:u}return e}function Kp(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function N2(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function J0(n){if(!I2(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!I2(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function I2(n){return Object.prototype.toString.call(n)==="[object Object]"}function MF(n){return new Promise(e=>{setTimeout(e,n)})}function eb(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?xO(n,e):e}function FF(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function PF(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var kx=Symbol();function wO(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===kx?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ns,To,Rl,bT,LF=(bT=class extends ic{constructor(){super();Ue(this,Ns);Ue(this,To);Ue(this,Rl);Se(this,Rl,e=>{if(!Gs&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){j(this,To)||this.setEventListener(j(this,Rl))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,To))==null||e.call(this),Se(this,To,void 0))}setEventListener(e){var t;Se(this,Rl,e),(t=j(this,To))==null||t.call(this),Se(this,To,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){j(this,Ns)!==e&&(Se(this,Ns,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof j(this,Ns)=="boolean"?j(this,Ns):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ns=new WeakMap,To=new WeakMap,Rl=new WeakMap,bT),Dx=new LF,Tl,Oo,Ol,xT,BF=(xT=class extends ic{constructor(){super();Ue(this,Tl,!0);Ue(this,Oo);Ue(this,Ol);Se(this,Ol,e=>{if(!Gs&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,Oo)||this.setEventListener(j(this,Ol))}onUnsubscribe(){var e;this.hasListeners()||((e=j(this,Oo))==null||e.call(this),Se(this,Oo,void 0))}setEventListener(e){var t;Se(this,Ol,e),(t=j(this,Oo))==null||t.call(this),Se(this,Oo,e(this.setOnline.bind(this)))}setOnline(e){j(this,Tl)!==e&&(Se(this,Tl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return j(this,Tl)}},Tl=new WeakMap,Oo=new WeakMap,Ol=new WeakMap,xT),Xp=new BF;function tb(){let n,e;const t=new Promise((a,i)=>{n=a,e=i});t.status="pending",t.catch(()=>{});function r(a){Object.assign(t,a),delete t.resolve,delete t.reject}return t.resolve=a=>{r({status:"fulfilled",value:a}),n(a)},t.reject=a=>{r({status:"rejected",reason:a}),e(a)},t}function zF(n){return Math.min(1e3*2**n,3e4)}function _O(n){return(n??"online")==="online"?Xp.isOnline():!0}var EO=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Hy(n){return n instanceof EO}function SO(n){let e=!1,t=0,r=!1,a;const i=tb(),o=x=>{var w;r||(v(new EO(x)),(w=n.abort)==null||w.call(n))},u=()=>{e=!0},c=()=>{e=!1},f=()=>Dx.isFocused()&&(n.networkMode==="always"||Xp.isOnline())&&n.canRun(),d=()=>_O(n.networkMode)&&n.canRun(),p=x=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,x),a==null||a(),i.resolve(x))},v=x=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,x),a==null||a(),i.reject(x))},g=()=>new Promise(x=>{var w;a=_=>{(r||f())&&x(_)},(w=n.onPause)==null||w.call(n)}).then(()=>{var x;a=void 0,r||(x=n.onContinue)==null||x.call(n)}),y=()=>{if(r)return;let x;const w=t===0?n.initialPromise:void 0;try{x=w??n.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(p).catch(_=>{var O;if(r)return;const S=n.retry??(Gs?0:3),C=n.retryDelay??zF,R=typeof C=="function"?C(t,_):C,T=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,_);if(e||!T){v(_);return}t++,(O=n.onFail)==null||O.call(n,t,_),MF(R).then(()=>f()?void 0:g()).then(()=>{e?v(_):y()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?y():g().then(y),i)}}var UF=n=>setTimeout(n,0);function VF(){let n=[],e=0,t=u=>{u()},r=u=>{u()},a=UF;const i=u=>{e?n.push(u):a(()=>{t(u)})},o=()=>{const u=n;n=[],u.length&&a(()=>{r(()=>{u.forEach(c=>{t(c)})})})};return{batch:u=>{let c;e++;try{c=u()}finally{e--,e||o()}return c},batchCalls:u=>(...c)=>{i(()=>{u(...c)})},schedule:i,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{a=u}}}var mn=VF(),Is,wT,CO=(wT=class{constructor(){Ue(this,Is)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Z0(this.gcTime)&&Se(this,Is,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Gs?1/0:5*60*1e3))}clearGcTimeout(){j(this,Is)&&(clearTimeout(j(this,Is)),Se(this,Is,void 0))}},Is=new WeakMap,wT),Al,kl,Qr,Ms,Gn,wh,Fs,ua,Ei,_T,jF=(_T=class extends CO{constructor(e){super();Ue(this,ua);Ue(this,Al);Ue(this,kl);Ue(this,Qr);Ue(this,Ms);Ue(this,Gn);Ue(this,wh);Ue(this,Fs);Se(this,Fs,!1),Se(this,wh,e.defaultOptions),this.setOptions(e.options),this.observers=[],Se(this,Ms,e.client),Se(this,Qr,j(this,Ms).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Se(this,Al,qF(this.options)),this.state=e.state??j(this,Al),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=j(this,Gn))==null?void 0:e.promise}setOptions(e){this.options={...j(this,wh),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,Qr).remove(this)}setData(e,t){const r=eb(this.state.data,e,this.options);return tt(this,ua,Ei).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){tt(this,ua,Ei).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,a;const t=(r=j(this,Gn))==null?void 0:r.promise;return(a=j(this,Gn))==null||a.cancel(e),t?t.then($r).catch($r):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,Al))}isActive(){return this.observers.some(e=>ca(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!bO(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=j(this,Gn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=j(this,Gn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),j(this,Qr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(j(this,Gn)&&(j(this,Fs)?j(this,Gn).cancel({revert:!0}):j(this,Gn).cancelRetry()),this.scheduleGc()),j(this,Qr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,ua,Ei).call(this,{type:"invalidate"})}fetch(e,t){var c,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(j(this,Gn))return j(this,Gn).continueRetry(),j(this,Gn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(v=>v.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,a=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Se(this,Fs,!0),r.signal)})},i=()=>{const p=wO(this.options,t),v={client:j(this,Ms),queryKey:this.queryKey,meta:this.meta};return a(v),Se(this,Fs,!1),this.options.persister?this.options.persister(p,v,this):p(v)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:j(this,Ms),state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),Se(this,kl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=o.fetchOptions)==null?void 0:f.meta))&&tt(this,ua,Ei).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const u=p=>{var v,g,y,x;Hy(p)&&p.silent||tt(this,ua,Ei).call(this,{type:"error",error:p}),Hy(p)||((g=(v=j(this,Qr).config).onError)==null||g.call(v,p,this),(x=(y=j(this,Qr).config).onSettled)==null||x.call(y,this.state.data,p,this)),this.scheduleGc()};return Se(this,Gn,SO({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var v,g,y,x;if(p===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(w){u(w);return}(g=(v=j(this,Qr).config).onSuccess)==null||g.call(v,p,this),(x=(y=j(this,Qr).config).onSettled)==null||x.call(y,p,this.state.error,this),this.scheduleGc()},onError:u,onFail:(p,v)=>{tt(this,ua,Ei).call(this,{type:"failed",failureCount:p,error:v})},onPause:()=>{tt(this,ua,Ei).call(this,{type:"pause"})},onContinue:()=>{tt(this,ua,Ei).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),j(this,Gn).start()}},Al=new WeakMap,kl=new WeakMap,Qr=new WeakMap,Ms=new WeakMap,Gn=new WeakMap,wh=new WeakMap,Fs=new WeakMap,ua=new WeakSet,Ei=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...RO(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return Hy(a)&&a.revert&&j(this,kl)?{...j(this,kl),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),mn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),j(this,Qr).notify({query:this,type:"updated",action:e})})},_T);function RO(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_O(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function qF(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ia,ET,WF=(ET=class extends ic{constructor(e={}){super();Ue(this,Ia);this.config=e,Se(this,Ia,new Map)}build(e,t,r){const a=t.queryKey,i=t.queryHash??Ax(a,t);let o=this.get(i);return o||(o=new jF({client:e,queryKey:a,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){j(this,Ia).has(e.queryHash)||(j(this,Ia).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=j(this,Ia).get(e.queryHash);t&&(e.destroy(),t===e&&j(this,Ia).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return j(this,Ia).get(e)}getAll(){return[...j(this,Ia).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>k2(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>k2(e,r)):t}notify(e){mn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){mn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ia=new WeakMap,ET),Ma,tr,Ps,Fa,wo,ST,HF=(ST=class extends CO{constructor(e){super();Ue(this,Fa);Ue(this,Ma);Ue(this,tr);Ue(this,Ps);this.mutationId=e.mutationId,Se(this,tr,e.mutationCache),Se(this,Ma,[]),this.state=e.state||TO(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){j(this,Ma).includes(e)||(j(this,Ma).push(e),this.clearGcTimeout(),j(this,tr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Se(this,Ma,j(this,Ma).filter(t=>t!==e)),this.scheduleGc(),j(this,tr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){j(this,Ma).length||(this.state.status==="pending"?this.scheduleGc():j(this,tr).remove(this))}continue(){var e;return((e=j(this,Ps))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,k;Se(this,Ps,SO({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(D,N)=>{tt(this,Fa,wo).call(this,{type:"failed",failureCount:D,error:N})},onPause:()=>{tt(this,Fa,wo).call(this,{type:"pause"})},onContinue:()=>{tt(this,Fa,wo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,tr).canRun(this)}));const t=this.state.status==="pending",r=!j(this,Ps).canStart();try{if(!t){tt(this,Fa,wo).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(a=j(this,tr).config).onMutate)==null?void 0:i.call(a,e,this));const N=await((u=(o=this.options).onMutate)==null?void 0:u.call(o,e));N!==this.state.context&&tt(this,Fa,wo).call(this,{type:"pending",context:N,variables:e,isPaused:r})}const D=await j(this,Ps).start();return await((f=(c=j(this,tr).config).onSuccess)==null?void 0:f.call(c,D,e,this.state.context,this)),await((p=(d=this.options).onSuccess)==null?void 0:p.call(d,D,e,this.state.context)),await((g=(v=j(this,tr).config).onSettled)==null?void 0:g.call(v,D,null,this.state.variables,this.state.context,this)),await((x=(y=this.options).onSettled)==null?void 0:x.call(y,D,null,e,this.state.context)),tt(this,Fa,wo).call(this,{type:"success",data:D}),D}catch(D){try{throw await((_=(w=j(this,tr).config).onError)==null?void 0:_.call(w,D,e,this.state.context,this)),await((C=(S=this.options).onError)==null?void 0:C.call(S,D,e,this.state.context)),await((T=(R=j(this,tr).config).onSettled)==null?void 0:T.call(R,void 0,D,this.state.variables,this.state.context,this)),await((k=(O=this.options).onSettled)==null?void 0:k.call(O,void 0,D,e,this.state.context)),D}finally{tt(this,Fa,wo).call(this,{type:"error",error:D})}}finally{j(this,tr).runNext(this)}}},Ma=new WeakMap,tr=new WeakMap,Ps=new WeakMap,Fa=new WeakSet,wo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),mn.batch(()=>{j(this,Ma).forEach(r=>{r.onMutationUpdate(e)}),j(this,tr).notify({mutation:this,type:"updated",action:e})})},ST);function TO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Oi,la,_h,CT,GF=(CT=class extends ic{constructor(e={}){super();Ue(this,Oi);Ue(this,la);Ue(this,_h);this.config=e,Se(this,Oi,new Set),Se(this,la,new Map),Se(this,_h,0)}build(e,t,r){const a=new HF({mutationCache:this,mutationId:++ep(this,_h)._,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){j(this,Oi).add(e);const t=ap(e);if(typeof t=="string"){const r=j(this,la).get(t);r?r.push(e):j(this,la).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(j(this,Oi).delete(e)){const t=ap(e);if(typeof t=="string"){const r=j(this,la).get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&j(this,la).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ap(e);if(typeof t=="string"){const r=j(this,la).get(t),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const t=ap(e);if(typeof t=="string"){const a=(r=j(this,la).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){mn.batch(()=>{j(this,Oi).forEach(e=>{this.notify({type:"removed",mutation:e})}),j(this,Oi).clear(),j(this,la).clear()})}getAll(){return Array.from(j(this,Oi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>D2(t,r))}findAll(e={}){return this.getAll().filter(t=>D2(e,t))}notify(e){mn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return mn.batch(()=>Promise.all(e.map(t=>t.continue().catch($r))))}},Oi=new WeakMap,la=new WeakMap,_h=new WeakMap,CT);function ap(n){var e;return(e=n.options.scope)==null?void 0:e.id}function M2(n){return{onFetch:(e,t)=>{var d,p,v,g,y;const r=e.options,a=(v=(p=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:p.fetchMore)==null?void 0:v.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let u={pages:[],pageParams:[]},c=0;const f=async()=>{let x=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},_=wO(e.options,e.fetchOptions),S=async(C,R,T)=>{if(x)return Promise.reject();if(R==null&&C.pages.length)return Promise.resolve(C);const O={client:e.client,queryKey:e.queryKey,pageParam:R,direction:T?"backward":"forward",meta:e.options.meta};w(O);const k=await _(O),{maxPages:D}=e.options,N=T?PF:FF;return{pages:N(C.pages,k,D),pageParams:N(C.pageParams,R,D)}};if(a&&i.length){const C=a==="backward",R=C?QF:F2,T={pages:i,pageParams:o},O=R(r,T);u=await S(T,O,C)}else{const C=n??i.length;do{const R=c===0?o[0]??r.initialPageParam:F2(r,u);if(c>0&&R==null)break;u=await S(u,R),c++}while(c<C)}return u};e.options.persister?e.fetchFn=()=>{var x,w;return(w=(x=e.options).persister)==null?void 0:w.call(x,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=f}}}function F2(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function QF(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Yt,Ao,ko,Dl,Nl,Do,Il,Ml,RT,G9=(RT=class{constructor(n={}){Ue(this,Yt);Ue(this,Ao);Ue(this,ko);Ue(this,Dl);Ue(this,Nl);Ue(this,Do);Ue(this,Il);Ue(this,Ml);Se(this,Yt,n.queryCache||new WF),Se(this,Ao,n.mutationCache||new GF),Se(this,ko,n.defaultOptions||{}),Se(this,Dl,new Map),Se(this,Nl,new Map),Se(this,Do,0)}mount(){ep(this,Do)._++,j(this,Do)===1&&(Se(this,Il,Dx.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,Yt).onFocus())})),Se(this,Ml,Xp.subscribe(async n=>{n&&(await this.resumePausedMutations(),j(this,Yt).onOnline())})))}unmount(){var n,e;ep(this,Do)._--,j(this,Do)===0&&((n=j(this,Il))==null||n.call(this),Se(this,Il,void 0),(e=j(this,Ml))==null||e.call(this),Se(this,Ml,void 0))}isFetching(n){return j(this,Yt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return j(this,Ao).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,Yt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=j(this,Yt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(pl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return j(this,Yt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),a=j(this,Yt).get(r.queryHash),i=a==null?void 0:a.state.data,o=IF(e,i);if(o!==void 0)return j(this,Yt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return mn.batch(()=>j(this,Yt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=j(this,Yt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=j(this,Yt);mn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=j(this,Yt);return mn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=mn.batch(()=>j(this,Yt).findAll(n).map(a=>a.cancel(t)));return Promise.all(r).then($r).catch($r)}invalidateQueries(n,e={}){return mn.batch(()=>(j(this,Yt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=mn.batch(()=>j(this,Yt).findAll(n).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,t);return t.throwOnError||(i=i.catch($r)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then($r)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=j(this,Yt).build(this,e);return t.isStaleByTime(pl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then($r).catch($r)}fetchInfiniteQuery(n){return n.behavior=M2(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then($r).catch($r)}ensureInfiniteQueryData(n){return n.behavior=M2(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Xp.isOnline()?j(this,Ao).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,Yt)}getMutationCache(){return j(this,Ao)}getDefaultOptions(){return j(this,ko)}setDefaultOptions(n){Se(this,ko,n)}setQueryDefaults(n,e){j(this,Dl).set(Qs(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...j(this,Dl).values()],t={};return e.forEach(r=>{Wf(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){j(this,Nl).set(Qs(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...j(this,Nl).values()],t={};return e.forEach(r=>{Wf(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...j(this,ko).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Ax(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===kx&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...j(this,ko).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){j(this,Yt).clear(),j(this,Ao).clear()}},Yt=new WeakMap,Ao=new WeakMap,ko=new WeakMap,Dl=new WeakMap,Nl=new WeakMap,Do=new WeakMap,Il=new WeakMap,Ml=new WeakMap,RT),hr,ht,Eh,nr,Ls,Fl,No,Pa,Sh,Pl,Ll,Bs,zs,Io,Bl,Ct,Cf,nb,rb,ab,ib,ob,sb,ub,OO,TT,$F=(TT=class extends ic{constructor(e,t){super();Ue(this,Ct);Ue(this,hr);Ue(this,ht);Ue(this,Eh);Ue(this,nr);Ue(this,Ls);Ue(this,Fl);Ue(this,No);Ue(this,Pa);Ue(this,Sh);Ue(this,Pl);Ue(this,Ll);Ue(this,Bs);Ue(this,zs);Ue(this,Io);Ue(this,Bl,new Set);this.options=t,Se(this,hr,e),Se(this,Pa,null),Se(this,No,tb()),this.options.experimental_prefetchInRender||j(this,No).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(j(this,ht).addObserver(this),P2(j(this,ht),this.options)?tt(this,Ct,Cf).call(this):this.updateResult(),tt(this,Ct,ib).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lb(j(this,ht),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lb(j(this,ht),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,Ct,ob).call(this),tt(this,Ct,sb).call(this),j(this,ht).removeObserver(this)}setOptions(e){const t=this.options,r=j(this,ht);if(this.options=j(this,hr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ca(this.options.enabled,j(this,ht))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,Ct,ub).call(this),j(this,ht).setOptions(this.options),t._defaulted&&!Kp(this.options,t)&&j(this,hr).getQueryCache().notify({type:"observerOptionsUpdated",query:j(this,ht),observer:this});const a=this.hasListeners();a&&L2(j(this,ht),r,this.options,t)&&tt(this,Ct,Cf).call(this),this.updateResult(),a&&(j(this,ht)!==r||ca(this.options.enabled,j(this,ht))!==ca(t.enabled,j(this,ht))||pl(this.options.staleTime,j(this,ht))!==pl(t.staleTime,j(this,ht)))&&tt(this,Ct,nb).call(this);const i=tt(this,Ct,rb).call(this);a&&(j(this,ht)!==r||ca(this.options.enabled,j(this,ht))!==ca(t.enabled,j(this,ht))||i!==j(this,Io))&&tt(this,Ct,ab).call(this,i)}getOptimisticResult(e){const t=j(this,hr).getQueryCache().build(j(this,hr),e),r=this.createResult(t,e);return XF(this,r)&&(Se(this,nr,r),Se(this,Fl,this.options),Se(this,Ls,j(this,ht).state)),r}getCurrentResult(){return j(this,nr)}trackResult(e,t){const r={};return Object.keys(e).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t==null||t(a),e[a])})}),r}trackProp(e){j(this,Bl).add(e)}getCurrentQuery(){return j(this,ht)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=j(this,hr).defaultQueryOptions(e),r=j(this,hr).getQueryCache().build(j(this,hr),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return tt(this,Ct,Cf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),j(this,nr)))}createResult(e,t){var D;const r=j(this,ht),a=this.options,i=j(this,nr),o=j(this,Ls),u=j(this,Fl),f=e!==r?e.state:j(this,Eh),{state:d}=e;let p={...d},v=!1,g;if(t._optimisticResults){const N=this.hasListeners(),M=!N&&P2(e,t),B=N&&L2(e,r,t,a);(M||B)&&(p={...p,...RO(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:w}=p;if(t.select&&p.data!==void 0)if(i&&p.data===(o==null?void 0:o.data)&&t.select===j(this,Sh))g=j(this,Pl);else try{Se(this,Sh,t.select),g=t.select(p.data),g=eb(i==null?void 0:i.data,g,t),Se(this,Pl,g),Se(this,Pa,null)}catch(N){Se(this,Pa,N)}else g=p.data;if(t.placeholderData!==void 0&&g===void 0&&w==="pending"){let N;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData))N=i.data;else if(N=typeof t.placeholderData=="function"?t.placeholderData((D=j(this,Ll))==null?void 0:D.state.data,j(this,Ll)):t.placeholderData,t.select&&N!==void 0)try{N=t.select(N),Se(this,Pa,null)}catch(M){Se(this,Pa,M)}N!==void 0&&(w="success",g=eb(i==null?void 0:i.data,N,t),v=!0)}j(this,Pa)&&(y=j(this,Pa),g=j(this,Pl),x=Date.now(),w="error");const _=p.fetchStatus==="fetching",S=w==="pending",C=w==="error",R=S&&_,T=g!==void 0,k={status:w,fetchStatus:p.fetchStatus,isPending:S,isSuccess:w==="success",isError:C,isInitialLoading:R,isLoading:R,data:g,dataUpdatedAt:p.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:_,isRefetching:_&&!S,isLoadingError:C&&!T,isPaused:p.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:C&&T,isStale:Nx(e,t),refetch:this.refetch,promise:j(this,No)};if(this.options.experimental_prefetchInRender){const N=z=>{k.status==="error"?z.reject(k.error):k.data!==void 0&&z.resolve(k.data)},M=()=>{const z=Se(this,No,k.promise=tb());N(z)},B=j(this,No);switch(B.status){case"pending":e.queryHash===r.queryHash&&N(B);break;case"fulfilled":(k.status==="error"||k.data!==B.value)&&M();break;case"rejected":(k.status!=="error"||k.error!==B.reason)&&M();break}}return k}updateResult(){const e=j(this,nr),t=this.createResult(j(this,ht),this.options);if(Se(this,Ls,j(this,ht).state),Se(this,Fl,this.options),j(this,Ls).data!==void 0&&Se(this,Ll,j(this,ht)),Kp(t,e))return;Se(this,nr,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!j(this,Bl).size)return!0;const o=new Set(i??j(this,Bl));return this.options.throwOnError&&o.add("error"),Object.keys(j(this,nr)).some(u=>{const c=u;return j(this,nr)[c]!==e[c]&&o.has(c)})};tt(this,Ct,OO).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,Ct,ib).call(this)}},hr=new WeakMap,ht=new WeakMap,Eh=new WeakMap,nr=new WeakMap,Ls=new WeakMap,Fl=new WeakMap,No=new WeakMap,Pa=new WeakMap,Sh=new WeakMap,Pl=new WeakMap,Ll=new WeakMap,Bs=new WeakMap,zs=new WeakMap,Io=new WeakMap,Bl=new WeakMap,Ct=new WeakSet,Cf=function(e){tt(this,Ct,ub).call(this);let t=j(this,ht).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch($r)),t},nb=function(){tt(this,Ct,ob).call(this);const e=pl(this.options.staleTime,j(this,ht));if(Gs||j(this,nr).isStale||!Z0(e))return;const r=bO(j(this,nr).dataUpdatedAt,e)+1;Se(this,Bs,setTimeout(()=>{j(this,nr).isStale||this.updateResult()},r))},rb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(j(this,ht)):this.options.refetchInterval)??!1},ab=function(e){tt(this,Ct,sb).call(this),Se(this,Io,e),!(Gs||ca(this.options.enabled,j(this,ht))===!1||!Z0(j(this,Io))||j(this,Io)===0)&&Se(this,zs,setInterval(()=>{(this.options.refetchIntervalInBackground||Dx.isFocused())&&tt(this,Ct,Cf).call(this)},j(this,Io)))},ib=function(){tt(this,Ct,nb).call(this),tt(this,Ct,ab).call(this,tt(this,Ct,rb).call(this))},ob=function(){j(this,Bs)&&(clearTimeout(j(this,Bs)),Se(this,Bs,void 0))},sb=function(){j(this,zs)&&(clearInterval(j(this,zs)),Se(this,zs,void 0))},ub=function(){const e=j(this,hr).getQueryCache().build(j(this,hr),this.options);if(e===j(this,ht))return;const t=j(this,ht);Se(this,ht,e),Se(this,Eh,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},OO=function(e){mn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(j(this,nr))}),j(this,hr).getQueryCache().notify({query:j(this,ht),type:"observerResultsUpdated"})})},TT);function KF(n,e){return ca(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function P2(n,e){return KF(n,e)||n.state.data!==void 0&&lb(n,e,e.refetchOnMount)}function lb(n,e,t){if(ca(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Nx(n,e)}return!1}function L2(n,e,t,r){return(n!==e||ca(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&Nx(n,t)}function Nx(n,e){return ca(e.enabled,n)!==!1&&n.isStaleByTime(pl(e.staleTime,n))}function XF(n,e){return!Kp(n.getCurrentResult(),e)}var Mo,Fo,dr,Ai,Ni,Ip,cb,OT,YF=(OT=class extends ic{constructor(t,r){super();Ue(this,Ni);Ue(this,Mo);Ue(this,Fo);Ue(this,dr);Ue(this,Ai);Se(this,Mo,t),this.setOptions(r),this.bindMethods(),tt(this,Ni,Ip).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const r=this.options;this.options=j(this,Mo).defaultMutationOptions(t),Kp(this.options,r)||j(this,Mo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:j(this,dr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Qs(r.mutationKey)!==Qs(this.options.mutationKey)?this.reset():((a=j(this,dr))==null?void 0:a.state.status)==="pending"&&j(this,dr).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=j(this,dr))==null||t.removeObserver(this)}onMutationUpdate(t){tt(this,Ni,Ip).call(this),tt(this,Ni,cb).call(this,t)}getCurrentResult(){return j(this,Fo)}reset(){var t;(t=j(this,dr))==null||t.removeObserver(this),Se(this,dr,void 0),tt(this,Ni,Ip).call(this),tt(this,Ni,cb).call(this)}mutate(t,r){var a;return Se(this,Ai,r),(a=j(this,dr))==null||a.removeObserver(this),Se(this,dr,j(this,Mo).getMutationCache().build(j(this,Mo),this.options)),j(this,dr).addObserver(this),j(this,dr).execute(t)}},Mo=new WeakMap,Fo=new WeakMap,dr=new WeakMap,Ai=new WeakMap,Ni=new WeakSet,Ip=function(){var r;const t=((r=j(this,dr))==null?void 0:r.state)??TO();Se(this,Fo,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},cb=function(t){mn.batch(()=>{var r,a,i,o,u,c,f,d;if(j(this,Ai)&&this.hasListeners()){const p=j(this,Fo).variables,v=j(this,Fo).context;(t==null?void 0:t.type)==="success"?((a=(r=j(this,Ai)).onSuccess)==null||a.call(r,t.data,p,v),(o=(i=j(this,Ai)).onSettled)==null||o.call(i,t.data,null,p,v)):(t==null?void 0:t.type)==="error"&&((c=(u=j(this,Ai)).onError)==null||c.call(u,t.error,p,v),(d=(f=j(this,Ai)).onSettled)==null||d.call(f,void 0,t.error,p,v))}this.listeners.forEach(p=>{p(j(this,Fo))})})},OT),AO=J.createContext(void 0),kO=n=>{const e=J.useContext(AO);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},$9=({client:n,children:e})=>(J.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),e3.jsx(AO.Provider,{value:n,children:e})),DO=J.createContext(!1),ZF=()=>J.useContext(DO);DO.Provider;function JF(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var eP=J.createContext(JF()),tP=()=>J.useContext(eP);function NO(n,e){return typeof n=="function"?n(...e):!!n}function fb(){}var nP=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},rP=n=>{J.useEffect(()=>{n.clearReset()},[n])},aP=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:a})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(a&&n.data===void 0||NO(t,[n.error,r])),iP=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},oP=(n,e)=>n.isLoading&&n.isFetching&&!e,sP=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,B2=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function uP(n,e,t){var p,v,g,y,x;const r=kO(),a=ZF(),i=tP(),o=r.defaultQueryOptions(n);(v=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||v.call(p,o),o._optimisticResults=a?"isRestoring":"optimistic",iP(o),nP(o,i),rP(i);const u=!r.getQueryCache().get(o.queryHash),[c]=J.useState(()=>new e(r,o)),f=c.getOptimisticResult(o),d=!a&&n.subscribed!==!1;if(J.useSyncExternalStore(J.useCallback(w=>{const _=d?c.subscribe(mn.batchCalls(w)):fb;return c.updateResult(),_},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),J.useEffect(()=>{c.setOptions(o)},[o,c]),sP(o,f))throw B2(o,c,i);if(aP({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw f.error;if((y=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||y.call(g,o,f),o.experimental_prefetchInRender&&!Gs&&oP(f,a)){const w=u?B2(o,c,i):(x=r.getQueryCache().get(o.queryHash))==null?void 0:x.promise;w==null||w.catch(fb).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?f:c.trackResult(f)}function K9(n,e){return uP(n,$F)}function X9(n,e){const t=kO(),[r]=J.useState(()=>new YF(t,n));J.useEffect(()=>{r.setOptions(n)},[r,n]);const a=J.useSyncExternalStore(J.useCallback(o=>r.subscribe(mn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=J.useCallback((o,u)=>{r.mutate(o,u).catch(fb)},[r]);if(a.error&&NO(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}var Y9=function(){return null};const lP=(n,e,t,r)=>{var i,o,u,c;const a=[t,{code:e,...r||{}}];if((o=(i=n==null?void 0:n.services)==null?void 0:i.logger)!=null&&o.forward)return n.services.logger.forward(a,"warn","react-i18next::",!0);Vs(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(c=(u=n==null?void 0:n.services)==null?void 0:u.logger)!=null&&c.warn?n.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},z2={},hb=(n,e,t,r)=>{Vs(t)&&z2[t]||(Vs(t)&&(z2[t]=new Date),lP(n,e,t,r))},IO=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},db=(n,e,t)=>{n.loadNamespaces(e,IO(n,t))},U2=(n,e,t,r)=>{if(Vs(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return db(n,t,r);t.forEach(a=>{n.options.ns.indexOf(a)<0&&n.options.ns.push(a)}),n.loadLanguages(e,IO(n,r))},cP=(n,e,t={})=>!e.languages||!e.languages.length?(hb(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,a)=>{var i;if(((i=t.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,n))return!1}}),Vs=n=>typeof n=="string",fP=n=>typeof n=="object"&&n!==null,hP=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dP={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},pP=n=>dP[n],vP=n=>n.replace(hP,pP);let pb={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:vP};const mP=(n={})=>{pb={...pb,...n}},gP=()=>pb;let MO;const yP=n=>{MO=n},bP=()=>MO,Z9={type:"3rdParty",init(n){mP(n.options.react),yP(n)}},FO=J.createContext();class xP{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const wP=(n,e)=>{const t=J.useRef();return J.useEffect(()=>{t.current=n},[n,e]),t.current},PO=(n,e,t,r)=>n.getFixedT(e,t,r),_P=(n,e,t,r)=>J.useCallback(PO(n,e,t,r),[n,e,t,r]),J9=(n,e={})=>{var R,T,O,k;const{i18n:t}=e,{i18n:r,defaultNS:a}=J.useContext(FO)||{},i=t||r||bP();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new xP),!i){hb(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const D=(M,B)=>Vs(B)?B:fP(B)&&Vs(B.defaultValue)?B.defaultValue:Array.isArray(M)?M[M.length-1]:M,N=[D,{},!1];return N.t=D,N.i18n={},N.ready=!1,N}(R=i.options.react)!=null&&R.wait&&hb(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...gP(),...i.options.react,...e},{useSuspense:u,keyPrefix:c}=o;let f=a||((T=i.options)==null?void 0:T.defaultNS);f=Vs(f)?[f]:f||["translation"],(k=(O=i.reportNamespaces).addUsedNamespaces)==null||k.call(O,f);const d=(i.isInitialized||i.initializedStoreOnce)&&f.every(D=>cP(D,i,o)),p=_P(i,e.lng||null,o.nsMode==="fallback"?f:f[0],c),v=()=>p,g=()=>PO(i,e.lng||null,o.nsMode==="fallback"?f:f[0],c),[y,x]=J.useState(v);let w=f.join();e.lng&&(w=`${e.lng}${w}`);const _=wP(w),S=J.useRef(!0);J.useEffect(()=>{const{bindI18n:D,bindI18nStore:N}=o;S.current=!0,!d&&!u&&(e.lng?U2(i,e.lng,f,()=>{S.current&&x(g)}):db(i,f,()=>{S.current&&x(g)})),d&&_&&_!==w&&S.current&&x(g);const M=()=>{S.current&&x(g)};return D&&(i==null||i.on(D,M)),N&&(i==null||i.store.on(N,M)),()=>{S.current=!1,i&&(D==null||D.split(" ").forEach(B=>i.off(B,M))),N&&i&&N.split(" ").forEach(B=>i.store.off(B,M))}},[i,w]),J.useEffect(()=>{S.current&&d&&x(v)},[i,c,d]);const C=[y,i,d];if(C.t=y,C.i18n=i,C.ready=d,d||!d&&!u)return C;throw new Promise(D=>{e.lng?U2(i,e.lng,f,()=>D()):db(i,f,()=>D())})};function e7({i18n:n,defaultNS:e,children:t}){const r=J.useMemo(()=>({i18n:n,defaultNS:e}),[n,e]);return J.createElement(FO.Provider,{value:r},t)}function EP(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Yp(){return Yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yp.apply(null,arguments)}function vb(n,e){return vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},vb(n,e)}function SP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,vb(n,e)}var mb=function(n,e){return mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},mb(n,e)};function ti(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");mb(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var K=function(){return K=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},K.apply(this,arguments)};function ma(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t}function Eo(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?i(d.value):a(d.value).then(u,c)}f((r=r.apply(n,e||[])).next())})}function So(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=u(0),o.throw=u(1),o.return=u(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function gn(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var ip={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var V2;function CP(){if(V2)return ip;V2=1;var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;ip.format=o,ip.parse=u;function o(p){if(!p||typeof p!="object")throw new TypeError("argument obj is required");var v=p.parameters,g=p.type;if(!g||!i.test(g))throw new TypeError("invalid type");var y=g;if(v&&typeof v=="object")for(var x,w=Object.keys(v).sort(),_=0;_<w.length;_++){if(x=w[_],!t.test(x))throw new TypeError("invalid parameter name");y+="; "+x+"="+f(v[x])}return y}function u(p){if(!p)throw new TypeError("argument string is required");var v=typeof p=="object"?c(p):p;if(typeof v!="string")throw new TypeError("argument string is required to be a string");var g=v.indexOf(";"),y=g!==-1?v.slice(0,g).trim():v.trim();if(!i.test(y))throw new TypeError("invalid media type");var x=new d(y.toLowerCase());if(g!==-1){var w,_,S;for(n.lastIndex=g;_=n.exec(v);){if(_.index!==g)throw new TypeError("invalid parameter format");g+=_[0].length,w=_[1].toLowerCase(),S=_[2],S.charCodeAt(0)===34&&(S=S.slice(1,-1),S.indexOf("\\")!==-1&&(S=S.replace(r,"$1"))),x.parameters[w]=S}if(g!==v.length)throw new TypeError("invalid parameter format")}return x}function c(p){var v;if(typeof p.getHeader=="function"?v=p.getHeader("content-type"):typeof p.headers=="object"&&(v=p.headers&&p.headers["content-type"]),typeof v!="string")throw new TypeError("content-type header is missing from object");return v}function f(p){var v=String(p);if(t.test(v))return v;if(v.length>0&&!e.test(v))throw new TypeError("invalid parameter value");return'"'+v.replace(a,"\\$1")+'"'}function d(p){this.parameters=Object.create(null),this.type=p}return ip}var RP=CP(),Ju=new Map,LO=function(e){return e.cloneNode(!0)},j2=function(){return window.location.protocol==="file:"},BO=function(e,t,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&a.readyState===2){var i=a.getResponseHeader("Content-Type");if(!i)throw new Error("Content type not found");var o=RP.parse(i).type;if(!(o==="image/svg+xml"||o==="text/plain"))throw new Error("Invalid content type: ".concat(o))}if(a.readyState===4){if(a.status===404||a.responseXML===null)throw new Error(j2()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(a.status===200||j2()&&a.status===0)r(null,a);else throw new Error("There was a problem injecting the SVG: "+a.status+" "+a.statusText)}}catch(u){if(a.abort(),u instanceof Error)r(u,a);else throw u}},a.open("GET",e),a.withCredentials=t,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.send()},Ro={},q2=function(e,t){Ro[e]=Ro[e]||[],Ro[e].push(t)},TP=function(e){for(var t=function(o,u){setTimeout(function(){if(Array.isArray(Ro[e])){var c=Ju.get(e),f=Ro[e][o];c instanceof SVGSVGElement&&f(null,LO(c)),c instanceof Error&&f(c),o===Ro[e].length-1&&delete Ro[e]}},0)},r=0,a=Ro[e].length;r<a;r++)t(r)},OP=function(e,t,r){if(Ju.has(e)){var a=Ju.get(e);if(a===void 0){q2(e,r);return}if(a instanceof SVGSVGElement){r(null,LO(a));return}}Ju.set(e,void 0),q2(e,r),BO(e,t,function(i,o){var u;i?Ju.set(e,i):((u=o.responseXML)===null||u===void 0?void 0:u.documentElement)instanceof SVGSVGElement&&Ju.set(e,o.responseXML.documentElement),TP(e)})},AP=function(e,t,r){BO(e,t,function(a,i){var o;a?r(a):((o=i.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&r(null,i.responseXML.documentElement)})},kP=0,DP=function(){return++kP},ka=[],W2={},NP="http://www.w3.org/2000/svg",Gy="http://www.w3.org/1999/xlink",H2=function(e,t,r,a,i,o,u){var c=e.getAttribute("data-src")||e.getAttribute("src");if(!c){u(new Error("Invalid data-src or src attribute"));return}if(ka.indexOf(e)!==-1){ka.splice(ka.indexOf(e),1),e=null;return}ka.push(e),e.setAttribute("src","");var f=a?OP:AP;f(c,i,function(d,p){if(!p){ka.splice(ka.indexOf(e),1),e=null,u(d);return}var v=e.getAttribute("id");v&&p.setAttribute("id",v);var g=e.getAttribute("title");g&&p.setAttribute("title",g);var y=e.getAttribute("width");y&&p.setAttribute("width",y);var x=e.getAttribute("height");x&&p.setAttribute("height",x);var w=Array.from(new Set(gn(gn(gn([],(p.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();p.setAttribute("class",w);var _=e.getAttribute("style");_&&p.setAttribute("style",_),p.setAttribute("data-src",c);var S=[].filter.call(e.attributes,function($){return/^data-\w[\w-]*$/.test($.name)});if(Array.prototype.forEach.call(S,function($){$.name&&$.value&&p.setAttribute($.name,$.value)}),r){var C={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},R,T,O,k,D;Object.keys(C).forEach(function($){R=$,O=C[$],T=p.querySelectorAll(R+"[id]");for(var Y=function(ue,me){k=T[ue].id,D=k+"-"+DP();var be;Array.prototype.forEach.call(O,function(at){be=p.querySelectorAll("["+at+'*="'+k+'"]');for(var xt=0,It=be.length;xt<It;xt++){var At=be[xt].getAttribute(at);At&&!At.match(new RegExp('url\\("?#'+k+'"?\\)'))||be[xt].setAttribute(at,"url(#"+D+")")}});for(var ye=p.querySelectorAll("[*|href]"),Le=[],Ee=0,ze=ye.length;Ee<ze;Ee++){var gt=ye[Ee].getAttributeNS(Gy,"href");gt&&gt.toString()==="#"+T[ue].id&&Le.push(ye[Ee])}for(var qe=0,Ye=Le.length;qe<Ye;qe++)Le[qe].setAttributeNS(Gy,"href","#"+D);T[ue].id=D},F=0,Q=T.length;F<Q;F++)Y(F)})}p.removeAttribute("xmlns:a");for(var N=p.querySelectorAll("script"),M=[],B,z,ee=0,re=N.length;ee<re;ee++)z=N[ee].getAttribute("type"),(!z||z==="application/ecmascript"||z==="application/javascript"||z==="text/javascript")&&(B=N[ee].innerText||N[ee].textContent,B&&M.push(B),p.removeChild(N[ee]));if(M.length>0&&(t==="always"||t==="once"&&!W2[c])){for(var te=0,U=M.length;te<U;te++)new Function(M[te])(window);W2[c]=!0}var H=p.querySelectorAll("style");if(Array.prototype.forEach.call(H,function($){$.textContent+=""}),p.setAttribute("xmlns",NP),p.setAttribute("xmlns:xlink",Gy),o(p),!e.parentNode){ka.splice(ka.indexOf(e),1),e=null,u(new Error("Parent node is null"));return}e.parentNode.replaceChild(p,e),ka.splice(ka.indexOf(e),1),e=null,u(null,p)})},IP=function(e,t){var r=t===void 0?{}:t,a=r.afterAll,i=a===void 0?function(){}:a,o=r.afterEach,u=o===void 0?function(){}:o,c=r.beforeEach,f=c===void 0?function(){}:c,d=r.cacheRequests,p=d===void 0?!0:d,v=r.evalScripts,g=v===void 0?"never":v,y=r.httpRequestWithCredentials,x=y===void 0?!1:y,w=r.renumerateIRIElements,_=w===void 0?!0:w;if(e&&"length"in e)for(var S=0,C=0,R=e.length;C<R;C++)H2(e[C],g,_,p,x,f,function(T,O){u(T,O),e&&"length"in e&&e.length===++S&&i(S)});else e?H2(e,g,_,p,x,f,function(T,O){u(T,O),i(1),e=null}):i(0)},Qy={exports:{}},$y,G2;function MP(){if(G2)return $y;G2=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $y=n,$y}var Ky,Q2;function FP(){if(Q2)return Ky;Q2=1;var n=MP();function e(){}function t(){}return t.resetWarningCache=e,Ky=function(){function r(o,u,c,f,d,p){if(p!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function a(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:a,element:r,elementType:r,instanceOf:a,node:r,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},Ky}var $2;function PP(){return $2||($2=1,Qy.exports=FP()()),Qy.exports}var pn=PP(),LP=function(e){var t=(e==null?void 0:e.ownerDocument)||document;return t.defaultView||window},BP=function(e,t){for(var r in e)if(!(r in t))return!0;for(var a in t)if(e[a]!==t[a])return!0;return!1},zP=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],op="http://www.w3.org/2000/svg",K2="http://www.w3.org/1999/xlink",zO=function(n){function e(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=n.call.apply(n,[this].concat(i))||this,r.initialState={hasError:!1,isLoading:!0},r.state=r.initialState,r._isMounted=!1,r.reactWrapper=void 0,r.nonReactWrapper=void 0,r.refCallback=function(u){r.reactWrapper=u},r}SP(e,n);var t=e.prototype;return t.renderSVG=function(){var a=this;if(this.reactWrapper instanceof LP(this.reactWrapper).Node){var i=this.props,o=i.desc,u=i.evalScripts,c=i.httpRequestWithCredentials,f=i.renumerateIRIElements,d=i.src,p=i.title,v=i.useRequestCache,g=this.props.onError,y=this.props.beforeInjection,x=this.props.afterInjection,w=this.props.wrapper,_,S;w==="svg"?(_=document.createElementNS(op,w),_.setAttribute("xmlns",op),_.setAttribute("xmlns:xlink",K2),S=document.createElementNS(op,w)):(_=document.createElement(w),S=document.createElement(w)),_.appendChild(S),S.dataset.src=d,this.nonReactWrapper=this.reactWrapper.appendChild(_);var C=function(k){if(a.removeSVG(),!a._isMounted){g(k);return}a.setState(function(){return{hasError:!0,isLoading:!1}},function(){g(k)})},R=function(k,D){if(k){C(k);return}a._isMounted&&a.setState(function(){return{isLoading:!1}},function(){try{x(D)}catch(N){C(N)}})},T=function(k){if(k.setAttribute("role","img"),o){var D=k.querySelector(":scope > desc");D&&k.removeChild(D);var N=document.createElement("desc");N.innerHTML=o,k.prepend(N)}if(p){var M=k.querySelector(":scope > title");M&&k.removeChild(M);var B=document.createElement("title");B.innerHTML=p,k.prepend(B)}try{y(k)}catch(z){C(z)}};IP(S,{afterEach:R,beforeEach:T,cacheRequests:v,evalScripts:u,httpRequestWithCredentials:c,renumerateIRIElements:f})}},t.removeSVG=function(){var a;(a=this.nonReactWrapper)!=null&&a.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},t.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},t.componentDidUpdate=function(a){var i=this;BP(Yp({},a),this.props)&&this.setState(function(){return i.initialState},function(){i.removeSVG(),i.renderSVG()})},t.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},t.render=function(){var a=this.props;a.afterInjection,a.beforeInjection,a.desc,a.evalScripts;var i=a.fallback;a.httpRequestWithCredentials;var o=a.loading;a.renumerateIRIElements,a.src,a.title,a.useRequestCache;var u=a.wrapper,c=EP(a,zP),f=u;return J.createElement(f,Yp({},c,{ref:this.refCallback},u==="svg"?{xmlns:op,xmlnsXlink:K2}:{}),this.state.isLoading&&o&&J.createElement(o,null),this.state.hasError&&i&&J.createElement(i,null))},e}(J.Component);zO.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};zO.propTypes={afterInjection:pn.func,beforeInjection:pn.func,desc:pn.string,evalScripts:pn.oneOf(["always","once","never"]),fallback:pn.oneOfType([pn.func,pn.object,pn.string]),httpRequestWithCredentials:pn.bool,loading:pn.oneOfType([pn.func,pn.object,pn.string]),onError:pn.func,renumerateIRIElements:pn.bool,src:pn.string.isRequired,title:pn.string,useRequestCache:pn.bool,wrapper:pn.oneOf(["div","span","svg"])};const $e=n=>typeof n=="string",df=()=>{let n,e;const t=new Promise((r,a)=>{n=r,e=a});return t.resolve=n,t.reject=e,t},X2=n=>n==null?"":""+n,UP=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},VP=/###/g,Y2=n=>n&&n.indexOf("###")>-1?n.replace(VP,"."):n,Z2=n=>!n||$e(n),Nf=(n,e,t)=>{const r=$e(e)?e.split("."):e;let a=0;for(;a<r.length-1;){if(Z2(n))return{};const i=Y2(r[a]);!n[i]&&t&&(n[i]=new t),Object.prototype.hasOwnProperty.call(n,i)?n=n[i]:n={},++a}return Z2(n)?{}:{obj:n,k:Y2(r[a])}},J2=(n,e,t)=>{const{obj:r,k:a}=Nf(n,e,Object);if(r!==void 0||e.length===1){r[a]=t;return}let i=e[e.length-1],o=e.slice(0,e.length-1),u=Nf(n,o,Object);for(;u.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),u=Nf(n,o,Object),u!=null&&u.obj&&typeof u.obj[`${u.k}.${i}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${i}`]=t},jP=(n,e,t,r)=>{const{obj:a,k:i}=Nf(n,e,Object);a[i]=a[i]||[],a[i].push(t)},Zp=(n,e)=>{const{obj:t,k:r}=Nf(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},qP=(n,e,t)=>{const r=Zp(n,t);return r!==void 0?r:Zp(e,t)},UO=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?$e(n[r])||n[r]instanceof String||$e(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):UO(n[r],e[r],t):n[r]=e[r]);return n},Qu=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var WP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const HP=n=>$e(n)?n.replace(/[&<>"'\/]/g,e=>WP[e]):n;class GP{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const QP=[" ",",","?","!",";"],$P=new GP(20),KP=(n,e,t)=>{e=e||"",t=t||"";const r=QP.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(r.length===0)return!0;const a=$P.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!a.test(n);if(!i){const o=n.indexOf(t);o>0&&!a.test(n.substring(0,o))&&(i=!0)}return i},gb=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let a=n;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let o,u="";for(let c=i;c<r.length;++c)if(c!==i&&(u+=t),u+=r[c],o=a[u],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;i+=c-i+1;break}a=o}return a},Jp=n=>n==null?void 0:n.replace("_","-"),XP={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class ev{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||XP,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,a){return a&&!this.debug?null:($e(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new ev(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ev(this.logger,e)}}var ja=new ev;class Wv{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(t)||0;this.observers[r].set(t,a+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[u,c]=o;for(let f=0;f<c;f++)u(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[u,c]=o;for(let f=0;f<c;f++)u.apply(u,[e,...r])})}}class eC extends Wv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var f,d;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,o=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,t],r&&(Array.isArray(r)?u.push(...r):$e(r)&&i?u.push(...r.split(i)):u.push(r)));const c=Zp(this.data,u);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=u[0],t=u[1],r=u.slice(2).join(".")),c||!o||!$e(r)?c:gb((d=(f=this.data)==null?void 0:f[e])==null?void 0:d[t],r,i)}addResource(e,t,r,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let u=[e,t];r&&(u=u.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(u=e.split("."),a=t,t=u[1]),this.addNamespaces(t),J2(this.data,u,a),i.silent||this.emit("added",e,t,r,a)}addResources(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)($e(r[i])||Array.isArray(r[i]))&&this.addResource(e,t,i,r[i],{silent:!0});a.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,a,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},u=[e,t];e.indexOf(".")>-1&&(u=e.split("."),a=r,r=t,t=u[1]),this.addNamespaces(t);let c=Zp(this.data,u)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?UO(c,r,i):c={...c,...r},J2(this.data,u,c),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(a=>t[a]&&Object.keys(t[a]).length>0)}toJSON(){return this.data}}var VO={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,a){return n.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,t,r,a))??e}),e}};const tC={},nC=n=>!$e(n)&&typeof n!="boolean"&&typeof n!="number";class tv extends Wv{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),UP(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ja.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!KP(e,r,a);if(o&&!u){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:$e(i)?[i]:i};const f=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(f[0])>-1)&&(i=f.shift()),e=f.join(a)}return{key:e,namespaces:$e(i)?[i]:i}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:u}=this.extractFromKey(e[e.length-1],t),c=u[u.length-1],f=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode"){if(d){const B=t.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${B}${o}`,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${B}${o}`}return a?{res:o,usedKey:o,exactUsedKey:o,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:o}const p=this.resolve(e,t);let v=p==null?void 0:p.res;const g=(p==null?void 0:p.usedKey)||o,y=(p==null?void 0:p.exactUsedKey)||o,x=["[object Number]","[object Function]","[object RegExp]"],w=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,S=t.count!==void 0&&!$e(t.count),C=tv.hasDefaultValue(t),R=S?this.pluralResolver.getSuffix(f,t.count,t):"",T=t.ordinal&&S?this.pluralResolver.getSuffix(f,t.count,{ordinal:!1}):"",O=S&&!t.ordinal&&t.count===0,k=O&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${R}`]||t[`defaultValue${T}`]||t.defaultValue;let D=v;_&&!v&&C&&(D=k);const N=nC(D),M=Object.prototype.toString.apply(D);if(_&&D&&N&&x.indexOf(M)<0&&!($e(w)&&Array.isArray(D))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,D,{...t,ns:u}):`key '${o} (${this.language})' returned an object instead of string.`;return a?(p.res=B,p.usedParams=this.getUsedParamsDetails(t),p):B}if(i){const B=Array.isArray(D),z=B?[]:{},ee=B?y:g;for(const re in D)if(Object.prototype.hasOwnProperty.call(D,re)){const te=`${ee}${i}${re}`;C&&!v?z[re]=this.translate(te,{...t,defaultValue:nC(k)?k[re]:void 0,joinArrays:!1,ns:u}):z[re]=this.translate(te,{...t,joinArrays:!1,ns:u}),z[re]===te&&(z[re]=D[re])}v=z}}else if(_&&$e(w)&&Array.isArray(v))v=v.join(w),v&&(v=this.extendTranslation(v,e,t,r));else{let B=!1,z=!1;!this.isValidLookup(v)&&C&&(B=!0,v=k),this.isValidLookup(v)||(z=!0,v=o);const re=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&z?void 0:v,te=C&&k!==v&&this.options.updateMissing;if(z||B||te){if(this.logger.log(te?"updateKey":"missingKey",f,c,o,te?k:v),i){const Y=this.resolve(o,{...t,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let U=[];const H=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&H&&H[0])for(let Y=0;Y<H.length;Y++)U.push(H[Y]);else this.options.saveMissingTo==="all"?U=this.languageUtils.toResolveHierarchy(t.lng||this.language):U.push(t.lng||this.language);const $=(Y,F,Q)=>{var ue;const oe=C&&Q!==v?Q:re;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,c,F,oe,te,t):(ue=this.backendConnector)!=null&&ue.saveMissing&&this.backendConnector.saveMissing(Y,c,F,oe,te,t),this.emit("missingKey",Y,c,F,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?U.forEach(Y=>{const F=this.pluralResolver.getSuffixes(Y,t);O&&t[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(Q=>{$([Y],o+Q,t[`defaultValue${Q}`]||k)})}):$(U,o,k))}v=this.extendTranslation(v,e,t,p,r),z&&v===o&&this.options.appendNamespaceToMissingKey&&(v=`${c}:${o}`),(z||B)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,B?v:void 0))}return a?(p.res=v,p.usedParams=this.getUsedParamsDetails(t),p):v}extendTranslation(e,t,r,a,i){var f,d;var o=this;if((f=this.i18nFormat)!=null&&f.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const p=$e(e)&&(((d=r==null?void 0:r.interpolation)==null?void 0:d.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(p){const y=e.match(this.interpolator.nestingRegexp);v=y&&y.length}let g=r.replace&&!$e(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,r.lng||this.language||a.usedLng,r),p){const y=e.match(this.interpolator.nestingRegexp),x=y&&y.length;v<x&&(r.nest=!1)}!r.lng&&a&&a.res&&(r.lng=this.language||a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var y=arguments.length,x=new Array(y),w=0;w<y;w++)x[w]=arguments[w];return(i==null?void 0:i[0])===x[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${t[0]}`),null):o.translate(...x,t)},r)),r.interpolation&&this.interpolator.reset()}const u=r.postProcess||this.options.postProcess,c=$e(u)?[u]:u;return e!=null&&(c!=null&&c.length)&&r.applyPostProcessor!==!1&&(e=VO.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,a,i,o,u;return $e(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(c,t),d=f.key;a=d;let p=f.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const v=t.count!==void 0&&!$e(t.count),g=v&&!t.ordinal&&t.count===0,y=t.context!==void 0&&($e(t.context)||typeof t.context=="number")&&t.context!=="",x=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);p.forEach(w=>{var _,S;this.isValidLookup(r)||(u=w,!tC[`${x[0]}-${w}`]&&((_=this.utils)!=null&&_.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(u))&&(tC[`${x[0]}-${w}`]=!0,this.logger.warn(`key "${a}" for languages "${x.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(C=>{var O;if(this.isValidLookup(r))return;o=C;const R=[d];if((O=this.i18nFormat)!=null&&O.addLookupKeys)this.i18nFormat.addLookupKeys(R,d,C,w,t);else{let k;v&&(k=this.pluralResolver.getSuffix(C,t.count,t));const D=`${this.options.pluralSeparator}zero`,N=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(R.push(d+k),t.ordinal&&k.indexOf(N)===0&&R.push(d+k.replace(N,this.options.pluralSeparator)),g&&R.push(d+D)),y){const M=`${d}${this.options.contextSeparator}${t.context}`;R.push(M),v&&(R.push(M+k),t.ordinal&&k.indexOf(N)===0&&R.push(M+k.replace(N,this.options.pluralSeparator)),g&&R.push(M+D))}}let T;for(;T=R.pop();)this.isValidLookup(r)||(i=T,r=this.getResource(C,w,T,t))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:o,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var i;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,t,r,a):this.resourceStore.getResource(e,t,r,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!$e(e.replace);let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of t)delete a[i]}return a}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class rC{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ja.create("languageUtils")}getScriptPartFromCode(e){if(e=Jp(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Jp(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if($e(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(t=a)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(i=>{if(i===a)return i;if(!(i.indexOf("-")<0&&a.indexOf("-")<0)&&(i.indexOf("-")>0&&a.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===a||i.indexOf(a)===0&&a.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),$e(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),a=[],i=o=>{o&&(this.isSupportedCode(o)?a.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return $e(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):$e(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{a.indexOf(o)<0&&i(this.formatLanguageCode(o))}),a}}const aC={zero:0,one:1,two:2,few:3,many:4,other:5},iC={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class YP{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=ja.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Jp(e==="dev"?"en":e),a=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),iC;if(!e.match(/-|_/))return iC;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[i]=o,o}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(a=>`${t}${a}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((a,i)=>aC[a]-aC[i]).map(a=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,r);return a?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const oC=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=qP(n,e,t);return!i&&a&&$e(t)&&(i=gb(n,t,r),i===void 0&&(i=gb(e,t,r))),i},Xy=n=>n.replace(/\$/g,"$$$$");class ZP{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ja.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:a,prefix:i,prefixEscaped:o,suffix:u,suffixEscaped:c,formatSeparator:f,unescapeSuffix:d,unescapePrefix:p,nestingPrefix:v,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:x,nestingOptionsSeparator:w,maxReplaces:_,alwaysFormat:S}=e.interpolation;this.escape=t!==void 0?t:HP,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Qu(i):o||"{{",this.suffix=u?Qu(u):c||"}}",this.formatSeparator=f||",",this.unescapePrefix=d?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=v?Qu(v):g||Qu("$t("),this.nestingSuffix=y?Qu(y):x||Qu(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=_||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,a){var g;let i,o,u;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=y=>{if(y.indexOf(this.formatSeparator)<0){const S=oC(t,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...a,...t,interpolationkey:y}):S}const x=y.split(this.formatSeparator),w=x.shift().trim(),_=x.join(this.formatSeparator).trim();return this.format(oC(t,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...a,...t,interpolationkey:w})};this.resetRegExp();const d=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((g=a==null?void 0:a.interpolation)==null?void 0:g.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>Xy(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?Xy(this.escape(y)):Xy(y)}].forEach(y=>{for(u=0;i=y.regex.exec(e);){const x=i[1].trim();if(o=f(x),o===void 0)if(typeof d=="function"){const _=d(e,i,a);o=$e(_)?_:""}else if(a&&Object.prototype.hasOwnProperty.call(a,x))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!$e(o)&&!this.useRawValueToEscape&&(o=X2(o));const w=y.safeValue(o);if(e=e.replace(i[0],w),p?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=i[0].length):y.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,o;const u=(c,f)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const p=c.split(new RegExp(`${d}[ ]*{`));let v=`{${p[1]}`;c=p[0],v=this.interpolate(v,o);const g=v.match(/'/g),y=v.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!y||y.length%2!==0)&&(v=v.replace(/'/g,'"'));try{o=JSON.parse(v),f&&(o={...f,...o})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${d}${v}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;a=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!$e(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let f=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const d=a[1].split(this.formatSeparator).map(p=>p.trim());a[1]=d.shift(),c=d,f=!0}if(i=t(u.call(this,a[1].trim(),o),o),i&&a[0]===e&&!$e(i))return i;$e(i)||(i=X2(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),f&&(i=c.reduce((d,p)=>this.format(d,p,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const JP=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?t.currency||(t.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?t.range||(t.range=a.trim()):a.split(";").forEach(o=>{if(o){const[u,...c]=o.split(":"),f=c.join(":").trim().replace(/^'+|'+$/g,""),d=u.trim();t[d]||(t[d]=f),f==="false"&&(t[d]=!1),f==="true"&&(t[d]=!0),isNaN(f)||(t[d]=parseInt(f,10))}})}return{formatName:e,formatOptions:t}},$u=n=>{const e={};return(t,r,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const o=r+JSON.stringify(i);let u=e[o];return u||(u=n(Jp(r),a),e[o]=u),u(t)}};class eL{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ja.create("formatter"),this.options=e,this.formats={number:$u((t,r)=>{const a=new Intl.NumberFormat(t,{...r});return i=>a.format(i)}),currency:$u((t,r)=>{const a=new Intl.NumberFormat(t,{...r,style:"currency"});return i=>a.format(i)}),datetime:$u((t,r)=>{const a=new Intl.DateTimeFormat(t,{...r});return i=>a.format(i)}),relativetime:$u((t,r)=>{const a=new Intl.RelativeTimeFormat(t,{...r});return i=>a.format(i,r.range||"day")}),list:$u((t,r)=>{const a=new Intl.ListFormat(t,{...r});return i=>a.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=$u(t)}format(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(u=>u.indexOf(")")>-1)){const u=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,u)].join(this.formatSeparator)}return i.reduce((u,c)=>{var p;const{formatName:f,formatOptions:d}=JP(c);if(this.formats[f]){let v=u;try{const g=((p=a==null?void 0:a.formatParams)==null?void 0:p[a.interpolationkey])||{},y=g.locale||g.lng||a.locale||a.lng||r;v=this.formats[f](u,y,{...d,...a,...g})}catch(g){this.logger.warn(g)}return v}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const tL=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class nL extends Wv{constructor(e,t,r){var i,o;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=ja.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,a.backend,a)}queueLoad(e,t,r,a){const i={},o={},u={},c={};return e.forEach(f=>{let d=!0;t.forEach(p=>{const v=`${f}|${p}`;!r.reload&&this.store.hasResourceBundle(f,p)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?o[v]===void 0&&(o[v]=!0):(this.state[v]=1,d=!1,o[v]===void 0&&(o[v]=!0),i[v]===void 0&&(i[v]=!0),c[p]===void 0&&(c[p]=!0)))}),d||(u[f]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const a=e.split("|"),i=a[0],o=a[1];t&&this.emit("failedLoading",i,o,t),!t&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const u={};this.queue.forEach(c=>{jP(c.loaded,[i],o),tL(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(f=>{u[f]||(u[f]={});const d=c.loaded[f];d.length&&d.forEach(p=>{u[f][p]===void 0&&(u[f][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:a,wait:i,callback:o});return}this.readingCalls++;const u=(f,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(f&&d&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,a+1,i*2,o)},i);return}o(f,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const f=c(e,t);f&&typeof f.then=="function"?f.then(d=>u(null,d)).catch(u):u(null,f)}catch(f){u(f)}return}return c(e,t,u)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();$e(e)&&(e=this.languageUtils.toResolveHierarchy(e)),$e(t)&&(t=[t]);const i=this.queueLoad(e,t,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(o,u)=>{o&&this.logger.warn(`${t}loading namespace ${i} for language ${a} failed`,o),!o&&u&&this.logger.log(`${t}loaded namespace ${i} for language ${a}`,u),this.loaded(e,o,u)})}saveMissing(e,t,r,a,i){var c,f,d,p,v;let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((f=(c=this.services)==null?void 0:c.utils)!=null&&f.hasLoadedNamespace&&!((p=(d=this.services)==null?void 0:d.utils)!=null&&p.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const g={...o,isUpdate:i},y=this.backend.create.bind(this.backend);if(y.length<6)try{let x;y.length===5?x=y(e,t,r,a,g):x=y(e,t,r,a),x&&typeof x.then=="function"?x.then(w=>u(null,w)).catch(u):u(null,x)}catch(x){u(x)}else y(e,t,r,a,u,g)}!e||!e[0]||this.store.addResource(e[0],t,r,a)}}}const sC=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),$e(n[1])&&(e.defaultValue=n[1]),$e(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),uC=n=>{var e,t;return $e(n.ns)&&(n.ns=[n.ns]),$e(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),$e(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},sp=()=>{},rL=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Hf extends Wv{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=uC(e),this.services={},this.logger=ja,this.modules={external:[]},rL(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&($e(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=sC();this.options={...a,...this.options,...uC(t)},this.options.interpolation={...a.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?ja.init(i(this.modules.logger),this.options):ja.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=eL;const p=new rC(this.options);this.store=new eC(this.options.resources,this.options);const v=this.services;v.logger=ja,v.resourceStore=this.store,v.languageUtils=p,v.pluralResolver=new YP(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(v.formatter=i(d),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new ZP(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new nL(i(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(g){for(var y=arguments.length,x=new Array(y>1?y-1:0),w=1;w<y;w++)x[w-1]=arguments[w];e.emit(g,...x)}),this.modules.languageDetector&&(v.languageDetector=i(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=i(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new tv(this.services,this.options),this.translator.on("*",function(g){for(var y=arguments.length,x=new Array(y>1?y-1:0),w=1;w<y;w++)x[w-1]=arguments[w];e.emit(g,...x)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=sp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=df(),f=()=>{const d=(p,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(v),r(p,v)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),c}loadResources(e){var i,o;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sp;const a=$e(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const u=[],c=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(p=>{p!=="cimode"&&u.indexOf(p)<0&&u.push(p)})};a?c(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,f=>c(f)),this.services.backendConnector.load(u,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(f)})}else r(null)}reloadResources(e,t,r){const a=df();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=sp),this.services.backendConnector.reload(e,t,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&VO.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const a=df();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,f)=>{f?(i(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,a.resolve(function(){return r.t(...arguments)}),t&&t(c,function(){return r.t(...arguments)})},u=c=>{var d,p;!e&&!c&&this.services.languageDetector&&(c=[]);const f=$e(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);f&&(this.language||i(f),this.translator.language||this.translator.changeLanguage(f),(p=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||p.call(d,f)),this.loadResources(f,v=>{o(v,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(e),a}getFixedT(e,t,r){var a=this;const i=function(o,u){let c;if(typeof u!="object"){for(var f=arguments.length,d=new Array(f>2?f-2:0),p=2;p<f;p++)d[p-2]=arguments[p];c=a.options.overloadTranslationOptionHandler([o,u].concat(d))}else c={...u};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const v=a.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(o)?g=o.map(y=>`${c.keyPrefix}${v}${y}`):g=c.keyPrefix?`${c.keyPrefix}${v}${o}`:o,a.t(g,c)};return $e(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(){var a;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(a=this.translator)==null?void 0:a.translate(...t)}exists(){var a;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(a=this.translator)==null?void 0:a.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(u,c)=>{const f=this.services.backendConnector.state[`${u}|${c}`];return f===-1||f===0||f===2};if(t.precheck){const u=t.precheck(this,o);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!a||o(i,e)))}loadNamespaces(e,t){const r=df();return this.options.ns?($e(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=df();$e(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(o=>a.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=a.concat(i),this.loadResources(o=>{r.resolve(),t&&t(o)}),r):(t&&t(),Promise.resolve())}dir(e){var a,i;if(e||(e=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new rC(sC());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Hf(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sp;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new Hf(a);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(u=>{i[u]=this[u]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const u=Object.keys(this.store.data).reduce((c,f)=>(c[f]={...this.store.data[f]},Object.keys(c[f]).reduce((d,p)=>(d[p]={...c[f][p]},d),{})),{});i.store=new eC(u,a),i.services.resourceStore=i.store}return i.translator=new tv(i.services,a),i.translator.on("*",function(u){for(var c=arguments.length,f=new Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];i.emit(u,...f)}),i.init(a,t),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ir=Hf.createInstance();ir.createInstance=Hf.createInstance;ir.createInstance;ir.dir;ir.init;ir.loadResources;ir.reloadResources;ir.use;ir.changeLanguage;ir.getFixedT;ir.t;ir.exists;ir.setDefaultNamespace;ir.hasLoadedNamespace;ir.loadNamespaces;ir.loadLanguages;const lC=n=>{let e;const t=new Set,r=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const v=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(g=>g(e,v))}},a=()=>e,u={setState:r,getState:a,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=n(r,a,u);return u},aL=n=>n?lC(n):lC,iL=n=>n;function oL(n,e=iL){const t=mr.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return mr.useDebugValue(t),t}const sL=n=>{const e=aL(n),t=r=>oL(e,r);return Object.assign(t,e),t},t7=n=>sL;function uL(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),u=(i=t.getItem(a))!=null?i:null;return u instanceof Promise?u.then(o):o(u)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>t.removeItem(a)}}const yb=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return yb(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return yb(r)(t)}}}},lL=(n,e)=>(t,r,a)=>{let i={storage:uL(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},o=!1;const u=new Set,c=new Set;let f=i.storage;if(!f)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...x)},r,a);const d=()=>{const x=i.partialize({...r()});return f.setItem(i.name,{state:x,version:i.version})},p=a.setState;a.setState=(x,w)=>{p(x,w),d()};const v=n((...x)=>{t(...x),d()},r,a);a.getInitialState=()=>v;let g;const y=()=>{var x,w;if(!f)return;o=!1,u.forEach(S=>{var C;return S((C=r())!=null?C:v)});const _=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(x=r())!=null?x:v))||void 0;return yb(f.getItem.bind(f))(i.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==i.version){if(i.migrate){const C=i.migrate(S.state,S.version);return C instanceof Promise?C.then(R=>[!0,R]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var C;const[R,T]=S;if(g=i.merge(T,(C=r())!=null?C:v),t(g,!0),R)return d()}).then(()=>{_==null||_(g,void 0),g=r(),o=!0,c.forEach(S=>S(g))}).catch(S=>{_==null||_(void 0,S)})};return a.persist={setOptions:x=>{i={...i,...x},x.storage&&(f=x.storage)},clearStorage:()=>{f==null||f.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:x=>(u.add(x),()=>{u.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||y(),g||v},n7=lL;var vt;(function(n){n.assertEqual=a=>a;function e(a){}n.assertIs=e;function t(a){throw new Error}n.assertNever=t,n.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},n.getValidEnumValues=a=>{const i=n.objectKeys(a).filter(u=>typeof a[a[u]]!="number"),o={};for(const u of i)o[u]=a[u];return n.objectValues(o)},n.objectValues=a=>n.objectKeys(a).map(function(i){return a[i]}),n.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},n.find=(a,i)=>{for(const o of a)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(vt||(vt={}));var bb;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(bb||(bb={}));const Re=vt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ti=n=>{switch(typeof n){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return isNaN(n)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(n)?Re.array:n===null?Re.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Re.promise:typeof Map<"u"&&n instanceof Map?Re.map:typeof Set<"u"&&n instanceof Set?Re.set:typeof Date<"u"&&n instanceof Date?Re.date:Re.object;default:return Re.unknown}},ge=vt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),cL=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Ir extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let u=r,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(t(o))):u[f]=u[f]||{_errors:[]},u=u[f],c++}}};return a(this),r}static assert(e){if(!(e instanceof Ir))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ir.create=n=>new Ir(n);const Hl=(n,e)=>{let t;switch(n.code){case ge.invalid_type:n.received===Re.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case ge.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,vt.jsonStringifyReplacer)}`;break;case ge.unrecognized_keys:t=`Unrecognized key(s) in object: ${vt.joinValues(n.keys,", ")}`;break;case ge.invalid_union:t="Invalid input";break;case ge.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${vt.joinValues(n.options)}`;break;case ge.invalid_enum_value:t=`Invalid enum value. Expected ${vt.joinValues(n.options)}, received '${n.received}'`;break;case ge.invalid_arguments:t="Invalid function arguments";break;case ge.invalid_return_type:t="Invalid function return type";break;case ge.invalid_date:t="Invalid date";break;case ge.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:vt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case ge.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case ge.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case ge.custom:t="Invalid input";break;case ge.invalid_intersection_types:t="Intersection results could not be merged";break;case ge.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case ge.not_finite:t="Number must be finite";break;default:t=e.defaultError,vt.assertNever(n)}return{message:t}};let jO=Hl;function fL(n){jO=n}function nv(){return jO}const rv=n=>{const{data:e,path:t,errorMaps:r,issueData:a}=n,i=[...t,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let u="";const c=r.filter(f=>!!f).slice().reverse();for(const f of c)u=f(o,{data:e,defaultError:u}).message;return{...a,path:i,message:u}},hL=[];function we(n,e){const t=nv(),r=rv({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Hl?void 0:Hl].filter(a=>!!a)});n.common.issues.push(r)}class Zn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const a of t){if(a.status==="aborted")return Ge;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const a of t){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Zn.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const a of t){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Ge;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ge=Object.freeze({status:"aborted"}),ul=n=>({status:"dirty",value:n}),rr=n=>({status:"valid",value:n}),xb=n=>n.status==="aborted",wb=n=>n.status==="dirty",$s=n=>n.status==="valid",Gf=n=>typeof Promise<"u"&&n instanceof Promise;function av(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function qO(n,e,t,r,a){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var Ie;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ie||(Ie={}));var Rf,Tf;class Ka{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cC=(n,e)=>{if($s(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ir(n.common.issues);return this._error=t,this._error}}};function Ze(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:a}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,u)=>{var c,f;const{message:d}=n;return o.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:u.defaultError}:o.code!=="invalid_type"?{message:u.defaultError}:{message:(f=d??t)!==null&&f!==void 0?f:u.defaultError}},description:a}}class rt{get description(){return this._def.description}_getType(e){return Ti(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zn,ctx:{common:e.parent.common,data:e.data,parsedType:Ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Gf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const a={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ti(e)},i=this._parseSync({data:e,path:a.path,parent:a});return cC(a,i)}"~validate"(e){var t,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ti(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:a});return $s(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(t=i==null?void 0:i.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(i=>$s(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ti(e)},a=this._parse({data:e,path:r.path,parent:r}),i=await(Gf(a)?a:Promise.resolve(a));return cC(r,i)}refine(e,t){const r=a=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(a):t;return this._refinement((a,i)=>{const o=e(a),u=()=>i.addIssue({code:ge.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(e,t){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof t=="function"?t(r,a):t),!1))}_refinement(e){return new xa({schema:this,typeName:We.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Wa.create(this,this._def)}nullable(){return $o.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ga.create(this)}promise(){return Ql.create(this,this._def)}or(e){return Xf.create([this,e],this._def)}and(e){return Yf.create(this,e,this._def)}transform(e){return new xa({...Ze(this._def),schema:this,typeName:We.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new nh({...Ze(this._def),innerType:this,defaultValue:t,typeName:We.ZodDefault})}brand(){return new Ix({typeName:We.ZodBranded,type:this,...Ze(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new rh({...Ze(this._def),innerType:this,catchValue:t,typeName:We.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Oh.create(this,e)}readonly(){return ah.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dL=/^c[^\s-]{8,}$/i,pL=/^[0-9a-z]+$/,vL=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gL=/^[a-z0-9_-]{21}$/i,yL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Yy;const _L=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,SL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,CL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,TL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,WO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",OL=new RegExp(`^${WO}$`);function HO(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function AL(n){return new RegExp(`^${HO(n)}$`)}function GO(n){let e=`${WO}T${HO(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function kL(n,e){return!!((e==="v4"||!e)&&_L.test(n)||(e==="v6"||!e)&&SL.test(n))}function DL(n,e){if(!yL.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function NL(n,e){return!!((e==="v4"||!e)&&EL.test(n)||(e==="v6"||!e)&&CL.test(n))}class da extends rt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const i=this._getOrReturnCtx(e);return we(i,{code:ge.invalid_type,expected:Re.string,received:i.parsedType}),Ge}const r=new Zn;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),we(a,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),we(a,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,u=e.data.length<i.value;(o||u)&&(a=this._getOrReturnCtx(e,a),o?we(a,{code:ge.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&we(a,{code:ge.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")xL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"email",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Yy||(Yy=new RegExp(wL,"u")),Yy.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"emoji",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")mL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"uuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")gL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"nanoid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")dL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"cuid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")pL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"cuid2",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")vL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"ulid",code:ge.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),we(a,{validation:"url",code:ge.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"regex",code:ge.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),we(a,{code:ge.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),we(a,{code:ge.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),we(a,{code:ge.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?GO(i).test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{code:ge.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?OL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{code:ge.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?AL(i).test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{code:ge.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?bL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"duration",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?kL(e.data,i.version)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"ip",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?DL(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"jwt",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?NL(e.data,i.version)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"cidr",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?RL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"base64",code:ge.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?TL.test(e.data)||(a=this._getOrReturnCtx(e,a),we(a,{validation:"base64url",code:ge.invalid_string,message:i.message}),r.dirty()):vt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(a=>e.test(a),{validation:t,code:ge.invalid_string,...Ie.errToObj(r)})}_addCheck(e){return new da({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ie.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ie.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ie.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ie.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ie.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ie.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ie.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ie.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ie.errToObj(t)})}nonempty(e){return this.min(1,Ie.errToObj(e))}trim(){return new da({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new da({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new da({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}da.create=n=>{var e;return new da({checks:[],typeName:We.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ze(n)})};function IL(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=t>r?t:r,i=parseInt(n.toFixed(a).replace(".","")),o=parseInt(e.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Ho extends rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const i=this._getOrReturnCtx(e);return we(i,{code:ge.invalid_type,expected:Re.number,received:i.parsedType}),Ge}let r;const a=new Zn;for(const i of this._def.checks)i.kind==="int"?vt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ge.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:ge.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:ge.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?IL(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),we(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:ge.not_finite,message:i.message}),a.dirty()):vt.assertNever(i);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ie.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ie.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ie.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ie.toString(t))}setLimit(e,t,r,a){return new Ho({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ie.toString(a)}]})}_addCheck(e){return new Ho({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&vt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ho.create=n=>new Ho({checks:[],typeName:We.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ze(n)});class Go extends rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Re.bigint)return this._getInvalidInput(e);let r;const a=new Zn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:ge.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:ge.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),we(r,{code:ge.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):vt.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return we(t,{code:ge.invalid_type,expected:Re.bigint,received:t.parsedType}),Ge}gte(e,t){return this.setLimit("min",e,!0,Ie.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ie.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ie.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ie.toString(t))}setLimit(e,t,r,a){return new Go({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Ie.toString(a)}]})}_addCheck(e){return new Go({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ie.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Go.create=n=>{var e;return new Go({checks:[],typeName:We.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ze(n)})};class Qf extends rt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const r=this._getOrReturnCtx(e);return we(r,{code:ge.invalid_type,expected:Re.boolean,received:r.parsedType}),Ge}return rr(e.data)}}Qf.create=n=>new Qf({typeName:We.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ze(n)});class Ks extends rt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const i=this._getOrReturnCtx(e);return we(i,{code:ge.invalid_type,expected:Re.date,received:i.parsedType}),Ge}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return we(i,{code:ge.invalid_date}),Ge}const r=new Zn;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),we(a,{code:ge.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),we(a,{code:ge.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):vt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ks({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ie.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ie.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ks.create=n=>new Ks({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:We.ZodDate,...Ze(n)});class iv extends rt{_parse(e){if(this._getType(e)!==Re.symbol){const r=this._getOrReturnCtx(e);return we(r,{code:ge.invalid_type,expected:Re.symbol,received:r.parsedType}),Ge}return rr(e.data)}}iv.create=n=>new iv({typeName:We.ZodSymbol,...Ze(n)});class $f extends rt{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return we(r,{code:ge.invalid_type,expected:Re.undefined,received:r.parsedType}),Ge}return rr(e.data)}}$f.create=n=>new $f({typeName:We.ZodUndefined,...Ze(n)});class Kf extends rt{_parse(e){if(this._getType(e)!==Re.null){const r=this._getOrReturnCtx(e);return we(r,{code:ge.invalid_type,expected:Re.null,received:r.parsedType}),Ge}return rr(e.data)}}Kf.create=n=>new Kf({typeName:We.ZodNull,...Ze(n)});class Gl extends rt{constructor(){super(...arguments),this._any=!0}_parse(e){return rr(e.data)}}Gl.create=n=>new Gl({typeName:We.ZodAny,...Ze(n)});class js extends rt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rr(e.data)}}js.create=n=>new js({typeName:We.ZodUnknown,...Ze(n)});class Mi extends rt{_parse(e){const t=this._getOrReturnCtx(e);return we(t,{code:ge.invalid_type,expected:Re.never,received:t.parsedType}),Ge}}Mi.create=n=>new Mi({typeName:We.ZodNever,...Ze(n)});class ov extends rt{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return we(r,{code:ge.invalid_type,expected:Re.void,received:r.parsedType}),Ge}return rr(e.data)}}ov.create=n=>new ov({typeName:We.ZodVoid,...Ze(n)});class ga extends rt{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==Re.array)return we(t,{code:ge.invalid_type,expected:Re.array,received:t.parsedType}),Ge;if(a.exactLength!==null){const o=t.data.length>a.exactLength.value,u=t.data.length<a.exactLength.value;(o||u)&&(we(t,{code:o?ge.too_big:ge.too_small,minimum:u?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&t.data.length<a.minLength.value&&(we(t,{code:ge.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&t.data.length>a.maxLength.value&&(we(t,{code:ge.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,u)=>a.type._parseAsync(new Ka(t,o,t.path,u)))).then(o=>Zn.mergeArray(r,o));const i=[...t.data].map((o,u)=>a.type._parseSync(new Ka(t,o,t.path,u)));return Zn.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new ga({...this._def,minLength:{value:e,message:Ie.toString(t)}})}max(e,t){return new ga({...this._def,maxLength:{value:e,message:Ie.toString(t)}})}length(e,t){return new ga({...this._def,exactLength:{value:e,message:Ie.toString(t)}})}nonempty(e){return this.min(1,e)}}ga.create=(n,e)=>new ga({type:n,minLength:null,maxLength:null,exactLength:null,typeName:We.ZodArray,...Ze(e)});function el(n){if(n instanceof qt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Wa.create(el(r))}return new qt({...n._def,shape:()=>e})}else return n instanceof ga?new ga({...n._def,type:el(n.element)}):n instanceof Wa?Wa.create(el(n.unwrap())):n instanceof $o?$o.create(el(n.unwrap())):n instanceof Xa?Xa.create(n.items.map(e=>el(e))):n}class qt extends rt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=vt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Re.object){const f=this._getOrReturnCtx(e);return we(f,{code:ge.invalid_type,expected:Re.object,received:f.parsedType}),Ge}const{status:r,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof Mi&&this._def.unknownKeys==="strip"))for(const f in a.data)o.includes(f)||u.push(f);const c=[];for(const f of o){const d=i[f],p=a.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Ka(a,p,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof Mi){const f=this._def.unknownKeys;if(f==="passthrough")for(const d of u)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(f==="strict")u.length>0&&(we(a,{code:ge.unrecognized_keys,keys:u}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const d of u){const p=a.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Ka(a,p,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const f=[];for(const d of c){const p=await d.key,v=await d.value;f.push({key:p,value:v,alwaysSet:d.alwaysSet})}return f}).then(f=>Zn.mergeObjectSync(r,f)):Zn.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ie.errToObj,new qt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var a,i,o,u;const c=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(u=Ie.errToObj(e).message)!==null&&u!==void 0?u:c}:{message:c}}}:{}})}strip(){return new qt({...this._def,unknownKeys:"strip"})}passthrough(){return new qt({...this._def,unknownKeys:"passthrough"})}extend(e){return new qt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new qt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:We.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new qt({...this._def,catchall:e})}pick(e){const t={};return vt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new qt({...this._def,shape:()=>t})}omit(e){const t={};return vt.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new qt({...this._def,shape:()=>t})}deepPartial(){return el(this)}partial(e){const t={};return vt.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}),new qt({...this._def,shape:()=>t})}required(e){const t={};return vt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Wa;)i=i._def.innerType;t[r]=i}}),new qt({...this._def,shape:()=>t})}keyof(){return QO(vt.objectKeys(this.shape))}}qt.create=(n,e)=>new qt({shape:()=>n,unknownKeys:"strip",catchall:Mi.create(),typeName:We.ZodObject,...Ze(e)});qt.strictCreate=(n,e)=>new qt({shape:()=>n,unknownKeys:"strict",catchall:Mi.create(),typeName:We.ZodObject,...Ze(e)});qt.lazycreate=(n,e)=>new qt({shape:n,unknownKeys:"strip",catchall:Mi.create(),typeName:We.ZodObject,...Ze(e)});class Xf extends rt{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function a(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const o=i.map(u=>new Ir(u.ctx.common.issues));return we(t,{code:ge.invalid_union,unionErrors:o}),Ge}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of r){const f={...t,common:{...t.common,issues:[]},parent:null},d=c._parseSync({data:t.data,path:t.path,parent:f});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const u=o.map(c=>new Ir(c));return we(t,{code:ge.invalid_union,unionErrors:u}),Ge}}get options(){return this._def.options}}Xf.create=(n,e)=>new Xf({options:n,typeName:We.ZodUnion,...Ze(e)});const Si=n=>n instanceof Jf?Si(n.schema):n instanceof xa?Si(n.innerType()):n instanceof eh?[n.value]:n instanceof Qo?n.options:n instanceof th?vt.objectValues(n.enum):n instanceof nh?Si(n._def.innerType):n instanceof $f?[void 0]:n instanceof Kf?[null]:n instanceof Wa?[void 0,...Si(n.unwrap())]:n instanceof $o?[null,...Si(n.unwrap())]:n instanceof Ix||n instanceof ah?Si(n.unwrap()):n instanceof rh?Si(n._def.innerType):[];class Hv extends rt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.object)return we(t,{code:ge.invalid_type,expected:Re.object,received:t.parsedType}),Ge;const r=this.discriminator,a=t.data[r],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(we(t,{code:ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const a=new Map;for(const i of t){const o=Si(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of o){if(a.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);a.set(u,i)}}return new Hv({typeName:We.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...Ze(r)})}}function _b(n,e){const t=Ti(n),r=Ti(e);if(n===e)return{valid:!0,data:n};if(t===Re.object&&r===Re.object){const a=vt.objectKeys(e),i=vt.objectKeys(n).filter(u=>a.indexOf(u)!==-1),o={...n,...e};for(const u of i){const c=_b(n[u],e[u]);if(!c.valid)return{valid:!1};o[u]=c.data}return{valid:!0,data:o}}else if(t===Re.array&&r===Re.array){if(n.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<n.length;i++){const o=n[i],u=e[i],c=_b(o,u);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return t===Re.date&&r===Re.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Yf extends rt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(i,o)=>{if(xb(i)||xb(o))return Ge;const u=_b(i.value,o.value);return u.valid?((wb(i)||wb(o))&&t.dirty(),{status:t.value,value:u.data}):(we(r,{code:ge.invalid_intersection_types}),Ge)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Yf.create=(n,e,t)=>new Yf({left:n,right:e,typeName:We.ZodIntersection,...Ze(t)});class Xa extends rt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.array)return we(r,{code:ge.invalid_type,expected:Re.array,received:r.parsedType}),Ge;if(r.data.length<this._def.items.length)return we(r,{code:ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ge;!this._def.rest&&r.data.length>this._def.items.length&&(we(r,{code:ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,u)=>{const c=this._def.items[u]||this._def.rest;return c?c._parse(new Ka(r,o,r.path,u)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Zn.mergeArray(t,o)):Zn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Xa({...this._def,rest:e})}}Xa.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xa({items:n,typeName:We.ZodTuple,rest:null,...Ze(e)})};class Zf extends rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.object)return we(r,{code:ge.invalid_type,expected:Re.object,received:r.parsedType}),Ge;const a=[],i=this._def.keyType,o=this._def.valueType;for(const u in r.data)a.push({key:i._parse(new Ka(r,u,r.path,u)),value:o._parse(new Ka(r,r.data[u],r.path,u)),alwaysSet:u in r.data});return r.common.async?Zn.mergeObjectAsync(t,a):Zn.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof rt?new Zf({keyType:e,valueType:t,typeName:We.ZodRecord,...Ze(r)}):new Zf({keyType:da.create(),valueType:e,typeName:We.ZodRecord,...Ze(t)})}}class sv extends rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.map)return we(r,{code:ge.invalid_type,expected:Re.map,received:r.parsedType}),Ge;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([u,c],f)=>({key:a._parse(new Ka(r,u,r.path,[f,"key"])),value:i._parse(new Ka(r,c,r.path,[f,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const c of o){const f=await c.key,d=await c.value;if(f.status==="aborted"||d.status==="aborted")return Ge;(f.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(f.value,d.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const c of o){const f=c.key,d=c.value;if(f.status==="aborted"||d.status==="aborted")return Ge;(f.status==="dirty"||d.status==="dirty")&&t.dirty(),u.set(f.value,d.value)}return{status:t.value,value:u}}}}sv.create=(n,e,t)=>new sv({valueType:e,keyType:n,typeName:We.ZodMap,...Ze(t)});class Xs extends rt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.set)return we(r,{code:ge.invalid_type,expected:Re.set,received:r.parsedType}),Ge;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(we(r,{code:ge.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(we(r,{code:ge.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const f=new Set;for(const d of c){if(d.status==="aborted")return Ge;d.status==="dirty"&&t.dirty(),f.add(d.value)}return{status:t.value,value:f}}const u=[...r.data.values()].map((c,f)=>i._parse(new Ka(r,c,r.path,f)));return r.common.async?Promise.all(u).then(c=>o(c)):o(u)}min(e,t){return new Xs({...this._def,minSize:{value:e,message:Ie.toString(t)}})}max(e,t){return new Xs({...this._def,maxSize:{value:e,message:Ie.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Xs.create=(n,e)=>new Xs({valueType:n,minSize:null,maxSize:null,typeName:We.ZodSet,...Ze(e)});class vl extends rt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.function)return we(t,{code:ge.invalid_type,expected:Re.function,received:t.parsedType}),Ge;function r(u,c){return rv({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nv(),Hl].filter(f=>!!f),issueData:{code:ge.invalid_arguments,argumentsError:c}})}function a(u,c){return rv({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nv(),Hl].filter(f=>!!f),issueData:{code:ge.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Ql){const u=this;return rr(async function(...c){const f=new Ir([]),d=await u._def.args.parseAsync(c,i).catch(g=>{throw f.addIssue(r(c,g)),f}),p=await Reflect.apply(o,this,d);return await u._def.returns._def.type.parseAsync(p,i).catch(g=>{throw f.addIssue(a(p,g)),f})})}else{const u=this;return rr(function(...c){const f=u._def.args.safeParse(c,i);if(!f.success)throw new Ir([r(c,f.error)]);const d=Reflect.apply(o,this,f.data),p=u._def.returns.safeParse(d,i);if(!p.success)throw new Ir([a(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new vl({...this._def,args:Xa.create(e).rest(js.create())})}returns(e){return new vl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new vl({args:e||Xa.create([]).rest(js.create()),returns:t||js.create(),typeName:We.ZodFunction,...Ze(r)})}}class Jf extends rt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Jf.create=(n,e)=>new Jf({getter:n,typeName:We.ZodLazy,...Ze(e)});class eh extends rt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return we(t,{received:t.data,code:ge.invalid_literal,expected:this._def.value}),Ge}return{status:"valid",value:e.data}}get value(){return this._def.value}}eh.create=(n,e)=>new eh({value:n,typeName:We.ZodLiteral,...Ze(e)});function QO(n,e){return new Qo({values:n,typeName:We.ZodEnum,...Ze(e)})}class Qo extends rt{constructor(){super(...arguments),Rf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return we(t,{expected:vt.joinValues(r),received:t.parsedType,code:ge.invalid_type}),Ge}if(av(this,Rf)||qO(this,Rf,new Set(this._def.values)),!av(this,Rf).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return we(t,{received:t.data,code:ge.invalid_enum_value,options:r}),Ge}return rr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Qo.create(e,{...this._def,...t})}exclude(e,t=this._def){return Qo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Rf=new WeakMap;Qo.create=QO;class th extends rt{constructor(){super(...arguments),Tf.set(this,void 0)}_parse(e){const t=vt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Re.string&&r.parsedType!==Re.number){const a=vt.objectValues(t);return we(r,{expected:vt.joinValues(a),received:r.parsedType,code:ge.invalid_type}),Ge}if(av(this,Tf)||qO(this,Tf,new Set(vt.getValidEnumValues(this._def.values))),!av(this,Tf).has(e.data)){const a=vt.objectValues(t);return we(r,{received:r.data,code:ge.invalid_enum_value,options:a}),Ge}return rr(e.data)}get enum(){return this._def.values}}Tf=new WeakMap;th.create=(n,e)=>new th({values:n,typeName:We.ZodNativeEnum,...Ze(e)});class Ql extends rt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Re.promise&&t.common.async===!1)return we(t,{code:ge.invalid_type,expected:Re.promise,received:t.parsedType}),Ge;const r=t.parsedType===Re.promise?t.data:Promise.resolve(t.data);return rr(r.then(a=>this._def.type.parseAsync(a,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ql.create=(n,e)=>new Ql({type:n,typeName:We.ZodPromise,...Ze(e)});class xa extends rt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===We.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{we(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async u=>{if(t.value==="aborted")return Ge;const c=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return c.status==="aborted"?Ge:c.status==="dirty"||t.value==="dirty"?ul(c.value):c});{if(t.value==="aborted")return Ge;const u=this._def.schema._parseSync({data:o,path:r.path,parent:r});return u.status==="aborted"?Ge:u.status==="dirty"||t.value==="dirty"?ul(u.value):u}}if(a.type==="refinement"){const o=u=>{const c=a.refinement(u,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?Ge:(u.status==="dirty"&&t.dirty(),o(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?Ge:(u.status==="dirty"&&t.dirty(),o(u.value).then(()=>({status:t.value,value:u.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$s(o))return o;const u=a.transform(o.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>$s(o)?Promise.resolve(a.transform(o.value,i)).then(u=>({status:t.value,value:u})):o);vt.assertNever(a)}}xa.create=(n,e,t)=>new xa({schema:n,typeName:We.ZodEffects,effect:e,...Ze(t)});xa.createWithPreprocess=(n,e,t)=>new xa({schema:e,effect:{type:"preprocess",transform:n},typeName:We.ZodEffects,...Ze(t)});class Wa extends rt{_parse(e){return this._getType(e)===Re.undefined?rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wa.create=(n,e)=>new Wa({innerType:n,typeName:We.ZodOptional,...Ze(e)});class $o extends rt{_parse(e){return this._getType(e)===Re.null?rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$o.create=(n,e)=>new $o({innerType:n,typeName:We.ZodNullable,...Ze(e)});class nh extends rt{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===Re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}nh.create=(n,e)=>new nh({innerType:n,typeName:We.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ze(e)});class rh extends rt{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gf(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ir(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ir(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rh.create=(n,e)=>new rh({innerType:n,typeName:We.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ze(e)});class uv extends rt{_parse(e){if(this._getType(e)!==Re.nan){const r=this._getOrReturnCtx(e);return we(r,{code:ge.invalid_type,expected:Re.nan,received:r.parsedType}),Ge}return{status:"valid",value:e.data}}}uv.create=n=>new uv({typeName:We.ZodNaN,...Ze(n)});const ML=Symbol("zod_brand");class Ix extends rt{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Oh extends rt{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ge:i.status==="dirty"?(t.dirty(),ul(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ge:a.status==="dirty"?(t.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,t){return new Oh({in:e,out:t,typeName:We.ZodPipeline})}}class ah extends rt{_parse(e){const t=this._def.innerType._parse(e),r=a=>($s(a)&&(a.value=Object.freeze(a.value)),a);return Gf(t)?t.then(a=>r(a)):r(t)}unwrap(){return this._def.innerType}}ah.create=(n,e)=>new ah({innerType:n,typeName:We.ZodReadonly,...Ze(e)});function fC(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function $O(n,e={},t){return n?Gl.create().superRefine((r,a)=>{var i,o;const u=n(r);if(u instanceof Promise)return u.then(c=>{var f,d;if(!c){const p=fC(e,r),v=(d=(f=p.fatal)!==null&&f!==void 0?f:t)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...p,fatal:v})}});if(!u){const c=fC(e,r),f=(o=(i=c.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...c,fatal:f})}}):Gl.create()}const FL={object:qt.lazycreate};var We;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(We||(We={}));const PL=(n,e={message:`Input not instance of ${n.name}`})=>$O(t=>t instanceof n,e),KO=da.create,XO=Ho.create,LL=uv.create,BL=Go.create,YO=Qf.create,zL=Ks.create,UL=iv.create,VL=$f.create,jL=Kf.create,qL=Gl.create,WL=js.create,HL=Mi.create,GL=ov.create,QL=ga.create,$L=qt.create,KL=qt.strictCreate,XL=Xf.create,YL=Hv.create,ZL=Yf.create,JL=Xa.create,eB=Zf.create,tB=sv.create,nB=Xs.create,rB=vl.create,aB=Jf.create,iB=eh.create,oB=Qo.create,sB=th.create,uB=Ql.create,hC=xa.create,lB=Wa.create,cB=$o.create,fB=xa.createWithPreprocess,hB=Oh.create,dB=()=>KO().optional(),pB=()=>XO().optional(),vB=()=>YO().optional(),mB={string:n=>da.create({...n,coerce:!0}),number:n=>Ho.create({...n,coerce:!0}),boolean:n=>Qf.create({...n,coerce:!0}),bigint:n=>Go.create({...n,coerce:!0}),date:n=>Ks.create({...n,coerce:!0})},gB=Ge;var r7=Object.freeze({__proto__:null,defaultErrorMap:Hl,setErrorMap:fL,getErrorMap:nv,makeIssue:rv,EMPTY_PATH:hL,addIssueToContext:we,ParseStatus:Zn,INVALID:Ge,DIRTY:ul,OK:rr,isAborted:xb,isDirty:wb,isValid:$s,isAsync:Gf,get util(){return vt},get objectUtil(){return bb},ZodParsedType:Re,getParsedType:Ti,ZodType:rt,datetimeRegex:GO,ZodString:da,ZodNumber:Ho,ZodBigInt:Go,ZodBoolean:Qf,ZodDate:Ks,ZodSymbol:iv,ZodUndefined:$f,ZodNull:Kf,ZodAny:Gl,ZodUnknown:js,ZodNever:Mi,ZodVoid:ov,ZodArray:ga,ZodObject:qt,ZodUnion:Xf,ZodDiscriminatedUnion:Hv,ZodIntersection:Yf,ZodTuple:Xa,ZodRecord:Zf,ZodMap:sv,ZodSet:Xs,ZodFunction:vl,ZodLazy:Jf,ZodLiteral:eh,ZodEnum:Qo,ZodNativeEnum:th,ZodPromise:Ql,ZodEffects:xa,ZodTransformer:xa,ZodOptional:Wa,ZodNullable:$o,ZodDefault:nh,ZodCatch:rh,ZodNaN:uv,BRAND:ML,ZodBranded:Ix,ZodPipeline:Oh,ZodReadonly:ah,custom:$O,Schema:rt,ZodSchema:rt,late:FL,get ZodFirstPartyTypeKind(){return We},coerce:mB,any:qL,array:QL,bigint:BL,boolean:YO,date:zL,discriminatedUnion:YL,effect:hC,enum:oB,function:rB,instanceof:PL,intersection:ZL,lazy:aB,literal:iB,map:tB,nan:LL,nativeEnum:sB,never:HL,null:jL,nullable:cB,number:XO,object:$L,oboolean:vB,onumber:pB,optional:lB,ostring:dB,pipeline:hB,preprocess:fB,promise:uB,record:eB,set:nB,strictObject:KL,string:KO,symbol:UL,transformer:hC,tuple:JL,undefined:VL,union:XL,unknown:WL,void:GL,NEVER:gB,ZodIssueCode:ge,quotelessJson:cL,ZodError:Ir});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ZO=function(n,e){return(ZO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])})(n,e)};function _a(n,e){function t(){this.constructor=n}ZO(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ae(n,e,t,r){return new(t||(t=Promise))(function(a,i){function o(f){try{c(r.next(f))}catch(d){i(d)}}function u(f){try{c(r.throw(f))}catch(d){i(d)}}function c(f){f.done?a(f.value):new t(function(d){d(f.value)}).then(o,u)}c((r=r.apply(n,[])).next())})}function ke(n,e){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(c){return function(f){return function(d){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&d[0]?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,r=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){o=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){o.label=d[1];break}if(d[0]===6&&o.label<a[1]){o.label=a[1],a=d;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(d);break}a[2]&&o.ops.pop(),o.trys.pop();continue}d=e.call(n,o)}catch(p){d=[6,p],r=0}finally{t=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,f])}}}var yB=function(){function n(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},n.prototype.registerFlag=function(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){var a=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+a+"."),this.set(e,a)}},n.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},n.prototype.getNumber=function(e){return this.get(e)},n.prototype.getBool=function(e){return this.get(e)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},n.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},n.prototype.setFlags=function(e){this.flags=Object.assign({},e)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,a=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return bB(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),u=o[0],c=o[1];e.urlFlags[u]=function(f,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+f+".")}(u,c)})}},n}();function bB(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function ce(){return JO}var JO=null,lv=new Map,Eb=new Map;function eA(n,e){var t=nA(n,e);return lv.get(t)}function xB(n){return Eb.get(n)}function dC(n){for(var e=lv.entries(),t=[];;){var r=e.next(),a=r.done,i=r.value;if(a)break;var o=i[0],u=i[1];o.split("_")[0]===n&&t.push(u)}return t}function tA(n){var e=n.kernelName,t=n.backendName,r=nA(e,t);if(lv.has(r))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");lv.set(r,n)}function wB(n){var e=n.kernelName;Eb.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),Eb.set(e,n)}function nA(n,e){return e+"_"+n}function Sb(n,e,t){return Math.max(n,Math.min(e,t))}function rA(n){return n%2==0?n:n+1}function _B(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e}function L(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Rt(n,e,t){t===void 0&&(t=""),L(Nn(n,e),function(){return t+" Shapes "+n+" and "+e+" must match"})}function oc(n){L(n!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function $l(n,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(n)||Ha(n)&&!t)for(var r=0;r<n.length;++r)$l(n[r],e,t);else e.push(n);return e}function Ne(n){if(n.length===0)return 1;for(var e=n[0],t=1;t<n.length;t++)e*=n[t];return e}function Nn(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function rn(n){return n%1==0}function EB(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var e=Math.exp(2*n);return(e-1)/(e+1)}function Cb(n){var e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function ml(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function pC(n,e,t){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,a){var i=0,o=function(){if(n())r();else{i++;var u=e(i);t!=null&&i>=t?a():setTimeout(o,u)}};o()})}function SB(n,e){for(var t=1,r=-1,a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(n[a]<0)throw Error("Shapes can not be < 0. Found "+n[a]+" at dim "+a);if(r===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+n);return n}if(t===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var i=n.slice();return i[r]=e/t,i}function _n(n,e){var t=e.length;return L((n=n==null?e.map(function(r,a){return a}):[].concat(n)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+n}),L(n.every(function(r){return rn(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?t+r:r})}function Cs(n,e){for(var t=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||a?null:_n(e,n).sort(),o=0,u=0;u<n.length;++u){if(i!=null){if(i[o]===u&&n[u]!==1)throw new Error("Can't squeeze axis "+u+" since its dim '"+n[u]+"' is not 1");(i[o]==null||i[o]>u)&&n[u]===1&&(t.push(n[u]),r.push(u)),i[o]<=u&&o++}n[u]!==1&&(t.push(n[u]),r.push(u))}return{newShape:t,keptDims:r}}function ih(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);t=new Uint8Array(e)}return t}function cv(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else{if(n!=="string")throw new Error("Unknown data type "+n);t=new Array(e)}return t}function CB(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function RB(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function TB(n,e){return e!=="complex64"&&(e!=="float32"||n==="complex64")&&(e!=="int32"||n==="float32"||n==="complex64")&&(e!=="bool"||n!=="bool")}function Ha(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function aA(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function OB(n){if(n==null)return 0;var e=0;return n.forEach(function(t){return e+=t.length}),e}function Mx(n){return typeof n=="string"||n instanceof String}function AB(n){return typeof n=="boolean"}function kB(n){return typeof n=="number"}function Ah(n){return Array.isArray(n)?Ah(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":kB(n)?"float32":Mx(n)?"string":AB(n)?"bool":"float32"}function Rb(n){return!!(n&&n.constructor&&n.call&&n.apply)}function Tb(n,e){for(var t=e;t<n;++t)if(n%t==0)return t;return n}function Ga(n){var e=n.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=n[e-1];for(var r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function iA(n,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=$l(n)),t&&CB(n,e),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){for(var r=new Uint8Array(n.length),a=0;a<r.length;++a)Math.round(n[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+e)}function vC(n,e){if(n.length===0)return e[0];var t=n.reduce(function(r,a){return r*a});if(t===0)return[];if(t!==e.length)throw new Error("["+n+"] does not match the input size.");return function r(a,i,o){var u=new Array;if(i.length===1)for(var c=i[0],f=0;f<c;f++)u[f]=o[a+f];else{c=i[0];var d=i.slice(1),p=d.reduce(function(v,g){return v*g});for(f=0;f<c;f++)u[f]=r(a+f*p,d,o)}return u}(0,n,e)}function oA(n,e){for(var t=kh(n,e),r=0;r<t.length;r++)t[r]=1;return t}function kh(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+e)}function Ba(){return ce().platform.now()}function sA(n){n.forEach(function(e){L(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function DB(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ce().platform.encode(n,e)}function fv(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ce().platform.decode(n,e)}function mC(n,e,t){if(e===0)return 0;if(e===1)return n[0];for(var r=n[n.length-1],a=0;a<n.length-1;++a)r+=t[a]*n[a];return r}function NB(n,e,t){if(e===0)return[];if(e===1)return[n];for(var r=new Array(e),a=0;a<r.length-1;++a)r[a]=Math.floor(n/t[a]),n-=r[a]*t[a];return r[r.length-1]=n,r}var IB=function(){function n(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new MB)}return n.prototype.profileKernel=function(e,t,r){var a,i=this,o=this.backendTimer.time(function(){a=r()});return a.forEach(function(u){u.data().then(function(c){(function(f,d,p){if(d!=="float32")return!1;for(var v=0;v<f.length;v++){var g=f[v];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+p+"'"),!0}})(c,u.dtype,e),o.then(function(f){var d="";f.getExtraProfileInfo!=null&&(d=f.getExtraProfileInfo()),i.logger.logKernelProfile(e,u,c,f.kernelMs,t,d)})})}),a},n}(),MB=function(){function n(){}return n.prototype.logKernelProfile=function(e,t,r,a,i,o){var u=typeof a=="number"?ml(a+"ms",9):a.error,c=ml(e,25),f=t.rank,d=t.size,p=ml(t.shape.toString(),14),v="";for(var g in i){var y=i[g].shape||t.shape,x=y.length;v+=g+": "+x+"D "+(x>0?y:"")+" "}console.log("%c"+c+"	%c"+u+"	%c"+f+"D "+p+"	%c"+d+"	%c"+v+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}(),gC=20,pf=3,Zy=7;function FB(n,e,t,r){var a=Ga(e),i=function(f,d,p,v){var g=Ne(d),y=v[v.length-1],x=new Array(y).fill(0),w=d.length,_=p==="complex64"?mf(f):f;if(w>1)for(var S=0;S<g/y;S++)for(var C=S*y,R=0;R<y;R++)x[R]=Math.max(x[R],vf(_[C+R],0,p).length);return x}(n,e,t,a),o=e.length,u=function f(d,p,v,g,y,x){x===void 0&&(x=!0);var w=v==="complex64"?2:1,_=p[0],S=p.length;if(S===0)return v==="complex64"?[vf(mf(d)[0],0,v)]:v==="bool"?[uA(d[0])]:[d[0].toString()];if(S===1){if(_>gC){var C=pf*w,R=Array.from(d.slice(0,C)),T=Array.from(d.slice((_-pf)*w,_*w));return v==="complex64"&&(R=mf(R),T=mf(T)),["["+R.map(function(te,U){return vf(te,y[U],v)}).join(", ")+", ..., "+T.map(function(te,U){return vf(te,y[_-pf+U],v)}).join(", ")+"]"]}return["["+(v==="complex64"?mf(d):Array.from(d)).map(function(te,U){return vf(te,y[U],v)}).join(", ")+"]"]}var O=p.slice(1),k=g.slice(1),D=g[0]*w,N=[];if(_>gC){for(var M=0;M<pf;M++){var B=(z=M*D)+D;N.push.apply(N,f(d.slice(z,B),O,v,k,y,!1))}for(N.push("..."),M=_-pf;M<_;M++)B=(z=M*D)+D,N.push.apply(N,f(d.slice(z,B),O,v,k,y,M===_-1))}else for(M=0;M<_;M++){var z;B=(z=M*D)+D,N.push.apply(N,f(d.slice(z,B),O,v,k,y,M===_-1))}var ee=S===2?",":"";for(N[0]="["+N[0]+ee,M=1;M<N.length-1;M++)N[M]=" "+N[M]+ee;var re=`,
`;for(M=2;M<S;M++)re+=`
`;return N[N.length-1]=" "+N[N.length-1]+"]"+(x?"":re),N}(n,e,t,a,i),c=["Tensor"];return r&&(c.push("  dtype: "+t),c.push("  rank: "+o),c.push("  shape: ["+e+"]"),c.push("  values:")),c.push(u.map(function(f){return"    "+f}).join(`
`)),c.join(`
`)}function vf(n,e,t){return ml(Array.isArray(n)?parseFloat(n[0].toFixed(Zy))+" + "+parseFloat(n[1].toFixed(Zy))+"j":Mx(n)?"'"+n+"'":t==="bool"?uA(n):parseFloat(n.toFixed(Zy)).toString(),e)}function uA(n){return n===0?"false":"true"}function mf(n){for(var e=[],t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}var oh=function(){function n(e,t,r){var a=this;if(this.dtype=t,this.shape=e.slice(),this.size=Ne(e),r!=null){var i=r.length;L(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||cv(t,this.size),this.strides=Ga(e)}return n.prototype.set=function(e){for(var t=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),L(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var i=this.locToIndex(r);this.values[i]=e},n.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var r=0,a=0,i=e;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var u="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(u)}r++}for(var c=e[e.length-1],f=0;f<e.length-1;++f)c+=this.strides[f]*e[f];return this.values[c]},n.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},n.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return Ua().makeTensor(this.values,this.shape,this.dtype)},n}(),Ua=null,le=null,lA=null,Wt=function(){function n(e,t,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Ne(e),this.strides=Ga(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),L(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},n.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},n.prototype.as4D=function(e,t,r,a){return this.throwIfDisposed(),this.reshape([e,t,r,a])},n.prototype.as5D=function(e,t,r,a,i){return this.throwIfDisposed(),this.reshape([e,t,r,a,i])},n.prototype.asType=function(e){return this.throwIfDisposed(),le.cast(this,e)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return Ae(this,void 0,void 0,function(){var e;return ke(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,le.buffer(this.shape,this.dtype,e)]}})})},n.prototype.bufferSync=function(){return le.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return Ae(this,void 0,void 0,function(){var e;return ke(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,vC(this.shape,e)]}})})},n.prototype.arraySync=function(){return vC(this.shape,this.dataSync())},n.prototype.data=function(){return Ae(this,void 0,void 0,function(){var e,t;return ke(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Ua().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=r.sent();try{return[2,t.map(function(a){return fv(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var e=Ua().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(t){return fv(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},n.prototype.bytes=function(){return Ae(this,void 0,void 0,function(){var e;return ke(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Ua().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(Ua().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(e){return e===void 0&&(e=!1),le.print(this,e)},n.prototype.reshape=function(e){return this.throwIfDisposed(),le.reshape(this,e)},n.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},n.prototype.expandDims=function(e){return e===void 0&&(e=0),le.expandDims(this,e)},n.prototype.cumsum=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1),le.cumsum(this,e,t,r)},n.prototype.squeeze=function(e){return this.throwIfDisposed(),le.squeeze(this,e)},n.prototype.clone=function(){return this.throwIfDisposed(),le.clone(this)},n.prototype.oneHot=function(e,t,r){return this.throwIfDisposed(),le.oneHot(this,e,t,r)},n.prototype.toString=function(e){return e===void 0&&(e=!1),FB(this.dataSync(),this.shape,this.dtype,e)},n.prototype.tile=function(e){return this.throwIfDisposed(),le.tile(this,e)},n.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),le.gather(this,e,t)},n.prototype.matMul=function(e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),le.matMul(this,e,t,r)},n.prototype.dot=function(e){return this.throwIfDisposed(),le.dot(this,e)},n.prototype.norm=function(e,t,r){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),le.norm(this,e,t,r)},n.prototype.slice=function(e,t){return this.throwIfDisposed(),le.slice(this,e,t)},n.prototype.reverse=function(e){return this.throwIfDisposed(),le.reverse(this,e)},n.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof n&&(e=[e]),le.concat([this].concat(e),t)},n.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),le.split(this,e,t)},n.prototype.stack=function(e,t){return t===void 0&&(t=0),le.stack([this,e],t)},n.prototype.unstack=function(e){return e===void 0&&(e=0),le.unstack(this,e)},n.prototype.pad=function(e,t){return t===void 0&&(t=0),le.pad(this,e,t)},n.prototype.batchNormalization=function(e,t,r,a,i){return r===void 0&&(r=.001),lA("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,a,r)},n.prototype.batchNorm=function(e,t,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),le.batchNorm(this,e,t,r,a,i)},n.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.all(this,e,t)},n.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.any(this,e,t)},n.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.logSumExp(this,e,t)},n.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.sum(this,e,t)},n.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.prod(this,e,t)},n.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.mean(this,e,t)},n.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.min(this,e,t)},n.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),le.max(this,e,t)},n.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),le.argMin(this,e)},n.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),le.argMax(this,e)},n.prototype.cast=function(e){return this.throwIfDisposed(),le.cast(this,e)},n.prototype.add=function(e){return this.throwIfDisposed(),le.add(this,e)},n.prototype.addStrict=function(e){return this.throwIfDisposed(),le.addStrict(this,e)},n.prototype.atan2=function(e){return this.throwIfDisposed(),le.atan2(this,e)},n.prototype.sub=function(e){return this.throwIfDisposed(),le.sub(this,e)},n.prototype.subStrict=function(e){return this.throwIfDisposed(),le.subStrict(this,e)},n.prototype.pow=function(e){return this.throwIfDisposed(),le.pow(this,e)},n.prototype.powStrict=function(e){return this.throwIfDisposed(),le.powStrict(this,e)},n.prototype.mul=function(e){return this.throwIfDisposed(),le.mul(this,e)},n.prototype.mulStrict=function(e){return this.throwIfDisposed(),le.mulStrict(this,e)},n.prototype.div=function(e){return this.throwIfDisposed(),le.div(this,e)},n.prototype.divNoNan=function(e){return this.throwIfDisposed(),le.divNoNan(this,e)},n.prototype.floorDiv=function(e){return this.throwIfDisposed(),le.floorDiv(this,e)},n.prototype.divStrict=function(e){return this.throwIfDisposed(),le.divStrict(this,e)},n.prototype.minimum=function(e){return this.throwIfDisposed(),le.minimum(this,e)},n.prototype.minimumStrict=function(e){return this.throwIfDisposed(),le.minimumStrict(this,e)},n.prototype.maximum=function(e){return this.throwIfDisposed(),le.maximum(this,e)},n.prototype.maximumStrict=function(e){return this.throwIfDisposed(),le.maximumStrict(this,e)},n.prototype.mod=function(e){return this.throwIfDisposed(),le.mod(this,e)},n.prototype.modStrict=function(e){return this.throwIfDisposed(),le.modStrict(this,e)},n.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),le.squaredDifferenceStrict(this,e)},n.prototype.transpose=function(e){return this.throwIfDisposed(),le.transpose(this,e)},n.prototype.notEqual=function(e){return this.throwIfDisposed(),le.notEqual(this,e)},n.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),le.notEqualStrict(this,e)},n.prototype.less=function(e){return this.throwIfDisposed(),le.less(this,e)},n.prototype.lessStrict=function(e){return this.throwIfDisposed(),le.lessStrict(this,e)},n.prototype.equal=function(e){return this.throwIfDisposed(),le.equal(this,e)},n.prototype.equalStrict=function(e){return this.throwIfDisposed(),le.equalStrict(this,e)},n.prototype.lessEqual=function(e){return this.throwIfDisposed(),le.lessEqual(this,e)},n.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),le.lessEqualStrict(this,e)},n.prototype.greater=function(e){return this.throwIfDisposed(),le.greater(this,e)},n.prototype.greaterStrict=function(e){return this.throwIfDisposed(),le.greaterStrict(this,e)},n.prototype.greaterEqual=function(e){return this.throwIfDisposed(),le.greaterEqual(this,e)},n.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),le.greaterEqualStrict(this,e)},n.prototype.logicalAnd=function(e){return this.throwIfDisposed(),le.logicalAnd(this,e)},n.prototype.logicalOr=function(e){return this.throwIfDisposed(),le.logicalOr(this,e)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),le.logicalNot(this)},n.prototype.logicalXor=function(e){return this.throwIfDisposed(),le.logicalXor(this,e)},n.prototype.where=function(e,t){return this.throwIfDisposed(),le.where(e,this,t)},n.prototype.neg=function(){return this.throwIfDisposed(),le.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),le.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),le.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),le.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),le.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),le.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),le.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),le.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),le.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),le.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),le.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),le.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),le.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),le.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),le.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),le.abs(this)},n.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),le.clipByValue(this,e,t)},n.prototype.relu=function(){return this.throwIfDisposed(),le.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),le.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),le.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),le.selu(this)},n.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),le.leakyRelu(this,e)},n.prototype.prelu=function(e){return this.throwIfDisposed(),le.prelu(this,e)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),le.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),le.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),le.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),le.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),le.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),le.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),le.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),le.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),le.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),le.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),le.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),le.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),le.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),le.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),le.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),le.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),le.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),le.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),le.round(this)},n.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),le.step(this,e)},n.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),le.softmax(this,e)},n.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),le.logSoftmax(this,e)},n.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),le.image.resizeBilinear(this,e,t)},n.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),le.image.resizeNearestNeighbor(this,e,t)},n.prototype.conv1d=function(e,t,r,a,i,o){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),le.conv1d(this,e,t,r,a,i,o)},n.prototype.conv2d=function(e,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),le.conv2d(this,e,t,r,a,i,o)},n.prototype.conv2dTranspose=function(e,t,r,a,i){return this.throwIfDisposed(),le.conv2dTranspose(this,e,t,r,a,i)},n.prototype.depthwiseConv2D=function(e,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),le.depthwiseConv2d(this,e,t,r,a,i,o)},n.prototype.separableConv2d=function(e,t,r,a,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),le.separableConv2d(this,e,t,r,a,i,o)},n.prototype.avgPool=function(e,t,r,a){return this.throwIfDisposed(),le.avgPool(this,e,t,r,a)},n.prototype.maxPool=function(e,t,r,a){return this.throwIfDisposed(),le.maxPool(this,e,t,r,a)},n.prototype.localResponseNormalization=function(e,t,r,a){return e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5),le.localResponseNormalization(this,e,t,r,a)},n.prototype.pool=function(e,t,r,a,i){return this.throwIfDisposed(),le.pool(this,e,t,r,a,i)},n.prototype.variable=function(e,t,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Ua().makeVariable(this,e,t,r)},n.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),le.unsortedSegmentSum(this,e,t)},n.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),le.batchToSpaceND(this,e,t)},n.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),le.spaceToBatchND(this,e,t)},n.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),le.topk(this,e,t)},n.prototype.stridedSlice=function(e,t,r,a,i,o,u,c){return a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),this.throwIfDisposed(),le.stridedSlice(this,e,t,r,a,i,o,u,c)},n.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),le.depthToSpace(this,e,t)},n.prototype.fft=function(){return this.throwIfDisposed(),le.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),le.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),le.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),le.spectral.irfft(this)},n}();Object.defineProperty(Wt,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var yC,Ob,Ab,kb,Db,Kl=function(n){function e(t,r,a,i){var o=n.call(this,t.shape,t.dtype,t.dataId,i)||this;return o.trainable=r,o.name=a,o}return _a(e,n),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!Nn(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");Ua().disposeTensor(this),this.dataId=t.dataId,Ua().incRef(this,null)},e.prototype.dispose=function(){Ua().disposeVariable(this),this.isDisposedInternal=!0},e}(Wt);Object.defineProperty(Kl,Symbol.hasInstance,{value:function(n){return n instanceof Wt&&n.assign!=null&&n.assign instanceof Function}}),function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"}(yC||(yC={})),function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(Ob||(Ob={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(Ab||(Ab={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(kb||(kb={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(Db||(Db={}));var PB={float32:kb,int32:Ob,bool:Ab,complex64:Db};function Un(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error("Can not upcast "+n+" with "+e)}return PB[n][e]}function Jy(n){return Un(n,"int32")}function Qt(n,e){if(n.dtype===e.dtype)return[n,e];var t=Un(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function LB(n,e){L(n.dtype===e.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+e.dtype+") input must match"})}function cA(n){var e=[];return function t(r,a,i){if(r!=null){if(r instanceof Wt)return void a.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,u=r;for(var c in u){var f=u[c];i.has(f)||(i.add(f),t(f,a,i))}}}}(n,e,new Set),e}var e0,bC=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},n}(),BB=function(){function n(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new bC}return n.prototype.ready=function(){return Ae(this,void 0,void 0,function(){var e,t,r;return ke(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,a.label=1;case 1:return t<e.length?(r=e[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},n.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},n.prototype.registerBackend=function(e,t,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:r},!0)},n.prototype.setBackend=function(e){return Ae(this,void 0,void 0,function(){var t,r,a;return ke(this,function(i){switch(i.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new IB(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var e=this;dC(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)})},n.prototype.disposeRegisteredKernels=function(e){var t=this;dC(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[e])})},n.prototype.initializeBackend=function(e){var t=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,o=a.then(function(u){return!(i<t.pendingBackendInitId)&&(t.registry[e]=u,t.pendingBackendInit=null,!0)}).catch(function(u){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(u.stack||u.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=a,{success:!0,asyncInit:!1}}catch(u){return console.warn("Initialization of backend "+e+" failed"),console.warn(u.stack||u.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return e.registryFactory[r].priority-e.registryFactory[t].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var r=e[t],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(e,t){var r=this.state.tensorInfo.get(t),a=r.backend,i=this.readSync(t);a.disposeData(t),r.backend=e,e.move(t,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(e,t){var r,a=this,i=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return a.startScope(i)},function(){return a.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(e,t,r){e();try{var a=r();return t(),a}catch(i){throw t(),i}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],function(a){return{x:function(){return a.toFloat()}}},[]),t},n.prototype.runKernel=function(e,t,r,a,i){return this.runKernelFunc(null,t,null,e,r,a,i)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(e,t,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=a-t-i-o;if(u>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+u+" data ids) after running '"+e+"'")},n.prototype.runKernelFunc=function(e,t,r,a,i,o,u){var c,f=this;o===void 0&&(o=[]),u===void 0&&(u=[]);var d=[],p=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var v,g=function(S){p&&(d=S.map(function(C){return f.keep(f.clone(C))}))},y=this.state.numBytes,x=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,_=eA(a,this.backendName);return v=_!=null?function(){var S=f.backend.numDataIds();w=_.kernelFunc({inputs:t,attrs:i,backend:f.backend});var C=Array.isArray(w)?w:[w];f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,S,C);var R=C.map(function(O){var k=O.dataId,D=O.shape,N=O.dtype;return f.makeTensorFromDataId(k,D,N)}),T=R.filter(function(O,k){return u[k]});return g((o||[]).slice().concat(T)),R}:function(){var S=f.backend.numDataIds();w=f.tidy(function(){return e(f.backend,g)});var C=Array.isArray(w)?w:[w];return f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,S,C),C},this.scopedRun(function(){return f.state.kernelDepth++},function(){return f.state.kernelDepth--},function(){c=f.ENV.getBool("DEBUG")?f.profiler.profileKernel(a,t,function(){return v()}):v()}),p&&this.addTapeNode(a,t,c,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-x,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(S){return t[S].shape}),outputShapes:c.map(function(S){return S.shape})}),Array.isArray(w)?c:c[0]},n.prototype.makeTensor=function(e,t,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=e;r==="string"&&Mx(e[0])&&(i=e.map(function(d){return DB(d)}));var o=a.write(i,t,r),u=new Wt(t,r,o,this.nextTensorId());if(this.incRef(u,a),r==="string"){var c=this.state.tensorInfo.get(o),f=OB(i);this.state.numBytes+=f-c.bytes,c.bytes=f}return u},n.prototype.makeTensorFromDataId=function(e,t,r,a){var i=new Wt(t,r=r||"float32",e,this.nextTensorId());return this.incRef(i,a),i},n.prototype.makeVariable=function(e,t,r,a){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.asType(a));var i=new Kl(e,t,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},n.prototype.incRef=function(e,t){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(a=e.size*aA(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Kl||this.track(e)},n.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},n.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},n.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},n.prototype.profile=function(e){return Ae(this,void 0,void 0,function(){var t,r;return ke(this,function(a){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(e,t,r,a,i){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:i},c=xB(e);c!=null&&(a=c.gradFunc),a!=null&&(u.gradient=function(f){return f=f.map(function(d,p){if(d==null){var v=r[p],g=kh(v.size,v.dtype);return o.makeTensor(g,v.shape,v.dtype)}return d}),a(f.length>1?f:f[0],i)}),this.state.activeTape.push(u)},n.prototype.keep=function(e){return e.kept=!0,e},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},n.prototype.endScope=function(e){for(var t=this,r=cA(e),a=new Set(r.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||a.has(o.id)||o.dispose()}var u=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(c){c.kept||c.scopeId!==u.id||t.track(c)})},n.prototype.gradients=function(e,t,r,a){var i=this;if(a===void 0&&(a=!1),L(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)});L(o instanceof Wt,function(){return"The result y returned by f() must be a tensor."});var u=function(c,f,d){for(var p={},v={},g=0;g<f.length;g++)p[f[g].id]=!0;for(g=0;g<c.length;g++){var y=(O=c[g]).inputs;for(var x in y){for(var w=y[x],_=!1,S=0;S<f.length;S++)if(p[w.id]){O.outputs.forEach(function(M){return p[M.id]=!0}),_=!0,v[O.id]=!0;break}if(_)break}}var C={};C[d.id]=!0;var R={};for(g=c.length-1;g>=0;g--)for(y=(O=c[g]).inputs,S=0;S<O.outputs.length;S++)if(C[O.outputs[S].id]){for(var x in y)C[y[x].id]=!0,R[O.id]=!0;break}var T=[];for(g=0;g<c.length;g++){var O;if(v[(O=c[g]).id]&&R[O.id]){var k={};for(var x in O.inputs){var D=O.inputs[x];p[D.id]&&(k[x]=D)}var N=Object.assign({},O);N.inputs=k,N.outputs=O.outputs,T.push(N)}}return T}(this.state.activeTape,t,o);if(!a&&u.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,f,d={};d[o.id]=r??(c=o.shape,f=oA(Ne(c),"float32"),G.makeTensor(f,c,"float32")),function(v,g,y){for(var x=function(_){var S=g[_],C=[];if(S.outputs.forEach(function(k){var D=v[k.id];D!=null?C.push(D):C.push(null)}),S.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+S.kernelName+".");var R=S.gradient(C),T=function(k){if(!(k in R))throw new Error("Cannot backprop through input "+k+". Available gradients found: "+Object.keys(R)+".");var D=y(function(){return R[k]()});if(D.dtype!=="float32")throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input "+k+" must have 'float32' dtype, but has '"+D.dtype+"'");var N=S.inputs[k];if(!Nn(D.shape,N.shape))throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input '"+k+"' has shape '"+D.shape+"', which does not match the shape of the input '"+N.shape+"'");if(v[N.id]==null)v[N.id]=D;else{var M=v[N.id];v[N.id]=M.add(D),M.dispose()}};for(var O in S.inputs)T(O)},w=g.length-1;w>=0;w--)x(w)}(d,u,function(v){return i.tidy(v)});var p=t.map(function(v){return d[v.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(v){for(var g=0,y=v.saved;g<y.length;g++)y[g].dispose()}),i.state.activeTape=null),{value:o,grads:p}})},n.prototype.customGrad=function(e){var t=this;return L(Rb(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];L(a.every(function(u){return u instanceof Wt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return a.forEach(function(u,c){o[c]=u}),t.runKernelFunc(function(u,c){return L((r=e.apply(void 0,a.concat([c]))).value instanceof Wt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),L(Rb(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(u,c){var f=r.gradFunc(u,c),d=Array.isArray(f)?f:[f];L(d.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),L(d.every(function(v){return v instanceof Wt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return d.forEach(function(v,g){p[g]=function(){return v}}),p})}},n.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},n.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},n.prototype.time=function(e){return Ae(this,void 0,void 0,function(){var t,r;return ke(this,function(a){switch(a.label){case 0:return t=Ba(),[4,this.backend.time(e)];case 1:return(r=a.sent()).wallMs=Ba()-t,[2,r]}})})},n.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new bC,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),G=function(){var n=function(){if(e0==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}e0=t}return e0}();if(n._tfengine==null){var e=new yB(n);n._tfengine=new BB(e)}return function(t){JO=t}(n._tfengine.ENV),Ua=function(){return n._tfengine},n._tfengine}();function fA(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var _i=ce();_i.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),_i.registerFlag("IS_BROWSER",function(){return fA()}),_i.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),_i.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),_i.registerFlag("PROD",function(){return!1}),_i.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return _i.getBool("DEBUG")}),_i.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),_i.registerFlag("IS_TEST",function(){return!1});var sh,kr,Ar,_s={},t0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function zB(n,e){_s[n]=e}function ni(n){n in _s||(_s[n]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete _s[t]},!1),t===1?r.getContext("webgl",t0)||r.getContext("experimental-webgl",t0):r.getContext("webgl2",t0)}(n));var e=_s[n];return e.isContextLost()?(delete _s[n],ni(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),_s[n])}function Gv(n,e){return[e,n]}function If(n){var e=Ne(n);return Cb(Math.ceil(e/4))}function Dh(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function Fx(n,e){var t,r,a,i,o,u,c,f,d,p=n;return ce().getNumber("WEBGL_VERSION")===2?(t=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,u=4,c=1,f=p.HALF_FLOAT,d=p.FLOAT):(t=n.RGBA,r=n.RGBA,a=n.RGBA,i=p.RGBA,o=n.RGBA,u=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,d=n.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:d}}function Me(n,e,t){var r=t();return e&&function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+qB(a,i))}(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(sh||(sh={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(kr||(kr={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Ar||(Ar={}));var UB=596e-10,VB=65504;function jB(n){return!!(ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||UB<Math.abs(n)&&Math.abs(n)<VB)}function qB(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function up(n,e,t){return Bi(n,e,function(){return n.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function WB(n,e,t){var r=Bi(n,e,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Me(n,e,function(){return n.shaderSource(r,t)}),Me(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function HB(n,e,t){var r=Bi(n,e,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Me(n,e,function(){return n.shaderSource(r,t)}),Me(n,e,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw function(a,i){var o=GB.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var u=+o[1],c=a.split(`
`),f=c.length.toString().length+2,d=c.map(function(w,_){return ml((_+1).toString(),f)+w}),p=0,v=0;v<d.length;v++)p=Math.max(d[v].length,p);var g=d.slice(0,u-1),y=d.slice(u-1,u),x=d.slice(u);console.log(g.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+ml(y[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(x.join(`
`))}(t,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var n0,r0,GB=/ERROR: [0-9]+:([0-9]+):/g;function QB(n,e){return Bi(n,e,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function $B(n,e,t){if(Me(n,e,function(){return n.linkProgram(t)}),n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function a0(n,e,t){if(Me(n,e,function(){return n.validateProgram(t)}),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function KB(n,e,t){var r=Bi(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Me(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),Me(n,e,function(){return n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function XB(n,e,t){var r=Bi(n,e,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Me(n,e,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),Me(n,e,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)}),r}function YB(n,e){return Bi(n,e,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function ZB(n,e){var t=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){var r="["+n+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t)throw r="["+n+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function JB(n,e){return Bi(n,e,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function xC(n,e,t,r,a,i,o,u){var c=n.getAttribLocation(t,r);return c!==-1&&(Me(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,a)}),Me(n,e,function(){return n.vertexAttribPointer(c,i,n.FLOAT,!1,o,u)}),Me(n,e,function(){return n.enableVertexAttribArray(c)}),!0)}function ez(n,e,t,r){iz(n,r),Me(n,e,function(){return n.activeTexture(n.TEXTURE0+r)}),Me(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)})}function tz(n,e,t,r){return Bi(n,e,function(){return n.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function nz(n,e,t){return n.getUniformLocation(e,t)}function rz(n,e,t,r,a,i){Me(n,e,function(){return ez(n,e,r,i)}),Me(n,e,function(){return n.uniform1i(a,i)})}function i0(n,e,t,r){Me(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),Me(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)})}function wC(n,e,t){Me(n,e,function(){return n.bindFramebuffer(n.FRAMEBUFFER,t)}),Me(n,e,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function lp(n){var e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+az(n,e))}function az(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Bi(n,e,t,r){var a=Me(n,e,function(){return t()});if(a==null)throw new Error(r);return a}function iz(n,e){var t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function hv(n,e){return e===void 0&&(e=2),Ne(n.slice(0,n.length-e))}function dv(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function o0(n){var e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[hv(n)].concat(dv(n))),e}function oz(n,e){var t;e===void 0&&(e=!1);var r=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(n=n.map(function(f,d){return d>=n.length-2?rA(n[d]):n[d]})).length===1&&(n=[2,n[0]])),n.length!==2){var a=Cs(n);n=a.newShape}var i=Ne(n);if(n.length<=1&&i<=r)return[1,i];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(e){var o=hv(n),u=2,c=2;return n.length&&(u=(t=dv(n))[0],c=t[1]),Cb(i=o*(u/2)*(c/2)).map(function(f){return 2*f})}return Cb(i)}function cp(n){return n%2==0}function fp(n,e){if(Nn(n=n.slice(-2),e=e.slice(-2))||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){var t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||cp(t)&&cp(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&cp(n[0])&&cp(e[0])}function sz(n){if(n0==null){var e=ni(n);n0=e.getParameter(e.MAX_TEXTURE_SIZE)}return n0}function uz(n){if(r0==null){var e=ni(n);r0=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,r0)}function lz(n){if(n===0)return 0;var e=ni(n);return Yr(e,"EXT_disjoint_timer_query_webgl2")&&n===2?2:Yr(e,"EXT_disjoint_timer_query")?1:0}function Yr(n,e){return n.getExtension(e)!=null}function _C(n){try{if(ni(n)!=null)return!0}catch{return!1}return!1}function cz(n){if(n===0)return!1;var e=ni(n);if(n===1){if(!Yr(e,"OES_texture_float"))return!1}else if(!Yr(e,"EXT_color_buffer_float"))return!1;return Nb(e)}function fz(n){if(n===0)return!1;var e=ni(n);if(n!==1){if(Yr(e,"EXT_color_buffer_float"))return Nb(e);if(Yr(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return function(r,a){var i=Fx(r,a),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var u=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,u),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(u),c}(e,t)}return!1}return!!Yr(e,"OES_texture_float")&&!!Yr(e,"WEBGL_color_buffer_float")&&Nb(e)}function Nb(n){var e=Fx(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(r),a}function hz(n){return n===2&&ni(n).fenceSync!=null}var Qe=ce();function hA(n){ce().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Te(n,e){return G.tidy(n,e)}function gr(n){cA(n).forEach(function(e){return e.dispose()})}function dz(n){return G.keep(n)}function pv(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];ce().getBool("IS_TEST")||console.warn.apply(console,n)}function ts(n,e){var t=n;if(Ha(n))return e==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(t)||Ha(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&ce().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(i,o,u){if(u=u||[],!Array.isArray(i)&&!Ha(i))return void L(o.length===0,function(){return"Element arr["+u.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});L(o.length>0,function(){return"Element arr["+u.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),L(i.length===o[0],function(){return"Element arr["+u.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),f=0;f<i.length;++f)a(i[f],c,u.concat(f))}(n,r,[]),r}function EC(n,e,t,r){if(n!=null&&(n!=="numeric"&&n!==e||n==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+n+" tensor, but got "+e+" tensor")}function P(n,e,t,r){if(r===void 0&&(r="numeric"),n instanceof Wt)return EC(r,n.dtype,e,t),n;var a=Ah(n);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),EC(r,a,e,t),n==null||!Ha(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var i=n==null?"null":n.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=ts(n,a);Ha(n)||Array.isArray(n)||(n=[n]);var u=a!=="string"?iA(n,a,ce().getBool("DEBUG")):$l(n,[],!0);return G.makeTensor(u,o,a)}function vv(n,e,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(a,i){return P(a,e+"["+i+"]",t)},r)}function dA(n,e){for(var t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function pz(n,e,t){for(var r=n.length+e.length,a=[],i=0,o=0,u=0;u<r;u++)t.indexOf(u)===-1?a.push(n[i++]):a.push(e[o++]);return a}function Qn(n,e){for(var t=[],r=n.length,a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);return[t,e.map(function(i){return n[i]})]}function yr(n,e){return pz(n,e.map(function(t){return 1}),e)}function Or(n,e,t){L(dA(e,t),function(){return n+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."})}function ri(n,e){if(dA(n,e))return null;for(var t=[],r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(function(a){return t.push(a)}),t}function Px(n){return n.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function ai(n,e){for(var t=[],r=e-n;r<e;++r)t.push(r);return t}function vz(n,e){var t=n[0].length;n.forEach(function(a,i){L(a.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+t+")"})}),L(e>=0&&e<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=n[0];n.forEach(function(a,i){for(var o=0;o<t;o++)L(o===e||a[o]===r[o],function(){return"Error in concat"+t+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Xl(n,e){for(var t=n[0].slice(),r=1;r<n.length;r++)t[e]+=n[r][e];return t}function q(n){var e=Object.keys(n);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];G.startScope(t);try{var u=r.apply(void 0,i);return u instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),G.endScope(u),u}catch(c){throw G.endScope(null),c}};return Object.defineProperty(a,"name",{value:t,configurable:!0}),a}Qe.registerFlag("HAS_WEBGL",function(){return Qe.getNumber("WEBGL_VERSION")>0}),Qe.registerFlag("WEBGL_VERSION",function(){return _C(2)?2:_C(1)?1:0}),Qe.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Qe.get("WEBGL_VERSION")===2}),Qe.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Qe.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Qe.registerFlag("WEBGL_PACK",function(){return Qe.getBool("HAS_WEBGL")}),Qe.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_CLIP",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Qe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_PACK_REDUCE",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_CONV_IM2COL",function(){return Qe.getBool("WEBGL_PACK")}),Qe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return sz(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return uz(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=Qe.getNumber("WEBGL_VERSION");return n===0?0:lz(n)}),Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Qe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),Qe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return cz(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Qe.getBool("WEBGL_FORCE_F16_TEXTURES")&&Qe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Qe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return fz(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return hz(Qe.getNumber("WEBGL_VERSION"))}),Qe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Qe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),lA=hA;var zn=q({complex_:function(n,e){var t=P(n,"real","complex"),r=P(e,"imag","complex");return Rt(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),G.runKernelFunc(function(a){return a.complex(t,r)},{$real:t,$imag:r})}}),Xr=q({real_:function(n){var e=P(n,"input","real");return G.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),Va=q({imag_:function(n){var e=P(n,"input","imag");return G.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function Vn(n,e,t){return ns(n,e,ts(n,t),t)}function ns(n,e,t,r){if(r==null&&(r=Ah(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ha(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){sA(e);var a=Ne(e),i=Ne(t);L(a===i,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+a+" values but has "+i});for(var o=0;o<t.length;++o){var u=t[o],c=o!==t.length-1||u!==Ne(e.slice(o));L(t[o]===e[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "})}}return Ha(n)||Array.isArray(n)||(n=[n]),e=e||t,n=r!=="string"?iA(n,r,ce().getBool("DEBUG")):$l(n,[],!0),G.makeTensor(n,e,r)}function xe(n,e){if((Ha(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Ha(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ns(n,[],[],e)}function cn(n,e){oc(n);var t=ts(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ns(n,null,t,e)}function Uo(n,e,t){if(oc(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=ts(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ns(n,e,r,t)}function Lx(n,e,t){if(oc(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=ts(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ns(n,e,r,t)}function pr(n,e,t){if(oc(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=ts(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ns(n,e,r,t)}function mz(n,e,t){if(oc(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=ts(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ns(n,e,r,t)}function gz(n,e,t){if(oc(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=ts(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ns(n,e=e||r,r,t)}function yz(n,e,t,r){return e===void 0&&(e=!0),G.makeVariable(n,e,t,r)}function sc(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=sc(n,"float32"),r=Ut(n,"float32");return zn(t,r)}var a=oA(Ne(n),e);return G.makeTensor(a,n,e)}function Ut(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=Ut(n,"float32"),r=Ut(n,"float32");return zn(t,r)}var a=kh(Ne(n),e);return G.makeTensor(a,n,e)}function Qa(n,e,t){return G.runKernelFunc(function(r){return r.fill(n,e,t)},{})}function bz(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");return G.runKernelFunc(function(r){return r.linspace(n,e,t)},{})}function mv(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(n===e||n<e&&t<0||e<n&&t>1)return Ut([0],r);var a=kh(Math.abs(Math.ceil((e-n)/t)),r);e<n&&t===1&&(t=-1),a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+t;return cn(a,r)}var pA=q({onesLike_:function(n){var e=P(n,"x","onesLike");if(e.dtype==="complex64"){var t=pA(Xr(e)),r=mt(Va(e));return zn(t,r)}return G.runKernelFunc(function(a){return a.onesLike(e)},{$x:e},function(a,i){return{$x:function(){return mt(a)}}})}}),mt=q({zerosLike_:function(n){var e=P(n,"x","zerosLike");return G.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,r){return{$x:function(){return mt(t)}}})}}),yn=q({concat_:function(n,e){e===void 0&&(e=0),L(n.length>=1,function(){return"Pass at least one tensor to concat"});var t=vv(n,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(u){if(u.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+u.dtype+". ")}),e=_n(e,t[0].shape)[0];var r=Xl(t.map(function(u){return u.shape}),e);if(Ne(r)===0)return Vn([],r);if((t=t.filter(function(u){return u.size>0})).length===1)return t[0];var a=t.map(function(u){return u.shape});vz(a,e);var i=t,o={axis:e};return G.runKernelFunc(function(u){return u.concat(t,e)},i,function(u){var c=a.map(function(f){return f[e]});return Bx(u,c,e).map(function(f){return function(){return f}})},"Concat",o)}}),xz=q({concat1d_:function(n){return yn(n,0)}}),wz=q({concat2d_:function(n,e){return yn(n,e)}}),_z=q({concat3d_:function(n,e){return yn(n,e)}}),Ez=q({concat4d_:function(n,e){return yn(n,e)}}),Bx=q({split_:function(n,e,t){t===void 0&&(t=0);var r,a=P(n,"x","split");return t=_n(t,a.shape)[0],typeof e=="number"?(L(a.shape[t]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(a.shape[t]/e)):(L(a.shape[t]===e.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),G.runKernelFunc(function(i){return i.split(a,r,t)},{$x:a},function(i){return{$x:function(){return yn(i,t)}}})}});function tu(n,e){return n(e={exports:{}},e.exports),e.exports}var Sz=tu(function(n){(function(e,t,r){function a(u){var c,f=this,d=(c=4022871197,function(p){p=p.toString();for(var v=0;v<p.length;v++){var g=.02519603282416938*(c+=p.charCodeAt(v));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});f.next=function(){var p=2091639*f.s0+23283064365386963e-26*f.c;return f.s0=f.s1,f.s1=f.s2,f.s2=p-(f.c=0|p)},f.c=1,f.s0=d(" "),f.s1=d(" "),f.s2=d(" "),f.s0-=d(u),f.s0<0&&(f.s0+=1),f.s1-=d(u),f.s1<0&&(f.s1+=1),f.s2-=d(u),f.s2<0&&(f.s2+=1),d=null}function i(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var f=new a(u),d=c&&c.state,p=f.next;return p.int32=function(){return 4294967296*f.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.alea=o})(0,n)}),Cz=tu(function(n){(function(e,t,r){function a(u){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var p=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^p^p>>>8},u===(0|u)?c.x=u:f+=u;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor128=o})(0,n)}),Rz=tu(function(n){(function(e,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^p^p<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,u===(0|u)?c.x=u:f+=u;for(var d=0;d<f.length+64;d++)c.x^=0|f.charCodeAt(d),d==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c.v=u.v,c.d=u.d,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorwow=o})(0,n)}),Tz=tu(function(n){(function(e,t,r){function a(u){var c=this;c.next=function(){var f,d,p=c.x,v=c.i;return f=p[v],d=(f^=f>>>7)^f<<24,d^=(f=p[v+1&7])^f>>>10,d^=(f=p[v+3&7])^f>>>3,d^=(f=p[v+4&7])^f<<7,f=p[v+7&7],d^=(f^=f<<13)^f<<9,p[v]=d,c.i=v+1&7,d},function(f,d){var p,v=[];if(d===(0|d))v[0]=d;else for(d=""+d,p=0;p<d.length;++p)v[7&p]=v[7&p]<<15^d.charCodeAt(p)+v[p+1&7]<<13;for(;v.length<8;)v.push(0);for(p=0;p<8&&v[p]===0;++p);for(p==8?v[7]=-1:v[p],f.x=v,f.i=0,p=256;p>0;--p)f.next()}(c,u)}function i(u,c){return c.x=u.x.slice(),c.i=u.i,c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.x&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorshift7=o})(0,n)}),Oz=tu(function(n){(function(e,t,r){function a(u){var c=this;c.next=function(){var f,d,p=c.w,v=c.X,g=c.i;return c.w=p=p+1640531527|0,d=v[g+34&127],f=v[g=g+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,d=v[g]=d^f,c.i=g,d+(p^p>>>16)|0},function(f,d){var p,v,g,y,x,w=[],_=128;for(d===(0|d)?(v=d,d=null):(d+="\0",v=0,_=Math.max(_,d.length)),g=0,y=-32;y<_;++y)d&&(v^=d.charCodeAt((y+32)%d.length)),y===0&&(x=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,y>=0&&(x=x+1640531527|0,g=(p=w[127&y]^=v+x)==0?g+1:0);for(g>=128&&(w[127&(d&&d.length||0)]=-1),g=127,y=512;y>0;--y)v=w[g+34&127],p=w[g=g+1&127],v^=v<<13,p^=p<<17,v^=v>>>15,p^=p>>>12,w[g]=v^p;f.w=x,f.X=w,f.i=g}(c,u)}function i(u,c){return c.i=u.i,c.w=u.w,c.X=u.X.slice(),c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(d.X&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor4096=o})(0,n)}),Az=tu(function(n){(function(e,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.b,v=c.c,g=c.d,y=c.a;return p=p<<25^p>>>7^v,v=v-g|0,g=g<<24^g>>>8^y,y=y-p|0,c.b=p=p<<20^p>>>12^v,c.c=v=v-g|0,c.d=g<<16^v>>>16^y,c.a=y-p|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,u===Math.floor(u)?(c.a=u/4294967296|0,c.b=0|u):f+=u;for(var d=0;d<f.length+20;d++)c.b^=0|f.charCodeAt(d),c.next()}function i(u,c){return c.a=u.a,c.b=u.b,c.c=u.c,c.d=u.d,c}function o(u,c){var f=new a(u),d=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var v=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(v===0);return v},p.int32=f.next,p.quick=p,d&&(typeof d=="object"&&i(d,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.tychei=o})(0,n)}),Es=tu(function(n){(function(e,t){var r,a=this,i=256,o=6,u="random",c=t.pow(i,o),f=t.pow(2,52),d=2*f,p=i-1;function v(_,S,C){var R=[],T=x(function D(N,M){var B,z=[],ee=typeof N;if(M&&ee=="object")for(B in N)try{z.push(D(N[B],M-1))}catch{}return z.length?z:ee=="string"?N:N+"\0"}((S=S==1?{entropy:!0}:S||{}).entropy?[_,w(e)]:_??function(){try{var D;return r&&(D=r.randomBytes)?D=D(i):(D=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(D)),w(D)}catch{var N=a.navigator,M=N&&N.plugins;return[+new Date,a,M,a.screen,w(e)]}}(),3),R),O=new g(R),k=function(){for(var D=O.g(o),N=c,M=0;D<f;)D=(D+M)*i,N*=i,M=O.g(1);for(;D>=d;)D/=2,N/=2,M>>>=1;return(D+M)/N};return k.int32=function(){return 0|O.g(4)},k.quick=function(){return O.g(4)/4294967296},k.double=k,x(w(O.S),e),(S.pass||C||function(D,N,M,B){return B&&(B.S&&y(B,O),D.state=function(){return y(O,{})}),M?(t[u]=D,N):D})(k,T,"global"in S?S.global:this==t,S.state)}function g(_){var S,C=_.length,R=this,T=0,O=R.i=R.j=0,k=R.S=[];for(C||(_=[C++]);T<i;)k[T]=T++;for(T=0;T<i;T++)k[T]=k[O=p&O+_[T%C]+(S=k[T])],k[O]=S;(R.g=function(D){for(var N,M=0,B=R.i,z=R.j,ee=R.S;D--;)N=ee[B=p&B+1],M=M*i+ee[p&(ee[B]=ee[z=p&z+N])+(ee[z]=N)];return R.i=B,R.j=z,M})(i)}function y(_,S){return S.i=_.i,S.j=_.j,S.S=_.S.slice(),S}function x(_,S){for(var C,R=_+"",T=0;T<R.length;)S[p&T]=p&(C^=19*S[p&T])+R.charCodeAt(T++);return w(S)}function w(_){return String.fromCharCode.apply(0,_)}if(t["seed"+u]=v,x(t.random(),e),n.exports){n.exports=v;try{r=require("crypto")}catch{}}})([],Math)});Es.alea=Sz,Es.xor128=Cz,Es.xorwow=Rz,Es.xorshift7=Tz,Es.xor4096=Oz,Es.tychei=Az;var Qv=Es.alea,zx=function(){function n(e,t,r,a,i){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Qv(o.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,r,a=!1;!a;){var i=void 0,o=void 0,u=void 0;do u=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(u>=1||u===0);var c=Math.sqrt(-2*Math.log(u)/u);t=this.mean+this.stdDev*i*c,r=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(t)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},n.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},n.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},n}(),kz=function(){function n(e,t,r,a){this.alpha=e,this.beta=1/t,this.dtype=r;var i=a||Math.random();this.randu=Qv(i.toString()),this.randn=new zx(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var e,t,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,t=1-.331*(e=a*a)*e,r=.5*e+this.d*(1-o+Math.log(o)),(i=this.randu())<t||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},n.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},n}(),Dz=function(){function n(e,t,r,a){var i=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Qv(a)}return n.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}();function Xe(n,e,t){return e===void 0&&(e="float32"),e=e||"float32",sA(n),new oh(n,e,t)}function Nz(n,e){e===void 0&&(e=!1),console.log(n.toString(e))}var vA=q({batchToSpaceND_:function(n,e,t){var r=P(n,"x","batchToSpaceND"),a=e.reduce(function(i,o){return i*o});return L(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),L(t.length===e.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length}),L(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+a}),G.runKernelFunc(function(i){return i.batchToSpaceND(r,e,t)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(e,t)}}})}}),Iz=q({broadcastTo_:function(n,e){var t=P(n,"broadcastTo","x"),r=t.shape;if(e.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var a=t.shape.slice();a.length<e.length;)a.unshift(1);t=t.reshape(a)}for(var i=Array.from(e),o=e.length-1;o>=0;o--)if(t.shape[o]===e[o])i[o]=1;else if(t.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var u=i.map(function(c,f){return c>1?f:-1}).filter(function(c){return c>=0});return u.length===0?t.clone():G.runKernelFunc(function(c){return c.tile(t,i)},{input:t},function(c){return{input:function(){return c.sum(u,!0)}}})}}),Mz=q({cast_:function(n,e){var t=P(n,"x","cast");if(!RB(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return G.runKernelFunc(function(a){return a.cast(t,e)},{x:t},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),Fz=q({clone_:function(n){var e=P(n,"x","clone",null);return G.runKernelFunc(function(){return G.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),Pz=q({cumsum_:function(n,e,t,r){e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var a=P(n,"x","cumsum"),i=ri([e|=0],a.rank),o=a;i!=null&&(o=a.transpose(i));var u=ai(1,a.rank)[0],c=G.runKernelFunc(function(f){return f.cumsum(o,u,t,r)},{permutedX:o},function(f){return{permutedX:function(){return f.cumsum(e,t,!r)}}});return i!=null&&(c=c.transpose(i)),c}}),Lz=q({depthToSpace_:function(n,e,t){t===void 0&&(t="NHWC");var r=P(n,"x","depthToSpace"),a=t==="NHWC"?r.shape[1]:r.shape[2],i=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];return L(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),L(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+` for depthToSpace with input shape
          `+r.shape}),L(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),G.runKernelFunc(function(u){return u.depthToSpace(r,e,t)},{$x:r})}}),Kr=q({expandDims_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","expandDims",null);L(e<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return e<0&&(L(-(t.rank+1)<=e,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),e=t.rank+e+1),r.splice(e,0,1),pa(t,r)}}),mA=q({eye_:function(n,e,t,r){r===void 0&&(r="float32"),e==null&&(e=n);for(var a=Xe([n,e],r),i=n<=e?n:e,o=0;o<i;++o)a.set(1,o,o);var u=a.toTensor().as2D(n,e);if(t==null)return u;if(t.length===1)return gl(Kr(u,0),[t[0],1,1]);if(t.length===2)return gl(Kr(Kr(u,0),0),[t[0],t[1],1,1]);if(t.length===3)return gl(Kr(Kr(Kr(u,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),Bz=q({multinomial_:function(n,e,t,r){r===void 0&&(r=!1);var a=P(n,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);t=t||Math.random();var u=o===1?a.as2D(1,-1):a,c=G.runKernelFunc(function(f){return f.multinomial(u,r,e,t)},{logits2D:u});return o===1?c.as1D():c}}),Ib=q({oneHot_:function(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var a=P(n,"indices","oneHot","int32"),i=a.shape.concat([e]);return a=a.flatten(),G.runKernelFunc(function(o){return o.oneHot(a,e,t,r)},{$indices:a},function(o){return{$indices:function(){return Ut(a.shape,"float32")}}}).reshape(i)}}),nu=q({pad_:function(n,e,t){t===void 0&&(t=0);var r=P(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:e,constantValue:t};return G.runKernelFunc(function(i){return i.pad(r,e,t)},{x:r},function(i){var o=e.map(function(u){return u[0]});return{x:function(){return i.slice(o,r.shape)}}},"PadV2",a)}}),zz=q({pad1d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),nu(n,[e],t)}}),Uz=q({pad2d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),nu(n,e,t)}}),Vz=q({pad3d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),nu(n,e,t)}}),jz=q({pad4d_:function(n,e,t){return t===void 0&&(t=0),L(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),nu(n,e,t)}}),qz=q({rand_:function(n,e,t){var r=Ne(n),a=null;if(t==null||t==="float32")a=new Float32Array(r);else if(t==="int32")a=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=e();return G.makeTensor(a,n,t)}}),Wz=q({randomNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new zx(e,t,r,!1,a),o=Xe(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),Hz=q({randomGamma_:function(n,e,t,r,a){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new kz(e,t,r,a),o=Xe(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),gA=q({randomUniform_:function(n,e,t,r,a){e===void 0&&(e=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var i=Xe(n,r),o=new Dz(e,t,null,a),u=0;u<i.values.length;u++)i.values[u]=o.nextValue();return i.toTensor()}}),pa=q({reshape_:function(n,e){var t=P(n,"x","reshape",null);e=SB(e,t.size),L(t.size===Ne(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return G.runKernelFunc(function(a){return a.reshape(t,e)},{x:t},function(a){return{x:function(){return a.reshape(t.shape)}}},"Reshape",r)}}),yA=q({spaceToBatchND_:function(n,e,t){var r=P(n,"x","spaceToBatchND");return L(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),L(t.length===e.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length}),L(r.shape.reduce(function(a,i,o){return o>0&&o<=e.length?a&&(i+t[o-1][0]+t[o-1][1])%e[o-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()}),G.runKernelFunc(function(a){return a.spaceToBatchND(r,e,t)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(e,t)}}})}}),bA=q({squeeze_:function(n,e){var t=P(n,"x","squeeze");return pa(t,Cs(t.shape,e).newShape)}}),Mr=q({stack_:function(n,e){e===void 0&&(e=0);var t=vv(n,"tensors","stack");if(L(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(e);var r=t[0].rank,a=t[0].shape,i=t[0].dtype;L(e<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(u){Rt(a,u.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(u){L(i===u.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=t.map(function(u){return u.expandDims(e)});return yn(o,e)}}),gl=q({tile_:function(n,e){var t=P(n,"x","tile",null);L(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."});var r=[t],a={reps:e};return G.runKernelFunc(function(i,o){var u=i.tile(t,e);return o([t]),u},{x:t},function(i,o){var u=o[0];return{x:function(){var c=mt(u);if(u.rank===1)for(var f=0;f<e[0];++f)c=c.add(i.slice([f*u.shape[0]],[u.shape[0]]));else if(u.rank===2)for(f=0;f<e[0];++f)for(var d=0;d<e[1];++d)c=c.add(i.slice([f*u.shape[0],d*u.shape[1]],[u.shape[0],u.shape[1]]));else if(u.rank===3)for(f=0;f<e[0];++f)for(d=0;d<e[1];++d)for(var p=0;p<e[2];++p)c=c.add(i.slice([f*u.shape[0],d*u.shape[1],p*u.shape[2]],[u.shape[0],u.shape[1],u.shape[2]]));else{if(u.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+u.rank+" tensors yet.");for(f=0;f<e[0];++f)for(d=0;d<e[1];++d)for(p=0;p<e[2];++p)for(var v=0;v<e[3];++v)c=c.add(i.slice([f*u.shape[0],d*u.shape[1],p*u.shape[2],v*u.shape[3]],[u.shape[0],u.shape[1],u.shape[2],u.shape[3]]))}return c}}},"Tile",a,r)}}),Gz=q({truncatedNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new zx(e,t,r,!0,a),o=Xe(n,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),bn=q({unstack_:function(n,e){e===void 0&&(e=0),e=e||0;var t=P(n,"x","unstack");L(e>=-t.shape.length&&e<t.shape.length,function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),e<0&&(e+=t.shape.length);var r={axis:e};return G.runKernelFunc(function(a){return a.unstack(t,e)},{x:t},function(a){return{x:function(){return Mr(a,e)}}},"Unpack",r)}}),Qz=function(n,e){return Ae(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p;return ke(this,function(v){switch(v.label){case 0:return t=P(n,"x","setdiff1d"),r=P(e,"y","setdiff1d"),L(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),L(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),L(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return a=v.sent(),[4,r.data()];case 2:for(i=v.sent(),o=new Set(i),u=0,d=0;d<a.length;d++)o.has(a[d])||u++;for(c=new oh([u],t.dtype),f=new oh([u],"int32"),d=0,p=0;d<a.length;d++)o.has(a[d])||(c.values[p]=a[d],f.values[p]=d,p++);return[2,[c.toTensor(),f.toTensor()]]}})})};function gv(n,e,t,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(e.slice(0))).push(n[0]/t),a=a.concat(n.slice(1));else{a=a.concat(n[0]);for(var i=e.length,o=0;o<i;++o)a=a.concat([n[o+1]/e[o],e[o]]);a=a.concat(n.slice(i+1))}return a}function yv(n,e,t){t===void 0&&(t=!0);var r=[];if(t){r.push(e);for(var a=e+1;a<n;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<n;++a)a>=2*e+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function bv(n,e,t,r){r===void 0&&(r=!0);var a=[];r?a.push(n[0]/t):a.push(n[0]*t);for(var i=1;i<n.length;++i)i<=e.length?r?a.push(e[i-1]*n[i]):a.push(n[i]/e[i-1]):a.push(n[i]);return a}function xA(n,e){for(var t=[0],r=0;r<e;++r)t.push(n[r][0]);return t}function wA(n,e,t){for(var r=n.slice(0,1),a=0;a<t;++a)r.push(n[a+1]-e[a][0]-e[a][1]);return r}function _A(n,e){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var t=e.shape,r=t[t.length-1],a=1,i=0;i<t.length-1;++i)a*=t[i];var o=n.shape,u=t.slice();u.pop();var c=1;for(i=r;i<n.rank;++i)c*=o[i],u.push(o[i]);var f=Ga(n.shape).map(function(d){return d/c}).concat([1]).slice(0,r);return[u,a,c,f]}var EA=30;function s0(n){return n<=EA?n:Tb(n,Math.floor(Math.sqrt(n)))}function $z(n,e,t){var r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+a+".";if(t.rank<a)throw new Error(i+" update.rank < "+a+". ");if(n.length<r+(t.rank-a))throw new Error(i+" Output shape length < "+(r+(t.rank-a)));if(t.rank!==a+n.length-r)throw new Error(i+" update.rank != "+(a+n.length-r));for(var o=0;o<a;++o)if(t.shape[o]!==e.shape[o])throw new Error(i+" updates.shape["+o+"] ("+t.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<t.rank-a;++o)if(t.shape[o+a]!==n[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+t.shape[o+a]+") != shape["+(o+a)+"] ("+n[o+a]+")")}function Kz(n,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}$z(t,e,n)}function xv(n,e,t){for(var r=e.shape.length,a=r>1?e.shape[r-1]:1,i=t.length,o=1,u=a;u<i;++u)o*=t[u];var c=a<1?1:a;return{sliceRank:a,numUpdates:Ne(e.shape)/c,sliceSize:o,strides:Ga(t.slice(0,a)).concat([1]),outputSize:Ne(t)}}function Xz(n,e,t){L(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+e+" must match the rank of the array ("+n.rank+")."}),L(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of size "+t+" must match the rank of the array ("+n.rank+")."});for(var r=function(i){L(e[i]+t[i]<=n.shape[i],function(){return"Error in slice"+n.rank+"D: begin["+i+"] + size["+i+"] ("+(e[i]+t[i])+") would overflow input.shape["+i+"] ("+n.shape[i]+")"})},a=0;a<n.rank;++a)r(a)}function SC(n){for(var e=[],t=0;n>0;)1&n&&e.push(t),n/=2,t++;return e}function Ux(n,e,t){for(var r=[],a=0;a<n.length;a++)r[a]=Math.ceil((e[a]-n[a])/t[a]);return r}function Yz(n,e,t,r,a){var i=e[a],o=t[a]||1;(n&1<<a||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=Sb(0,i,u-1)}function Zz(n,e,t,r,a){var i=e[a],o=t[a]||1;(n&1<<a||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=o>0?Sb(0,i,u):Sb(-1,i,u-1)}function SA(n,e,t){for(var r=t.length,a=0;a<t.length;a++)if(t[a]>1){r=a;break}for(a=r+1;a<t.length;a++)if(e[a]>0||t[a]!==n[a])return!1;return!0}function CA(n,e){for(var t=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function Jz(n,e){L(Rb(n),function(){return"The f passed in variableGrads(f) must be a function"}),L(e==null||Array.isArray(e)&&e.every(function(d){return d instanceof Kl}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=e!=null;if(!t)for(var r in e=[],G.registeredVariables)e.push(G.registeredVariables[r]);var a=t?e.filter(function(d){return!d.trainable}):null,i=e.length;L((e=e.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=G.gradients(n,e,null,!0),u=o.value,c=o.grads;L(c.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),L(u.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+u.rank+" tensor"});var f={};return e.forEach(function(d,p){c[p]!=null&&(f[d.name]=c[p])}),a!=null&&a.forEach(function(d){return f[d.name]=null}),{value:u,grads:f}}function $v(n){return G.customGrad(n)}var zi=q({softmax_:function(n,e){e===void 0&&(e=-1);var t=P(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return G.runKernelFunc(function(r,a){var i=r.softmax(t,e);return a([i]),i},{logits:t},function(r,a){var i=a[0],o=r.mul(i);return{logits:function(){return o.sub(o.sum([e],!0).mul(i))}}},"Softmax",{dim:e},[],[!0])}}),eU=q({logSoftmax_:function(n,e){e===void 0&&(e=-1);var t=P(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return $v(function(r,a){var i=r.max(e,!0),o=r.sub(i),u=o.toFloat().sub(o.exp().sum(e,!0).log());return a([u]),{value:u,gradFunc:function(c,f){var d=f[0].exp();return c.sub(c.sum(e,!0).mul(d))}}})(t)}}),RA=function(){function n(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},n.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},n.prototype.has=function(e){return this.data.has(e)},n.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),TA=function(){function n(){}return n.prototype.time=function(e){return se("time")},n.prototype.read=function(e){return se("read")},n.prototype.readSync=function(e){return se("readSync")},n.prototype.numDataIds=function(){return se("numDataIds")},n.prototype.disposeData=function(e){return se("disposeData")},n.prototype.write=function(e,t,r){return se("write")},n.prototype.move=function(e,t,r,a){return se("move")},n.prototype.memory=function(){return se("memory")},n.prototype.floatPrecision=function(){return se("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(e,t,r,a){return se("batchMatMul")},n.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,se("fusedBatchMatMul")},n.prototype.slice=function(e,t,r){return se("slice")},n.prototype.stridedSlice=function(e,t,r,a){return se("stridedSlice")},n.prototype.unstack=function(e,t){return se("unstack")},n.prototype.reverse=function(e,t){return se("reverse")},n.prototype.concat=function(e,t){return se("concat")},n.prototype.neg=function(e){return se("neg")},n.prototype.add=function(e,t){return se("add")},n.prototype.addN=function(e){return se("addN")},n.prototype.subtract=function(e,t){return se("subtract")},n.prototype.multiply=function(e,t){return se("multiply")},n.prototype.realDivide=function(e,t){return se("realDivide")},n.prototype.floorDiv=function(e,t){return se("floorDiv")},n.prototype.sum=function(e,t){return se("sum")},n.prototype.prod=function(e,t){return se("prod")},n.prototype.unsortedSegmentSum=function(e,t,r){return se("unsortedSegmentSum")},n.prototype.argMin=function(e,t){return se("argMin")},n.prototype.argMax=function(e,t){return se("argMax")},n.prototype.equal=function(e,t){return se("equal")},n.prototype.notEqual=function(e,t){return se("notEqual")},n.prototype.less=function(e,t){return se("less")},n.prototype.lessEqual=function(e,t){return se("lessEqual")},n.prototype.greater=function(e,t){return se("greater")},n.prototype.greaterEqual=function(e,t){return se("greaterEqual")},n.prototype.logicalNot=function(e){return se("logicalNot")},n.prototype.logicalAnd=function(e,t){return se("logicalAnd")},n.prototype.logicalOr=function(e,t){return se("logicalOr")},n.prototype.where=function(e){return se("where")},n.prototype.select=function(e,t,r){return se("select")},n.prototype.topk=function(e,t,r){return se("topk")},n.prototype.min=function(e,t){return se("min")},n.prototype.minimum=function(e,t){return se("minimum")},n.prototype.mod=function(e,t){return se("mod")},n.prototype.max=function(e,t){return se("max")},n.prototype.maximum=function(e,t){return se("maximum")},n.prototype.all=function(e,t){return se("all")},n.prototype.any=function(e,t){return se("any")},n.prototype.squaredDifference=function(e,t){return se("squaredDifference")},n.prototype.ceil=function(e){return se("ceil")},n.prototype.floor=function(e){return se("floor")},n.prototype.round=function(e){return se("round")},n.prototype.sign=function(e){return se("sign")},n.prototype.isNaN=function(e){return se("isNaN")},n.prototype.isInf=function(e){return se("isInf")},n.prototype.isFinite=function(e){return se("isFinite")},n.prototype.pow=function(e,t){return se("pow")},n.prototype.exp=function(e){return se("exp")},n.prototype.expm1=function(e){return se("expm1")},n.prototype.softmax=function(e,t){return se("softmax")},n.prototype.log=function(e){return se("log")},n.prototype.log1p=function(e){return se("log1p")},n.prototype.sqrt=function(e){return se("sqrt")},n.prototype.rsqrt=function(e){return se("rsqrt")},n.prototype.square=function(e){return se("square")},n.prototype.reciprocal=function(e){return se("reciprocal")},n.prototype.relu=function(e){return se("relu")},n.prototype.relu6=function(e){return se("relu6")},n.prototype.prelu=function(e,t){return se("prelu")},n.prototype.elu=function(e){return se("elu")},n.prototype.eluDer=function(e,t){return se("eluDer")},n.prototype.selu=function(e){return se("selu")},n.prototype.int=function(e){return se("int")},n.prototype.clip=function(e,t,r){return se("clip")},n.prototype.abs=function(e){return se("abs")},n.prototype.complexAbs=function(e){return se("complexAbs")},n.prototype.sigmoid=function(e){return se("sigmoid")},n.prototype.softplus=function(e){return se("softplus")},n.prototype.sin=function(e){return se("sin")},n.prototype.cos=function(e){return se("cos")},n.prototype.tan=function(e){return se("tan")},n.prototype.asin=function(e){return se("asin")},n.prototype.acos=function(e){return se("acos")},n.prototype.atan=function(e){return se("atan")},n.prototype.atan2=function(e,t){return se("atan2")},n.prototype.sinh=function(e){return se("sinh")},n.prototype.cosh=function(e){return se("cosh")},n.prototype.tanh=function(e){return se("tanh")},n.prototype.asinh=function(e){return se("asinh")},n.prototype.acosh=function(e){return se("acosh")},n.prototype.atanh=function(e){return se("atanh")},n.prototype.erf=function(e){return se("erf")},n.prototype.step=function(e,t){return se("step")},n.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,se("fusedConv2d")},n.prototype.conv2d=function(e,t,r){return se("conv2d")},n.prototype.conv2dDerInput=function(e,t,r){return se("conv2dDerInput")},n.prototype.conv2dDerFilter=function(e,t,r){return se("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,se("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(e,t,r){return se("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(e,t,r){return se("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(e,t,r){return se("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(e,t,r){return se("conv3d")},n.prototype.conv3dDerInput=function(e,t,r){return se("conv3dDerInput")},n.prototype.conv3dDerFilter=function(e,t,r){return se("conv3dDerFilter")},n.prototype.maxPool=function(e,t){return se("maxPool")},n.prototype.maxPoolBackprop=function(e,t,r,a){return se("maxPoolBackprop")},n.prototype.avgPool=function(e,t){return se("avgPool")},n.prototype.avgPoolBackprop=function(e,t,r){return se("avgPoolBackprop")},n.prototype.avgPool3d=function(e,t){return se("avgPool3d")},n.prototype.avgPool3dBackprop=function(e,t,r){return se("avgPool3dBackprop")},n.prototype.maxPool3d=function(e,t){return se("maxPool3d")},n.prototype.maxPool3dBackprop=function(e,t,r,a){return se("maxPool3dBackprop")},n.prototype.reshape=function(e,t){return se("reshape")},n.prototype.cast=function(e,t){return se("cast")},n.prototype.tile=function(e,t){return se("tile")},n.prototype.pad=function(e,t,r){return se("pad")},n.prototype.transpose=function(e,t){return se("transpose")},n.prototype.gather=function(e,t,r){return se("gather")},n.prototype.gatherND=function(e,t){return se("gatherND")},n.prototype.scatterND=function(e,t,r){return se("scatterND")},n.prototype.batchToSpaceND=function(e,t,r){return se("batchToSpaceND")},n.prototype.spaceToBatchND=function(e,t,r){return se("spaceToBatchND")},n.prototype.resizeBilinear=function(e,t,r,a){return se("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(e,t,r){return se("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(e,t,r,a){return se("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(e,t,r){return se("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(e,t,r,a,i,o){return se("batchNormalization")},n.prototype.localResponseNormalization4D=function(e,t,r,a,i){return se("localResponseNormalization4D")},n.prototype.LRNGrad=function(e,t,r,a,i,o,u){return se("LRNGrad")},n.prototype.multinomial=function(e,t,r,a){return se("multinomial")},n.prototype.oneHot=function(e,t,r,a){return se("oneHot")},n.prototype.cumsum=function(e,t,r,a){return se("cumsum")},n.prototype.nonMaxSuppression=function(e,t,r,a,i){return se("nonMaxSuppression")},n.prototype.fft=function(e){return se("fft")},n.prototype.ifft=function(e){return se("ifft")},n.prototype.complex=function(e,t){return se("complex")},n.prototype.real=function(e){return se("real")},n.prototype.imag=function(e){return se("imag")},n.prototype.cropAndResize=function(e,t,r,a,i,o){return se("cropAndResize")},n.prototype.depthToSpace=function(e,t,r){return se("depthToSpace")},n.prototype.split=function(e,t,r){return se("split")},n.prototype.sparseToDense=function(e,t,r,a){return se("sparseToDense")},n.prototype.diag=function(e){return se("diag")},n.prototype.fill=function(e,t,r){return se("fill")},n.prototype.onesLike=function(e){return se("onesLike")},n.prototype.zerosLike=function(e){return se("zerosLike")},n.prototype.linspace=function(e,t,r){return se("linspace")},n.prototype.dispose=function(){return se("dispose")},n}();function se(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Po(n,e){for(var t=n.length,r=[],a=0;a<t;a++){var i=t-1-a,o=n[i]||1;(e[e.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function xn(n,e){for(var t=[],r=0;r<e.length;r++){var a=n[n.length-r-1],i=e.length-r-1,o=e[i];(a==null||a===1&&o>1)&&t.unshift(i)}return t}function ct(n,e){for(var t=[],r=Math.max(n.length,e.length),a=0;a<r;a++){var i=n[n.length-a-1];i==null&&(i=1);var o=e[e.length-a-1];if(o==null&&(o=1),i===1)t.unshift(o);else if(o===1)t.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+n+" and "+e+".");t.unshift(i)}}return t}function uh(n,e,t,r,a,i,o){o===void 0&&(o="channelsLast");var u,c=Ev(e),f=c[0],d=c[1];if(o==="channelsLast")u=[f,d,n[3],n[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);u=[f,d,n[1],n[1]]}return ru(n,u,t,r,a,i,!1,o)}function wv(n,e,t,r,a,i,o){o===void 0&&(o="NDHWC");var u,c,f=Mb(e),d=f[0],p=f[1],v=f[2];if(o==="NDHWC")c="channelsLast",u=[d,p,v,n[4],n[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",u=[d,p,v,n[1],n[1]]}return _v(n,u,t,r,a,!1,c,i)}function ru(n,e,t,r,a,i,o,u){o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var c=[-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3];if(u==="channelsLast")f=n[0],d=n[1],p=n[2],v=n[3];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);f=n[0],v=n[1],d=n[2],p=n[3]}var g,y=e[0],x=e[1],w=e[3],_=Ev(t),S=_[0],C=_[1],R=Ev(r),T=R[0],O=R[1],k=yl(y,T),D=yl(x,O),N=function(re,te,U,H,$,Y,F,Q){var oe,ue,me;if(typeof re=="number"){oe={top:re,bottom:re,left:re,right:re,type:re===0?"VALID":"NUMBER"};var be=function(qe,Ye,at,xt,It){xt==null&&(xt=OA(qe,Ye,at));var At=qe[0],en=qe[1],Pr=Mf((At-Ye+2*xt)/at+1,It);L(rn(Pr),function(){return"The output # of rows ("+Pr+") must be an integer. Change the stride and/or zero pad parameters"});var jn=Mf((en-Ye+2*xt)/at+1,It);return L(rn(jn),function(){return"The output # of columns ("+jn+") must be an integer. Change the stride and/or zero pad parameters"}),[Pr,jn]}([te,U],Y,H,re,Q);ue=be[0],me=be[1]}else if(re==="same"){ue=Math.ceil(te/H),me=Math.ceil(U/$);var ye=Math.max(0,(ue-1)*H+Y-te),Le=Math.max(0,(me-1)*$+F-U),Ee=Math.floor(ye/2),ze=ye-Ee,gt=Math.floor(Le/2);oe={top:Ee,bottom:ze,left:gt,right:Le-gt,type:"SAME"}}else{if(re!=="valid")throw Error("Unknown padding parameter: "+re);oe={top:0,bottom:0,left:0,right:0,type:"VALID"},ue=Math.ceil((te-Y+1)/H),me=Math.ceil((U-F+1)/$)}return{padInfo:oe,outHeight:ue,outWidth:me}}(a,d,p,S,C,k,D,i),M=N.padInfo,B=N.outHeight,z=N.outWidth,ee=o?w*v:w;return u==="channelsFirst"?g=[f,ee,B,z]:u==="channelsLast"&&(g=[f,B,z,ee]),{batchSize:f,dataFormat:u,inHeight:d,inWidth:p,inChannels:v,outHeight:B,outWidth:z,outChannels:ee,padInfo:M,strideHeight:S,strideWidth:C,filterHeight:y,filterWidth:x,effectiveFilterHeight:k,effectiveFilterWidth:D,dilationHeight:T,dilationWidth:O,inShape:n,outShape:g,filterShape:e}}function _v(n,e,t,r,a,i,o,u){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],f=c[0],d=c[1],p=c[2],v=c[3],g=c[4];if(o==="channelsLast")f=n[0],d=n[1],p=n[2],v=n[3],g=n[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);f=n[0],g=n[1],d=n[2],p=n[3],v=n[4]}var y,x=e[0],w=e[1],_=e[2],S=e[4],C=Mb(t),R=C[0],T=C[1],O=C[2],k=Mb(r),D=k[0],N=k[1],M=k[2],B=yl(x,D),z=yl(w,N),ee=yl(_,M),re=function(F,Q,oe,ue,me,be,ye,Le,Ee,ze,gt){var qe,Ye,at,xt;if(typeof F=="number"){qe={top:F,bottom:F,left:F,right:F,front:F,back:F,type:F===0?"VALID":"NUMBER"};var It=function(Hi,na,oi,an,fn,Mn){fn==null&&(fn=OA(Hi,na,an));var ym=Hi[0],bm=Hi[1],xm=Hi[2],Gi=Mf((ym-na+2*fn)/an+1,Mn);L(rn(Gi),function(){return"The output # of depths ("+Gi+") must be an integer. Change the stride and/or zero pad parameters"});var Qi=Mf((bm-na+2*fn)/an+1,Mn);L(rn(Qi),function(){return"The output # of rows ("+Qi+") must be an integer. Change the stride and/or zero pad parameters"});var ra=Mf((xm-na+2*fn)/an+1,Mn);return L(rn(ra),function(){return"The output # of columns ("+ra+") must be an integer. Change the stride and/or zero pad parameters"}),[Gi,Qi,ra,oi]}([Q,oe,ue,1],Le,1,me,F,gt);Ye=It[0],at=It[1],xt=It[2]}else if(F==="same"){Ye=Math.ceil(Q/me),at=Math.ceil(oe/be),xt=Math.ceil(ue/ye);var At=(Ye-1)*me+Le-Q,en=(at-1)*be+Ee-oe,Pr=(xt-1)*ye+ze-ue,jn=Math.floor(At/2),ii=At-jn,or=Math.floor(en/2),Sa=en-or,Lr=Math.floor(Pr/2);qe={top:or,bottom:Sa,left:Lr,right:Pr-Lr,front:jn,back:ii,type:"SAME"}}else{if(F!=="valid")throw Error("Unknown padding parameter: "+F);qe={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ye=Math.ceil((Q-Le+1)/me),at=Math.ceil((oe-Ee+1)/be),xt=Math.ceil((ue-ze+1)/ye)}return{padInfo:qe,outDepth:Ye,outHeight:at,outWidth:xt}}(a,d,p,v,R,T,O,B,z,ee,u),te=re.padInfo,U=re.outDepth,H=re.outHeight,$=re.outWidth,Y=i?S*g:S;return o==="channelsFirst"?y=[f,Y,U,H,$]:o==="channelsLast"&&(y=[f,U,H,$,Y]),{batchSize:f,dataFormat:o,inDepth:d,inHeight:p,inWidth:v,inChannels:g,outDepth:U,outHeight:H,outWidth:$,outChannels:Y,padInfo:te,strideDepth:R,strideHeight:T,strideWidth:O,filterDepth:x,filterHeight:w,filterWidth:_,effectiveFilterDepth:B,effectiveFilterHeight:z,effectiveFilterWidth:ee,dilationDepth:D,dilationHeight:N,dilationWidth:M,inShape:n,outShape:y,filterShape:e}}function OA(n,e,t,r){r===void 0&&(r=1);var a=yl(e,r);return Math.floor((n[0]*(t-1)-t+a)/2)}function Ev(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function Mb(n){return typeof n=="number"?[n,n,n]:n}function yl(n,e){return e<=1?n:n+(n-1)*(e-1)}function Mf(n,e){if(!e)return n;switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+e)}}function Yl(n){var e=Ev(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function br(n,e){return Yl(n)||Yl(e)}function Vx(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function AA(n,e,t){if(e==="complex64"){if(n.dtype==="complex64")return n.clone();var r=Ut(n.shape),a=n.toFloat(),i=t.complex(a,r);return r.dispose(),a.dispose(),i}if(!TB(n.dtype,e))return G.makeTensorFromDataId(n.dataId,n.shape,e);if(n.dtype==="complex64"){var o=t.real(n);return i=o.cast(e),o.dispose(),i}if(e==="int32")return t.int(n);if(e==="bool"){var u=xe(0,n.dtype);return i=t.notEqual(n,u),u.dispose(),i}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+e)}function Fb(n,e){return G.makeTensorFromDataId(n.dataId,e,n.dtype)}function kA(n,e,t){var r=(e-n)/(t-1),a=kh(t,"float32");a[0]=n;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return cn(a,"float32")}function Pb(n,e){if(n.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+e.length+".");for(var t=new Float32Array(2*n.length),r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function CC(n,e){return{real:n[2*e],imag:n[2*e+1]}}function tU(n,e,t,r){n[2*r]=e,n[2*r+1]=t}function nU(n,e,t){var r=(t?2:-2)*Math.PI*(n/e);return{real:Math.cos(r),imag:Math.sin(r)}}function rU(n,e,t){var r=function(i,o,u){return function(c,f,d){for(var p=0,v=c.length,g=0,y=!1;p<v;){var x=d(f,c[g=p+(v-p>>>1)]);x>0?p=g+1:(v=g,y=!x)}return y?p:-p-1}(i,o,u||aU)}(n,e,t),a=r<0?-(r+1):r;n.splice(a,0,e)}function aU(n,e){return n>e?1:n<e?-1:0}function jx(n,e,t,r,a){return DA(n,e,t,r,a,0).selectedIndices}function qx(n,e,t,r,a,i){var o=DA(n,e,t,r,a,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function DA(n,e,t,r,a,i,o,u){u===void 0&&(u=!1);for(var c=Array.from(e).map(function(R,T){return{score:R,boxIndex:T,suppressBeginIndex:0}}).filter(function(R){return R.score>a}).sort(RC),f=i>0?-.5/i:0,d=[],p=[];d.length<t&&c.length>0;){var v=c.pop(),g=v.score,y=v.boxIndex,x=v.suppressBeginIndex;if(g<a)break;for(var w=!1,_=d.length-1;_>=x;--_){var S=iU(n,y,d[_]);if(S>=r){w=!0;break}if(v.score=v.score*oU(r,f,S),v.score<=a)break}v.suppressBeginIndex=d.length,w||(v.score===g?(d.push(y),p.push(v.score)):v.score>a&&rU(c,v,RC))}var C=d.length;return u&&(d.fill(0,C),p.fill(0,C)),{selectedIndices:cn(d,"int32"),selectedScores:cn(p,"float32"),numValidOutputs:xe(C,"int32")}}function iU(n,e,t){var r=n.subarray(4*e,4*e+4),a=n.subarray(4*t,4*t+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),f=Math.min(a[0],a[2]),d=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),v=Math.max(a[1],a[3]),g=(u-i)*(c-o),y=(p-f)*(v-d);if(g<=0||y<=0)return 0;var x=Math.max(i,f),w=Math.max(o,d),_=Math.min(u,p),S=Math.min(c,v),C=Math.max(_-x,0)*Math.max(S-w,0);return C/(g+y-C)}function oU(n,e,t){var r=Math.exp(e*t*t);return t<=n?r:0}function RC(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}function NA(n,e,t){var r=new Array(n.rank).fill(0),a=n.shape.slice();return e.map(function(i){a[t]=i;var o=n.slice(r,a);return r[t]+=i,o})}function IA(n,e){for(var t=new Array(n.rank),r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];var a=Xe(t,n.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(n.rank),u=0;u<o.length;u++)o[u]=i[u]%n.shape[u];var c=n.locToIndex(o);a.values[r]=n.values[c]}return a.toTensor()}function MA(n,e,t,r,a){for(var i=e[e.length-1],o=[n.length/i,i],u=o[0],c=o[1],f=ih(t,u*r),d=ih("int32",u*r),p=0;p<u;p++){for(var v=p*c,g=n.subarray(v,v+c),y=[],x=0;x<g.length;x++)y.push({value:g[x],index:x});y.sort(function(R,T){return T.value-R.value});var w=p*r,_=f.subarray(w,w+r),S=d.subarray(w,w+r);for(x=0;x<r;x++)_[x]=y[x].value,S[x]=y[x].index}var C=e.slice();return C[C.length-1]=r,[Vn(f,C,t),Vn(d,C,"int32")]}function Wx(n,e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(r);var a=Xe(n,"int32"),i=Xe([t.length,n.length],"int32");for(r=0;r<t.length;r++){var o=a.indexToLoc(t[r]),u=r*n.length;i.values.set(o,u)}return i.toTensor()}var sU=function(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},uU=function(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},lU=function(n,e,t){this.variableNames=["A"];var r=n.windowSize,a=n.batchSize,i=n.inSize,o=Math.ceil(i/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var u=e==="max"?">":"<",c=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+u+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function FA(n,e){return["x","y","z","w","u","v"].slice(0,e).map(function(t){return n+"."+t})}function vr(n,e){return e===1?[n]:FA(n,e)}function Kn(){var n,e,t,r,a,i,o,u,c,f;return ce().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",u=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",a="texture2D",i="gl_FragColor",o="",u=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:u,defineSpecialInf:c,defineRound:f}}function Os(n,e,t){t===void 0&&(t="index");var r=Ga(e);return r.map(function(a,i){return"int "+n[i]+" = "+t+" / "+a+"; "+(i===r.length-1?"int "+n[i+1]+" = "+t+" - "+n[i]+" * "+a:"index -= "+n[i]+" * "+a)+";"}).join("")}function Hx(n){var e=Ga(n).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var PA=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function cU(n,e,t,r){var a=[];n.forEach(function(g){var y=Ne(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(y>1?"["+y+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))});var i,o,u=a.join(`
`),c=n.map(function(g){return function(y,x,w){w===void 0&&(w=!1);var _="";_+=w?LA(y):tl(y);var S=y.shapeInfo.logicalShape,C=x.logicalShape;return S.length<=C.length&&(_+=w?function(R,T){var O,k=R.name,D=k.charAt(0).toUpperCase()+k.slice(1),N="get"+D+"AtOutCoords",M=R.shapeInfo.logicalShape.length,B=T.logicalShape.length,z=Po(R.shapeInfo.logicalShape,T.logicalShape),ee=Bt(B),re=B-M,te=["x","y","z","w","u","v"];O=M===0?"":B<2&&z.length>=1?"coords = 0;":z.map(function(oe){return"coords."+te[oe+re]+" = 0;"}).join(`
`);var U="";U=B<2&&M>0?"coords":R.shapeInfo.logicalShape.map(function(oe,ue){return"coords."+te[ue+re]}).join(", ");var H="return outputValue;",$=Ne(R.shapeInfo.logicalShape)===1,Y=Ne(T.logicalShape)===1;if(M!==1||$||Y){if($&&!Y)H=B===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(z.length){var F=M-2,Q=M-1;z.indexOf(F)>-1&&z.indexOf(Q)>-1?H="return vec4(outputValue.x);":z.indexOf(F)>-1?H="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":z.indexOf(Q)>-1&&(H="return vec4(outputValue.xx, outputValue.zz);")}}else H=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+N+`() {
      `+ee+` coords = getOutputCoords();
      `+O+`
      vec4 outputValue = get`+D+"("+U+`);
      `+H+`
    }
  `}(y,x):function(R,T){var O=R.name,k=O.charAt(0).toUpperCase()+O.slice(1),D="get"+k+"AtOutCoords",N=T.texShape,M=R.shapeInfo.texShape,B=R.shapeInfo.logicalShape.length,z=T.logicalShape.length;if(!R.shapeInfo.isUniform&&B===z&&R.shapeInfo.flatOffset==null&&Nn(M,N))return`
      float `+D+`() {
        return sampleTexture(`+O+`, resultUV);
      }
    `;var ee,re=Bt(z),te=Po(R.shapeInfo.logicalShape,T.logicalShape),U=z-B,H=["x","y","z","w","u","v"];ee=B===0?"":z<2&&te.length>=1?"coords = 0;":te.map(function(Y){return"coords."+H[Y+U]+" = 0;"}).join(`
`);var $="";return $=z<2&&B>0?"coords":R.shapeInfo.logicalShape.map(function(Y,F){return"coords."+H[F+U]}).join(", "),`
    float `+D+`() {
      `+re+` coords = getOutputCoords();
      `+ee+`
      return get`+k+"("+$+`);
    }
  `}(y,x)),_}(g,e,r)}).join(`
`),f=e.texShape,d=Kn(),p=function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `}(d),v=function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+fU+`
    `+hU+`
    `+dU+`
  `}(d);return e.isPacked?(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(R,T){var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];return O[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+O[1]+`.0);
      }
    `:O[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+O[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      return 2 * (resTexRC.x * `+O[1]+` + resTexRC.y);
    }
  `}(0,y);case 2:return function(R,T){var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)];if(Nn(R,T))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+O[0]+", "+O[1]+`));
      }
    `;var k=Math.ceil(R[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));

      int index = resTexRC.x * `+O[1]+` + resTexRC.y;
      int r = 2 * (index / `+k+`);
      int c = imod(index, `+k+`) * 2;

      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=g,w=y,_=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],S=Math.ceil(x[2]/2),C=S*Math.ceil(x[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(R,T){for(var O=[Math.ceil(T[0]/2),Math.ceil(T[1]/2)],k=Math.ceil(R[R.length-1]/2),D=k*Math.ceil(R[R.length-2]/2),N=D,M="",B="b, r, c",z=2;z<R.length-1;z++)N*=R[R.length-z-1],M=`
      int b`+z+" = index / "+N+`;
      index -= b`+z+" * "+N+`;
    `+M,B="b"+z+", "+B;return`
    ivec`+R.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      int index = resTexRC.x * `+O[1]+` + resTexRC.y;

      `+M+`

      int b = index / `+D+`;
      index -= b * `+D+`;

      int r = 2 * (index / `+k+`);
      int c = imod(index, `+k+`) * 2;

      return ivec`+R.length+"("+B+`);
    }
  `}(g,y)}var x,w,_,S,C}(e.logicalShape,f),o=function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `}(d)):(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,S){return S[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return resTexRC.x * `+S[1]+` + resTexRC.y;
    }
  `}(0,y);case 2:return function(_,S){return Nn(_,S)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `:_[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = index / `+_[1]+`;
      int c = index - r * `+_[1]+`;
      return ivec2(r, c);
    }
  `}(g,y);case 3:return x=y,w=Os(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+w+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(_,S){var C=Os(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      `+C+`
      return ivec4(r, c, d, d2);
    }
  `}(g,y);case 5:return function(_,S){var C=Os(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+S[0]+`,
                             `+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+C+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(g,y);case 6:return function(_,S){var C=Os(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+C+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(g,y);default:throw new Error(g.length+"-D output sampling is not yet supported")}var x,w}(e.logicalShape,f),o=function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),r&&(v+=pU),[v,p,o,u,i,c,t].join(`
`)}function tl(n){var e=n.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(o===1&&u===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=t.shapeInfo.texShape,f=c[0],d=c[1],p=ws(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+f+", "+d+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 1:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Ku(t)+`
      }
    `;var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(u===1&&o===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=ws(r);return u===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+u+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+u+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 2:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=t.shapeInfo.texShape;if(o!=null&&Nn(r,o)){var u=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+u+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var f=Cs(r),d=f.newShape,p=f.keptDims,v=d;if(v.length<r.length){var g=nl(t,v);return`
      `+tl(g)+`
      float `+i+`(int row, int col) {
        return `+i+"("+rl(["row","col"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Ku(t)+`
      }
    `;var y=o[0],x=o[1],w=ws(a);return x===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:y===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+x+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+w+`;
    vec2 uv = uvFromFlat(`+y+", "+x+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(n);case 3:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[1]*r[2],u=r[2],c=Cs(r),f=c.newShape,d=c.keptDims,p=f;if(p.length<r.length){var v=nl(t,p);return`
        `+tl(v)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+rl(["row","col","depth"],d)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+u+`, 1)));
        `+Ku(t)+`
      }
    `;var g=t.shapeInfo.texShape,y=g[0],x=g[1],w=t.shapeInfo.flatOffset;if(x===o&&w==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+u+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+x+".0, "+y+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(x===u&&w==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+x+".0, "+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var _=ws(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+u+" + depth + "+_+`;
        vec2 uv = uvFromFlat(`+y+", "+x+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(n);case 4:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[3],u=r[2]*o,c=r[1]*u,f=Cs(r),d=f.newShape,p=f.keptDims;if(d.length<r.length){var v=nl(t,d);return`
      `+tl(v)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+rl(["row","col","depth","depth2"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+u+", "+o+`, 1)));
        `+Ku(t)+`
      }
    `;var g=t.shapeInfo.flatOffset,y=t.shapeInfo.texShape,x=y[0],w=y[1];if(w===c&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(w===o&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+x+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=ws(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+x+", "+w+", index + "+_+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 5:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[4],u=r[3]*o,c=r[2]*u,f=r[1]*c,d=Cs(r),p=d.newShape,v=d.keptDims;if(p.length<r.length){var g=nl(t,p);return`
      `+tl(g)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+rl(["row","col","depth","depth2","depth3"],v)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+c+", "+u+", "+o+`)) +
          depth3;
        `+Ku(t)+`
      }
    `;var y=t.shapeInfo.flatOffset,x=t.shapeInfo.texShape,w=x[0],_=x[1];if(_===f&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===o&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var S=ws(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+c+" + depth * "+u+` +
          depth2 * `+o+" + depth3 + "+S+`;
      vec2 uv = uvFromFlat(`+w+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);case 6:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=Cs(r),u=o.newShape,c=o.keptDims;if(u.length<r.length){var f=nl(t,u);return`
      `+tl(f)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+rl(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=r[5],p=r[4]*d,v=r[3]*p,g=r[2]*v,y=r[1]*g;if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+g+", "+v+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Ku(t)+`
      }
    `;var x=t.shapeInfo.flatOffset,w=t.shapeInfo.texShape,_=w[0],S=w[1];if(S===y&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+v+", "+p+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===d&&x==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var C=ws(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+g+" + depth * "+v+` +
          depth2 * `+p+" + depth3 * "+d+" + depth4 + "+C+`;
      vec2 uv = uvFromFlat(`+_+", "+S+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(n);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function LA(n){var e,t,r;switch(n.shapeInfo.logicalShape.length){case 0:return e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Kn(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(a){var i=a.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),u=a.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],f=Kn();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+f.texture2D+"("+i+`, uv);
    }
  `}(n);case 2:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=c[0],d=c[1],p=Kn();if(c!=null&&Nn(i,c))return`
      vec4 `+u+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+f+`.0);

        return `+p.texture2D+"("+o+`, uv);
      }
    `;var v=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(i[1]/2);return`
    vec4 `+u+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+v[0]+", "+v[1]+`, row, col);
      return `+p.texture2D+"("+o+`, uv);
    }
  `}(n);case 3:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var d=i.slice(1),p=nl(a,d);return`
        `+LA(p)+`
        vec4 `+u+`(int b, int row, int col) {
          return `+u+"("+rl(["b","row","col"],[1,2])+`);
        }
      `}var v=f[0],g=f[1],y=Math.ceil(i[2]/2),x=y*Math.ceil(i[1]/2),w=Kn();return`
    vec4 `+u+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+v+", "+g+", "+x+", "+y+`, b, row, col);
      return `+w.texture2D+"("+o+`, uv);
    }
  `}(n);default:return function(a){for(var i=a.shapeInfo.logicalShape,o=i.length,u=a.name,c="get"+u.charAt(0).toUpperCase()+u.slice(1),f=a.shapeInfo.texShape,d=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],p=d[0],v=d[1],g=Math.ceil(i[o-1]/2),y=g*Math.ceil(i[o-2]/2),x="int b, int row, int col",w="b * "+y+" + (row / 2) * "+g+" + (col / 2)",_=2;_<o-1;_++)x="int b"+_+", "+x,y*=i[o-_-1],w="b"+_+" * "+y+" + "+w;var S=Kn();return`
    vec4 `+c+"("+x+`) {
      int index = `+w+`;
      int texR = index / `+v+`;
      int texC = index - texR * `+v+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+", "+p+`);
      return `+S.texture2D+"("+u+`, uv);
    }
  `}(n)}}var fU=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hU=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dU=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,pU=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ws(n){return"offset"+n}function Ku(n){var e=n.name,t=Ne(n.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Bt(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function nl(n,e){var t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function rl(n,e){return e.map(function(t){return n[t]}).join(", ")}var vU=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,L(n.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var a=n[n.length-1],i=Math.ceil(a/e);this.outputShape=n.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,u,c=this.outputShape,f=c.length,d=Bt(f),p=vr("coords",f);if(i===1){var v=Bt(u=f+1);o=`
        `+v+" sourceLocR = "+v+"("+p.join()+`, 0);
        ++`+p[f-1]+`;
        `+v+" sourceLocG = "+v+"("+p.join()+`, 0);
        ++`+p[f-2]+`;
        `+v+" sourceLocA = "+v+"("+p.join()+`, 0);
        --`+p[f-1]+`;
        `+v+" sourceLocB = "+v+"("+p.join()+`, 0);
        --`+p[f-2]+";"}else u=f,o=`
        `+d+` sourceLocR = coords;
        ++`+p[f-1]+`;
        `+d+` sourceLocG = coords;
        ++`+p[f-2]+`;
        `+d+` sourceLocA = coords;
        --`+p[f-1]+`;
        `+d+` sourceLocB = coords;
        --`+p[f-2]+";";var g=["x","y","z","w","u","v"].slice(0,u),y="."+g[u-1],x=g.map(function(D){return"int "+D}),w=vr("sourceLocR",u-1).concat("inIdx.r"),_=vr("sourceLocG",u-1).concat("inIdx.g"),S=vr("sourceLocB",u-1).concat("inIdx.b"),C=vr("sourceLocA",u-1).concat("inIdx.a"),R=t==="max"?"greaterThan":"lessThan",T=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+C.join()+")));",O=`vec4(
            getAChannel(`+w.join()+`),
            hasNextCol ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+C.join()+") : 0.)",k=r?"":`
      float getBestIndicesAChannel(`+x.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+x.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+k+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+p[f-1]+" < "+(c[f-1]-1)+`;
        bool hasNextRow = `+p[f-2]+" < "+(c[f-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+O+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+T+`
          vec4 candidate = `+O+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+R+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},mU=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dilationHeight,o=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,f=u-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+f+", "+d+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},gU=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,v=n.effectiveFilterWidth,g=d-1-n.padInfo.front,y=p-1-n.padInfo.top,x=v-1-n.padInfo.left,w=1/(e*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float avgMultiplier = float(`+w+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+u+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+v+`;
                wC += `+f+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},yU=function(n,e,t,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],ct(n,e),ct(n,t);var o="0.0";r!=null&&(ct(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="1.0";a!=null&&(ct(n,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+u+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},bU=function(n,e,t,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ct(n,e),ct(n,t);var o="vec4(0.0)";r!=null&&(ct(n,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="vec4(1.0)";a!=null&&(ct(n,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+u+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},xU="return areal * breal - aimag * bimag;",wU="return areal * bimag + aimag * breal;",TC=function(n,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ct(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},u0="return a + b;",l0="return a - b;",OC="return a * b;",BA="return (a < 0.) ? b * a : a;",Xt=function(n,e,t){this.variableNames=["A","B"],this.outputShape=ct(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},zA=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ci=function(n,e,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ct(e,t);var a=this.outputShape.length,i="";if(r)if(a===0||Ne(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Bt(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=vr("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+o[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+o[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},_U=function(){function n(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),EU=function(){function n(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n}(),SU=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},CU=function(n){this.outputShape=[],this.outputShape=Xl(n,1),this.variableNames=n.map(function(u,c){return"T"+c});var e=new Array(n.length-1);e[0]=n[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+n[t][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var a=e[t-1];r.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+a+"));")}var i=e.length,o=e[e.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},RU=function(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Xl(n,e);var t=this.outputShape,r=t.length,a=Bt(r),i=vr("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(w,_){return"T"+_});var u=new Array(n.length-1);u[0]=n[0][e];for(var c=1;c<u.length;c++)u[c]=u[c-1]+n[c][e];var f=o[e],d=o.slice(-2),p=o.join(),v="if ("+f+" < "+u[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+d.join()+`));
        }`;for(c=1;c<u.length;c++){var g=u[c-1];v+=`
        if (`+f+" < "+u[c]+"  && "+f+" >= "+u[c-1]+`) {
          return getChannel(
            getT`+c+"("+hp(o,f,g)+`),
            vec2(`+hp(d,f,g)+`));
        }`}var y=u.length,x=u[u.length-1];v+=`
        return getChannel(
          getT`+y+"("+hp(o,f,x)+`),
          vec2(`+hp(d,f,x)+"));",this.userCode=`
      float getValue(`+o.map(function(w){return"int "+w})+`) {
        `+v+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+t[r-2]+` &&
            `+i[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function hp(n,e,t){var r=n.indexOf(e);return n.map(function(a,i){return i===r?a+" - "+t:a}).join()}var TU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},OU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=n.dataFormat==="channelsLast",o=e-1-n.padInfo.top,u=t-1-n.padInfo.left,c=i?1:2,f=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+f+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},AU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.padInfo.front,i=n.padInfo.top,o=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+a+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+i+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},kU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=e-1-n.padInfo.front,c=t-1-n.padInfo.top,f=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},DU=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,i=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},NU=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,i=e-1-n.padInfo.top,o=t-1-n.padInfo.left,u=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+u+`; dm++) {
              int d2 = d1 * `+u+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},AC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.padInfo.top,i=n.padInfo.left,o=n.strideHeight,u=n.strideWidth,c=n.dilationHeight,f=n.dilationWidth,d=n.filterHeight,p=n.filterWidth,v=4*Math.floor(n.inChannels/4),g=n.inChannels%4,y=n.dataFormat==="channelsLast",x=y?1:2,w=y?2:3,_=y?3:1,S="",C="";t&&(S=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,C="result = activation(result);");var R=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+o+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+_+`];

        ivec2 xRCCorner =
            ivec2(coords[`+x+"], coords["+w+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+v+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+v+`) *
                    getW(wR, wC, `+v+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+v+`, xR, xC) *
                    getW(wR, wC, `+v+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+v+`, d2),
                getW(wR, wC, `+v+` + 1, d2),
                getW(wR, wC, `+v+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+v+`),
                  getX(batch, xR, xC, `+v+` + 1),
                  getX(batch, xR, xC, `+v+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+v+`, xR, xC),
                  getX(batch, `+v+` + 1, xR, xC),
                  getX(batch, `+v+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+R+`
        `+C+`
        setOutput(result);
      }
    `},IU=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var e=n.padInfo.front,t=n.padInfo.top,r=n.padInfo.left,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,v=n.filterWidth,g=4*Math.floor(n.inChannels/4),y=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+u+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+v+`; wC++) {
              int xC = xCCorner + wC * `+f+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},kC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.inHeight,i=n.inWidth,o=n.padInfo.top,u=n.padInfo.left,c=n.strideHeight,f=n.strideWidth,d=n.dilationHeight,p=n.dilationWidth,v=n.filterHeight,g=n.filterWidth,y=n.outChannels/n.inChannels,x="",w="";t&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,w="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+v+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+_+`
        `+w+`
        setOutput(result);
      }
    `},DC=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var a=n.inHeight,i=n.inWidth,o=n.padInfo.top,u=n.padInfo.left,c=n.strideHeight,f=n.strideWidth,d=n.dilationHeight,p=n.dilationWidth,v=n.filterHeight,g=n.filterWidth,y=g,x="int xR; int xC; int xCOffset;",w=0;w<v;w++)for(var _=0;_<g;_++)x+=`
          vec4 xTexelR`+w+"C"+2*_+` = vec4(0.);
          vec4 wR`+w+"C"+_+` = vec4(0.);
          vec4 xR`+w+"C"+_+" = vec4(0.);";for(w=0;w<v;w++)for(var S=0;S<y;S++){if(x+=`
          xR = xRCorner + `+w*d+`;
          xC = xCCorner + `+(_=2*S)*p+`;
        `,f===1){if(_<g&&(x+=u%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+w+"C"+_+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+w+"C"+_+" = vec4(previous.zw, xTexelR"+w+"C"+_+`.xy);
                } else {
                  xR`+w+"C"+_+" = vec4(0, 0, xTexelR"+w+"C"+_+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xR`+w+"C"+_+" = xTexelR"+w+"C"+_+`;
              `,_+1<g)){var C=u%2==0?rA(p):p;p%2==0&&u%2==1||p%2!=0&&u%2!=1?(x+=`
                  xCOffset = xC + `+u%2+" + "+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(x+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+w+"C"+_+` = vec4(0.);
                    }
                  `),x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.xy);
                `):x+=`
                  xCOffset = xC + `+C+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+w+"C"+(_+1)+" = xTexelR"+w+"C"+(_+2)+`;
                `}}else _<g&&(x+=`
              if(xR >= 0 && xR < `+a+`) {
            `,u%2==1?(x+=`
                xCOffset = xC + 1 - `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
              `,_+1<g&&(x+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+f+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+w+"C"+(_+1)+" = vec4(xTexelR"+w+"C"+(_+2)+`.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+w+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+w+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+(_+2)+` = vec4(0.);
                }

                xR`+w+"C"+_+` = vec4(
                  xTexelR`+w+"C"+_+".xy, xTexelR"+w+"C"+(_+2)+`.xy);
              `,_+1<g&&(x+=`
                  xR`+w+"C"+(_+1)+` = vec4(
                    xTexelR`+w+"C"+_+".zw, xTexelR"+w+"C"+(_+2)+`.zw);
                `)),x+="}");_<g&&(x+=`
            vec4 wTexelR`+w+"C"+_+" = getW("+w+", "+_+`, d1, q);
            wR`+w+"C"+_+" = vec4(wTexelR"+w+"C"+_+".xz, wTexelR"+w+"C"+_+`.xz);
          `,_+1<g&&(x+=`
              vec4 wTexelR`+w+"C"+(_+1)+" = getW("+w+", "+(_+1)+`, d1, q);
              wR`+w+"C"+(_+1)+` =
                vec4(wTexelR`+w+"C"+(_+1)+".xz, wTexelR"+w+"C"+(_+1)+".xz);"))}for(w=0;w<v;w++)for(_=0;_<g;_++)x+="dotProd += xR"+w+"C"+_+" * wR"+w+"C"+_+";";var R="",T="";t&&(R=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,T="result = activation(result);");var O=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+R+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+x+`

        vec4 result = dotProd;
        `+O+`
        `+T+`
        setOutput(result);
      }
    `},MU=function(n,e,t,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=n[0],o=n[1],u=n[2],c=n[3],f=e[0],d=t[0],p=t[1];this.outputShape=[f,d,p,c];var v=r==="bilinear"?1:0,g=[o-1+".0",u-1+".0"],y=g[0],x=g[1],w=d>1?[""+(o-1)/(d-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],_=w[0],S=w[1],C=w[2],R=p>1?[""+(u-1)/(p-1),"(x2-x1) * width_ratio","x1*"+x+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+x],T=R[0],O=R[1],k=R[2];this.userCode=`
      const float height_ratio = float(`+_+`);
      const float width_ratio = float(`+T+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+O+`;

        float in_y = `+C+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+k+`;
        if( in_x < 0.0 || in_x > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+v+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},FU=function(n,e,t){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=n[n.length-1],i=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Bt(r)+` coords = getOutputCoords();
        int end = `+NC(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+NC(r,"coords")+` = idx;
          val += getX(`+function(o,u){if(o===1)return""+u;if(o===2)return u+".x, "+u+".y";if(o===3)return u+".x, "+u+".y, "+u+".z";if(o===4)return u+".x, "+u+".y, "+u+".z, "+u+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function NC(n,e){if(n===1)return""+e;if(n===2)return e+".y";if(n===3)return e+".z";if(n===4)return e+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var PU=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sh.DENSE;var e=If(n),t=Kn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Os(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},LU=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sh.DENSE;var e=If(n),t=Kn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Os(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},BU=function(){function n(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),zU=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},UU=function(n){this.variableNames=["A"],this.outTexUsage=kr.DOWNLOAD;var e=Kn();this.outputShape=n,this.userCode=`
      `+PA+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},VU=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=kr.DOWNLOAD;var e=Kn();this.outputShape=n,this.userCode=`
      `+PA+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},jU=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=Kn(),a=e[0],i=e[1];this.outputShape=n;var o="result";t&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+Hx(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},qU=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Kn(),a=e[0],i=e[1];this.outputShape=n;var o="",u="result";t&&(u="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var f=0;f<=1;f++){var d=2*c+f;o+=`
          localCoords = coords;
          if(localCoords[2] + `+f+" < "+n[2]+`) {
            localCoords[2] += `+f+`;
            if(localCoords[1] + `+c+" < "+n[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Hx(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+u+`;
      }
    `},WU="return real * expR - imag * expI;",HU="return real * expI + imag * expR;",IC=function(n,e,t){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var a=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},GU=function(){function n(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(t.valueLoc,e)}},n}(),QU=function(n,e,t){this.variableNames=["A","indices"];var r=n.slice();r[t]=e,this.outputShape=r,this.rank=r.length;var a=Bt(this.rank),i=function(o,u){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var f=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],p=0;p<o.length;p++)p===u?d.push("int(getIndices("+f[p]+"))"):d.push(""+f[p]);return d.join()}(n,t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},$U=function(n,e,t){this.sliceDim=n,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var r=Bt(e.length),a=Bt(t.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function KU(n,e){var t=Kn();return WB(n,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function XU(n,e){return KB(n,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function YU(n,e){return XB(n,e,new Uint16Array([0,1,2,2,1,3]))}function Nh(n,e,t,r,a,i,o){ZB(t,r);var u=YB(n,e),c=n.TEXTURE_2D;return Me(n,e,function(){return n.bindTexture(c,u)}),Me(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),Me(n,e,function(){return n.texParameteri(c,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),Me(n,e,function(){return n.texParameteri(c,n.TEXTURE_MIN_FILTER,n.NEAREST)}),Me(n,e,function(){return n.texParameteri(c,n.TEXTURE_MAG_FILTER,n.NEAREST)}),Me(n,e,function(){return n.texImage2D(c,0,a,t,r,0,i,o,null)}),Me(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)}),u}function ZU(n,e,t,r,a){var i=Gv(t,r);return Nh(n,e,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,n.FLOAT)}function JU(n,e,t,r,a){var i=Gv(t,r);return Nh(n,e,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function eV(n,e,t,r,a){var i=Gv(t,r);return Nh(n,e,i[0],i[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function tV(n,e,t,r,a){var i=Dh(t,r);return Nh(n,e,i[0],i[1],a.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function nV(n,e,t,r,a){var i=Dh(t,r);return Nh(n,e,i[0],i[1],a.internalFormatPackedHalfFloat,n.RGBA,a.textureTypeHalfFloat)}function rV(n,e,t,r){return Me(n,e,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),xC(n,e,t,"clipSpacePos",r,3,20,0)&&xC(n,e,t,"uv",r,2,20,12)}function aV(n,e,t,r,a,i,o){var u,c,f;Me(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),i instanceof Uint8Array?(u=new Uint8Array(r*a*4),c=n.UNSIGNED_BYTE,f=n.RGBA):(u=new Float32Array(r*a*4),c=n.FLOAT,f=o.internalFormatPackedFloat),u.set(i),Me(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,f,r,a,0,n.RGBA,c,u)}),Me(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function iV(n,e,t,r){Me(n,e,function(){return n.bindTexture(n.TEXTURE_2D,t)}),r.data instanceof Uint8Array?Me(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):Me(n,e,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),Me(n,e,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function oV(n,e,t,r,a){var i=n.createBuffer();Me(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,i)});var o=16*t*r;return Me(n,e,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,o,n.STREAM_READ)}),Me(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,0)}),Me(n,e,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),i}function sV(n,e,t){var r=n,a=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function uV(n,e,t,r,a){var i=Gv(t,r),o=i[0],u=i[1],c=new Uint8Array(t*r*4);return Me(n,e,function(){return n.readPixels(0,0,o,u,a.downloadTextureFormat,n.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function lV(n,e,t,r,a,i,o,u){var c=n,f=new Float32Array(function(d,p){var v=Dh(d,p);return v[0]*v[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,f),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),f}function cV(n,e,t,r){var a=new Float32Array(t*r*4);return Me(n,e,function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,a)}),a}var fV=function(){function n(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=ce().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,zB(t,e)):this.gl=ni(t);var r="WEBGL_color_buffer_float";if(ce().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=up(this.gl,this.debug,"OES_texture_float"),Yr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=up(this.gl,this.debug,"OES_texture_half_float");else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Yr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=up(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Yr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Yr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=XU(this.gl,this.debug),this.indexBuffer=YU(this.gl,this.debug),this.framebuffer=JB(this.gl,this.debug),this.textureConfig=Fx(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return ce().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Me(t,this.debug,function(){return t.finish()}),Me(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Me(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Me(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Me(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Me(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),ZU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),JU(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),eV(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),iV(this.gl,this.debug,e,t)},n.prototype.uploadDenseMatrixToTexture=function(e,t,r,a){this.throwIfDisposed(),aV(this.gl,this.debug,e,t,r,a,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),nV(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),tV(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(wC(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Me(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return uV(a.gl,a.debug,t,r,a.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(e,t,r,a,i,o){return lV(this.gl,e,0,0,0,i,o,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return sV(this.gl,e,t)},n.prototype.createBufferFromTexture=function(e,t,r){this.bindTextureToFrameBuffer(e);var a=oV(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},n.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},n.prototype.createFence=function(e){var t,r,a=this;if(ce().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var u=i.clientWaitSync(o,0,0);return u===i.ALREADY_SIGNALED||u===i.CONDITION_SATISFIED},t=o}else ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(t,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,function(){return cV(a.gl,a.debug,t,r)})},n.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,r=HB(t,this.debug,e),a=KU(t,this.debug),i=QB(t,this.debug);return Me(t,this.debug,function(){return t.attachShader(i,a)}),Me(t,this.debug,function(){return t.attachShader(i,r)}),$B(t,this.debug,i),this.debug&&a0(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=rV(t,this.debug,this.program,this.vertexBuffer)),i},n.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Me(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},n.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&a0(this.gl,this.debug,this.program),Me(this.gl,this.debug,function(){return t.gl.useProgram(e)})},n.prototype.getUniformLocation=function(e,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?tz(this.gl,this.debug,e,t):nz(this.gl,e,t)},n.prototype.getAttributeLocation=function(e,t){var r=this;return this.throwIfDisposed(),Me(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,t)})},n.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},n.prototype.setInputMatrixTexture=function(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),rz(this.gl,this.debug,this.program,e,t,r)},n.prototype.setOutputMatrixTexture=function(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)},n.prototype.setOutputPackedMatrixTexture=function(e,t,r){this.throwIfDisposed();var a=Dh(t,r),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)},n.prototype.setOutputMatrixWriteRegion=function(e,t,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,t)},n.prototype.setOutputPackedMatrixWriteRegion=function(e,t,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&a0(this.gl,this.debug,this.program),lp(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Me(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Me(this.gl,this.debug,function(){return e.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=up(this.gl,this.debug,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},n.prototype.endQuery=function(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(e){return Ae(this,void 0,void 0,function(){var t=this;return ke(this,function(r){switch(r.label){case 0:return[4,pC(function(){return t.disposed||t.isQueryAvailable(e,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},n.prototype.pollFence=function(e){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var e=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},n.prototype.addItemToPoll=function(e,t){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||pC(function(){return r.pollItems(),r.itemsToPoll.length===0})},n.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),i0(this.gl,this.debug,e,this.framebuffer),this.debug&&lp(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(i0(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&lp(this.gl)):wC(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var r=t();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(e,t,r){this.throwIfDisposed();var a=this.gl;i0(a,this.debug,e,this.framebuffer),this.debug&&lp(a),this.outputTexture=e,Me(a,this.debug,function(){return a.viewport(0,0,t,r)}),Me(a,this.debug,function(){return a.scissor(0,0,t,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(e,t,r,a){var i=this;this.throwIfDisposed(),Me(this.gl,this.debug,function(){return i.gl.scissor(e,t,r,a)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n}();function MC(n,e){if(n.length!==e.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+e.length+" inputs");n.forEach(function(t,r){var a=t.logicalShape,i=e[r],o=i.shape;if(!Nn(a,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+o+" must match");if(!t.isUniform||!i.isUniform){var u=t.texShape,c=i.isUniform?null:i.texData.texShape;if(!Nn(u,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+u+" and "+c+" must match")}})}var hV=function(n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=t.filterWidth,a=t.inChannels,i=t.strideWidth,o=t.strideHeight,u=t.padInfo,c=t.outWidth,f=t.dilationWidth,d=t.dilationHeight,p=t.dataFormat,v=u.left,g=u.top,y=a*r,x=Kn(),w=p==="channelsLast",_=w?0:1,S=w?1:2,C="",R=0;R<=1;R++)for(var T=0;T<=1;T++)C+=`
          blockIndex = rc.y + `+T+`;
          pos = rc.x + `+R+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+g+`;
            d0 = offsetY + `+d+" * (pos / "+y+`);

            if(d0 < `+e[_]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+v+`.);
              d1 = offsetX + `+f+" * (int(mod(float(pos), "+y+".) / "+a+`.));

              if(d1 < `+e[S]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+w+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*R+T)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*R+T)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+C+`

        `+x.output+` = result;
      }
    `},dV=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=e,u=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+u+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},pV=function(n,e,t,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=t,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},vV=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=e,u=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+u+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},mV=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideHeight,t=n.strideWidth,r=n.dilationHeight,a=n.effectiveFilterHeight,i=n.effectiveFilterWidth,o=a-1-n.padInfo.top,u=i-1-n.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},gV=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.dilationDepth,i=n.dilationHeight,o=n.dilationWidth,u=n.effectiveFilterDepth,c=n.effectiveFilterHeight,f=n.effectiveFilterWidth,d=u-1-n.padInfo.front,p=c-1-n.padInfo.top,v=f-1-n.padInfo.left,g=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+p+", "+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+f+` +
                  wR * `+f+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},c0=function(n,e,t,r,a,i,o){t===void 0&&(t=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var u=t?n[1]:n[2],c=Math.ceil(u/2),f=t?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",p=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";i&&(g=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,y="result = activation(result);");var x=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+f+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+v[0]+`);
          result += (`+p[1]+" * "+v[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+x+`

        `+y+`

        setOutput(result);
      }
    `},yV=function(){function n(e,t,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(t.seedLoc,e)}},n}(),bV=function(n,e,t,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},xV=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var e=n.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=vr("rc",e),r=Bt(e),a=function(u,c,f){if(u===1)return"rc > "+c[0];for(var d="",p=u-2;p<u;p++)d+=f[p]+" >= "+c[p],p<u-1&&(d+="||");return d}(e,n,t),i=function(u,c,f,d){if(u===1)return"";var p=d.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+f+`;
  `}(e,n[n.length-1],n[n.length-2],t),o=function(u,c){var f=u.length,d=function(p,v){for(var g=[],y=0;y<=1;y++)for(var x=0;x<=1;x++){for(var w=(y===0?"r":"rp1")+", "+(x===0?"c":"cp1"),_=2;_<p;_++)w=v[v.length-1-_]+","+w;g.push(w)}return g}(f,c);return f===1?`getA(rc),
            rc + 1 >= `+u[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(n,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},wV=function(n,e,t){this.variableNames=["x"],this.outputShape=e.map(function(c,f){return c[0]+n[f]+c[1]});var r=n.length,a=Bt(r),i=e.map(function(c){return c[0]}).join(","),o=e.map(function(c,f){return c[0]+n[f]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+u+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},_V=function(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(w,_){return w[0]+n[_]+w[1]});for(var r=n.length,a=Bt(r),i=e.map(function(w){return w[0]}).join(","),o=e.map(function(w,_){return w[0]+n[_]}).join(","),u=vr("rc",r),c=vr("source",r),f=u[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+c.slice(-2).join()+")",p=[a+" rc = outputLoc;",u[r-1]+` += 1;
       if(`+f+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+u[r-2]+` += 1;
       if(`+u[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+u[r-1]+` += 1;
         if(`+f+") {"],v=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",y=0,x=r===1?2:4;y<x;y++)g+=`
        `+p[y]+`
        if (`+v+`) {
          result[`+y+"] = float("+t+`);
        } else {
          `+a+` source = rc - start;
          result[`+y+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},f0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideHeight,i=n.strideWidth,o=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,f=n.effectiveFilterWidth,d=n.padInfo.top,p=n.padInfo.left;this.outputShape=n.outShape;var v=e==="avg",g="0.0";if(v||(g="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+d+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+u+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+f+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(y="avgValue / count");var x=4*Math.floor(r/4),w=r%4,_=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+d+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+x+`; wC += 4) {
            int xC = xCCorner + wC * `+u+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              getValue(batch, xR, xC + 3 * `+u+`, d)
            );

            `+_+`
          }

          int xC = xCCorner + `+x+`;
          if (`+(w===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(w===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              initializationValue
            );

            `+_+`
          }
        }
        setOutput(`+y+`);
      }
    `}},h0=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideDepth,i=n.strideHeight,o=n.strideWidth,u=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,v=n.effectiveFilterWidth,g=n.padInfo.front,y=n.padInfo.top,x=n.padInfo.left;this.outputShape=n.outShape;var w=e==="avg",_="0.0";if(w||(_="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+u+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+v+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+v+` +
                      wR * `+v+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var S=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(S="avgValue / count");var C=4*Math.floor(r/4),R=r%4,T=`
      if (`+w+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+g+", "+y+", "+x+`);
      const float initializationValue = `+_+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+_+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+u+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+C+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+T+`
            }

            int xC = xCCorner + `+C+`;
            if (`+(R===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(R===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+T+`
            } else if (`+(R===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+T+`
            }
          }
          setOutput(`+S+`);
        }
      }
    `}},EV=function(n,e){this.variableNames=["x"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=Math.ceil(a/t);this.outputShape=[r,i];var o="0.0",u="";e==="prod"?o="1.0":e==="min"?(o="1.0 / 1e-20",u="min"):e==="max"&&(o="-1.0 / 1e-20",u="max");var c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");var f=4*Math.floor(t/4),d=t%4,p=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+u+`(values, minMaxValue);
      }
    `,v="vec4";e==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,v="bvec4"):e==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,v="bvec4");var g="";a%t>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+f+`; i += 4) {
          int inIdx = inOffset + i;
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+f+`;
        if (`+(d===1)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===2)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(d===3)+`) {
          `+v+" values = "+v+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+c+`);
      }
    `},SV=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var t="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),t+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Os(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+Hx(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+t+`

        setOutput(result);
      }
    `},CV=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],o=n.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],d=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},RV=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},TV=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`,
          `+c[1]/f[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(u-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},OV=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],i=r[2],o=n.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],d=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/d[0],v=f[1]/d[1],g=1/p,y=1/v,x=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+v+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+x+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+f[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+f[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},AV=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],i=n[1],o=n[2],u=n[3];this.outputShape=[a,e,t,u];var c=[r&&e>1?i-1:i,r&&t>1?o-1:o],f=[r&&e>1?e-1:e,r&&t>1?t-1:t],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},kV=function(n,e){this.variableNames=["x"];var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=n,t!==1){var r=n.map(function(i,o){return function(u){return e.indexOf(u)!==-1&&n[u]!==1?n[u]+" - coords["+u+"] - 1":"coords["+u+"]"}(o)}).join(","),a=Bt(t);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},DV=function(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=n;var r=vr("rc",t),a=r[t-1]+" + 1 < "+this.outputShape[t-1],i=r[t-2]+" + 1 < "+this.outputShape[t-2],o=Bt(t);function u(c){var f=n.map(function(d,p){return function(v,g){return e.indexOf(v)!==-1&&n[v]!==1?n[v]+" - "+g[v]+" - 1":""+g[v]}(p,c)});return"getChannel(getX("+f.join(",")+"), vec2("+f.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return u(c)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",u(c)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},FC=function(n,e,t,r,a,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var u=Bt(a.length),c=Bt(i.length),f="";t===1?f="i":t===2&&(f="i, j");var d="getIndices("+f+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var v="getUpdates("+p+")",g=e>1?"strides[j]":"strides";this.userCode=`
        `+u+" strides = "+u+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+v+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},NV=function(n,e){this.variableNames=["x","segmentIds"];var t=n.windowSize,r=n.batchSize,a=n.inSize,i=n.numSegments,o=i*Math.ceil(a/t);this.outputShape=[r,o];var u=4*Math.floor(t/4),c=t%4,f=`
        sumValue += dot(values, segFilter);
    `,d="";a%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var p="";a%t>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+f+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+f+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+f+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+f+`
        }
        setOutput(sumValue);
      }
    `},IV=function(n,e,t){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],u=[],c=0;c<e.length;c++)u.push(""+i[c]),c<n&&o.push(""+i[c]);r=o.join(),a=u.join()}var f=Bt(t);this.userCode=`
      void main() {
        `+f+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},MV=function(){function n(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,r=Bt(this.rank),a="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return d0.slice(0,o).map(function(u){return"sourceLoc."+u}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(o,u){return"sourceLoc."+d0[u]+" = start["+u+"] + coords."+d0[u]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+t+`
        setOutput(getSource(`+i+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),d0=["x","y","z","w","u","v"],FV=function(){function n(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Bt(this.rank),r=vr("coords",this.rank),a=vr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",o="getChannel(getSource("+a.join()+"), "+i+")",u=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+o+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map(function(d,p){return"start["+p+"]"}).join()+");":e.map(function(d,p){return a[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+f+`
        vec4 result = vec4(0.);
        `+u+`
        `+c+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n}(),PV=function(n,e,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=Bt(t.length),i=Bt(t.length),o="";if(r===1)o="coords * strides + begin";else{var u=0;o=t.map(function(c,f){return u++,t.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(u-1)+"] * strides["+f+"] + begin["+f+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+n+`);
      `+a+" strides = "+a+"("+e+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},LV=function(){function n(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(e,t,r){var a,i=PC(t,r),o=LC(e,i,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var u=this.freeTextures[o].shift();return this.usedTextures[o].push(u),u}return this.numUsedTextures++,this.log(),i===Ar.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Ar.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Ar.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Ar.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Ar.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),a},n.prototype.releaseTexture=function(e,t,r,a){if(this.freeTextures!=null){var i=LC(t,PC(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],u=o.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(u,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(a){e.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function PC(n,e){if(n===kr.UPLOAD)return Ar.PACKED_2X2_FLOAT32;if(n===kr.RENDER||n==null)return function(t){return ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Ar.PACKED_2X2_FLOAT32:Ar.UNPACKED_FLOAT32:t?Ar.PACKED_2X2_FLOAT16:Ar.UNPACKED_FLOAT16}(e);if(n===kr.DOWNLOAD||n===kr.PIXELS)return Ar.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function LC(n,e,t){return n[0]+"_"+n[1]+"_"+e+"_"+t}var BV=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[r]*e[r];this.outputShape=t,this.rank=t.length;var a=Bt(this.rank),i=function(o){var u=o.length;if(u>5)throw Error("Tile for rank "+u+" is not yet supported");if(u===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],f=[],d=0;d<o.length;d++)f.push("imod("+c[d]+", "+o[d]+")");return f.join()}(n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},zV=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];this.outputShape=t,this.rank=t.length;var a=Bt(this.rank),i=function(o){var u=o.length;if(u>6)throw Error("Transpose for rank "+u+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],f=new Array(u),d=0;d<o.length;d++)f[o[d]]=c[d];return f.join()}(e);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},UV=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Bt(this.rank),i=FA("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=i[r];var u="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+t[this.rank-1],f="getChannel(getA("+o.join()+"), "+u+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+f+`;
      if(`+c+`) {
        result[1] = `+f+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+f+`;
        if(`+c+`) {
          result[3] = `+f+`;
        }
      }
      setOutput(result);
    }
    `},Gx=1.7580993408473768,Qx=1.0507009873554805,et=function(n,e){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ea="if (isnan(x)) return x;",VV="return x;",BC="return abs(x);",UA=Ea+`
  return (x < 0.0) ? 0.0 : x;
`,VA=Ea+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,jA="return (x >= 0.0) ? x : (exp(x) - 1.0);",jV=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Gx+`;
  float scale = `+Qx+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,zC="return -x;",UC="return ceil(x);",VC="return floor(x);",jC="return exp(x);",qC="return exp(x) - 1.0;",qV=Ea+`
  return sin(x);
`,WV=Ea+`
  return cos(x);
`,HV=Ea+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,GV=Ea+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,QV=Ea+`
  return atan(x);
`,$V=Ea+"return log(x + sqrt(x * x + 1.0));",KV=Ea+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,XV=Ea+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,dp="return x;",YV="return x;",qA=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,WA=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,HA=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,gf=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},ZV=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var e=n.length,t=vr("rc",e),r=Bt(e),a=function(u,c){if(u===1)return"rc";for(var f="",d=0;d<u;d++)f+=c[d],d<u-1&&(f+=",");return f}(e,t),i=t.slice(-2),o=e<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},pp={};function vp(n,e){if(e===void 0&&(e=!1),n==="linear")return e?YV:VV;if(n==="relu")return e?qA:UA;if(n==="elu")return e?HA:jA;if(n==="relu6")return e?WA:VA;if(n==="prelu")return e?zA:BA;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var JV=600,ej=function(n){function e(t){var r,a=n.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!ce().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var i=ni(ce().getNumber("WEBGL_VERSION"));a.binaryCache=((r=ce().getNumber("WEBGL_VERSION"))in pp||(pp[r]={}),pp[r]),a.gpgpu=new fV(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=t,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=t.gl.canvas;return a.textureManager=new LV(a.gpgpu),a.numMBBeforeWarning=ce().global.screen==null?1024:ce().global.screen.height*ce().global.screen.width*window.devicePixelRatio*JV/1024/1024,a.texData=new RA(a,G),a}return _a(e,n),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,r,a){if(ce().getBool("DEBUG")&&this.checkNumericalProblems(t),a==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:t,usage:kr.UPLOAD}),i},e.prototype.move=function(t,r,a,i){if(ce().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:a,dtype:i,values:r,usage:kr.UPLOAD})},e.prototype.readSync=function(t){var r=this.texData.get(t),a=r.values,i=r.dtype,o=r.complexTensors,u=r.slice,c=r.shape,f=r.isPacked;if(u!=null){var d=void 0;d=f?new gf(c,dp):new et(c,dp);var p=this.runWebGLProgram(d,[{dataId:t,shape:c,dtype:i}],i),v=this.readSync(p.dataId);return this.disposeData(p.dataId),v}if(a!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return a;var g,y,x=this.activeTimers!=null;return x&&(g=Ba()),i==="complex64"?y=Pb(o.real.dataSync(),o.imag.dataSync()):y=this.getValuesFromTexture(t),x&&(this.downloadWaitMs+=Ba()-g),this.convertAndCacheOnCPU(t,y)},e.prototype.read=function(t){return Ae(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,k,D;return ke(this,function(N){switch(N.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(M){return r.push(M)})];if(a=this.texData.get(t),i=a.values,o=a.shape,u=a.slice,c=a.dtype,f=a.complexTensors,d=a.isPacked,u!=null)return p=void 0,p=d?new gf(o,dp):new et(o,dp),v=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:c}],c),g=this.read(v.dataId),this.disposeData(v.dataId),[2,g];if(i!=null)return[2,this.convertAndCacheOnCPU(t)];if(!ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ce().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,c!=="complex64"&&ce().get("WEBGL_BUFFER_SUPPORTED")&&(x=this.decode(t),w=this.texData.get(x.dataId),y=(D=this.gpgpu).createBufferFromTexture.apply(D,[w.texture].concat(If(o)))),this.pendingRead.set(t,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:N.sent(),N.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([f.real.data(),f.imag.data()])];case 3:return S=N.sent(),C=S[0],R=S[1],_=Pb(C,R),[3,5];case 4:y==null?_=this.getValuesFromTexture(t):(T=Ne(o),_=this.gpgpu.downloadFloat32MatrixFromBuffer(y,T)),N.label=5;case 5:return x!=null&&this.disposeData(x.dataId),O=this.convertAndCacheOnCPU(t,_),k=this.pendingRead.get(t),this.pendingRead.delete(t),k.forEach(function(M){return M(O)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,O]}})})},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var a=t[r];if(!jB(a))throw ce().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.isPacked,c=Ne(i);if(ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var f=this.decode(t),d=this.texData.get(f.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(If(i))).subarray(0,c);return this.disposeData(f.dataId),p}var v=ce().getBool("WEBGL_PACK")&&u===!0,g=v?o0(i):i,y=v?new VU(g):new UU(g),x=this.runWebGLProgram(y,[{shape:g,dtype:o,dataId:t}],"float32"),w=this.texData.get(x.dataId),_=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,c);return this.disposeData(x.dataId),_},e.prototype.time=function(t){return Ae(this,void 0,void 0,function(){var r,a,i,o,u,c,f;return ke(this,function(d){switch(d.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,t(),o=$l(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),u=$l(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return f=d.sent(),c.kernelMs=_B(f),c.getExtraProfileInfo=function(){return f.map(function(p,v){return{name:u[v],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ba(),endMs:null}},e.prototype.endTimer=function(t){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Ba(),t)},e.prototype.getQueryTime=function(t){return Ae(this,void 0,void 0,function(){var r;return ke(this,function(a){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var r=this.texData.get(t),a=r.texture,i=r.dtype,o=r.texShape,u=r.usage,c=r.isPacked,f=r.slice,d=f&&f.origDataId||t,p=this.dataRefCount.get(d);p>1?this.dataRefCount.set(d,p-1):(this.dataRefCount.delete(d),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,u,c)));var v=this.texData.get(t);v.texture=null,v.texShape=null,v.isPacked=!1,v.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return ce().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=G.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(i){return a.texData.get(i.dataId).texture==null&&i.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,r){var a=this.makeOutput(t.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:G.keep(t.clone()),imag:G.keep(r.clone())},a},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,a);if(Ne(a)===0)return Vn([],a,t.dtype);var i=this.texData.get(t.dataId).isPacked,o=SA(t.shape,r,a);if(i||!o){var u=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FV(a):new MV(a),c=u.getCustomSetupFunc(r);return this.compileAndRun(u,[t],null,c)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,a)},e.prototype.shallowSlice=function(t,r,a){var i=this.texData.get(t.dataId),o=this.makeOutput(a,t.dtype),u=this.texData.get(o.dataId);Object.assign(u,i),u.shape=a,u.dtype=t.dtype;var c=CA(r,t.strides);i.slice&&(c+=i.slice.flatOffset),u.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||t.dataId};var f=this.dataRefCount.get(u.slice.origDataId)||1;return this.dataRefCount.set(u.slice.origDataId,f+1),o},e.prototype.stridedSlice=function(t,r,a,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,a,i);var o=Ux(r,a,i);if(o.some(function(c){return c===0}))return Vn([],o);var u=new PV(r,i,o);return this.compileAndRun(u,[t])},e.prototype.reverse=function(t,r){var a=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new DV(t.shape,r):new kV(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var a=t.map(function(g){return Xr(g)}),i=t.map(function(g){return Va(g)});return zn(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),u=this.concat(t.slice(0,o),r),c=this.concat(t.slice(o),r);return this.concat([u,c],r)}if(ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var f=new RU(t.map(function(g){return g.shape}),r);return this.compileAndRun(f,t)}var d=Xl(t.map(function(g){return g.shape}),r),p=t.map(function(g){return g.as2D(-1,Ne(g.shape.slice(r)))}),v=new CU(p.map(function(g){return g.shape}));return this.compileAndRun(v,p).reshape(d)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,zC,t.dtype);var r=new et(t.shape,zC);return this.compileAndRun(r,[t])},e.prototype.batchMatMul=function(t,r,a,i){var o=a?t.shape[2]:t.shape[1],u=i?r.shape[1]:r.shape[2],c=a?t.shape[1]:t.shape[2],f=t.shape[0];if((o===1||u===1)&&c>1e3){a&&(t=t.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var d=u===1?t:t.as3D(f,c,1),p=u===1?2:1,v=u===1?r.as3D(f,1,c):r;return this.multiply(d,v).sum(p,!0)}var g=Un(t.dtype,r.dtype),y=new c0(t.shape,[f,o,u],a,i);return this.compileAndRun(y,[t,r],g)},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=i?r.shape[2]:r.shape[1],p=o?a.shape[1]:a.shape[2],v=r.shape[0],g=Un(r.dtype,a.dtype),y=u!=null,x=f!=null,w=c?vp(c,!0):null,_=new c0(r.shape,[v,d,p],i,o,y,w,x),S=[r,a];return u&&S.push(u),f&&S.push(f),this.compileAndRun(_,S,g)},e.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var a=this.texData.get(t.dataId),i=this.texData.get(r.dataId),o=new TC(xU,t.shape,r.shape),u=new TC(wU,t.shape,r.shape),c=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],f=this.compileAndRun(o,c),d=this.compileAndRun(u,c),p=this.complex(f,d);return f.dispose(),d.dispose(),p}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,OC,t.dtype);var v=new Xt(OC,t.shape,r.shape);return this.compileAndRun(v,[t,r],t.dtype)},e.prototype.batchNormalization=function(t,r,a,i,o,u){var c=[t,r,a],f=null;u!=null&&(f=u.shape,c.push(u));var d=null;if(o!=null&&(d=o.shape,c.push(o)),ce().getBool("WEBGL_PACK_NORMALIZATION")){var p=new bU(t.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(p,c)}var v=new yU(t.shape,r.shape,a.shape,f,d,i);return this.compileAndRun(v,c)},e.prototype.localResponseNormalization4D=function(t,r,a,i,o){var u=ce().getBool("WEBGL_PACK_NORMALIZATION")?new vV(t.shape,r,a,i,o):new dV(t.shape,r,a,i,o);return this.compileAndRun(u,[t])},e.prototype.LRNGrad=function(t,r,a,i,o,u,c){var f=new pV(r.shape,i,o,u,c);return this.compileAndRun(f,[r,a,t])},e.prototype.tile=function(t,r){if(t.dtype==="string"){var a=this.readSync(t.dataId).map(function(o){return fv(o)});return IA(Xe(t.shape,t.dtype,a),r)}var i=new BV(t.shape,r);return this.compileAndRun(i,[t])},e.prototype.pad=function(t,r,a){var i=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _V(t.shape,r,a):new wV(t.shape,r,a);return this.compileAndRun(i,[t])},e.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var a=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UV(t.shape,r):new zV(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.gather=function(t,r,a){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,a);var i=new QU(t.shape,r.size,a);return this.compileAndRun(i,[t,r])},e.prototype.batchToSpaceND=function(t,r,a){L(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(p,v){return p*v}),o=gv(t.shape,r,i),u=yv(o.length,r.length),c=bv(t.shape,r,i),f=xA(a,r.length),d=wA(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,d)},e.prototype.spaceToBatchND=function(t,r,a){L(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(v,g){return v*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=gv(c.shape,r,i,!1),d=yv(f.length,r.length,!1),p=bv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},e.prototype.reduce=function(t,r,a){var i=t.shape[0],o=t.shape[1],u=s0(o),c=new EV({windowSize:u,inSize:o,batchSize:i},r),f=this.compileAndRun(c,[t],a);return f.shape[1]===1?f:this.reduce(f,r,a)},e.prototype.argReduce=function(t,r,a){a===void 0&&(a=null);var i=t.shape[0],o=t.shape[1];a!=null&&(i=a.shape[0],o=a.shape[1]);var u=s0(o),c=new lU({windowSize:u,inSize:o,batchSize:i},r,a==null),f=[t];a!=null&&f.push(a);var d=this.compileAndRun(c,f,"int32");return d.shape[1]===1?d:this.argReduce(t,r,d)},e.prototype.argReducePacked=function(t,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:t.shape,o=s0(i[i.length-1]),u=new vU(i,o,r,a==null),c=a==null?[t]:[t,a],f=this.compileAndRun(u,c,"int32");return f.rank===t.rank?this.argReducePacked(t,r,f):f},e.prototype.sum=function(t,r){Or("sum",r,t.rank);var a=Qn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o),c=Jy(t.dtype);return this.reduce(u,"sum",c).reshape(i)},e.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var a=Qn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o),c=Jy(t.dtype);return this.reduce(u,"prod",c).reshape(i)},e.prototype.unsortedSegmentSum=function(t,r,a){var i=0,o=ri([i],t.rank),u=t;o!=null&&(u=t.transpose(o),i=ai(1,t.rank)[0]);var c=function(g,y,x){for(var w=[],_=g.length,S=0;S<_;S++)S!==y?w.push(g[S]):w.push(x);return w}(u.shape,i,a),f=Ne([u.shape[i]]),d=u.as2D(-1,f),p=Jy(t.dtype),v=this.segOpCompute(d,"unsortedSegmentSum",r,p,a).reshape(c);return o!=null&&(v=v.transpose(Px(o))),v},e.prototype.segOpCompute=function(t,r,a,i,o){var u=t.shape[0],c=t.shape[1],f=function(v,g){var y,x=!1;for(v<=EA?(y=v,x=!0):y=Tb(v,Math.floor(Math.sqrt(v)));!x;)y>g||y===v?x=!0:y=Tb(v,y+1);return y}(c,o),d=new NV({windowSize:f,inSize:c,batchSize:u,numSegments:o}),p=this.compileAndRun(d,[t,a],i);return p.shape[1]===o?p:(a=mv(0,o).tile([c/f]),this.segOpCompute(p,r,a,i,o))},e.prototype.argMinMaxReduce=function(t,r,a){var i=[r];if(Or("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,t.rank),!ce().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=Qn(t.shape,i),u=o[0],c=Ne(o[1]),f=t.as2D(-1,c);return this.argReduce(f,a).reshape(u)}return this.argReducePacked(t,a)},e.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},e.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},e.prototype.cumsum=function(t,r,a,i){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var o=new FU(t.shape,a,i);return this.compileAndRun(o,[t])},e.prototype.equal=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Xt("return float(a == b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.notEqual=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Xt("return float(a != b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Xt("return float(a < b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.lessEqual=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Xt("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Xt("return float(a > b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greaterEqual=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Xt("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalNot=function(t){var r=new et(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},e.prototype.logicalAnd=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Xt("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalOr=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Xt("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.select=function(t,r,a){var i=new IV(t.rank,r.shape,r.rank);return this.compileAndRun(i,[t,r,a],Un(r.dtype,a.dtype))},e.prototype.where=function(t){pv("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return Wx(t.shape,r)},e.prototype.topk=function(t,r,a){return MA(t.dataSync(),t.shape,t.dtype,r)},e.prototype.min=function(t,r){Or("min",r,t.rank);var a=Qn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"min",u.dtype).reshape(i)},e.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.mod=function(t,r){var a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Xt(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);Or("max",r,t.rank);var a=Qn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"max",u.dtype).reshape(i)},e.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.all=function(t,r){Or("all",r,t.rank);var a=Qn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"all",u.dtype).reshape(i)},e.prototype.any=function(t,r){Or("any",r,t.rank);var a=Qn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"any",u.dtype).reshape(i)},e.prototype.realDivide=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Xt(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"float32")},e.prototype.floorDiv=function(t,r){if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Xt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"int32")},e.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,u0);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var a=Un(t.dtype,r.dtype);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,u0,a);var i=new Xt(u0,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.packedUnaryOp=function(t,r,a){var i=new gf(t.shape,r);return this.compileAndRun(i,[t],a)},e.prototype.packedBinaryOp=function(t,r,a,i,o){o===void 0&&(o=!1);var u=new Ci(a,t.shape,r.shape,o);return this.compileAndRun(u,[t,r],i)},e.prototype.complexSeparableBinaryOp=function(t,r,a){var i=this,o=this.texData.get(t.dataId),u=this.texData.get(r.dataId),c=[[o.complexTensors.real,u.complexTensors.real],[o.complexTensors.imag,u.complexTensors.imag]].map(function(v){var g=v[0],y=v[1],x=i.makeComplexComponentTensorInfo(t,g),w=i.makeComplexComponentTensorInfo(r,y),_=new Xt(a,t.shape,r.shape);return i.compileAndRun(_,[x,w],Un(g.dtype,y.dtype))}),f=c[0],d=c[1],p=this.complex(f,d);return f.dispose(),d.dispose(),p},e.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>ce().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),a=this.addN(t.slice(0,r)),i=this.addN(t.slice(r));return this.addN([a,i])}var o=t.map(function(f){return f.dtype}).reduce(function(f,d){return Un(f,d)}),u=t.map(function(f){return f.shape}),c=ce().getBool("WEBGL_PACK")?new uU(t[0].shape,u):new sU(t[0].shape,u);return this.compileAndRun(c,t,o)},e.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,l0);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var a=Un(t.dtype,r.dtype);if(ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,l0,t.dtype);var i=new Xt(l0,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},e.prototype.pow=function(t,r){var a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Xt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),i=Un(t.dtype,r.dtype);return this.compileAndRun(a,[t,r],i)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,UC,t.dtype);var r=new et(t.shape,UC);return this.compileAndRun(r,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,VC,t.dtype);var r=new et(t.shape,VC);return this.compileAndRun(r,[t])},e.prototype.sign=function(t){var r=new et(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},e.prototype.isNaN=function(t){var r=new et(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isInf=function(t){var r=new et(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isFinite=function(t){var r=new et(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.round=function(t){var r=new et(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,jC,t.dtype);var r=new et(t.shape,jC);return this.compileAndRun(r,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,qC,t.dtype);var r=new et(t.shape,qC);return this.compileAndRun(r,[t])},e.prototype.softmax=function(t,r){var a=_n([r],t.shape),i=this.max(t,a),o=yr(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new et(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},e.prototype.log1p=function(t){var r=new et(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},e.prototype.sqrt=function(t){var r=new et(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new et(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},e.prototype.reciprocal=function(t){var r=new et(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},e.prototype.relu=function(t){var r;return r=ce().getBool("WEBGL_PACK")?new gf(t.shape,qA):new et(t.shape,UA),this.compileAndRun(r,[t])},e.prototype.relu6=function(t){var r;return r=ce().getBool("WEBGL_PACK")?new gf(t.shape,WA):new et(t.shape,VA),this.compileAndRun(r,[t])},e.prototype.prelu=function(t,r){var a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci(zA,t.shape,r.shape):new Xt(BA,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.elu=function(t){if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,HA,t.dtype);var r=new et(t.shape,jA);return this.compileAndRun(r,[t])},e.prototype.eluDer=function(t,r){var a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new Xt("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.selu=function(t){var r=new et(t.shape,jV);return this.compileAndRun(r,[t])},e.prototype.int=function(t){var r=new et(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},e.prototype.clip=function(t,r,a){var i,o=(i=ce().getBool("WEBGL_PACK_CLIP")?new EU(t.shape):new _U(t.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[t],null,o)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,BC,t.dtype);var r=new et(t.shape,BC);return this.compileAndRun(r,[t])},e.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),a=new SU(t.shape),i=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(a,i)},e.prototype.sigmoid=function(t){var r=new et(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},e.prototype.softplus=function(t){var r=new et(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},e.prototype.sin=function(t){var r=new et(t.shape,qV);return this.compileAndRun(r,[t])},e.prototype.cos=function(t){var r=new et(t.shape,WV);return this.compileAndRun(r,[t])},e.prototype.tan=function(t){var r=new et(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},e.prototype.asin=function(t){var r=new et(t.shape,HV);return this.compileAndRun(r,[t])},e.prototype.acos=function(t){var r=new et(t.shape,GV);return this.compileAndRun(r,[t])},e.prototype.atan=function(t){var r=new et(t.shape,QV);return this.compileAndRun(r,[t])},e.prototype.atan2=function(t,r){var a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.sinh=function(t){var r=new et(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.cosh=function(t){var r=new et(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.tanh=function(t){var r=new et(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},e.prototype.asinh=function(t){var r=new et(t.shape,$V);return this.compileAndRun(r,[t])},e.prototype.acosh=function(t){var r=new et(t.shape,KV);return this.compileAndRun(r,[t])},e.prototype.atanh=function(t){var r=new et(t.shape,XV);return this.compileAndRun(r,[t])},e.prototype.erf=function(t){var r=new et(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},e.prototype.step=function(t,r){var a=new et(t.shape,function(i){return i===void 0&&(i=0),Ea+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(a,[t])},e.prototype.conv2dByMatMul=function(t,r,a,i,o,u){var c=t.shape,f=this.texData.get(t.dataId),d=a.inChannels,p=c[0]*c[1]*c[2],v=a.outChannels,g=a.dataFormat==="channelsLast",y=(p===1||v===1)&&d>1e3,x=c[2]%2!=0&&!!f.isPacked;if(y||!ce().getBool("WEBGL_LAZILY_UNPACK")||!ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!x){var w=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],_=this.reshape(t,[1,w,a.inChannels]),S=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:_,b:S,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),a.outShape)}var C=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),R={dataId:t.dataId,shape:[1,C,a.inChannels],dtype:t.dtype},T=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,L(fp(f.shape,R.shape),function(){return"packed reshape "+f.shape+" to "+R.shape+" isn't free"});var O=this.reshape(r,[1,a.inChannels,a.outChannels]),k=this.fusedBatchMatMul({a:R,b:O,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),D=this.texData.get(k.dataId);return L(D.isPacked,function(){return"batchMatMul result is expected to be packed"}),f.shape=T,D.shape=a.outShape,G.makeTensorFromDataId(k.dataId,a.outShape,k.dtype)},e.prototype.conv2dWithIm2Row=function(t,r,a,i,o,u){var c=a.filterWidth,f=a.filterHeight,d=a.inChannels,p=a.outWidth,v=a.outHeight,g=a.dataFormat==="channelsLast",y=c*f*d,x=v*p,w=[y,x],_=t.squeeze([0]),S=r.reshape([1,y,-1]),C=new hV(w,_.shape,a),R=this.compileAndRun(C,[_]).reshape([1,w[0],w[1]]),T=i!=null,O=u!=null,k=o?vp(o,!0):null,D=new c0(R.shape,[1,x,a.outChannels],!0,!1,T,k,O),N=[R,S];i&&N.push(i),O&&N.push(u);var M=this.compileAndRun(D,N);return g?M.reshape([1,v,p,a.outChannels]):M.reshape([1,a.outChannels,v,p])},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,o,u,c);if(ce().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,o,u,c);var f=o!=null,d=c!=null,p=u?vp(u,!1):null,v=new AC(i,f,p,d),g=[r,a];return o&&g.push(o),c&&g.push(c),this.compileAndRun(v,g)},e.prototype.conv2d=function(t,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,a);if(ce().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,a);var i=new AC(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerInput=function(t,r,a){var i=new OU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv2dDerFilter=function(t,r,a){var i=new TU(a);return this.compileAndRun(i,[t,r])},e.prototype.fusedDepthwiseConv2D=function(t){var r,a=t.input,i=t.filter,o=t.convInfo,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,p=c?vp(c,d):null,v=[a,i],g=u!=null,y=f!=null;return g&&v.push(u),y&&v.push(f),d?(r=new DC(o,g,p,y),this.compileAndRun(r,v)):(r=new kC(o,g,p,y),this.compileAndRun(r,v))},e.prototype.depthwiseConv2D=function(t,r,a){var i;return ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new DC(a),this.compileAndRun(i,[t,r])):(i=new kC(a),this.compileAndRun(i,[t,r]))},e.prototype.depthwiseConv2DDerInput=function(t,r,a){var i=new NU(a);return this.compileAndRun(i,[t,r])},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){var i=new DU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3d=function(t,r,a){var i=new IU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerInput=function(t,r,a){var i=new kU(a);return this.compileAndRun(i,[t,r])},e.prototype.conv3dDerFilter=function(t,r,a){var i=new AU(a);return this.compileAndRun(i,[t,r])},e.prototype.maxPool=function(t,r){var a=new f0(r,"max",!1);return this.compileAndRun(a,[t])},e.prototype.avgPool=function(t,r){var a=new f0(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPoolBackprop=function(t,r,a,i){var o=new f0(i,"max",!0),u=this.compileAndRun(o,[r]),c=new mV(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},e.prototype.avgPoolBackprop=function(t,r,a){var i=new mU(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.cast=function(t,r){return AA(t,r,this)},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var d=new Array(a);for(u=0;u<d.length;u++)c[r]=u,d[u]=this.slice(t,c,f).reshape(i);return d},e.prototype.avgPool3d=function(t,r){var a=new h0(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,r,a){var i=new gU(a);return this.compileAndRun(i,[t],r.dtype)},e.prototype.maxPool3d=function(t,r){var a=new h0(r,"max",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,r,a,i){var o=new h0(i,"max",!0),u=this.compileAndRun(o,[r]),c=new gV(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},e.prototype.reshape=function(t,r){var a=this.texData.get(t.dataId);if(a.isPacked&&!fp(t.shape,r)&&(a.texture===null||!fp(a.shape,r))){var i=this.packedReshape(t,r);return G.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return Fb(t,r)},e.prototype.resizeBilinear=function(t,r,a,i){var o=ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new TV(t.shape,r,a,i):new RV(t.shape,r,a,i);return this.compileAndRun(o,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,r,a){var i=new CV(t,r,a);return this.compileAndRun(i,[t])},e.prototype.resizeNearestNeighbor=function(t,r,a,i){var o=new AV(t.shape,r,a,i);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){var i=new OV(t,r,a);return this.compileAndRun(i,[t])},e.prototype.multinomial=function(t,r,a,i){var o=r?t:zi(t),u=o.shape[0],c=o.shape[1],f=new yV(u,c,a),d=f.getCustomSetupFunc(i);return this.compileAndRun(f,[o],"int32",d)},e.prototype.oneHot=function(t,r,a,i){var o=new bV(t.size,r,a,i);return this.compileAndRun(o,[t])},e.prototype.diag=function(t){var r=new zU(t.size);return this.compileAndRun(r,[t])},e.prototype.nonMaxSuppression=function(t,r,a,i,o){return pv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),jx(t.dataSync(),r.dataSync(),a,i,o)},e.prototype.cropAndResize=function(t,r,a,i,o,u){var c=new MU(t.shape,r.shape,i,o,u);return this.compileAndRun(c,[t,r,a],"float32")},e.prototype.depthToSpace=function(t,r,a){L(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=t.shape[0],o=a==="NHWC"?t.shape[1]:t.shape[2],u=a==="NHWC"?t.shape[2]:t.shape[3],c=a==="NHWC"?t.shape[3]:t.shape[1],f=o*r,d=u*r,p=c/(r*r),v=new BU(a==="NHWC"?[i,f,d,p]:[i,p,f,d],r,a);return this.compileAndRun(v,[t])},e.prototype.split=function(t,r,a){return NA(t,r,a)},e.prototype.scatterND=function(t,r,a){var i=xv(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=[d/c,c],v=t.reshape([u,o]),g=r.reshape([u,c]);if(d===0)return Fb(Vn([]),a);var y=xe(0),x=new FC(u,o,v.rank,g.rank,f,p);return this.compileAndRun(x,[g,v,y]).reshape(a)},e.prototype.sparseToDense=function(t,r,a,i){var o=xv(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.strides,d=o.outputSize,p=new FC(c,u,t.rank,r.rank,f,[d,1]);return this.compileAndRun(p,[r,t,i]).reshape(a)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,r){var a=this.texData.get(t.dataId),i=new IC(WU,t.shape,r),o=new IC(HU,t.shape,r),u=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag)],c=this.compileAndRun(i,u),f=this.compileAndRun(o,u),d=this.complex(c,f).as2D(t.shape[0],t.shape[1]);return c.dispose(),f.dispose(),d},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=_A(t,r),u=o[0],c=o[1],f=o[2],d=o[3],p=r.reshape([c,i]),v=t.reshape([t.size/f,f]),g=new $U(i,d,[c,f]);return this.compileAndRun(g,[v,p]).reshape(u)},e.prototype.fill=function(t,r,a){if((a=a||Ah(r))==="string"){var i=cv(a,Ne(t));return i.fill(r),G.makeTensor(i,t,a,this)}var o=new GU(t,r),u=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],a,u)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,r,a){return kA(t,r,a)},e.prototype.makeTensorInfo=function(t,r){var a=this.write(null,t,r);return this.texData.get(a).usage=null,{dataId:a,shape:t,dtype:r}},e.prototype.makeOutput=function(t,r){var a=this.makeTensorInfo(t,r).dataId;return G.makeTensorFromDataId(a,t,r,this)},e.prototype.unpackTensor=function(t){var r=new ZV(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},e.prototype.packTensor=function(t){var r=new xV(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,r){var a=[hv(t.shape)].concat(dv(t.shape)),i={dtype:t.dtype,shape:a,dataId:t.dataId},o=[hv(r)].concat(dv(r)),u=new SV(o,a),c=this.runWebGLProgram(u,[i],t.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},e.prototype.decode=function(t){var r,a=this.texData.get(t),i=a.isPacked,o=a.shape,u=a.dtype,c=o0(o);return r=i?new LU(c):new PU(c),{dtype:u,shape:o,dataId:this.runWebGLProgram(r,[{shape:c,dtype:u,dataId:t}],u,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,r,a,i,o){var u=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(t.outputShape,a),f=this.texData.get(c.dataId);if(t.packedOutput&&(f.isPacked=!0),t.outPackingScheme===sh.DENSE){var d=If(t.outputShape);f.texShape=d.map(function(C){return 2*C})}if(t.outTexUsage!=null&&(f.usage=t.outTexUsage),Ne(c.shape)===0)return f.values=ih(c.dtype,0),c;var p=[],v=r.map(function(C){if(C.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var R=u.texData.get(C.dataId);if(R.texture==null){if(!t.packedInputs&&Ne(C.shape)<=ce().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:C.shape,texData:null,isUniform:!0,uniformValues:R.values};t.packedInputs&&(R.isPacked=!0,R.shape=C.shape)}else if(!!R.isPacked!=!!t.packedInputs)C=R.isPacked?u.unpackTensor(C):u.packTensor(C),p.push(C),R=u.texData.get(C.dataId);else if(R.isPacked&&!fp(R.shape,C.shape)){var T=C,O=C.shape;C.shape=R.shape,C=u.packedReshape(C,O),p.push(C),R=u.texData.get(C.dataId),T.shape=O}return u.uploadToGPU(C.dataId),{shape:C.shape,texData:R,isUniform:!1}});this.uploadToGPU(c.dataId);var g,y={shape:c.shape,texData:f,isUniform:!1},x=function(C,R,T){var O="";R.concat(T).forEach(function(N){var M=N.texData!=null&&N.texData.slice!=null&&N.texData.slice.flatOffset>0,B=N.isUniform?"uniform":N.texData.texShape;O+=N.shape+"_"+B+"_"+M});var k=C.userCode,D=C.constructor.name;return D+="_"+O+"_"+k}(t,v,y),w=this.getAndSaveBinary(x,function(){return function(C,R,T,O){var k=R.userCode,D=T.map(function($,Y){var F={logicalShape:$.shape,texShape:$.isUniform?null:$.texData.texShape,isUniform:$.isUniform,isPacked:!$.isUniform&&$.texData.isPacked,flatOffset:null};return $.texData!=null&&$.texData.slice!=null&&$.texData.slice.flatOffset>0&&(F.flatOffset=$.texData.slice.flatOffset),{name:R.variableNames[Y],shapeInfo:F}}),N=D.map(function($){return $.shapeInfo}),M={logicalShape:O.shape,texShape:O.texData.texShape,isUniform:!1,isPacked:O.texData.isPacked,flatOffset:null},B=cU(D,M,k,R.packedInputs),z=C.createProgram(B),ee=null,re=C.getUniformLocation(z,"NAN",!1);ce().getNumber("WEBGL_VERSION")===1&&(ee=C.getUniformLocation(z,"INFINITY",!1));for(var te={},U=0;U<R.variableNames.length;U++){var H=R.variableNames[U];te[H]=C.getUniformLocation(z,H,!1),te["offset"+H]=C.getUniformLocation(z,"offset"+H,!1)}return{program:R,source:B,webGLProgram:z,uniformLocations:te,inShapeInfos:N,outShapeInfo:M,infLoc:ee,nanLoc:re}}(u.gpgpu,t,v,y)}),_=this.activeTimers!=null;if(_&&(g=this.startTimer()),function(C,R,T,O,k){MC(R.inShapeInfos,T),MC([R.outShapeInfo],[O]);var D=O.texData.texture,N=O.texData.texShape;O.texData.isPacked?C.setOutputPackedMatrixTexture(D,N[0],N[1]):C.setOutputMatrixTexture(D,N[0],N[1]),C.setProgram(R.webGLProgram),ce().getNumber("WEBGL_VERSION")===1&&R.infLoc!==null&&C.gl.uniform1f(R.infLoc,1/0),R.nanLoc!==null&&C.gl.uniform1f(R.nanLoc,NaN),T.forEach(function(M,B){var z=R.program.variableNames[B],ee=R.uniformLocations[z],re=R.uniformLocations["offset"+z];if(ee!=null)if(M.isUniform)if(Ne(M.shape)<2)C.gl.uniform1f(ee,M.uniformValues[0]);else{var te=M.uniformValues;te instanceof Float32Array||(te=new Float32Array(te)),C.gl.uniform1fv(ee,te)}else M.texData.slice!=null&&re!=null&&C.gl.uniform1i(re,M.texData.slice.flatOffset),C.setInputMatrixTexture(M.texData.texture,ee,B)}),k!=null&&k(C,R.webGLProgram),C.executeProgram()}(this.gpgpu,w,v,y,i),p.forEach(function(C){return u.disposeData(C.dataId)}),_&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)})),!ce().getBool("WEBGL_LAZILY_UNPACK")&&f.isPacked&&o===!1){var S=this.unpackTensor(c);return this.disposeData(c.dataId),S}return c},e.prototype.compileAndRun=function(t,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var u=this.runWebGLProgram(t,r,a,i,o);return G.makeTensorFromDataId(u.dataId,u.shape,u.dtype)},e.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(ce().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Te(function(){if(!ce().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ce().getBool("DEBUG");ce().set("DEBUG",!1);var a=t.abs(xe(1e-8)).dataSync()[0];if(ce().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.values,c=a.texture,f=a.usage,d=a.isPacked;if(c==null){var p,v=this.activeTimers!=null;v&&(p=Ba());var g=a.texShape;if(g==null&&(g=oz(i,d),a.texShape=g),u!=null){var y=o0(i),x=void 0,w=g[1],_=g[0],S=u instanceof Uint8Array;d?(w=(r=Dh(g[0],g[1]))[0],_=r[1],x=new qU(y,[_,w],S)):x=new jU(y,[_,w],S);var C=this.makeTensorInfo([_,w],o);this.texData.get(C.dataId).usage=S?kr.PIXELS:kr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),w,_,u);var R=this.runWebGLProgram(x,[C],o,null,!0),T=this.texData.get(R.dataId);a.texture=T.texture,a.texShape=T.texShape,a.isPacked=T.isPacked,a.usage=T.usage,this.disposeData(C.dataId),this.texData.delete(R.dataId),a.values=null,v&&(this.uploadWaitMs+=Ba()-p)}else{var O=this.acquireTexture(g,f,o,d);a.texture=O}}},e.prototype.convertAndCacheOnCPU=function(t,r){var a=this.texData.get(t),i=a.dtype;return this.releaseGPUData(t),r!=null&&(a.values=function(o,u){if(u==="float32"||u==="complex64")return o;if(u==="int32"||u==="bool"){for(var c=u==="int32"?new Int32Array(o.length):new Uint8Array(o.length),f=0;f<c.length;++f)c[f]=Math.round(o[f]);return c}throw new Error("Unknown dtype "+u)}(r,i)),a.values},e.prototype.acquireTexture=function(t,r,a,i){if(this.numBytesInGPU+=this.computeBytes(t,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,i)},e.prototype.computeBytes=function(t,r){return t[0]*t[1]*aA(r)},e}(TA);fA()&&G.registerBackend("webgl",function(){return new ej},2);var tj=q({square_:function(n){var e=P(n,"x","square"),t=[e];return G.runKernelFunc(function(r,a){return a([e]),r.square(e)},{x:e},null,"Square",{},t,[])}}),lh="SquaredDifference",GA=q({squaredDifference_:function(n,e){var t,r=P(n,"a","squaredDifference"),a=P(e,"b","squaredDifference");t=Qt(r,a),r=t[0],a=t[1],ct(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return G.runKernelFunc(function(u,c){var f=u.squaredDifference(r,a);return c([r,a]),f},i,function(u,c){var f=c[0],d=c[1],p=xe(2);return{a:function(){return u.mul(f.sub(d).mul(p))},b:function(){return u.mul(d.sub(f).mul(p))}}},lh,{},o,[])}}),nj=q({abs_:function(n){var e=P(n,"x","abs");return e.dtype==="complex64"?G.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):G.runKernelFunc(function(t,r){var a=t.abs(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.toFloat().step(-1))}}},"Abs")}}),rj=q({acos_:function(n){var e=P(n,"x","acos");return G.runKernelFunc(function(t,r){var a=t.acos(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(xe(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),aj=q({acosh_:function(n){var e=P(n,"x","acosh");return G.runKernelFunc(function(t,r){var a=t.acosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),ij=q({asin_:function(n){var e=P(n,"x","asin");return G.runKernelFunc(function(t,r){var a=t.asin(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(xe(1).sub(a.toFloat().square()).sqrt())}}})}}),oj=q({asinh_:function(n){var e=P(n,"x","asinh");return G.runKernelFunc(function(t,r){var a=t.asinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(xe(1).add(a.toFloat().square()).sqrt())}}})}}),sj=q({atan_:function(n){var e=P(n,"x","atan");return G.runKernelFunc(function(t,r){var a=t.atan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().square().add(1))}}})}}),uj=q({atanh_:function(n){var e=P(n,"x","atanh");return G.runKernelFunc(function(t,r){var a=t.atanh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(xe(1).sub(a.toFloat().square()))}}})}}),lj=q({ceil_:function(n){var e=P(n,"x","ceil");return G.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return mt(t)}}})}}),$x=q({clipByValue_:function(n,e,t){var r=P(n,"x","clipByValue");L(e<=t,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."});var a=[r],i={min:e,max:t};return G.runKernelFunc(function(o,u){var c=o.clip(r,e,t);return u([r]),c},{x:r},function(o,u){var c=u[0];return{x:function(){return o.where(c.greaterEqual(e).logicalAnd(c.lessEqual(t)),mt(o))}}},"ClipByValue",i,a)}}),cj=q({cos_:function(n){var e=P(n,"x","cos"),t=[e];return G.runKernelFunc(function(r,a){var i=r.cos(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),fj=q({cosh_:function(n){var e=P(n,"x","cosh");return G.runKernelFunc(function(t,r){var a=t.cosh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(t)}}})}}),hj=q({erf_:function(n){var e=P(n,"x","erf");return L(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),G.runKernelFunc(function(t,r){var a=t.erf(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Lb=q({exp_:function(n){var e=P(n,"x","exp");return G.runKernelFunc(function(t,r){var a=t.exp(e);return r([a]),a},{x:e},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),dj=q({expm1_:function(n){var e=P(n,"x","expm1");return G.runKernelFunc(function(t,r){var a=t.expm1(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.exp())}}})}}),pj=q({floor_:function(n){var e=P(n,"x","floor");return G.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return mt(t)}}})}}),vj=q({log_:function(n){var e=P(n,"x","log"),t=[e];return G.runKernelFunc(function(r,a){var i=r.log(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},t)}}),mj=q({log1p_:function(n){var e=P(n,"x","log1p");return G.runKernelFunc(function(t,r){var a=t.log1p(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.add(1))}}})}}),gj=q({logSigmoid_:function(n){var e=P(n,"x","logSigmoid");return G.runKernelFunc(function(t,r){var a=t.softplus(e.neg()).neg();return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.neg().sigmoid())}}})}}),Sv=q({neg_:function(n){var e=P(n,"x","neg"),t=[e];return G.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),yj=q({reciprocal_:function(n){var e=P(n,"x","reciprocal");return G.runKernelFunc(function(t,r){var a=t.reciprocal(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.square().neg())}}})}}),bj=q({round_:function(n){var e=P(n,"x","round");return G.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return mt(t)}}})}}),QA=q({rsqrt_:function(n){var e=P(n,"x","rsqrt"),t=[e];return G.runKernelFunc(function(r,a){var i=r.rsqrt(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),$A=q({sigmoid_:function(n){var e=P(n,"x","sigmoid");return G.runKernelFunc(function(t,r){var a=t.sigmoid(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mul(a.mul(xe(1).sub(a)))}}},"Sigmoid")}}),xj=q({sign_:function(n){var e=P(n,"x","sign");return G.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return mt(t)}}})}}),wj=q({isNaN_:function(n){var e=P(n,"x","isNaN");return G.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return mt(t)}}})}}),_j=q({isInf_:function(n){var e=P(n,"x","isInf");return G.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return mt(t)}}})}}),Ej=q({isFinite_:function(n){var e=P(n,"x","isFinite");return G.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return mt(t)}}})}}),Sj=q({sin_:function(n){var e=P(n,"x","sin"),t=[e];return G.runKernelFunc(function(r,a){var i=r.sin(e);return a([e]),i},{x:e},function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},t)}}),Cj=q({sinh_:function(n){var e=P(n,"x","sinh");return G.runKernelFunc(function(t,r){var a=t.sinh(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(t)}}})}}),Rj=q({softplus_:function(n){var e=P(n,"x","softplus");return G.runKernelFunc(function(t,r){var a=t.softplus(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.sigmoid())}}})}}),Tj=q({sqrt_:function(n){var e=P(n,"x","sqrt");return G.runKernelFunc(function(t,r){var a=t.sqrt(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().sqrt().mul(2))}}})}}),Oj=q({step_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","step");return G.runKernelFunc(function(r){return r.step(t,e)},{$x:t},function(r){return{$x:function(){return mt(r)}}})}}),Aj=q({tan_:function(n){var e=P(n,"x","tan");return G.runKernelFunc(function(t,r){var a=t.tan(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return t.div(a.cos().square())}}})}}),kj=q({tanh_:function(n){var e=P(n,"x","tanh");return G.runKernelFunc(function(t,r){var a=t.tanh(e);return r([a]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return xe(1).sub(a.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function KA(n,e,t,r,a,i){var o,u,c=P(n,"x","batchNorm"),f=P(e,"mean","batchNorm"),d=P(t,"variance","batchNorm");return a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),L(f.rank===2||f.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+f.rank+"."}),L(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),o!=null&&L(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),u!=null&&L(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."}),Ih(c,f,d,u,o,i)}function XA(n,e,t,r,a,i){var o,u,c=P(n,"x","batchNorm"),f=P(e,"mean","batchNorm"),d=P(t,"variance","batchNorm");return a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),L(f.rank===3||f.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+f.rank+"."}),L(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),o!=null&&L(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),u!=null&&L(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."}),Ih(c,f,d,u,o,i)}function YA(n,e,t,r,a,i){var o,u,c=P(n,"x","batchNorm"),f=P(e,"mean","batchNorm"),d=P(t,"variance","batchNorm");return a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),L(f.rank===4||f.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+f.rank+"."}),L(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),o!=null&&L(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),u!=null&&L(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."}),Ih(c,f,d,u,o,i)}function Ih(n,e,t,r,a,i){i==null&&(i=.001);var o,u,c,f=P(n,"x","batchNorm"),d=P(e,"mean","batchNorm"),p=P(t,"variance","batchNorm");a!=null&&(o=P(a,"scale","batchNorm")),r!=null&&(u=P(r,"offset","batchNorm")),L(d.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),L(u==null||d.rank===u.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),L(o==null||d.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=f.rank===0||f.rank===1?f.as4D(1,1,1,f.size):f.rank===2?f.as4D(1,1,f.shape[0],f.shape[1]):f.rank===3?f.as4D(1,f.shape[0],f.shape[1],f.shape[2]):f;var v=[f,d,p,o];return G.runKernelFunc(function(g,y){var x=g.batchNormalization(c,mp(d),mp(p),i,mp(o),mp(u));return y([f,d,p,o]),x},{x:f,mean:d,variance:p,scale:o,offset:u},function(g,y){var x=y,w=x[0],_=x[1],S=x[2],C=x[3],R=C??xe(1),T=xn(_.shape,c.shape),O=[];if(_.rank===1){for(var k=0;k<c.shape.length-1;++k)O.push(c.shape[k]);O.push(1)}var D=w.sub(_),N=g.mul(R),M=QA(S.add(xe(i))),B=M.mul(M).mul(M).mul(xe(-.5));return{x:function(){return _.rank===1?g.mul(gl(M.as4D(1,1,1,_.shape[0]),O)).mul(R).reshape(w.shape):g.mul(M).mul(R).reshape(w.shape)},mean:function(){var z=M.mul(xe(-1)).mul(N);return _.rank===1&&(z=z.sum(T)),z.reshape(_.shape)},variance:function(){var z=B.mul(D).mul(N);return _.rank===1&&(z=z.sum(T)),z.reshape(_.shape)},scale:function(){var z=D.mul(M),ee=g.mul(z);return _.rank===1&&(ee=ee.sum(T)),ee.reshape(_.shape)},offset:function(){var z=g;return _.rank===1&&(z=z.sum(T)),z.reshape(_.shape)}}},"BatchNormalization",{varianceEpsilon:i},v).reshape(f.shape)}function mp(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function Kv(){hA("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Dj=q({batchNormalization2d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),KA(n,e,t,i,a,r)}}),Nj=q({batchNormalization3d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),XA(n,e,t,i,a,r)}}),Ij=q({batchNormalization4d_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),YA(n,e,t,i,a,r)}}),Mj=q({batchNormalization_:function(n,e,t,r,a,i){return r===void 0&&(r=.001),Kv(),Ih(n,e,t,i,a,r)}}),ZA=q({batchNorm_:Ih}),Fj=q({batchNorm2d_:KA}),Pj=q({batchNorm3d_:XA}),Lj=q({batchNorm4d_:YA}),Xv=q({logicalAnd_:function(n,e){var t=P(n,"a","logicalAnd","bool"),r=P(e,"b","logicalAnd","bool");return ct(t.shape,r.shape),G.runKernelFunc(function(a){return a.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),Bj=q({logicalNot_:function(n){var e=P(n,"x","logicalNot","bool");return G.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),JA=q({logicalOr_:function(n,e){var t=P(n,"a","logicalOr","bool"),r=P(e,"b","logicalOr","bool");return ct(t.shape,r.shape),G.runKernelFunc(function(a){return a.logicalOr(t,r)},{$a:t,$b:r})}}),zj=q({logicalXor_:function(n,e){var t=P(n,"a","logicalXor","bool"),r=P(e,"b","logicalXor","bool");return ct(t.shape,r.shape),JA(n,e).logicalAnd(Xv(n,e).logicalNot())}}),Ys=q({where_:function(n,e,t){var r=P(e,"a","where"),a=P(t,"b","where"),i=P(n,"condition","where","bool");return Rt(r.shape,a.shape,"Error in where: "),i.rank===1?L(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Rt(i.shape,a.shape,"Error in where: "),G.runKernelFunc(function(o,u){var c=o.select(i,r,a);return u([i]),c},{$condition:i,$a:r,$b:a},function(o,u){var c=u[0];return{$condition:function(){return mt(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),ek=function(n){return Ae(this,void 0,void 0,function(){var e,t,r;return ke(this,function(a){switch(a.label){case 0:return[4,(e=P(n,"condition","whereAsync","bool")).data()];case 1:return t=a.sent(),r=Wx(e.shape,t),n!==e&&e.dispose(),[2,r]}})})},st=q({add_:function(n,e){var t,r=P(n,"a","add"),a=P(e,"b","add");t=Qt(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return G.runKernelFunc(function(o){return o.add(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=xn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=xn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(a.shape)}}},"Add")}}),Uj=q({addN_:function(n){L(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),L(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var e=n.map(function(a,i){return P(a,"tensors"+i,"addN")}),t=e[0];e.forEach(function(a){if(a.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(a){if(!Nn(a.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return G.runKernelFunc(function(a){return a.addN(e)},r,function(a){var i={};return e.forEach(function(o,u){i[u]=function(){return a.clone()}}),i},"AddN")}}),Vj=q({addStrict_:function(n,e){var t=P(n,"a","addStrict"),r=P(e,"b","addStrict");return Rt(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),jj=q({atan2_:function(n,e){var t,r=P(n,"a","atan2"),a=P(e,"b","atan2");t=Qt(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return G.runKernelFunc(function(o,u){var c=o.atan2(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var d=st(c.square(),f.square()),p=o.mul(f.div(d)),v=xn(c.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)},$b:function(){var d=st(c.square(),f.square()),p=Sv(o.mul(c.div(d))),v=xn(f.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(f.shape)}}})}}),fa=q({div_:function(n,e){var t,r=P(n,"a","div"),a=P(e,"b","div");if(t=Qt(r,a),r=t[0],a=t[1],r.dtype==="int32"&&a.dtype==="int32")return tk(r,a);var i=ct(r.shape,a.shape);return G.runKernelFunc(function(o,u){var c=o.realDivide(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.div(f.toFloat()),p=xn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=xn(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}},"Div")}}),qj=q({divNoNan_:function(n,e){var t,r=P(n,"a","div"),a=P(e,"b","div");r=(t=Qt(r,a))[0],a=t[1];var i=fa(r,a),o=mt(i),u=a.equal(o);return Ys(u,o,i)}}),Wj=q({divStrict_:function(n,e){var t=P(n,"a","div"),r=P(e,"b","div");return Rt(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),tk=q({floorDiv_:function(n,e){var t,r=P(n,"a","floorDiv"),a=P(e,"b","floorDiv");t=Qt(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return G.runKernelFunc(function(o,u){var c=o.floorDiv(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.div(f.toFloat()),p=xn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=xn(f.shape,i);p.length>0&&(d=d.sum(p).reshape(f.shape));var v=f.square();return d.div(v.toFloat()).neg()}}},"FloorDiv")}}),Kx=q({maximum_:function(n,e){var t,r=P(n,"a","maximum"),a=P(e,"b","maximum");return t=Qt(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),ct(r.shape,a.shape),G.runKernelFunc(function(i,o){var u=i.maximum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.greaterEqual(c).toFloat())},b:function(){return i.mul(u.less(c).toFloat())}}},"Maximum")}}),Hj=q({maximumStrict_:function(n,e){var t=P(n,"a","maximumStrict"),r=P(e,"b","maximumStrict");return Rt(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),nk=q({minimum_:function(n,e){var t,r=P(n,"a","minimum"),a=P(e,"b","minimum");return t=Qt(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),ct(r.shape,a.shape),G.runKernelFunc(function(i,o){var u=i.minimum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.lessEqual(c).toFloat())},b:function(){return i.mul(u.greater(c).toFloat())}}},"Minimum")}}),Gj=q({minimumStrict_:function(n,e){var t=P(n,"a","minimumStrict"),r=P(e,"b","minimumStrict");return Rt(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),Qj=q({mod_:function(n,e){var t,r=P(n,"a","mod"),a=P(e,"b","mod");t=Qt(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return G.runKernelFunc(function(o,u){var c=o.mod(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var d=xn(c.shape,i);return d.length>0?o.sum(d).reshape(c.shape):o},$b:function(){var d=o.mul(c.div(f).floor().neg()),p=xn(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}})}}),$j=q({modStrict_:function(n,e){var t=P(n,"a","modStrict"),r=P(e,"b","modStrict");return Rt(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),Yn=q({mul_:function(n,e){var t,r=P(n,"a","mul"),a=P(e,"b","mul");t=Qt(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return G.runKernelFunc(function(o,u){var c=o.multiply(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var d=o.mul(f.toFloat()),p=xn(c.shape,i);return p.length>0?d.sum(p).reshape(c.shape):d},b:function(){var d=o.mul(c.toFloat()),p=xn(f.shape,i);return p.length>0?d.sum(p).reshape(f.shape):d}}},"Mul")}}),Kj=q({mulStrict_:function(n,e){var t=P(n,"a","mul"),r=P(e,"b","mul");return Rt(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),Cv=q({pow_:function(n,e){var t,r=P(n,"base","pow"),a=P(e,"exp","pow");t=Qt(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape),o=[r,a];return G.runKernelFunc(function(u,c){var f=u.pow(r,a);return c([r,a,f]),f},{a:r,b:a},function(u,c){var f=c[0],d=c[1],p=c[2];return{a:function(){var v=d.toFloat(),g=u.mul(v.mul(f.pow(v.sub(xe(1))))),y=xn(f.shape,i);return y.length>0&&(g=g.sum(y)),g.reshape(f.shape)},b:function(){var v=f.greater(0),g=f.log().where(v,mt(f)),y=u.mul(p.mul(g)),x=xn(d.shape,i);return x.length>0&&(y=y.sum(x)),y.reshape(d.shape)}}},"Pow",{},o,[!0])}}),Xj=q({powStrict_:function(n,e){return Rt(n.shape,e.shape,"Error in powStrict: "),n.pow(e)}}),Yj=q({squaredDifferenceStrict_:function(n,e){var t=P(n,"a","squaredDifferenceStrict"),r=P(e,"b","squaredDifferenceStrict");return Rt(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),wn=q({sub_:function(n,e){var t,r=P(n,"a","sub"),a=P(e,"b","sub");t=Qt(r,a),r=t[0],a=t[1];var i=ct(r.shape,a.shape);return G.runKernelFunc(function(o){return o.subtract(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=xn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=xn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.neg().reshape(a.shape)}}},"Sub")}}),Zj=q({subStrict_:function(n,e){var t=P(n,"a","subStrict"),r=P(e,"b","subStrict");return Rt(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),rk=q({equal_:function(n,e){var t,r=P(n,"a","equal"),a=P(e,"b","equal");return t=Qt(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),G.runKernelFunc(function(i){return i.equal(r,a)},{$a:r,$b:a})}}),Jj=q({equalStrict_:function(n,e){var t=P(n,"a","equalStrict"),r=P(e,"b","equalStrict");return Rt(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),e6=q({greater_:function(n,e){var t,r=P(n,"a","greater"),a=P(e,"b","greater");return t=Qt(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),G.runKernelFunc(function(i){return i.greater(r,a)},{a:r,b:a},null,"Greater")}}),ak=q({greaterEqual_:function(n,e){var t,r=P(n,"a","greaterEqual"),a=P(e,"b","greaterEqual");return t=Qt(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),G.runKernelFunc(function(i,o){var u=i.greaterEqual(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return mt(u)},b:function(){return mt(c)}}},"GreaterEqual")}}),t6=q({greaterEqualStrict_:function(n,e){var t=P(n,"a","greaterEqualStrict"),r=P(e,"b","greaterEqualStrict");return Rt(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),n6=q({greaterStrict_:function(n,e){var t=P(n,"a","greaterStrict"),r=P(e,"b","greaterStrict");return Rt(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),r6=q({less_:function(n,e){var t,r=P(n,"a","less"),a=P(e,"b","less");return t=Qt(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),G.runKernelFunc(function(i){return i.less(r,a)},{a:r,b:a},null,"Less")}}),a6=q({lessEqual_:function(n,e){var t,r=P(n,"a","lessEqual"),a=P(e,"b","lessEqual");return t=Qt(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),G.runKernelFunc(function(i,o){var u=i.lessEqual(r,a);return o([r,a]),u},{a:r,b:a},null,"LessEqual")}}),i6=q({lessEqualStrict_:function(n,e){var t=P(n,"a","lessEqualStrict"),r=P(e,"b","lessEqualStrict");return Rt(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),o6=q({lessStrict_:function(n,e){var t=P(n,"a","lessStrict"),r=P(e,"b","lessStrict");return Rt(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),s6=q({notEqual_:function(n,e){var t,r=P(n,"a","notEqual"),a=P(e,"b","notEqual");return t=Qt(r,a),r=t[0],a=t[1],ct(r.shape,a.shape),G.runKernelFunc(function(i){return i.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),u6=q({notEqualStrict_:function(n,e){var t=P(n,"a","notEqualStrict"),r=P(e,"b","notEqualStrict");return Rt(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function WC(n,e){for(var t=[],r=n;r<e;++r)t.push(r);return t}function HC(n){for(var e=[],t=0;t<n.length;++t)for(var r=0;r<n[t].length;++r)e.push(n[t][r]);return e}var Xx=q({gather_:function(n,e,t){t===void 0&&(t=0);var r=P(n,"x","gather"),a=P(e,"indices","gather","int32");t=_n(t,r.shape)[0];var i=function(o,u,c){for(var f=o.shape[c],d=[],p=1,v=1,g=0;g<c;g++)d.push(o.shape[g]),p*=o.shape[g];for(g=0;g<u.rank;g++)d.push(u.shape[g]);for(g=c+1;g<o.rank;g++)d.push(o.shape[g]),v*=o.shape[g];return{batchSize:p,sliceSize:v,dimSize:f,outputShape:d}}(r,a,t);return G.runKernelFunc(function(o,u){var c=o.gather(r,a.flatten(),t);return u([a]),c},{x:r,indices:a},function(o,u){var c=u[0];return{x:function(){var f=r.shape,d=c.size,p=f.slice(0,t),v=p.length,g=f.slice(t,f.length).slice(1),y=g.length,x=WC(0,v),w=WC(v+1,v+1+y),_=HC([p,[d],g]),S=o.reshape(_),C=c.reshape([d]),R=HC([[v],x,w]),T=S.transpose(R),O=ik(T,C,r.shape[t]),k=Px(R);return O=O.transpose(k)},indices:function(){return c}}},"Gather",{axis:t}).reshape(i.outputShape)}}),ik=q({unsortedSegmentSum_:function(n,e,t){var r=P(n,"x","unsortedSegmentSum"),a=P(e,"segmentIds","unsortedSegmentSum","int32");return L(rn(t),function(){return"numSegments must be of dtype int"}),G.runKernelFunc(function(i,o){var u=i.unsortedSegmentSum(r,a,t);return o([a]),u},{$x:r},function(i,o){var u=o[0];return{$x:function(){return function(c,f){for(var d=Kx(f,mt(f)),p=Xx(c,d),v=ak(f,xe(0,"int32")),g=p.rank-v.rank,y=0;y<g;++y)v=Kr(v,y+1);v=Xv(v,sc(p.shape,"bool"));var x=mt(p);return Ys(v,p,x)}(i,u)}}})}}),l6=function(n,e,t){return Ae(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x;return ke(this,function(w){switch(w.label){case 0:for(r=P(n,"tensor","boolMask"),a=P(e,"mask","boolMask","bool"),i=t??0,o=a.rank,u=r.shape,L(o>0,function(){return"mask cannot be scalar"}),Rt(u.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,f=i;f<i+o;f++)c*=u[f];return d=u.slice(0,i).concat([c],u.slice(i+o)),p=r.reshape(d),v=a.reshape([-1]),[4,ek(v)];case 1:return g=w.sent(),y=g.squeeze([1]),x=Xx(p,y,i),n!==r&&r.dispose(),e!==a&&a.dispose(),y.dispose(),p.dispose(),v.dispose(),g.dispose(),[2,x]}})})};function ok(n,e,t,r,a,i,o){i===void 0&&(i="NHWC"),L(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var u=n,c=e,f=!1;e.rank===3&&(f=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),u=[1,n[0],n[1],n[2]]),L(u.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+u.length+"."}),L(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),L(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var d=i==="NHWC"?u[3]:u[1],p=i==="NHWC"?c.shape[3]:c.shape[1];L(d===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+t.shape[2]+"."}),L(p===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+t.shape[3]+"."}),o!=null&&L(rn(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var v=Vx(i),g=ru(u,t.shape,r,1,a,o,!1,v),y=G.runKernelFunc(function(x,w){var _=x.conv2dDerInput(c,t,g);return w([t,c]),_},{dy4D:c,filter:t},function(x,w){var _=w[0],S=w[1];return{dy4D:function(){return ta(x,_,r,a,i,1,o)},filter:function(){return Yx(x,S,_.shape,r,a,i,o)}}});return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function p0(n){var e=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function sk(n,e,t,r,a){L(n.length===e.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"});var i=n,o=e,u=!1;e.rank===4&&(u=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,n[0],n[1],n[2],n[3]]);var c=i[4],f=o.shape[4];L(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),L(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),L(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),L(c===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+t.shape[3]+"."}),L(f===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+f+") must match output depth for filter "+t.shape[4]+"."});var d=_v(i,t.shape,r,1,a),p=G.runKernelFunc(function(v){return v.conv3dDerInput(o,t,d)},{dy5D:o});return u?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var c6=q({conv1d_:function(n,e,t,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var u=P(n,"x","conv1d"),c=P(e,"filter","conv1d"),f=u,d=!1;u.rank===2&&(d=!0,f=u.as3D(1,u.shape[0],u.shape[1])),L(f.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+f.rank+"."}),L(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&L(rn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),L(f.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+f.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),L(br(t,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+i+"'"}),L(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var p=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),v=f.as4D(f.shape[0],1,f.shape[1],f.shape[2]),g=ta(v,p,[1,t],r,"NHWC",[1,i],o);return d?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),ta=q({conv2d_:function(n,e,t,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var u=P(n,"x","conv2d"),c=P(e,"filter","conv2d"),f=u,d=!1;u.rank===3&&(d=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),L(f.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+f.rank+"."}),L(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&L(rn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=a==="NHWC"?f.shape[3]:f.shape[1];L(p===c.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+c.shape[2]+"."}),L(br(t,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"});var v=Vx(a),g=ru(f.shape,c.shape,t,i,r,o,!1,v),y=[c,f],x=G.runKernelFunc(function(w,_){var S=w.conv2d(f,c,g);return _([c,f]),S},{x:f,filter:c},function(w,_){var S=_,C=S[0],R=S[1];return L(Yl(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return uk(R.shape,w,C,t,r,a)},filter:function(){return Yx(R,w,C.shape,t,r,a)}}},"Conv2D",g,y);return d?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),f6=q({conv3d_:function(n,e,t,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=P(n,"x","conv3d"),u=P(e,"filter","conv3d"),c=o,f=!1;o.rank===4&&(f=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),L(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),L(u.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+u.rank+"."}),L(c.shape[4]===u.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+u.shape[3]+"."}),L(function(v,g){return p0(v)||p0(g)}(t,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),L(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var d=_v(c.shape,u.shape,t,i,r),p=G.runKernelFunc(function(v,g){var y=v.conv3d(c,u,d);return g([c,u]),y},{x:c,$filter:u},function(v,g){L(p0(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var y=g[0],x=g[1];return{x:function(){return sk(y.shape,v,x,t,r)},$filter:function(){return function(w,_,S,C,R){var T=w;w.rank===4&&(T=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var O=_;O.rank===4&&(O=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),L(T.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+T.shape+"."}),L(O.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+O.shape+"."}),L(S.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+S+"."}),L(T.shape[4]===S[3],function(){return"Error in conv3dDerFilter: depth of input "+T.shape[4]+") must match input depth in filter ("+S[3]+"."}),L(O.shape[4]===S[4],function(){return"Error in conv3dDerFilter: depth of dy ("+O.shape[4]+") must match output depth for filter ("+S[4]+")."});var k=_v(T.shape,S,C,1,R);return G.runKernelFunc(function(D){return D.conv3dDerFilter(T,O,k)},{x5D:T,dy5D:O})}(y,v,x.shape,t,r)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Yx=q({conv2dDerFilter_:function(n,e,t,r,a,i,o){i===void 0&&(i="NHWC");var u=n;n.rank===3&&(u=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var c=e;c.rank===3&&(c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),L(u.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+u.shape+"."}),L(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),L(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var f=i==="NHWC"?u.shape[3]:u.shape[1],d=i==="NHWC"?c.shape[3]:c.shape[1];L(f===t[2],function(){return"Error in conv2dDerFilter: depth of input "+f+") must match input depth in filter ("+t[2]+"."}),L(d===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+t[3]+")."}),o!=null&&L(rn(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var p=Vx(i),v=ru(u.shape,t,r,1,a,o,!1,p);return G.runKernelFunc(function(g){return g.conv2dDerFilter(u,c,v)},{x4D:u,dy4D:c})}}),uk=q({conv2dDerInput_:ok}),Yv=q({depthwiseConv2d_:function(n,e,t,r,a,i,o){i===void 0&&(i=[1,1]);var u=P(n,"x","depthwiseConv2d"),c=P(e,"filter","depthwiseConv2d"),f=u,d=!1;u.rank===3&&(d=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),L(f.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."}),L(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),L(f.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),L(br(t,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),o!=null&&L(rn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=ru(f.shape,c.shape,t,i,r,o,!0),v=[f,c],g=G.runKernelFunc(function(y,x){var w=y.depthwiseConv2D(f,c,p);return x([f,c]),w},{x:f,filter:c},function(y,x){L(Yl(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var w=x[0],_=x[1];return{x:function(){return lk(w.shape,y,_,p)},filter:function(){return ck(w,y,_.shape,p)}}},"DepthwiseConv2dNative",p,v);return d?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),lk=q({depthwiseConv2dDerInput_:function(n,e,t,r){var a=e,i=!1;e.rank===3&&(i=!0,a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=G.runKernelFunc(function(u){return u.depthwiseConv2DDerInput(a,t,r)},{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),ck=q({depthwiseConv2dDerFilter_:function(n,e,t,r){var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var i=e;return i.rank===3&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),G.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(a,i,r)},{x4D:a,dy4D:i})}}),Zx=q({separableConv2d_:function(n,e,t,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var u=P(n,"x","separableConv2d"),c=P(e,"depthwiseFilter","separableConv2d"),f=P(t,"pointwiseFilter","separableConv2d"),d=u,p=!1;if(u.rank===3&&(p=!0,d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");L(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),L(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),L(f.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),L(f.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+f.shape[0]+"."}),L(f.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+f.shape[1]+"."});var v=c.shape[2],g=c.shape[3];L(f.shape[2]===v*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+v*g+", but got "+f.shape[2]+"."});var y=Yv(d,c,r,a,o,i),x=ta(y,f,1,"valid",o);return p?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),h6=q({conv2dTranspose_:function(n,e,t,r,a,i){return ok(t,P(n,"x","conv2dTranspose"),P(e,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),d6=q({conv3dTranspose_:function(n,e,t,r,a){return sk(t,P(n,"x","conv3dTranspose"),P(e,"filter","conv3dTranspose"),r,a)}}),Zv=q({matMul_:function(n,e,t,r){var a;t===void 0&&(t=!1),r===void 0&&(r=!1);var i=P(n,"a","matMul"),o=P(e,"b","matMul");a=Qt(i,o),i=a[0],o=a[1];var u=t?i.shape[i.rank-2]:i.shape[i.rank-1],c=r?o.shape[o.rank-1]:o.shape[o.rank-2],f=t?i.shape[i.rank-1]:i.shape[i.rank-2],d=r?o.shape[o.rank-2]:o.shape[o.rank-1],p=i.shape.slice(0,-2),v=o.shape.slice(0,-2),g=Ne(p),y=Ne(v);L(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),L(Nn(p,v),function(){return"Error in matMul: outer dimensions ("+p+") and ("+v+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),L(u===c,function(){return"Error in matMul: inner shapes ("+u+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var x=i.shape.slice(0,-2).concat([f,d]),w=t?i.as3D(g,u,f):i.as3D(g,f,u),_=r?o.as3D(y,d,c):o.as3D(y,c,d),S={transposeA:t,transposeB:r};return G.runKernelFunc(function(C,R){var T=C.batchMatMul(w,_,t,r);return R([w,_]),T},{a:w,b:_},function(C,R){var T=R,O=T[0],k=T[1];return t||r?!t&&r?{a:function(){return C.matMul(k,!1,!1)},b:function(){return C.matMul(O,!0,!1)}}:t&&!r?{a:function(){return k.matMul(C,!1,!0)},b:function(){return O.matMul(C,!1,!1)}}:{a:function(){return k.matMul(C,!0,!0)},b:function(){return C.matMul(O,!0,!0)}}:{a:function(){return C.matMul(k,!1,!0)},b:function(){return O.matMul(C,!0,!1)}}},"BatchMatMul",S).reshape(x)}}),p6=q({dot_:function(n,e){var t=P(n,"t1","dot"),r=P(e,"t2","dot");L(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var a=t.rank===1?t.size:t.shape[1],i=r.rank===1?r.size:r.shape[0];return L(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),v6=q({outerProduct_:function(n,e){var t=P(n,"v1","outerProduct"),r=P(e,"v2","outerProduct");return L(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),Mh=q({reverse_:function(n,e){var t=P(n,"x","reverse");if(t.rank===0)return t.clone();var r=_n(e,t.shape);return G.runKernelFunc(function(a){return a.reverse(t,r)},{$x:t},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(t)}}),m6=q({reverse1d_:function(n){var e=P(n,"x","reverse");return L(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Mh(e,0)}}),g6=q({reverse2d_:function(n,e){var t=P(n,"x","reverse");return L(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),Mh(t,e)}}),y6=q({reverse3d_:function(n,e){var t=P(n,"x","reverse");return L(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),Mh(t,e)}}),b6=q({reverse4d_:function(n,e){var t=P(n,"x","reverse");return L(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),Mh(t,e)}});function fk(n,e,t,r,a,i){var o=P(n,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),L(u.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."}),L(br(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),i!=null&&L(rn(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=uh(u.shape,e,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&Nn(f.inShape,f.outShape))return o.clone();var d=[u],p=G.runKernelFunc(function(v,g){var y=v.maxPool(u,f);return g([u,y]),y},{x:u},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(w,_,S,C,R,T,O,k){var D=P(w,"dy","maxPoolBackprop"),N=P(_,"input","maxPoolBackprop"),M=P(S,"output","maxPoolBackprop");L(N.rank===D.rank,function(){return"Rank of input ("+N.rank+") does not match rank of dy ("+D.rank+")"}),L(br(R,T),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+T+"'"}),L(D.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+D.rank+"."}),L(N.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+N.rank+"."});var B=uh(N.shape,C,R,T,O,k);return G.runKernelFunc(function(z){return z.maxPoolBackprop(D,N,M,B)},{$dy:D,$input:N})}(v,y,x,e,t,r,a)}}},"MaxPool",f,d);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function hk(n,e,t,r,a,i){var o=P(n,"x","avgPool","float32");L(br(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),L(u.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."}),i!=null&&L(rn(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=uh(u.shape,e,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&Nn(f.inShape,f.outShape))return o.clone();var d=G.runKernelFunc(function(p){return p.avgPool(u,f)},{x:u},function(p){return{x:function(){return function(v,g,y,x,w,_){var S=P(v,"dy","avgPoolBackprop"),C=P(g,"input","avgPoolBackprop");L(C.rank===S.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+S.rank+")"}),L(br(x,w),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+w+"'"});var R=C,T=S,O=!1;C.rank===3&&(O=!0,R=C.as4D(1,C.shape[0],C.shape[1],C.shape[2]),T=S.as4D(1,S.shape[0],S.shape[1],S.shape[2])),L(T.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),L(R.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+R.rank+"."});var k=uh(R.shape,y,x,w,_),D=G.runKernelFunc(function(N){return N.avgPoolBackprop(T,R,k)},{dy4D:T,input4D:R});return O?D.as3D(D.shape[1],D.shape[2],D.shape[3]):D}(p,u,e,t,r,a)}}},"AvgPool",f);return d=d.cast(o.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var Tn=q({maxPool_:function(n,e,t,r,a){return fk(n,e,t,1,r,a)}}),Fh=q({avgPool_:function(n,e,t,r,a){return hk(n,e,t,1,r,a)}}),x6=q({pool_:function(n,e,t,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var o=P(n,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),L(br(i,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"});var f,d=uh(u.shape,e,i,a,r),p=[d.dilationHeight,d.dilationWidth];f=r==="same"?function(R,T){var O=R.map(function(N,M){return N+(N-1)*(T[M]-1)}).map(function(N){return N-1}),k=O.map(function(N){return Math.floor(N/2)}),D=O.map(function(N,M){return N-k[M]});return O.map(function(N,M){return[k[M],D[M]]})}([d.filterHeight,d.filterWidth],p):[[0,0],[0,0]];var v=p[0]===1&&p[1]===1,g=function(R,T,O){var k=O.map(function(re){return re[0]}),D=O.map(function(re){return re[1]}),N=R.concat(k,D),M=T.map(function(re,te){return(re-N[te]%re)%re}),B=D.map(function(re,te){return re+M[te]}),z=T.map(function(re,te){return[k[te],B[te]]}),ee=T.map(function(re,te){return[0,M[te]]});return[z,ee]}([d.inHeight,d.inWidth],p,f),y=g[0],x=g[1],w=v?r:"valid",_=v?u:yA(u,p,y),S=(t==="avg"?function(){return hk(_,e,i,1,w)}:function(){return fk(_,e,i,1,w)})(),C=v?S:vA(S,p,x);return c?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),w6=q({maxPool3d_:function(n,e,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=P(n,"x","maxPool3d"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),L(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),L(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),L(br(t,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&L(rn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=wv(c.shape,e,t,o,r,a,i),p=G.runKernelFunc(function(v,g){var y=v.maxPool3d(c,d);return g([c,y]),y},{x:c},function(v,g){var y=g[0],x=g[1];return{x:function(){return function(w,_,S,C,R,T,O,k){var D=P(w,"dy","maxPool3dBackprop"),N=P(_,"input","maxPool3dBackprop"),M=P(S,"output","maxPool3dBackprop"),B=D,z=N,ee=M,re=!1;N.rank===4&&(re=!0,B=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3]),z=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3]),ee=M.as5D(1,M.shape[0],M.shape[1],M.shape[2],M.shape[3])),L(B.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+B.rank+"."}),L(z.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+z.rank+"."}),L(ee.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+ee.rank+"."}),T==null&&(T=[1,1,1]),L(br(R,T),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+T+"'"}),k!=null&&L(rn(O),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+k+" but got pad "+O+"."});var te=wv(z.shape,C,R,T,O,k),U=G.runKernelFunc(function(H){return H.maxPool3dBackprop(B,z,ee,te)},{dy5D:B,input5D:z});return re?U.as4D(U.shape[1],U.shape[2],U.shape[3],U.shape[4]):U}(v,y,x,e,t,o,r,a)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),_6=q({avgPool3d_:function(n,e,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=P(n,"x","avgPool3d","float32"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),L(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),L(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),L(br(t,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&L(rn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=wv(c.shape,e,t,o,r,a,i),p=G.runKernelFunc(function(v){return v.avgPool3d(c,d)},{x:c},function(v){return{x:function(){return function(g,y,x,w,_,S,C){var R=P(g,"dy","avgPool3dBackprop"),T=P(y,"input","avgPool3dBackprop"),O=R,k=T,D=!1;T.rank===4&&(D=!0,O=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),k=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),L(O.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+O.rank+"."}),L(k.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+k.rank+"."}),_==null&&(_=[1,1,1]),L(br(w,_),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),C!=null&&L(rn(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+S+"."});var N=wv(k.shape,x,w,_,S,C),M=G.runKernelFunc(function(B){return B.avgPool3dBackprop(O,k,N)},{dy5D:O,input5D:k});return D?M.as4D(M.shape[1],M.shape[2],M.shape[3],M.shape[4]):M}(v,c,e,t,o,r,a)}}});return p=p.cast(c.dtype),f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Ya=q({slice_:function(n,e,t){var r,a,i=P(n,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice()).forEach(function(c){L(c!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=t==null?new Array(i.rank).fill(-1):typeof t=="number"?[t].concat(new Array(i.rank-1).fill(-1)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(-1)):t).map(function(c,f){return c>=0?c:(L(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+f+"."}),i.shape[f]-r[f])}),Xz(i,r,a);var o=i.shape,u={begin:r,size:a};return G.runKernelFunc(function(c){return c.slice(i,r,a)},{x:i},function(c){for(var f=[],d=0;d<c.rank;d++)f.push([r[d],o[d]-r[d]-a[d]]);return{x:function(){return c.pad(f)}}},"Slice",u)}}),E6=q({slice1d_:function(n,e,t){var r=P(n,"x","slice1d");return L(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,[e],[t])}}),S6=q({slice2d_:function(n,e,t){var r=P(n,"x","slice2d");return L(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,e,t)}}),dk=q({slice3d_:function(n,e,t){var r=P(n,"x","slice3d");return L(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,e,t)}}),C6=q({slice4d_:function(n,e,t){var r=P(n,"x","slice4d");return L(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Ya(r,e,t)}});function pk(n,e,t,r,a){return e.rank<t.rank&&(e=e.reshape(yr(e.shape,r))),n.rank<t.rank&&(n=n.reshape(yr(n.shape,r))),{x:function(){var i=n.mul(t.equal(e).cast(n.dtype));return a==null?i:i.transpose(a)}}}var R6=q({all_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","all","bool"),a=_n(e,r.shape),i=a,o=ri(i,r.rank);o!=null&&(r=r.transpose(o),i=ai(i.length,r.rank));var u=G.runKernelFunc(function(f){return f.all(r,i)},{$x:r});if(t){var c=yr(u.shape,a);return u.reshape(c)}return u}}),T6=q({any_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","any","bool"),a=_n(e,r.shape),i=a,o=ri(i,r.rank);o!=null&&(r=r.transpose(o),i=ai(i.length,r.rank));var u=G.runKernelFunc(function(f){return f.any(r,i)},{$x:r});if(t){var c=yr(u.shape,a);return u.reshape(c)}return u}}),O6=q({argMax_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","argMax");e==null&&(e=0);var r=_n(e,t.shape),a=ri(r,t.rank);a!=null&&(t=t.transpose(a),r=ai(r.length,t.rank));var i={axis:r[0]},o=[t];return G.runKernelFunc(function(u,c){var f=u.argMax(t,r[0]);return c([t]),f},{x:t},function(u,c){var f=c[0];return{x:function(){return mt(f)}}},"ArgMax",i,o)}}),A6=q({argMin_:function(n,e){e===void 0&&(e=0);var t=P(n,"x","argMin");e==null&&(e=0);var r=_n(e,t.shape),a=ri(r,t.rank);return a!=null&&(t=t.transpose(a),r=ai(r.length,t.rank)),G.runKernelFunc(function(i,o){var u=i.argMin(t,r[0]);return o([t]),u},{$x:t},function(i,o){var u=o[0];return{$x:function(){return mt(u)}}})}}),k6=q({logSumExp_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","logSumExp"),a=_n(e,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),u=i.reshape(o.shape).add(o);if(t){var c=yr(u.shape,a);return u.reshape(c)}return u}}),Jv=q({max_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","max"),a=r,i=_n(e,r.shape),o=i,u=ri(o,r.rank);u!=null&&(r=r.transpose(u),o=ai(o.length,r.rank));var c=[r],f=G.runKernelFunc(function(p,v){var g=p.max(r,o);return v([a,g]),g},{x:r},function(p,v){return pk(p,v[1],v[0],i,u)},"Max",{axes:o},c,[!0]);if(t){var d=yr(f.shape,i);f=f.reshape(d)}return f}}),D6=q({mean_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","mean"),a=_n(e,r.shape),i=Ne(Qn(r.shape,a)[1]);return $v(function(o){var u=xe(i);return{value:(u.dtype===o.dtype?o:o.cast(u.dtype)).div(u).sum(e,t),gradFunc:function(c){var f=o.shape.slice();return a.forEach(function(d){f[d]=1}),c.reshape(f).mul(sc(o.shape,"float32")).div(i)}}})(r)}}),N6=q({min_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","min"),a=r,i=_n(e,r.shape),o=i,u=ri(o,r.rank);u!=null&&(r=r.transpose(u),o=ai(o.length,r.rank));var c=[r],f=G.runKernelFunc(function(p,v){var g=p.min(r,o);return v([a,g]),g},{x:r},function(p,v){return pk(p,v[1],v[0],i,u)},"Min",{axes:o},c,[!0]);if(t){var d=yr(f.shape,i);f=f.reshape(d)}return f}}),I6=q({moments_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=_n(e,(n=P(n,"x","moments")).shape),a=n.mean(r,t),i=a.shape;t||(i=yr(a.shape,r));var o=n.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,t)}}}),vk=q({sum_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=_n(e,r.shape);return $v(function(i){var o=ri(a,i.rank),u=a,c=i;o!=null&&(c=i.transpose(o),u=ai(u.length,i.rank));var f=function(g){var y=i.shape.slice();return a.forEach(function(x){y[x]=1}),g.reshape(y).mul(sc(i.shape,"float32"))},d={axes:u},p=G.runKernelFunc(function(g){return g.sum(c,u)},{x:c},function(g){return{x:function(){return f(g)}}},"Sum",d);if(t){var v=yr(p.shape,a);p=p.reshape(v)}return{value:p,gradFunc:f}})(r)}}),M6=q({prod_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=P(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=_n(e,r.shape),i=ri(a,r.rank),o=a,u=r;i!=null&&(u=r.transpose(i),o=ai(o.length,r.rank));var c=G.runKernelFunc(function(d){return d.prod(u,o)},{permutedX:u});if(t){var f=yr(c.shape,a);c=c.reshape(f)}return c}}),mk=q({elu_:function(n){var e=P(n,"x","elu");return G.runKernelFunc(function(t,r){var a=t.elu(e);return r([a]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){return G.runKernelFunc(function(i){return i.eluDer(t,a)},{dy:t,y:a})}}})}}),F6=q({leakyRelu_:function(n,e){e===void 0&&(e=.2);var t=P(n,"x","leakyRelu");return Kx(xe(e).mul(t),t)}}),gk=q({prelu_:function(n,e){var t=P(n,"x","prelu"),r=P(e,"alpha","prelu");return G.runKernelFunc(function(a,i){var o=a.prelu(t,r);return i([t,r]),o},{x:t,alpha:r},function(a,i){var o=i[0],u=i[1],c=o.greater(0);return{x:function(){return Ys(c,a,a.mul(u))},alpha:function(){var f=Ys(c,mt(a),a.mul(o)),d=xn(u.shape,a.shape);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)}}},"Prelu")}}),Ht=q({relu_:function(n){var e=P(n,"x","relu");return e.dtype==="bool"?e.toInt():G.runKernelFunc(function(t,r){var a=t.relu(e);return r([e]),a},{x:e},function(t,r){var a=r[0];return{x:function(){return t.mulStrict(a.step().toFloat())}}},"Relu")}}),yk=q({relu6_:function(n){var e=P(n,"x","relu6");return e.dtype==="bool"?e.toInt():G.runKernelFunc(function(t,r){var a=t.relu6(e);return r([e]),a},{x:e},function(t,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return t.mulStrict(i.toFloat())}}},"Relu6")}}),P6=q({selu_:function(n){var e=P(n,"x","selu");return G.runKernelFunc(function(t,r){var a=t.selu(e);return r([e]),a},{$x:e},function(t,r){var a=r[0];return{$x:function(){var i=a.greater(xe(0)),o=xe(Gx),u=xe(Qx),c=t.mul(u),f=t.mul(o).mul(a.toFloat().exp());return Ys(i,c,f)}}})}}),Ko=q({transpose_:function(n,e){var t=P(n,"x","transpose");if(e==null&&(e=t.shape.map(function(a,i){return i}).reverse()),L(t.rank===e.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."}),e.forEach(function(a){L(a>=0&&a<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e})}),t.rank<=1)return t.clone();var r={perm:e};return G.runKernelFunc(function(a){return a.transpose(t,e)},{x:t},function(a){var i=Px(e);return{x:function(){return a.transpose(i)}}},"Transpose",r)}}),L6=q({localResponseNormalization_:function(n,e,t,r,a){e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=P(n,"x","localResponseNormalization");L(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),L(rn(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=i,u=!1;i.rank===3&&(u=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=G.runKernelFunc(function(f,d){var p=f.localResponseNormalization4D(o,e,t,r,a);return d([o,p]),p},{x4D:o},function(f,d){var p=d[0],v=d[1];return{x4D:function(){return G.runKernelFunc(function(g){return g.LRNGrad(f,p,v,e,t,r,a)},{})}}});return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),bk=q({norm_:function(n,e,t,r){e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var a=function u(c,f,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return u(c.reshape([-1]),f,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(f===1)return c.abs().sum(d);if(f===1/0)return c.abs().max(d);if(f===-1/0)return c.abs().min(d);if(f==="euclidean"||f===2)return c.abs().pow(xe(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}if(Array.isArray(d)&&d.length===2){if(f===1)return c.abs().sum(d[0]).max(d[1]-1);if(f===1/0)return c.abs().sum(d[1]).max(d[0]);if(f===-1/0)return c.abs().sum(d[1]).min(d[0]);if(f==="fro"||f==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}throw new Error("Error in norm: invalid axis: "+d)}(n=P(n,"x","norm"),e,t),i=a.shape;if(r){var o=_n(t,n.shape);i=yr(a.shape,o)}return a.reshape(i)}}),B6=q({basicLSTMCell_:function(n,e,t,r,a,i){var o=P(n,"forgetBias","basicLSTMCell"),u=P(e,"lstmKernel","basicLSTMCell"),c=P(t,"lstmBias","basicLSTMCell"),f=P(r,"data","basicLSTMCell"),d=P(a,"c","basicLSTMCell"),p=P(i,"h","basicLSTMCell"),v=f.concat(p,1).matMul(u).add(c),g=v.shape[0],y=v.shape[1]/4,x=[g,y],w=v.slice([0,0],x),_=v.slice([0,y],x),S=v.slice([0,2*y],x),C=v.slice([0,3*y],x),R=w.sigmoid().mulStrict(_.tanh()).addStrict(d.mulStrict(o.add(S).sigmoid())),T=R.tanh().mulStrict(C.sigmoid());return[R,T]}}),z6=q({multiRNNCell_:function(n,e,t,r){for(var a=P(e,"data","multiRNNCell"),i=vv(t,"c","multiRNNCell"),o=vv(r,"h","multiRNNCell"),u=a,c=[],f=0;f<n.length;f++){var d=n[f](u,i[f],o[f]);c.push(d[0]),c.push(d[1]),u=d[1]}var p=[],v=[];for(f=0;f<c.length;f+=2)p.push(c[f]),v.push(c[f+1]);return[p,v]}}),U6=q({movingAverage_:function(n,e,t,r,a){a===void 0&&(a=!0);var i=P(n,"v","movingAverage"),o=P(e,"x","movingAverage"),u=P(t,"decay","movingAverage");LB(i,o),L(Nn(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=xe(1),f=c.sub(u),d=o.sub(i).mul(f);if(a){L(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=P(r,"step","movingAverage");d=d.div(c.sub(Cv(u,p)))}return i.add(d)}}),V6=q({stridedSlice_:function(n,e,t,r,a,i,o,u,c){if(a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),r==null&&(r=new Array(e.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var f=P(n,"x","stridedSlice"),d=SC(u),p=f.shape.slice();d.forEach(function(w){e[w]=0,t[w]=1,p.splice(w,0,1)}),f=f.reshape(p);for(var v=0;v<f.rank;v++)e[v]=Yz(a,e,r,f.shape,v),t[v]=Zz(i,t,r,f.shape,v),r[v]=r[v]||1;var g=SC(c);g.forEach(function(w){t[w]=e[w]+1,r[w]=1});var y=Ux(e,t,r),x=y.filter(function(w,_){return g.indexOf(_)===-1});return r.every(function(w){return w===1})?Ya(f,e,y).reshape(x):G.runKernelFunc(function(w){return w.stridedSlice(f,e,t,r)},{$x:f}).reshape(x)}}),j6=q({topk_:function(n,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var r=P(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(e>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+e);var i=G.runKernelFunc(function(o){return o.topk(r,e,t)},{$x:r});return{values:i[0],indices:i[1]}}}),q6=q({scatterND_:function(n,e,t){var r=P(n,"indices","scatterND","int32"),a=P(e,"updates","scatterND");return Kz(a,r,t),G.runKernelFunc(function(i){return i.scatterND(r,a,t)},{indices:r,updates:a},null,"ScatterNd",{shape:t})}}),Jx=q({fft_:function(n){L(n.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return G.runKernelFunc(function(a){return a.fft(r)},{input:n}).reshape(n.shape)}}),Rv=q({ifft_:function(n){L(n.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return G.runKernelFunc(function(a){return a.ifft(r)},{input:n}).reshape(n.shape)}}),e1=q({rfft_:function(n,e){L(n.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+n.dtype});var t,r=n.shape[n.shape.length-1],a=n.size/r;if(e!=null&&e<r){var i=n.shape.map(function(_){return 0}),o=n.shape.map(function(_){return _});o[n.shape.length-1]=e,t=n.slice(i,o),r=e}else if(e!=null&&e>r){var u=n.shape.map(function(_){return _});u[n.shape.length-1]=e-r,t=n.concat(Ut(u),n.shape.length-1),r=e}else t=n;var c=t.zerosLike(),f=zn(t,c).as2D(a,r),d=Jx(f),p=Math.floor(r/2)+1,v=Xr(d),g=Va(d),y=v.split([p,r-p],v.shape.length-1),x=g.split([p,r-p],g.shape.length-1),w=t.shape.slice();return w[t.shape.length-1]=p,zn(y[0],x[0]).reshape(w)}}),xk=q({irfft_:function(n){var e=n.shape[n.shape.length-1],t=n.size/e;if(e<=2){var r=n.as2D(t,e),a=Rv(r);return Xr(a)}var i=[t,2*(e-1)],o=Xr(n).as2D(t,e),u=Va(n).as2D(t,e),c=o.slice([0,1],[t,e-2]).reverse(1),f=u.slice([0,1],[t,e-2]).reverse(1).mul(xe(-1)),d=o.concat(c,1),p=u.concat(f,1);return r=zn(d,p).as2D(i[0],i[1]),a=Rv(r),Xr(a)}}),W6=Object.freeze({fft:Jx,ifft:Rv,rfft:e1,irfft:xk}),H6=q({sparseToDense_:function(n,e,t,r){r===void 0&&(r=0);var a=P(n,"sparseIndices","sparseToDense","int32"),i=P(e,"sparseValues","sparseToDense"),o=P(r,"defaultValue","sparseToDense",i.dtype);return function(u,c,f,d){if(u.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+u.dtype+".");if(u.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+u.shape+".");var p=u.rank>0?u.shape[0]:1,v=u.rank>1?u.shape[1]:1;if(f.length!==v)throw new Error("outputShape has incorrect number of elements:, "+f.length+", should be: "+v+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==p))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+p+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,t,o),G.runKernelFunc(function(u){return u.sparseToDense(a,i,t,o)},{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),G6=q({gatherND_:function(n,e){var t=P(e,"indices","gatherND","int32"),r=P(n,"x","gatherND");return G.runKernelFunc(function(a){return a.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),Q6=q({diag_:function(n){var e=P(n,"x","diag").flatten(),t=n.shape.concat(n.shape);return G.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(t)}}),$6=q({dropout_:function(n,e,t,r){var a=P(n,"x","dropout");if(L(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),L(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return n instanceof Wt?a.clone():a;var i=function(c,f){if(f==null)return c.shape.slice();if(Nn(c.shape,f))return f;if(c.shape.length===f.length){for(var d=[],p=0;p<c.shape.length;p++)f[p]==null&&c.shape[p]!=null?d.push(c.shape[p]):d.push(f[p]);return d}return f}(a,t),o=1-e,u=gA(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(u)}});function wk(n,e,t){for(var r=1-n%2,a=new Float32Array(n),i=0;i<n;++i){var o=2*Math.PI*i/(n+r-1);a[i]=e-t*Math.cos(o)}return cn(a,"float32")}var t1=q({hannWindow_:function(n){return wk(n,.5,.5)}}),_k=q({hammingWindow_:function(n){return wk(n,.54,.46)}}),n1=q({frame_:function(n,e,t,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+e<=n.size;)o.push(Ya(n,i,e)),i+=t;if(r)for(;i<n.size;){var u=i+e-n.size,c=yn([Ya(n,i,e-u),Qa([u],a)]);o.push(c),i+=t}return o.length===0?Uo([],[0,e]):yn(o).as2D(o.length,e)}}),Ek=q({stft_:function(n,e,t,r,a){var i;a===void 0&&(a=t1),r==null&&(i=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=n1(n,e,t),u=Yn(o,a(e)),c=[],f=0;f<o.shape[0];f++)c.push(e1(u.slice([f,0],[1,e]),r));return yn(c)}}),K6=Object.freeze({hannWindow:t1,hammingWindow:_k,frame:n1,stft:Ek}),Xn,X6=function(n,e,t){return t===void 0&&(t=1),Ae(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p,v,g,y,x,w;return ke(this,function(_){switch(_.label){case 0:return r=P(n,"predictions","inTopK"),a=P(e,"targets","inTopK"),L(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),L(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),Rt(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],L(t>0&&t<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+t}),[4,r.data()];case 1:return o=_.sent(),[4,a.data()];case 2:for(u=_.sent(),c=[o.length/i,i],d=c[1],p=ih("bool",f=c[0]),v=0;v<f;v++){for(g=v*d,y=o.subarray(g,g+d),x=[],w=0;w<y.length;w++)x.push({value:y[w],index:w});for(x.sort(function(S,C){return C.value-S.value}),p[v]=0,w=0;w<t;w++)if(x[w].index===u[v]){p[v]=1;break}}return n!==r&&r.dispose(),e!==a&&a.dispose(),[2,Vn(p,a.shape,"bool")]}})})};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Xn||(Xn={}));var Y6=q({absoluteDifference_:function(n,e,t,r){r===void 0&&(r=Xn.SUM_BY_NONZERO_WEIGHTS);var a=P(n,"labels","absoluteDifference"),i=P(e,"predictions","absoluteDifference"),o=null;t!=null&&(o=P(t,"weights","absoluteDifference")),Rt(a.shape,i.shape,"Error in absoluteDifference: ");var u=a.sub(i).abs();return Ui(u,o,r)}}),Ui=q({computeWeightedLoss_:function(n,e,t){t===void 0&&(t=Xn.SUM_BY_NONZERO_WEIGHTS);var r=P(n,"losses","computeWeightedLoss"),a=null;e!=null&&(a=P(e,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(t===Xn.NONE)return i;if(t===Xn.SUM)return i.sum();if(t===Xn.MEAN){if(a==null)return i.mean();var o=r.size/a.size,u=i.sum().div(a.sum());return o>1?u.div(xe(o)):u}if(t===Xn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(xe(r.size));var c=a.mul(sc(r.shape)).notEqual(xe(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+t)}}),Z6=q({cosineDistance_:function(n,e,t,r,a){a===void 0&&(a=Xn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"labels","cosineDistance"),o=P(e,"predictions","cosineDistance"),u=null;r!=null&&(u=P(r,"weights","cosineDistance")),Rt(i.shape,o.shape,"Error in cosineDistance: ");var c=xe(1).sub(i.mul(o).sum(t,!0));return Ui(c,u,a)}}),J6=q({hingeLoss_:function(n,e,t,r){r===void 0&&(r=Xn.SUM_BY_NONZERO_WEIGHTS);var a=P(n,"labels","hingeLoss"),i=P(e,"predictions","hingeLoss"),o=null;t!=null&&(o=P(t,"weights","hingeLoss")),Rt(a.shape,i.shape,"Error in hingeLoss: ");var u=xe(1);a=xe(2).mul(a).sub(u);var c=u.sub(a.mul(i)).relu();return Ui(c,o,r)}}),eq=q({huberLoss_:function(n,e,t,r,a){r===void 0&&(r=1),a===void 0&&(a=Xn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"labels","huberLoss"),o=P(e,"predictions","huberLoss"),u=null;t!=null&&(u=P(t,"weights","huberLoss")),Rt(i.shape,o.shape,"Error in huberLoss: ");var c=xe(r),f=o.sub(i).abs(),d=nk(f,c),p=f.sub(d),v=xe(.5).mul(d.square()).add(c.mul(p));return Ui(v,u,a)}}),tq=q({logLoss_:function(n,e,t,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Xn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"labels","logLoss"),o=P(e,"predictions","logLoss"),u=null;t!=null&&(u=P(t,"weights","logLoss")),Rt(i.shape,o.shape,"Error in logLoss: ");var c=xe(1),f=xe(r),d=i.mul(o.add(f).log()).neg().sub(c.sub(i).mul(c.sub(o).add(f).log()));return Ui(d,u,a)}}),nq=q({meanSquaredError_:function(n,e,t,r){r===void 0&&(r=Xn.SUM_BY_NONZERO_WEIGHTS);var a=P(n,"labels","meanSquaredError"),i=P(e,"predictions","meanSquaredError"),o=null;t!=null&&(o=P(t,"weights","meanSquaredError")),Rt(a.shape,i.shape,"Error in meanSquaredError: ");var u=a.squaredDifference(i);return Ui(u,o,r)}}),rq=q({sigmoidCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Xn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"multiClassLabels","sigmoidCrossEntropy"),o=P(e,"logits","sigmoidCrossEntropy"),u=null;if(t!=null&&(u=P(t,"weights","sigmoidCrossEntropy")),Rt(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=xe(r),f=xe(1),d=xe(.5);i=i.mul(f.sub(c)).add(d.mul(c))}var p=function(v,g){var y=P(v,"labels","sigmoidCrossEntropyWithLogits"),x=P(g,"logits","sigmoidCrossEntropyWithLogits");Rt(y.shape,x.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=x.relu(),_=x.mul(y),S=x.abs().neg().exp().log1p();return w.sub(_).add(S)}(i,o);return Ui(p,u,a)}}),aq=q({softmaxCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Xn.SUM_BY_NONZERO_WEIGHTS);var i=P(n,"onehotLabels","softmaxCrossEntropy"),o=P(e,"logits","softmaxCrossEntropy"),u=null;if(t!=null&&(u=P(t,"weights","softmaxCrossEntropy")),Rt(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=xe(r),f=xe(1),d=xe(i.shape[1]);i=i.mul(f.sub(c)).add(c.div(d))}var p=function(v,g,y){if(y===void 0&&(y=-1),y===-1&&(y=g.rank-1),y!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+y);return $v(function(x,w,_){var S=w.logSumExp([y],!0),C=w.toFloat().sub(S);return _([x,C]),{value:C.mul(x).neg().sum([y]),gradFunc:function(R,T){var O=T[0],k=T[1],D=yr(R.shape,[y]);return[R.reshape(D).mul(O.toFloat().sub(k.exp())),R.reshape(D).mul(k.exp().sub(O.toFloat()))]}}})(v,g)}(i,o);return Ui(p,u,a)}}),iq=Object.freeze({get Reduction(){return Xn},absoluteDifference:Y6,computeWeightedLoss:Ui,cosineDistance:Z6,hingeLoss:J6,huberLoss:eq,logLoss:tq,meanSquaredError:nq,sigmoidCrossEntropy:rq,softmaxCrossEntropy:aq});function GC(n,e){return e===void 0&&(e=!1),G.tidy(function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var t=n.shape[0],r=n.shape[1],a=mA(t),i=n.clone(),o=Uo([[1]],[1,1]),u=o.clone(),c=t>=r?r:t,f=function(p){var v,g=i,y=u,x=a;v=G.tidy(function(){var w=i.slice([p,p],[t-p,1]),_=w.norm(),S=i.slice([p,p],[1,1]),C=Uo([[-1]]).where(S.greater(0),Uo([[1]])),R=S.sub(C.mul(_)),T=w.div(R);u=T.shape[0]===1?o.clone():o.concat(T.slice([1,0],[T.shape[0]-1,T.shape[1]]),0);var O=C.matMul(R).div(_).neg(),k=i.slice([p,0],[t-p,r]),D=O.mul(u);if(p===0)i=k.sub(D.matMul(u.transpose().matMul(k)));else{var N=k.sub(D.matMul(u.transpose().matMul(k)));i=i.slice([0,0],[p,r]).concat(N,0)}var M=a.slice([0,p],[t,a.shape[1]-p]);if(p===0)a=M.sub(M.matMul(u).matMul(D.transpose()));else{var B=M.sub(M.matMul(u).matMul(D.transpose()));a=a.slice([0,0],[t,p]).concat(B,1)}return[u,i,a]}),u=v[0],i=v[1],a=v[2],gr([g,y,x])},d=0;d<c;++d)f(d);return!e&&t>r&&(a=a.slice([0,0],[t,r]),i=i.slice([0,0],[r,r])),[a,i]})}var oq=q({bandPart_:function(n,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=P(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],u=i[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(t<=u))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+u+").");e<0&&(e=o),t<0&&(t=u);var c=mv(0,o,1,"int32").reshape([-1,1]),f=mv(0,u,1,"int32"),d=wn(c,f),p=Xv(d.lessEqual(xe(+e,"int32")),d.greaterEqual(xe(-t,"int32"))),v=Ut([o,u],r.dtype);return Mr(bn(r.reshape([-1,o,u])).map(function(g){return Ys(p,g,v)})).reshape(a)}}),sq=q({gramSchmidt_:function(n){var e;if(Array.isArray(n)){e=!1,L(n!=null&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=n[0].shape[0],r=function(c){L(n[c].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[c].shape[0]+" vs. "+t+")"})},a=1;a<n.length;++a)r(a)}else e=!0,n=Bx(n,n.shape[0],0).map(function(c){return bA(c,[0])});L(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var i=[],o=n,u=function(c){i.push(G.tidy(function(){var f=o[c];if(c>0)for(var d=0;d<c;++d){var p=vk(i[d].mulStrict(f)).mul(i[d]);f=f.sub(p)}return f.div(bk(f,"euclidean"))}))};for(a=0;a<n.length;++a)u(a);return e?Mr(i,0):i}}),uq=q({qr_:function(n,e){if(e===void 0&&(e=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return GC(n,e);var t=n.shape.slice(0,n.shape.length-2).reduce(function(o,u){return o*u}),r=bn(n.reshape([t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),a=[],i=[];return r.forEach(function(o){var u=GC(o,e),c=u[0],f=u[1];a.push(c),i.push(f)}),[Mr(a,0).reshape(n.shape),Mr(i,0).reshape(n.shape)]}}),lq=Object.freeze({bandPart:oq,gramSchmidt:sq,qr:uq});function em(n,e,t,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=n.shape[0];return t=Math.min(t,o),L(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),L(n.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),L(n.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),L(e.rank===1,function(){return"scores must be a 1D tensor"}),L(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),L(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var cq=q({resizeBilinear_:function(n,e,t){t===void 0&&(t=!1);var r=P(n,"images","resizeBilinear");L(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),L(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],u=e[1],c=G.runKernelFunc(function(f,d){return d([a]),f.resizeBilinear(a,o,u,t)},{x:a},function(f,d){return{x:function(){return G.runKernelFunc(function(p){return p.resizeBilinearBackprop(f,d[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:o,newWidth:u});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),fq=q({resizeNearestNeighbor_:function(n,e,t){t===void 0&&(t=!1);var r=P(n,"images","resizeNearestNeighbor");L(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),L(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),L(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],u=e[1],c=G.runKernelFunc(function(f,d){return d([a]),f.resizeNearestNeighbor(a,o,u,t)},{batchImages:a},function(f,d){return{batchImages:function(){return G.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(f,d[0],t)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),hq=q({nonMaxSuppression_:function(n,e,t,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=P(n,"boxes","nonMaxSuppression"),o=P(e,"scores","nonMaxSuppression"),u=em(i,o,t,r,a);t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold;var c={maxOutputSize:t,iouThreshold:r,scoreThreshold:a};return G.runKernelFunc(function(f){return f.nonMaxSuppression(i,o,t,r,a)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),dq=function(n,e,t,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),Ae(this,void 0,void 0,function(){var i,o,u,c,f,d,p;return ke(this,function(v){switch(v.label){case 0:return i=P(n,"boxes","nonMaxSuppressionAsync"),o=P(e,"scores","nonMaxSuppressionAsync"),u=em(i,o,t,r,a),t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=v.sent(),f=c[0],d=c[1],p=jx(f,d,t,r,a),i!==n&&i.dispose(),o!==e&&o.dispose(),[2,p]}})})},pq=q({nonMaxSuppressionWithScore_:function(n,e,t,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=P(n,"boxes","nonMaxSuppression"),u=P(e,"scores","nonMaxSuppression"),c=em(o,u,t,r,a,i),f={maxOutputSize:t=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},d=G.runKernel("NonMaxSuppressionV5",{boxes:o,scores:u},f);return{selectedIndices:d[0],selectedScores:d[1]}}}),vq=function(n,e,t,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Ae(this,void 0,void 0,function(){var o,u,c,f,d,p,v;return ke(this,function(g){switch(g.label){case 0:return o=P(n,"boxes","nonMaxSuppressionAsync"),u=P(e,"scores","nonMaxSuppressionAsync"),c=em(o,u,t,r,a,i),t=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),u.data()])];case 1:return f=g.sent(),d=f[0],p=f[1],v=qx(d,p,t,r,a,i),o!==n&&o.dispose(),u!==e&&u.dispose(),[2,v]}})})},mq=q({cropAndResize_:function(n,e,t,r,a,i){var o=P(n,"image","cropAndResize"),u=P(e,"boxes","cropAndResize","float32"),c=P(t,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var f=u.shape[0];return L(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),L(u.rank===2&&u.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+f+",4] but had shape "+u.shape+"."}),L(c.rank===1&&c.shape[0]===f,function(){return"Error in cropAndResize: boxInd must be have size ["+f+"] but had shape "+u.shape+"."}),L(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),L(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),L(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),G.runKernelFunc(function(d,p){return d.cropAndResize(o,u,c,r,a,i)},{images:o,boxes:u,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),r1=Object.freeze({resizeBilinear:cq,resizeNearestNeighbor:fq,nonMaxSuppression:hq,nonMaxSuppressionAsync:dq,nonMaxSuppressionWithScore:pq,nonMaxSuppressionWithScoreAsync:vq,cropAndResize:mq}),a1=function(n,e){return!(n>0)||e==="linear"},i1=function(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return n.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},o1=function(n,e){var t=e,r=xn(n.shape,e.shape);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},s1=function(n,e,t){if(e==="linear")return n;if(e==="relu")return Ht(n);if(e==="elu")return mk(n);if(e==="relu6")return yk(n);if(e==="prelu")return gk(n,t);throw new Error("Unknown fused activation "+e+".")},gq=q({fusedMatMul_:function(n){var e,t=n.a,r=n.b,a=n.transposeA,i=a!==void 0&&a,o=n.transposeB,u=o!==void 0&&o,c=n.bias,f=n.activation,d=f===void 0?"linear":f,p=n.preluActivationWeights;if(a1(G.state.gradientDepth,d)===!1){var v=Zv(t,r,i,u);return c!=null&&(v=st(v,c)),s1(v,d,p)}var g=P(t,"a","fused matMul"),y=P(r,"b","fused matMul");e=Qt(g,y),g=e[0],y=e[1];var x=i?g.shape[g.rank-2]:g.shape[g.rank-1],w=u?y.shape[y.rank-1]:y.shape[y.rank-2],_=i?g.shape[g.rank-1]:g.shape[g.rank-2],S=u?y.shape[y.rank-2]:y.shape[y.rank-1],C=g.shape.slice(0,-2),R=y.shape.slice(0,-2),T=Ne(C),O=Ne(R);L(g.rank>=2&&y.rank>=2&&g.rank===y.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+y.rank+"."}),L(Nn(C,R),function(){return"Error in fused matMul: outer dimensions ("+C+") and ("+R+") of Tensors with shapes "+g.shape+" and "+y.shape+" must match."}),L(x===w,function(){return"Error in fused matMul: inner shapes ("+x+") and ("+w+") of Tensors with shapes "+g.shape+" and "+y.shape+" and transposeA="+i+" and transposeB="+u+" must match."});var k,D,N=g.shape.slice(0,-2).concat([_,S]),M=i?g.as3D(T,x,_):g.as3D(T,_,x),B=u?y.as3D(O,S,w):y.as3D(O,w,S);c!=null&&ct(N,(k=Qt(k=P(c,"bias","fused matMul"),g)[0]).shape),p!=null&&(D=P(p,"prelu weights","fused matMul"));var z={a:M,b:B};c!=null&&(z.bias=k),p!=null&&(z.preluActivationWeights=D);var ee=[M,B];return G.runKernelFunc(function(re,te){var U=re.fusedBatchMatMul({a:M,b:B,transposeA:i,transposeB:u,bias:k,activation:d,preluActivationWeights:D});return te([M,B,U]),U},z,function(re,te){var U=te[0],H=te[1],$=te[2],Y=i1(re,$,d),F={};return c!=null&&(F={bias:function(){return o1(k,Y)}}),Object.assign(i||u?!i&&u?{a:function(){return Y.matMul(H,!1,!1)},b:function(){return Y.matMul(U,!0,!1)}}:i&&!u?{a:function(){return H.matMul(Y,!1,!0)},b:function(){return U.matMul(Y,!1,!1)}}:{a:function(){return H.matMul(Y,!0,!0)},b:function(){return Y.matMul(U,!0,!0)}}:{a:function(){return Y.matMul(H,!1,!0)},b:function(){return U.matMul(Y,!0,!1)}},F)},"_FusedMatMul",{transposeA:i,transposeB:u,activation:d},ee,[!0]).reshape(N)}}),yq=q({fusedConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,o=i===void 0?"NHWC":i,u=n.dilations,c=u===void 0?[1,1]:u,f=n.dimRoundingMode,d=n.bias,p=n.activation,v=p===void 0?"linear":p,g=n.preluActivationWeights;if(v=v||"linear",a1(G.state.gradientDepth,v)===!1){var y=ta(e,t,r,a,o,c,f);return d!=null&&(y=st(y,d)),s1(y,v,g)}var x=P(e,"x","conv2d"),w=P(t,"filter","conv2d"),_=x,S=!1;x.rank===3&&(S=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),L(_.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+_.rank+"."}),L(w.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."}),f!=null&&L(rn(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+f+" but got pad "+a+"."}),L(_.shape[3]===w.shape[2],function(){return"Error in conv2d: depth of input ("+_.shape[3]+") must match input depth for filter "+w.shape[2]+"."}),L(br(r,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),L(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var C,R,T=ru(_.shape,w.shape,r,c,a,f);d!=null&&(C=Qt(C=P(d,"bias","fused conv2d"),x)[0],ct(T.outShape,C.shape)),g!=null&&(R=P(g,"prelu weights","fused conv2d"));var O={x:_,filter:w};d!=null&&(O.bias=C),g!=null&&(O.preluActivationWeights=R);var k=[w,_],D=G.runKernelFunc(function(N,M){var B=N.fusedConv2d({input:_,filter:w,convInfo:T,bias:C,activation:v,preluActivationWeights:R});return M([w,_,B]),B},O,function(N,M){var B=M,z=B[0],ee=B[1],re=B[2],te=i1(N,re,v);L(Yl(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var U={};return d!=null&&(U={bias:function(){return o1(C,te)}}),Object.assign({x:function(){return uk(ee.shape,te,z,r,a)},filter:function(){return Yx(ee,te,z.shape,r,a)}},U)},"FusedConv2D",{convInfo:T,activation:v},k,[!0]);return S?D.as3D(D.shape[1],D.shape[2],D.shape[3]):D}}),bq=q({fusedDepthwiseConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,i=n.dataFormat,o=i===void 0?"NHWC":i,u=n.dilations,c=u===void 0?[1,1]:u,f=n.dimRoundingMode,d=n.bias,p=n.activation,v=p===void 0?"linear":p,g=n.preluActivationWeights;if(a1(G.state.gradientDepth,v)===!1){var y=Yv(e,t,r,a,o,c,f);return d!=null&&(y=st(y,d)),s1(y,v,g)}var x=P(e,"x","depthwiseConv2d"),w=P(t,"filter","depthwiseConv2d"),_=x,S=!1;x.rank===3&&(S=!0,_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),L(_.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+_.rank+"."}),L(w.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."}),L(_.shape[3]===w.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+_.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."}),c==null&&(c=[1,1]),L(br(r,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),f!=null&&L(rn(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+f+" but got pad "+a+"."});var C,R,T=ru(_.shape,w.shape,r,c,a,f,!0);d!=null&&(C=Qt(C=P(d,"bias","fused conv2d"),x)[0],ct(T.outShape,C.shape)),g!=null&&(R=P(g,"prelu weights","fused depthwiseConv2d"));var O={x:_,filter:w};d!=null&&(O.bias=C),g!=null&&(O.preluActivationWeights=R);var k=[w,_],D=G.runKernelFunc(function(N,M){var B=N.fusedDepthwiseConv2D({input:_,filter:w,convInfo:T,bias:C,activation:v,preluActivationWeights:R});return M([w,_,B]),B},O,function(N,M){L(Yl(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var B=M[0],z=M[1],ee=M[2],re=i1(N,ee,v),te={};return d!=null&&(te={bias:function(){return o1(C,re)}}),Object.assign({x:function(){return lk(z.shape,re,B,T)},filter:function(){return ck(z,re,B.shape,T)}},te)},"FusedDepthwiseConv2D",{convInfo:T,activation:v},k,[!0]);return S?D.as3D(D.shape[1],D.shape[2],D.shape[3]):D}}),xq=Object.freeze({matMul:gq,conv2d:yq,depthwiseConv2d:bq}),wq=Object.freeze({image:r1,linalg:lq,losses:iq,spectral:W6,fused:xq,signal:K6,square:tj,squaredDifference:GA,conv1d:c6,conv2d:ta,conv3d:f6,depthwiseConv2d:Yv,separableConv2d:Zx,conv2dTranspose:h6,conv3dTranspose:d6,op:q,batchNormalization2d:Dj,batchNormalization3d:Nj,batchNormalization4d:Ij,batchNormalization:Mj,batchNorm:ZA,batchNorm2d:Fj,batchNorm3d:Pj,batchNorm4d:Lj,booleanMaskAsync:l6,complex:zn,real:Xr,imag:Va,concat:yn,concat1d:xz,concat2d:wz,concat3d:_z,concat4d:Ez,split:Bx,matMul:Zv,dot:p6,outerProduct:v6,reverse:Mh,reverse1d:m6,reverse2d:g6,reverse3d:y6,reverse4d:b6,maxPool:Tn,avgPool:Fh,pool:x6,maxPool3d:w6,avgPool3d:_6,slice:Ya,slice1d:E6,slice2d:S6,slice3d:dk,slice4d:C6,abs:nj,acos:rj,acosh:aj,asin:ij,asinh:oj,atan:sj,atanh:uj,ceil:lj,clipByValue:$x,cos:cj,cosh:fj,erf:hj,exp:Lb,expm1:dj,floor:pj,log:vj,log1p:mj,logSigmoid:gj,neg:Sv,reciprocal:yj,round:bj,rsqrt:QA,sigmoid:$A,sign:xj,isNaN:wj,isInf:_j,isFinite:Ej,sin:Sj,sinh:Cj,softplus:Rj,sqrt:Tj,step:Oj,tan:Aj,tanh:kj,all:R6,any:T6,argMax:O6,argMin:A6,logSumExp:k6,max:Jv,mean:D6,min:N6,moments:I6,sum:vk,prod:M6,equal:rk,equalStrict:Jj,greater:e6,greaterEqual:ak,greaterEqualStrict:t6,greaterStrict:n6,less:r6,lessEqual:a6,lessEqualStrict:i6,lessStrict:o6,notEqual:s6,notEqualStrict:u6,add:st,addN:Uj,addStrict:Vj,atan2:jj,div:fa,divNoNan:qj,divStrict:Wj,floorDiv:tk,maximum:Kx,maximumStrict:Hj,minimum:nk,minimumStrict:Gj,mod:Qj,modStrict:$j,mul:Yn,mulStrict:Kj,pow:Cv,powStrict:Xj,squaredDifferenceStrict:Yj,sub:wn,subStrict:Zj,elu:mk,leakyRelu:F6,prelu:gk,relu:Ht,relu6:yk,selu:P6,logicalAnd:Xv,logicalNot:Bj,logicalOr:JA,logicalXor:zj,where:Ys,whereAsync:ek,buffer:Xe,print:Nz,batchToSpaceND:vA,broadcastTo:Iz,cast:Mz,clone:Fz,cumsum:Pz,depthToSpace:Lz,expandDims:Kr,eye:mA,multinomial:Bz,oneHot:Ib,pad:nu,pad1d:zz,pad2d:Uz,pad3d:Vz,pad4d:jz,rand:qz,randomNormal:Wz,randomGamma:Hz,randomUniform:gA,reshape:pa,spaceToBatchND:yA,squeeze:bA,stack:Mr,tile:gl,truncatedNormal:Gz,unstack:bn,setdiff1dAsync:Qz,fill:Qa,linspace:bz,ones:sc,range:mv,scalar:xe,tensor:Vn,tensor1d:cn,tensor2d:Uo,tensor3d:Lx,tensor4d:pr,tensor5d:mz,tensor6d:gz,variable:yz,zeros:Ut,onesLike:pA,zerosLike:mt,transpose:Ko,softmax:zi,logSoftmax:eU,localResponseNormalization:L6,norm:bk,gather:Xx,unsortedSegmentSum:ik,basicLSTMCell:B6,multiRNNCell:z6,movingAverage:U6,stridedSlice:V6,topk:j6,scatterND:q6,fft:Jx,ifft:Rv,rfft:e1,irfft:xk,sparseToDense:H6,gatherND:G6,diag:Q6,dropout:$6,hannWindow:t1,hammingWindow:_k,frame:n1,stft:Ek,inTopKAsync:X6});function ve(n,e){Array.isArray(n)||(n=[n]),n.forEach(function(t){t!=null&&L(t.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function v0(n,e,t,r){if(t==="linear")return n.linear(e);if(t==="relu")return n.relu(e);if(t==="elu")return n.elu(e);if(t==="relu6")return n.relu6(e);if(t==="prelu")return n.prelu(e,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var _q=function(n){function e(){var t=n.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new RA(t,G),t}return _a(e,n),e.prototype.write=function(t,r,a){this.firstUse&&(this.firstUse=!1,ce().get("IS_NODE")&&pv(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:t,dtype:a}),i},e.prototype.move=function(t,r,a,i){this.data.set(t,{values:r,dtype:i})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return Ae(this,void 0,void 0,function(){return ke(this,function(r){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var r=this.data.get(t),a=r.dtype,i=r.complexTensors;return a==="complex64"?Pb(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),a=r;if(t.dtype==="string")try{a=r.map(function(i){return fv(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Xe(t.shape,t.dtype,a)},e.prototype.makeOutput=function(t,r,a){var i=this.write(t,r,a);return G.makeTensorFromDataId(i,r,a,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return Ae(this,void 0,void 0,function(){var r;return ke(this,function(a){return r=Ba(),t(),[2,{kernelMs:Ba()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,r){var a=this.makeOutput(null,t.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:G.keep(t.clone()),imag:G.keep(r.clone())},a},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(ve(t,"slice"),SA(t.shape,r,a)){var i=CA(r,t.strides),o=Ne(a);return Vn(this.readSync(t.dataId).subarray(i,i+o),a,t.dtype)}for(var u=Xe(a,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var d=u.indexToLoc(f).map(function(p,v){return p+r[v]});u.values[f]=c.get.apply(c,d)}return u.toTensor()},e.prototype.stridedSlice=function(t,r,a,i){ve(t,"stridedSlice");var o=Ux(r,a,i);if(o.some(function(g){return g===0}))return Vn([],o);for(var u=Xe(o,t.dtype),c=this.bufferSync(t),f=0;f<u.size;f++){for(var d=u.indexToLoc(f),p=new Array(d.length),v=0;v<p.length;v++)p[v]=d[v]*i[v]+r[v];u.set.apply(u,[c.get.apply(c,p)].concat(d))}return u.toTensor()},e.prototype.diag=function(t){for(var r=this.readSync(t.dataId),a=Xe([t.size,t.size],t.dtype),i=a.values,o=0;o<r.length;o++)i[o*t.size+o]=r[o];return a.toTensor()},e.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var d=new Array(a);for(u=0;u<d.length;u++)c[r]=u,d[u]=this.slice(t,c,f).reshape(i);return d},e.prototype.reverse=function(t,r){ve(t,"reverse");for(var a=Xe(t.shape,t.dtype),i=this.bufferSync(t),o=function(c){var f=a.indexToLoc(c),d=f.slice();r.forEach(function(p){return d[p]=t.shape[p]-1-d[p]}),a.set.apply(a,[i.get.apply(i,d)].concat(f))},u=0;u<a.size;u++)o(u);return a.toTensor()},e.prototype.concat=function(t,r){var a=this;if(t[0].dtype==="complex64"){var i=t.map(function(g){return Xr(g)}),o=t.map(function(g){return Va(g)});return zn(this.concat(i,r),this.concat(o,r))}var u=t.map(function(g){var y=Ne(g.shape.slice(r));return g.as2D(-1,y)}),c=Xl(u.map(function(g){return g.shape}),1),f=Xe(c,t[0].dtype).values;if(u[0].shape[0]===1){var d=0;u.forEach(function(g){f.set(a.readSync(g.dataId),d),d+=g.size})}else{var p=0;u.forEach(function(g){for(var y=a.readSync(g.dataId),x=0,w=0;w<g.shape[0];++w)for(var _=w*c[1]+p,S=0;S<g.shape[1];++S)f[_+S]=y[x++];p+=g.shape[1]})}var v=Xl(t.map(function(g){return g.shape}),r);return Vn(f,v,t[0].dtype)},e.prototype.neg=function(t){return ve(t,"neg"),this.multiply(xe(-1),t)},e.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a+o,imag:i+u}}):this.broadcastedBinaryOp(t,r,Un(t.dtype,r.dtype),function(a,i){return a+i})},e.prototype.addN=function(t){var r=this;ve(t,"addN");for(var a=t.map(function(d){return r.readSync(d.dataId)}),i=Xe(t[0].shape,t[0].dtype),o=i.values,u=0;u<t.length;u++)for(var c=a[u],f=0;f<o.length;f++)o[f]+=c[f];return i.toTensor()},e.prototype.softmax=function(t,r){var a=_n([r],t.shape),i=this.max(t,a),o=yr(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},e.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a-o,imag:i-u}}):this.broadcastedBinaryOp(t,r,Un(t.dtype,r.dtype),function(a,i){return a-i})},e.prototype.pow=function(t,r){return ve([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.pow(a,i)})},e.prototype.batchMatMul=function(t,r,a,i){ve([t,r],"matMul");for(var o=a?t.shape[1]:t.shape[2],u=a?t.shape[2]:t.shape[1],c=i?r.shape[1]:r.shape[2],f=t.shape[0],d=this.readSync(t.dataId),p=this.readSync(r.dataId),v=a?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],g=v[0],y=v[1],x=v[2],w=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],_=w[0],S=w[1],C=w[2],R=u*c,T=Xe([f,u,c],t.dtype),O=T.values,k=this.blockSize,D=0;D<f;D++)for(var N=0;N<u;N+=k)for(var M=0;M<c;M+=k)for(var B=0;B<o;B+=k)for(var z=Math.min(N+k,u),ee=Math.min(M+k,c),re=Math.min(B+k,o),te=N;te<z;te++)for(var U=M;U<ee;U++){for(var H=0,$=B;$<re;$++)H+=d[D*g+te*y+$*x]*p[$*_+U*S+D*C];O[D*R+(te*c+U)]+=H}return T.toTensor()},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,d=this.batchMatMul(r,a,i,o);return u&&(d=this.add(d,u)),c&&(d=v0(this,d,c,f)),d},e.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a*o-i*u,imag:a*u+i*o}}):this.broadcastedBinaryOp(t,r,Un(t.dtype,r.dtype),function(a,i){return a*i})},e.prototype.realDivide=function(t,r){return ve([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(a,i){return a/i})},e.prototype.floorDiv=function(t,r){return ve([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(a,i){return Math.floor(a/i)})},e.prototype.sum=function(t,r){ve(t,"sum"),Or("sum",r,t.rank);for(var a=Qn(t.shape,r),i=a[0],o=a[1],u=Ut(i,Un(t.dtype,"int32")),c=Ne(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=0,y=0;y<c;++y)g+=d[v+y];f[p]=g}return u},e.prototype.prod=function(t,r){ve(t,"sum");for(var a=Qn(t.shape,r),i=a[0],o=a[1],u=Ut(i,Un(t.dtype,"int32")),c=Ne(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=1,y=0;y<c;++y)g*=d[v+y];f[p]=g}return u},e.prototype.unsortedSegmentSum=function(t,r,a){ve(t,"unsortedSegmentSum");for(var i=[],o=t.rank-r.rank,u=0;u<o;++u)r=r.expandDims(u+1);for(u=0;u<a;++u){var c=xe(u,"int32"),f=rk(c,r).asType("float32").mul(t).sum(0);i.push(f)}return Mr(i)},e.prototype.argMin=function(t,r){ve(t,"argMin");var a=[r];Or("argMin",a,t.rank);for(var i=Qn(t.shape,a),o=i[0],u=i[1],c=Ut(o,"int32"),f=Ne(u),d=this.readSync(c.dataId),p=this.readSync(t.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],x=0,w=0;w<f;++w){var _=p[g+w];_<y&&(y=_,x=w)}d[v]=x}return c},e.prototype.argMax=function(t,r){ve(t,"argMax");var a=[r];Or("argMax",a,t.rank);for(var i=Qn(t.shape,a),o=i[0],u=i[1],c=Ut(o,"int32"),f=Ne(u),d=this.readSync(c.dataId),p=this.readSync(t.dataId),v=0;v<d.length;++v){for(var g=v*f,y=p[g],x=0,w=0;w<f;++w){var _=p[g+w];_>y&&(y=_,x=w)}d[v]=x}return c},e.prototype.cumsum=function(t,r,a,i){if(ve(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var o=Un(t.dtype,"int32"),u=Ut(t.shape,o),c=this.readSync(u.dataId),f=this.readSync(t.dataId),d=t.shape[t.rank-1],p=i?function(w,_){return w+d-_-1}:function(w,_){return w+_},v=0;v<f.length;v+=d)for(var g=0;g<d;g++){var y=p(v,g);if(g===0)c[y]=a?0:f[y];else{var x=p(v,g-1);c[y]=a?f[x]+c[x]:f[y]+c[x]}}return u},e.prototype.equal=function(t,r){return ve([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a===i?1:0})},e.prototype.notEqual=function(t,r){return ve([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a!==i?1:0})},e.prototype.less=function(t,r){return ve([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<i?1:0})},e.prototype.lessEqual=function(t,r){return ve([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<=i?1:0})},e.prototype.greater=function(t,r){return ve([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>i?1:0})},e.prototype.greaterEqual=function(t,r){return ve([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>=i?1:0})},e.prototype.logicalNot=function(t){ve(t,"logicalNot");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,t.shape,"bool")},e.prototype.logicalAnd=function(t,r){return ve([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a&&i})},e.prototype.logicalOr=function(t,r){return ve([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a||i})},e.prototype.select=function(t,r,a){ve([t,r,a],"select");for(var i=this.readSync(t.dataId),o=this.readSync(r.dataId),u=this.readSync(a.dataId),c=Ut(r.shape,Un(r.dtype,a.dtype)),f=this.readSync(c.dataId),d=0,p=t.rank===0||t.rank>1||r.rank===1?1:Ne(r.shape.slice(1)),v=0;v<i.length;v++)for(var g=0;g<p;g++)i[v]===1?f[d++]=o[v]:f[d++]=u[v];return c},e.prototype.where=function(t){ve([t],"where");var r=this.readSync(t.dataId);return Wx(t.shape,r)},e.prototype.topk=function(t,r,a){return ve(t,"topk"),MA(this.readSync(t.dataId),t.shape,t.dtype,r)},e.prototype.min=function(t,r){ve(t,"min"),Or("min",r,t.rank);for(var a=Qn(t.shape,r),i=a[0],o=a[1],u=Ut(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];x<g&&(g=x)}f[p]=g}return u},e.prototype.minimum=function(t,r){return ve([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.min(a,i)})},e.prototype.mod=function(t,r){return ve([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a%i;return a<0&&i<0||a>=0&&i>=0?o:(o+i)%i})},e.prototype.max=function(t,r){ve(t,"max"),Or("max",r,t.rank);for(var a=Qn(t.shape,r),i=a[0],o=a[1],u=Ut(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];x>g&&(g=x)}f[p]=g}return u},e.prototype.maximum=function(t,r){return ve([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.max(a,i)})},e.prototype.all=function(t,r){ve(t,"all"),Or("all",r,t.rank);for(var a=Qn(t.shape,r),i=a[0],o=a[1],u=Ut(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];g=g&&x}f[p]=g}return u},e.prototype.any=function(t,r){ve(t,"any"),Or("any",r,t.rank);for(var a=Qn(t.shape,r),i=a[0],o=a[1],u=Ut(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),d=this.readSync(t.dataId),p=0;p<f.length;++p){for(var v=p*c,g=d[v],y=0;y<c;++y){var x=d[v+y];g=g||x}f[p]=g}return u},e.prototype.squaredDifference=function(t,r){return ve([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a-i;return o*o})},e.prototype.ceil=function(t){ve(t,"ceil");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.floor=function(t){ve(t,"floor");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.sign=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,t.shape,"float32")},e.prototype.isNaN=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isInf=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isFinite=function(t){ve(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.round=function(t){ve(t,"round");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=Math.floor(r[i]);r[i]-o<.5?a[i]=Math.floor(r[i]):r[i]-o>.5?a[i]=Math.ceil(r[i]):a[i]=o%2==0?o:o+1}return this.makeOutput(a,t.shape,"float32")},e.prototype.exp=function(t){ve(t,"exp");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.expm1=function(t){ve(t,"expm1");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,t.shape,"float32")},e.prototype.log=function(t){ve(t,"log");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.log1p=function(t){ve(t,"log1p");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log1p(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.sqrt=function(t){ve(t,"sqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.rsqrt=function(t){ve(t,"rsqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=1/Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},e.prototype.reciprocal=function(t){ve(t,"reciprocal");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){ve(t,"relu");for(var r=Ut(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.max(0,i[o]);return r},e.prototype.relu6=function(t){ve(t,"relu");for(var r=Ut(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.min(Math.max(0,i[o]),6);return r},e.prototype.prelu=function(t,r){return ve([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return a<0?i*a:a})},e.prototype.elu=function(t){ve(t,"elu");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,t.shape,"float32")},e.prototype.eluDer=function(t,r){ve([t,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),o=this.readSync(t.dataId),u=0;u<i.length;++u){var c=i[u];a[u]=c>=1?o[u]:o[u]*(c+1)}return this.makeOutput(a,r.shape,"float32")},e.prototype.selu=function(t){ve(t,"selu");for(var r=Gx,a=Qx,i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(i,t.shape,"float32")},e.prototype.clip=function(t,r,a){ve(t,"clip");for(var i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>a?a:c<r?r:c}return this.makeOutput(i,t.shape,"float32")},e.prototype.abs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<t.size;++i){var o=a[2*i],u=a[2*i+1];r[i]=Math.hypot(o,u)}return this.makeOutput(r,t.shape,"float32")},e.prototype.int=function(t){ve(t,"int");for(var r=new Int32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,t.shape,"int32")},e.prototype.sigmoid=function(t){ve(t,"sigmoid");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,t.shape,"float32")},e.prototype.softplus=function(t){ve(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o]>-r,c=i[o]<r,f=Math.exp(i[o]),d=void 0;d=c?f:u?i[o]:Math.log(1+f),a[o]=d}return this.makeOutput(a,t.shape,"float32")},e.prototype.sin=function(t){ve(t,"sin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cos=function(t){ve(t,"cos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tan=function(t){ve(t,"tan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asin=function(t){ve(t,"asin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acos=function(t){ve(t,"acos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan=function(t){ve(t,"atan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan2=function(t,r){return ve([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.atan2(a,i)})},e.prototype.sinh=function(t){ve(t,"sinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cosh=function(t){ve(t,"cosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tanh=function(t){ve(t,"tanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=EB(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asinh=function(t){ve(t,"asinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acosh=function(t){ve(t,"acosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atanh=function(t){ve(t,"atanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,t.shape,"float32")},e.prototype.erf=function(t){ve(t,"erf");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=Math.sign(a[i]),u=Math.abs(a[i]),c=1/(1+.3275911*u);r[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-u*u))}return this.makeOutput(r,t.shape,"float32")},e.prototype.step=function(t,r){r===void 0&&(r=0),ve(t,"step");for(var a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o];isNaN(u)?a[o]=NaN:a[o]=u>0?1:r}return this.makeOutput(a,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.conv2d(r,a,i);return o&&(f=this.add(f,o)),u&&(f=v0(this,f,u,c)),f},e.prototype.conv2d=function(t,r,a){ve([t,r],"conv2d");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.dataFormat==="channelsLast",v=Xe(a.outShape,t.dtype),g=t.strides[0],y=p?t.strides[1]:t.strides[2],x=p?t.strides[2]:1,w=p?1:t.strides[1],_=v.strides[0],S=p?v.strides[1]:v.strides[2],C=p?v.strides[2]:1,R=p?1:v.strides[1],T=this.readSync(t.dataId),O=this.readSync(r.dataId),k=v.values,D=0;D<a.batchSize;++D)for(var N=D*g,M=D*_,B=0;B<a.outHeight;++B)for(var z=M+B*S,ee=B*a.strideHeight-d,re=0;re<i;re++){var te=ee+re*u;if(!(te<0||te>=a.inHeight))for(var U=re*r.strides[0],H=N+te*y,$=0;$<a.outWidth;++$)for(var Y=z+$*C,F=$*a.strideWidth-f,Q=0;Q<o;Q++){var oe=F+Q*c;if(!(oe<0||oe>=a.inWidth))for(var ue=H+oe*x,me=U+Q*r.strides[1],be=0;be<a.inChannels;++be){for(var ye=T[ue+be*w],Le=0;Le<a.outChannels;++Le)k[Y+Le*R]+=ye*O[me+Le];me+=a.outChannels}}}return v.toTensor()},e.prototype.conv3d=function(t,r,a){for(var i=a.filterDepth,o=a.filterHeight,u=a.filterWidth,c=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,p=a.padInfo.front,v=a.padInfo.left,g=a.padInfo.top,y=Xe(a.outShape,t.dtype),x=this.readSync(t.dataId),w=this.readSync(r.dataId),_=y.values,S=0;S<a.batchSize;++S)for(var C=S*t.strides[0],R=S*y.strides[0],T=0;T<a.outDepth;++T)for(var O=R+T*y.strides[1],k=T*a.strideDepth-p,D=0;D<i;D++){var N=k+D*c;if(!(N<0||N>=a.inDepth))for(var M=D*r.strides[0],B=C+N*t.strides[1],z=0;z<a.outHeight;++z)for(var ee=O+z*y.strides[2],re=z*a.strideHeight-g,te=0;te<o;te++){var U=re+te*f;if(!(U<0||U>=a.inHeight))for(var H=M+te*r.strides[1],$=B+U*t.strides[2],Y=0;Y<a.outWidth;++Y)for(var F=ee+Y*a.outChannels,Q=Y*a.strideWidth-v,oe=0;oe<u;oe++){var ue=Q+oe*d;if(!(ue<0||ue>=a.inWidth))for(var me=H+oe*r.strides[2],be=$+ue*a.inChannels,ye=me,Le=0;Le<a.inChannels;++Le){for(var Ee=x[be+Le],ze=0;ze<a.outChannels;++ze)_[F+ze]+=Ee*w[ye+ze];ye+=a.outChannels}}}}return y.toTensor()},e.prototype.conv2dDerInput=function(t,r,a){ve([t,r],"conv2dDerInput");for(var i=Xe(a.inShape,"float32"),o=i.values,u=this.readSync(t.dataId),c=this.readSync(r.dataId),f=r.strides,d=f[0],p=f[1],v=f[2],g=a.batchSize,y=a.filterHeight,x=a.filterWidth,w=a.inChannels,_=a.inHeight,S=a.inWidth,C=a.outChannels,R=a.outHeight,T=a.outWidth,O=a.strideHeight,k=a.strideWidth,D=a.dataFormat,N=y-1-a.padInfo.top,M=x-1-a.padInfo.left,B=D==="channelsLast",z=i.strides[0],ee=B?i.strides[1]:i.strides[2],re=B?i.strides[2]:1,te=B?1:i.strides[1],U=t.strides[0],H=B?t.strides[1]:t.strides[2],$=B?t.strides[2]:1,Y=B?1:t.strides[1],F=0;F<g;++F)for(var Q=0;Q<w;++Q)for(var oe=0;oe<_;++oe)for(var ue=oe-N,me=Math.max(0,Math.ceil(ue/O)),be=Math.min(R,(y+ue)/O),ye=0;ye<S;++ye){for(var Le=ye-M,Ee=Math.max(0,Math.ceil(Le/k)),ze=Math.min(T,(x+Le)/k),gt=0,qe=me;qe<be;++qe)for(var Ye=qe*O-ue,at=Ee;at<ze;++at)for(var xt=U*F+H*qe+$*at,It=d*(y-1-Ye)+p*(x-1-(at*k-Le))+v*Q,At=0;At<C;++At)gt+=u[xt+Y*At]*c[It+At];o[z*F+ee*oe+re*ye+te*Q]=gt}return i.toTensor()},e.prototype.conv3dDerInput=function(t,r,a){for(var i=Xe(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],d=u[2],p=u[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],x=g[1],w=g[2],_=g[3],S=this.readSync(r.dataId),C=r.strides,R=C[0],T=C[1],O=C[2],k=C[3],D=a.batchSize,N=a.filterDepth,M=a.filterHeight,B=a.filterWidth,z=a.inChannels,ee=a.inDepth,re=a.inHeight,te=a.inWidth,U=a.outChannels,H=a.outDepth,$=a.outHeight,Y=a.outWidth,F=a.strideDepth,Q=a.strideHeight,oe=a.strideWidth,ue=N-1-a.padInfo.front,me=M-1-a.padInfo.top,be=B-1-a.padInfo.left,ye=0;ye<D;++ye)for(var Le=0;Le<z;++Le)for(var Ee=0;Ee<ee;++Ee)for(var ze=Ee-ue,gt=Math.max(0,Math.ceil(ze/F)),qe=Math.min(H,(N+ze)/F),Ye=0;Ye<re;++Ye)for(var at=Ye-me,xt=Math.max(0,Math.ceil(at/Q)),It=Math.min($,(M+at)/Q),At=0;At<te;++At){for(var en=At-be,Pr=Math.max(0,Math.ceil(en/oe)),jn=Math.min(Y,(B+en)/oe),ii=0,or=gt;or<qe;++or)for(var Sa=or*F-ze,Lr=xt;Lr<It;++Lr)for(var Hi=Lr*Q-at,na=Pr;na<jn;++na)for(var oi=y*ye+x*or+w*Lr+_*na,an=R*(N-1-Sa)+T*(M-1-Hi)+O*(B-1-(na*oe-en))+k*Le,fn=0;fn<U;++fn)ii+=v[oi+fn]*S[an+fn];o[c*ye+f*Ee+d*Ye+p*At+Le]=ii}return i.toTensor()},e.prototype.conv2dDerFilter=function(t,r,a){ve([t,r],"conv2dDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dataFormat==="channelsLast",d=Xe(a.filterShape,"float32"),p=a.padInfo.left,v=a.padInfo.top,g=this.bufferSync(t),y=this.bufferSync(r),x=0;x<u;++x)for(var w=Math.max(0,Math.ceil((v-x)/i)),_=Math.min(a.outHeight,(a.inHeight+v-x)/i),S=0;S<c;++S)for(var C=Math.max(0,Math.ceil((p-S)/o)),R=Math.min(a.outWidth,(a.inWidth+p-S)/o),T=0;T<a.inChannels;++T)for(var O=0;O<a.outChannels;++O){for(var k=0,D=0;D<a.batchSize;++D)for(var N=w;N<_;++N)for(var M=x+N*i-v,B=C;B<R;++B){var z=S+B*o-p;k+=f?g.get(D,M,z,T)*y.get(D,N,B,O):g.get(D,T,M,z)*y.get(D,O,N,B)}d.set(k,x,S,T,O)}return d.toTensor()},e.prototype.conv3dDerFilter=function(t,r,a){for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=Xe(a.filterShape,"float32"),v=p.values,g=p.strides,y=g[0],x=g[1],w=g[2],_=g[3],S=this.readSync(r.dataId),C=r.strides,R=C[0],T=C[1],O=C[2],k=C[3],D=this.readSync(t.dataId),N=t.strides,M=N[0],B=N[1],z=N[2],ee=N[3],re=a.padInfo.front,te=a.padInfo.left,U=a.padInfo.top,H=0;H<c;++H)for(var $=Math.max(0,Math.ceil((re-H)/i)),Y=Math.min(a.outDepth,(a.inDepth+re-H)/i),F=H*y,Q=0;Q<f;++Q)for(var oe=Math.max(0,Math.ceil((U-Q)/o)),ue=Math.min(a.outHeight,(a.inHeight+U-Q)/o),me=Q*x+F,be=0;be<d;++be)for(var ye=Math.max(0,Math.ceil((te-be)/u)),Le=Math.min(a.outWidth,(a.inWidth+te-be)/u),Ee=be*w+me,ze=0;ze<a.inChannels;++ze)for(var gt=ze*_+Ee,qe=0;qe<a.outChannels;++qe){for(var Ye=0,at=0;at<a.batchSize;++at)for(var xt=at*M,It=at*R,At=$;At<Y;++At)for(var en=(H+At*i-re)*B+xt,Pr=At*T+It,jn=oe;jn<ue;++jn)for(var ii=(Q+jn*o-U)*z+en,or=jn*O+Pr,Sa=ye;Sa<Le;++Sa){var Lr=Sa*k+or;Ye+=D[(be+Sa*u-te)*ee+ii+ze]*S[Lr+qe]}v[gt+qe]=Ye}return p.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.depthwiseConv2D(r,a,i);return o&&(f=this.add(f,o)),u&&(f=v0(this,f,u,c)),f},e.prototype.depthwiseConv2D=function(t,r,a){ve([t,r],"depthwiseConv2D");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,d=a.padInfo.top,p=a.outChannels/a.inChannels,v=Xe(a.outShape,t.dtype),g=this.readSync(t.dataId),y=this.readSync(r.dataId),x=v.values,w=0;w<a.batchSize;++w)for(var _=w*t.strides[0],S=w*v.strides[0],C=0;C<a.outHeight;++C)for(var R=S+C*v.strides[1],T=C*a.strideHeight-f,O=0;O<i;++O){var k=T+O*u;if(!(k<0||k>=a.inHeight))for(var D=O*r.strides[0],N=_+k*t.strides[1],M=0;M<a.outWidth;++M)for(var B=R+M*v.strides[2],z=M*a.strideWidth-d,ee=0;ee<o;++ee){var re=z+ee*c;if(!(re<0||re>=a.inWidth))for(var te=D+ee*r.strides[1],U=N+re*a.inChannels,H=B,$=te,Y=0;Y<a.inChannels;++Y){for(var F=g[U+Y],Q=0;Q<p;++Q)x[H+Q]+=F*y[$+Q];H+=p,$+=p}}}return v.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,r,a){ve([t,r],"depthwiseConv2DDerInput");for(var i=Xe(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],d=u[2],p=this.readSync(t.dataId),v=t.strides,g=v[0],y=v[1],x=v[2],w=this.readSync(r.dataId),_=r.strides,S=_[0],C=_[1],R=_[2],T=a.batchSize,O=a.filterHeight,k=a.filterWidth,D=a.inChannels,N=a.inHeight,M=a.inWidth,B=a.outChannels,z=a.outHeight,ee=a.outWidth,re=a.strideHeight,te=a.strideWidth,U=O-1-a.padInfo.top,H=k-1-a.padInfo.left,$=B/D,Y=0;Y<T;++Y)for(var F=0;F<D;++F)for(var Q=0;Q<N;++Q)for(var oe=Q-U,ue=Math.max(0,Math.ceil(oe/re)),me=Math.min(z,(O+oe)/re),be=0;be<M;++be){for(var ye=be-H,Le=Math.max(0,Math.ceil(ye/te)),Ee=Math.min(ee,(k+ye)/te),ze=0,gt=ue;gt<me;++gt)for(var qe=gt*re-oe,Ye=Le;Ye<Ee;++Ye)for(var at=g*Y+y*gt+x*Ye,xt=S*(O-1-qe)+C*(k-1-(Ye*te-ye))+R*F,It=0;It<$;++It)ze+=p[at+(F*$+It)]*w[xt+It];o[c*Y+f*Q+d*be+F]=ze}return i.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){ve([t,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=Xe(a.filterShape,"float32"),d=a.padInfo.left,p=a.padInfo.top,v=a.outChannels/a.inChannels,g=this.bufferSync(t),y=this.bufferSync(r),x=0;x<u;++x)for(var w=Math.max(0,Math.ceil((p-x)/i)),_=Math.min(a.outHeight,(a.inHeight+p-x)/i),S=0;S<c;++S)for(var C=Math.max(0,Math.ceil((d-S)/o)),R=Math.min(a.outWidth,(a.inWidth+d-S)/o),T=0;T<a.outChannels;++T){for(var O=Math.trunc(T/v),k=T%v,D=0,N=0;N<a.batchSize;++N)for(var M=w;M<_;++M)for(var B=x+M*i-p,z=C;z<R;++z){var ee=S+z*o-d;D+=g.get(N,B,ee,O)*y.get(N,M,z,T)}f.set(D,x,S,O,k)}return f.toTensor()},e.prototype.tile=function(t,r){return ve(t,"tile"),IA(this.bufferSync(t),r)},e.prototype.pad=function(t,r,a){ve(t,"pad");var i=r.map(function(v,g){return v[0]+t.shape[g]+v[1]}),o=r.map(function(v){return v[0]}),u=this.bufferSync(t),c=Xe(i,t.dtype);a!==0&&c.values.fill(a);for(var f=0;f<t.size;f++){var d=u.indexToLoc(f),p=d.map(function(v,g){return v+o[g]});c.set.apply(c,[u.get.apply(u,d)].concat(p))}return c.toTensor()},e.prototype.transpose=function(t,r){ve(t,"transpose");for(var a=new Array(t.rank),i=0;i<a.length;i++)a[i]=t.shape[r[i]];var o=this.readSync(t.dataId),u=Xe(a,t.dtype),c=this.bufferSync(t);for(i=0;i<t.size;++i){for(var f=c.indexToLoc(i),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[r[p]];var v=u.locToIndex(d);u.values[v]=o[i]}return u.toTensor()},e.prototype.gather=function(t,r,a){ve([t,r],"gather");var i=t.shape.slice(),o=this.readSync(r.dataId);i[a]=o.length;for(var u=Xe(i,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var d=u.indexToLoc(f),p=d.slice();p[a]=o[d[a]];var v=c.locToIndex(p);u.values[f]=c.values[v]}return u.toTensor()},e.prototype.batchToSpaceND=function(t,r,a){ve([t],"batchToSpaceND");var i=r.reduce(function(p,v){return p*v}),o=gv(t.shape,r,i),u=yv(o.length,r.length),c=bv(t.shape,r,i),f=xA(a,r.length),d=wA(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,d)},e.prototype.spaceToBatchND=function(t,r,a){ve([t],"spaceToBatchND");var i=r.reduce(function(v,g){return v*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=gv(c.shape,r,i,!1),d=yv(f.length,r.length,!1),p=bv(c.shape,r,i,!1);return c.reshape(f).transpose(d).reshape(p)},e.prototype.pool=function(t,r,a){ve(t,"pool");for(var i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(t.dataId),x=Xe(r.outShape,t.dtype),w=x.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3],S=r.outShape[2]*r.outShape[3],C=r.outShape[3],R=0;R<r.batchSize;++R)for(var T=R*_,O=R*t.strides[0],k=0;k<r.inChannels;++k)for(var D=0;D<r.outHeight;++D)for(var N=D*i-p,M=Math.max(0,N),B=Math.min(r.inHeight,f+N),z=T+D*S,ee=0;ee<r.outWidth;++ee){for(var re=ee*o-v,te=Math.max(0,re),U=Math.min(r.inWidth,d+re),H=g,$=0,Y=0,F=M;F<B;F+=u){for(var Q=O+F*t.strides[1],oe=te;oe<U;oe+=c){var ue=y[Q+oe*t.strides[2]+k];a==="max"&&ue>H?H=ue:a==="avg"&&($+=ue,Y++)}if(isNaN(H))break}w[z+ee*C+k]=a==="avg"?$/Y:H}return x.toTensor()},e.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},e.prototype.maxPoolPositions=function(t,r){for(var a=Xe(r.outShape,"int32"),i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,g=this.bufferSync(t),y=0;y<r.batchSize;++y)for(var x=0;x<r.inChannels;++x)for(var w=0;w<r.outHeight;++w){for(var _=w*i-p,S=_;S<0;)S+=u;for(var C=Math.min(r.inHeight,f+_),R=0;R<r.outWidth;++R){for(var T=R*o-v,O=T;O<0;)O+=c;for(var k=Math.min(r.inWidth,d+T),D=Number.NEGATIVE_INFINITY,N=-1,M=S;M<C;M+=u)for(var B=M-_,z=O;z<k;z+=c){var ee=z-T,re=g.get(y,M,z,x);re>D&&(D=re,N=B*d+ee)}a.set(N,y,w,R,x)}}return a.toTensor()},e.prototype.maxPoolBackprop=function(t,r,a,i){ve([r,a],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,i),u=i.strideHeight,c=i.strideWidth,f=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,g=v-1-i.padInfo.left,y=p-1-i.padInfo.top,x=Xe(r.shape,"float32"),w=this.bufferSync(o),_=this.bufferSync(t),S=0;S<i.batchSize;++S)for(var C=0;C<i.inChannels;++C)for(var R=0;R<i.inHeight;++R)for(var T=0;T<i.inWidth;++T){for(var O=R-y,k=T-g,D=0,N=0;N<p;N+=f){var M=(O+N)/u;if(!(M<0||M>=i.outHeight||Math.floor(M)!==M))for(var B=0;B<v;B+=d){var z=(k+B)/c;if(!(z<0||z>=i.outWidth||Math.floor(z)!==z)){var ee=p*v-1-w.get(S,M,z,C)===N*v+B?1:0;ee!==0&&(D+=_.get(S,M,z,C)*ee)}}}x.set(D,S,R,T,C)}return x.toTensor()},e.prototype.avgPoolBackprop=function(t,r,a){ve([t,r],"avgPoolBackprop");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterHeight,v=a.effectiveFilterWidth,g=v-1-a.padInfo.left,y=p-1-a.padInfo.top,x=Xe(r.shape,"float32"),w=1/(u*c),_=this.bufferSync(t),S=0;S<a.batchSize;++S)for(var C=0;C<a.inChannels;++C)for(var R=0;R<a.inHeight;++R)for(var T=0;T<a.inWidth;++T){for(var O=R-y,k=T-g,D=0,N=0;N<p;N+=f){var M=(O+N)/i;if(!(M<0||M>=a.outHeight||Math.floor(M)!==M))for(var B=0;B<v;B+=d){var z=(k+B)/o;z<0||z>=a.outWidth||Math.floor(z)!==z||(D+=_.get(S,M,z,C))}}x.set(D*w,S,R,T,C)}return x.toTensor()},e.prototype.pool3d=function(t,r,a){ve(t,"pool3d");for(var i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(t.dataId),C=Xe(r.outShape,t.dtype),R=C.values,T=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],O=r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[3]*r.outShape[4],D=r.outShape[4],N=0;N<r.batchSize;++N)for(var M=N*T,B=N*t.strides[0],z=0;z<r.inChannels;++z)for(var ee=0;ee<r.outDepth;++ee){for(var re=ee*i-y,te=re;te<0;)te+=c;for(var U=Math.min(r.inDepth,p+re),H=M+ee*O,$=0;$<r.outHeight;++$){for(var Y=$*o-x,F=Y;F<0;)F+=f;for(var Q=Math.min(r.inHeight,v+Y),oe=H+$*k,ue=0;ue<r.outWidth;++ue){for(var me=ue*u-w,be=me;be<0;)be+=d;for(var ye=Math.min(r.inWidth,g+me),Le=oe+ue*D,Ee=_,ze=0,gt=0,qe=te;qe<U;qe+=c){for(var Ye=B+qe*t.strides[1],at=F;at<Q;at+=f){for(var xt=Ye+at*t.strides[2],It=be;It<ye;It+=d){var At=S[xt+It*t.strides[3]+z];if(a==="max"&&At>Ee?Ee=At:a==="avg"&&(ze+=At,gt++),isNaN(Ee))break}if(isNaN(Ee))break}if(isNaN(Ee))break}R[Le+z]=a==="avg"?ze/gt:Ee}}}return C.toTensor()},e.prototype.avgPool3d=function(t,r){return ve(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,r,a){ve([t,r],"avgPool3dBackprop");for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,d=a.filterWidth,p=a.dilationDepth,v=a.dilationHeight,g=a.dilationWidth,y=a.effectiveFilterDepth,x=a.effectiveFilterHeight,w=a.effectiveFilterWidth,_=y-1-a.padInfo.front,S=w-1-a.padInfo.left,C=x-1-a.padInfo.top,R=Xe(r.shape,"float32"),T=1/(c*f*d),O=this.bufferSync(t),k=0;k<a.batchSize;++k)for(var D=0;D<a.inChannels;++D)for(var N=0;N<a.inDepth;++N)for(var M=0;M<a.inHeight;++M)for(var B=0;B<a.inWidth;++B){for(var z=N-_,ee=M-C,re=B-S,te=0,U=0;U<y;U+=p){var H=(z+U)/i;if(!(H<0||H>=a.outDepth||Math.floor(H)!==H))for(var $=0;$<x;$+=v){var Y=(ee+$)/o;if(!(Y<0||Y>=a.outHeight||Math.floor(Y)!==Y))for(var F=0;F<w;F+=g){var Q=(re+F)/u;Q<0||Q>=a.outWidth||Math.floor(Q)!==Q||(te+=O.get(k,H,Y,Q,D))}}}R.set(te*T,k,N,M,B,D)}return R.toTensor()},e.prototype.maxPool3d=function(t,r){return ve(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,r){for(var a=Xe(r.outShape,"int32"),i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,v=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,x=r.padInfo.top,w=r.padInfo.left,_=this.bufferSync(t),S=0;S<r.batchSize;++S)for(var C=0;C<r.inChannels;++C)for(var R=0;R<r.outDepth;++R){for(var T=R*i-y,O=T;O<0;)O+=c;for(var k=Math.min(r.inDepth,p+T),D=0;D<r.outHeight;++D){for(var N=D*o-x,M=N;M<0;)M+=f;for(var B=Math.min(r.inHeight,v+N),z=0;z<r.outWidth;++z){for(var ee=z*u-w,re=ee;re<0;)re+=d;for(var te=Math.min(r.inWidth,g+ee),U=Number.NEGATIVE_INFINITY,H=-1,$=O;$<k;$+=c)for(var Y=$-T,F=M;F<B;F+=f)for(var Q=F-N,oe=re;oe<te;oe+=d){var ue=oe-ee,me=_.get(S,$,F,oe,C);me>=U&&(U=me,H=Y*v*g+Q*v+ue)}a.set(H,S,R,D,z,C)}}}return a.toTensor()},e.prototype.maxPool3dBackprop=function(t,r,a,i){ve([r,a],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,i),u=i.strideDepth,c=i.strideHeight,f=i.strideWidth,d=i.dilationDepth,p=i.dilationHeight,v=i.dilationWidth,g=i.effectiveFilterDepth,y=i.effectiveFilterHeight,x=i.effectiveFilterWidth,w=g-1-i.padInfo.front,_=x-1-i.padInfo.left,S=y-1-i.padInfo.top,C=Xe(r.shape,"float32"),R=this.bufferSync(o),T=this.bufferSync(t),O=0;O<i.batchSize;++O)for(var k=0;k<i.inChannels;++k)for(var D=0;D<i.inDepth;++D)for(var N=0;N<i.inHeight;++N)for(var M=0;M<i.inWidth;++M){for(var B=D-w,z=N-S,ee=M-_,re=0,te=0;te<g;te+=d){var U=(B+te)/u;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var H=0;H<y;H+=p){var $=(z+H)/c;if(!($<0||$>=i.outHeight||Math.floor($)!==$))for(var Y=0;Y<x;Y+=v){var F=(ee+Y)/f;if(!(F<0||F>=i.outWidth||Math.floor(F)!==F)){var Q=g*y*x-1-R.get(O,U,$,F,k)===te*y*x+H*x+Y?1:0;Q!==0&&(re+=T.get(O,U,$,F,k)*Q)}}}}C.set(re,O,D,N,M,k)}return C.toTensor()},e.prototype.cast=function(t,r){return AA(t,r,this)},e.prototype.reshape=function(t,r){return Fb(t,r)},e.prototype.avgPool=function(t,r){return ve(t,"avgPool"),this.pool(t,r,"avg").toFloat()},e.prototype.resizeBilinear=function(t,r,a,i){ve(t,"resizeBilinear");for(var o=t.shape,u=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(t.dataId),v=new Float32Array(Ne([u,r,a,d])),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],x=0,w=g[0]/y[0],_=g[1]/y[1],S=0;S<u;S++)for(var C=0;C<r;C++)for(var R=w*C,T=Math.floor(R),O=R-T,k=Math.min(c-1,Math.ceil(R)),D=S*t.strides[0]+T*t.strides[1],N=S*t.strides[0]+k*t.strides[1],M=0;M<a;M++)for(var B=_*M,z=Math.floor(B),ee=B-z,re=Math.min(f-1,Math.ceil(B)),te=D+z*t.strides[2],U=N+z*t.strides[2],H=D+re*t.strides[2],$=N+re*t.strides[2],Y=0;Y<d;Y++){var F=p[te+Y],Q=p[U+Y],oe=F+(p[H+Y]-F)*ee,ue=oe+(Q+(p[$+Y]-Q)*ee-oe)*O;v[x++]=ue}return Vn(v,[u,r,a,d])},e.prototype.resizeBilinearBackprop=function(t,r,a){ve([t,r],"resizeBilinearBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],d=t.shape,p=d[1],v=d[2],g=new Float32Array(o*u*c*f),y=[a&&p>1?u-1:u,a&&v>1?c-1:c],x=[a&&p>1?p-1:p,a&&v>1?v-1:v],w=y[0]/x[0],_=y[1]/x[1],S=this.readSync(t.dataId),C=0,R=0;R<o;R++)for(var T=R*r.strides[0],O=0;O<p;O++)for(var k=O*w,D=Math.floor(k),N=Math.min(Math.ceil(k),u-1),M=T+D*r.strides[1],B=T+N*r.strides[1],z=k-D,ee=1-z,re=0;re<v;re++)for(var te=re*_,U=Math.floor(te),H=Math.min(Math.ceil(te),c-1),$=te-U,Y=1-$,F=M+U*r.strides[2],Q=M+H*r.strides[2],oe=B+U*r.strides[2],ue=B+H*r.strides[2],me=ee*Y,be=ee*$,ye=z*Y,Le=z*$,Ee=0;Ee<f;Ee++){var ze=S[C++];g[F+Ee]+=ze*me,g[Q+Ee]+=ze*be,g[oe+Ee]+=ze*ye,g[ue+Ee]+=ze*Le}return pr(g,[o,c,u,f],r.dtype)},e.prototype.resizeNearestNeighbor=function(t,r,a,i){ve(t,"resizeNearestNeighbor");for(var o=t.shape,u=o[0],c=o[1],f=o[2],d=o[3],p=this.readSync(t.dataId),v=new Float32Array(u*r*a*d),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],x=g[0]/y[0],w=g[1]/y[1],_=0,S=0;S<u;S++)for(var C=S*t.strides[0],R=0;R<r;R++)for(var T=x*R,O=C+Math.min(c-1,i?Math.round(T):Math.floor(T))*t.strides[1],k=0;k<a;k++)for(var D=w*k,N=O+Math.min(f-1,i?Math.round(D):Math.floor(D))*t.strides[2],M=0;M<d;M++){var B=p[N+M];v[_++]=B}return Vn(v,[u,r,a,d],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){ve([t,r],"resizeNearestNeighborBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],d=t.shape,p=d[1],v=d[2],g=new Float32Array(o*u*c*f),y=this.readSync(t.dataId),x=[a&&p>1?u-1:u,a&&v>1?c-1:c],w=[a&&p>1?p-1:p,a&&v>1?v-1:v],_=x[0]/w[0],S=x[1]/w[1],C=1/_,R=1/S,T=2*Math.ceil(C)+2,O=2*Math.ceil(R)+2,k=0;k<o;k++)for(var D=k*r.strides[0],N=0;N<u;N++)for(var M=D+N*r.strides[1],B=Math.floor(N*C),z=Math.floor(B-T/2),ee=0;ee<c;ee++)for(var re=M+ee*r.strides[2],te=Math.floor(ee*R),U=Math.floor(te-O/2),H=0;H<f;H++){for(var $=0,Y=0;Y<T;Y++){var F=Y+z;if(!(F<0||F>=p)){var Q=D+F*t.strides[1],oe=F*_;if(N===Math.min(u-1,a?Math.round(oe):Math.floor(oe)))for(var ue=0;ue<O;ue++){var me=ue+U;if(!(me<0||me>=v)){var be=Q+me*t.strides[2],ye=me*S;ee===Math.min(c-1,a?Math.round(ye):Math.floor(ye))&&($+=y[be+H])}}}}g[re+H]=$}return pr(g,r.shape,r.dtype)},e.prototype.batchNormalization=function(t,r,a,i,o,u){ve([t,r,a,o,u],"batchNorm");for(var c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=this.readSync(a.dataId),p=o?this.readSync(o.dataId):new Float32Array([1]),v=u?this.readSync(u.dataId):new Float32Array([0]),g=new Float32Array(c.length),y=v.length,x=p.length,w=d.length,_=f.length,S=0,C=0,R=0,T=0,O=0;O<c.length;++O)g[O]=v[S++]+(c[O]-f[C++])*p[R++]/Math.sqrt(d[T++]+i),S>=y&&(S=0),C>=_&&(C=0),R>=x&&(R=0),T>=w&&(T=0);return pr(g,t.shape)},e.prototype.localResponseNormalization4D=function(t,r,a,i,o){ve(t,"localResponseNormalization4D");var u=t.shape[3],c=u-1,f=this.readSync(t.dataId),d=t.size,p=new Float32Array(d);function v(w){for(var _=w%u,S=w-_+Math.max(0,_-r),C=w-_+Math.min(_+r,c),R=0;S<=C;S++){var T=f[S];R+=T*T}return R}for(var g=0;g<d;g++){var y=v(g),x=f[g]*Math.pow(a+i*y,-o);p[g]=x}return pr(p,t.shape)},e.prototype.LRNGrad=function(t,r,a,i,o,u,c){ve(t,"LRNGrad");for(var f=t.shape[3],d=this.readSync(t.dataId),p=this.readSync(r.dataId),v=this.readSync(a.dataId),g=new Float32Array(t.size),y=t.size,x=0;x<y;x++){for(var w=x%f,_=x-w+Math.max(0,w-i),S=x-w+Math.min(f,w+i+1),C=0,R=_;R<S;R++)C+=Math.pow(p[R],2);for(C=u*C+o,R=_;R<S;R++){var T=-2*u*c*p[R]*v[x]/C;x===R&&(T+=Math.pow(C,-c)),T*=d[x],g[R]+=T}}return pr(g,t.shape)},e.prototype.multinomial=function(t,r,a,i){ve(t,"multinomial");for(var o=r?t:zi(t),u=o.shape[0],c=o.shape[1],f=Ut([u,a],"int32"),d=this.readSync(f.dataId),p=this.readSync(o.dataId),v=0;v<u;++v){var g=v*c,y=new Float32Array(c-1);y[0]=p[g];for(var x=1;x<y.length;++x)y[x]=y[x-1]+p[g+x];for(var w=Qv(i.toString()),_=v*a,S=0;S<a;++S){var C=w();d[_+S]=y.length;for(var R=0;R<y.length;R++)if(C<y[R]){d[_+S]=R;break}}}return f},e.prototype.oneHot=function(t,r,a,i){ve(t,"oneHot");var o=new Float32Array(t.size*r);o.fill(i);for(var u=this.readSync(t.dataId),c=0;c<t.size;++c)u[c]>=0&&u[c]<r&&(o[c*r+u[c]]=a);return Uo(o,[t.size,r],"int32")},e.prototype.nonMaxSuppression=function(t,r,a,i,o){return ve(t,"nonMaxSuppression"),jx(this.readSync(t.dataId),this.readSync(r.dataId),a,i,o)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,r){for(var a=t.shape[0],i=t.shape[1],o=Xe(t.shape,"float32"),u=Xe(t.shape,"float32"),c=Xr(t).as2D(a,i),f=Va(t).as2D(a,i),d=0;d<a;d++)for(var p=c.slice([d,0],[1,i]),v=f.slice([d,0],[1,i]),g=zn(p,v),y=this.readSync(this.fftImpl(g,r).dataId),x=0;x<i;x++){var w=CC(y,x);o.values[d*i+x]=w.real,u.values[d*i+x]=w.imag}return zn(o.toTensor(),u.toTensor()).as2D(a,i)},e.prototype.fftImpl=function(t,r){var a=t.as1D(),i=a.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(a,i,r).as2D(t.shape[0],t.shape[1]);return r&&(o=zn(Xr(o).div(xe(i)),Va(o).div(xe(i)))),o}var u=this.readSync(t.dataId),c=function(f){for(var d=new Float32Array(f.length/2),p=new Float32Array(f.length/2),v=0;v<f.length;v+=2)d[v/2]=f[v],p[v/2]=f[v+1];return{real:d,imag:p}}(this.fourierTransformByMatmul(u,i,r));return zn(c.real,c.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,r,a){if(r===1)return t;var i=this.readSync(t.dataId),o=r/2,u=function(_){for(var S=Math.ceil(_.length/4),C=new Float32Array(S),R=new Float32Array(S),T=0;T<_.length;T+=4)C[Math.floor(T/4)]=_[T],R[Math.floor(T/4)]=_[T+1];return{real:C,imag:R}}(i),c=zn(u.real,u.imag).as1D(),f=function(_){for(var S=Math.floor(_.length/4),C=new Float32Array(S),R=new Float32Array(S),T=2;T<_.length;T+=4)C[Math.floor(T/4)]=_[T],R[Math.floor(T/4)]=_[T+1];return{real:C,imag:R}}(i),d=zn(f.real,f.imag).as1D();c=this.fftRadix2(c,o,a),d=this.fftRadix2(d,o,a);var p=function(_,S){for(var C=new Float32Array(_/2),R=new Float32Array(_/2),T=0;T<Math.ceil(_/2);T++){var O=(S?2:-2)*Math.PI*(T/_);C[T]=Math.cos(O),R[T]=Math.sin(O)}return{real:C,imag:R}}(r,a),v=zn(p.real,p.imag).mul(d),g=c.add(v),y=c.sub(v),x=Xr(g).concat(Xr(y)),w=Va(g).concat(Va(y));return zn(x,w).as1D()},e.prototype.fourierTransformByMatmul=function(t,r,a){for(var i=new Float32Array(2*r),o=0;o<r;o++){for(var u=0,c=0,f=0;f<r;f++){var d=nU(o*f,r,a),p=CC(t,f);u+=p.real*d.real-p.imag*d.imag,c+=p.real*d.imag+p.imag*d.real}a&&(u/=r,c/=r),tU(i,u,c,o)}return i},e.prototype.depthToSpace=function(t,r,a){L(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),L(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=t.shape[0],o=t.shape[1],u=t.shape[2],c=t.shape[3],f=o*r,d=u*r,p=c/(r*r),v=this.readSync(t.dataId),g=new Float32Array(i*f*d*p),y=0,x=0;x<i;++x)for(var w=0;w<f;++w)for(var _=Math.floor(w/r),S=w%r,C=0;C<d;++C)for(var R=Math.floor(C/r),T=(S*r+C%r)*p,O=0;O<p;++O){var k=O+T+c*(R+u*(_+o*x));g[y++]=v[k]}return pr(g,[i,f,d,p])},e.prototype.broadcastedBinaryOp=function(t,r,a,i){var o=ct(t.shape,r.shape),u=Xe(o,a),c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=Po(t.shape,o),p=Po(r.shape,o),v=u.values;if(d.length+p.length===0)for(var g=0;g<v.length;++g)v[g]=i(c[g%c.length],f[g%f.length]);else{var y=this.bufferSync(t),x=this.bufferSync(r),w=function(_){var S=u.indexToLoc(_),C=S.slice(-t.rank);d.forEach(function(k){return C[k]=0});var R=y.locToIndex(C),T=S.slice(-r.rank);p.forEach(function(k){return T[k]=0});var O=x.locToIndex(T);v[_]=i(c[R],f[O])};for(g=0;g<v.length;++g)w(g)}return u.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,r,a){var i=ct(t.shape,r.shape),o=Xe(i,"float32"),u=Xe(i,"float32"),c=this.readSync(t.dataId),f=this.readSync(r.dataId),d=Po(t.shape,i),p=Po(r.shape,i),v=o.values,g=u.values;if(d.length+p.length===0)for(var y=0;y<v.length;y++){var x=y%c.length,w=y%f.length,_=a(c[2*x],c[2*x+1],f[2*w],f[2*w+1]);v[y]=_.real,g[y]=_.imag}else{var S=this.bufferSync(this.data.get(t.dataId).complexTensors.real),C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),R=function(T){var O=o.indexToLoc(T),k=O.slice(-t.rank);d.forEach(function(z){return k[z]=0});var D=S.locToIndex(k),N=O.slice(-r.rank);p.forEach(function(z){return N[z]=0});var M=C.locToIndex(N),B=a(c[2*D],c[2*D+1],f[2*M],f[2*M+1]);v[T]=B.real,g[T]=B.imag};for(y=0;y<v.length;y++)R(y)}return this.complex(o.toTensor(),u.toTensor())},e.prototype.split=function(t,r,a){return NA(t,r,a)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,r,a,i,o,u){for(var c=t.shape,f=c[0],d=c[1],p=c[2],v=c[3],g=r.shape[0],y=i[0],x=i[1],w=Xe([g,y,x,v],"float32"),_=this.readSync(r.dataId),S=this.readSync(a.dataId),C=this.readSync(t.dataId),R=t.strides,T=w.strides,O=0;O<g;O++){var k=4*O,D=_[k],N=_[k+1],M=_[k+2],B=_[k+3],z=S[O];if(!(z>=f))for(var ee=y>1?(M-D)*(d-1)/(y-1):0,re=x>1?(B-N)*(p-1)/(x-1):0,te=0;te<y;te++){var U=y>1?D*(d-1)+te*ee:.5*(D+M)*(d-1);if(U<0||U>d-1)for(var H=0;H<x;H++)for(var $=0;$<v;$++){var Y=$+H*T[2]+te*T[1]+O*T[0];w.values[Y]=u}else if(o==="bilinear"){var F=Math.floor(U),Q=Math.ceil(U),oe=U-F;for(H=0;H<x;H++)if((qe=x>1?N*(p-1)+H*re:.5*(N+B)*(p-1))<0||qe>p-1)for($=0;$<v;$++)Y=$+H*T[2]+te*T[1]+O*T[0],w.values[Y]=u;else{var ue=Math.floor(qe),me=Math.ceil(qe),be=qe-ue;for($=0;$<v;$++){var ye=C[Y=$+ue*R[2]+F*R[1]+z*R[0]],Le=C[Y=$+me*R[2]+F*R[1]+z*R[0]],Ee=C[Y=$+ue*R[2]+Q*R[1]+z*R[0]],ze=ye+(Le-ye)*be,gt=Ee+(C[Y=$+me*R[2]+Q*R[1]+z*R[0]]-Ee)*be;Y=$+H*T[2]+te*T[1]+O*T[0],w.values[Y]=ze+(gt-ze)*oe}}}else for(H=0;H<x;++H){var qe;if((qe=x>1?N*(p-1)+H*re:.5*(N+B)*(p-1))<0||qe>p-1)for($=0;$<v;$++)Y=$+H*T[2]+te*T[1]+O*T[0],w.values[Y]=u;else{var Ye=Math.round(qe),at=Math.round(U);for($=0;$<v;$++){var xt=$+Ye*R[2]+at*R[1]+z*R[0],It=$+H*T[2]+te*T[1]+O*T[0];w.values[It]=C[xt]}}}}}return w.toTensor()},e.prototype.sparseToDense=function(t,r,a,i){var o=xv(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.sliceSize,d=o.strides,p=o.outputSize;return this.scatter(t,r,a,p,f,c,u,d,i,!1)},e.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=_A(t,r),u=o[0],c=o[1],f=o[2],d=o[3];if(c===0)return Vn([],u,t.dtype);for(var p=new oh([c,f],t.dtype),v=this.readSync(r.dataId),g=this.readSync(t.dataId),y=0;y<c;y++){for(var x=[],w=0,_=0;_<i;_++){var S=v[y*i+_];w+=S*d[_],x.push(S)}if(w<0||w>=t.size/f)throw new Error("Invalid indices: "+x+" does not index into "+t.shape);for(var C=0;C<f;C++)p.values[y*f+C]=g[w*f+C]}return p.toTensor().reshape(u)},e.prototype.scatterND=function(t,r,a){var i=xv(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,d=i.outputSize,p=xe(0);return this.scatter(t,r,a,d,c,u,o,f,p,!0)},e.prototype.fill=function(t,r,a){var i=cv(a=a||Ah(r),Ne(t));return i.fill(r),G.makeTensor(i,t,a,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var r=cv(t.dtype,Ne(t.shape));return this.makeOutput(r,t.shape,t.dtype)},e.prototype.linspace=function(t,r,a){return kA(t,r,a)},e.prototype.scatter=function(t,r,a,i,o,u,c,f,d,p){var v=[i/o,o],g=this.readSync(t.dataId),y=this.readSync(r.dataId);if(i===0)return Vn([],a,r.dtype);var x=new oh(v,r.dtype);x.values.fill(this.readSync(d.dataId)[0]);for(var w=0;w<u;w++){for(var _=[],S=0,C=0;C<c;C++){var R=g[w*c+C];_.push(R),S+=R*f[C]}if(S<0||S>=i/o)throw new Error("Invalid indices: "+_+" does not index into "+a);for(var T=0;T<o;T++)p?x.values[S*o+T]+=y[w*o+T]:x.values[S*o+T]=r.rank===0?y[0]:y[w*o+T]}return x.toTensor().reshape(a)},e}(TA);G.registerBackend("cpu",function(){return new _q},1);for(var m0=0,QC=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p=u.softNmsSigma,v=t;ve(i,"NonMaxSuppressionWithScore");var g=qx(v.data.get(i.dataId).values,v.data.get(o.dataId).values,c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t;ve(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),u=0;u<i.length;++u){var c=i[u];o[u]=c*c}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:lh,backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,o=t;ve([a,i],lh);var u=o.data.get(a.dataId).values,c=o.data.get(i.dataId).values,f=function(v,g,y,x,w,_){var S=ct(v,g),C=S.length,R=Ga(S),T=ih(w,Ne(S)),O=v.length,k=g.length,D=Ga(v),N=Ga(g),M=Po(v,S),B=Po(g,S);if(M.length+B.length===0)for(var z=0;z<T.length;++z)T[z]=_(y[z%y.length],x[z%x.length]);else{var ee=function(re){var te=NB(re,C,R),U=te.slice(-O);M.forEach(function(F){return U[F]=0});var H=mC(U,O,D),$=te.slice(-k);B.forEach(function(F){return $[F]=0});var Y=mC($,k,N);T[re]=_(y[H],x[Y])};for(z=0;z<T.length;++z)ee(z)}return[T,S]}(a.shape,i.shape,u,c,a.dtype,function(v,g){var y=v-g;return y*y}),d=f[0],p=f[1];return{dataId:o.write(d,p,a.dtype),shape:p,dtype:a.dtype}}}];m0<QC.length;m0++)tA(QC[m0]);var Xu,Eq=function(n){this.variableNames=["A"];var e=Kn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Sq=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Kn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var g0=0,$C=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=c[0],d=c[1],p=[d,f],v=[d,f,i];(u||o)&&(Xu==null&&(Xu=document.createElement("canvas").getContext("2d")),Xu.canvas.width=f,Xu.canvas.height=d,Xu.drawImage(a,0,0,f,d),a=Xu.canvas);var g=t.makeTensorInfo(p,"int32");t.texData.get(g.dataId).usage=kr.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(g.dataId),a);var y=ce().getBool("WEBGL_PACK")?new Sq(v):new Eq(v),x=t.runWebGLProgram(y,[g],"int32");return t.disposeData(g.dataId),x}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs;pv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=e,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,d=u.scoreThreshold,p=u.softNmsSigma,v=t,g=qx(v.readSync(i.dataId),v.readSync(o.dataId),c,f,d,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t,i=new et(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:lh,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,i=r.b,o=t,u=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ci("return (a - b) * (a - b);",a.shape,i.shape):new Xt("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(u,[a,i])}}];g0<$C.length;g0++)tA($C[g0]);for(var y0=0,KC=[{kernelName:"Square",gradFunc:function(n,e){var t=e[0];return{x:function(){return n.mul(t.toFloat().mul(2))}}}},{kernelName:lh,gradFunc:function(n,e){var t=e[0],r=e[1],a=xe(2);return{a:function(){return Yn(n,Yn(a,wn(t,r)))},b:function(){return Yn(n,Yn(a,wn(r,t)))}}}}];y0<KC.length;y0++)wB(KC[y0]);var Cq=function(){function n(){}return n.prototype.fetch=function(e,t){return fetch(e,t)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},n}();ce().get("IS_BROWSER")&&ce().setPlatform("browser",new Cq);var b0,Rq=function(){return require("node-fetch")},Tq=function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(e,t){return ce().global.fetch!=null?ce().global.fetch(e,t):(b0==null&&(b0=Rq()),b0(e,t))},n.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},n}();ce().get("IS_NODE")&&ce().setPlatform("node",new Tq);var Bb={float32:4,int32:4,uint16:2,uint8:1,bool:1},Tv=4;function Sk(n,e){for(var t={},r=0,a=function(u){var c=u.name,f=u.dtype,d=u.shape,p=Ne(d),v=void 0;if("quantization"in u){var g=u.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+u.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=Bb[g.dtype],x=n.slice(r,r+p*y),w=g.dtype==="uint8"?new Uint8Array(x):new Uint16Array(x);if(f==="float32")v=Float32Array.from(w,function(O){return O*g.scale+g.min});else{if(f!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=Int32Array.from(w,function(O){return Math.round(O*g.scale+g.min)})}r+=p*y}else if(f==="string"){var _=Ne(u.shape);v=[];for(var S=0;S<_;S++){var C=new Uint32Array(n.slice(r,r+Tv))[0];r+=Tv;var R=new Uint8Array(n.slice(r,r+C));v.push(R),r+=C}}else{var T=Bb[f];if(x=n.slice(r,r+p*T),f==="float32")v=new Float32Array(x);else if(f==="int32")v=new Int32Array(x);else{if(f!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+f);v=new Uint8Array(x)}r+=p*T}t[c]=Vn(v,d,f)},i=0,o=e;i<o.length;i++)a(o[i]);return t}function Oq(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var e=0,t=[];n.forEach(function(i){if(e+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(e),a=0;return t.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var zb=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function XC(n){return zb?Buffer.byteLength(n):new Blob([n]).size}function u1(n){var e=0;n.forEach(function(a){e+=a.byteLength});var t=new Uint8Array(e),r=0;return n.forEach(function(a){t.set(new Uint8Array(a),r),r+=a.byteLength}),t.buffer}function YC(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var e=n.split("/");return e[e.length-1]}function Ph(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:XC(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:XC(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var Dr=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(e){n.getInstance().saveRouters.push(e)},n.registerLoadRouter=function(e){n.getInstance().loadRouters.push(e)},n.getSaveHandlers=function(e){return n.getHandlers(e,"save")},n.getLoadHandlers=function(e,t){return n.getHandlers(e,"load",t)},n.getHandlers=function(e,t,r){var a=[];return(t==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(i){var o=i(e,r);o!==null&&a.push(o)}),a},n}(),bl="://",Vo=function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(e,t){L(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(bl)&&(e=e.slice(0,e.indexOf(bl))),L(e.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();L(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=t},n.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function Mp(n){if(n.indexOf(bl)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Vo.getSchemes().join(","));return{scheme:n.split(bl)[0],path:n.split(bl)[1]}}function ZC(n,e,t){return t===void 0&&(t=!1),Ae(this,void 0,void 0,function(){var r,a,i,o,u,c,f,d,p;return ke(this,function(v){switch(v.label){case 0:return L(n!==e,function(){return"Old path and new path are the same: '"+n+"'"}),L((r=Dr.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),L(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),a=r[0],L((i=Dr.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),L(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=i[0],u=Mp(n).scheme,c=Mp(n).path,f=u===Mp(n).scheme,[4,a.load()];case 1:return d=v.sent(),t&&f?[4,Vo.getManager(u).removeModel(c)]:[3,3];case 2:v.sent(),v.label=3;case 3:return[4,o.save(d)];case 4:return p=v.sent(),!t||f?[3,6]:[4,Vo.getManager(u).removeModel(c)];case 5:v.sent(),v.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var As="models_store",Lo="model_info_store";function Ck(){if(!ce().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Ub(n){var e=n.result;e.createObjectStore(As,{keyPath:"modelPath"}),e.createObjectStore(Lo,{keyPath:"modelPath"})}var xl=function(){function n(e){if(this.indexedDB=Ck(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return n.prototype.save=function(e){return Ae(this,void 0,void 0,function(){return ke(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},n.prototype.load=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(e,t){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Ub(o)},o.onsuccess=function(){var u=o.result;if(t==null){var c=u.transaction(As,"readonly"),f=c.objectStore(As).get(r.modelPath);f.onsuccess=function(){if(f.result==null)return u.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(f.result.modelArtifacts)},f.onerror=function(x){return u.close(),i(f.error)},c.oncomplete=function(){return u.close()}}else{var d,p=Ph(t),v=u.transaction(Lo,"readwrite"),g=v.objectStore(Lo),y=g.put({modelPath:r.modelPath,modelArtifactsInfo:p});y.onsuccess=function(){var x=(d=u.transaction(As,"readwrite")).objectStore(As).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:p});x.onsuccess=function(){return a({modelArtifactsInfo:p})},x.onerror=function(w){var _=(g=v.objectStore(Lo)).delete(r.modelPath);_.onsuccess=function(){return u.close(),i(x.error)},_.onerror=function(S){return u.close(),i(x.error)}}},y.onerror=function(x){return u.close(),i(y.error)},v.oncomplete=function(){d==null?u.close():d.oncomplete=function(){return u.close()}}}},o.onerror=function(u){return i(o.error)}})},n.URL_SCHEME="indexeddb://",n}(),JC=function(n){return ce().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(xl.URL_SCHEME)?(e=n.slice(xl.URL_SCHEME.length),new xl(e)):null;var e};Dr.registerSaveRouter(JC),Dr.registerLoadRouter(JC);var Aq=function(){function n(){this.indexedDB=Ck()}return n.prototype.listModels=function(){return Ae(this,void 0,void 0,function(){var e=this;return ke(this,function(t){return[2,new Promise(function(r,a){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Ub(i)},i.onsuccess=function(){var o=i.result,u=o.transaction(Lo,"readonly"),c=u.objectStore(Lo).getAll();c.onsuccess=function(){for(var f={},d=0,p=c.result;d<p.length;d++){var v=p[d];f[v.modelPath]=v.modelArtifactsInfo}r(f)},c.onerror=function(f){return o.close(),a(c.error)},u.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}})]})})},n.prototype.removeModel=function(e){return Ae(this,void 0,void 0,function(){var t=this;return ke(this,function(r){var a;return e=(a=e).startsWith(xl.URL_SCHEME)?a.slice(xl.URL_SCHEME.length):a,[2,new Promise(function(i,o){var u=t.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return Ub(u)},u.onsuccess=function(){var c,f=u.result,d=f.transaction(Lo,"readwrite"),p=d.objectStore(Lo),v=p.get(e);v.onsuccess=function(){if(v.result==null)return f.close(),o(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var g=p.delete(e),y=function(){var x=(c=f.transaction(As,"readwrite")).objectStore(As).delete(e);x.onsuccess=function(){return i(v.result.modelArtifactsInfo)},x.onerror=function(w){return o(v.error)}};g.onsuccess=y,g.onerror=function(x){return y(),f.close(),o(v.error)}},v.onerror=function(g){return f.close(),o(v.error)},d.oncomplete=function(){c==null?f.close():c.oncomplete=function(){return f.close()}}},u.onerror=function(c){return o(u.error)}})]})})},n}();if(ce().getBool("IS_BROWSER"))try{Vo.registerManager(xl.URL_SCHEME,new Aq)}catch{}var ki="/",al="tensorflowjs_models",Rk="info",kq="model_topology",Dq="weight_specs",Nq="weight_data",Iq="model_metadata";function Tk(n){return{info:[al,n,Rk].join(ki),topology:[al,n,kq].join(ki),weightSpecs:[al,n,Dq].join(ki),weightData:[al,n,Nq].join(ki),modelMetadata:[al,n,Iq].join(ki)}}function Mq(n){var e=n.split(ki);if(e.length<3)throw new Error("Invalid key format: "+n);return e.slice(1,e.length-1).join(ki)}var wl=function(){function n(e){if(!ce().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Tk(this.modelPath)}return n.prototype.save=function(e){return Ae(this,void 0,void 0,function(){var t,r,a;return ke(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Ph(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(zb)return Buffer.from(o).toString("base64");for(var u=new Uint8Array(o),c="",f=0,d=u.length;f<d;f++)c+=String.fromCharCode(u[f]);return btoa(c)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return Ae(this,void 0,void 0,function(){var e,t,r,a,i,o,u;return ke(this,function(c){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),(u=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(f){if(zb){var d=Buffer.from(f,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var p=atob(f),v=new Uint8Array(p.length),g=0;g<p.length;++g)v.set([p.charCodeAt(g)],g);return v.buffer}(u),[2,t]})})},n.URL_SCHEME="localstorage://",n}(),eR=function(n){return ce().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(wl.URL_SCHEME)?(e=n.slice(wl.URL_SCHEME.length),new wl(e)):null;var e};Dr.registerSaveRouter(eR),Dr.registerLoadRouter(eR);var Fq=function(){function n(){L(ce().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),L(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return Ae(this,void 0,void 0,function(){var e,t,r,a,i,o;return ke(this,function(u){for(e={},t=al+ki,r=ki+Rk,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(t)&&i.endsWith(r)&&(o=Mq(i),e[o]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},n.prototype.removeModel=function(e){return Ae(this,void 0,void 0,function(){var t,r;return ke(this,function(a){var i;if(e=(i=e).startsWith(wl.URL_SCHEME)?i.slice(wl.URL_SCHEME.length):i,t=Tk(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},n}();if(ce().getBool("IS_BROWSER"))try{Vo.registerManager(wl.URL_SCHEME,new Fq)}catch{}var Pq="model",Lq=".json",Bq=".weights.bin";function tR(n){return new Promise(function(e){return setTimeout(e)}).then(n)}var x0=function(){function n(e){if(!ce().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),e!=null&&e.length!==0||(e=Pq),this.modelTopologyFileName=e+Lq,this.weightDataFileName=e+Bq}return n.prototype.save=function(e){return Ae(this,void 0,void 0,function(){var t,r,a,i,o,u;return ke(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,tR(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),e.weightData==null?[3,4]:((u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,u.href=t,[4,tR(function(){return u.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Ph(e)}]}})})},n.URL_SCHEME="downloads://",n}(),zq=function(){function n(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return n.prototype.load=function(){return Ae(this,void 0,void 0,function(){var e,t,r=this;return ke(this,function(a){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(i,o){var u=new FileReader;u.onload=function(c){var f=JSON.parse(c.target.result),d=f.modelTopology;if(d!=null){t.length===0&&i({modelTopology:d});var p=f.weightsManifest;if(p!=null){var v;try{v=r.checkManifestAndWeightFiles(p,t)}catch(w){return void o(w)}var g=[],y=[],x=[];p.forEach(function(w){w.paths.forEach(function(_){y.push(_),x.push(null)}),g.push.apply(g,w.weights)}),p.forEach(function(w){w.paths.forEach(function(_){var S=new FileReader;S.onload=function(C){var R=C.target.result,T=y.indexOf(_);x[T]=R,x.indexOf(null)===-1&&i({modelTopology:d,weightSpecs:g,weightData:u1(x),format:f.format,generatedBy:f.generatedBy,convertedBy:f.convertedBy,userDefinedMetadata:f.userDefinedMetadata})},S.onerror=function(C){return o("Failed to weights data from file of path '"+_+"'.")},S.readAsArrayBuffer(v[_])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},u.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},u.readAsText(e)})]})})},n.prototype.checkManifestAndWeightFiles=function(e,t){for(var r=[],a=t.map(function(c){return YC(c.name)}),i={},o=0,u=e;o<u.length;o++)u[o].paths.forEach(function(c){var f=YC(c);if(r.indexOf(f)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+f+"'");if(r.push(f),a.indexOf(f)===-1)throw new Error("Weight file with basename '"+f+"' is not provided.");i[c]=t[a.indexOf(f)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return i},n}();function nR(n,e,t,r){(function(i){L(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(n),function(i,o){L(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),L(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),L(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(t=t??0,r=r??1);var a=0;return Promise.all(n.map(function(i){return i.then(function(o){var u=t+ ++a/n.length*(r-t);return e(u),o}),i}))}function Ok(n,e){return Ae(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d;return ke(this,function(p){switch(p.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?ce().platform.fetch:e.fetchFunc,r=n.map(function(v){return t(v,e.requestInit,{isBinary:!0})}),a=0,i=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=p.sent(),[3,4];case 2:return[4,nR(r,e.onProgress,a,i)];case 3:o=p.sent(),p.label=4;case 4:return u=o.map(function(v){return v.arrayBuffer()}),c=.5,f=1,e.onProgress!=null?[3,6]:[4,Promise.all(u)];case 5:return d=p.sent(),[3,8];case 6:return[4,nR(u,e.onProgress,c,f)];case 7:d=p.sent(),p.label=8;case 8:return[2,d]}})})}function rR(n){var e=this;return function(t,r,a){return r===void 0&&(r=""),Ae(e,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y;return ke(this,function(x){switch(x.label){case 0:if(i=t.map(function(){return!1}),o={},u=a!=null?a.map(function(){return!1}):[],c=[],t.forEach(function(w,_){var S=0;w.weights.forEach(function(C){var R="quantization"in C?C.quantization.dtype:C.dtype,T=Bb[R]*Ne(C.shape),O=function(){i[_]=!0,o[_]==null&&(o[_]=[]),o[_].push({manifestEntry:C,groupOffset:S,sizeBytes:T})};a!=null?a.forEach(function(k,D){k===C.name&&(O(),u[D]=!0)}):O(),c.push(C.name),S+=T})}),!u.every(function(w){return w}))throw f=a.filter(function(w,_){return!u[_]}),new Error("Could not find weights in manifest with names: "+f.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=i.reduce(function(w,_,S){return _&&w.push(S),w},[]),p=[],d.forEach(function(w){t[w].paths.forEach(function(_){var S=r+(r.endsWith("/")?"":"/")+_;p.push(S)})}),[4,n(p)];case 1:return v=x.sent(),g={},y=0,d.forEach(function(w){for(var _=t[w].paths.length,S=0,C=0;C<_;C++)S+=v[y+C].byteLength;for(var R=new ArrayBuffer(S),T=new Uint8Array(R),O=0,k=0;k<_;k++){var D=new Uint8Array(v[y+k]);T.set(D,O),O+=D.byteLength}o[w].forEach(function(N){var M=Sk(R.slice(N.groupOffset,N.groupOffset+N.sizeBytes),[N.manifestEntry]);for(var B in M)g[B]=M[B]}),y+=_}),[2,g]}})})}}Dr.registerSaveRouter(function(n){return ce().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(x0.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new x0(e)}(n.slice(x0.URL_SCHEME.length)):null});var Ak=function(){function n(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(L(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=ce().platform.fetch,L(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&L(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return n.prototype.save=function(e){return Ae(this,void 0,void 0,function(){var t,r,a,i;return ke(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Ph(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},n.prototype.load=function(){return Ae(this,void 0,void 0,function(){var e,t,r,a,i,o,u,c,f,d,p,v;return ke(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,e.json()];case 3:return t=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=t.modelTopology,i=t.weightsManifest,o=t.generatedBy,u=t.convertedBy,c=t.format,f=t.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:v=g.sent(),d=v[0],p=v[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:d,weightData:p,userDefinedMetadata:f,generatedBy:o,convertedBy:u,format:c}]}})})},n.prototype.loadWeights=function(e){return Ae(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v;return ke(this,function(g){switch(g.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(y){var x=y.lastIndexOf("/"),w=y.lastIndexOf("?"),_=y.substring(0,x),S=w>x?y.substring(w):"";return[_+"/",S]}(t),a=r[0],i=r[1],o=this.weightPathPrefix||a,u=[],c=0,f=e;c<f.length;c++)d=f[c],u.push.apply(u,d.weights);return p=[],e.forEach(function(y){y.paths.forEach(function(x){p.push(o+x+i)})}),[4,Ok(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return v=g.sent(),[2,[u,u1(v)]]}})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function Vb(n){return n.match(Ak.URL_SCHEME_REGEX)!=null}var aR=function(n,e){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(t){return Vb(t)}):Vb(n))?jb(n,{onProgress:e}):null};function jb(n,e){return new Ak(n,e)}Dr.registerSaveRouter(aR),Dr.registerLoadRouter(aR);var w0=function(){function n(e){this.modelArtifacts=e}return n.prototype.load=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(e){return[2,this.modelArtifacts]})})},n}(),Uq=function(){function n(e){this.saveHandler=e}return n.prototype.save=function(e){return Ae(this,void 0,void 0,function(){return ke(this,function(t){return[2,this.saveHandler(e)]})})},n}(),kk=Object.freeze({browserFiles:function(n){return new zq(n)},browserHTTPRequest:function(n,e){return jb(n,e)},concatenateArrayBuffers:u1,decodeWeights:Sk,encodeWeights:function(n,e){return Ae(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return ke(this,function(c){switch(c.label){case 0:for(t=[],r=[],a=Array.isArray(n)?n.map(function(f){return f.name}):Object.keys(n),i=function(f){var d=a[f],p=Array.isArray(n)?n[f].tensor:n[d];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+p.dtype);var v={name:d,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var g=new Promise(function(y){return Ae(u,void 0,void 0,function(){var x,w,_,S,C,R,T;return ke(this,function(O){switch(O.label){case 0:return[4,p.bytes()];case 1:for(x=O.sent(),w=x.reduce(function(k,D){return k+D.length},0)+Tv*x.length,_=new Uint8Array(w),S=0,C=0;C<x.length;C++)R=x[C],T=new Uint8Array(new Uint32Array([R.length]).buffer),_.set(T,S),S+=Tv,_.set(R,S),S+=R.length;return y(_),[2]}})})});r.push(g)}else r.push(p.data());e!=null&&(v.group=e),t.push(v)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:Oq(c.sent()),specs:t}]}})})},fromMemory:function(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new w0(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new w0({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new w0({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))},getLoadHandlers:function(n,e){return Dr.getLoadHandlers(n,e)},getModelArtifactsInfoForJSON:Ph,getSaveHandlers:function(n){return Dr.getSaveHandlers(n)},http:jb,isHTTPScheme:Vb,loadWeights:function(n,e,t,r){return e===void 0&&(e=""),Ae(this,void 0,void 0,function(){return ke(this,function(a){return[2,rR(function(i){return Ok(i,{requestInit:r})})(n,e,t)]})})},registerLoadRouter:function(n){return Dr.registerLoadRouter(n)},registerSaveRouter:function(n){return Dr.registerSaveRouter(n)},weightsLoaderFactory:rR,withSaveHandler:function(n){return new Uq(n)},copyModel:function(n,e){return Ae(this,void 0,void 0,function(){return ke(this,function(t){return[2,ZC(n,e,!1)]})})},listModels:function(){return Ae(this,void 0,void 0,function(){var n,e,t,r,a,i,o;return ke(this,function(u){switch(u.label){case 0:n=Vo.getSchemes(),e={},t=0,r=n,u.label=1;case 1:return t<r.length?(a=r[t],[4,Vo.getManager(a).listModels()]):[3,4];case 2:for(o in i=u.sent())e[a+bl+o]=i[o];u.label=3;case 3:return t++,[3,1];case 4:return[2,e]}})})},moveModel:function(n,e){return Ae(this,void 0,void 0,function(){return ke(this,function(t){return[2,ZC(n,e,!0)]})})},removeModel:function(n){return Ae(this,void 0,void 0,function(){var e;return ke(this,function(t){return e=Mp(n),[2,Vo.getManager(e.scheme).removeModel(e.path)]})})}}),Yu;q({confusionMatrix_:function(n,e,t){var r=P(n,"labels","confusionMatrix"),a=P(e,"predictions","confusionMatrix");L(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),L(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),L(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),L(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),L(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var i=Ib(r.asType("int32"),t),o=Ib(a.asType("int32"),t);return i.transpose().matMul(o).asType("int32")}});var Vq=q({fromPixels_:function(n,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,a=!1,i=!1,o=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)i=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);o=!0}if(a&&a&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(eA("FromPixels",G.backendName)!=null)return G.runKernel("FromPixels",{pixels:n},{numChannels:e});var u,c,f=a?[n.videoWidth,n.videoHeight]:[n.width,n.height],d=f[0],p=f[1];if(o?u=n.getContext("2d").getImageData(0,0,d,p).data:r||t?u=n.data:(i||a)&&(Yu==null&&(Yu=document.createElement("canvas").getContext("2d")),Yu.canvas.width=d,Yu.canvas.height=p,Yu.drawImage(n,0,0,d,p),u=Yu.getImageData(0,0,d,p).data),e===4)c=new Int32Array(u);else{var v=d*p;c=new Int32Array(v*e);for(var g=0;g<v;g++)for(var y=0;y<e;++y)c[g*e+y]=u[4*g+y]}return Lx(c,[p,d,e],"int32")}}),l1=Object.freeze({toPixels:function(n,e){return Ae(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,k,D;return ke(this,function(N){switch(N.label){case 0:if(t=P(n,"img","toPixels"),n instanceof Wt||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),a=r[0],i=r[1],(o=t.rank===2?1:t.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,t.data()];case 1:return u=N.sent(),c=t.min(),f=t.max(),[4,Promise.all([c.data(),f.data()])];case 2:if(d=N.sent(),p=d[0],v=d[1],g=p[0],y=v[0],c.dispose(),f.dispose(),t.dtype==="float32"){if(g<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+y+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(g<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+y+"].")}for(x=t.dtype==="float32"?255:1,w=new Uint8ClampedArray(i*a*4),_=0;_<a*i;++_)S=void 0,C=void 0,R=void 0,T=void 0,o===1?(S=u[_]*x,C=u[_]*x,R=u[_]*x,T=255):o===3?(S=u[3*_]*x,C=u[3*_+1]*x,R=u[3*_+2]*x,T=255):o===4&&(S=u[4*_]*x,C=u[4*_+1]*x,R=u[4*_+2]*x,T=u[4*_+3]*x),w[(O=4*_)+0]=Math.round(S),w[O+1]=Math.round(C),w[O+2]=Math.round(R),w[O+3]=Math.round(T);return e!=null&&(e.width=i,e.height=a,k=e.getContext("2d"),D=new ImageData(w,i,a),k.putImageData(D,0,0)),t!==n&&t.dispose(),[2,w]}})})},fromPixels:Vq}),jq=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(e,t){return new e(t)},n}(),qq=function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(e){n.getMap().classNameMap[e.className]=[e,e.fromConfig]},n}();function au(n){L(n.className!=null,function(){return"Class being registered does not have the static className property defined."}),L(typeof n.className=="string",function(){return"className is required to be a string, but got type "+typeof n.className}),L(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),qq.register(n)}var iu=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return _a(e,n),e.prototype.minimize=function(t,r,a){r===void 0&&(r=!1);var i=this.computeGradients(t,a),o=i.value,u=i.grads;if(a!=null){var c=a.map(function(f){return{name:f.name,tensor:u[f.name]}});this.applyGradients(c)}else this.applyGradients(u);return gr(u),r?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,r){return Jz(t,r)},e.prototype.dispose=function(){this.iterations_!=null&&gr(this.iterations_)},e.prototype.saveIterations=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:xe(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return ke(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return Ae(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,t.slice(1)]}})})},e}(jq);Object.defineProperty(iu,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var Wq=function(n){function e(t,r,a){a===void 0&&(a=null);var i=n.call(this)||this;return i.learningRate=t,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=G.backend.epsilon()),i}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=G.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:Te(function(){return mt(o).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:Te(function(){return mt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable,f=r.accumulatedUpdates[i].variable;Te(function(){var d=c.mul(r.rho).add(u.square().mul(1-r.rho)),p=f.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(u),v=f.mul(r.rho).add(p.square().mul(1-r.rho));c.assign(d),f.assign(v);var g=p.mul(-r.learningRate).add(o);o.assign(g)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(gr(this.accumulatedGrads.map(function(t){return t.variable})),gr(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var t;return ke(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(iu);au(Wq);var Hq=function(n){function e(t,r){r===void 0&&(r=.1);var a=n.call(this)||this;return a.learningRate=t,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=G.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:Te(function(){return Qa(o.shape,r.initialAccumulatorValue).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable;Te(function(){var f=c.add(u.square());c.assign(f);var d=u.div(f.add(G.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&gr(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return ke(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(iu);au(Hq);var Gq=function(n){function e(t,r,a,i){i===void 0&&(i=null);var o=n.call(this)||this;return o.learningRate=t,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Te(function(){o.accBeta1=xe(r).variable(),o.accBeta2=xe(a).variable()}),i==null&&(o.epsilon=G.backend.epsilon()),o}return _a(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Te(function(){var i=wn(1,r.accBeta1),o=wn(1,r.accBeta2);a.forEach(function(u,c){var f=G.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:Te(function(){return mt(f).variable(!1)})}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:u+"/v",variable:Te(function(){return mt(f).variable(!1)})});var d=Array.isArray(t)?t[c].tensor:t[u];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedSecondMoment[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2).add(d.square().mul(1-r.beta2)),x=g.div(i),w=y.div(o);p.assign(g),v.assign(y);var _=x.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(f);f.assign(_)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&gr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&gr(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var t;return ke(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){var r,a=this;return ke(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),Te(function(){a.accBeta1.assign(Cv(a.beta1,a.iterations_+1)),a.accBeta2.assign(Cv(a.beta2,a.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(iu);au(Gq);var Qq=function(n){function e(t,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var u=n.call(this)||this;return u.learningRate=t,u.beta1=r,u.beta2=a,u.epsilon=i,u.decay=o,u.accumulatedFirstMoment=[],u.accumulatedWeightedInfNorm=[],Te(function(){u.iteration=xe(0).variable(),u.accBeta1=xe(r).variable()}),i==null&&(u.epsilon=G.backend.epsilon()),u}return _a(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Te(function(){var i=wn(1,r.accBeta1),o=fa(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(u,c){var f=G.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:mt(f).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:u+"/v",variable:mt(f).variable(!1)});var d=Array.isArray(t)?t[c].tensor:t[u];if(d!=null){var p=r.accumulatedFirstMoment[c].variable,v=r.accumulatedWeightedInfNorm[c].variable,g=p.mul(r.beta1).add(d.mul(1-r.beta1)),y=v.mul(r.beta2),x=d.abs(),w=y.maximum(x);p.assign(g),v.assign(w);var _=o.div(i).mul(g.div(w.add(r.epsilon))).add(f);f.assign(_)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&gr(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&gr(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return ke(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(iu);au(Qq);var Dk=function(n){function e(t){var r=n.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=Array.isArray(t)?t[i].tensor:t[a];if(o!=null){var u=G.registeredVariables[a];Te(function(){var c=r.c.mul(o).add(u);u.assign(c)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=dz(xe(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return ke(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,r){return new t(r.learningRate)},e.className="SGD",e}(iu);au(Dk);var $q=function(n){function e(t,r,a){a===void 0&&(a=!1);var i=n.call(this,t)||this;return i.learningRate=t,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=xe(i.momentum),i}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=G.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:Te(function(){return mt(o).variable(!1)})});var u=r.accumulations[i].variable,c=Array.isArray(t)?t[i].tensor:t[a];c!=null&&Te(function(){var f,d=r.m.mul(u).add(c);f=r.useNesterov?r.c.mul(c.add(d.mul(r.m))).add(o):r.c.mul(d).add(o),u.assign(d),o.assign(f)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&gr(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){return ke(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){return ke(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(Dk);au($q);var Kq=function(n){function e(t,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var u=n.call(this)||this;if(u.learningRate=t,u.decay=r,u.momentum=a,u.epsilon=i,u.accumulatedMeanSquares=[],u.accumulatedMoments=[],u.accumulatedMeanGrads=[],u.centered=o,i==null&&(u.epsilon=G.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return u}return _a(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=G.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:Te(function(){return mt(o).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:Te(function(){return mt(o).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:Te(function(){return mt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedMeanSquares[i].variable,f=r.accumulatedMoments[i].variable;Te(function(){var d=c.mul(r.decay).add(u.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[i].variable,v=p.mul(r.decay).add(u.mul(1-r.decay)),g=f.mul(r.momentum).add(u.mul(r.learningRate).div(d.sub(v.square().add(r.epsilon)).sqrt()));c.assign(d),p.assign(v),f.assign(g);var y=o.sub(g);o.assign(y)}else{var x=c.mul(r.decay).add(u.square().mul(1-r.decay));g=f.mul(r.momentum).add(u.mul(r.learningRate).div(x.add(r.epsilon).sqrt())),c.assign(x),f.assign(g),y=o.sub(g),o.assign(y)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&gr(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&gr(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&gr(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return Ae(this,void 0,void 0,function(){var t;return ke(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},e.prototype.setWeights=function(t){return Ae(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(iu);au(Kq);Wt.prototype.squaredDifference=function(n){return GA(this,n)},le=wq;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qb=function(n,e){return qb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])},qb(n,e)};function Ke(n,e){qb(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $n=function(){return $n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$n.apply(this,arguments)};function Fe(n,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(d){try{f(r.next(d))}catch(p){o(p)}}function c(d){try{f(r.throw(d))}catch(p){o(p)}}function f(d){d.done?i(d.value):a(d.value).then(u,c)}f((r=r.apply(n,[])).next())})}function Pe(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(d){return c([f,d])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Ff(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<t;e++)for(var i=arguments[e],o=0,u=i.length;o<u;o++,a++)r[a]=i[o];return r}var qs=function(){function n(e,t){if(!Ws(e)||!Ws(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n}();function tm(n,e){return n instanceof Wt&&n.shape.length===e}function Xq(n){return tm(n,2)}function nm(n){return tm(n,3)}function jo(n){return tm(n,4)}function Yq(n){return n%1!==0}function iR(n){return n%2===0}function c1(n,e){e===void 0&&(e=2);var t=Math.pow(10,e);return Math.floor(n*t)/t}function oR(n){return n&&n.width&&n.height}function Zq(n,e){var t=n.width,r=n.height,a=e/Math.max(r,t);return new qs(Math.round(t*a),Math.round(r*a))}function f1(n){return n.reduce(function(e,t){return e.add(t)},new bt(0,0)).div(new bt(n.length,n.length))}function ch(n,e,t){return Array(n).fill(0).map(function(r,a){return e+a*t})}function Ws(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function sR(n){return Ws(n)&&0<=n&&n<=1}var bt=function(){function n(e,t){this._x=e,this._y=t}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(e){return new n(this.x+e.x,this.y+e.y)},n.prototype.sub=function(e){return new n(this.x-e.x,this.y-e.y)},n.prototype.mul=function(e){return new n(this.x*e.x,this.y*e.y)},n.prototype.div=function(e){return new n(this.x/e.x,this.y/e.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n}(),Za=function(){function n(e,t){t===void 0&&(t=!0);var r=e||{},a=[r.left,r.top,r.right,r.bottom].every(Ws),i=[r.x,r.y,r.width,r.height].every(Ws);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],u=o[0],c=o[1],f=o[2],d=o[3];n.assertIsValidBox({x:u,y:c,width:f,height:d},"Box.constructor",t),this._x=u,this._y=c,this._width=f,this._height=d}return n.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Ws)},n.assertIsValidBox=function(e,t,r){if(r===void 0&&(r=!1),!n.isRect(e))throw new Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new bt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new bt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new bt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new bt(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),t=e[0],r=e[1],a=e[2],i=e[3];return new n({x:t,y:r,width:a,height:i})},n.prototype.toSquare=function(){var e=this,t=e.x,r=e.y,a=e.width,i=e.height,o=Math.abs(a-i);return a<i&&(t-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new n({x:t,y:r,width:a,height:i})},n.prototype.rescale=function(e){var t=oR(e)?e.width:e,r=oR(e)?e.height:e;return new n({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},n.prototype.pad=function(e,t){var r=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],a=r[0],i=r[1],o=r[2],u=r[3];return new n({x:a,y:i,width:o,height:u})},n.prototype.clipAtImageBorders=function(e,t){var r=this,a=r.x,i=r.y,o=r.right,u=r.bottom,c=Math.max(a,0),f=Math.max(i,0),d=o-c,p=u-f,v=Math.min(d,e-c),g=Math.min(p,t-f);return new n({x:c,y:f,width:v,height:g}).floor()},n.prototype.shift=function(e,t){var r=this,a=r.width,i=r.height,o=this.x+e,u=this.y+t;return new n({x:o,y:u,width:a,height:i})},n.prototype.padAtBorders=function(e,t){var r=this.width+1,a=this.height+1,i=1,o=1,u=r,c=a,f=this.left,d=this.top,p=this.right,v=this.bottom;return p>t&&(u=-p+t+r,p=t),v>e&&(c=-v+e+a,v=e),f<1&&(c=2-f,f=1),d<1&&(c=2-d,d=1),{dy:o,edy:c,dx:i,edx:u,y:d,ey:v,x:f,ex:p,w:r,h:a}},n.prototype.calibrate=function(e){return new n({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},n}(),rm=function(n){Ke(e,n);function e(t,r,a,i,o){return o===void 0&&(o=!1),n.call(this,{left:t,top:r,right:a,bottom:i},o)||this}return e}(Za),Nk=function(){function n(e,t,r,a,i){this._imageDims=new qs(i.width,i.height),this._score=e,this._classScore=t,this._className=r,this._box=new Za(a).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new Za(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},n}(),Fr=function(n){Ke(e,n);function e(t,r,a){return n.call(this,t,t,"",r,a)||this}return e.prototype.forSize=function(t,r){var a=n.prototype.forSize.call(this,t,r),i=a.score,o=a.relativeBox,u=a.imageDims;return new e(i,o,u)},e}(Nk);function Jq(n,e,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),a=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),i=r*a;return t?i/(n.area+e.area-i):i/Math.min(n.area,e.area)}function e5(n){var e=n.map(function(u){return u.x}),t=n.map(function(u){return u.y}),r=e.reduce(function(u,c){return c<u?c:u},1/0),a=t.reduce(function(u,c){return c<u?c:u},1/0),i=e.reduce(function(u,c){return u<c?c:u},0),o=t.reduce(function(u,c){return u<c?c:u},0);return new rm(r,a,i,o)}function fh(n,e,t,r){r===void 0&&(r=!0);for(var a=e.map(function(u,c){return{score:u,boxIndex:c}}).sort(function(u,c){return u.score-c.score}).map(function(u){return u.boxIndex}),i=[],o=function(){var u=a.pop();i.push(u);for(var c=a,f=[],d=0;d<c.length;d++){var p=c[d],v=n[u],g=n[p];f.push(Jq(v,g,r))}a=a.filter(function(y,x){return f[x]<=t})};a.length>0;)o();return i}function Lh(n,e){return Te(function(){var t=e[0],r=e[1],a=e[2],i=Qa(Ff(n.shape.slice(0,3),[1]),t),o=Qa(Ff(n.shape.slice(0,3),[1]),r),u=Qa(Ff(n.shape.slice(0,3),[1]),a),c=yn([i,o,u],3);return wn(n,c)})}function t5(n,e){return e===void 0&&(e=!1),Te(function(){var t=n.shape.slice(1),r=t[0],a=t[1];if(r===a)return n;var i=Math.abs(r-a),o=Math.round(i*(e?.5:1)),u=r>a?2:1,c=function(g){var y=n.shape.slice();return y[u]=g,Qa(y,0)},f=c(o),d=i-f.shape[u],p=e&&d?c(d):null,v=[p,n,f].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return yn(v,u)})}function _0(n){return 1/(1+Math.exp(-n))}var h1=function(n){Ke(e,n);function e(t,r,a,i,o){return o===void 0&&(o=!1),n.call(this,{x:t,y:r,width:a,height:i},o)||this}return e}(Za),n5=.5,r5=.43,a5=.45,hh=function(){function n(e,t,r){r===void 0&&(r=new bt(0,0));var a=t.width,i=t.height;this._imgDims=new qs(a,i),this._shift=r,this._positions=e.map(function(o){return o.mul(new bt(a,i)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new bt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new bt(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},n.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new bt(e,t))},n.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},n.prototype.align=function(e,t){if(t===void 0&&(t={}),e){var r=e instanceof Fr?e.box.floor():new Za(e);return this.shiftBy(r.x,r.y).align(null,t)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=a.useDlibAlignment,o=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},n.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],r=e[1],a=e[2],i=function(p){return a.sub(p).magnitude()},o=(i(t)+i(r))/2,u=Math.floor(o/a5),c=f1(e),f=Math.floor(Math.max(0,c.x-n5*u)),d=Math.floor(Math.max(0,c.y-r5*u));return new h1(f,d,Math.min(u,this.imageWidth+f),Math.min(u,this.imageHeight+d))},n.prototype.alignMinBbox=function(e){var t=e5(this.positions);return t.pad(t.width*e,t.height*e)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n}(),i5=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],f1([t[3],t[4]])]},e}(hh),o5=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(f1)},e}(hh),uR=function(){function n(e,t){this._label=e,this._distance=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+c1(this.distance)+")":"")},n}(),lR=function(n){Ke(e,n);function e(t,r){var a=n.call(this,t)||this;return a._label=r,a}return e.assertIsValidLabeledBox=function(t,r){if(Za.assertIsValidBox(t,r),!Ws(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Za),gp=function(){function n(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},n.fromJSON=function(e){var t=e.descriptors.map(function(r){return new Float32Array(r)});return new n(e.label,t)},n}();(function(n){Ke(e,n);function e(t,r,a,i){var o=n.call(this,t,r)||this;return o._score=a,o._classScore=i,o}return e.assertIsValidPredictedBox=function(t,r){if(lR.assertIsValidLabeledBox(t,r),!sR(t.score)||!sR(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(lR);function dh(n){return n.detection instanceof Fr}function ph(n,e){var t={detection:e};return Object.assign({},n,t)}function Ik(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:e}}function Mk(n){var e="";if(!n)try{n=require("fs")}catch(r){e=r.toString()}var t=n?function(r){return new Promise(function(a,i){n.readFile(r,function(o,u){return o?i(o):a(u)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:t}}function Fk(){var n=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,t=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=Mk();return $n({Canvas:n||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:e||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:t,createImageElement:r,fetch:a},i)}function Pk(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function Lk(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var vn;function s5(){if(!vn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return vn}function Wb(n){vn=n}function d1(){Pk()&&Wb(Ik()),Lk()&&Wb(Fk())}function u5(n){if(vn||d1(),!vn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=n.Canvas,t=e===void 0?vn.Canvas:e,r=n.Image,a=r===void 0?vn.Image:r;vn.Canvas=t,vn.Image=a,vn.createCanvasElement=n.createCanvasElement||function(){return new t},vn.createImageElement=n.createImageElement||function(){return new a},vn.ImageData=n.ImageData||vn.ImageData,vn.Video=n.Video||vn.Video,vn.fetch=n.fetch||vn.fetch,vn.readFile=n.readFile||vn.readFile}var Jn={getEnv:s5,setEnv:Wb,initialize:d1,createBrowserEnv:Ik,createFileSystem:Mk,createNodejsEnv:Fk,monkeyPatch:u5,isBrowser:Pk,isNodejs:Lk};d1();function p1(n){return!Jn.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function Fi(n){var e=Jn.getEnv(),t=e.Canvas,r=e.CanvasRenderingContext2D;if(n instanceof r)return n;var a=p1(n);if(!(a instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var Bo;(function(n){n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Bo||(Bo={}));var Bk=function(){function n(e){e===void 0&&(e={});var t=e.anchorPosition,r=e.backgroundColor,a=e.fontColor,i=e.fontSize,o=e.fontStyle,u=e.padding;this.anchorPosition=t||Bo.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=a||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=o||"Georgia",this.padding=u||4}return n}(),zk=function(){function n(e,t,r){r===void 0&&(r={}),this.text=typeof e=="string"?[e]:e instanceof n?e.text:e,this.anchor=t,this.options=new Bk(r)}return n.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(r){return e.measureText(r).width}).reduce(function(r,a){return r<a?a:r},0)+2*t},n.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,r=e.padding;return this.text.length*t+2*r},n.prototype.getUpperLeft=function(e,t){var r=this.options.anchorPosition,a=r===Bo.BOTTOM_RIGHT||r===Bo.TOP_RIGHT,i=r===Bo.BOTTOM_LEFT||r===Bo.BOTTOM_RIGHT,o=this.measureWidth(e),u=this.measureHeight(),c=a?this.anchor.x-o:this.anchor.x,f=i?this.anchor.y-u:this.anchor.y;if(t){var d=t.width,p=t.height,v=Math.max(Math.min(c,d-o),0),g=Math.max(Math.min(f,p-u),0);return{x:v,y:g}}return{x:c,y:f}},n.prototype.draw=function(e){var t=p1(e),r=Fi(t),a=this.options,i=a.backgroundColor,o=a.fontColor,u=a.fontSize,c=a.fontStyle,f=a.padding;r.font=u+"px "+c;var d=this.measureWidth(r),p=this.measureHeight();r.fillStyle=i;var v=this.getUpperLeft(r,t);r.fillRect(v.x,v.y,d,p),r.fillStyle=o,this.text.forEach(function(g,y){var x=f+v.x,w=f+v.y+(y+1)*u;r.fillText(g,x,w)})},n}(),l5=function(){function n(e){e===void 0&&(e={});var t=e.boxColor,r=e.lineWidth,a=e.label,i=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=a;var o={anchorPosition:Bo.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Bk(Object.assign({},o,i))}return n}(),c5=function(){function n(e,t){t===void 0&&(t={}),this.box=new Za(e),this.options=new l5(t)}return n.prototype.draw=function(e){var t=Fi(e),r=this.options,a=r.boxColor,i=r.lineWidth,o=this.box,u=o.x,c=o.y,f=o.width,d=o.height;t.strokeStyle=a,t.lineWidth=i,t.strokeRect(u,c,f,d);var p=this.options.label;p&&new zk([p],{x:u-i/2,y:c},this.options.drawLabelOptions).draw(e)},n}();function a7(n,e){var t=Array.isArray(e)?e:[e];t.forEach(function(r){var a=r instanceof Fr?r.score:dh(r)?r.detection.score:void 0,i=r instanceof Fr?r.box:dh(r)?r.detection.box:new Za(r),o=a?""+c1(a):void 0;new c5(i,{label:o}).draw(n)})}function Uk(n){var e=Jn.getEnv(),t=e.Image,r=e.Video;return n instanceof t&&n.complete||n instanceof r&&n.readyState>=3}function f5(n){return new Promise(function(e,t){if(n instanceof Jn.getEnv().Canvas||Uk(n))return e();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),e(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}n.addEventListener("load",r),n.addEventListener("error",a)})}function v1(n){var e=Jn.getEnv(),t=e.Image,r=e.Video;return n instanceof t?new qs(n.naturalWidth,n.naturalHeight):n instanceof r?new qs(n.videoWidth,n.videoHeight):new qs(n.width,n.height)}function am(n){var e=n.width,t=n.height,r=Jn.getEnv().createCanvasElement,a=r();return a.width=e,a.height=t,a}function m1(n,e){var t=Jn.getEnv().ImageData;if(!(n instanceof t)&&!Uk(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=v1(n),a=r.width,i=r.height,o=am({width:a,height:i});return n instanceof t?Fi(o).putImageData(n,0,0):Fi(o).drawImage(n,0,0,a,i),o}function h5(n,e){return Fe(this,void 0,void 0,function(){var t,r,a,i,o,u;return Pe(this,function(c){switch(c.label){case 0:return t=Jn.getEnv().createCanvasElement(),r=n.shape.slice(jo(n)?1:0),a=r[0],i=r[1],o=r[2],u=Te(function(){return n.as3D(a,i,o).toInt()}),[4,l1.toPixels(u,t)];case 1:return c.sent(),u.dispose(),[2,t]}})})}function cR(n){var e=Jn.getEnv(),t=e.Image,r=e.Canvas,a=e.Video;return n instanceof t||n instanceof r||n instanceof a}function d5(n,e,t){t===void 0&&(t=!1);var r=Jn.getEnv(),a=r.Image,i=r.Canvas;if(!(n instanceof a||n instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=v1(n),u=e/Math.max(o.height,o.width),c=u*o.width,f=u*o.height,d=am({width:e,height:e}),p=n instanceof i?n:m1(n),v=Math.abs(c-f)/2,g=t&&c<f?v:0,y=t&&f<c?v:0;return Fi(d).drawImage(p,g,y,c,f),d}var Ov=function(){function n(e,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(a,i){if(nm(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(jo(a)){var o=a.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var u=a instanceof Jn.getEnv().Canvas?a:m1(a);r._canvases[i]=u,r._inputDimensions[i]=[u.height,u.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var e=this;return ch(this.batchSize,0,1).map(function(t,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},n.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},n.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},n.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},n.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),r=this.getInputHeight(e);return Zq({width:t,height:r},this.inputSize)},n.prototype.toBatchTensor=function(e,t){var r=this;return t===void 0&&(t=!0),this._inputSize=e,Te(function(){var a=ch(r.batchSize,0,1).map(function(o){var u=r.getInput(o);if(u instanceof Wt){var c=jo(u)?u:u.expandDims();return c=t5(c,t),(c.shape[1]!==e||c.shape[2]!==e)&&(c=r1.resizeBilinear(c,[e,e])),c.as3D(e,e,3)}if(u instanceof Jn.getEnv().Canvas)return l1.fromPixels(d5(u,e,t));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+u)}),i=Mr(a.map(function(o){return o.toFloat()})).as4D(r.batchSize,e,e,3);return i})},n}();function In(n){return Fe(this,void 0,void 0,function(){var e,t,r;return Pe(this,function(a){switch(a.label){case 0:if(n instanceof Ov)return[2,n];if(e=Array.isArray(n)?n:[n],!e.length)throw new Error("toNetInput - empty array passed as input");return t=function(i){return Array.isArray(n)?" at input index "+i+":":""},r=e.map(p1),r.forEach(function(i,o){if(!cR(i)&&!nm(i)&&!jo(i))throw typeof e[o]=="string"?new Error("toNetInput -"+t(o)+" string passed, but could not resolve HTMLElement for element id "+e[o]):new Error("toNetInput -"+t(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(jo(i)){var u=i.shape[0];if(u!==1)throw new Error("toNetInput -"+t(o)+" tf.Tensor4D with batchSize "+u+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return cR(i)&&f5(i)}))];case 1:return a.sent(),[2,new Ov(r,Array.isArray(n))]}})})}function g1(n,e){return Fe(this,void 0,void 0,function(){var t,r,a,i,o,u,c;return Pe(this,function(f){switch(f.label){case 0:return t=Jn.getEnv().Canvas,r=n,n instanceof t?[3,5]:[4,In(n)];case 1:if(a=f.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof t?(o=i,[3,4]):[3,2];case 2:return[4,h5(i)];case 3:o=f.sent(),f.label=4;case 4:r=o,f.label=5;case 5:return u=Fi(r),c=e.map(function(d){return d instanceof Fr?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(d){var p=d.x,v=d.y,g=d.width,y=d.height,x=am({width:g,height:y});return Fi(x).putImageData(u.getImageData(p,v,g,y),0,0),x})]}})})}function y1(n,e){return Fe(this,void 0,void 0,function(){return Pe(this,function(t){if(!nm(n)&&!jo(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(jo(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Te(function(){var r=n.shape.slice(jo(n)?1:0),a=r[0],i=r[1],o=r[2],u=e.map(function(f){return f instanceof Fr?f.forSize(i,a).box:f}).map(function(f){return f.clipAtImageBorders(i,a)}),c=u.map(function(f){var d=f.x,p=f.y,v=f.width,g=f.height;return dk(n.as3D(a,i,o),[p,d,0],[g,v,o])});return c})]})})}function p5(n,e){return Fe(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return t=Jn.getEnv().fetch,[4,t(n,e)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function v5(n){return Fe(this,void 0,void 0,function(){return Pe(this,function(e){switch(e.label){case 0:return[4,p5(n)];case 1:return[2,e.sent().json()]}})})}function Vk(n,e){var t=e+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:t};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var a=n.split("/").filter(function(u){return u}),i=n.endsWith(".json")?a[a.length-1]:t,o=r+(n.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return o=n.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function m5(n,e){return Fe(this,void 0,void 0,function(){var t,r,a,i;return Pe(this,function(o){switch(o.label){case 0:return t=Vk(n,e),r=t.manifestUri,a=t.modelBaseUri,[4,v5(r)];case 1:return i=o.sent(),[2,kk.loadWeights(i,a)]}})})}function i7(n,e,t){t===void 0&&(t=!1);var r=t?v1(e):e,a=r.width,i=r.height;return n.width=a,n.height=i,{width:a,height:i}}var Vi=function(){function n(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),r=t.obj,a=t.objProp;return r[a]},n.prototype.reassignParamFromPath=function(e,t){var r=this.traversePropertyPath(e),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=t},n.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Kl})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Kl)})},n.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var r=t.path,a=t.tensor;e.reassignParamFromPath(r,a.variable())})},n.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var r=t.path,a=t.tensor,i=Vn(a.dataSync());a.dispose(),e.reassignParamFromPath(r,i)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},n.prototype.load=function(e){return Fe(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},n.prototype.loadFromUri=function(e){return Fe(this,void 0,void 0,function(){var t;return Pe(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,m5(e,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},n.prototype.loadFromDisk=function(e){return Fe(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p;return Pe(this,function(v){switch(v.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=Jn.getEnv().readFile,r=Vk(e,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,o=function(g){return Promise.all(g.map(function(y){return t(y).then(function(x){return x.buffer})}))},u=kk.weightsLoaderFactory(o),d=(f=JSON).parse,[4,t(a)];case 1:return c=d.apply(f,[v.sent().toString()]),[4,u(c,i)];case 2:return p=v.sent(),this.loadFromWeightMap(p),[2]}})})},n.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.extractWeights=function(e){var t=this.extractParams(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+e);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),r=t.obj,a=t.objProp;if(!r||!a||!(r[a]instanceof Wt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:a}},n}();function Nr(n,e,t){return Te(function(){var r=Zx(n,e.depthwise_filter,e.pointwise_filter,t,"same");return r=st(r,e.bias),r})}function E0(n,e,t){return t===void 0&&(t=!1),Te(function(){var r=Ht(t?st(ta(n,e.conv0.filters,[2,2],"same"),e.conv0.bias):Nr(n,e.conv0,[2,2])),a=Nr(r,e.conv1,[1,1]),i=Ht(st(r,a)),o=Nr(i,e.conv2,[1,1]);return Ht(st(r,st(a,o)))})}function yp(n,e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),Te(function(){var a=Ht(t?st(ta(n,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Nr(n,e.conv0,r?[2,2]:[1,1])),i=Nr(a,e.conv1,[1,1]),o=Ht(st(a,i)),u=Nr(o,e.conv2,[1,1]),c=Ht(st(a,st(i,u))),f=Nr(c,e.conv3,[1,1]);return Ht(st(a,st(i,st(u,f))))})}function ya(n,e,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),Te(function(){var a=st(ta(n,e.filters,[1,1],t),e.bias);return r?Ht(a):a})}function ji(n,e){Object.keys(n).forEach(function(t){e.some(function(r){return r.originalPath===t})||n[t].dispose()})}function im(n,e){return function(t,r,a,i){var o=pr(n(t*r*a*a),[a,a,t,r]),u=cn(n(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:u}}}function b1(n,e){return function(t,r,a){var i=Uo(n(t*r),[t,r]),o=cn(n(r));return e.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var jk=function(){function n(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}return n}();function x1(n,e){return function(t,r,a){var i=pr(n(9*t),[3,3,t,1]),o=pr(n(t*r),[1,1,t,r]),u=cn(n(r));return e.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new jk(i,o,u)}}function w1(n){return function(e){var t=n(e+"/depthwise_filter",4),r=n(e+"/pointwise_filter",4),a=n(e+"/bias",1);return new jk(t,r,a)}}function rs(n,e){return function(t,r,a){var i=n[t];if(!tm(i,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+i);return e.push({originalPath:t,paramPath:a||t}),i}}function qi(n){var e=n;function t(a){var i=e.slice(0,a);return e=e.slice(a),i}function r(){return e}return{extractWeights:t,getRemainingWeights:r}}function qk(n,e){var t=im(n,e),r=x1(n,e);function a(o,u,c,f){f===void 0&&(f=!1);var d=f?t(o,u,3,c+"/conv0"):r(o,u,c+"/conv0"),p=r(u,u,c+"/conv1"),v=r(u,u,c+"/conv2");return{conv0:d,conv1:p,conv2:v}}function i(o,u,c,f){f===void 0&&(f=!1);var d=a(o,u,c,f),p=d.conv0,v=d.conv1,g=d.conv2,y=r(u,u,c+"/conv3");return{conv0:p,conv1:v,conv2:g,conv3:y}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function g5(n){var e=[],t=qi(n),r=t.extractWeights,a=t.getRemainingWeights,i=qk(r,e).extractDenseBlock4Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2"),f=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:o,dense1:u,dense2:c,dense3:f}}}function Wk(n){return function(e){var t=n(e+"/filters",4),r=n(e+"/bias",1);return{filters:t,bias:r}}}function Hk(n,e){var t=rs(n,e),r=Wk(t),a=w1(t);function i(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),d=a(u+"/conv1"),p=a(u+"/conv2");return{conv0:f,conv1:d,conv2:p}}function o(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),d=a(u+"/conv1"),p=a(u+"/conv2"),v=a(u+"/conv3");return{conv0:f,conv1:d,conv2:p,conv3:v}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function y5(n){var e=[],t=Hk(n,e).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return ji(n,e),{params:r,paramMappings:e}}var Gk=function(n){Ke(e,n);function e(){return n.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Te(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Lh(a,i).div(xe(255)),u=yp(o,r.dense0,!0);return u=yp(u,r.dense1),u=yp(u,r.dense2),u=yp(u,r.dense3),u=Fh(u,[7,7],[2,2],"valid"),u})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return y5(t)},e.prototype.extractParams=function(t){return g5(t)},e}(Vi);function qa(n,e){return Te(function(){return st(Zv(n,e.weights),e.bias)})}function b5(n,e,t){var r=[],a=qi(n),i=a.extractWeights,o=a.getRemainingWeights,u=b1(i,r),c=u(e,t,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:c}}}function x5(n){var e=[],t=rs(n,e);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:r("fc")};return ji(n,e),{params:a,paramMappings:e}}function Qk(n){var e={},t={};return Object.keys(n).forEach(function(r){var a=r.startsWith("fc")?t:e;a[r]=n[r]}),{featureExtractorMap:e,classifierMap:t}}var $k=function(n){Ke(e,n);function e(t,r){var a=n.call(this,t)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Te(function(){var i=t instanceof Ov?r.faceFeatureExtractor.forwardInput(t):t;return qa(i.as2D(i.shape[0],-1),a.fc)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return b5(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var r=Qk(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),x5(i)},e.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,o=t.slice(0,t.length-i),u=t.slice(t.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(u)},e}(Vi),fR=["neutral","happy","sad","angry","fearful","disgusted","surprised"],_1=function(){function n(e){var t=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);fR.forEach(function(r,a){t[r]=e[a]})}return n.prototype.asSortedArray=function(){var e=this;return fR.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,r){return r.probability-t.probability})},n}(),w5=function(n){Ke(e,n);function e(t){return t===void 0&&(t=new Gk),n.call(this,"FaceExpressionNet",t)||this}return e.prototype.forwardInput=function(t){var r=this;return Te(function(){return zi(r.runNet(t))})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictExpressions=function(t){return Fe(this,void 0,void 0,function(){var r,a,i,o,u=this;return Pe(this,function(c){switch(c.label){case 0:return[4,In(t)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(bn(a).map(function(f){return Fe(u,void 0,void 0,function(){var d;return Pe(this,function(p){switch(p.label){case 0:return[4,f.data()];case 1:return d=p.sent(),f.dispose(),[2,d]}})})}))];case 3:return i=c.sent(),a.dispose(),o=i.map(function(f){return new _1(f)}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}($k);function _5(n){return n.expressions instanceof _1}function Kk(n,e){var t={expressions:e};return Object.assign({},n,t)}function o7(n,e,t,r){t===void 0&&(t=.1);var a=Array.isArray(e)?e:[e];a.forEach(function(i){var o=i instanceof _1?i:_5(i)?i.expressions:void 0;if(!o)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var u=o.asSortedArray(),c=u.filter(function(p){return p.probability>t}),f=dh(i)?i.detection.box.bottomLeft:new bt(0,0),d=new zk(c.map(function(p){return p.expression+" ("+c1(p.probability)+")"}),f);d.draw(n)})}function Xk(n){return dh(n)&&n.landmarks instanceof hh&&n.unshiftedLandmarks instanceof hh&&n.alignedRect instanceof Fr}function om(n,e){var t=n.detection.box,r=e.shiftBy(t.x,t.y),a=r.align(),i=n.detection.imageDims,o=new Fr(n.detection.score,a.rescale(i.reverse()),i),u={landmarks:r,unshiftedLandmarks:e,alignedRect:o};return Object.assign({},n,u)}function E5(n,e){var t=im(n,e),r=x1(n,e);function a(o,u,c){var f=r(o,u,c+"/separable_conv0"),d=r(u,u,c+"/separable_conv1"),p=t(o,u,1,c+"/expansion_conv");return{separable_conv0:f,separable_conv1:d,expansion_conv:p}}function i(o,u){var c=r(o,o,u+"/separable_conv0"),f=r(o,o,u+"/separable_conv1"),d=r(o,o,u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function S5(n,e){var t=[],r=qi(n),a=r.extractWeights,i=r.getRemainingWeights,o=E5(a,t),u=o.extractConvParams,c=o.extractSeparableConvParams,f=o.extractReductionBlockParams,d=o.extractMainBlockParams,p=u(3,32,3,"entry_flow/conv_in"),v=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),y={conv_in:p,reduction_block_0:v,reduction_block_1:g},x={};ch(e,0,1).forEach(function(C){x["main_block_"+C]=d(128,"middle_flow/main_block_"+C)});var w=f(128,256,"exit_flow/reduction_block"),_=c(256,512,"exit_flow/separable_conv"),S={reduction_block:w,separable_conv:_};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{entry_flow:y,middle_flow:x,exit_flow:S}}}function C5(n,e){var t=rs(n,e),r=Wk(t),a=w1(t);function i(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),d=r(u+"/expansion_conv");return{separable_conv0:c,separable_conv1:f,expansion_conv:d}}function o(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),d=a(u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:o}}function R5(n,e){var t=[],r=C5(n,t),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,u=r.extractMainBlockParams,c=a("entry_flow/conv_in"),f=o("entry_flow/reduction_block_0"),d=o("entry_flow/reduction_block_1"),p={conv_in:c,reduction_block_0:f,reduction_block_1:d},v={};ch(e,0,1).forEach(function(w){v["main_block_"+w]=u("middle_flow/main_block_"+w)});var g=o("exit_flow/reduction_block"),y=i("exit_flow/separable_conv"),x={reduction_block:g,separable_conv:y};return ji(n,t),{params:{entry_flow:p,middle_flow:v,exit_flow:x},paramMappings:t}}function Yk(n,e,t){return st(ta(n,e.filters,t,"same"),e.bias)}function S0(n,e,t){t===void 0&&(t=!0);var r=t?Ht(n):n;return r=Nr(r,e.separable_conv0,[1,1]),r=Nr(Ht(r),e.separable_conv1,[1,1]),r=Tn(r,[3,3],[2,2],"same"),r=st(r,Yk(n,e.expansion_conv,[2,2])),r}function T5(n,e){var t=Nr(Ht(n),e.separable_conv0,[1,1]);return t=Nr(Ht(t),e.separable_conv1,[1,1]),t=Nr(Ht(t),e.separable_conv2,[1,1]),t=st(t,n),t}var O5=function(n){Ke(e,n);function e(t){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return e.prototype.forwardInput=function(t){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return Te(function(){var i=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=Lh(i,o).div(xe(256)),c=Ht(Yk(u,a.entry_flow.conv_in,[2,2]));return c=S0(c,a.entry_flow.reduction_block_0,!1),c=S0(c,a.entry_flow.reduction_block_1),ch(r._numMainBlocks,0,1).forEach(function(f){c=T5(c,a.middle_flow["main_block_"+f])}),c=S0(c,a.exit_flow.reduction_block),c=Ht(Nr(c,a.exit_flow.separable_conv,[1,1])),c})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return R5(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return S5(t,this._numMainBlocks)},e}(Vi);function A5(n){var e=[],t=qi(n),r=t.extractWeights,a=t.getRemainingWeights,i=b1(r,e),o=i(512,1,"fc/age"),u=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{fc:{age:o,gender:u}}}}function k5(n){var e=[],t=rs(n,e);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return ji(n,e),{params:a,paramMappings:e}}var Av;(function(n){n.FEMALE="female",n.MALE="male"})(Av||(Av={}));var D5=function(n){Ke(e,n);function e(t){t===void 0&&(t=new O5(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Te(function(){var i=t instanceof Ov?r.faceFeatureExtractor.forwardInput(t):t,o=Fh(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),u=qa(o,a.fc.age).as1D(),c=qa(o,a.fc.gender);return{age:u,gender:c}})},e.prototype.forwardInput=function(t){var r=this;return Te(function(){var a=r.runNet(t),i=a.age,o=a.gender;return{age:i,gender:zi(o)}})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return Fe(this,void 0,void 0,function(){var r,a,i,o,u,c,f=this;return Pe(this,function(d){switch(d.label){case 0:return[4,In(t)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return a=d.sent(),i=bn(a.age),o=bn(a.gender),u=i.map(function(p,v){return{ageTensor:p,genderTensor:o[v]}}),[4,Promise.all(u.map(function(p){var v=p.ageTensor,g=p.genderTensor;return Fe(f,void 0,void 0,function(){var y,x,w,_,S;return Pe(this,function(C){switch(C.label){case 0:return[4,v.data()];case 1:return y=C.sent()[0],[4,g.data()];case 2:return x=C.sent()[0],w=x>.5,_=w?Av.MALE:Av.FEMALE,S=w?x:1-x,v.dispose(),g.dispose(),[2,{age:y,gender:_,genderProbability:S}]}})})}))];case 3:return c=d.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},e.prototype.extractClassifierParams=function(t){return A5(t)},e.prototype.extractParamsFromWeigthMap=function(t){var r=Qk(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),k5(i)},e.prototype.extractParams=function(t){var r=1539,a=t.slice(0,t.length-r),i=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},e}(Vi),Zk=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.postProcess=function(t,r,a){var i=a.map(function(u){var c=u.width,f=u.height,d=r/Math.max(f,c);return{width:c*d,height:f*d}}),o=i.length;return Te(function(){var u=function(v,g){return Mr([Qa([68],v),Qa([68],g)],1).as2D(1,136).as1D()},c=function(v,g){var y=i[v],x=y.width,w=y.height;return g(x,w)?Math.abs(x-w)/2:0},f=function(v){return c(v,function(g,y){return g<y})},d=function(v){return c(v,function(g,y){return y<g})},p=t.mul(Qa([o,136],r)).sub(Mr(Array.from(Array(o),function(v,g){return u(f(g),d(g))}))).div(Mr(Array.from(Array(o),function(v,g){return u(i[g].width,i[g].height)})));return p})},e.prototype.forwardInput=function(t){var r=this;return Te(function(){var a=r.runNet(t);return r.postProcess(a,t.inputSize,t.inputDimensions.map(function(i){var o=i[0],u=i[1];return{height:o,width:u}}))})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.detectLandmarks=function(t){return Fe(this,void 0,void 0,function(){var r,a,i,o=this;return Pe(this,function(u){switch(u.label){case 0:return[4,In(t)];case 1:return r=u.sent(),a=Te(function(){return bn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c,f){return Fe(o,void 0,void 0,function(){var d,p,v,g,y;return Pe(this,function(x){switch(x.label){case 0:return v=(p=Array).from,[4,c.data()];case 1:return d=v.apply(p,[x.sent()]),g=d.filter(function(w,_){return iR(_)}),y=d.filter(function(w,_){return!iR(_)}),[2,new o5(Array(68).fill(0).map(function(w,_){return new bt(g[_],y[_])}),{height:r.getInputHeight(f),width:r.getInputWidth(f)})]}})})}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}($k),Jk=function(n){Ke(e,n);function e(t){return t===void 0&&(t=new Gk),n.call(this,"FaceLandmark68Net",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(Zk);function N5(n){var e=[],t=Hk(n,e).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return ji(n,e),{params:r,paramMappings:e}}function I5(n){var e=[],t=qi(n),r=t.extractWeights,a=t.getRemainingWeights,i=qk(r,e).extractDenseBlock3Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:o,dense1:u,dense2:c}}}var M5=function(n){Ke(e,n);function e(){return n.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Te(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Lh(a,i).div(xe(255)),u=E0(o,r.dense0,!0);return u=E0(u,r.dense1),u=E0(u,r.dense2),u=Fh(u,[14,14],[2,2],"valid"),u})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return N5(t)},e.prototype.extractParams=function(t){return I5(t)},e}(Vi),F5=function(n){Ke(e,n);function e(t){return t===void 0&&(t=new M5),n.call(this,"FaceLandmark68TinyNet",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(Zk);(function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Jk);function P5(n,e){return st(Yn(n,e.weights),e.biases)}function E1(n,e,t,r,a){a===void 0&&(a="same");var i=e.conv,o=i.filters,u=i.bias,c=ta(n,o,t,a);return c=st(c,u),c=P5(c,e.scale),r?Ht(c):c}function L5(n,e){return E1(n,e,[1,1],!0)}function eD(n,e){return E1(n,e,[1,1],!1)}function tD(n,e){return E1(n,e,[2,2],!0,"valid")}function B5(n,e){function t(u,c,f){var d=n(u),p=d.length/(c*f*f);if(Yq(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+f);return Te(function(){return Ko(pr(d,[c,p,f,f]),[2,3,1,0])})}function r(u,c,f,d){var p=t(u,c,f),v=cn(n(c));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:p,bias:v}}function a(u,c){var f=cn(n(u)),d=cn(n(u));return e.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:f,biases:d}}function i(u,c,f,d){var p=r(u,c,f,d+"/conv"),v=a(c,d+"/scale");return{conv:p,scale:v}}function o(u,c,f,d,p){p===void 0&&(p=!1);var v=i((p?.5:1)*u,c,f,d+"/conv1"),g=i(u,c,f,d+"/conv2");return{conv1:v,conv2:g}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function z5(n){var e=qi(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=B5(t,a),o=i.extractConvLayerParams,u=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),f=u(9216,32,3,"conv32_1"),d=u(9216,32,3,"conv32_2"),p=u(9216,32,3,"conv32_3"),v=u(36864,64,3,"conv64_down",!0),g=u(36864,64,3,"conv64_1"),y=u(36864,64,3,"conv64_2"),x=u(36864,64,3,"conv64_3"),w=u(147456,128,3,"conv128_down",!0),_=u(147456,128,3,"conv128_1"),S=u(147456,128,3,"conv128_2"),C=u(589824,256,3,"conv256_down",!0),R=u(589824,256,3,"conv256_1"),T=u(589824,256,3,"conv256_2"),O=u(589824,256,3,"conv256_down_out"),k=Te(function(){return Ko(Uo(t(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var D={conv32_down:c,conv32_1:f,conv32_2:d,conv32_3:p,conv64_down:v,conv64_1:g,conv64_2:y,conv64_3:x,conv128_down:w,conv128_1:_,conv128_2:S,conv256_down:C,conv256_1:R,conv256_2:T,conv256_down_out:O,fc:k};return{params:D,paramMappings:a}}function U5(n,e){var t=rs(n,e);function r(o){var u=t(o+"/scale/weights",1),c=t(o+"/scale/biases",1);return{weights:u,biases:c}}function a(o){var u=t(o+"/conv/filters",4),c=t(o+"/conv/bias",1),f=r(o);return{conv:{filters:u,bias:c},scale:f}}function i(o){return{conv1:a(o+"/conv1"),conv2:a(o+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function V5(n){var e=[],t=U5(n,e),r=t.extractConvLayerParams,a=t.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),u=a("conv32_2"),c=a("conv32_3"),f=a("conv64_down"),d=a("conv64_1"),p=a("conv64_2"),v=a("conv64_3"),g=a("conv128_down"),y=a("conv128_1"),x=a("conv128_2"),w=a("conv256_down"),_=a("conv256_1"),S=a("conv256_2"),C=a("conv256_down_out"),R=n.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!Xq(R))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+R);var T={conv32_down:i,conv32_1:o,conv32_2:u,conv32_3:c,conv64_down:f,conv64_1:d,conv64_2:p,conv64_3:v,conv128_down:g,conv128_1:y,conv128_2:x,conv256_down:w,conv256_1:_,conv256_2:S,conv256_down_out:C,fc:R};return ji(n,e),{params:T,paramMappings:e}}function Da(n,e){var t=L5(n,e.conv1);return t=eD(t,e.conv2),t=st(t,n),t=Ht(t),t}function bp(n,e){var t=tD(n,e.conv1);t=eD(t,e.conv2);var r=Fh(n,2,2,"valid"),a=Ut(r.shape),i=r.shape[3]!==t.shape[3],o=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(o){var u=Ff(t.shape);u[1]=1;var c=Ut(u);t=yn([t,c],1);var f=Ff(t.shape);f[2]=1;var d=Ut(f);t=yn([t,d],2)}return r=i?yn([r,a],3):r,t=st(r,t),t=Ht(t),t}var j5=function(n){Ke(e,n);function e(){return n.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Te(function(){var a=t.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=Lh(a,i).div(xe(256)),u=tD(o,r.conv32_down);u=Tn(u,3,2,"valid"),u=Da(u,r.conv32_1),u=Da(u,r.conv32_2),u=Da(u,r.conv32_3),u=bp(u,r.conv64_down),u=Da(u,r.conv64_1),u=Da(u,r.conv64_2),u=Da(u,r.conv64_3),u=bp(u,r.conv128_down),u=Da(u,r.conv128_1),u=Da(u,r.conv128_2),u=bp(u,r.conv256_down),u=Da(u,r.conv256_1),u=Da(u,r.conv256_2),u=bp(u,r.conv256_down_out);var c=u.mean([1,2]),f=Zv(c,r.fc);return f})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return Fe(this,void 0,void 0,function(){var r,a,i,o=this;return Pe(this,function(u){switch(u.label){case 0:return[4,In(t)];case 1:return r=u.sent(),a=Te(function(){return bn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return V5(t)},e.prototype.extractParams=function(t){return z5(t)},e}(Vi);function nD(n,e){var t={descriptor:e};return Object.assign({},n,t)}function rD(n,e){var t={age:e};return Object.assign({},n,t)}function aD(n,e,t){var r={gender:e,genderProbability:t};return Object.assign({},n,r)}var iD=function(){function n(e){var t=e===void 0?{}:e,r=t.minFaceSize,a=t.scaleFactor,i=t.maxNumScales,o=t.scoreThresholds,u=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=u,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n}();function q5(n,e){function t(c,f){var d=pr(n(9*c),[3,3,c,1]),p=cn(n(c)),v=cn(n(c)),g=cn(n(c)),y=cn(n(c));return e.push({paramPath:f+"/filters"},{paramPath:f+"/batch_norm_scale"},{paramPath:f+"/batch_norm_offset"},{paramPath:f+"/batch_norm_mean"},{paramPath:f+"/batch_norm_variance"}),{filters:d,batch_norm_scale:p,batch_norm_offset:v,batch_norm_mean:g,batch_norm_variance:y}}function r(c,f,d,p,v){var g=pr(n(c*f*d*d),[d,d,c,f]),y=cn(n(f));return e.push({paramPath:p+"/filters"},{paramPath:p+"/"+(v?"batch_norm_offset":"bias")}),{filters:g,bias:y}}function a(c,f,d,p){var v=r(c,f,d,p,!0),g=v.filters,y=v.bias;return{filters:g,batch_norm_offset:y}}function i(c,f,d){var p=t(c,d+"/depthwise_conv"),v=a(c,f,1,d+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:v}}function o(){var c=a(3,32,3,"mobilenetv1/conv_0"),f=i(32,64,"mobilenetv1/conv_1"),d=i(64,128,"mobilenetv1/conv_2"),p=i(128,128,"mobilenetv1/conv_3"),v=i(128,256,"mobilenetv1/conv_4"),g=i(256,256,"mobilenetv1/conv_5"),y=i(256,512,"mobilenetv1/conv_6"),x=i(512,512,"mobilenetv1/conv_7"),w=i(512,512,"mobilenetv1/conv_8"),_=i(512,512,"mobilenetv1/conv_9"),S=i(512,512,"mobilenetv1/conv_10"),C=i(512,512,"mobilenetv1/conv_11"),R=i(512,1024,"mobilenetv1/conv_12"),T=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,conv_8:w,conv_9:_,conv_10:S,conv_11:C,conv_12:R,conv_13:T}}function u(){var c=a(1024,256,1,"prediction_layer/conv_0"),f=a(256,512,3,"prediction_layer/conv_1"),d=a(512,128,1,"prediction_layer/conv_2"),p=a(128,256,3,"prediction_layer/conv_3"),v=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),y=a(256,64,1,"prediction_layer/conv_6"),x=a(64,128,3,"prediction_layer/conv_7"),w=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),_=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),S=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),C=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),R=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),T=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),O=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),D=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),M=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),B=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),z={box_encoding_predictor:w,class_predictor:_},ee={box_encoding_predictor:S,class_predictor:C},re={box_encoding_predictor:R,class_predictor:T},te={box_encoding_predictor:O,class_predictor:k},U={box_encoding_predictor:D,class_predictor:N},H={box_encoding_predictor:M,class_predictor:B};return{conv_0:c,conv_1:f,conv_2:d,conv_3:p,conv_4:v,conv_5:g,conv_6:y,conv_7:x,box_predictor_0:z,box_predictor_1:ee,box_predictor_2:re,box_predictor_3:te,box_predictor_4:U,box_predictor_5:H}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function W5(n){var e=[],t=qi(n),r=t.extractWeights,a=t.getRemainingWeights,i=q5(r,e),o=i.extractMobilenetV1Params,u=i.extractPredictionLayerParams,c=o(),f=u(),d=Lx(r(5118*4),[1,5118,4]),p={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:f,output_layer:p},paramMappings:e}}function H5(n,e){var t=rs(n,e);function r(f,d,p){var v=t(f+"/Conv2d_"+d+"_pointwise/weights",4,p+"/filters"),g=t(f+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:v,batch_norm_offset:g}}function a(f){var d="mobilenetv1/conv_"+f,p="MobilenetV1/Conv2d_"+f+"_depthwise",v=d+"/depthwise_conv",g=d+"/pointwise_conv",y=t(p+"/depthwise_weights",4,v+"/filters"),x=t(p+"/BatchNorm/gamma",1,v+"/batch_norm_scale"),w=t(p+"/BatchNorm/beta",1,v+"/batch_norm_offset"),_=t(p+"/BatchNorm/moving_mean",1,v+"/batch_norm_mean"),S=t(p+"/BatchNorm/moving_variance",1,v+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:x,batch_norm_offset:w,batch_norm_mean:_,batch_norm_variance:S},pointwise_conv:r("MobilenetV1",f,g)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function o(f,d){var p=t(f+"/weights",4,d+"/filters"),v=t(f+"/biases",1,d+"/bias");return{filters:p,bias:v}}function u(f){var d=o("Prediction/BoxPredictor_"+f+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+f+"/box_encoding_predictor"),p=o("Prediction/BoxPredictor_"+f+"/ClassPredictor","prediction_layer/box_predictor_"+f+"/class_predictor");return{box_encoding_predictor:d,class_predictor:p}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:u(0),box_predictor_1:u(1),box_predictor_2:u(2),box_predictor_3:u(3),box_predictor_4:u(4),box_predictor_5:u(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function G5(n){var e=[],t=H5(n,e),r=t.extractMobilenetV1Params,a=t.extractPredictionLayerParams,i=n["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!nm(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return ji(n,e),{params:o,paramMappings:e}}function Na(n,e,t){return Te(function(){var r=ta(n,e.filters,t,"same");return r=st(r,e.batch_norm_offset),$x(r,0,6)})}var Q5=.0010000000474974513;function $5(n,e,t){return Te(function(){var r=Yv(n,e.filters,t,"same");return r=ZA(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,Q5),$x(r,0,6)})}function K5(n){return[2,4,6,12].some(function(e){return e===n})?[2,2]:[1,1]}function X5(n,e){return Te(function(){var t=null,r=Na(n,e.conv_0,[2,2]),a=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(a.forEach(function(i,o){var u=o+1,c=K5(u);r=$5(r,i.depthwise_conv,c),r=Na(r,i.pointwise_conv,[1,1]),u===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function Y5(n,e,t,r,a){var i=n.shape[0],o=Math.min(t,i),u=e.map(function(d,p){return{score:d,boxIndex:p}}).filter(function(d){return d.score>a}).sort(function(d,p){return p.score-d.score}),c=function(d){return d<=r?1:0},f=[];return u.forEach(function(d){if(!(f.length>=o)){for(var p=d.score,v=f.length-1;v>=0;--v){var g=Z5(n,d.boxIndex,f[v]);if(g!==0&&(d.score*=c(g),d.score<=a))break}p===d.score&&f.push(d.boxIndex)}}),f}function Z5(n,e,t){var r=n.arraySync(),a=Math.min(r[e][0],r[e][2]),i=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),u=Math.max(r[e][1],r[e][3]),c=Math.min(r[t][0],r[t][2]),f=Math.min(r[t][1],r[t][3]),d=Math.max(r[t][0],r[t][2]),p=Math.max(r[t][1],r[t][3]),v=(o-a)*(u-i),g=(d-c)*(p-f);if(v<=0||g<=0)return 0;var y=Math.max(a,c),x=Math.max(i,f),w=Math.min(o,d),_=Math.min(u,p),S=Math.max(w-y,0)*Math.max(_-x,0);return S/(v+g-S)}function J5(n){var e=bn(Ko(n,[1,0])),t=[wn(e[2],e[0]),wn(e[3],e[1])],r=[st(e[0],fa(t[0],xe(2))),st(e[1],fa(t[1],xe(2)))];return{sizes:t,centers:r}}function eW(n,e){var t=J5(n),r=t.sizes,a=t.centers,i=bn(Ko(e,[1,0])),o=fa(Yn(Lb(fa(i[2],xe(5))),r[0]),xe(2)),u=st(Yn(fa(i[0],xe(10)),r[0]),a[0]),c=fa(Yn(Lb(fa(i[3],xe(5))),r[1]),xe(2)),f=st(Yn(fa(i[1],xe(10)),r[1]),a[1]);return Ko(Mr([wn(u,o),wn(f,c),st(u,o),st(f,c)]),[1,0])}function tW(n,e,t){return Te(function(){var r=n.shape[0],a=eW(pa(gl(t.extra_dim,[r,1,1]),[-1,4]),pa(n,[-1,4]));a=pa(a,[r,a.shape[0]/r,4]);var i=$A(Ya(e,[0,0,1],[-1,-1,-1])),o=Ya(i,[0,0,0],[-1,-1,1]);o=pa(o,[r,o.shape[1]]);var u=bn(a),c=bn(o);return{boxes:u,scores:c}})}function Zu(n,e){return Te(function(){var t=n.shape[0],r=pa(ya(n,e.box_encoding_predictor),[t,-1,1,4]),a=pa(ya(n,e.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function nW(n,e,t){return Te(function(){var r=Na(n,t.conv_0,[1,1]),a=Na(r,t.conv_1,[2,2]),i=Na(a,t.conv_2,[1,1]),o=Na(i,t.conv_3,[2,2]),u=Na(o,t.conv_4,[1,1]),c=Na(u,t.conv_5,[2,2]),f=Na(c,t.conv_6,[1,1]),d=Na(f,t.conv_7,[2,2]),p=Zu(e,t.box_predictor_0),v=Zu(n,t.box_predictor_1),g=Zu(a,t.box_predictor_2),y=Zu(o,t.box_predictor_3),x=Zu(c,t.box_predictor_4),w=Zu(d,t.box_predictor_5),_=yn([p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,x.boxPredictionEncoding,w.boxPredictionEncoding],1),S=yn([p.classPrediction,v.classPrediction,g.classPrediction,y.classPrediction,x.classPrediction,w.classPrediction],1);return{boxPredictions:_,classPredictions:S}})}var sm=function(){function n(e){var t=e===void 0?{}:e,r=t.minConfidence,a=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n}(),oD=function(n){Ke(e,n);function e(){return n.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Te(function(){var a=t.toBatchTensor(512,!1).toFloat(),i=wn(Yn(a,xe(.007843137718737125)),xe(1)),o=X5(i,r.mobilenetv1),u=nW(o.out,o.conv11,r.prediction_layer),c=u.boxPredictions,f=u.classPredictions;return tW(c,f,r.output_layer)})},e.prototype.forward=function(t){return Fe(this,void 0,void 0,function(){var r;return Pe(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,In(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,k,D;return Pe(this,function(N){switch(N.label){case 0:return a=new sm(r),i=a.maxResults,o=a.minConfidence,[4,In(t)];case 1:for(u=N.sent(),c=this.forwardInput(u),f=c.boxes,d=c.scores,p=f[0],v=d[0],g=1;g<f.length;g++)f[g].dispose(),d[g].dispose();return w=(x=Array).from,[4,v.data()];case 2:return y=w.apply(x,[N.sent()]),_=.5,S=Y5(p,y,i,_,o),C=u.getReshapedInputDimensions(0),R=u.inputSize,T=R/C.width,O=R/C.height,k=p.arraySync(),D=S.map(function(M){var B=[Math.max(0,k[M][0]),Math.min(1,k[M][2])].map(function(H){return H*O}),z=B[0],ee=B[1],re=[Math.max(0,k[M][1]),Math.min(1,k[M][3])].map(function(H){return H*T}),te=re[0],U=re[1];return new Fr(y[M],new h1(te,z,U-te,ee-z),{height:u.getInputHeight(0),width:u.getInputWidth(0)})}),p.dispose(),v.dispose(),[2,D]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return G5(t)},e.prototype.extractParams=function(t){return W5(t)},e}(Vi);(function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(oD);var rW=.4,aW=[new bt(.738768,.874946),new bt(2.42204,2.65704),new bt(4.30971,7.04493),new bt(10.246,4.59428),new bt(12.6868,11.8741)],iW=[new bt(1.603231,2.094468),new bt(6.041143,7.080126),new bt(2.882459,3.518061),new bt(4.266906,5.178857),new bt(9.041765,10.66308)],oW=[117.001,114.697,97.404],sW="tiny_yolov2_model",uW="tiny_yolov2_separable_conv_model",xp=function(n){return typeof n=="number"};function lW(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!xp(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(e){return e||{}}).every(function(e){return xp(e.x)&&xp(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every(xp)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function S1(n){return Te(function(){var e=Yn(n,xe(.10000000149011612));return st(Ht(wn(n,e)),e)})}function yo(n,e){return Te(function(){var t=nu(n,[[0,0],[1,1],[1,1],[0,0]]);return t=ta(t,e.conv.filters,[1,1],"valid"),t=wn(t,e.bn.sub),t=Yn(t,e.bn.truediv),t=st(t,e.conv.bias),S1(t)})}function bo(n,e){return Te(function(){var t=nu(n,[[0,0],[1,1],[1,1],[0,0]]);return t=Zx(t,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t=st(t,e.bias),S1(t)})}function cW(n,e){var t=im(n,e);function r(o,u){var c=cn(n(o)),f=cn(n(o));return e.push({paramPath:u+"/sub"},{paramPath:u+"/truediv"}),{sub:c,truediv:f}}function a(o,u,c){var f=t(o,u,3,c+"/conv"),d=r(u,c+"/bn");return{conv:f,bn:d}}var i=x1(n,e);return{extractConvParams:t,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function fW(n,e,t,r){var a=qi(n),i=a.extractWeights,o=a.getRemainingWeights,u=[],c=cW(i,u),f=c.extractConvParams,d=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams,v;if(e.withSeparableConvs){var g=r[0],y=r[1],x=r[2],w=r[3],_=r[4],S=r[5],C=r[6],R=r[7],T=r[8],O=e.isFirstLayerConv2d?f(g,y,3,"conv0"):p(g,y,"conv0"),k=p(y,x,"conv1"),D=p(x,w,"conv2"),N=p(w,_,"conv3"),M=p(_,S,"conv4"),B=p(S,C,"conv5"),z=R?p(C,R,"conv6"):void 0,ee=T?p(R,T,"conv7"):void 0,re=f(T||R||C,5*t,1,"conv8");v={conv0:O,conv1:k,conv2:D,conv3:N,conv4:M,conv5:B,conv6:z,conv7:ee,conv8:re}}else{var g=r[0],y=r[1],x=r[2],w=r[3],_=r[4],S=r[5],C=r[6],R=r[7],T=r[8],O=d(g,y,"conv0"),k=d(y,x,"conv1"),D=d(x,w,"conv2"),N=d(w,_,"conv3"),M=d(_,S,"conv4"),B=d(S,C,"conv5"),z=d(C,R,"conv6"),ee=d(R,T,"conv7"),re=f(T,5*t,1,"conv8");v={conv0:O,conv1:k,conv2:D,conv3:N,conv4:M,conv5:B,conv6:z,conv7:ee,conv8:re}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:v,paramMappings:u}}function hW(n,e){var t=rs(n,e);function r(u){var c=t(u+"/sub",1),f=t(u+"/truediv",1);return{sub:c,truediv:f}}function a(u){var c=t(u+"/filters",4),f=t(u+"/bias",1);return{filters:c,bias:f}}function i(u){var c=a(u+"/conv"),f=r(u+"/bn");return{conv:c,bn:f}}var o=w1(t);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function dW(n,e){var t=[],r=hW(n,t),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,u;if(e.withSeparableConvs){var c=e.filterSizes&&e.filterSizes.length||9;u={conv0:e.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:a("conv8")}}else u={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return ji(n,t),{params:u,paramMappings:t}}var hR;(function(n){n[n.XS=224]="XS",n[n.SM=320]="SM",n[n.MD=416]="MD",n[n.LG=608]="LG"})(hR||(hR={}));var C1=function(){function n(e){var t=e===void 0?{}:e,r=t.inputSize,a=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n}(),sD=function(n){Ke(e,n);function e(t){var r=n.call(this,"TinyYolov2")||this;return lW(t),r._config=t,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,r){var a=yo(t,r.conv0);return a=Tn(a,[2,2],[2,2],"same"),a=yo(a,r.conv1),a=Tn(a,[2,2],[2,2],"same"),a=yo(a,r.conv2),a=Tn(a,[2,2],[2,2],"same"),a=yo(a,r.conv3),a=Tn(a,[2,2],[2,2],"same"),a=yo(a,r.conv4),a=Tn(a,[2,2],[2,2],"same"),a=yo(a,r.conv5),a=Tn(a,[2,2],[1,1],"same"),a=yo(a,r.conv6),a=yo(a,r.conv7),ya(a,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,r){var a=this.config.isFirstLayerConv2d?S1(ya(t,r.conv0,"valid",!1)):bo(t,r.conv0);return a=Tn(a,[2,2],[2,2],"same"),a=bo(a,r.conv1),a=Tn(a,[2,2],[2,2],"same"),a=bo(a,r.conv2),a=Tn(a,[2,2],[2,2],"same"),a=bo(a,r.conv3),a=Tn(a,[2,2],[2,2],"same"),a=bo(a,r.conv4),a=Tn(a,[2,2],[2,2],"same"),a=bo(a,r.conv5),a=Tn(a,[2,2],[1,1],"same"),a=r.conv6?bo(a,r.conv6):a,a=r.conv7?bo(a,r.conv7):a,ya(a,r.conv8,"valid",!1)},e.prototype.forwardInput=function(t,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Te(function(){var o=t.toBatchTensor(r,!1).toFloat();return o=a.config.meanRgb?Lh(o,a.config.meanRgb):o,o=o.div(xe(256)),a.config.withSeparableConvs?a.runMobilenet(o,i):a.runTinyYolov2(o,i)})},e.prototype.forward=function(t,r){return Fe(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,In(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},e.prototype.detect=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S=this;return Pe(this,function(C){switch(C.label){case 0:return a=new C1(r),i=a.inputSize,o=a.scoreThreshold,[4,In(t)];case 1:return u=C.sent(),[4,this.forwardInput(u,i)];case 2:return c=C.sent(),f=Te(function(){return bn(c)[0].expandDims()}),d={width:u.getInputWidth(0),height:u.getInputHeight(0)},[4,this.extractBoxes(f,u.getReshapedInputDimensions(0),o)];case 3:return p=C.sent(),c.dispose(),f.dispose(),v=p.map(function(R){return R.box}),g=p.map(function(R){return R.score}),y=p.map(function(R){return R.classScore}),x=p.map(function(R){return S.config.classes[R.label]}),w=fh(v.map(function(R){return R.rescale(i)}),g,this.config.iouThreshold,!0),_=w.map(function(R){return new Nk(g[R],y[R],x[R],v[R],d)}),[2,_]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return dW(t,this.config)},e.prototype.extractParams=function(t){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return fW(t,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(t,r,a){return Fe(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,k,D,N,M,B,z,ee,re,te,U,H,$=this;return Pe(this,function(Y){switch(Y.label){case 0:return i=r.width,o=r.height,u=Math.max(i,o),c=u/i,f=u/o,d=t.shape[1],p=this.config.anchors.length,v=Te(function(){var F=t.reshape([d,d,p,$.boxEncodingSize]),Q=F.slice([0,0,0,0],[d,d,p,4]),oe=F.slice([0,0,0,4],[d,d,p,1]),ue=$.withClassScores?zi(F.slice([0,0,0,5],[d,d,p,$.config.classes.length]),3):xe(0);return[Q,oe,ue]}),g=v[0],y=v[1],x=v[2],w=[],[4,y.array()];case 1:return _=Y.sent(),[4,g.array()];case 2:S=Y.sent(),C=0,Y.label=3;case 3:if(!(C<d))return[3,12];R=0,Y.label=4;case 4:if(!(R<d))return[3,11];T=0,Y.label=5;case 5:return T<p?(O=_0(_[C][R][T][0]),!a||O>a?(k=(R+_0(S[C][R][T][0]))/d*c,D=(C+_0(S[C][R][T][1]))/d*f,N=Math.exp(S[C][R][T][2])*this.config.anchors[T].x/d*c,M=Math.exp(S[C][R][T][3])*this.config.anchors[T].y/d*f,B=k-N/2,z=D-M/2,ee={row:C,col:R,anchor:T},this.withClassScores?[4,this.extractPredictedClass(x,ee)]:[3,7]):[3,9]):[3,10];case 6:return H=Y.sent(),[3,8];case 7:H={classScore:1,label:0},Y.label=8;case 8:re=H,te=re.classScore,U=re.label,w.push($n({box:new rm(B,z,B+N,z+M),score:O,classScore:O*te,label:U},ee)),Y.label=9;case 9:return T++,[3,5];case 10:return R++,[3,4];case 11:return C++,[3,3];case 12:return g.dispose(),y.dispose(),x.dispose(),[2,w]}})})},e.prototype.extractPredictedClass=function(t,r){return Fe(this,void 0,void 0,function(){var a,i,o,u;return Pe(this,function(c){switch(c.label){case 0:return a=r.row,i=r.col,o=r.anchor,[4,t.array()];case 1:return u=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(f,d){return u[a][i][o][d]}).map(function(f,d){return{classScore:f,label:d}}).reduce(function(f,d){return f.classScore>d.classScore?f:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Vi),pW=function(n){Ke(e,n);function e(t){t===void 0&&(t=!0);var r=this,a=Object.assign({},{withSeparableConvs:t,iouThreshold:rW,classes:["face"]},t?{anchors:iW,meanRgb:oW}:{anchors:aW,withClassScores:!0});return r=n.call(this,a)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Fe(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new Fr(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?uW:sW},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(sD),vW=function(n){Ke(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return e}(C1),Bh=function(){function n(){}return n.prototype.then=function(e){return Fe(this,void 0,void 0,function(){var t;return Pe(this,function(r){switch(r.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Fe(this,void 0,void 0,function(){return Pe(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},n}();function um(n,e,t,r,a){return a===void 0&&(a=function(i){var o=i.alignedRect;return o}),Fe(this,void 0,void 0,function(){var i,o,u,c,f;return Pe(this,function(d){switch(d.label){case 0:return i=n.map(function(p){return Xk(p)?a(p):p.detection}),u=r,u?[3,5]:e instanceof Wt?[4,y1(e,i)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,g1(e,i)];case 3:c=d.sent(),d.label=4;case 4:u=c,d.label=5;case 5:return o=u,[4,t(o)];case 6:return f=d.sent(),o.forEach(function(p){return p instanceof Wt&&p.dispose()}),[2,f]}})})}function R1(n,e,t,r,a){return Fe(this,void 0,void 0,function(){var i=this;return Pe(this,function(o){return[2,um([n],e,function(u){return Fe(i,void 0,void 0,function(){return Pe(this,function(c){return[2,t(u[0])]})})},r,a)]})})}function mW(n){return Te(function(){return Mr(bn(n,3).reverse(),3)})}var wp=2,kv=12;function gW(n,e){var t=im(n,e),r=b1(n,e);function a(f,d){var p=cn(n(f));return e.push({paramPath:d}),p}function i(f,d,p){p===void 0&&(p=!1);var v=t(f[0],f[1],3,d+"/conv1"),g=a(f[1],d+"/prelu1_alpha"),y=t(f[1],f[2],3,d+"/conv2"),x=a(f[2],d+"/prelu2_alpha"),w=t(f[2],f[3],p?2:3,d+"/conv3"),_=a(f[3],d+"/prelu3_alpha");return{conv1:v,prelu1_alpha:g,conv2:y,prelu2_alpha:x,conv3:w,prelu3_alpha:_}}function o(){var f=i([3,10,16,32],"pnet"),d=t(32,2,1,"pnet/conv4_1"),p=t(32,4,1,"pnet/conv4_2");return $n($n({},f),{conv4_1:d,conv4_2:p})}function u(){var f=i([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),p=a(128,"rnet/prelu4_alpha"),v=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return $n($n({},f),{fc1:d,prelu4_alpha:p,fc2_1:v,fc2_2:g})}function c(){var f=i([3,32,64,64],"onet"),d=t(64,128,2,"onet/conv4"),p=a(128,"onet/prelu4_alpha"),v=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),x=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return $n($n({},f),{conv4:d,prelu4_alpha:p,fc1:v,prelu5_alpha:g,fc2_1:y,fc2_2:x,fc2_3:w})}return{extractPNetParams:o,extractRNetParams:u,extractONetParams:c}}function yW(n){var e=qi(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],i=gW(t,a),o=i.extractPNetParams,u=i.extractRNetParams,c=i.extractONetParams,f=o(),d=u(),p=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:f,rnet:d,onet:p},paramMappings:a}}function bW(n,e){var t=rs(n,e);function r(d){var p=t(d+"/weights",4,d+"/filters"),v=t(d+"/bias",1);return{filters:p,bias:v}}function a(d){var p=t(d+"/weights",2),v=t(d+"/bias",1);return{weights:p,bias:v}}function i(d){return t(d,1)}function o(d){var p=r(d+"/conv1"),v=i(d+"/prelu1_alpha"),g=r(d+"/conv2"),y=i(d+"/prelu2_alpha"),x=r(d+"/conv3"),w=i(d+"/prelu3_alpha");return{conv1:p,prelu1_alpha:v,conv2:g,prelu2_alpha:y,conv3:x,prelu3_alpha:w}}function u(){var d=o("pnet"),p=r("pnet/conv4_1"),v=r("pnet/conv4_2");return $n($n({},d),{conv4_1:p,conv4_2:v})}function c(){var d=o("rnet"),p=a("rnet/fc1"),v=i("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),y=a("rnet/fc2_2");return $n($n({},d),{fc1:p,prelu4_alpha:v,fc2_1:g,fc2_2:y})}function f(){var d=o("onet"),p=r("onet/conv4"),v=i("onet/prelu4_alpha"),g=a("onet/fc1"),y=i("onet/prelu5_alpha"),x=a("onet/fc2_1"),w=a("onet/fc2_2"),_=a("onet/fc2_3");return $n($n({},d),{conv4:p,prelu4_alpha:v,fc1:g,prelu5_alpha:y,fc2_1:x,fc2_2:w,fc2_3:_})}return{extractPNetParams:u,extractRNetParams:c,extractONetParams:f}}function xW(n){var e=[],t=bW(n,e),r=t.extractPNetParams,a=t.extractRNetParams,i=t.extractONetParams,o=r(),u=a(),c=i();return ji(n,e),{params:{pnet:o,rnet:u,onet:c},paramMappings:e}}function Hb(n,e){var t=e[0],r=e[1];return{height:Math.floor(t*n),width:Math.floor(r*n)}}function wW(n,e,t){for(var r=t[0],a=t[1],i=kv/n,o=[],u=Math.min(r,a)*i,c=0;u>=12;)o.push(i*Math.pow(e,c)),u=u*e,c+=1;return o}var T1=function(n){Ke(e,n);function e(t,r,a,i){return n.call(this,{left:t,top:r,right:a,bottom:i},!0)||this}return e}(Za);function uD(n){return Te(function(){return Yn(wn(n,xe(127.5)),xe(.0078125))})}function _l(n,e){return Te(function(){return st(Ht(n),Yn(e,Sv(Ht(Sv(n)))))})}function O1(n,e,t){return t===void 0&&(t=!1),Te(function(){var r=ya(n,e.conv1,"valid");return r=_l(r,e.prelu1_alpha),r=Tn(r,t?[2,2]:[3,3],[2,2],"same"),r=ya(r,e.conv2,"valid"),r=_l(r,e.prelu2_alpha),r=t?r:Tn(r,[3,3],[2,2],"valid"),r=ya(r,e.conv3,"valid"),r=_l(r,e.prelu3_alpha),r})}function _W(n,e){return Te(function(){var t=O1(n,e,!0),r=ya(t,e.conv4_1,"valid"),a=Kr(Jv(r,3),3),i=zi(wn(r,a),3),o=ya(t,e.conv4_2,"valid");return{prob:i,regions:o}})}function EW(n,e){return Te(function(){var t=Hb(e,n.shape.slice(1)),r=t.height,a=t.width,i=r1.resizeBilinear(n,[r,a]),o=uD(i);return Ko(o,[0,2,1,3])})}function SW(n,e,t,r){for(var a=[],i=n.arraySync(),o=0;o<n.shape[0];o++)for(var u=0;u<n.shape[1];u++)i[o][u]>=r&&a.push(new bt(u,o));var c=a.map(function(f){var d=new rm(Math.round((f.y*wp+1)/t),Math.round((f.x*wp+1)/t),Math.round((f.y*wp+kv)/t),Math.round((f.x*wp+kv)/t)),p=i[f.y][f.x],v=e.arraySync(),g=new T1(v[f.y][f.x][0],v[f.y][f.x][1],v[f.y][f.x][2],v[f.y][f.x][3]);return{cell:d,score:p,region:g}});return c}function CW(n,e,t,r,a){a.stage1=[];var i=e.map(function(v){return Te(function(){var g={scale:v},y=EW(n,v),x=Date.now(),w=_W(y,r),_=w.prob,S=w.regions;g.pnet=Date.now()-x;var C=bn(bn(_,3)[1])[0],R=bn(S)[0];return{scoresTensor:C,regionsTensor:R,scale:v,statsForScale:g}})}),o=i.map(function(v){var g=v.scoresTensor,y=v.regionsTensor,x=v.scale,w=v.statsForScale,_=SW(g,y,x,t);if(g.dispose(),y.dispose(),!_.length)return a.stage1.push(w),[];var S=Date.now(),C=fh(_.map(function(R){return R.cell}),_.map(function(R){return R.score}),.5);return w.nms=Date.now()-S,w.numBoxes=C.length,a.stage1.push(w),C.map(function(R){return _[R]})}),u=o.reduce(function(v,g){return v.concat(g)},[]),c=[],f=[];if(u.length>0){var d=Date.now(),p=fh(u.map(function(v){return v.cell}),u.map(function(v){return v.score}),.7);a.stage1_nms=Date.now()-d,f=p.map(function(v){return u[v].score}),c=p.map(function(v){return u[v]}).map(function(v){var g=v.cell,y=v.region;return new rm(g.left+y.left*g.width,g.top+y.top*g.height,g.right+y.right*g.width,g.bottom+y.bottom*g.height).toSquare().round()})}return{boxes:c,scores:f}}function lD(n,e,t){var r=t.width,a=t.height;return Fe(this,void 0,void 0,function(){var i,o,u,c=this;return Pe(this,function(f){switch(f.label){case 0:return i=Fi(n),[4,Promise.all(e.map(function(d){return Fe(c,void 0,void 0,function(){var p,v,g,y,x,w,_,S;return Pe(this,function(C){return p=d.padAtBorders(n.height,n.width),v=p.y,g=p.ey,y=p.x,x=p.ex,w=y-1,_=v-1,S=i.getImageData(w,_,x-w,g-_),[2,Jn.isNodejs()?m1(S):createImageBitmap(S)]})})}))];case 1:return o=f.sent(),u=[],o.forEach(function(d){var p=am({width:r,height:a}),v=Fi(p);v.drawImage(d,0,0,r,a);for(var g=v.getImageData(0,0,r,a).data,y=[],x=0;x<g.length;x+=4)y.push(g[x+2]),y.push(g[x+1]),y.push(g[x]);u.push(y)}),[2,u.map(function(d){var p=Te(function(){var v=Ko(pr(d,[1,r,a,3]),[0,2,1,3]).toFloat();return uD(v)});return p})]}})})}function RW(n,e){return Te(function(){var t=O1(n,e),r=pa(t,[t.shape[0],e.fc1.weights.shape[0]]),a=qa(r,e.fc1),i=_l(a,e.prelu4_alpha),o=qa(i,e.fc2_1),u=Kr(Jv(o,1),1),c=zi(wn(o,u),1),f=qa(i,e.fc2_2),d=bn(c,1)[1];return{scores:d,regions:f}})}function TW(n,e,t,r,a){return Fe(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S;return Pe(this,function(C){switch(C.label){case 0:return i=Date.now(),[4,lD(n,e,{width:24,height:24})];case 1:return o=C.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(R){var T=RW(R,r);return R.dispose(),T}),a.stage2_rnet=Date.now()-i,c=u.length>1?yn(u.map(function(R){return R.scores})):u[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[C.sent()]),c.dispose(),v=f.map(function(R,T){return{score:R,idx:T}}).filter(function(R){return R.score>t}).map(function(R){var T=R.idx;return T}),g=v.map(function(R){return e[R]}),y=v.map(function(R){return f[R]}),x=[],w=[],g.length>0&&(i=Date.now(),_=fh(g,y,.7),a.stage2_nms=Date.now()-i,S=_.map(function(R){var T=u[v[R]].regions.arraySync();return new T1(T[0][0],T[0][1],T[0][2],T[0][3])}),w=_.map(function(R){return y[R]}),x=_.map(function(R,T){return g[R].calibrate(S[T])})),u.forEach(function(R){R.regions.dispose(),R.scores.dispose()}),[2,{boxes:x,scores:w}]}})})}function OW(n,e){return Te(function(){var t=O1(n,e);t=Tn(t,[2,2],[2,2],"same"),t=ya(t,e.conv4,"valid"),t=_l(t,e.prelu4_alpha);var r=pa(t,[t.shape[0],e.fc1.weights.shape[0]]),a=qa(r,e.fc1),i=_l(a,e.prelu5_alpha),o=qa(i,e.fc2_1),u=Kr(Jv(o,1),1),c=zi(wn(o,u),1),f=qa(i,e.fc2_2),d=qa(i,e.fc2_3),p=bn(c,1)[1];return{scores:p,regions:f,points:d}})}function AW(n,e,t,r,a){return Fe(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y,x,w,_,S,C;return Pe(this,function(R){switch(R.label){case 0:return i=Date.now(),[4,lD(n,e,{width:48,height:48})];case 1:return o=R.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(T){var O=OW(T,r);return T.dispose(),O}),a.stage3_onet=Date.now()-i,c=u.length>1?yn(u.map(function(T){return T.scores})):u[0].scores,p=(d=Array).from,[4,c.data()];case 2:return f=p.apply(d,[R.sent()]),c.dispose(),v=f.map(function(T,O){return{score:T,idx:O}}).filter(function(T){return T.score>t}).map(function(T){var O=T.idx;return O}),g=v.map(function(T){var O=u[T].regions.arraySync();return new T1(O[0][0],O[0][1],O[0][2],O[0][3])}),y=v.map(function(T,O){return e[T].calibrate(g[O])}),x=v.map(function(T){return f[T]}),w=[],_=[],S=[],y.length>0&&(i=Date.now(),C=fh(y,x,.7,!1),a.stage3_nms=Date.now()-i,w=C.map(function(T){return y[T]}),_=C.map(function(T){return x[T]}),S=C.map(function(T,O){return Array(5).fill(0).map(function(k,D){var N=u[T].points.arraySync();return new bt(N[0][D]*(w[O].width+1)+w[O].left,N[0][D+5]*(w[O].height+1)+w[O].top)})})),u.forEach(function(T){T.regions.dispose(),T.scores.dispose(),T.points.dispose()}),[2,{boxes:w,scores:_,points:S}]}})})}var kW=function(n){Ke(e,n);function e(){return n.call(this,"Mtcnn")||this}return e.prototype.load=function(t){return Fe(this,void 0,void 0,function(){return Pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,t)]})})},e.prototype.loadFromDisk=function(t){return Fe(this,void 0,void 0,function(){return Pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,t)]})})},e.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,k,D;return Pe(this,function(N){switch(N.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=t.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},u=Date.now(),c=Te(function(){return mW(Kr(l1.fromPixels(i)).toFloat())}),f=function(M){return c.dispose(),o.total=Date.now()-u,M},d=c.shape.slice(1),p=d[0],v=d[1],g=new iD(r),y=g.minFaceSize,x=g.scaleFactor,w=g.maxNumScales,_=g.scoreThresholds,S=g.scaleSteps,C=(S||wW(y,x,[p,v])).filter(function(M){var B=Hb(M,[p,v]);return Math.min(B.width,B.height)>kv}).slice(0,w),o.scales=C,o.pyramid=C.map(function(M){return Hb(M,[p,v])}),R=Date.now(),[4,CW(c,C,_[0],a.pnet,o)];case 1:return T=N.sent(),o.total_stage1=Date.now()-R,T.boxes.length?(o.stage2_numInputBoxes=T.boxes.length,R=Date.now(),[4,TW(i,T.boxes,_[1],a.rnet,o)]):[2,f({results:[],stats:o})];case 2:return O=N.sent(),o.total_stage2=Date.now()-R,O.boxes.length?(o.stage3_numInputBoxes=O.boxes.length,R=Date.now(),[4,AW(i,O.boxes,_[2],a.onet,o)]):[2,f({results:[],stats:o})];case 3:return k=N.sent(),o.total_stage3=Date.now()-R,D=k.boxes.map(function(M,B){return om(ph({},new Fr(k.scores[B],new h1(M.left/v,M.top/p,M.width/v,M.height/p),{height:p,width:v})),new i5(k.points[B].map(function(z){return z.sub(new bt(M.left,M.top)).div(new bt(M.width,M.height))}),{width:M.width,height:M.height}))}),[2,f({results:D,stats:o})]}})})},e.prototype.forward=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,In(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},e.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,In(t)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return xW(t)},e.prototype.extractParams=function(t){return yW(t)},e}(Vi),DW=.4,NW=[new bt(1.603231,2.094468),new bt(6.041143,7.080126),new bt(2.882459,3.518061),new bt(4.266906,5.178857),new bt(9.041765,10.66308)],IW=[117.001,114.697,97.404],MW=function(n){Ke(e,n);function e(){var t=this,r={withSeparableConvs:!0,iouThreshold:DW,classes:["face"],anchors:NW,meanRgb:IW,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=n.call(this,r)||this,t}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Fe(this,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new Fr(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e}(sD),Zr={ssdMobilenetv1:new oD,tinyFaceDetector:new MW,tinyYolov2:new pW,mtcnn:new kW,faceLandmark68Net:new Jk,faceLandmark68TinyNet:new F5,faceRecognitionNet:new j5,faceExpressionNet:new w5,ageGenderNet:new D5},cD=function(n){Ke(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(Bh),A1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,a=this;return Pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,um(t,this.input,function(o){return Fe(a,void 0,void 0,function(){return Pe(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return Zr.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){return Kk(o,r[u])})]}})})},e.prototype.withAgeAndGender=function(){return new I1(this,this.input)},e}(cD),k1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,R1(t,this.input,function(i){return Zr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,Kk(t,r)]}})})},e.prototype.withAgeAndGender=function(){return new M1(this,this.input)},e}(cD),D1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new F1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new L1(this,this.input)},e}(A1),N1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new P1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new B1(this,this.input)},e}(k1),fD=function(n){Ke(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return e}(Bh),I1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,a=this;return Pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,um(t,this.input,function(o){return Fe(a,void 0,void 0,function(){return Pe(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return Zr.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){var c=r[u],f=c.age,d=c.gender,p=c.genderProbability;return rD(aD(o,d,p),f)})]}})})},e.prototype.withFaceExpressions=function(){return new A1(this,this.input)},e}(fD),M1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,a,i,o;return Pe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?[4,R1(t,this.input,function(c){return Zr.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=u.sent(),a=r.age,i=r.gender,o=r.genderProbability,[2,rD(aD(t,i,o),a)]}})})},e.prototype.withFaceExpressions=function(){return new k1(this,this.input)},e}(fD),F1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new D1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new L1(this,this.input)},e}(I1),P1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new N1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new B1(this,this.input)},e}(M1),hD=function(n){Ke(e,n);function e(t,r){var a=n.call(this)||this;return a.parentTask=t,a.input=r,a}return e}(Bh),L1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,um(t,this.input,function(i){return Promise.all(i.map(function(o){return Zr.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,o){return nD(t[o],i)})]}})})},e.prototype.withFaceExpressions=function(){return new D1(this,this.input)},e.prototype.withAgeAndGender=function(){return new F1(this,this.input)},e}(hD),B1=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,R1(t,this.input,function(i){return Zr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,nD(t,r)]}})})},e.prototype.withFaceExpressions=function(){return new N1(this,this.input)},e.prototype.withAgeAndGender=function(){return new P1(this,this.input)},e}(hD),dD=function(n){Ke(e,n);function e(t,r,a){var i=n.call(this)||this;return i.parentTask=t,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Zr.faceLandmark68TinyNet:Zr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(Bh),FW=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return Pe(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return t=c.sent(),r=t.map(function(f){return f.detection}),this.input instanceof Wt?[4,y1(this.input,r)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,g1(this.input,r)];case 4:i=c.sent(),c.label=5;case 5:return a=i,[4,Promise.all(a.map(function(f){return u.landmarkNet.detectLandmarks(f)}))];case 6:return o=c.sent(),a.forEach(function(f){return f instanceof Wt&&f.dispose()}),[2,t.map(function(f,d){return om(f,o[d])})]}})})},e.prototype.withFaceExpressions=function(){return new D1(this,this.input)},e.prototype.withAgeAndGender=function(){return new F1(this,this.input)},e.prototype.withFaceDescriptors=function(){return new L1(this,this.input)},e}(dD),PW=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,a,i,o;return Pe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?(r=t.detection,this.input instanceof Wt?[4,y1(this.input,[r])]:[3,3]):[2];case 2:return i=u.sent(),[3,5];case 3:return[4,g1(this.input,[r])];case 4:i=u.sent(),u.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=u.sent(),a.forEach(function(c){return c instanceof Wt&&c.dispose()}),[2,om(t,o)]}})})},e.prototype.withFaceExpressions=function(){return new N1(this,this.input)},e.prototype.withAgeAndGender=function(){return new P1(this,this.input)},e.prototype.withFaceDescriptor=function(){return new B1(this,this.input)},e}(dD),pD=function(n){Ke(e,n);function e(t,r){r===void 0&&(r=new sm);var a=n.call(this)||this;return a.input=t,a.options=r,a}return e}(Bh),vD=function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r,a,i;return Pe(this,function(o){switch(o.label){case 0:return t=this,r=t.input,a=t.options,a instanceof iD?[4,Zr.mtcnn.forward(r,a)]:[3,2];case 1:return[2,o.sent().map(function(u){return u.detection})];case 2:if(i=a instanceof vW?function(u){return Zr.tinyFaceDetector.locateFaces(u,a)}:a instanceof sm?function(u){return Zr.ssdMobilenetv1.locateFaces(u,a)}:a instanceof C1?function(u){return Zr.tinyYolov2.locateFaces(u,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Fe(t,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(o){return ph({},o)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new FW(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new A1(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new I1(this.runAndExtendWithFaceDetections(),this.input)},e}(pD);(function(n){Ke(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Fe(this,void 0,void 0,function(){var t,r;return Pe(this,function(a){switch(a.label){case 0:return[4,new vD(this.input,this.options)];case 1:return t=a.sent(),r=t[0],t.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Fe(t,void 0,void 0,function(){var a;return Pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?ph({},a):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new PW(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new k1(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new M1(this.runAndExtendWithFaceDetection(),this.input)},e})(pD);function s7(n,e){return e===void 0&&(e=new sm),new vD(n,e)}function LW(n,e){if(n.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(n),r=Array.from(e);return Math.sqrt(t.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}(function(){function n(e,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(o){if(o instanceof gp)return o;if(o instanceof Float32Array)return new gp(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new gp(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(e,t){return t.map(function(r){return LW(r,e)}).reduce(function(r,a){return r+a},0)/(t.length||1)},n.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new uR(i,t.computeMeanDistance(e,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},n.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new uR("unknown",t.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},n.fromJSON=function(e){var t=e.labeledDescriptors.map(function(r){return gp.fromJSON(r)});return new n(t,e.distanceThreshold)},n})();function BW(n,e){var t=new qs(e.width,e.height),r=t.width,a=t.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(n))return n.map(function(u){return BW(u,{width:r,height:a})});if(Xk(n)){var i=n.detection.forSize(r,a),o=n.unshiftedLandmarks.forSize(i.box.width,i.box.height);return om(ph(n,i),o)}return dh(n)?ph(n,n.detection.forSize(r,a)):n instanceof hh||n instanceof Fr?n.forSize(r,a):n}var yf={},dR;function zW(){if(dR)return yf;dR=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.styleq=void 0;var n=new WeakMap,e="$$css";function t(a){var i,o,u;return a!=null&&(i=a.disableCache===!0,o=a.disableMix===!0,u=a.transform),function(){for(var f=[],d="",p=null,v="",g=i?null:n,y=new Array(arguments.length),x=0;x<arguments.length;x++)y[x]=arguments[x];for(;y.length>0;){var w=y.pop();if(!(w==null||w===!1)){if(Array.isArray(w)){for(var _=0;_<w.length;_++)y.push(w[_]);continue}var S=u!=null?u(w):w;if(S.$$css!=null){var C="";if(g!=null&&g.has(S)){var R=g.get(S);R!=null&&(C=R[0],v=R[2],f.push.apply(f,R[1]),g=R[3])}else{var T=[];for(var O in S){var k=S[O];if(O===e){var D=S[O];D!==!0&&(v=v?D+"; "+v:D);continue}typeof k=="string"||k===null?f.includes(O)||(f.push(O),g!=null&&T.push(O),typeof k=="string"&&(C+=C?" "+k:k)):console.error("styleq: ".concat(O," typeof ").concat(String(k),' is not "string" or "null".'))}if(g!=null){var N=new WeakMap;g.set(S,[C,T,v,N]),g=N}}C&&(d=d?C+" "+d:C)}else if(o)p==null&&(p={}),p=Object.assign({},S,p);else{var M=null;for(var B in S){var z=S[B];z!==void 0&&(f.includes(B)||(z!=null&&(p==null&&(p={}),M==null&&(M={}),M[B]=z),f.push(B),g=null))}M!=null&&(p=Object.assign(M,p))}}}var ee=[d,p,v];return ee}}var r=yf.styleq=t();return r.factory=t,yf}var UW=zW();function u7(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const[r,a,i]=UW.styleq(e),o={};return r!=null&&r!==""&&(o.className=r),a!=null&&Object.keys(a).length>0&&(o.style=a),i!=null&&i!==""&&(o["data-style-src"]=i),o}var C0="Invariant Violation",pR=Object.setPrototypeOf,VW=pR===void 0?function(n,e){return n.__proto__=e,n}:pR,mD=function(n){ti(e,n);function e(t){t===void 0&&(t=C0);var r=n.call(this,typeof t=="number"?C0+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return r.framesToPop=1,r.name=C0,VW(r,e.prototype),r}return e}(Error);function Rs(n,e){if(!n)throw new mD(e)}var gD=["debug","log","warn","error","silent"],jW=gD.indexOf("log");function _p(n){return function(){if(gD.indexOf(n)>=jW){var e=console[n]||console.log;return e.apply(console,arguments)}}}(function(n){n.debug=_p("debug"),n.log=_p("log"),n.warn=_p("warn"),n.error=_p("error")})(Rs||(Rs={}));var z1="3.13.7";function ha(n){try{return n()}catch{}}const Gb=ha(function(){return globalThis})||ha(function(){return window})||ha(function(){return self})||ha(function(){return global})||ha(function(){return ha.constructor("return this")()});var vR=new Map;function Qb(n){var e=vR.get(n)||1;return vR.set(n,e+1),"".concat(n,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function yD(n,e){e===void 0&&(e=0);var t=Qb("stringifyForDisplay");return JSON.stringify(n,function(r,a){return a===void 0?t:a},e).split(JSON.stringify(t)).join("<undefined>")}function Ep(n){return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(typeof e=="number"){var a=e;e=U1(a),e||(e=V1(a,t),t=[])}n.apply(void 0,[e].concat(t))}}var Ce=Object.assign(function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];e||Rs(e,U1(t,r)||V1(t,r))},{debug:Ep(Rs.debug),log:Ep(Rs.log),warn:Ep(Rs.warn),error:Ep(Rs.error)});function ar(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new mD(U1(n,e)||V1(n,e))}var mR=Symbol.for("ApolloErrorMessageHandler_"+z1);function bD(n){if(typeof n=="string")return n;try{return yD(n,2).slice(0,1e3)}catch{return"<non-serializable>"}}function U1(n,e){if(e===void 0&&(e=[]),!!n)return Gb[mR]&&Gb[mR](n,e.map(bD))}function V1(n,e){if(e===void 0&&(e=[]),!!n)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:z1,message:n,args:e.map(bD)})))}function Fp(n,e){if(!!!n)throw new Error(e)}function qW(n){return typeof n=="object"&&n!==null}function WW(n,e){if(!!!n)throw new Error("Unexpected invariant triggered.")}const HW=/\r\n|[\n\r]/g;function $b(n,e){let t=0,r=1;for(const a of n.body.matchAll(HW)){if(typeof a.index=="number"||WW(!1),a.index>=e)break;t=a.index+a[0].length,r+=1}return{line:r,column:e+1-t}}function GW(n){return xD(n.source,$b(n.source,n.start))}function xD(n,e){const t=n.locationOffset.column-1,r="".padStart(t)+n.body,a=e.line-1,i=n.locationOffset.line-1,o=e.line+i,u=e.line===1?t:0,c=e.column+u,f=`${n.name}:${o}:${c}
`,d=r.split(/\r\n|[\n\r]/g),p=d[a];if(p.length>120){const v=Math.floor(c/80),g=c%80,y=[];for(let x=0;x<p.length;x+=80)y.push(p.slice(x,x+80));return f+gR([[`${o} |`,y[0]],...y.slice(1,v+1).map(x=>["|",x]),["|","^".padStart(g)],["|",y[v+1]]])}return f+gR([[`${o-1} |`,d[a-1]],[`${o} |`,p],["|","^".padStart(c)],[`${o+1} |`,d[a+1]]])}function gR(n){const e=n.filter(([r,a])=>a!==void 0),t=Math.max(...e.map(([r])=>r.length));return e.map(([r,a])=>r.padStart(t)+(a?" "+a:"")).join(`
`)}function QW(n){const e=n[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:e}class j1 extends Error{constructor(e,...t){var r,a,i;const{nodes:o,source:u,positions:c,path:f,originalError:d,extensions:p}=QW(t);super(e),this.name="GraphQLError",this.path=f??void 0,this.originalError=d??void 0,this.nodes=yR(Array.isArray(o)?o:o?[o]:void 0);const v=yR((r=this.nodes)===null||r===void 0?void 0:r.map(y=>y.loc).filter(y=>y!=null));this.source=u??(v==null||(a=v[0])===null||a===void 0?void 0:a.source),this.positions=c??(v==null?void 0:v.map(y=>y.start)),this.locations=c&&u?c.map(y=>$b(u,y)):v==null?void 0:v.map(y=>$b(y.source,y.start));const g=qW(d==null?void 0:d.extensions)?d==null?void 0:d.extensions:void 0;this.extensions=(i=p??g)!==null&&i!==void 0?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),d!=null&&d.stack?Object.defineProperty(this,"stack",{value:d.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,j1):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+GW(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+xD(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function yR(n){return n===void 0||n.length===0?void 0:n}function kn(n,e,t){return new j1(`Syntax Error: ${t}`,{source:n,positions:[e]})}class $W{constructor(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class wD{constructor(e,t,r,a,i,o){this.kind=e,this.start=t,this.end=r,this.line=a,this.column=i,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const _D={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},KW=new Set(Object.keys(_D));function bR(n){const e=n==null?void 0:n.kind;return typeof e=="string"&&KW.has(e)}var ll;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(ll||(ll={}));var Kb;(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Kb||(Kb={}));var _e;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(_e||(_e={}));function Xb(n){return n===9||n===32}function vh(n){return n>=48&&n<=57}function ED(n){return n>=97&&n<=122||n>=65&&n<=90}function SD(n){return ED(n)||n===95}function XW(n){return ED(n)||vh(n)||n===95}function YW(n){var e;let t=Number.MAX_SAFE_INTEGER,r=null,a=-1;for(let o=0;o<n.length;++o){var i;const u=n[o],c=ZW(u);c!==u.length&&(r=(i=r)!==null&&i!==void 0?i:o,a=o,o!==0&&c<t&&(t=c))}return n.map((o,u)=>u===0?o:o.slice(t)).slice((e=r)!==null&&e!==void 0?e:0,a+1)}function ZW(n){let e=0;for(;e<n.length&&Xb(n.charCodeAt(e));)++e;return e}function JW(n,e){const t=n.replace(/"""/g,'\\"""'),r=t.split(/\r\n|[\n\r]/g),a=r.length===1,i=r.length>1&&r.slice(1).every(g=>g.length===0||Xb(g.charCodeAt(0))),o=t.endsWith('\\"""'),u=n.endsWith('"')&&!o,c=n.endsWith("\\"),f=u||c,d=!a||n.length>70||f||i||o;let p="";const v=a&&Xb(n.charCodeAt(0));return(d&&!v||i)&&(p+=`
`),p+=t,(d||f)&&(p+=`
`),'"""'+p+'"""'}var pe;(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"})(pe||(pe={}));class eH{constructor(e){const t=new wD(pe.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==pe.EOF)do if(e.next)e=e.next;else{const t=nH(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===pe.COMMENT);return e}}function tH(n){return n===pe.BANG||n===pe.DOLLAR||n===pe.AMP||n===pe.PAREN_L||n===pe.PAREN_R||n===pe.SPREAD||n===pe.COLON||n===pe.EQUALS||n===pe.AT||n===pe.BRACKET_L||n===pe.BRACKET_R||n===pe.BRACE_L||n===pe.PIPE||n===pe.BRACE_R}function uc(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function lm(n,e){return CD(n.charCodeAt(e))&&RD(n.charCodeAt(e+1))}function CD(n){return n>=55296&&n<=56319}function RD(n){return n>=56320&&n<=57343}function Zs(n,e){const t=n.source.body.codePointAt(e);if(t===void 0)return pe.EOF;if(t>=32&&t<=126){const r=String.fromCodePoint(t);return r==='"'?`'"'`:`"${r}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function un(n,e,t,r,a){const i=n.line,o=1+t-n.lineStart;return new wD(e,t,r,i,o,a)}function nH(n,e){const t=n.source.body,r=t.length;let a=e;for(;a<r;){const i=t.charCodeAt(a);switch(i){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++n.line,n.lineStart=a;continue;case 13:t.charCodeAt(a+1)===10?a+=2:++a,++n.line,n.lineStart=a;continue;case 35:return rH(n,a);case 33:return un(n,pe.BANG,a,a+1);case 36:return un(n,pe.DOLLAR,a,a+1);case 38:return un(n,pe.AMP,a,a+1);case 40:return un(n,pe.PAREN_L,a,a+1);case 41:return un(n,pe.PAREN_R,a,a+1);case 46:if(t.charCodeAt(a+1)===46&&t.charCodeAt(a+2)===46)return un(n,pe.SPREAD,a,a+3);break;case 58:return un(n,pe.COLON,a,a+1);case 61:return un(n,pe.EQUALS,a,a+1);case 64:return un(n,pe.AT,a,a+1);case 91:return un(n,pe.BRACKET_L,a,a+1);case 93:return un(n,pe.BRACKET_R,a,a+1);case 123:return un(n,pe.BRACE_L,a,a+1);case 124:return un(n,pe.PIPE,a,a+1);case 125:return un(n,pe.BRACE_R,a,a+1);case 34:return t.charCodeAt(a+1)===34&&t.charCodeAt(a+2)===34?lH(n,a):iH(n,a)}if(vh(i)||i===45)return aH(n,a,i);if(SD(i))return cH(n,a);throw kn(n.source,a,i===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:uc(i)||lm(t,a)?`Unexpected character: ${Zs(n,a)}.`:`Invalid character: ${Zs(n,a)}.`)}return un(n,pe.EOF,r,r)}function rH(n,e){const t=n.source.body,r=t.length;let a=e+1;for(;a<r;){const i=t.charCodeAt(a);if(i===10||i===13)break;if(uc(i))++a;else if(lm(t,a))a+=2;else break}return un(n,pe.COMMENT,e,a,t.slice(e+1,a))}function aH(n,e,t){const r=n.source.body;let a=e,i=t,o=!1;if(i===45&&(i=r.charCodeAt(++a)),i===48){if(i=r.charCodeAt(++a),vh(i))throw kn(n.source,a,`Invalid number, unexpected digit after 0: ${Zs(n,a)}.`)}else a=R0(n,a,i),i=r.charCodeAt(a);if(i===46&&(o=!0,i=r.charCodeAt(++a),a=R0(n,a,i),i=r.charCodeAt(a)),(i===69||i===101)&&(o=!0,i=r.charCodeAt(++a),(i===43||i===45)&&(i=r.charCodeAt(++a)),a=R0(n,a,i),i=r.charCodeAt(a)),i===46||SD(i))throw kn(n.source,a,`Invalid number, expected digit but got: ${Zs(n,a)}.`);return un(n,o?pe.FLOAT:pe.INT,e,a,r.slice(e,a))}function R0(n,e,t){if(!vh(t))throw kn(n.source,e,`Invalid number, expected digit but got: ${Zs(n,e)}.`);const r=n.source.body;let a=e+1;for(;vh(r.charCodeAt(a));)++a;return a}function iH(n,e){const t=n.source.body,r=t.length;let a=e+1,i=a,o="";for(;a<r;){const u=t.charCodeAt(a);if(u===34)return o+=t.slice(i,a),un(n,pe.STRING,e,a+1,o);if(u===92){o+=t.slice(i,a);const c=t.charCodeAt(a+1)===117?t.charCodeAt(a+2)===123?oH(n,a):sH(n,a):uH(n,a);o+=c.value,a+=c.size,i=a;continue}if(u===10||u===13)break;if(uc(u))++a;else if(lm(t,a))a+=2;else throw kn(n.source,a,`Invalid character within String: ${Zs(n,a)}.`)}throw kn(n.source,a,"Unterminated string.")}function oH(n,e){const t=n.source.body;let r=0,a=3;for(;a<12;){const i=t.charCodeAt(e+a++);if(i===125){if(a<5||!uc(r))break;return{value:String.fromCodePoint(r),size:a}}if(r=r<<4|Of(i),r<0)break}throw kn(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+a)}".`)}function sH(n,e){const t=n.source.body,r=xR(t,e+2);if(uc(r))return{value:String.fromCodePoint(r),size:6};if(CD(r)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const a=xR(t,e+8);if(RD(a))return{value:String.fromCodePoint(r,a),size:12}}throw kn(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function xR(n,e){return Of(n.charCodeAt(e))<<12|Of(n.charCodeAt(e+1))<<8|Of(n.charCodeAt(e+2))<<4|Of(n.charCodeAt(e+3))}function Of(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function uH(n,e){const t=n.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw kn(n.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function lH(n,e){const t=n.source.body,r=t.length;let a=n.lineStart,i=e+3,o=i,u="";const c=[];for(;i<r;){const f=t.charCodeAt(i);if(f===34&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34){u+=t.slice(o,i),c.push(u);const d=un(n,pe.BLOCK_STRING,e,i+3,YW(c).join(`
`));return n.line+=c.length-1,n.lineStart=a,d}if(f===92&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34&&t.charCodeAt(i+3)===34){u+=t.slice(o,i),o=i+1,i+=4;continue}if(f===10||f===13){u+=t.slice(o,i),c.push(u),f===13&&t.charCodeAt(i+1)===10?i+=2:++i,u="",o=i,a=i;continue}if(uc(f))++i;else if(lm(t,i))i+=2;else throw kn(n.source,i,`Invalid character within String: ${Zs(n,i)}.`)}throw kn(n.source,i,"Unterminated string.")}function cH(n,e){const t=n.source.body,r=t.length;let a=e+1;for(;a<r;){const i=t.charCodeAt(a);if(XW(i))++a;else break}return un(n,pe.NAME,e,a,t.slice(e,a))}const fH=10,TD=2;function q1(n){return cm(n,[])}function cm(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return hH(n,e);default:return String(n)}}function hH(n,e){if(n===null)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(dH(n)){const r=n.toJSON();if(r!==n)return typeof r=="string"?r:cm(r,t)}else if(Array.isArray(n))return vH(n,t);return pH(n,t)}function dH(n){return typeof n.toJSON=="function"}function pH(n,e){const t=Object.entries(n);return t.length===0?"{}":e.length>TD?"["+mH(n)+"]":"{ "+t.map(([a,i])=>a+": "+cm(i,e)).join(", ")+" }"}function vH(n,e){if(n.length===0)return"[]";if(e.length>TD)return"[Array]";const t=Math.min(fH,n.length),r=n.length-t,a=[];for(let i=0;i<t;++i)a.push(cm(n[i],e));return r===1?a.push("... 1 more item"):r>1&&a.push(`... ${r} more items`),"["+a.join(", ")+"]"}function mH(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof n.constructor=="function"){const t=n.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const gH=globalThis.process&&!0,yH=gH?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var r;const a=t.prototype[Symbol.toStringTag],i=Symbol.toStringTag in e?e[Symbol.toStringTag]:(r=e.constructor)===null||r===void 0?void 0:r.name;if(a===i){const o=q1(e);throw new Error(`Cannot use ${a} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class OD{constructor(e,t="GraphQL request",r={line:1,column:1}){typeof e=="string"||Fp(!1,`Body must be a string. Received: ${q1(e)}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||Fp(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Fp(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function bH(n){return yH(n,OD)}function xH(n,e){const t=new wH(n,e),r=t.parseDocument();return Object.defineProperty(r,"tokenCount",{enumerable:!1,value:t.tokenCount}),r}class wH{constructor(e,t={}){const r=bH(e)?e:new OD(e);this._lexer=new eH(r),this._options=t,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(pe.NAME);return this.node(e,{kind:_e.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:_e.DOCUMENT,definitions:this.many(pe.SOF,this.parseDefinition,pe.EOF)})}parseDefinition(){if(this.peek(pe.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===pe.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw kn(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(pe.BRACE_L))return this.node(e,{kind:_e.OPERATION_DEFINITION,operation:ll.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let r;return this.peek(pe.NAME)&&(r=this.parseName()),this.node(e,{kind:_e.OPERATION_DEFINITION,operation:t,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(pe.NAME);switch(e.value){case"query":return ll.QUERY;case"mutation":return ll.MUTATION;case"subscription":return ll.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(pe.PAREN_L,this.parseVariableDefinition,pe.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:_e.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(pe.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(pe.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(pe.DOLLAR),this.node(e,{kind:_e.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:_e.SELECTION_SET,selections:this.many(pe.BRACE_L,this.parseSelection,pe.BRACE_R)})}parseSelection(){return this.peek(pe.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let r,a;return this.expectOptionalToken(pe.COLON)?(r=t,a=this.parseName()):a=t,this.node(e,{kind:_e.FIELD,alias:r,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(pe.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(pe.PAREN_L,t,pe.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,r=this.parseName();return this.expectToken(pe.COLON),this.node(t,{kind:_e.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(pe.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(pe.NAME)?this.node(e,{kind:_e.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:_e.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:_e.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:_e.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case pe.BRACKET_L:return this.parseList(e);case pe.BRACE_L:return this.parseObject(e);case pe.INT:return this.advanceLexer(),this.node(t,{kind:_e.INT,value:t.value});case pe.FLOAT:return this.advanceLexer(),this.node(t,{kind:_e.FLOAT,value:t.value});case pe.STRING:case pe.BLOCK_STRING:return this.parseStringLiteral();case pe.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:_e.BOOLEAN,value:!0});case"false":return this.node(t,{kind:_e.BOOLEAN,value:!1});case"null":return this.node(t,{kind:_e.NULL});default:return this.node(t,{kind:_e.ENUM,value:t.value})}case pe.DOLLAR:if(e)if(this.expectToken(pe.DOLLAR),this._lexer.token.kind===pe.NAME){const r=this._lexer.token.value;throw kn(this._lexer.source,t.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:_e.STRING,value:e.value,block:e.kind===pe.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:_e.LIST,values:this.any(pe.BRACKET_L,t,pe.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:_e.OBJECT,fields:this.any(pe.BRACE_L,t,pe.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,r=this.parseName();return this.expectToken(pe.COLON),this.node(t,{kind:_e.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(pe.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(pe.AT),this.node(t,{kind:_e.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(pe.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(pe.BRACKET_R),t=this.node(e,{kind:_e.LIST_TYPE,type:r})}else t=this.parseNamedType();return this.expectOptionalToken(pe.BANG)?this.node(e,{kind:_e.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:_e.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(pe.STRING)||this.peek(pe.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),a=this.many(pe.BRACE_L,this.parseOperationTypeDefinition,pe.BRACE_R);return this.node(e,{kind:_e.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:a})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(pe.COLON);const r=this.parseNamedType();return this.node(e,{kind:_e.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),a=this.parseConstDirectives();return this.node(e,{kind:_e.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:a})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:_e.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:a,directives:i,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(pe.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(pe.BRACE_L,this.parseFieldDefinition,pe.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),a=this.parseArgumentDefs();this.expectToken(pe.COLON);const i=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:_e.FIELD_DEFINITION,description:t,name:r,arguments:a,type:i,directives:o})}parseArgumentDefs(){return this.optionalMany(pe.PAREN_L,this.parseInputValueDef,pe.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName();this.expectToken(pe.COLON);const a=this.parseTypeReference();let i;this.expectOptionalToken(pe.EQUALS)&&(i=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:_e.INPUT_VALUE_DEFINITION,description:t,name:r,type:a,defaultValue:i,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:_e.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:a,directives:i,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:_e.UNION_TYPE_DEFINITION,description:t,name:r,directives:a,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(pe.EQUALS)?this.delimitedMany(pe.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:_e.ENUM_TYPE_DEFINITION,description:t,name:r,directives:a,values:i})}parseEnumValuesDefinition(){return this.optionalMany(pe.BRACE_L,this.parseEnumValueDefinition,pe.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),a=this.parseConstDirectives();return this.node(e,{kind:_e.ENUM_VALUE_DEFINITION,description:t,name:r,directives:a})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw kn(this._lexer.source,this._lexer.token.start,`${Sp(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:_e.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:a,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(pe.BRACE_L,this.parseInputValueDef,pe.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===pe.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),r=this.optionalMany(pe.BRACE_L,this.parseOperationTypeDefinition,pe.BRACE_R);if(t.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:_e.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(e,{kind:_e.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:_e.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:a,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:_e.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:a,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseUnionMemberTypes();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:_e.UNION_TYPE_EXTENSION,name:t,directives:r,types:a})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseEnumValuesDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:_e.ENUM_TYPE_EXTENSION,name:t,directives:r,values:a})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),r=this.parseConstDirectives(),a=this.parseInputFieldsDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:_e.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:a})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(pe.AT);const r=this.parseName(),a=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:_e.DIRECTIVE_DEFINITION,description:t,name:r,arguments:a,repeatable:i,locations:o})}parseDirectiveLocations(){return this.delimitedMany(pe.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Kb,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new $W(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw kn(this._lexer.source,t.start,`Expected ${AD(e)}, found ${Sp(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===pe.NAME&&t.value===e)this.advanceLexer();else throw kn(this._lexer.source,t.start,`Expected "${e}", found ${Sp(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===pe.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return kn(this._lexer.source,t.start,`Unexpected ${Sp(t)}.`)}any(e,t,r){this.expectToken(e);const a=[];for(;!this.expectOptionalToken(r);)a.push(t.call(this));return a}optionalMany(e,t,r){if(this.expectOptionalToken(e)){const a=[];do a.push(t.call(this));while(!this.expectOptionalToken(r));return a}return[]}many(e,t,r){this.expectToken(e);const a=[];do a.push(t.call(this));while(!this.expectOptionalToken(r));return a}delimitedMany(e,t){this.expectOptionalToken(e);const r=[];do r.push(t.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==pe.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw kn(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Sp(n){const e=n.value;return AD(n.kind)+(e!=null?` "${e}"`:"")}function AD(n){return tH(n)?`"${n}"`:n}function _H(n){return`"${n.replace(EH,SH)}"`}const EH=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function SH(n){return CH[n.charCodeAt(0)]}const CH=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],fm=Object.freeze({});function wa(n,e,t=_D){const r=new Map;for(const _ of Object.values(_e))r.set(_,RH(e,_));let a,i=Array.isArray(n),o=[n],u=-1,c=[],f=n,d,p;const v=[],g=[];do{u++;const _=u===o.length,S=_&&c.length!==0;if(_){if(d=g.length===0?void 0:v[v.length-1],f=p,p=g.pop(),S)if(i){f=f.slice();let R=0;for(const[T,O]of c){const k=T-R;O===null?(f.splice(k,1),R++):f[k]=O}}else{f=Object.defineProperties({},Object.getOwnPropertyDescriptors(f));for(const[R,T]of c)f[R]=T}u=a.index,o=a.keys,c=a.edits,i=a.inArray,a=a.prev}else if(p){if(d=i?u:o[u],f=p[d],f==null)continue;v.push(d)}let C;if(!Array.isArray(f)){var y,x;bR(f)||Fp(!1,`Invalid AST Node: ${q1(f)}.`);const R=_?(y=r.get(f.kind))===null||y===void 0?void 0:y.leave:(x=r.get(f.kind))===null||x===void 0?void 0:x.enter;if(C=R==null?void 0:R.call(e,f,d,p,v,g),C===fm)break;if(C===!1){if(!_){v.pop();continue}}else if(C!==void 0&&(c.push([d,C]),!_))if(bR(C))f=C;else{v.pop();continue}}if(C===void 0&&S&&c.push([d,f]),_)v.pop();else{var w;a={inArray:i,index:u,keys:o,edits:c,prev:a},i=Array.isArray(f),o=i?f:(w=t[f.kind])!==null&&w!==void 0?w:[],u=-1,c=[],p&&g.push(p),p=f}}while(a!==void 0);return c.length!==0?c[c.length-1][1]:n}function RH(n,e){const t=n[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function TH(n){return wa(n,AH)}const OH=80,AH={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>De(n.definitions,`

`)},OperationDefinition:{leave(n){const e=ft("(",De(n.variableDefinitions,", "),")"),t=De([n.operation,De([n.name,e]),De(n.directives," ")]," ");return(t==="query"?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:r})=>n+": "+e+ft(" = ",t)+ft(" ",De(r," "))},SelectionSet:{leave:({selections:n})=>sa(n)},Field:{leave({alias:n,name:e,arguments:t,directives:r,selectionSet:a}){const i=ft("",n,": ")+e;let o=i+ft("(",De(t,", "),")");return o.length>OH&&(o=i+ft(`(
`,Pp(De(t,`
`)),`
)`)),De([o,De(r," "),a]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+ft(" ",De(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>De(["...",ft("on ",n),De(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:r,selectionSet:a})=>`fragment ${n}${ft("(",De(t,", "),")")} on ${e} ${ft("",De(r," ")," ")}`+a},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?JW(n):_H(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+De(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+De(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+ft("(",De(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>ft("",n,`
`)+De(["schema",De(e," "),sa(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>ft("",n,`
`)+De(["scalar",e,De(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:a})=>ft("",n,`
`)+De(["type",e,ft("implements ",De(t," & ")),De(r," "),sa(a)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:r,directives:a})=>ft("",n,`
`)+e+(wR(t)?ft(`(
`,Pp(De(t,`
`)),`
)`):ft("(",De(t,", "),")"))+": "+r+ft(" ",De(a," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:r,directives:a})=>ft("",n,`
`)+De([e+": "+t,ft("= ",r),De(a," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:a})=>ft("",n,`
`)+De(["interface",e,ft("implements ",De(t," & ")),De(r," "),sa(a)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:r})=>ft("",n,`
`)+De(["union",e,De(t," "),ft("= ",De(r," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:r})=>ft("",n,`
`)+De(["enum",e,De(t," "),sa(r)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>ft("",n,`
`)+De([e,De(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:r})=>ft("",n,`
`)+De(["input",e,De(t," "),sa(r)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:r,locations:a})=>ft("",n,`
`)+"directive @"+e+(wR(t)?ft(`(
`,Pp(De(t,`
`)),`
)`):ft("(",De(t,", "),")"))+(r?" repeatable":"")+" on "+De(a," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>De(["extend schema",De(n," "),sa(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>De(["extend scalar",n,De(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>De(["extend type",n,ft("implements ",De(e," & ")),De(t," "),sa(r)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>De(["extend interface",n,ft("implements ",De(e," & ")),De(t," "),sa(r)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>De(["extend union",n,De(e," "),ft("= ",De(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>De(["extend enum",n,De(e," "),sa(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>De(["extend input",n,De(e," "),sa(t)]," ")}};function De(n,e=""){var t;return(t=n==null?void 0:n.filter(r=>r).join(e))!==null&&t!==void 0?t:""}function sa(n){return ft(`{
`,Pp(De(n,`
`)),`
}`)}function ft(n,e,t=""){return e!=null&&e!==""?n+e+t:""}function Pp(n){return ft("  ",n.replace(/\n/g,`
  `))}function wR(n){var e;return(e=n==null?void 0:n.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function _R(n){return n.kind===_e.FIELD||n.kind===_e.FRAGMENT_SPREAD||n.kind===_e.INLINE_FRAGMENT}function zh(n,e){var t=n.directives;return!t||!t.length?!0:NH(t).every(function(r){var a=r.directive,i=r.ifArgument,o=!1;return i.value.kind==="Variable"?(o=e&&e[i.value.name.value],Ce(o!==void 0,78,a.name.value)):o=i.value.value,a.name.value==="skip"?!o:o})}function mh(n,e,t){var r=new Set(n),a=r.size;return wa(e,{Directive:function(i){if(r.delete(i.name.value)&&(!t||!r.size))return fm}}),t?!r.size:r.size<a}function kH(n){return n&&mh(["client","export"],n,!0)}function DH(n){var e=n.name.value;return e==="skip"||e==="include"}function NH(n){var e=[];return n&&n.length&&n.forEach(function(t){if(DH(t)){var r=t.arguments,a=t.name.value;Ce(r&&r.length===1,79,a);var i=r[0];Ce(i.name&&i.name.value==="if",80,a);var o=i.value;Ce(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),81,a),e.push({directive:t,ifArgument:i})}}),e}function IH(n){var e,t,r=(e=n.directives)===null||e===void 0?void 0:e.find(function(i){var o=i.name;return o.value==="unmask"});if(!r)return"mask";var a=(t=r.arguments)===null||t===void 0?void 0:t.find(function(i){var o=i.name;return o.value==="mode"});return globalThis.__DEV__!==!1&&a&&(a.value.kind===_e.VARIABLE?globalThis.__DEV__!==!1&&Ce.warn(82):a.value.kind!==_e.STRING?globalThis.__DEV__!==!1&&Ce.warn(83):a.value.value!=="migrate"&&globalThis.__DEV__!==!1&&Ce.warn(84,a.value.value)),a&&"value"in a.value&&a.value.value==="migrate"?"migrate":"unmask"}const MH=()=>Object.create(null),{forEach:FH,slice:ER}=Array.prototype,{hasOwnProperty:PH}=Object.prototype;class Wi{constructor(e=!0,t=MH){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return FH.call(e,r=>t=t.getChildTrie(r)),PH.call(t,"data")?t.data:t.data=this.makeData(ER.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,a=e.length;t&&r<a;++r){const i=t.mapFor(e[r],!1);t=i&&i.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const r=e[0],a=this.mapFor(r,!1),i=a&&a.get(r);i&&(t=i.removeArray(ER.call(e,1)),!i.data&&!i.weak&&!(i.strong&&i.strong.size)&&a.delete(r))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let r=t.get(e);return r||t.set(e,r=new Wi(this.weakness,this.makeData)),r}mapFor(e,t){return this.weakness&&LH(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function LH(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}var kD=ha(function(){return navigator.product})=="ReactNative",ou=typeof WeakMap=="function"&&!(kD&&!global.HermesInternal),W1=typeof WeakSet=="function",H1=typeof Symbol=="function"&&typeof Symbol.for=="function",hm=H1&&Symbol.asyncIterator,DD=typeof ha(function(){return window.document.createElement})=="function",BH=ha(function(){return navigator.userAgent.indexOf("jsdom")>=0})||!1,zH=(DD||kD)&&!BH;function Zt(n){return n!==null&&typeof n=="object"}function UH(n,e){var t=e,r=[];n.definitions.forEach(function(i){if(i.kind==="OperationDefinition")throw ar(85,i.operation,i.name?" named '".concat(i.name.value,"'"):"");i.kind==="FragmentDefinition"&&r.push(i)}),typeof t>"u"&&(Ce(r.length===1,86,r.length),t=r[0].name.value);var a=K(K({},n),{definitions:gn([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],n.definitions,!0)});return a}function lc(n){n===void 0&&(n=[]);var e={};return n.forEach(function(t){e[t.name.value]=t}),e}function dm(n,e){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":{var t=n.name.value;if(typeof e=="function")return e(t);var r=e&&e[t];return Ce(r,87,t),r||null}default:return null}}function VH(n){var e=!0;return wa(n,{FragmentSpread:function(t){if(e=!!t.directives&&t.directives.some(function(r){return r.name.value==="unmask"}),!e)return fm}}),e}function jH(){}class Yb{constructor(e=1/0,t=jH){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:a}=t;a&&(a.older=r),r&&(r.newer=a),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=a)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1}}function Zb(){}const qH=Zb,WH=typeof WeakRef<"u"?WeakRef:function(n){return{deref:()=>n}},HH=typeof WeakMap<"u"?WeakMap:Map,GH=typeof FinalizationRegistry<"u"?FinalizationRegistry:function(){return{register:Zb,unregister:Zb}},QH=10024;class Dv{constructor(e=1/0,t=qH){this.max=e,this.dispose=t,this.map=new HH,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const r=this.unfinalizedNodes.values();for(let a=0;a<QH;a++){const i=r.next().value;if(!i)break;this.unfinalizedNodes.delete(i);const o=i.key;delete i.key,i.keyRef=new WH(o),this.registry.register(o,i,i)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new GH(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:a}=t;a&&(a.older=r),r&&(r.newer=a),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=a)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.scheduleFinalization(r),this.map.set(e,r),this.size++,r.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return t?(this.deleteNode(t),!0):!1}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}var T0=new WeakSet;function ND(n){n.size<=(n.max||-1)||T0.has(n)||(T0.add(n),setTimeout(function(){n.clean(),T0.delete(n)},100))}var G1=function(n,e){var t=new Dv(n,e);return t.set=function(r,a){var i=Dv.prototype.set.call(this,r,a);return ND(this),i},t},$H=function(n,e){var t=new Yb(n,e);return t.set=function(r,a){var i=Yb.prototype.set.call(this,r,a);return ND(this),i},t},KH=Symbol.for("apollo.cacheSize"),Ja=K({},Gb[KH]),Ss={};function Q1(n,e){Ss[n]=e}var XH=globalThis.__DEV__!==!1?eG:void 0,YH=globalThis.__DEV__!==!1?tG:void 0,ZH=globalThis.__DEV__!==!1?ID:void 0;function JH(){var n={parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(n).map(function(e){var t=e[0],r=e[1];return[t,Ja[t]||r]}))}function eG(){var n,e,t,r,a;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:JH(),sizes:K({print:(n=Ss.print)===null||n===void 0?void 0:n.call(Ss),parser:(e=Ss.parser)===null||e===void 0?void 0:e.call(Ss),canonicalStringify:(t=Ss.canonicalStringify)===null||t===void 0?void 0:t.call(Ss),links:ex(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:FD(this.queryManager.documentTransform)}},(a=(r=this.cache).getMemoryInternals)===null||a===void 0?void 0:a.call(r))}}function ID(){return{cache:{fragmentQueryDocuments:Co(this.getFragmentDoc)}}}function tG(){var n=this.config.fragments;return K(K({},ID.apply(this)),{addTypenameDocumentTransform:FD(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:Co(this.storeReader.executeSelectionSet),executeSubSelectedArray:Co(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:Co(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:Co(n==null?void 0:n.findFragmentSpreads),lookup:Co(n==null?void 0:n.lookup),transform:Co(n==null?void 0:n.transform)}})}function nG(n){return!!n&&"dirtyKey"in n}function Co(n){return nG(n)?n.size:void 0}function MD(n){return n!=null}function FD(n){return Jb(n).map(function(e){return{cache:e}})}function Jb(n){return n?gn(gn([Co(n==null?void 0:n.performWork)],Jb(n==null?void 0:n.left),!0),Jb(n==null?void 0:n.right),!0).filter(MD):[]}function ex(n){var e;return n?gn(gn([(e=n==null?void 0:n.getMemoryInternals)===null||e===void 0?void 0:e.call(n)],ex(n==null?void 0:n.left),!0),ex(n==null?void 0:n.right),!0).filter(MD):[]}var qo=Object.assign(function(e){return JSON.stringify(e,rG)},{reset:function(){cl=new $H(Ja.canonicalStringify||1e3)}});globalThis.__DEV__!==!1&&Q1("canonicalStringify",function(){return cl.size});var cl;qo.reset();function rG(n,e){if(e&&typeof e=="object"){var t=Object.getPrototypeOf(e);if(t===Object.prototype||t===null){var r=Object.keys(e);if(r.every(aG))return e;var a=JSON.stringify(r),i=cl.get(a);if(!i){r.sort();var o=JSON.stringify(r);i=cl.get(o)||r,cl.set(a,i),cl.set(o,i)}var u=Object.create(t);return i.forEach(function(c){u[c]=e[c]}),u}}return e}function aG(n,e,t){return e===0||t[e-1]<=n}function El(n){return{__ref:String(n)}}function St(n){return!!(n&&typeof n=="object"&&typeof n.__ref=="string")}function iG(n){return Zt(n)&&n.kind==="Document"&&Array.isArray(n.definitions)}function oG(n){return n.kind==="StringValue"}function sG(n){return n.kind==="BooleanValue"}function uG(n){return n.kind==="IntValue"}function lG(n){return n.kind==="FloatValue"}function cG(n){return n.kind==="Variable"}function fG(n){return n.kind==="ObjectValue"}function hG(n){return n.kind==="ListValue"}function dG(n){return n.kind==="EnumValue"}function pG(n){return n.kind==="NullValue"}function Zl(n,e,t,r){if(uG(t)||lG(t))n[e.value]=Number(t.value);else if(sG(t)||oG(t))n[e.value]=t.value;else if(fG(t)){var a={};t.fields.map(function(o){return Zl(a,o.name,o.value,r)}),n[e.value]=a}else if(cG(t)){var i=(r||{})[t.name.value];n[e.value]=i}else if(hG(t))n[e.value]=t.values.map(function(o){var u={};return Zl(u,e,o,r),u[e.value]});else if(dG(t))n[e.value]=t.value;else if(pG(t))n[e.value]=null;else throw ar(96,e.value,t.kind)}function vG(n,e){var t=null;n.directives&&(t={},n.directives.forEach(function(a){t[a.name.value]={},a.arguments&&a.arguments.forEach(function(i){var o=i.name,u=i.value;return Zl(t[a.name.value],o,u,e)})}));var r=null;return n.arguments&&n.arguments.length&&(r={},n.arguments.forEach(function(a){var i=a.name,o=a.value;return Zl(r,i,o,e)})),PD(n.name.value,r,t)}var mG=["connection","include","skip","client","rest","export","nonreactive"],bf=qo,PD=Object.assign(function(n,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var r=t.connection.filter?t.connection.filter:[];r.sort();var a={};return r.forEach(function(u){a[u]=e[u]}),"".concat(t.connection.key,"(").concat(bf(a),")")}else return t.connection.key;var i=n;if(e){var o=bf(e);i+="(".concat(o,")")}return t&&Object.keys(t).forEach(function(u){mG.indexOf(u)===-1&&(t[u]&&Object.keys(t[u]).length?i+="@".concat(u,"(").concat(bf(t[u]),")"):i+="@".concat(u))}),i},{setStringify:function(n){var e=bf;return bf=n,e}});function pm(n,e){if(n.arguments&&n.arguments.length){var t={};return n.arguments.forEach(function(r){var a=r.name,i=r.value;return Zl(t,a,i,e)}),t}return null}function Pi(n){return n.alias?n.alias.value:n.name.value}function tx(n,e,t){for(var r,a=0,i=e.selections;a<i.length;a++){var o=i[a];if(Xo(o)){if(o.name.value==="__typename")return n[Pi(o)]}else r?r.push(o):r=[o]}if(typeof n.__typename=="string")return n.__typename;if(r)for(var u=0,c=r;u<c.length;u++){var o=c[u],f=tx(n,dm(o,t).selectionSet,t);if(typeof f=="string")return f}}function Xo(n){return n.kind==="Field"}function gG(n){return n.kind==="InlineFragment"}function cc(n){Ce(n&&n.kind==="Document",88);var e=n.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw ar(89,t.kind);return t});return Ce(e.length<=1,90,e.length),n}function Js(n){return cc(n),n.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Af(n){return n.definitions.filter(function(e){return e.kind==="OperationDefinition"&&!!e.name}).map(function(e){return e.name.value})[0]||null}function fc(n){return n.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function LD(n){var e=Js(n);return Ce(e&&e.operation==="query",91),e}function BD(n){Ce(n.kind==="Document",92),Ce(n.definitions.length<=1,93);var e=n.definitions[0];return Ce(e.kind==="FragmentDefinition",94),e}function Uh(n){cc(n);for(var e,t=0,r=n.definitions;t<r.length;t++){var a=r[t];if(a.kind==="OperationDefinition"){var i=a.operation;if(i==="query"||i==="mutation"||i==="subscription")return a}a.kind==="FragmentDefinition"&&!e&&(e=a)}if(e)return e;throw ar(95)}function $1(n){var e=Object.create(null),t=n&&n.variableDefinitions;return t&&t.length&&t.forEach(function(r){r.defaultValue&&Zl(e,r.variable.name,r.defaultValue)}),e}let Bn=null;const SR={};let yG=1;const bG=()=>class{constructor(){this.id=["slot",yG++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=Bn;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===SR)break;return e!==Bn&&(Bn.slots[this.id]=t),!0}return Bn&&(Bn.slots[this.id]=SR),!1}getValue(){if(this.hasValue())return Bn.slots[this.id]}withValue(e,t,r,a){const i={__proto__:null,[this.id]:e},o=Bn;Bn={parent:o,slots:i};try{return t.apply(a,r)}finally{Bn=o}}static bind(e){const t=Bn;return function(){const r=Bn;try{return Bn=t,e.apply(this,arguments)}finally{Bn=r}}}static noContext(e,t,r){if(Bn){const a=Bn;try{return Bn=null,e.apply(r,t)}finally{Bn=a}}else return e.apply(r,t)}};function CR(n){try{return n()}catch{}}const O0="@wry/context:Slot",xG=CR(()=>globalThis)||CR(()=>global)||Object.create(null),RR=xG,Vh=RR[O0]||Array[O0]||function(n){try{Object.defineProperty(RR,O0,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(bG()),{bind:c7,noContext:f7}=Vh,vm=new Vh,{hasOwnProperty:wG}=Object.prototype,K1=Array.from||function(n){const e=[];return n.forEach(t=>e.push(t)),e};function X1(n){const{unsubscribe:e}=n;typeof e=="function"&&(n.unsubscribe=void 0,e())}const gh=[],_G=100;function Jl(n,e){if(!n)throw new Error(e||"assertion failure")}function zD(n,e){const t=n.length;return t>0&&t===e.length&&n[t-1]===e[t-1]}function UD(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}function VD(n){return n.slice(0)}class mm{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++mm.count}peek(){if(this.value.length===1&&!Yo(this))return TR(this),this.value[0]}recompute(e){return Jl(!this.recomputing,"already recomputing"),TR(this),Yo(this)?EG(this,e):UD(this.value)}setDirty(){this.dirty||(this.dirty=!0,jD(this),X1(this))}dispose(){this.setDirty(),QD(this),Y1(this,(e,t)=>{e.setDirty(),$D(e,this)})}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=gh.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(K1(this.deps).forEach(e=>e.delete(this)),this.deps.clear(),gh.push(this.deps),this.deps=null)}}mm.count=0;function TR(n){const e=vm.getValue();if(e)return n.parents.add(e),e.childValues.has(n)||e.childValues.set(n,[]),Yo(n)?WD(e,n):HD(e,n),e}function EG(n,e){return QD(n),vm.withValue(n,SG,[n,e]),RG(n,e)&&CG(n),UD(n.value)}function SG(n,e){n.recomputing=!0;const{normalizeResult:t}=n;let r;t&&n.value.length===1&&(r=VD(n.value)),n.value.length=0;try{if(n.value[0]=n.fn.apply(null,e),t&&r&&!zD(r,n.value))try{n.value[0]=t(n.value[0],r[0])}catch{}}catch(a){n.value[1]=a}n.recomputing=!1}function Yo(n){return n.dirty||!!(n.dirtyChildren&&n.dirtyChildren.size)}function CG(n){n.dirty=!1,!Yo(n)&&qD(n)}function jD(n){Y1(n,WD)}function qD(n){Y1(n,HD)}function Y1(n,e){const t=n.parents.size;if(t){const r=K1(n.parents);for(let a=0;a<t;++a)e(r[a],n)}}function WD(n,e){Jl(n.childValues.has(e)),Jl(Yo(e));const t=!Yo(n);if(!n.dirtyChildren)n.dirtyChildren=gh.pop()||new Set;else if(n.dirtyChildren.has(e))return;n.dirtyChildren.add(e),t&&jD(n)}function HD(n,e){Jl(n.childValues.has(e)),Jl(!Yo(e));const t=n.childValues.get(e);t.length===0?n.childValues.set(e,VD(e.value)):zD(t,e.value)||n.setDirty(),GD(n,e),!Yo(n)&&qD(n)}function GD(n,e){const t=n.dirtyChildren;t&&(t.delete(e),t.size===0&&(gh.length<_G&&gh.push(t),n.dirtyChildren=null))}function QD(n){n.childValues.size>0&&n.childValues.forEach((e,t)=>{$D(n,t)}),n.forgetDeps(),Jl(n.dirtyChildren===null)}function $D(n,e){e.parents.delete(n),n.childValues.delete(e),GD(n,e)}function RG(n,e){if(typeof n.subscribe=="function")try{X1(n),n.unsubscribe=n.subscribe.apply(null,e)}catch{return n.setDirty(),!1}return!0}const TG={setDirty:!0,dispose:!0,forget:!0};function KD(n){const e=new Map;function t(r){const a=vm.getValue();if(a){let i=e.get(r);i||e.set(r,i=new Set),a.dependOn(i)}}return t.dirty=function(a,i){const o=e.get(a);if(o){const u=i&&wG.call(TG,i)?i:"setDirty";K1(o).forEach(c=>c[u]()),e.delete(a),X1(o)}},t}let OR;function OG(...n){return(OR||(OR=new Wi(typeof WeakMap=="function"))).lookupArray(n)}const A0=new Set;function yh(n,{max:e=Math.pow(2,16),keyArgs:t,makeCacheKey:r=OG,normalizeResult:a,subscribe:i,cache:o=Yb}=Object.create(null)){const u=typeof o=="function"?new o(e,v=>v.dispose()):o,c=function(){const v=r.apply(null,t?t.apply(null,arguments):arguments);if(v===void 0)return n.apply(null,arguments);let g=u.get(v);g||(u.set(v,g=new mm(n)),g.normalizeResult=a,g.subscribe=i,g.forget=()=>u.delete(v));const y=g.recompute(Array.prototype.slice.call(arguments));return u.set(v,g),A0.add(u),vm.hasValue()||(A0.forEach(x=>x.clean()),A0.clear()),y};Object.defineProperty(c,"size",{get:()=>u.size,configurable:!1,enumerable:!1}),Object.freeze(c.options={max:e,keyArgs:t,makeCacheKey:r,normalizeResult:a,subscribe:i,cache:u});function f(v){const g=v&&u.get(v);g&&g.setDirty()}c.dirtyKey=f,c.dirty=function(){f(r.apply(null,arguments))};function d(v){const g=v&&u.get(v);if(g)return g.peek()}c.peekKey=d,c.peek=function(){return d(r.apply(null,arguments))};function p(v){return v?u.delete(v):!1}return c.forgetKey=p,c.forget=function(){return p(r.apply(null,arguments))},c.makeCacheKey=r,c.getKey=t?function(){return r.apply(null,t.apply(null,arguments))}:r,Object.freeze(c)}function AG(n){return n}var XD=function(){function n(e,t){t===void 0&&(t=Object.create(null)),this.resultCache=W1?new WeakSet:new Set,this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=t.cache!==!1,this.resetCache()}return n.prototype.getCacheKey=function(e){return[e]},n.identity=function(){return new n(AG,{cache:!1})},n.split=function(e,t,r){return r===void 0&&(r=n.identity()),Object.assign(new n(function(a){var i=e(a)?t:r;return i.transformDocument(a)},{cache:!1}),{left:t,right:r})},n.prototype.resetCache=function(){var e=this;if(this.cached){var t=new Wi(ou);this.performWork=yh(n.prototype.performWork.bind(this),{makeCacheKey:function(r){var a=e.getCacheKey(r);if(a)return Ce(Array.isArray(a),77),t.lookupArray(a)},max:Ja["documentTransform.cache"],cache:Dv})}},n.prototype.performWork=function(e){return cc(e),this.transform(e)},n.prototype.transformDocument=function(e){if(this.resultCache.has(e))return e;var t=this.performWork(e);return this.resultCache.add(t),t},n.prototype.concat=function(e){var t=this;return Object.assign(new n(function(r){return e.transformDocument(t.transformDocument(r))},{cache:!1}),{left:this,right:e})},n}(),Pf,ks=Object.assign(function(n){var e=Pf.get(n);return e||(e=TH(n),Pf.set(n,e)),e},{reset:function(){Pf=new G1(Ja.print||2e3)}});ks.reset();globalThis.__DEV__!==!1&&Q1("print",function(){return Pf?Pf.size:0});var Jt=Array.isArray;function ea(n){return Array.isArray(n)&&n.length>0}var AR={kind:_e.FIELD,name:{kind:_e.NAME,value:"__typename"}};function YD(n,e){return!n||n.selectionSet.selections.every(function(t){return t.kind===_e.FRAGMENT_SPREAD&&YD(e[t.name.value],e)})}function kG(n){return YD(Js(n)||BD(n),lc(fc(n)))?null:n}function DG(n){var e=new Map,t=new Map;return n.forEach(function(r){r&&(r.name?e.set(r.name,r):r.test&&t.set(r.test,r))}),function(r){var a=e.get(r.name.value);return!a&&t.size&&t.forEach(function(i,o){o(r)&&(a=i)}),a}}function kR(n){var e=new Map;return function(r){r===void 0&&(r=n);var a=e.get(r);return a||e.set(r,a={variables:new Set,fragmentSpreads:new Set}),a}}function ZD(n,e){cc(e);for(var t=kR(""),r=kR(""),a=function(_){for(var S=0,C=void 0;S<_.length&&(C=_[S]);++S)if(!Jt(C)){if(C.kind===_e.OPERATION_DEFINITION)return t(C.name&&C.name.value);if(C.kind===_e.FRAGMENT_DEFINITION)return r(C.name.value)}return globalThis.__DEV__!==!1&&Ce.error(97),null},i=0,o=e.definitions.length-1;o>=0;--o)e.definitions[o].kind===_e.OPERATION_DEFINITION&&++i;var u=DG(n),c=function(_){return ea(_)&&_.map(u).some(function(S){return S&&S.remove})},f=new Map,d=!1,p={enter:function(_){if(c(_.directives))return d=!0,null}},v=wa(e,{Field:p,InlineFragment:p,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(_,S,C,R,T){var O=a(T);O&&O.variables.add(_.name.value)}},FragmentSpread:{enter:function(_,S,C,R,T){if(c(_.directives))return d=!0,null;var O=a(T);O&&O.fragmentSpreads.add(_.name.value)}},FragmentDefinition:{enter:function(_,S,C,R){f.set(JSON.stringify(R),_)},leave:function(_,S,C,R){var T=f.get(JSON.stringify(R));if(_===T)return _;if(i>0&&_.selectionSet.selections.every(function(O){return O.kind===_e.FIELD&&O.name.value==="__typename"}))return r(_.name.value).removed=!0,d=!0,null}},Directive:{leave:function(_){if(u(_))return d=!0,null}}});if(!d)return e;var g=function(_){return _.transitiveVars||(_.transitiveVars=new Set(_.variables),_.removed||_.fragmentSpreads.forEach(function(S){g(r(S)).transitiveVars.forEach(function(C){_.transitiveVars.add(C)})})),_},y=new Set;v.definitions.forEach(function(_){_.kind===_e.OPERATION_DEFINITION?g(t(_.name&&_.name.value)).fragmentSpreads.forEach(function(S){y.add(S)}):_.kind===_e.FRAGMENT_DEFINITION&&i===0&&!r(_.name.value).removed&&y.add(_.name.value)}),y.forEach(function(_){g(r(_)).fragmentSpreads.forEach(function(S){y.add(S)})});var x=function(_){return!!(!y.has(_)||r(_).removed)},w={enter:function(_){if(x(_.name.value))return null}};return kG(wa(v,{FragmentSpread:w,FragmentDefinition:w,OperationDefinition:{leave:function(_){if(_.variableDefinitions){var S=g(t(_.name&&_.name.value)).transitiveVars;if(S.size<_.variableDefinitions.length)return K(K({},_),{variableDefinitions:_.variableDefinitions.filter(function(C){return S.has(C.variable.name.value)})})}}}}))}var Z1=Object.assign(function(n){return wa(n,{SelectionSet:{enter:function(e,t,r){if(!(r&&r.kind===_e.OPERATION_DEFINITION)){var a=e.selections;if(a){var i=a.some(function(u){return Xo(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!i){var o=r;if(!(Xo(o)&&o.directives&&o.directives.some(function(u){return u.name.value==="export"})))return K(K({},e),{selections:gn(gn([],a,!0),[AR],!1)})}}}}}})},{added:function(n){return n===AR}});function NG(n){var e=Uh(n),t=e.operation;if(t==="query")return n;var r=wa(n,{OperationDefinition:{enter:function(a){return K(K({},a),{operation:"query"})}}});return r}function JD(n){cc(n);var e=ZD([{test:function(t){return t.name.value==="client"},remove:!0}],n);return e}function IG(n){return cc(n),wa(n,{FragmentSpread:function(e){var t;if(!(!((t=e.directives)===null||t===void 0)&&t.some(function(r){return r.name.value==="unmask"})))return K(K({},e),{directives:gn(gn([],e.directives||[],!0),[{kind:_e.DIRECTIVE,name:{kind:_e.NAME,value:"nonreactive"}}],!1)})}})}var MG=Object.prototype.hasOwnProperty;function DR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return gm(n)}function gm(n){var e=n[0]||{},t=n.length;if(t>1)for(var r=new Zo,a=1;a<t;++a)e=r.merge(e,n[a]);return e}var FG=function(n,e,t){return this.merge(n[t],e[t])},Zo=function(){function n(e){e===void 0&&(e=FG),this.reconciler=e,this.isObject=Zt,this.pastCopies=new Set}return n.prototype.merge=function(e,t){for(var r=this,a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];return Zt(t)&&Zt(e)?(Object.keys(t).forEach(function(o){if(MG.call(e,o)){var u=e[o];if(t[o]!==u){var c=r.reconciler.apply(r,gn([e,t,o],a,!1));c!==u&&(e=r.shallowCopyForMerge(e),e[o]=c)}}else e=r.shallowCopyForMerge(e),e[o]=t[o]}),e):t},n.prototype.shallowCopyForMerge=function(e){return Zt(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=K({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},n}();function PG(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=LG(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LG(n,e){if(n){if(typeof n=="string")return NR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return NR(n,e)}}function NR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function IR(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function J1(n,e,t){return e&&IR(n.prototype,e),t&&IR(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var ew=function(){return typeof Symbol=="function"},tw=function(n){return ew()&&!!Symbol[n]},nw=function(n){return tw(n)?Symbol[n]:"@@"+n};ew()&&!tw("observable")&&(Symbol.observable=Symbol("observable"));var BG=nw("iterator"),nx=nw("observable"),eN=nw("species");function Nv(n,e){var t=n[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function xf(n){var e=n.constructor;return e!==void 0&&(e=e[eN],e===null&&(e=void 0)),e!==void 0?e:Lt}function zG(n){return n instanceof Lt}function ec(n){ec.log?ec.log(n):setTimeout(function(){throw n})}function Lp(n){Promise.resolve().then(function(){try{n()}catch(e){ec(e)}})}function tN(n){var e=n._cleanup;if(e!==void 0&&(n._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=Nv(e,"unsubscribe");t&&t.call(e)}}catch(r){ec(r)}}function rx(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function UG(n){var e=n._queue;if(e){n._queue=void 0,n._state="ready";for(var t=0;t<e.length&&(nN(n,e[t].type,e[t].value),n._state!=="closed");++t);}}function nN(n,e,t){n._state="running";var r=n._observer;try{var a=Nv(r,e);switch(e){case"next":a&&a.call(r,t);break;case"error":if(rx(n),a)a.call(r,t);else throw t;break;case"complete":rx(n),a&&a.call(r);break}}catch(i){ec(i)}n._state==="closed"?tN(n):n._state==="running"&&(n._state="ready")}function k0(n,e,t){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:e,value:t});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:e,value:t}],Lp(function(){return UG(n)});return}nN(n,e,t)}}var VG=function(){function n(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var a=new jG(this);try{this._cleanup=r.call(void 0,a)}catch(i){a.error(i)}this._state==="initializing"&&(this._state="ready")}var e=n.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(rx(this),tN(this))},J1(n,[{key:"closed",get:function(){return this._state==="closed"}}]),n}(),jG=function(){function n(t){this._subscription=t}var e=n.prototype;return e.next=function(r){k0(this._subscription,"next",r)},e.error=function(r){k0(this._subscription,"error",r)},e.complete=function(){k0(this._subscription,"complete")},J1(n,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),Lt=function(){function n(t){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=n.prototype;return e.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new VG(r,this._subscriber)},e.forEach=function(r){var a=this;return new Promise(function(i,o){if(typeof r!="function"){o(new TypeError(r+" is not a function"));return}function u(){c.unsubscribe(),i()}var c=a.subscribe({next:function(f){try{r(f,u)}catch(d){o(d),c.unsubscribe()}},error:o,complete:i})})},e.map=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=xf(this);return new i(function(o){return a.subscribe({next:function(u){try{u=r(u)}catch(c){return o.error(c)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.filter=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=xf(this);return new i(function(o){return a.subscribe({next:function(u){try{if(!r(u))return}catch(c){return o.error(c)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.reduce=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=xf(this),o=arguments.length>1,u=!1,c=arguments[1],f=c;return new i(function(d){return a.subscribe({next:function(p){var v=!u;if(u=!0,!v||o)try{f=r(f,p)}catch(g){return d.error(g)}else f=p},error:function(p){d.error(p)},complete:function(){if(!u&&!o)return d.error(new TypeError("Cannot reduce an empty sequence"));d.next(f),d.complete()}})})},e.concat=function(){for(var r=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var u=xf(this);return new u(function(c){var f,d=0;function p(v){f=v.subscribe({next:function(g){c.next(g)},error:function(g){c.error(g)},complete:function(){d===i.length?(f=void 0,c.complete()):p(u.from(i[d++]))}})}return p(r),function(){f&&(f.unsubscribe(),f=void 0)}})},e.flatMap=function(r){var a=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var i=xf(this);return new i(function(o){var u=[],c=a.subscribe({next:function(d){if(r)try{d=r(d)}catch(v){return o.error(v)}var p=i.from(d).subscribe({next:function(v){o.next(v)},error:function(v){o.error(v)},complete:function(){var v=u.indexOf(p);v>=0&&u.splice(v,1),f()}});u.push(p)},error:function(d){o.error(d)},complete:function(){f()}});function f(){c.closed&&u.length===0&&o.complete()}return function(){u.forEach(function(d){return d.unsubscribe()}),c.unsubscribe()}})},e[nx]=function(){return this},n.from=function(r){var a=typeof this=="function"?this:n;if(r==null)throw new TypeError(r+" is not an object");var i=Nv(r,nx);if(i){var o=i.call(r);if(Object(o)!==o)throw new TypeError(o+" is not an object");return zG(o)&&o.constructor===a?o:new a(function(u){return o.subscribe(u)})}if(tw("iterator")&&(i=Nv(r,BG),i))return new a(function(u){Lp(function(){if(!u.closed){for(var c=PG(i.call(r)),f;!(f=c()).done;){var d=f.value;if(u.next(d),u.closed)return}u.complete()}})});if(Array.isArray(r))return new a(function(u){Lp(function(){if(!u.closed){for(var c=0;c<r.length;++c)if(u.next(r[c]),u.closed)return;u.complete()}})});throw new TypeError(r+" is not observable")},n.of=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=typeof this=="function"?this:n;return new o(function(u){Lp(function(){if(!u.closed){for(var c=0;c<a.length;++c)if(u.next(a[c]),u.closed)return;u.complete()}})})},J1(n,null,[{key:eN,get:function(){return this}}]),n}();ew()&&Object.defineProperty(Lt,Symbol("extensions"),{value:{symbol:nx,hostReportError:ec},configurable:!0});function qG(n){var e,t=n.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var il;typeof self<"u"?il=self:typeof window<"u"?il=window:typeof global<"u"?il=global:typeof module<"u"?il=module:il=Function("return this")();qG(il);var MR=Lt.prototype,FR="@@observable";MR[FR]||(MR[FR]=function(){return this});function WG(n){return n.catch(function(){}),n}var HG=Object.prototype.toString;function rN(n){return ax(n)}function ax(n,e){switch(HG.call(n)){case"[object Array]":{if(e=e||new Map,e.has(n))return e.get(n);var t=n.slice(0);return e.set(n,t),t.forEach(function(a,i){t[i]=ax(a,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(n))return e.get(n);var r=Object.create(Object.getPrototypeOf(n));return e.set(n,r),Object.keys(n).forEach(function(a){r[a]=ax(n[a],e)}),r}default:return n}}function GG(n){var e=new Set([n]);return e.forEach(function(t){Zt(t)&&QG(t)===t&&Object.getOwnPropertyNames(t).forEach(function(r){Zt(t[r])&&e.add(t[r])})}),n}function QG(n){if(globalThis.__DEV__!==!1&&!Object.isFrozen(n))try{Object.freeze(n)}catch(e){if(e instanceof TypeError)return null;throw e}return n}function tc(n){return globalThis.__DEV__!==!1&&GG(n),n}function Lf(n,e,t){var r=[];n.forEach(function(a){return a[e]&&r.push(a)}),r.forEach(function(a){return a[e](t)})}function D0(n,e,t){return new Lt(function(r){var a={then:function(c){return new Promise(function(f){return f(c())})}};function i(c,f){return function(d){if(c){var p=function(){return r.closed?0:c(d)};a=a.then(p,p).then(function(v){return r.next(v)},function(v){return r.error(v)})}else r[f](d)}}var o={next:i(e,"next"),error:i(t,"error"),complete:function(){a.then(function(){return r.complete()})}},u=n.subscribe(o);return function(){return u.unsubscribe()}})}function aN(n){function e(t){Object.defineProperty(n,t,{value:Lt})}return H1&&Symbol.species&&e(Symbol.species),e("@@species"),n}function PR(n){return n&&typeof n.then=="function"}var ol=function(n){ti(e,n);function e(t){var r=n.call(this,function(a){return r.addObserver(a),function(){return r.removeObserver(a)}})||this;return r.observers=new Set,r.promise=new Promise(function(a,i){r.resolve=a,r.reject=i}),r.handlers={next:function(a){r.sub!==null&&(r.latest=["next",a],r.notify("next",a),Lf(r.observers,"next",a))},error:function(a){var i=r.sub;i!==null&&(i&&setTimeout(function(){return i.unsubscribe()}),r.sub=null,r.latest=["error",a],r.reject(a),r.notify("error",a),Lf(r.observers,"error",a))},complete:function(){var a=r,i=a.sub,o=a.sources,u=o===void 0?[]:o;if(i!==null){var c=u.shift();c?PR(c)?c.then(function(f){return r.sub=f.subscribe(r.handlers)},r.handlers.error):r.sub=c.subscribe(r.handlers):(i&&setTimeout(function(){return i.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),r.notify("complete"),Lf(r.observers,"complete"))}}},r.nextResultListeners=new Set,r.cancel=function(a){r.reject(a),r.sources=[],r.handlers.error(a)},r.promise.catch(function(a){}),typeof t=="function"&&(t=[new Lt(t)]),PR(t)?t.then(function(a){return r.start(a)},r.handlers.error):r.start(t),r}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var r=this.latest[0],a=t[r];a&&a.call(t,this.latest[1]),this.sub===null&&r==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,r){var a=this.nextResultListeners;a.size&&(this.nextResultListeners=new Set,a.forEach(function(i){return i(t,r)}))},e.prototype.beforeNext=function(t){var r=!1;this.nextResultListeners.add(function(a,i){r||(r=!0,t(a,i))})},e}(Lt);aN(ol);function Sl(n){return"incremental"in n}function $G(n){return"hasNext"in n&&"data"in n}function KG(n){return Sl(n)||$G(n)}function XG(n){return Zt(n)&&"payload"in n}function iN(n,e){var t=n,r=new Zo;return Sl(e)&&ea(e.incremental)&&e.incremental.forEach(function(a){for(var i=a.data,o=a.path,u=o.length-1;u>=0;--u){var c=o[u],f=!isNaN(+c),d=f?[]:{};d[c]=i,i=d}t=r.merge(t,i)}),t}function Bp(n){var e=ix(n);return ea(e)}function ix(n){var e=ea(n.errors)?n.errors.slice(0):[];return Sl(n)&&ea(n.incremental)&&n.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function eu(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Object.create(null);return n.forEach(function(r){r&&Object.keys(r).forEach(function(a){var i=r[a];i!==void 0&&(t[a]=i)})}),t}function Bf(n,e){return eu(n,e,e.variables&&{variables:eu(K(K({},n&&n.variables),e.variables))})}function N0(n){return new Lt(function(e){e.error(n)})}var oN=function(n,e,t){var r=new Error(t);throw r.name="ServerError",r.response=n,r.statusCode=n.status,r.result=e,r};function YG(n){for(var e=["query","operationName","variables","extensions","context"],t=0,r=Object.keys(n);t<r.length;t++){var a=r[t];if(e.indexOf(a)<0)throw ar(46,a)}return n}function ZG(n,e){var t=K({},n),r=function(i){typeof i=="function"?t=K(K({},t),i(t)):t=K(K({},t),i)},a=function(){return K({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:r}),Object.defineProperty(e,"getContext",{enumerable:!1,value:a}),e}function JG(n){var e={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return e.operationName||(e.operationName=typeof e.query!="string"?Af(e.query)||void 0:""),e}function e8(n,e){var t=K({},n),r=new Set(Object.keys(n));return wa(e,{Variable:function(a,i,o){o&&o.kind!=="VariableDefinition"&&r.delete(a.name.value)}}),r.forEach(function(a){delete t[a]}),t}function LR(n,e){return e?e(n):Lt.of()}function wf(n){return typeof n=="function"?new jh(n):n}function Cp(n){return n.request.length<=1}var jh=function(){function n(e){e&&(this.request=e)}return n.empty=function(){return new n(function(){return Lt.of()})},n.from=function(e){return e.length===0?n.empty():e.map(wf).reduce(function(t,r){return t.concat(r)})},n.split=function(e,t,r){var a=wf(t),i=wf(r||new n(LR)),o;return Cp(a)&&Cp(i)?o=new n(function(u){return e(u)?a.request(u)||Lt.of():i.request(u)||Lt.of()}):o=new n(function(u,c){return e(u)?a.request(u,c)||Lt.of():i.request(u,c)||Lt.of()}),Object.assign(o,{left:a,right:i})},n.execute=function(e,t){return e.request(ZG(t.context,JG(YG(t))))||Lt.of()},n.concat=function(e,t){var r=wf(e);if(Cp(r))return globalThis.__DEV__!==!1&&Ce.warn(38,r),r;var a=wf(t),i;return Cp(a)?i=new n(function(o){return r.request(o,function(u){return a.request(u)||Lt.of()})||Lt.of()}):i=new n(function(o,u){return r.request(o,function(c){return a.request(c,u)||Lt.of()})||Lt.of()}),Object.assign(i,{left:r,right:a})},n.prototype.split=function(e,t,r){return this.concat(n.split(e,t,r||new n(LR)))},n.prototype.concat=function(e){return n.concat(this,e)},n.prototype.request=function(e,t){throw ar(39)},n.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},n.prototype.setOnError=function(e){return this.onError=e,this},n}(),ox=jh.execute;function t8(n){var e,t=n[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function n8(n){var e=null,t=null,r=!1,a=[],i=[];function o(p){if(!t){if(i.length){var v=i.shift();if(Array.isArray(v)&&v[0])return v[0]({value:p,done:!1})}a.push(p)}}function u(p){t=p;var v=i.slice();v.forEach(function(g){g[1](p)}),!e||e()}function c(){r=!0;var p=i.slice();p.forEach(function(v){v[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,n.removeListener("data",o),n.removeListener("error",u),n.removeListener("end",c),n.removeListener("finish",c),n.removeListener("close",c)},n.on("data",o),n.on("error",u),n.on("end",c),n.on("finish",c),n.on("close",c);function f(){return new Promise(function(p,v){if(t)return v(t);if(a.length)return p({value:a.shift(),done:!1});if(r)return p({value:void 0,done:!0});i.push([p,v])})}var d={next:function(){return f()}};return hm&&(d[Symbol.asyncIterator]=function(){return this}),d}function r8(n){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(r,a){n.then(function(i){r({value:i,done:!1})}).catch(a)}))}};return hm&&(t[Symbol.asyncIterator]=function(){return this}),t}function BR(n){var e={next:function(){return n.read()}};return hm&&(e[Symbol.asyncIterator]=function(){return this}),e}function a8(n){return!!n.body}function i8(n){return!!n.getReader}function o8(n){return!!(hm&&n[Symbol.asyncIterator])}function s8(n){return!!n.stream}function u8(n){return!!n.arrayBuffer}function l8(n){return!!n.pipe}function c8(n){var e=n;if(a8(n)&&(e=n.body),o8(e))return t8(e);if(i8(e))return BR(e.getReader());if(s8(e))return BR(e.stream().getReader());if(u8(e))return r8(e.arrayBuffer());if(l8(e))return n8(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var rw=Symbol();function f8(n){return n.extensions?Array.isArray(n.extensions[rw]):!1}function sN(n){return n.hasOwnProperty("graphQLErrors")}var h8=function(n){var e=gn(gn(gn([],n.graphQLErrors,!0),n.clientErrors,!0),n.protocolErrors,!0);return n.networkError&&e.push(n.networkError),e.map(function(t){return Zt(t)&&t.message||"Error message not found."}).join(`
`)},za=function(n){ti(e,n);function e(t){var r=t.graphQLErrors,a=t.protocolErrors,i=t.clientErrors,o=t.networkError,u=t.errorMessage,c=t.extraInfo,f=n.call(this,u)||this;return f.name="ApolloError",f.graphQLErrors=r||[],f.protocolErrors=a||[],f.clientErrors=i||[],f.networkError=o||null,f.message=u||h8(f),f.extraInfo=c,f.cause=gn(gn(gn([o],r||[],!0),a||[],!0),i||[],!0).find(function(d){return!!d})||null,f.__proto__=e.prototype,f}return e}(Error),zR=Object.prototype.hasOwnProperty;function d8(n,e){return Eo(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,d,p,v,g,y,x,w,_,S,C,R,T,O,k,D,N;return So(this,function(M){switch(M.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");t=new TextDecoder("utf-8"),r=(N=n.headers)===null||N===void 0?void 0:N.get("content-type"),a="boundary=",i=r!=null&&r.includes(a)?r==null?void 0:r.substring((r==null?void 0:r.indexOf(a))+a.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",o=`\r
--`.concat(i),u="",c=c8(n),f=!0,M.label=1;case 1:return f?[4,c.next()]:[3,3];case 2:for(d=M.sent(),p=d.value,v=d.done,g=typeof p=="string"?p:t.decode(p),y=u.length-o.length+1,f=!v,u+=g,x=u.indexOf(o,y);x>-1;){if(w=void 0,k=[u.slice(0,x),u.slice(x+o.length)],w=k[0],u=k[1],_=w.indexOf(`\r
\r
`),S=p8(w.slice(0,_)),C=S["content-type"],C&&C.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(R=w.slice(_),R){if(T=uN(n,R),Object.keys(T).length>1||"data"in T||"incremental"in T||"errors"in T||"payload"in T)if(XG(T)){if(O={},"payload"in T){if(Object.keys(T).length===1&&T.payload===null)return[2];O=K({},T.payload)}"errors"in T&&(O=K(K({},O),{extensions:K(K({},"extensions"in O?O.extensions:null),(D={},D[rw]=T.errors,D))})),e(O)}else e(T);else if(Object.keys(T).length===1&&"hasNext"in T&&!T.hasNext)return[2]}x=u.indexOf(o)}return[3,1];case 3:return[2]}})})}function p8(n){var e={};return n.split(`
`).forEach(function(t){var r=t.indexOf(":");if(r>-1){var a=t.slice(0,r).trim().toLowerCase(),i=t.slice(r+1).trim();e[a]=i}}),e}function uN(n,e){if(n.status>=300){var t=function(){try{return JSON.parse(e)}catch{return e}};oN(n,t(),"Response not successful: Received status code ".concat(n.status))}try{return JSON.parse(e)}catch(a){var r=a;throw r.name="ServerParseError",r.response=n,r.statusCode=n.status,r.bodyText=e,r}}function v8(n,e){n.result&&n.result.errors&&n.result.data&&e.next(n.result),e.error(n)}function m8(n){return function(e){return e.text().then(function(t){return uN(e,t)}).then(function(t){return!Array.isArray(t)&&!zR.call(t,"data")&&!zR.call(t,"errors")&&oN(e,t,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(r){return r.operationName}):n.operationName,"'.")),t})}}var sx=function(n,e){var t;try{t=JSON.stringify(n)}catch(a){var r=ar(42,e,a.message);throw r.parseError=a,r}return t},g8={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},y8={accept:"*/*","content-type":"application/json"},b8={method:"POST"},x8={http:g8,headers:y8,options:b8},w8=function(n,e){return e(n)};function _8(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var a={},i={};t.forEach(function(p){a=K(K(K({},a),p.options),{headers:K(K({},a.headers),p.headers)}),p.credentials&&(a.credentials=p.credentials),i=K(K({},i),p.http)}),a.headers&&(a.headers=E8(a.headers,i.preserveHeaderCase));var o=n.operationName,u=n.extensions,c=n.variables,f=n.query,d={operationName:o,variables:c};return i.includeExtensions&&(d.extensions=u),i.includeQuery&&(d.query=e(f,ks)),{options:a,body:d}}function E8(n,e){if(!e){var t={};return Object.keys(Object(n)).forEach(function(i){t[i.toLowerCase()]=n[i]}),t}var r={};Object.keys(Object(n)).forEach(function(i){r[i.toLowerCase()]={originalName:i,value:n[i]}});var a={};return Object.keys(r).forEach(function(i){a[r[i].originalName]=r[i].value}),a}var S8=function(n){if(!n&&typeof fetch>"u")throw ar(40)},C8=function(n,e){var t=n.getContext(),r=t.uri;return r||(typeof e=="function"?e(n):e||"/graphql")};function R8(n,e){var t=[],r=function(p,v){t.push("".concat(p,"=").concat(encodeURIComponent(v)))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var a=void 0;try{a=sx(e.variables,"Variables map")}catch(p){return{parseError:p}}r("variables",a)}if(e.extensions){var i=void 0;try{i=sx(e.extensions,"Extensions map")}catch(p){return{parseError:p}}r("extensions",i)}var o="",u=n,c=n.indexOf("#");c!==-1&&(o=n.substr(c),u=n.substr(0,c));var f=u.indexOf("?")===-1?"?":"&",d=u+f+t.join("&")+o;return{newURI:d}}var UR=ha(function(){return fetch}),T8=function(n){n===void 0&&(n={});var e=n.uri,t=e===void 0?"/graphql":e,r=n.fetch,a=n.print,i=a===void 0?w8:a,o=n.includeExtensions,u=n.preserveHeaderCase,c=n.useGETForQueries,f=n.includeUnusedVariables,d=f===void 0?!1:f,p=ma(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);globalThis.__DEV__!==!1&&S8(r||UR);var v={http:{includeExtensions:o,preserveHeaderCase:u},options:p.fetchOptions,credentials:p.credentials,headers:p.headers};return new jh(function(g){var y=C8(g,t),x=g.getContext(),w={};if(x.clientAwareness){var _=x.clientAwareness,S=_.name,C=_.version;S&&(w["apollographql-client-name"]=S),C&&(w["apollographql-client-version"]=C)}var R=K(K({},w),x.headers),T={http:x.http,options:x.fetchOptions,credentials:x.credentials,headers:R};if(mh(["client"],g.query)){var O=JD(g.query);if(!O)return N0(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));g.query=O}var k=_8(g,i,x8,v,T),D=k.options,N=k.body;N.variables&&!d&&(N.variables=e8(N.variables,g.query));var M;!D.signal&&typeof AbortController<"u"&&(M=new AbortController,D.signal=M.signal);var B=function(Y){return Y.kind==="OperationDefinition"&&Y.operation==="mutation"},z=function(Y){return Y.kind==="OperationDefinition"&&Y.operation==="subscription"},ee=z(Uh(g.query)),re=mh(["defer"],g.query);if(c&&!g.query.definitions.some(B)&&(D.method="GET"),re||ee){D.headers=D.headers||{};var te="multipart/mixed;";ee&&re&&globalThis.__DEV__!==!1&&Ce.warn(41),ee?te+="boundary=graphql;subscriptionSpec=1.0,application/json":re&&(te+="deferSpec=20220824,application/json"),D.headers.accept=te}if(D.method==="GET"){var U=R8(y,N),H=U.newURI,$=U.parseError;if($)return N0($);y=H}else try{D.body=sx(N,"Payload")}catch(Y){return N0(Y)}return new Lt(function(Y){var F=r||ha(function(){return fetch})||UR,Q=Y.next.bind(Y);return F(y,D).then(function(oe){var ue;g.setContext({response:oe});var me=(ue=oe.headers)===null||ue===void 0?void 0:ue.get("content-type");return me!==null&&/^multipart\/mixed/i.test(me)?d8(oe,Q):m8(g)(oe).then(Q)}).then(function(){M=void 0,Y.complete()}).catch(function(oe){M=void 0,v8(oe,Y)}),function(){M&&M.abort()}})})},O8=function(n){ti(e,n);function e(t){t===void 0&&(t={});var r=n.call(this,T8(t).request)||this;return r.options=t,r}return e}(jh);const{toString:VR,hasOwnProperty:A8}=Object.prototype,jR=Function.prototype.toString,ux=new Map;function _t(n,e){try{return lx(n,e)}finally{ux.clear()}}function lx(n,e){if(n===e)return!0;const t=VR.call(n),r=VR.call(e);if(t!==r)return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":{if(WR(n,e))return!0;const a=qR(n),i=qR(e),o=a.length;if(o!==i.length)return!1;for(let u=0;u<o;++u)if(!A8.call(e,a[u]))return!1;for(let u=0;u<o;++u){const c=a[u];if(!lx(n[c],e[c]))return!1}return!0}case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!==n)return e!==e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n==`${e}`;case"[object Map]":case"[object Set]":{if(n.size!==e.size)return!1;if(WR(n,e))return!0;const a=n.entries(),i=t==="[object Map]";for(;;){const o=a.next();if(o.done)break;const[u,c]=o.value;if(!e.has(u)||i&&!lx(c,e.get(u)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":{let a=n.byteLength;if(a===e.byteLength)for(;a--&&n[a]===e[a];);return a===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const a=jR.call(n);return a!==jR.call(e)?!1:!N8(a,D8)}}return!1}function qR(n){return Object.keys(n).filter(k8,n)}function k8(n){return this[n]!==void 0}const D8="{ [native code] }";function N8(n,e){const t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}function WR(n,e){let t=ux.get(n);if(t){if(t.has(e))return!0}else ux.set(n,t=new Set);return t.add(e),!1}function lN(n,e,t,r){var a=e.data,i=ma(e,["data"]),o=t.data,u=ma(t,["data"]);return _t(i,u)&&zp(Uh(n).selectionSet,a,o,{fragmentMap:lc(fc(n)),variables:r})}function zp(n,e,t,r){if(e===t)return!0;var a=new Set;return n.selections.every(function(i){if(a.has(i)||(a.add(i),!zh(i,r.variables))||HR(i))return!0;if(Xo(i)){var o=Pi(i),u=e&&e[o],c=t&&t[o],f=i.selectionSet;if(!f)return _t(u,c);var d=Array.isArray(u),p=Array.isArray(c);if(d!==p)return!1;if(d&&p){var v=u.length;if(c.length!==v)return!1;for(var g=0;g<v;++g)if(!zp(f,u[g],c[g],r))return!1;return!0}return zp(f,u,c,r)}else{var y=dm(i,r.fragmentMap);if(y)return HR(y)?!0:zp(y.selectionSet,e,t,r)}})}function HR(n){return!!n.directives&&n.directives.some(I8)}function I8(n){return n.name.value==="nonreactive"}var cN=ou?WeakMap:Map,fN=W1?WeakSet:Set,aw=new Vh,GR=!1;function hN(){GR||(GR=!0,globalThis.__DEV__!==!1&&Ce.warn(52))}function dN(n,e,t){return aw.withValue(!0,function(){var r=kf(n,e,t,!1);return Object.isFrozen(n)&&tc(r),r})}function M8(n,e){if(e.has(n))return e.get(n);var t=Array.isArray(n)?[]:Object.create(null);return e.set(n,t),t}function kf(n,e,t,r,a){var i,o=t.knownChanged,u=M8(n,t.mutableTargets);if(Array.isArray(n)){for(var c=0,f=Array.from(n.entries());c<f.length;c++){var d=f[c],p=d[0],v=d[1];if(v===null){u[p]=null;continue}var g=kf(v,e,t,r,globalThis.__DEV__!==!1?"".concat(a||"","[").concat(p,"]"):void 0);o.has(g)&&o.add(u),u[p]=g}return o.has(u)?u:n}for(var y=0,x=e.selections;y<x.length;y++){var w=x[y],_=void 0;if(r&&o.add(u),w.kind===_e.FIELD){var S=Pi(w),C=w.selectionSet;if(_=u[S]||n[S],_===void 0)continue;if(C&&_!==null){var g=kf(n[S],C,t,r,globalThis.__DEV__!==!1?"".concat(a||"",".").concat(S):void 0);o.has(g)&&(_=g)}globalThis.__DEV__===!1&&(u[S]=_),globalThis.__DEV__!==!1&&(r&&S!=="__typename"&&!(!((i=Object.getOwnPropertyDescriptor(u,S))===null||i===void 0)&&i.value)?Object.defineProperty(u,S,F8(S,_,a||"",t.operationName,t.operationType)):(delete u[S],u[S]=_))}if(w.kind===_e.INLINE_FRAGMENT&&(!w.typeCondition||t.cache.fragmentMatches(w,n.__typename))&&(_=kf(n,w.selectionSet,t,r,a)),w.kind===_e.FRAGMENT_SPREAD){var R=w.name.value,T=t.fragmentMap[R]||(t.fragmentMap[R]=t.cache.lookupFragment(R));Ce(T,47,R);var O=IH(w);O!=="mask"&&(_=kf(n,T.selectionSet,t,O==="migrate",a))}o.has(_)&&o.add(u)}return"__typename"in n&&!("__typename"in u)&&(u.__typename=n.__typename),Object.keys(u).length!==Object.keys(n).length&&o.add(u),o.has(u)?u:n}function F8(n,e,t,r,a){var i=function(){return aw.getValue()||(globalThis.__DEV__!==!1&&Ce.warn(48,r?"".concat(a," '").concat(r,"'"):"anonymous ".concat(a),"".concat(t,".").concat(n).replace(/^\./,"")),i=function(){return e}),e};return{get:function(){return i()},set:function(o){i=function(){return o}},enumerable:!0,configurable:!0}}function pN(n,e,t,r){if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&hN(),n;var a=e.definitions.filter(function(o){return o.kind===_e.FRAGMENT_DEFINITION});typeof r>"u"&&(Ce(a.length===1,49,a.length),r=a[0].name.value);var i=a.find(function(o){return o.name.value===r});return Ce(!!i,50,r),n==null||_t(n,{})?n:dN(n,i.selectionSet,{operationType:"fragment",operationName:i.name.value,fragmentMap:lc(fc(e)),cache:t,mutableTargets:new cN,knownChanged:new fN})}function P8(n,e,t){var r;if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&hN(),n;var a=Js(e);return Ce(a,51),n==null?n:dN(n,a.selectionSet,{operationType:a.operation,operationName:(r=a.name)===null||r===void 0?void 0:r.value,fragmentMap:lc(fc(e)),cache:t,mutableTargets:new cN,knownChanged:new fN})}var vN=function(){function n(){this.assumeImmutableResults=!1,this.getFragmentDoc=yh(UH,{max:Ja["cache.fragmentQueryDocuments"]||1e3,cache:Dv})}return n.prototype.lookupFragment=function(e){return null},n.prototype.batch=function(e){var t=this,r=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,a;return this.performTransaction(function(){return a=e.update(t)},r),a},n.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},n.prototype.transformDocument=function(e){return e},n.prototype.transformForLink=function(e){return e},n.prototype.identify=function(e){},n.prototype.gc=function(){return[]},n.prototype.modify=function(e){return!1},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(K(K({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},n.prototype.watchFragment=function(e){var t=this,r=e.fragment,a=e.fragmentName,i=e.from,o=e.optimistic,u=o===void 0?!0:o,c=ma(e,["fragment","fragmentName","from","optimistic"]),f=this.getFragmentDoc(r,a),d=typeof i>"u"||typeof i=="string"?i:this.identify(i),p=!!e[Symbol.for("apollo.dataMasking")];if(globalThis.__DEV__!==!1){var v=a||BD(r).name.value;d||globalThis.__DEV__!==!1&&Ce.warn(1,v)}var g=K(K({},c),{returnPartialData:!0,id:d,query:f,optimistic:u}),y;return new Lt(function(x){return t.watch(K(K({},g),{immediate:!0,callback:function(w){var _=p?pN(w.result,r,t,a):w.result;if(!(y&&lN(f,{data:y.result},{data:_},e.variables))){var S={data:_,complete:!!w.complete};w.missing&&(S.missing=gm(w.missing.map(function(C){return C.missing}))),y=K(K({},w),{result:_}),x.next(S)}}}))})},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(K(K({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},n.prototype.writeQuery=function(e){var t=e.id,r=e.data,a=ma(e,["id","data"]);return this.write(Object.assign(a,{dataId:t||"ROOT_QUERY",result:r}))},n.prototype.writeFragment=function(e){var t=e.id,r=e.data,a=e.fragment,i=e.fragmentName,o=ma(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(a,i),dataId:t,result:r}))},n.prototype.updateQuery=function(e,t){return this.batch({update:function(r){var a=r.readQuery(e),i=t(a);return i==null?a:(r.writeQuery(K(K({},e),{data:i})),i)}})},n.prototype.updateFragment=function(e,t){return this.batch({update:function(r){var a=r.readFragment(e),i=t(a);return i==null?a:(r.writeFragment(K(K({},e),{data:i})),i)}})},n}();globalThis.__DEV__!==!1&&(vN.prototype.getMemoryInternals=ZH);var mN=function(n){ti(e,n);function e(t,r,a,i){var o,u=n.call(this,t)||this;if(u.message=t,u.path=r,u.query=a,u.variables=i,Array.isArray(u.path)){u.missing=u.message;for(var c=u.path.length-1;c>=0;--c)u.missing=(o={},o[u.path[c]]=u.missing,o)}else u.missing=u.path;return u.__proto__=e.prototype,u}return e}(Error),On=Object.prototype.hasOwnProperty;function _f(n){return n==null}function gN(n,e){var t=n.__typename,r=n.id,a=n._id;if(typeof t=="string"&&(e&&(e.keyObject=_f(r)?_f(a)?void 0:{_id:a}:{id:r}),_f(r)&&!_f(a)&&(r=a),!_f(r)))return"".concat(t,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var yN={dataIdFromObject:gN,addTypename:!0,resultCaching:!0,canonizeResults:!1};function L8(n){return eu(yN,n)}function bN(n){var e=n.canonizeResults;return e===void 0?yN.canonizeResults:e}function B8(n,e){return St(e)?n.get(e.__ref,"__typename"):e&&e.__typename}var xN=/^[_a-z][_0-9a-z]*/i;function Jo(n){var e=n.match(xN);return e?e[0]:n}function cx(n,e,t){return Zt(e)?Jt(e)?e.every(function(r){return cx(n,r,t)}):n.selections.every(function(r){if(Xo(r)&&zh(r,t)){var a=Pi(r);return On.call(e,a)&&(!r.selectionSet||cx(r.selectionSet,e[a],t))}return!0}):!1}function fl(n){return Zt(n)&&!St(n)&&!Jt(n)}function z8(){return new Zo}function wN(n,e){var t=lc(fc(n));return{fragmentMap:t,lookupFragment:function(r){var a=t[r];return!a&&e&&(a=e.lookup(r)),a||null}}}var Up=Object.create(null),I0=function(){return Up},QR=Object.create(null),bh=function(){function n(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(a,i){return tc(St(a)?r.get(a.__ref,i):a&&a[i])},this.canRead=function(a){return St(a)?r.has(a.__ref):typeof a=="object"},this.toReference=function(a,i){if(typeof a=="string")return El(a);if(St(a))return a;var o=r.policies.identify(a)[0];if(o){var u=El(o);return i&&r.merge(o,a),u}}}return n.prototype.toObject=function(){return K({},this.data)},n.prototype.has=function(e){return this.lookup(e,!0)!==void 0},n.prototype.get=function(e,t){if(this.group.depend(e,t),On.call(this.data,e)){var r=this.data[e];if(r&&On.call(r,t))return r[t]}if(t==="__typename"&&On.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof _o)return this.parent.get(e,t)},n.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),On.call(this.data,e))return this.data[e];if(this instanceof _o)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},n.prototype.merge=function(e,t){var r=this,a;St(e)&&(e=e.__ref),St(t)&&(t=t.__ref);var i=typeof e=="string"?this.lookup(a=e):e,o=typeof t=="string"?this.lookup(a=t):t;if(o){Ce(typeof a=="string",2);var u=new Zo(V8).merge(i,o);if(this.data[a]=u,u!==i&&(delete this.refs[a],this.group.caching)){var c=Object.create(null);i||(c.__exists=1),Object.keys(o).forEach(function(f){if(!i||i[f]!==u[f]){c[f]=1;var d=Jo(f);d!==f&&!r.policies.hasKeyArgs(u.__typename,d)&&(c[d]=1),u[f]===void 0&&!(r instanceof _o)&&delete u[f]}}),c.__typename&&!(i&&i.__typename)&&this.policies.rootTypenamesById[a]===u.__typename&&delete c.__typename,Object.keys(c).forEach(function(f){return r.group.dirty(a,f)})}}},n.prototype.modify=function(e,t){var r=this,a=this.lookup(e);if(a){var i=Object.create(null),o=!1,u=!0,c={DELETE:Up,INVALIDATE:QR,isReference:St,toReference:this.toReference,canRead:this.canRead,readField:function(f,d){return r.policies.readField(typeof f=="string"?{fieldName:f,from:d||El(e)}:f,{store:r})}};if(Object.keys(a).forEach(function(f){var d=Jo(f),p=a[f];if(p!==void 0){var v=typeof t=="function"?t:t[f]||t[d];if(v){var g=v===I0?Up:v(tc(p),K(K({},c),{fieldName:d,storeFieldName:f,storage:r.getStorage(e,f)}));if(g===QR)r.group.dirty(e,f);else if(g===Up&&(g=void 0),g!==p&&(i[f]=g,o=!0,p=g,globalThis.__DEV__!==!1)){var y=function(T){if(r.lookup(T.__ref)===void 0)return globalThis.__DEV__!==!1&&Ce.warn(3,T),!0};if(St(g))y(g);else if(Array.isArray(g))for(var x=!1,w=void 0,_=0,S=g;_<S.length;_++){var C=S[_];if(St(C)){if(x=!0,y(C))break}else if(typeof C=="object"&&C){var R=r.policies.identify(C)[0];R&&(w=C)}if(x&&w!==void 0){globalThis.__DEV__!==!1&&Ce.warn(4,w);break}}}}p!==void 0&&(u=!1)}}),o)return this.merge(e,i),u&&(this instanceof _o?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},n.prototype.delete=function(e,t,r){var a,i=this.lookup(e);if(i){var o=this.getFieldValue(i,"__typename"),u=t&&r?this.policies.getStoreFieldName({typename:o,fieldName:t,args:r}):t;return this.modify(e,u?(a={},a[u]=I0,a):I0)}return!1},n.prototype.evict=function(e,t){var r=!1;return e.id&&(On.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof _o&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach(function(a){On.call(e.policies.rootTypenamesById,a)||r.push(a)}),r.length&&(t.__META={extraRootIds:r.sort()}),t},n.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(i){e&&On.call(e,i)||t.delete(i)}),e){var r=e.__META,a=ma(e,["__META"]);Object.keys(a).forEach(function(i){t.merge(i,a[i])}),r&&r.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},n.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},n.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof _o?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},n.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach(function(o){On.call(r,o)&&(Object.keys(e.findChildRefIds(o)).forEach(t.add,t),delete r[o])});var a=Object.keys(r);if(a.length){for(var i=this;i instanceof _o;)i=i.parent;a.forEach(function(o){return i.delete(o)})}return a},n.prototype.findChildRefIds=function(e){if(!On.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var a=new Set([r]);a.forEach(function(i){St(i)&&(t[i.__ref]=!0),Zt(i)&&Object.keys(i).forEach(function(o){var u=i[o];Zt(u)&&a.add(u)})})}return this.refs[e]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n}(),_N=function(){function n(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?KD():null,this.keyMaker=new Wi(ou)},n.prototype.depend=function(e,t){if(this.d){this.d(M0(e,t));var r=Jo(t);r!==t&&this.d(M0(e,r)),this.parent&&this.parent.depend(e,t)}},n.prototype.dirty=function(e,t){this.d&&this.d.dirty(M0(e,t),t==="__exists"?"forget":"setDirty")},n}();function M0(n,e){return e+"#"+n}function $R(n,e){zf(n)&&n.group.depend(e,"__exists")}(function(n){var e=function(t){ti(r,t);function r(a){var i=a.policies,o=a.resultCaching,u=o===void 0?!0:o,c=a.seed,f=t.call(this,i,new _N(u))||this;return f.stump=new U8(f),f.storageTrie=new Wi(ou),c&&f.replace(c),f}return r.prototype.addLayer=function(a,i){return this.stump.addLayer(a,i)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(n);n.Root=e})(bh||(bh={}));var _o=function(n){ti(e,n);function e(t,r,a,i){var o=n.call(this,r.policies,i)||this;return o.id=t,o.parent=r,o.replay=a,o.group=i,a(o),o}return e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var r=this,a=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(i){var o=r.data[i],u=a.lookup(i);u?o?o!==u&&Object.keys(o).forEach(function(c){_t(o[c],u[c])||r.group.dirty(i,c)}):(r.group.dirty(i,"__exists"),Object.keys(u).forEach(function(c){r.group.dirty(i,c)})):r.delete(i)}),a):a===this.parent?this:a.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return K(K({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return On.call(this.data,t)?K(K({},r),n.prototype.findChildRefIds.call(this,t)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(bh),U8=function(n){ti(e,n);function e(t){return n.call(this,"EntityStore.Stump",t,function(){},new _N(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,r){return this.parent.merge(t,r)},e}(_o);function V8(n,e,t){var r=n[t],a=e[t];return _t(r,a)?r:a}function zf(n){return!!(n instanceof bh&&n.group.caching)}function j8(n){return Zt(n)?Jt(n)?n.slice(0):K({__proto__:Object.getPrototypeOf(n)},n):n}var KR=function(){function n(){this.known=new(W1?WeakSet:Set),this.pool=new Wi(ou),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(e){return Zt(e)&&this.known.has(e)},n.prototype.pass=function(e){if(Zt(e)){var t=j8(e);return this.passes.set(t,e),t}return e},n.prototype.admit=function(e){var t=this;if(Zt(e)){var r=this.passes.get(e);if(r)return r;var a=Object.getPrototypeOf(e);switch(a){case Array.prototype:{if(this.known.has(e))return e;var i=e.map(this.admit,this),o=this.pool.lookupArray(i);return o.array||(this.known.add(o.array=i),globalThis.__DEV__!==!1&&Object.freeze(i)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var u=Object.getPrototypeOf(e),c=[u],f=this.sortedKeys(e);c.push(f.json);var d=c.length;f.sorted.forEach(function(g){c.push(t.admit(e[g]))});var o=this.pool.lookupArray(c);if(!o.object){var p=o.object=Object.create(u);this.known.add(p),f.sorted.forEach(function(g,y){p[g]=c[d+y]}),globalThis.__DEV__!==!1&&Object.freeze(p)}return o.object}}}return e},n.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var a=JSON.stringify(t);(r.keys=this.keysByJSON.get(a))||this.keysByJSON.set(a,r.keys={sorted:t,json:a})}return r.keys},n}();function XR(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var q8=function(){function n(e){var t=this;this.knownResults=new(ou?WeakMap:Map),this.config=eu(e,{addTypename:e.addTypename!==!1,canonizeResults:bN(e)}),this.canon=e.canon||new KR,this.executeSelectionSet=yh(function(r){var a,i=r.context.canonizeResults,o=XR(r);o[3]=!i;var u=(a=t.executeSelectionSet).peek.apply(a,o);return u?i?K(K({},u),{result:t.canon.admit(u.result)}):u:($R(r.context.store,r.enclosingRef.__ref),t.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize||Ja["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:XR,makeCacheKey:function(r,a,i,o){if(zf(i.store))return i.store.makeCacheKey(r,St(a)?a.__ref:a,i.varString,o)}}),this.executeSubSelectedArray=yh(function(r){return $R(r.context.store,r.enclosingRef.__ref),t.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize||Ja["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(r){var a=r.field,i=r.array,o=r.context;if(zf(o.store))return o.store.makeCacheKey(a,i,o.varString)}})}return n.prototype.resetCanon=function(){this.canon=new KR},n.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,a=e.rootId,i=a===void 0?"ROOT_QUERY":a,o=e.variables,u=e.returnPartialData,c=u===void 0?!0:u,f=e.canonizeResults,d=f===void 0?this.config.canonizeResults:f,p=this.config.cache.policies;o=K(K({},$1(LD(r))),o);var v=El(i),g=this.executeSelectionSet({selectionSet:Uh(r).selectionSet,objectOrReference:v,enclosingRef:v,context:K({store:t,query:r,policies:p,variables:o,varString:qo(o),canonizeResults:d},wN(r,this.config.fragments))}),y;if(g.missing&&(y=[new mN(W8(g.missing),g.missing,r,o)],!c))throw y[0];return{result:g.result,complete:!y,missing:y}},n.prototype.isFresh=function(e,t,r,a){if(zf(a.store)&&this.knownResults.get(e)===r){var i=this.executeSelectionSet.peek(r,t,a,this.canon.isKnown(e));if(i&&e===i.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,a=e.objectOrReference,i=e.enclosingRef,o=e.context;if(St(a)&&!o.policies.rootTypenamesById[a.__ref]&&!o.store.has(a.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(a.__ref," object")};var u=o.variables,c=o.policies,f=o.store,d=f.getFieldValue(a,"__typename"),p=[],v,g=new Zo;this.config.addTypename&&typeof d=="string"&&!c.rootIdsByTypename[d]&&p.push({__typename:d});function y(C,R){var T;return C.missing&&(v=g.merge(v,(T={},T[R]=C.missing,T))),C.result}var x=new Set(r.selections);x.forEach(function(C){var R,T;if(zh(C,u))if(Xo(C)){var O=c.readField({fieldName:C.name.value,field:C,variables:o.variables,from:a},o),k=Pi(C);O===void 0?Z1.added(C)||(v=g.merge(v,(R={},R[k]="Can't find field '".concat(C.name.value,"' on ").concat(St(a)?a.__ref+" object":"object "+JSON.stringify(a,null,2)),R))):Jt(O)?O.length>0&&(O=y(t.executeSubSelectedArray({field:C,array:O,enclosingRef:i,context:o}),k)):C.selectionSet?O!=null&&(O=y(t.executeSelectionSet({selectionSet:C.selectionSet,objectOrReference:O,enclosingRef:St(O)?O:i,context:o}),k)):o.canonizeResults&&(O=t.canon.pass(O)),O!==void 0&&p.push((T={},T[k]=O,T))}else{var D=dm(C,o.lookupFragment);if(!D&&C.kind===_e.FRAGMENT_SPREAD)throw ar(10,C.name.value);D&&c.fragmentMatches(D,d)&&D.selectionSet.selections.forEach(x.add,x)}});var w=gm(p),_={result:w,missing:v},S=o.canonizeResults?this.canon.admit(_):tc(_);return S.result&&this.knownResults.set(S.result,r),S},n.prototype.execSubSelectedArrayImpl=function(e){var t=this,r=e.field,a=e.array,i=e.enclosingRef,o=e.context,u,c=new Zo;function f(d,p){var v;return d.missing&&(u=c.merge(u,(v={},v[p]=d.missing,v))),d.result}return r.selectionSet&&(a=a.filter(o.store.canRead)),a=a.map(function(d,p){return d===null?null:Jt(d)?f(t.executeSubSelectedArray({field:r,array:d,enclosingRef:i,context:o}),p):r.selectionSet?f(t.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:d,enclosingRef:St(d)?d:i,context:o}),p):(globalThis.__DEV__!==!1&&H8(o.store,r,d),d)}),{result:o.canonizeResults?this.canon.admit(a):a,missing:u}},n}();function W8(n){try{JSON.stringify(n,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function H8(n,e,t){if(!e.selectionSet){var r=new Set([t]);r.forEach(function(a){Zt(a)&&(Ce(!St(a),11,B8(n,a),e.name.value),Object.values(a).forEach(r.add,r))})}}var iw=new Vh,YR=new WeakMap;function Uf(n){var e=YR.get(n);return e||YR.set(n,e={vars:new Set,dep:KD()}),e}function ZR(n){Uf(n).vars.forEach(function(e){return e.forgetCache(n)})}function G8(n){Uf(n).vars.forEach(function(e){return e.attachCache(n)})}function Q8(n){var e=new Set,t=new Set,r=function(i){if(arguments.length>0){if(n!==i){n=i,e.forEach(function(c){Uf(c).dep.dirty(r),$8(c)});var o=Array.from(t);t.clear(),o.forEach(function(c){return c(n)})}}else{var u=iw.getValue();u&&(a(u),Uf(u).dep(r))}return n};r.onNextChange=function(i){return t.add(i),function(){t.delete(i)}};var a=r.attachCache=function(i){return e.add(i),Uf(i).vars.add(r),r};return r.forgetCache=function(i){return e.delete(i)},r}function $8(n){n.broadcastWatches&&n.broadcastWatches()}var JR=Object.create(null);function ow(n){var e=JSON.stringify(n);return JR[e]||(JR[e]=Object.create(null))}function eT(n){var e=ow(n);return e.keyFieldsFn||(e.keyFieldsFn=function(t,r){var a=function(o,u){return r.readField(u,o)},i=r.keyObject=sw(n,function(o){var u=Cl(r.storeObject,o,a);return u===void 0&&t!==r.storeObject&&On.call(t,o[0])&&(u=Cl(t,o,SN)),Ce(u!==void 0,5,o.join("."),t),u});return"".concat(r.typename,":").concat(JSON.stringify(i))})}function tT(n){var e=ow(n);return e.keyArgsFn||(e.keyArgsFn=function(t,r){var a=r.field,i=r.variables,o=r.fieldName,u=sw(n,function(f){var d=f[0],p=d.charAt(0);if(p==="@"){if(a&&ea(a.directives)){var v=d.slice(1),g=a.directives.find(function(_){return _.name.value===v}),y=g&&pm(g,i);return y&&Cl(y,f.slice(1))}return}if(p==="$"){var x=d.slice(1);if(i&&On.call(i,x)){var w=f.slice(0);return w[0]=x,Cl(i,w)}return}if(t)return Cl(t,f)}),c=JSON.stringify(u);return(t||c!=="{}")&&(o+=":"+c),o})}function sw(n,e){var t=new Zo;return EN(n).reduce(function(r,a){var i,o=e(a);if(o!==void 0){for(var u=a.length-1;u>=0;--u)o=(i={},i[a[u]]=o,i);r=t.merge(r,o)}return r},Object.create(null))}function EN(n){var e=ow(n);if(!e.paths){var t=e.paths=[],r=[];n.forEach(function(a,i){Jt(a)?(EN(a).forEach(function(o){return t.push(r.concat(o))}),r.length=0):(r.push(a),Jt(n[i+1])||(t.push(r.slice(0)),r.length=0))})}return e.paths}function SN(n,e){return n[e]}function Cl(n,e,t){return t=t||SN,CN(e.reduce(function r(a,i){return Jt(a)?a.map(function(o){return r(o,i)}):a&&t(a,i)},n))}function CN(n){return Zt(n)?Jt(n)?n.map(CN):sw(Object.keys(n).sort(),function(e){return Cl(n,e)}):n}function fx(n){return n.args!==void 0?n.args:n.field?pm(n.field,n.variables):null}var K8=function(){},nT=function(n,e){return e.fieldName},rT=function(n,e,t){var r=t.mergeObjects;return r(n,e)},aT=function(n,e){return e},X8=function(){function n(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=K({dataIdFromObject:gN},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return n.prototype.identify=function(e,t){var r,a=this,i=t&&(t.typename||((r=t.storeObject)===null||r===void 0?void 0:r.__typename))||e.__typename;if(i===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o=t&&t.storeObject||e,u=K(K({},t),{typename:i,storeObject:o,readField:t&&t.readField||function(){var p=uw(arguments,o);return a.readField(p,{store:a.cache.data,variables:p.variables})}}),c,f=i&&this.getTypePolicy(i),d=f&&f.keyFn||this.config.dataIdFromObject;return aw.withValue(!0,function(){for(;d;){var p=d(K(K({},e),o),u);if(Jt(p))d=eT(p);else{c=p;break}}}),c=c?String(c):void 0,u.keyObject?[c,u.keyObject]:[c]},n.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(r){var a=e[r],i=a.queryType,o=a.mutationType,u=a.subscriptionType,c=ma(a,["queryType","mutationType","subscriptionType"]);i&&t.setRootTypename("Query",r),o&&t.setRootTypename("Mutation",r),u&&t.setRootTypename("Subscription",r),On.call(t.toBeAdded,r)?t.toBeAdded[r].push(c):t.toBeAdded[r]=[c]})},n.prototype.updateTypePolicy=function(e,t){var r=this,a=this.getTypePolicy(e),i=t.keyFields,o=t.fields;function u(c,f){c.merge=typeof f=="function"?f:f===!0?rT:f===!1?aT:c.merge}u(a,t.merge),a.keyFn=i===!1?K8:Jt(i)?eT(i):typeof i=="function"?i:a.keyFn,o&&Object.keys(o).forEach(function(c){var f=r.getFieldPolicy(e,c,!0),d=o[c];if(typeof d=="function")f.read=d;else{var p=d.keyArgs,v=d.read,g=d.merge;f.keyFn=p===!1?nT:Jt(p)?tT(p):typeof p=="function"?p:f.keyFn,typeof v=="function"&&(f.read=v),u(f,g)}f.read&&f.merge&&(f.keyFn=f.keyFn||nT)})},n.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var r="ROOT_"+e.toUpperCase(),a=this.rootTypenamesById[r];t!==a&&(Ce(!a||a===e,6,e),a&&delete this.rootIdsByTypename[a],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},n.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(r){t.getSupertypeSet(r,!0),e[r].forEach(function(a){t.getSupertypeSet(a,!0).add(r);var i=a.match(xN);(!i||i[0]!==a)&&t.fuzzySubtypes.set(a,new RegExp(a))})})},n.prototype.getTypePolicy=function(e){var t=this;if(!On.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var a=this.supertypeMap.get(e);!a&&this.fuzzySubtypes.size&&(a=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(function(o,u){if(o.test(e)){var c=t.supertypeMap.get(u);c&&c.forEach(function(f){return a.add(f)})}})),a&&a.size&&a.forEach(function(o){var u=t.getTypePolicy(o),c=u.fields,f=ma(u,["fields"]);Object.assign(r,f),Object.assign(r.fields,c)})}var i=this.toBeAdded[e];return i&&i.length&&i.splice(0).forEach(function(o){t.updateTypePolicy(e,o)}),this.typePolicies[e]},n.prototype.getFieldPolicy=function(e,t,r){if(e){var a=this.getTypePolicy(e).fields;return a[t]||r&&(a[t]=Object.create(null))}},n.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},n.prototype.fragmentMatches=function(e,t,r,a){var i=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var u=this.getSupertypeSet(t,!0),c=[u],f=function(y){var x=i.getSupertypeSet(y,!1);x&&x.size&&c.indexOf(x)<0&&c.push(x)},d=!!(r&&this.fuzzySubtypes.size),p=!1,v=0;v<c.length;++v){var g=c[v];if(g.has(o))return u.has(o)||(p&&globalThis.__DEV__!==!1&&Ce.warn(7,t,o),u.add(o)),!0;g.forEach(f),d&&v===c.length-1&&cx(e.selectionSet,r,a)&&(d=!1,p=!0,this.fuzzySubtypes.forEach(function(y,x){var w=t.match(y);w&&w[0]===t&&f(x)}))}return!1},n.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!!(r&&r.keyFn)},n.prototype.getStoreFieldName=function(e){var t=e.typename,r=e.fieldName,a=this.getFieldPolicy(t,r,!1),i,o=a&&a.keyFn;if(o&&t)for(var u={typename:t,fieldName:r,field:e.field||null,variables:e.variables},c=fx(e);o;){var f=o(c,u);if(Jt(f))o=tT(f);else{i=f||r;break}}return i===void 0&&(i=e.field?vG(e.field,e.variables):PD(r,fx(e))),i===!1?r:r===Jo(i)?i:r+":"+i},n.prototype.readField=function(e,t){var r=e.from;if(r){var a=e.field||e.fieldName;if(a){if(e.typename===void 0){var i=t.store.getFieldValue(r,"__typename");i&&(e.typename=i)}var o=this.getStoreFieldName(e),u=Jo(o),c=t.store.getFieldValue(r,o),f=this.getFieldPolicy(e.typename,u,!1),d=f&&f.read;if(d){var p=iT(this,r,e,t,t.store.getStorage(St(r)?r.__ref:r,o));return iw.withValue(this.cache,d,[c,p])}return c}}},n.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t,!1);return r&&r.read},n.prototype.getMergeFunction=function(e,t,r){var a=this.getFieldPolicy(e,t,!1),i=a&&a.merge;return!i&&r&&(a=this.getTypePolicy(r),i=a&&a.merge),i},n.prototype.runMergeFunction=function(e,t,r,a,i){var o=r.field,u=r.typename,c=r.merge;return c===rT?RN(a.store)(e,t):c===aT?t:(a.overwrite&&(e=void 0),c(e,t,iT(this,void 0,{typename:u,fieldName:o.name.value,field:o,variables:a.variables},a,i||Object.create(null))))},n}();function iT(n,e,t,r,a){var i=n.getStoreFieldName(t),o=Jo(i),u=t.variables||r.variables,c=r.store,f=c.toReference,d=c.canRead;return{args:fx(t),field:t.field||null,fieldName:o,storeFieldName:i,variables:u,isReference:St,toReference:f,storage:a,cache:n.cache,canRead:d,readField:function(){return n.readField(uw(arguments,e,u),r)},mergeObjects:RN(r.store)}}function uw(n,e,t){var r=n[0],a=n[1],i=n.length,o;return typeof r=="string"?o={fieldName:r,from:i>1?a:e}:(o=K({},r),On.call(o,"from")||(o.from=e)),globalThis.__DEV__!==!1&&o.from===void 0&&globalThis.__DEV__!==!1&&Ce.warn(8,yD(Array.from(n))),o.variables===void 0&&(o.variables=t),o}function RN(n){return function(t,r){if(Jt(t)||Jt(r))throw ar(9);if(Zt(t)&&Zt(r)){var a=n.getFieldValue(t,"__typename"),i=n.getFieldValue(r,"__typename"),o=a&&i&&a!==i;if(o)return r;if(St(t)&&fl(r))return n.merge(t.__ref,r),t;if(fl(t)&&St(r))return n.merge(t,r.__ref),r;if(fl(t)&&fl(r))return K(K({},t),r)}return r}}function F0(n,e,t){var r="".concat(e).concat(t),a=n.flavors.get(r);return a||n.flavors.set(r,a=n.clientOnly===e&&n.deferred===t?n:K(K({},n),{clientOnly:e,deferred:t})),a}var Y8=function(){function n(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return n.prototype.writeToStore=function(e,t){var r=this,a=t.query,i=t.result,o=t.dataId,u=t.variables,c=t.overwrite,f=Js(a),d=z8();u=K(K({},$1(f)),u);var p=K(K({store:e,written:Object.create(null),merge:function(g,y){return d.merge(g,y)},variables:u,varString:qo(u)},wN(a,this.fragments)),{overwrite:!!c,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),v=this.processSelectionSet({result:i||Object.create(null),dataId:o,selectionSet:f.selectionSet,mergeTree:{map:new Map},context:p});if(!St(v))throw ar(12,i);return p.incomingById.forEach(function(g,y){var x=g.storeObject,w=g.mergeTree,_=g.fieldNodeSet,S=El(y);if(w&&w.map.size){var C=r.applyMerges(w,S,x,p);if(St(C))return;x=C}if(globalThis.__DEV__!==!1&&!p.overwrite){var R=Object.create(null);_.forEach(function(k){k.selectionSet&&(R[k.name.value]=!0)});var T=function(k){return R[Jo(k)]===!0},O=function(k){var D=w&&w.map.get(k);return!!(D&&D.info&&D.info.merge)};Object.keys(x).forEach(function(k){T(k)&&!O(k)&&Z8(S,x,k,p.store)})}e.merge(y,x)}),e.retain(v.__ref),v},n.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,a=e.result,i=e.selectionSet,o=e.context,u=e.mergeTree,c=this.cache.policies,f=Object.create(null),d=r&&c.rootTypenamesById[r]||tx(a,i,o.fragmentMap)||r&&o.store.get(r,"__typename");typeof d=="string"&&(f.__typename=d);var p=function(){var C=uw(arguments,f,o.variables);if(St(C.from)){var R=o.incomingById.get(C.from.__ref);if(R){var T=c.readField(K(K({},C),{from:R.storeObject}),o);if(T!==void 0)return T}}return c.readField(C,o)},v=new Set;this.flattenFields(i,a,o,d).forEach(function(C,R){var T,O=Pi(R),k=a[O];if(v.add(R),k!==void 0){var D=c.getStoreFieldName({typename:d,fieldName:R.name.value,field:R,variables:C.variables}),N=oT(u,D),M=t.processFieldValue(k,R,R.selectionSet?F0(C,!1,!1):C,N),B=void 0;R.selectionSet&&(St(M)||fl(M))&&(B=p("__typename",M));var z=c.getMergeFunction(d,R.name.value,B);z?N.info={field:R,typename:d,merge:z}:sT(u,D),f=C.merge(f,(T={},T[D]=M,T))}else globalThis.__DEV__!==!1&&!C.clientOnly&&!C.deferred&&!Z1.added(R)&&!c.getReadFunction(d,R.name.value)&&globalThis.__DEV__!==!1&&Ce.error(13,Pi(R),a)});try{var g=c.identify(a,{typename:d,selectionSet:i,fragmentMap:o.fragmentMap,storeObject:f,readField:p}),y=g[0],x=g[1];r=r||y,x&&(f=o.merge(f,x))}catch(C){if(!r)throw C}if(typeof r=="string"){var w=El(r),_=o.written[r]||(o.written[r]=[]);if(_.indexOf(i)>=0||(_.push(i),this.reader&&this.reader.isFresh(a,w,i,o)))return w;var S=o.incomingById.get(r);return S?(S.storeObject=o.merge(S.storeObject,f),S.mergeTree=hx(S.mergeTree,u),v.forEach(function(C){return S.fieldNodeSet.add(C)})):o.incomingById.set(r,{storeObject:f,mergeTree:Iv(u)?void 0:u,fieldNodeSet:v}),w}return f},n.prototype.processFieldValue=function(e,t,r,a){var i=this;return!t.selectionSet||e===null?globalThis.__DEV__!==!1?rN(e):e:Jt(e)?e.map(function(o,u){var c=i.processFieldValue(o,t,r,oT(a,u));return sT(a,u),c}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:a})},n.prototype.flattenFields=function(e,t,r,a){a===void 0&&(a=tx(t,e,r.fragmentMap));var i=new Map,o=this.cache.policies,u=new Wi(!1);return function c(f,d){var p=u.lookup(f,d.clientOnly,d.deferred);p.visited||(p.visited=!0,f.selections.forEach(function(v){if(zh(v,r.variables)){var g=d.clientOnly,y=d.deferred;if(!(g&&y)&&ea(v.directives)&&v.directives.forEach(function(_){var S=_.name.value;if(S==="client"&&(g=!0),S==="defer"){var C=pm(_,r.variables);(!C||C.if!==!1)&&(y=!0)}}),Xo(v)){var x=i.get(v);x&&(g=g&&x.clientOnly,y=y&&x.deferred),i.set(v,F0(r,g,y))}else{var w=dm(v,r.lookupFragment);if(!w&&v.kind===_e.FRAGMENT_SPREAD)throw ar(14,v.name.value);w&&o.fragmentMatches(w,a,t,r.variables)&&c(w.selectionSet,F0(r,g,y))}}}))}(e,r),i},n.prototype.applyMerges=function(e,t,r,a,i){var o,u=this;if(e.map.size&&!St(r)){var c=!Jt(r)&&(St(t)||fl(t))?t:void 0,f=r;c&&!i&&(i=[St(c)?c.__ref:c]);var d,p=function(v,g){return Jt(v)?typeof g=="number"?v[g]:void 0:a.store.getFieldValue(v,String(g))};e.map.forEach(function(v,g){var y=p(c,g),x=p(f,g);if(x!==void 0){i&&i.push(g);var w=u.applyMerges(v,y,x,a,i);w!==x&&(d=d||new Map,d.set(g,w)),i&&Ce(i.pop()===g)}}),d&&(r=Jt(f)?f.slice(0):K({},f),d.forEach(function(v,g){r[g]=v}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,a,i&&(o=a.store).getStorage.apply(o,i)):r},n}(),TN=[];function oT(n,e){var t=n.map;return t.has(e)||t.set(e,TN.pop()||{map:new Map}),t.get(e)}function hx(n,e){if(n===e||!e||Iv(e))return n;if(!n||Iv(n))return e;var t=n.info&&e.info?K(K({},n.info),e.info):n.info||e.info,r=n.map.size&&e.map.size,a=r?new Map:n.map.size?n.map:e.map,i={info:t,map:a};if(r){var o=new Set(e.map.keys());n.map.forEach(function(u,c){i.map.set(c,hx(u,e.map.get(c))),o.delete(c)}),o.forEach(function(u){i.map.set(u,hx(e.map.get(u),n.map.get(u)))})}return i}function Iv(n){return!n||!(n.info||n.map.size)}function sT(n,e){var t=n.map,r=t.get(e);r&&Iv(r)&&(TN.push(r),t.delete(e))}var uT=new Set;function Z8(n,e,t,r){var a=function(p){var v=r.getFieldValue(p,t);return typeof v=="object"&&v},i=a(n);if(i){var o=a(e);if(o&&!St(i)&&!_t(i,o)&&!Object.keys(i).every(function(p){return r.getFieldValue(o,p)!==void 0})){var u=r.getFieldValue(n,"__typename")||r.getFieldValue(e,"__typename"),c=Jo(t),f="".concat(u,".").concat(c);if(!uT.has(f)){uT.add(f);var d=[];!Jt(i)&&!Jt(o)&&[i,o].forEach(function(p){var v=r.getFieldValue(p,"__typename");typeof v=="string"&&!d.includes(v)&&d.push(v)}),globalThis.__DEV__!==!1&&Ce.warn(15,c,u,d.length?"either ensure all objects of type "+d.join(" and ")+" have an ID or a custom merge function, or ":"",f,K({},i),K({},o))}}}}var J8=function(n){ti(e,n);function e(t){t===void 0&&(t={});var r=n.call(this)||this;return r.watches=new Set,r.addTypenameTransform=new XD(Z1),r.assumeImmutableResults=!0,r.makeVar=Q8,r.txCount=0,r.config=L8(t),r.addTypename=!!r.config.addTypename,r.policies=new X8({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return e.prototype.init=function(){var t=this.data=new bh.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var r=this,a=this.storeReader,i=this.config.fragments;this.storeWriter=new Y8(this,this.storeReader=new q8({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:bN(this.config),canon:t?void 0:a&&a.canon,fragments:i}),i),this.maybeBroadcastWatch=yh(function(o,u){return r.broadcastWatch(o,u)},{max:this.config.resultCacheMaxSize||Ja["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(o){var u=o.optimistic?r.optimisticData:r.data;if(zf(u)){var c=o.optimistic,f=o.id,d=o.variables;return u.makeCacheKey(o.query,o.callback,qo({optimistic:c,id:f,variables:d}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var r=t.returnPartialData,a=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(K(K({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:a})).result||null}catch(i){if(i instanceof mN)return null;throw i}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(On.call(t,"id")&&!t.id)return!1;var r=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore(K(K({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var r=this;return this.watches.size||G8(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&ZR(r),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){var r;qo.reset(),ks.reset(),this.addTypenameTransform.resetCache(),(r=this.config.fragments)===null||r===void 0||r.resetCaches();var a=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),a},e.prototype.retain=function(t,r){return(r?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,r){return(r?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(St(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(r){globalThis.__DEV__!==!1&&Ce.warn(r)}},e.prototype.evict=function(t){if(!t.id){if(On.call(t,"id"))return!1;t=K(K({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var r=this;return this.init(),qo.reset(),t&&t.discardWatches?(this.watches.forEach(function(a){return r.maybeBroadcastWatch.forget(a)}),this.watches.clear(),ZR(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var r=this.optimisticData.removeLayer(t);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},e.prototype.batch=function(t){var r=this,a=t.update,i=t.optimistic,o=i===void 0?!0:i,u=t.removeOptimistic,c=t.onWatchUpdated,f,d=function(v){var g=r,y=g.data,x=g.optimisticData;++r.txCount,v&&(r.data=r.optimisticData=v);try{return f=a(r)}finally{--r.txCount,r.data=y,r.optimisticData=x}},p=new Set;return c&&!this.txCount&&this.broadcastWatches(K(K({},t),{onWatchUpdated:function(v){return p.add(v),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,d):o===!1?d(this.data):d(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),c&&p.size?(this.broadcastWatches(K(K({},t),{onWatchUpdated:function(v,g){var y=c.call(this,v,g);return y!==!1&&p.delete(v),y}})),p.size&&p.forEach(function(v){return r.maybeBroadcastWatch.dirty(v)})):this.broadcastWatches(t),f},e.prototype.performTransaction=function(t,r){return this.batch({update:t,optimistic:r||r!==null})},e.prototype.transformDocument=function(t){return this.addTypenameToDocument(this.addFragmentsToDocument(t))},e.prototype.fragmentMatches=function(t,r){return this.policies.fragmentMatches(t,r)},e.prototype.lookupFragment=function(t){var r;return((r=this.config.fragments)===null||r===void 0?void 0:r.lookup(t))||null},e.prototype.broadcastWatches=function(t){var r=this;this.txCount||this.watches.forEach(function(a){return r.maybeBroadcastWatch(a,t)})},e.prototype.addFragmentsToDocument=function(t){var r=this.config.fragments;return r?r.transform(t):t},e.prototype.addTypenameToDocument=function(t){return this.addTypename?this.addTypenameTransform.transformDocument(t):t},e.prototype.broadcastWatch=function(t,r){var a=t.lastDiff,i=this.diff(t);r&&(t.optimistic&&typeof r.optimistic=="string"&&(i.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,t,i,a)===!1)||(!a||!_t(a.result,i.result))&&t.callback(t.lastDiff=i,a)},e}(vN);globalThis.__DEV__!==!1&&(J8.prototype.getMemoryInternals=YH);var dt;(function(n){n[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error"})(dt||(dt={}));function hl(n){return n?n<7:!1}var lT=Object.assign,e9=Object.hasOwnProperty,Vf=function(n){ti(e,n);function e(t){var r=t.queryManager,a=t.queryInfo,i=t.options,o=this,u=e.inactiveOnCreation.getValue();o=n.call(this,function(_){u&&(r.queries.set(o.queryId,a),u=!1);try{var S=_._subscription._observer;S&&!S.error&&(S.error=t9)}catch{}var C=!o.observers.size;o.observers.add(_);var R=o.last;return R&&R.error?_.error&&_.error(R.error):R&&R.result&&_.next&&_.next(o.maskResult(R.result)),C&&o.reobserve().catch(function(){}),function(){o.observers.delete(_)&&!o.observers.size&&o.tearDownQuery()}})||this,o.observers=new Set,o.subscriptions=new Set,o.dirty=!1,o.queryInfo=a,o.queryManager=r,o.waitForOwnResult=P0(i.fetchPolicy),o.isTornDown=!1,o.subscribeToMore=o.subscribeToMore.bind(o),o.maskResult=o.maskResult.bind(o);var c=r.defaultOptions.watchQuery,f=c===void 0?{}:c,d=f.fetchPolicy,p=d===void 0?"cache-first":d,v=i.fetchPolicy,g=v===void 0?p:v,y=i.initialFetchPolicy,x=y===void 0?g==="standby"?p:g:y;o.options=K(K({},i),{initialFetchPolicy:x,fetchPolicy:g}),o.queryId=a.queryId||r.generateQueryId();var w=Js(o.query);return o.queryName=w&&w.name&&w.name.value,o}return Object.defineProperty(e.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(r,a){var i={next:function(u){r(u),t.observers.delete(i),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){o.unsubscribe()},0)},error:a},o=t.subscribe(i)})},e.prototype.resetDiff=function(){this.queryInfo.resetDiff()},e.prototype.getCurrentFullResult=function(t){t===void 0&&(t=!0);var r=this.getLastResult(!0),a=this.queryInfo.networkStatus||r&&r.networkStatus||dt.ready,i=K(K({},r),{loading:hl(a),networkStatus:a}),o=this.options.fetchPolicy,u=o===void 0?"cache-first":o;if(!(P0(u)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers))if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var c=this.queryInfo.getDiff();(c.complete||this.options.returnPartialData)&&(i.data=c.result),_t(i.data,{})&&(i.data=void 0),c.complete?(delete i.partial,c.complete&&i.networkStatus===dt.loading&&(u==="cache-first"||u==="cache-only")&&(i.networkStatus=dt.ready,i.loading=!1)):i.partial=!0,i.networkStatus===dt.ready&&(i.error||i.errors)&&(i.networkStatus=dt.error),globalThis.__DEV__!==!1&&!c.complete&&!this.options.partialRefetch&&!i.loading&&!i.data&&!i.error&&ON(c.missing)}return t&&this.updateLastResult(i),i},e.prototype.getCurrentResult=function(t){return t===void 0&&(t=!0),this.maskResult(this.getCurrentFullResult(t))},e.prototype.isDifferentFromLastResult=function(t,r){if(!this.last)return!0;var a=this.queryManager.getDocumentInfo(this.query),i=this.queryManager.dataMasking,o=i?a.nonReactiveQuery:this.query,u=i||a.hasNonreactiveDirective?!lN(o,this.last.result,t,this.variables):!_t(this.last.result,t);return u||r&&!_t(this.last.variables,r)},e.prototype.getLast=function(t,r){var a=this.last;if(a&&a[t]&&(!r||_t(a.variables,this.variables)))return a[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var r,a={pollInterval:0},i=this.options.fetchPolicy;if(i==="no-cache"?a.fetchPolicy="no-cache":a.fetchPolicy="network-only",globalThis.__DEV__!==!1&&t&&e9.call(t,"variables")){var o=LD(this.query),u=o.variableDefinitions;(!u||!u.some(function(c){return c.variable.name.value==="variables"}))&&globalThis.__DEV__!==!1&&Ce.warn(21,t,((r=o.name)===null||r===void 0?void 0:r.value)||o)}return t&&!_t(this.options.variables,t)&&(a.variables=this.options.variables=K(K({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(a,dt.refetch)},e.prototype.fetchMore=function(t){var r=this,a=K(K({},t.query?t:K(K(K(K({},this.options),{query:this.options.query}),t),{variables:K(K({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"});a.query=this.transformDocument(a.query);var i=this.queryManager.generateQueryId();this.lastQuery=t.query?this.transformDocument(this.options.query):a.query;var o=this.queryInfo,u=o.networkStatus;o.networkStatus=dt.fetchMore,a.notifyOnNetworkStatusChange&&this.observe();var c=new Set,f=t==null?void 0:t.updateQuery,d=this.options.fetchPolicy!=="no-cache";return d||Ce(f,22),this.queryManager.fetchQuery(i,a,dt.fetchMore).then(function(p){if(r.queryManager.removeQuery(i),o.networkStatus===dt.fetchMore&&(o.networkStatus=u),d)r.queryManager.cache.batch({update:function(y){var x=t.updateQuery;x?y.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(w){return x(w,{fetchMoreResult:p.data,variables:a.variables})}):y.writeQuery({query:a.query,variables:a.variables,data:p.data})},onWatchUpdated:function(y){c.add(y.query)}});else{var v=r.getLast("result"),g=f(v.data,{fetchMoreResult:p.data,variables:a.variables});r.reportResult(K(K({},v),{networkStatus:u,loading:hl(u),data:g}),r.variables)}return r.maskResult(p)}).finally(function(){d&&!c.has(r.query)&&r.reobserveCacheFirst()})},e.prototype.subscribeToMore=function(t){var r=this,a=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(i){var o=t.updateQuery;o&&r.updateQuery(function(u,c){return o(u,K({subscriptionData:i},c))})},error:function(i){if(t.onError){t.onError(i);return}globalThis.__DEV__!==!1&&Ce.error(23,i)}});return this.subscriptions.add(a),function(){r.subscriptions.delete(a)&&a.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.silentSetOptions=function(t){var r=eu(this.options,t||{});lT(this.options,r)},e.prototype.setVariables=function(t){return _t(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},dt.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var r=this.queryManager,a=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}),i=a.result,o=a.complete,u=t(i,{variables:this.variables,complete:!!o,previousData:i});u&&(r.cache.writeQuery({query:this.options.query,data:u,variables:this.variables}),r.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,r){if(r.nextFetchPolicy){var a=r.fetchPolicy,i=a===void 0?"cache-first":a,o=r.initialFetchPolicy,u=o===void 0?i:o;i==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(i,{reason:t,options:r,observable:this,initialFetchPolicy:u}):t==="variables-changed"?r.fetchPolicy=u:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},e.prototype.fetch=function(t,r,a){var i=this.queryManager.getOrCreateQuery(this.queryId);return i.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(i,t,r,a)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var r=this,a=r.pollingInfo,i=r.options.pollInterval;if(!i||!this.hasObservers()){a&&(clearTimeout(a.timeout),delete this.pollingInfo);return}if(!(a&&a.interval===i)){Ce(i,24);var o=a||(this.pollingInfo={});o.interval=i;var u=function(){var f,d;t.pollingInfo&&(!hl(t.queryInfo.networkStatus)&&!(!((d=(f=t.options).skipPollAttempt)===null||d===void 0)&&d.call(f))?t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},dt.poll).then(c,c):c())},c=function(){var f=t.pollingInfo;f&&(clearTimeout(f.timeout),f.timeout=setTimeout(u,f.interval))};c()}}},e.prototype.updateLastResult=function(t,r){r===void 0&&(r=this.variables);var a=this.getLastError();return a&&this.last&&!_t(r,this.last.variables)&&(a=void 0),this.last=K({result:this.queryManager.assumeImmutableResults?t:rN(t),variables:r},a?{error:a}:null)},e.prototype.reobserveAsConcast=function(t,r){var a=this;this.isTornDown=!1;var i=r===dt.refetch||r===dt.fetchMore||r===dt.poll,o=this.options.variables,u=this.options.fetchPolicy,c=eu(this.options,t||{}),f=i?c:lT(this.options,c),d=this.transformDocument(f.query);this.lastQuery=d,i||(this.updatePolling(),t&&t.variables&&!_t(t.variables,o)&&f.fetchPolicy!=="standby"&&(f.fetchPolicy===u||typeof f.nextFetchPolicy=="function")&&(this.applyNextFetchPolicy("variables-changed",f),r===void 0&&(r=dt.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=P0(f.fetchPolicy));var p=function(){a.concast===y&&(a.waitForOwnResult=!1)},v=f.variables&&K({},f.variables),g=this.fetch(f,r,d),y=g.concast,x=g.fromLink,w={next:function(_){_t(a.variables,v)&&(p(),a.reportResult(_,v))},error:function(_){_t(a.variables,v)&&(sN(_)||(_=new za({networkError:_})),p(),a.reportError(_,v))}};return!i&&(x||!this.concast)&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=y,this.observer=w),y.addObserver(w),y},e.prototype.reobserve=function(t,r){return WG(this.reobserveAsConcast(t,r).promise.then(this.maskResult))},e.prototype.resubscribeAfterError=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=this.last;this.resetLastResults();var i=this.subscribe.apply(this,t);return this.last=a,i},e.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},e.prototype.reportResult=function(t,r){var a=this.getLastError(),i=this.isDifferentFromLastResult(t,r);(a||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,r),(a||i)&&Lf(this.observers,"next",this.maskResult(t))},e.prototype.reportError=function(t,r){var a=K(K({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:dt.error,loading:!1});this.updateLastResult(a,r),Lf(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e.prototype.transformDocument=function(t){return this.queryManager.transform(t)},e.prototype.maskResult=function(t){return t&&"data"in t?K(K({},t),{data:this.queryManager.maskOperation({document:this.query,data:t.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):t},e.prototype.resetNotifications=function(){this.cancelNotifyTimeout(),this.dirty=!1},e.prototype.cancelNotifyTimeout=function(){this.notifyTimeout&&(clearTimeout(this.notifyTimeout),this.notifyTimeout=void 0)},e.prototype.scheduleNotify=function(){var t=this;this.dirty||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0)))},e.prototype.notify=function(){if(this.cancelNotifyTimeout(),this.dirty&&(this.options.fetchPolicy=="cache-only"||this.options.fetchPolicy=="cache-and-network"||!hl(this.queryInfo.networkStatus))){var t=this.queryInfo.getDiff();t.fromOptimisticTransaction?this.observe():this.reobserveCacheFirst()}this.dirty=!1},e.prototype.reobserveCacheFirst=function(){var t=this.options,r=t.fetchPolicy,a=t.nextFetchPolicy;return r==="cache-and-network"||r==="network-only"?this.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(i,o){return this.nextFetchPolicy=a,typeof this.nextFetchPolicy=="function"?this.nextFetchPolicy(i,o):r}}):this.reobserve()},e.inactiveOnCreation=new Vh,e}(Lt);aN(Vf);function t9(n){globalThis.__DEV__!==!1&&Ce.error(25,n.message,n.stack)}function ON(n){globalThis.__DEV__!==!1&&n&&globalThis.__DEV__!==!1&&Ce.debug(26,n)}function P0(n){return n==="network-only"||n==="no-cache"||n==="standby"}var dl=new(ou?WeakMap:Map);function L0(n,e){var t=n[e];typeof t=="function"&&(n[e]=function(){return dl.set(n,(dl.get(n)+1)%1e15),t.apply(this,arguments)})}var B0=function(){function n(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.document=null,this.lastRequestId=1,this.stopped=!1,this.observableQuery=null;var r=this.cache=e.cache;dl.has(r)||(dl.set(r,0),L0(r,"evict"),L0(r,"modify"),L0(r,"reset"))}return n.prototype.init=function(e){var t=e.networkStatus||dt.loading;return this.variables&&this.networkStatus!==dt.loading&&!_t(this.variables,e.variables)&&(t=dt.setVariables),_t(e.variables,this.variables)||(this.lastDiff=void 0,this.cancel()),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},n.prototype.resetDiff=function(){this.lastDiff=void 0},n.prototype.getDiff=function(){var e=this.getDiffOptions();if(this.lastDiff&&_t(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var t=this.observableQuery;if(t&&t.options.fetchPolicy==="no-cache")return{complete:!1};var r=this.cache.diff(e);return this.updateLastDiff(r,e),r},n.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},n.prototype.setDiff=function(e){var t,r,a=this.lastDiff&&this.lastDiff.diff;e&&!e.complete&&(!((t=this.observableQuery)===null||t===void 0)&&t.getLastError())||(this.updateLastDiff(e),_t(a&&a.result,e&&e.result)||(r=this.observableQuery)===null||r===void 0||r.scheduleNotify())},n.prototype.setObservableQuery=function(e){e!==this.observableQuery&&(this.observableQuery=e,e&&(e.queryInfo=this))},n.prototype.stop=function(){var e;if(!this.stopped){this.stopped=!0,(e=this.observableQuery)===null||e===void 0||e.resetNotifications(),this.cancel();var t=this.observableQuery;t&&t.stopPolling()}},n.prototype.cancel=function(){var e;(e=this.cancelWatch)===null||e===void 0||e.call(this),this.cancelWatch=void 0},n.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var a=K(K({},this.getDiffOptions(e)),{watcher:this,callback:function(i){return t.setDiff(i)}});(!this.lastWatch||!_t(a,this.lastWatch))&&(this.cancel(),this.cancelWatch=this.cache.watch(this.lastWatch=a))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(e,t){var r=this.lastWrite;return!(r&&r.dmCount===dl.get(this.cache)&&_t(t,r.variables)&&_t(e.data,r.result.data))},n.prototype.markResult=function(e,t,r,a){var i=this,o,u=new Zo,c=ea(e.errors)?e.errors.slice(0):[];if((o=this.observableQuery)===null||o===void 0||o.resetNotifications(),"incremental"in e&&ea(e.incremental)){var f=iN(this.getDiff().result,e);e.data=f}else if("hasNext"in e&&e.hasNext){var d=this.getDiff();e.data=u.merge(d.result,e.data)}this.graphQLErrors=c,r.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(r.variables)):a!==0&&(dx(e,r.errorPolicy)?this.cache.performTransaction(function(p){if(i.shouldWrite(e,r.variables))p.writeQuery({query:t,data:e.data,variables:r.variables,overwrite:a===1}),i.lastWrite={result:e,variables:r.variables,dmCount:dl.get(i.cache)};else if(i.lastDiff&&i.lastDiff.diff.complete){e.data=i.lastDiff.diff.result;return}var v=i.getDiffOptions(r.variables),g=p.diff(v);!i.stopped&&_t(i.variables,r.variables)&&i.updateWatch(r.variables),i.updateLastDiff(g,v),g.complete&&(e.data=g.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=dt.ready},n.prototype.markError=function(e){var t;return this.networkStatus=dt.error,this.lastWrite=void 0,(t=this.observableQuery)===null||t===void 0||t.resetNotifications(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},n}();function dx(n,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",r=!Bp(n);return!r&&t&&n.data&&(r=!0),r}var n9=Object.prototype.hasOwnProperty,cT=Object.create(null),r9=function(){function n(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new G1(Ja["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Wi(!1),this.noCacheWarningsByQueryId=new Set;var r=new XD(function(i){return t.cache.transformDocument(i)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking;var a=e.documentTransform;this.documentTransform=a?r.concat(a).concat(r):r,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(ar(27))},n.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(e){return Eo(this,arguments,void 0,function(t){var r,a,i,o,u,c,f,d=t.mutation,p=t.variables,v=t.optimisticResponse,g=t.updateQueries,y=t.refetchQueries,x=y===void 0?[]:y,w=t.awaitRefetchQueries,_=w===void 0?!1:w,S=t.update,C=t.onQueryUpdated,R=t.fetchPolicy,T=R===void 0?((c=this.defaultOptions.mutate)===null||c===void 0?void 0:c.fetchPolicy)||"network-only":R,O=t.errorPolicy,k=O===void 0?((f=this.defaultOptions.mutate)===null||f===void 0?void 0:f.errorPolicy)||"none":O,D=t.keepRootFields,N=t.context;return So(this,function(M){switch(M.label){case 0:return Ce(d,28),Ce(T==="network-only"||T==="no-cache",29),r=this.generateMutationId(),d=this.cache.transformForLink(this.transform(d)),a=this.getDocumentInfo(d).hasClientExports,p=this.getVariables(d,p),a?[4,this.localState.addExportedVariables(d,p,N)]:[3,2];case 1:p=M.sent(),M.label=2;case 2:return i=this.mutationStore&&(this.mutationStore[r]={mutation:d,variables:p,loading:!0,error:null}),o=v&&this.markMutationOptimistic(v,{mutationId:r,document:d,variables:p,fetchPolicy:T,errorPolicy:k,context:N,updateQueries:g,update:S,keepRootFields:D}),this.broadcastQueries(),u=this,[2,new Promise(function(B,z){return D0(u.getObservableFromLink(d,K(K({},N),{optimisticResponse:o?v:void 0}),p,{},!1),function(ee){if(Bp(ee)&&k==="none")throw new za({graphQLErrors:ix(ee)});i&&(i.loading=!1,i.error=null);var re=K({},ee);return typeof x=="function"&&(x=x(re)),k==="ignore"&&Bp(re)&&delete re.errors,u.markMutationResult({mutationId:r,result:re,document:d,variables:p,fetchPolicy:T,errorPolicy:k,context:N,update:S,updateQueries:g,awaitRefetchQueries:_,refetchQueries:x,removeOptimistic:o?r:void 0,onQueryUpdated:C,keepRootFields:D})}).subscribe({next:function(ee){u.broadcastQueries(),(!("hasNext"in ee)||ee.hasNext===!1)&&B(K(K({},ee),{data:u.maskOperation({document:d,data:ee.data,fetchPolicy:T,id:r})}))},error:function(ee){i&&(i.loading=!1,i.error=ee),o&&u.cache.removeOptimistic(r),u.broadcastQueries(),z(ee instanceof za?ee:new za({networkError:ee}))}})})]}})})},n.prototype.markMutationResult=function(e,t){var r=this;t===void 0&&(t=this.cache);var a=e.result,i=[],o=e.fetchPolicy==="no-cache";if(!o&&dx(a,e.errorPolicy)){if(Sl(a)||i.push({result:a.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),Sl(a)&&ea(a.incremental)){var u=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),c=void 0;u.result&&(c=iN(u.result,a)),typeof c<"u"&&(a.data=c,i.push({result:c,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var f=e.updateQueries;f&&this.queries.forEach(function(p,v){var g=p.observableQuery,y=g&&g.queryName;if(!(!y||!n9.call(f,y))){var x=f[y],w=r.queries.get(v),_=w.document,S=w.variables,C=t.diff({query:_,variables:S,returnPartialData:!0,optimistic:!1}),R=C.result,T=C.complete;if(T&&R){var O=x(R,{mutationResult:a,queryName:_&&Af(_)||void 0,queryVariables:S});O&&i.push({result:O,dataId:"ROOT_QUERY",query:_,variables:S})}}})}if(i.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var d=[];if(this.refetchQueries({updateCache:function(p){o||i.forEach(function(x){return p.write(x)});var v=e.update,g=!KG(a)||Sl(a)&&!a.hasNext;if(v){if(!o){var y=p.diff({id:"ROOT_MUTATION",query:r.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});y.complete&&(a=K(K({},a),{data:y.result}),"incremental"in a&&delete a.incremental,"hasNext"in a&&delete a.hasNext)}g&&v(p,a,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&g&&p.modify({id:"ROOT_MUTATION",fields:function(x,w){var _=w.fieldName,S=w.DELETE;return _==="__typename"?x:S}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(p){return d.push(p)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(d).then(function(){return a})}return Promise.resolve(a)},n.prototype.markMutationOptimistic=function(e,t){var r=this,a=typeof e=="function"?e(t.variables,{IGNORE:cT}):e;return a===cT?!1:(this.cache.recordOptimisticTransaction(function(i){try{r.markMutationResult(K(K({},t),{result:{data:a}}),i)}catch(o){globalThis.__DEV__!==!1&&Ce.error(o)}},t.mutationId),!0)},n.prototype.fetchQuery=function(e,t,r){return this.fetchConcastWithInfo(this.getOrCreateQuery(e),t,r).concast.promise},n.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},n.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},n.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},n.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var r={hasClientExports:kH(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:mh(["nonreactive"],e),nonReactiveQuery:IG(e),clientQuery:this.localState.clientQuery(e),serverQuery:ZD([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),defaultVars:$1(Js(e)),asQuery:K(K({},e),{definitions:e.definitions.map(function(a){return a.kind==="OperationDefinition"&&a.operation!=="query"?K(K({},a),{operation:"query"}):a})})};t.set(e,r)}return t.get(e)},n.prototype.getVariables=function(e,t){return K(K({},this.getDocumentInfo(e).defaultVars),t)},n.prototype.watchQuery=function(e){var t=this.transform(e.query);e=K(K({},e),{variables:this.getVariables(t,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var r=new B0(this),a=new Vf({queryManager:this,queryInfo:r,options:e});return a.lastQuery=t,Vf.inactiveOnCreation.getValue()||this.queries.set(a.queryId,r),r.init({document:t,observableQuery:a,variables:a.variables}),a},n.prototype.query=function(e,t){var r=this;t===void 0&&(t=this.generateQueryId()),Ce(e.query,30),Ce(e.query.kind==="Document",31),Ce(!e.returnPartialData,32),Ce(!e.pollInterval,33);var a=this.transform(e.query);return this.fetchQuery(t,K(K({},e),{query:a})).then(function(i){return i&&K(K({},i),{data:r.maskOperation({document:a,data:i.data,fetchPolicy:e.fetchPolicy,id:t})})}).finally(function(){return r.stopQuery(t)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},n.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(ar(34)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=dt.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},n.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var r=new Map,a=new Map,i=new Map,o=new Set;return Array.isArray(e)&&e.forEach(function(u){if(typeof u=="string")a.set(u,u),i.set(u,!1);else if(iG(u)){var c=ks(t.transform(u));a.set(c,Af(u)),i.set(c,!1)}else Zt(u)&&u.query&&o.add(u)}),this.queries.forEach(function(u,c){var f=u.observableQuery,d=u.document;if(f){if(e==="all"){r.set(c,f);return}var p=f.queryName,v=f.options.fetchPolicy;if(v==="standby"||e==="active"&&!f.hasObservers())return;(e==="active"||p&&i.has(p)||d&&i.has(ks(d)))&&(r.set(c,f),p&&i.set(p,!0),d&&i.set(ks(d),!0))}}),o.size&&o.forEach(function(u){var c=Qb("legacyOneTimeQuery"),f=t.getOrCreateQuery(c).init({document:u.query,variables:u.variables}),d=new Vf({queryManager:t,queryInfo:f,options:K(K({},u),{fetchPolicy:"network-only"})});Ce(d.queryId===c),f.setObservableQuery(d),r.set(c,d)}),globalThis.__DEV__!==!1&&i.size&&i.forEach(function(u,c){if(!u){var f=a.get(c);f?globalThis.__DEV__!==!1&&Ce.warn(35,f):globalThis.__DEV__!==!1&&Ce.warn(36)}}),r},n.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(a,i){var o=a.options.fetchPolicy;a.resetLastResults(),(e||o!=="standby"&&o!=="cache-only")&&r.push(a.refetch()),(t.queries.get(i)||a.queryInfo).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},n.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,a=e.variables,i=e.fetchPolicy,o=e.errorPolicy,u=o===void 0?"none":o,c=e.context,f=c===void 0?{}:c,d=e.extensions,p=d===void 0?{}:d;r=this.transform(r),a=this.getVariables(r,a);var v=function(y){return t.getObservableFromLink(r,f,y,p).map(function(x){i!=="no-cache"&&(dx(x,u)&&t.cache.write({query:r,result:x.data,dataId:"ROOT_SUBSCRIPTION",variables:y}),t.broadcastQueries());var w=Bp(x),_=f8(x);if(w||_){var S={};if(w&&(S.graphQLErrors=x.errors),_&&(S.protocolErrors=x.extensions[rw]),u==="none"||_)throw new za(S)}return u==="ignore"&&delete x.errors,x})};if(this.getDocumentInfo(r).hasClientExports){var g=this.localState.addExportedVariables(r,a,f).then(v);return new Lt(function(y){var x=null;return g.then(function(w){return x=w.subscribe(y)},y.error),function(){return x&&x.unsubscribe()}})}return v(a)},n.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},n.prototype.removeQuery=function(e){var t;this.fetchCancelFns.delete(e),this.queries.has(e)&&((t=this.queries.get(e))===null||t===void 0||t.stop(),this.queries.delete(e))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){var t;return(t=e.observableQuery)===null||t===void 0?void 0:t.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(e,t,r,a,i){var o=this,u;i===void 0&&(i=(u=t==null?void 0:t.queryDeduplication)!==null&&u!==void 0?u:this.queryDeduplication);var c,f=this.getDocumentInfo(e),d=f.serverQuery,p=f.clientQuery;if(d){var v=this,g=v.inFlightLinkObservables,y=v.link,x={query:d,variables:r,operationName:Af(d)||void 0,context:this.prepareContext(K(K({},t),{forceFetch:!i})),extensions:a};if(t=x.context,i){var w=ks(d),_=qo(r),S=g.lookup(w,_);if(c=S.observable,!c){var C=new ol([ox(y,x)]);c=S.observable=C,C.beforeNext(function R(T,O){T==="next"&&"hasNext"in O&&O.hasNext?C.beforeNext(R):g.remove(w,_)})}}else c=new ol([ox(y,x)])}else c=new ol([Lt.of({data:{}})]),t=this.prepareContext(t);return p&&(c=D0(c,function(R){return o.localState.runResolvers({document:p,remoteResult:R,context:t,variables:r})})),c},n.prototype.getResultsFromLink=function(e,t,r){var a=e.lastRequestId=this.generateRequestId(),i=this.cache.transformForLink(r.query);return D0(this.getObservableFromLink(i,r.context,r.variables),function(o){var u=ix(o),c=u.length>0,f=r.errorPolicy;if(a>=e.lastRequestId){if(c&&f==="none")throw e.markError(new za({graphQLErrors:u}));e.markResult(o,i,r,t),e.markReady()}var d={data:o.data,loading:!1,networkStatus:dt.ready};return c&&f==="none"&&(d.data=void 0),c&&f!=="ignore"&&(d.errors=u,d.networkStatus=dt.error),d},function(o){var u=sN(o)?o:new za({networkError:o});throw a>=e.lastRequestId&&e.markError(u),u})},n.prototype.fetchConcastWithInfo=function(e,t,r,a){var i=this;r===void 0&&(r=dt.loading),a===void 0&&(a=t.query);var o=this.getVariables(a,t.variables),u=this.defaultOptions.watchQuery,c=t.fetchPolicy,f=c===void 0?u&&u.fetchPolicy||"cache-first":c,d=t.errorPolicy,p=d===void 0?u&&u.errorPolicy||"none":d,v=t.returnPartialData,g=v===void 0?!1:v,y=t.notifyOnNetworkStatusChange,x=y===void 0?!1:y,w=t.context,_=w===void 0?{}:w,S=Object.assign({},t,{query:a,variables:o,fetchPolicy:f,errorPolicy:p,returnPartialData:g,notifyOnNetworkStatusChange:x,context:_}),C=function(D){S.variables=D;var N=i.fetchQueryByPolicy(e,S,r);return S.fetchPolicy!=="standby"&&N.sources.length>0&&e.observableQuery&&e.observableQuery.applyNextFetchPolicy("after-fetch",t),N},R=function(){return i.fetchCancelFns.delete(e.queryId)};this.fetchCancelFns.set(e.queryId,function(D){R(),setTimeout(function(){return T.cancel(D)})});var T,O;if(this.getDocumentInfo(S.query).hasClientExports)T=new ol(this.localState.addExportedVariables(S.query,S.variables,S.context).then(C).then(function(D){return D.sources})),O=!0;else{var k=C(S.variables);O=k.fromLink,T=new ol(k.sources)}return T.promise.then(R,R),{concast:T,fromLink:O}},n.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,a=e.include,i=e.optimistic,o=i===void 0?!1:i,u=e.removeOptimistic,c=u===void 0?o?Qb("refetchQueries"):void 0:u,f=e.onQueryUpdated,d=new Map;a&&this.getObservableQueries(a).forEach(function(v,g){d.set(g,{oq:v,lastDiff:(t.queries.get(g)||v.queryInfo).getDiff()})});var p=new Map;return r&&this.cache.batch({update:r,optimistic:o&&c||!1,removeOptimistic:c,onWatchUpdated:function(v,g,y){var x=v.watcher instanceof B0&&v.watcher.observableQuery;if(x){if(f){d.delete(x.queryId);var w=f(x,g,y);return w===!0&&(w=x.refetch()),w!==!1&&p.set(x,w),w}f!==null&&d.set(x.queryId,{oq:x,lastDiff:y,diff:g})}}}),d.size&&d.forEach(function(v,g){var y=v.oq,x=v.lastDiff,w=v.diff,_;f&&(w||(w=t.cache.diff(y.queryInfo.getDiffOptions())),_=f(y,w,x)),(!f||_===!0)&&(_=y.refetch()),_!==!1&&p.set(y,_),g.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(g)}),c&&this.cache.removeOptimistic(c),p},n.prototype.maskOperation=function(e){var t,r,a,i=e.document,o=e.data;if(globalThis.__DEV__!==!1){var u=e.fetchPolicy,c=e.id,f=(t=Js(i))===null||t===void 0?void 0:t.operation,d=((r=f==null?void 0:f[0])!==null&&r!==void 0?r:"o")+c;this.dataMasking&&u==="no-cache"&&!VH(i)&&!this.noCacheWarningsByQueryId.has(d)&&(this.noCacheWarningsByQueryId.add(d),globalThis.__DEV__!==!1&&Ce.warn(37,(a=Af(i))!==null&&a!==void 0?a:"Unnamed ".concat(f??"operation")))}return this.dataMasking?P8(o,i,this.cache):o},n.prototype.maskFragment=function(e){var t=e.data,r=e.fragment,a=e.fragmentName;return this.dataMasking?pN(t,r,this.cache,a):t},n.prototype.fetchQueryByPolicy=function(e,t,r){var a=this,i=t.query,o=t.variables,u=t.fetchPolicy,c=t.refetchWritePolicy,f=t.errorPolicy,d=t.returnPartialData,p=t.context,v=t.notifyOnNetworkStatusChange,g=e.networkStatus;e.init({document:i,variables:o,networkStatus:r});var y=function(){return e.getDiff()},x=function(R,T){T===void 0&&(T=e.networkStatus||dt.loading);var O=R.result;globalThis.__DEV__!==!1&&!d&&!_t(O,{})&&ON(R.missing);var k=function(D){return Lt.of(K({data:D,loading:hl(T),networkStatus:T},R.complete?null:{partial:!0}))};return O&&a.getDocumentInfo(i).hasForcedResolvers?a.localState.runResolvers({document:i,remoteResult:{data:O},context:p,variables:o,onlyRunForcedResolvers:!0}).then(function(D){return k(D.data||void 0)}):f==="none"&&T===dt.refetch&&Array.isArray(R.missing)?k(void 0):k(O)},w=u==="no-cache"?0:r===dt.refetch&&c!=="merge"?1:2,_=function(){return a.getResultsFromLink(e,w,{query:i,variables:o,context:p,fetchPolicy:u,errorPolicy:f})},S=v&&typeof g=="number"&&g!==r&&hl(r);switch(u){default:case"cache-first":{var C=y();return C.complete?{fromLink:!1,sources:[x(C,e.markReady())]}:d||S?{fromLink:!0,sources:[x(C),_()]}:{fromLink:!0,sources:[_()]}}case"cache-and-network":{var C=y();return C.complete||d||S?{fromLink:!0,sources:[x(C),_()]}:{fromLink:!0,sources:[_()]}}case"cache-only":return{fromLink:!1,sources:[x(y(),e.markReady())]};case"network-only":return S?{fromLink:!0,sources:[x(y()),_()]}:{fromLink:!0,sources:[_()]};case"no-cache":return S?{fromLink:!0,sources:[x(e.getDiff()),_()]}:{fromLink:!0,sources:[_()]};case"standby":return{fromLink:!1,sources:[]}}},n.prototype.getOrCreateQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new B0(this,e)),this.queries.get(e)},n.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return K(K(K({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},n}(),a9=function(){function n(e){var t=e.cache,r=e.client,a=e.resolvers,i=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,r&&(this.client=r),a&&this.addResolvers(a),i&&this.setFragmentMatcher(i)}return n.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){t.resolvers=DR(t.resolvers,r)}):this.resolvers=DR(this.resolvers,e)},n.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(e){return Eo(this,arguments,void 0,function(t){var r=t.document,a=t.remoteResult,i=t.context,o=t.variables,u=t.onlyRunForcedResolvers,c=u===void 0?!1:u;return So(this,function(f){return r?[2,this.resolveDocument(r,a.data,i,o,this.fragmentMatcher,c).then(function(d){return K(K({},a),{data:d.result})})]:[2,a]})})},n.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(e){return mh(["client"],e)&&this.resolvers?e:null},n.prototype.serverQuery=function(e){return JD(e)},n.prototype.prepareContext=function(e){var t=this.cache;return K(K({},e),{cache:t,getCacheKey:function(r){return t.identify(r)}})},n.prototype.addExportedVariables=function(e){return Eo(this,arguments,void 0,function(t,r,a){return r===void 0&&(r={}),a===void 0&&(a={}),So(this,function(i){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,r)||{},this.prepareContext(a),r).then(function(o){return K(K({},r),o.exportedVariables)})]:[2,K({},r)]})})},n.prototype.shouldForceResolvers=function(e){var t=!1;return wa(e,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(t=r.arguments.some(function(a){return a.name.value==="always"&&a.value.kind==="BooleanValue"&&a.value.value===!0}),t))return fm}}}),t},n.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:NG(e),variables:t,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(e,t){return Eo(this,arguments,void 0,function(r,a,i,o,u,c){var f,d,p,v,g,y,x,w,_,S,C;return i===void 0&&(i={}),o===void 0&&(o={}),u===void 0&&(u=function(){return!0}),c===void 0&&(c=!1),So(this,function(R){return f=Uh(r),d=fc(r),p=lc(d),v=this.collectSelectionsToResolve(f,p),g=f.operation,y=g?g.charAt(0).toUpperCase()+g.slice(1):"Query",x=this,w=x.cache,_=x.client,S={fragmentMap:p,context:K(K({},i),{cache:w,client:_}),variables:o,fragmentMatcher:u,defaultOperationType:y,exportedVariables:{},selectionsToResolve:v,onlyRunForcedResolvers:c},C=!1,[2,this.resolveSelectionSet(f.selectionSet,C,a,S).then(function(T){return{result:T,exportedVariables:S.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(e,t,r,a){return Eo(this,void 0,void 0,function(){var i,o,u,c,f,d=this;return So(this,function(p){return i=a.fragmentMap,o=a.context,u=a.variables,c=[r],f=function(v){return Eo(d,void 0,void 0,function(){var g,y;return So(this,function(x){return!t&&!a.selectionsToResolve.has(v)?[2]:zh(v,u)?Xo(v)?[2,this.resolveField(v,t,r,a).then(function(w){var _;typeof w<"u"&&c.push((_={},_[Pi(v)]=w,_))})]:(gG(v)?g=v:(g=i[v.name.value],Ce(g,19,v.name.value)),g&&g.typeCondition&&(y=g.typeCondition.name.value,a.fragmentMatcher(r,y,o))?[2,this.resolveSelectionSet(g.selectionSet,t,r,a).then(function(w){c.push(w)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(f)).then(function(){return gm(c)})]})})},n.prototype.resolveField=function(e,t,r,a){return Eo(this,void 0,void 0,function(){var i,o,u,c,f,d,p,v,g,y=this;return So(this,function(x){return r?(i=a.variables,o=e.name.value,u=Pi(e),c=o!==u,f=r[u]||r[o],d=Promise.resolve(f),(!a.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(p=r.__typename||a.defaultOperationType,v=this.resolvers&&this.resolvers[p],v&&(g=v[c?o:u],g&&(d=Promise.resolve(iw.withValue(this.cache,g,[r,pm(e,i),a.context,{field:e,fragmentMap:a.fragmentMap}]))))),[2,d.then(function(w){var _,S;if(w===void 0&&(w=f),e.directives&&e.directives.forEach(function(R){R.name.value==="export"&&R.arguments&&R.arguments.forEach(function(T){T.name.value==="as"&&T.value.kind==="StringValue"&&(a.exportedVariables[T.value.value]=w)})}),!e.selectionSet||w==null)return w;var C=(S=(_=e.directives)===null||_===void 0?void 0:_.some(function(R){return R.name.value==="client"}))!==null&&S!==void 0?S:!1;if(Array.isArray(w))return y.resolveSubSelectedArray(e,t||C,w,a);if(e.selectionSet)return y.resolveSelectionSet(e.selectionSet,t||C,w,a)})]):[2,null]})})},n.prototype.resolveSubSelectedArray=function(e,t,r,a){var i=this;return Promise.all(r.map(function(o){if(o===null)return null;if(Array.isArray(o))return i.resolveSubSelectedArray(e,t,o,a);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,t,o,a)}))},n.prototype.collectSelectionsToResolve=function(e,t){var r=function(o){return!Array.isArray(o)},a=this.selectionsToResolveCache;function i(o){if(!a.has(o)){var u=new Set;a.set(o,u),wa(o,{Directive:function(c,f,d,p,v){c.name.value==="client"&&v.forEach(function(g){r(g)&&_R(g)&&u.add(g)})},FragmentSpread:function(c,f,d,p,v){var g=t[c.name.value];Ce(g,20,c.name.value);var y=i(g);y.size>0&&(v.forEach(function(x){r(x)&&_R(x)&&u.add(x)}),u.add(c),y.forEach(function(x){u.add(x)}))}})}return a.get(o)}return i(e)},n}(),fT=!1,i9=function(){function n(e){var t=this,r;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!e.cache)throw ar(16);var a=e.uri,i=e.credentials,o=e.headers,u=e.cache,c=e.documentTransform,f=e.ssrMode,d=f===void 0?!1:f,p=e.ssrForceFetchDelay,v=p===void 0?0:p,g=e.connectToDevTools,y=e.queryDeduplication,x=y===void 0?!0:y,w=e.defaultOptions,_=e.defaultContext,S=e.assumeImmutableResults,C=S===void 0?u.assumeImmutableResults:S,R=e.resolvers,T=e.typeDefs,O=e.fragmentMatcher,k=e.name,D=e.version,N=e.devtools,M=e.dataMasking,B=e.link;B||(B=a?new O8({uri:a,credentials:i,headers:o}):jh.empty()),this.link=B,this.cache=u,this.disableNetworkFetches=d||v>0,this.queryDeduplication=x,this.defaultOptions=w||Object.create(null),this.typeDefs=T,this.devtoolsConfig=K(K({},N),{enabled:(r=N==null?void 0:N.enabled)!==null&&r!==void 0?r:g}),this.devtoolsConfig.enabled===void 0&&(this.devtoolsConfig.enabled=globalThis.__DEV__!==!1),v&&setTimeout(function(){return t.disableNetworkFetches=!1},v),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=z1,this.localState=new a9({cache:u,client:this,resolvers:R,fragmentMatcher:O}),this.queryManager=new r9({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:_,documentTransform:c,queryDeduplication:x,ssrMode:d,dataMasking:!!M,clientAwareness:{name:k,version:D},localState:this.localState,assumeImmutableResults:C,onBroadcast:this.devtoolsConfig.enabled?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return n.prototype.connectToDevTools=function(){if(!(typeof window>"u")){var e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this,!fT&&globalThis.__DEV__!==!1&&(fT=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol)&&setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var r=window.navigator,a=r&&r.userAgent,i=void 0;typeof a=="string"&&(a.indexOf("Chrome/")>-1?i="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":a.indexOf("Firefox/")>-1&&(i="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),i&&globalThis.__DEV__!==!1&&Ce.log("Download the Apollo DevTools for a better development experience: %s",i)}},1e4))}},Object.defineProperty(n.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Bf(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=K(K({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},n.prototype.query=function(e){return this.defaultOptions.query&&(e=Bf(this.defaultOptions.query,e)),Ce(e.fetchPolicy!=="cache-and-network",17),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=K(K({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},n.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Bf(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},n.prototype.subscribe=function(e){var t=this,r=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(e).map(function(a){return K(K({},a),{data:t.queryManager.maskOperation({document:e.query,data:a.data,fetchPolicy:e.fetchPolicy,id:r})})})},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},n.prototype.watchFragment=function(e){var t;return this.cache.watchFragment(K(K({},e),(t={},t[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,t)))},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},n.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},n.prototype.__requestRaw=function(e){return ox(this.link,e)},n.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},n.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},n.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},n.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),r=[],a=[];t.forEach(function(o,u){r.push(u),a.push(o)});var i=Promise.all(a);return i.queries=r,i.results=a,i.catch(function(o){globalThis.__DEV__!==!1&&Ce.debug(18,o)}),i},n.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},n.prototype.extract=function(e){return this.cache.extract(e)},n.prototype.restore=function(e){return this.cache.restore(e)},n.prototype.addResolvers=function(e){this.localState.addResolvers(e)},n.prototype.setResolvers=function(e){this.localState.setResolvers(e)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},n.prototype.setLink=function(e){this.link=this.queryManager.link=e},Object.defineProperty(n.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),n}();globalThis.__DEV__!==!1&&(i9.prototype.getMemoryInternals=XH);var Vp=new Map,px=new Map,AN=!0,Mv=!1;function kN(n){return n.replace(/[\s,]+/g," ").trim()}function o9(n){return kN(n.source.body.substring(n.start,n.end))}function s9(n){var e=new Set,t=[];return n.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var a=r.name.value,i=o9(r.loc),o=px.get(a);o&&!o.has(i)?AN&&console.warn("Warning: fragment with name "+a+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||px.set(a,o=new Set),o.add(i),e.has(i)||(e.add(i),t.push(r))}else t.push(r)}),K(K({},n),{definitions:t})}function u9(n){var e=new Set(n.definitions);e.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(a){var i=r[a];i&&typeof i=="object"&&e.add(i)})});var t=n.loc;return t&&(delete t.startToken,delete t.endToken),n}function l9(n){var e=kN(n);if(!Vp.has(e)){var t=xH(n,{experimentalFragmentVariables:Mv,allowLegacyFragmentVariables:Mv});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Vp.set(e,u9(s9(t)))}return Vp.get(e)}function xh(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof n=="string"&&(n=[n]);var r=n[0];return e.forEach(function(a,i){a&&a.kind==="Document"?r+=a.loc.source.body:r+=a,r+=n[i+1]}),l9(r)}function c9(){Vp.clear(),px.clear()}function f9(){AN=!1}function h9(){Mv=!0}function d9(){Mv=!1}var Ef={gql:xh,resetCaches:c9,disableFragmentWarnings:f9,enableExperimentalFragmentVariables:h9,disableExperimentalFragmentVariables:d9};(function(n){n.gql=Ef.gql,n.resetCaches=Ef.resetCaches,n.disableFragmentWarnings=Ef.disableFragmentWarnings,n.enableExperimentalFragmentVariables=Ef.enableExperimentalFragmentVariables,n.disableExperimentalFragmentVariables=Ef.disableExperimentalFragmentVariables})(xh||(xh={}));xh.default=xh;var z0={exports:{}},hT;function p9(){return hT||(hT=1,function(n){n.exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=void 0,n.exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=void 0,n.exports.__SERVER_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=void 0,Object.assign(n.exports,Fv())}(z0)),z0.exports}var Ft=p9();const v9=mx(Ft),DN=YM({__proto__:null,default:v9},[Ft]);var dT=H1?Symbol.for("__APOLLO_CONTEXT__"):"__APOLLO_CONTEXT__";function lw(){Ce("createContext"in DN,54);var n=Ft.createContext[dT];return n||(Object.defineProperty(Ft.createContext,dT,{value:n=Ft.createContext({}),enumerable:!1,writable:!1,configurable:!0}),n.displayName="ApolloContext"),n}var h7=function(n){var e=n.client,t=n.children,r=lw(),a=Ft.useContext(r),i=Ft.useMemo(function(){return K(K({},a),{client:e||a.client})},[a,e]);return Ce(i.client,55),Ft.createElement(r.Provider,{value:i},t)};function cw(n){var e=Ft.useContext(lw()),t=n||e.client;return Ce(!!t,58),t}var pT=!1,m9="useSyncExternalStore",g9=DN[m9],y9=g9||function(n,e,t){var r=e();globalThis.__DEV__!==!1&&!pT&&r!==e()&&(pT=!0,globalThis.__DEV__!==!1&&Ce.error(68));var a=Ft.useState({inst:{value:r,getSnapshot:e}}),i=a[0].inst,o=a[1];return zH?Ft.useLayoutEffect(function(){Object.assign(i,{value:r,getSnapshot:e}),U0(i)&&o({inst:i})},[n,r,e]):Object.assign(i,{value:r,getSnapshot:e}),Ft.useEffect(function(){return U0(i)&&o({inst:i}),n(function(){U0(i)&&o({inst:i})})},[n]),r};function U0(n){var e=n.value,t=n.getSnapshot;try{return e!==t()}catch{return!0}}var $a;(function(n){n[n.Query=0]="Query",n[n.Mutation=1]="Mutation",n[n.Subscription=2]="Subscription"})($a||($a={}));var Ds;function vT(n){var e;switch(n){case $a.Query:e="Query";break;case $a.Mutation:e="Mutation";break;case $a.Subscription:e="Subscription";break}return e}function NN(n){Ds||(Ds=new G1(Ja.parser||1e3));var e=Ds.get(n);if(e)return e;var t,r,a;Ce(!!n&&!!n.kind,70,n);for(var i=[],o=[],u=[],c=[],f=0,d=n.definitions;f<d.length;f++){var p=d[f];if(p.kind==="FragmentDefinition"){i.push(p);continue}if(p.kind==="OperationDefinition")switch(p.operation){case"query":o.push(p);break;case"mutation":u.push(p);break;case"subscription":c.push(p);break}}Ce(!i.length||o.length||u.length||c.length,71),Ce(o.length+u.length+c.length<=1,72,n,o.length,c.length,u.length),r=o.length?$a.Query:$a.Mutation,!o.length&&!u.length&&(r=$a.Subscription);var v=o.length?o:u.length?u:c;Ce(v.length===1,73,n,v.length);var g=v[0];t=g.variableDefinitions||[],g.name&&g.name.kind==="Name"?a=g.name.value:a="data";var y={name:a,type:r,variables:t};return Ds.set(n,y),y}NN.resetCache=function(){Ds=void 0};globalThis.__DEV__!==!1&&Q1("parser",function(){return Ds?Ds.size:0});function IN(n,e){var t=NN(n),r=vT(e),a=vT(t.type);Ce(t.type===e,74,r,r,a)}var b9=DD?Ft.useLayoutEffect:Ft.useEffect,x9=Symbol.for("apollo.hook.wrappers");function w9(n,e,t){var r=t.queryManager,a=r&&r[x9],i=a&&a[n];return i?i(e):e}var _9=Object.prototype.hasOwnProperty;function mT(){}var jp=Symbol();function d7(n,e){return e===void 0&&(e=Object.create(null)),w9("useQuery",E9,cw(e&&e.client))(n,e)}function E9(n,e){var t=C9(n,e),r=t.result,a=t.obsQueryFields;return Ft.useMemo(function(){return K(K({},r),a)},[r,a])}function S9(n,e,t,r,a){function i(p){var v;IN(e,$a.Query);var g={client:n,query:e,observable:r&&r.getSSRObservable(a())||Vf.inactiveOnCreation.withValue(!r,function(){return n.watchQuery(MN(void 0,n,t,a()))}),resultData:{previousData:(v=p==null?void 0:p.resultData.current)===null||v===void 0?void 0:v.data}};return g}var o=Ft.useState(i),u=o[0],c=o[1];function f(p){var v,g;Object.assign(u.observable,(v={},v[jp]=p,v));var y=u.resultData;c(K(K({},u),{query:p.query,resultData:Object.assign(y,{previousData:((g=y.current)===null||g===void 0?void 0:g.data)||y.previousData,current:void 0})}))}if(n!==u.client||e!==u.query){var d=i(u);return c(d),[d,f]}return[u,f]}function C9(n,e){var t=cw(e.client),r=Ft.useContext(lw()).renderPromises,a=!!r,i=t.disableNetworkFetches,o=e.ssr!==!1&&!e.skip,u=e.partialRefetch,c=A9(t,n,e,a),f=S9(t,n,e,r,c),d=f[0],p=d.observable,v=d.resultData,g=f[1],y=c(p);O9(v,p,t,e,y);var x=Ft.useMemo(function(){return I9(p)},[p]);T9(p,r,o);var w=R9(v,p,t,e,y,i,u,a,{onCompleted:e.onCompleted||mT,onError:e.onError||mT});return{result:w,obsQueryFields:x,observable:p,resultData:v,client:t,onQueryExecuted:g}}function R9(n,e,t,r,a,i,o,u,c){var f=Ft.useRef(c);Ft.useEffect(function(){f.current=c});var d=(u||i)&&r.ssr===!1&&!r.skip?PN:r.skip||a.fetchPolicy==="standby"?LN:void 0,p=n.previousData,v=Ft.useMemo(function(){return d&&FN(d,p,e,t)},[t,e,d,p]);return y9(Ft.useCallback(function(g){if(u)return function(){};var y=function(){var _=n.current,S=e.getCurrentResult();_&&_.loading===S.loading&&_.networkStatus===S.networkStatus&&_t(_.data,S.data)||vx(S,n,e,t,o,g,f.current)},x=function(_){if(w.current.unsubscribe(),w.current=e.resubscribeAfterError(y,x),!_9.call(_,"graphQLErrors"))throw _;var S=n.current;(!S||S&&S.loading||!_t(_,S.error))&&vx({data:S&&S.data,error:_,loading:!1,networkStatus:dt.error},n,e,t,o,g,f.current)},w={current:e.subscribe(y,x)};return function(){setTimeout(function(){return w.current.unsubscribe()})}},[i,u,e,n,o,t]),function(){return v||gT(n,e,f.current,o,t)},function(){return v||gT(n,e,f.current,o,t)})}function T9(n,e,t){e&&t&&(e.registerSSRObservable(n),n.getCurrentResult().loading&&e.addObservableQueryPromise(n))}function O9(n,e,t,r,a){var i;e[jp]&&!_t(e[jp],a)&&(e.reobserve(MN(e,t,r,a)),n.previousData=((i=n.current)===null||i===void 0?void 0:i.data)||n.previousData,n.current=void 0),e[jp]=a}function A9(n,e,t,r){t===void 0&&(t={});var a=t.skip;t.ssr,t.onCompleted,t.onError;var i=t.defaultOptions,o=ma(t,["skip","ssr","onCompleted","onError","defaultOptions"]);return function(u){var c=Object.assign(o,{query:e});return r&&(c.fetchPolicy==="network-only"||c.fetchPolicy==="cache-and-network")&&(c.fetchPolicy="cache-first"),c.variables||(c.variables={}),a?(c.initialFetchPolicy=c.initialFetchPolicy||c.fetchPolicy||yT(i,n.defaultOptions),c.fetchPolicy="standby"):c.fetchPolicy||(c.fetchPolicy=(u==null?void 0:u.options.initialFetchPolicy)||yT(i,n.defaultOptions)),c}}function MN(n,e,t,r){var a=[],i=e.defaultOptions.watchQuery;return i&&a.push(i),t.defaultOptions&&a.push(t.defaultOptions),a.push(eu(n&&n.options,r)),a.reduce(Bf)}function vx(n,e,t,r,a,i,o){var u=e.current;u&&u.data&&(e.previousData=u.data),!n.error&&ea(n.errors)&&(n.error=new za({graphQLErrors:n.errors})),e.current=FN(N9(n,t,a),e.previousData,t,r),i(),k9(n,u==null?void 0:u.networkStatus,o)}function k9(n,e,t){if(!n.loading){var r=D9(n);Promise.resolve().then(function(){r?t.onError(r):n.data&&e!==n.networkStatus&&n.networkStatus===dt.ready&&t.onCompleted(n.data)}).catch(function(a){globalThis.__DEV__!==!1&&Ce.warn(a)})}}function gT(n,e,t,r,a){return n.current||vx(e.getCurrentResult(),n,e,a,r,function(){},t),n.current}function yT(n,e){var t;return(n==null?void 0:n.fetchPolicy)||((t=e==null?void 0:e.watchQuery)===null||t===void 0?void 0:t.fetchPolicy)||"cache-first"}function D9(n){return ea(n.errors)?new za({graphQLErrors:n.errors}):n.error}function FN(n,e,t,r){var a=n.data;n.partial;var i=ma(n,["data","partial"]),o=K(K({data:a},i),{client:r,observable:t,variables:t.variables,called:n!==PN&&n!==LN,previousData:e});return o}function N9(n,e,t){return n.partial&&t&&!n.loading&&(!n.data||Object.keys(n.data).length===0)&&e.options.fetchPolicy!=="cache-only"?(e.refetch(),K(K({},n),{loading:!0,networkStatus:dt.refetch})):n}var PN=tc({loading:!0,data:void 0,error:void 0,networkStatus:dt.loading}),LN=tc({loading:!1,data:void 0,error:void 0,networkStatus:dt.ready});function I9(n){return{refetch:n.refetch.bind(n),reobserve:n.reobserve.bind(n),fetchMore:n.fetchMore.bind(n),updateQuery:n.updateQuery.bind(n),startPolling:n.startPolling.bind(n),stopPolling:n.stopPolling.bind(n),subscribeToMore:n.subscribeToMore.bind(n)}}function p7(n,e){var t=cw(void 0);IN(n,$a.Mutation);var r=Ft.useState({called:!1,loading:!1,client:t}),a=r[0],i=r[1],o=Ft.useRef({result:a,mutationId:0,isMounted:!0,client:t,mutation:n,options:e});b9(function(){Object.assign(o.current,{client:t,options:e,mutation:n})});var u=Ft.useCallback(function(f){f===void 0&&(f={});var d=o.current,p=d.options,v=d.mutation,g=K(K({},p),{mutation:v}),y=f.client||o.current.client;!o.current.result.loading&&!g.ignoreResults&&o.current.isMounted&&i(o.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:y});var x=++o.current.mutationId,w=Bf(g,f);return y.mutate(w).then(function(_){var S,C,R=_.data,T=_.errors,O=T&&T.length>0?new za({graphQLErrors:T}):void 0,k=f.onError||((S=o.current.options)===null||S===void 0?void 0:S.onError);if(O&&k&&k(O,w),x===o.current.mutationId&&!w.ignoreResults){var D={called:!0,loading:!1,data:R,error:O,client:y};o.current.isMounted&&!_t(o.current.result,D)&&i(o.current.result=D)}var N=f.onCompleted||((C=o.current.options)===null||C===void 0?void 0:C.onCompleted);return O||N==null||N(_.data,w),_},function(_){var S;if(x===o.current.mutationId&&o.current.isMounted){var C={loading:!1,error:_,data:void 0,called:!0,client:y};_t(o.current.result,C)||i(o.current.result=C)}var R=f.onError||((S=o.current.options)===null||S===void 0?void 0:S.onError);if(R)return R(_,w),{data:void 0,errors:_};throw _})},[]),c=Ft.useCallback(function(){if(o.current.isMounted){var f={called:!1,loading:!1,client:o.current.client};Object.assign(o.current,{mutationId:0,result:f}),i(f)}},[]);return Ft.useEffect(function(){var f=o.current;return f.isMounted=!0,function(){f.isMounted=!1}},[]),[u,K({reset:c},a)]}export{mr as A,u7 as B,xh as C,d7 as D,p7 as E,i9 as F,h7 as G,W9 as H,J8 as I,e7 as J,j9 as K,$9 as L,V9 as M,Y4 as N,Y9 as O,P9 as P,G9 as Q,zO as R,vW as T,J9 as a,Z9 as b,t7 as c,s4 as d,uL as e,z9 as f,q9 as g,X9 as h,ir as i,e3 as j,K9 as k,Ex as l,U9 as m,L9 as n,B9 as o,n7 as p,H9 as q,J as r,Zr as s,i7 as t,lO as u,s7 as v,BW as w,a7 as x,o7 as y,r7 as z};
